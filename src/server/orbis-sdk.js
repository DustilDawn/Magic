var orbisSdk=(()=>{var X5=Object.create;var _c=Object.defineProperty;var Z5=Object.getOwnPropertyDescriptor;var Q5=Object.getOwnPropertyNames;var e8=Object.getPrototypeOf,t8=Object.prototype.hasOwnProperty;var n1=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+n+'" is not supported')});var it=(n,t)=>()=>(n&&(t=n(n=0)),t);var de=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),Ze=(n,t)=>{for(var r in t)_c(n,r,{get:t[r],enumerable:!0})},i1=(n,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Q5(t))!t8.call(n,o)&&o!==r&&_c(n,o,{get:()=>t[o],enumerable:!(i=Z5(t,o))||i.enumerable});return n};var He=(n,t,r)=>(r=n!=null?X5(e8(n)):{},i1(t||!n||!n.__esModule?_c(r,"default",{value:n,enumerable:!0}):r,n)),La=n=>i1(_c({},"__esModule",{value:!0}),n);function a1(n,t,r){t=t||[],r=r||0;for(var i=r;n>=o8;)t[r++]=n&255|o1,n/=128;for(;n&i8;)t[r++]=n&255|o1,n>>>=7;return t[r]=n|0,a1.bytes=r-i+1,t}function wh(n,i){var r=0,i=i||0,o=0,s=i,a,f=n.length;do{if(s>=f)throw wh.bytes=0,new RangeError("Could not decode varint");a=n[s++],r+=o<28?(a&s1)<<o:(a&s1)*Math.pow(2,o),o+=7}while(a>=a8);return wh.bytes=s-i,r}var r8,o1,n8,i8,o8,s8,a8,s1,f8,c8,u8,l8,h8,d8,p8,m8,b8,g8,y8,v8,Ba,f1=it(()=>{r8=a1,o1=128,n8=127,i8=~n8,o8=Math.pow(2,31);s8=wh,a8=128,s1=127;f8=Math.pow(2,7),c8=Math.pow(2,14),u8=Math.pow(2,21),l8=Math.pow(2,28),h8=Math.pow(2,35),d8=Math.pow(2,42),p8=Math.pow(2,49),m8=Math.pow(2,56),b8=Math.pow(2,63),g8=function(n){return n<f8?1:n<c8?2:n<u8?3:n<l8?4:n<h8?5:n<d8?6:n<p8?7:n<m8?8:n<b8?9:10},y8={encode:r8,decode:s8,encodingLength:g8},v8=y8,Ba=v8});var ds={};Ze(ds,{decode:()=>hs,encodeTo:()=>mo,encodingLength:()=>bo});var hs,mo,bo,Sc=it(()=>{f1();hs=(n,t=0)=>[Ba.decode(n,t),Ba.decode.bytes],mo=(n,t,r=0)=>(Ba.encode(n,t,r),t),bo=n=>Ba.encodingLength(n)});var Ua={};Ze(Ua,{coerce:()=>Dr,empty:()=>c1,equals:()=>Eh,fromHex:()=>w8,fromString:()=>_h,isBinary:()=>E8,toHex:()=>x8,toString:()=>Sh});var c1,x8,w8,Eh,Dr,E8,_h,Sh,Ei=it(()=>{c1=new Uint8Array(0),x8=n=>n.reduce((t,r)=>t+r.toString(16).padStart(2,"0"),""),w8=n=>{let t=n.match(/../g);return t?new Uint8Array(t.map(r=>parseInt(r,16))):c1},Eh=(n,t)=>{if(n===t)return!0;if(n.byteLength!==t.byteLength)return!1;for(let r=0;r<n.byteLength;r++)if(n[r]!==t[r])return!1;return!0},Dr=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},E8=n=>n instanceof ArrayBuffer||ArrayBuffer.isView(n),_h=n=>new TextEncoder().encode(n),Sh=n=>new TextDecoder().decode(n)});var yo={};Ze(yo,{Digest:()=>go,create:()=>wn,decode:()=>$a,equals:()=>Ah});var wn,$a,Ah,go,vo=it(()=>{Ei();Sc();wn=(n,t)=>{let r=t.byteLength,i=bo(n),o=i+bo(r),s=new Uint8Array(o+r);return mo(n,s,0),mo(r,s,i),s.set(t,o),new go(n,r,t,s)},$a=n=>{let t=Dr(n),[r,i]=hs(t),[o,s]=hs(t.subarray(i)),a=t.subarray(i+s);if(a.byteLength!==o)throw new Error("Incorrect length");return new go(r,o,a,t)},Ah=(n,t)=>n===t?!0:n.code===t.code&&n.size===t.size&&Eh(n.bytes,t.bytes),go=class{constructor(t,r,i,o){this.code=t,this.size=r,this.digest=i,this.bytes=o}}});function _8(n,t){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var o=0;o<n.length;o++){var s=n.charAt(o),a=s.charCodeAt(0);if(r[a]!==255)throw new TypeError(s+" is ambiguous");r[a]=o}var f=n.length,u=n.charAt(0),d=Math.log(f)/Math.log(256),h=Math.log(256)/Math.log(f);function y(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var M=0,F=0,D=0,$=A.length;D!==$&&A[D]===0;)D++,M++;for(var K=($-D)*h+1>>>0,j=new Uint8Array(K);D!==$;){for(var X=A[D],B=0,L=K-1;(X!==0||B<F)&&L!==-1;L--,B++)X+=256*j[L]>>>0,j[L]=X%f>>>0,X=X/f>>>0;if(X!==0)throw new Error("Non-zero carry");F=B,D++}for(var U=K-F;U!==K&&j[U]===0;)U++;for(var te=u.repeat(M);U<K;++U)te+=n.charAt(j[U]);return te}function C(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;var M=0;if(A[M]!==" "){for(var F=0,D=0;A[M]===u;)F++,M++;for(var $=(A.length-M)*d+1>>>0,K=new Uint8Array($);A[M];){var j=r[A.charCodeAt(M)];if(j===255)return;for(var X=0,B=$-1;(j!==0||X<D)&&B!==-1;B--,X++)j+=f*K[B]>>>0,K[B]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");D=X,M++}if(A[M]!==" "){for(var L=$-D;L!==$&&K[L]===0;)L++;for(var U=new Uint8Array(F+($-L)),te=F;L!==$;)U[te++]=K[L++];return U}}}function O(A){var M=C(A);if(M)return M;throw new Error(`Non-${t} character`)}return{encode:y,decodeUnsafe:C,decode:O}}var S8,A8,u1,l1=it(()=>{S8=_8,A8=S8,u1=A8});var Th,Mh,kh,h1,Ch,ps,_i,T8,M8,gt,Wr=it(()=>{l1();Ei();Th=class{constructor(t,r,i){this.name=t,this.prefix=r,this.baseEncode=i}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},Mh=class{constructor(t,r,i){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return h1(this,t)}},kh=class{constructor(t){this.decoders=t}or(t){return h1(this,t)}decode(t){let r=t[0],i=this.decoders[r];if(i)return i.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},h1=(n,t)=>new kh({...n.decoders||{[n.prefix]:n},...t.decoders||{[t.prefix]:t}}),Ch=class{constructor(t,r,i,o){this.name=t,this.prefix=r,this.baseEncode=i,this.baseDecode=o,this.encoder=new Th(t,r,i),this.decoder=new Mh(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}},ps=({name:n,prefix:t,encode:r,decode:i})=>new Ch(n,t,r,i),_i=({prefix:n,name:t,alphabet:r})=>{let{encode:i,decode:o}=u1(r,t);return ps({prefix:n,name:t,encode:i,decode:s=>Dr(o(s))})},T8=(n,t,r,i)=>{let o={};for(let h=0;h<t.length;++h)o[t[h]]=h;let s=n.length;for(;n[s-1]==="=";)--s;let a=new Uint8Array(s*r/8|0),f=0,u=0,d=0;for(let h=0;h<s;++h){let y=o[n[h]];if(y===void 0)throw new SyntaxError(`Non-${i} character`);u=u<<r|y,f+=r,f>=8&&(f-=8,a[d++]=255&u>>f)}if(f>=r||255&u<<8-f)throw new SyntaxError("Unexpected end of data");return a},M8=(n,t,r)=>{let i=t[t.length-1]==="=",o=(1<<r)-1,s="",a=0,f=0;for(let u=0;u<n.length;++u)for(f=f<<8|n[u],a+=8;a>r;)a-=r,s+=t[o&f>>a];if(a&&(s+=t[o&f<<r-a]),i)for(;s.length*r&7;)s+="=";return s},gt=({name:n,prefix:t,bitsPerChar:r,alphabet:i})=>ps({prefix:t,name:n,encode(o){return M8(o,i,r)},decode(o){return T8(o,i,r,n)}})});var Oh={};Ze(Oh,{base58btc:()=>Rr,base58flickr:()=>k8});var Rr,k8,Ac=it(()=>{Wr();Rr=_i({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),k8=_i({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var Dh={};Ze(Dh,{base32:()=>ms,base32hex:()=>R8,base32hexpad:()=>N8,base32hexpadupper:()=>P8,base32hexupper:()=>I8,base32pad:()=>O8,base32padupper:()=>D8,base32upper:()=>C8,base32z:()=>L8});var ms,C8,O8,D8,R8,I8,N8,P8,L8,Rh=it(()=>{Wr();ms=gt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),C8=gt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),O8=gt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),D8=gt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),R8=gt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),I8=gt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),N8=gt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),P8=gt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),L8=gt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var Te,B8,U8,$8,Fa,F8,d1,p1,Tc,Mc,q8,j8,H8,Yr=it(()=>{Sc();vo();Ac();Rh();Ei();Te=class{constructor(t,r,i,o){this.code=r,this.version=t,this.multihash=i,this.bytes=o,this.byteOffset=o.byteOffset,this.byteLength=o.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Mc,byteLength:Mc,code:Tc,version:Tc,multihash:Tc,bytes:Tc,_baseCache:Mc,asCID:Mc})}toV0(){switch(this.version){case 0:return this;default:{let{code:t,multihash:r}=this;if(t!==Fa)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==F8)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Te.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:t,digest:r}=this.multihash,i=wn(t,r);return Te.createV1(this.code,i)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(t){return t&&this.code===t.code&&this.version===t.version&&Ah(this.multihash,t.multihash)}toString(t){let{bytes:r,version:i,_baseCache:o}=this;switch(i){case 0:return U8(r,o,t||Rr.encoder);default:return $8(r,o,t||ms.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(t){return j8(/^0\.0/,H8),!!(t&&(t[p1]||t.asCID===t))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(t){if(t instanceof Te)return t;if(t!=null&&t.asCID===t){let{version:r,code:i,multihash:o,bytes:s}=t;return new Te(r,i,o,s||d1(r,i,o.bytes))}else if(t!=null&&t[p1]===!0){let{version:r,multihash:i,code:o}=t,s=$a(i);return Te.create(r,o,s)}else return null}static create(t,r,i){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(t){case 0:{if(r!==Fa)throw new Error(`Version 0 CID must use dag-pb (code: ${Fa}) block encoding`);return new Te(t,r,i,i.bytes)}case 1:{let o=d1(t,r,i.bytes);return new Te(t,r,i,o)}default:throw new Error("Invalid version")}}static createV0(t){return Te.create(0,Fa,t)}static createV1(t,r){return Te.create(1,t,r)}static decode(t){let[r,i]=Te.decodeFirst(t);if(i.length)throw new Error("Incorrect length");return r}static decodeFirst(t){let r=Te.inspectBytes(t),i=r.size-r.multihashSize,o=Dr(t.subarray(i,i+r.multihashSize));if(o.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=o.subarray(r.multihashSize-r.digestSize),a=new go(r.multihashCode,r.digestSize,s,o);return[r.version===0?Te.createV0(a):Te.createV1(r.codec,a),t.subarray(r.size)]}static inspectBytes(t){let r=0,i=()=>{let[y,C]=hs(t.subarray(r));return r+=C,y},o=i(),s=Fa;if(o===18?(o=0,r=0):o===1&&(s=i()),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);let a=r,f=i(),u=i(),d=r+u,h=d-a;return{version:o,codec:s,multihashCode:f,digestSize:u,multihashSize:h,size:d}}static parse(t,r){let[i,o]=B8(t,r),s=Te.decode(o);return s._baseCache.set(i,t),s}},B8=(n,t)=>{switch(n[0]){case"Q":{let r=t||Rr;return[Rr.prefix,r.decode(`${Rr.prefix}${n}`)]}case Rr.prefix:{let r=t||Rr;return[Rr.prefix,r.decode(n)]}case ms.prefix:{let r=t||ms;return[ms.prefix,r.decode(n)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[n[0],t.decode(n)]}}},U8=(n,t,r)=>{let{prefix:i}=r;if(i!==Rr.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let o=t.get(i);if(o==null){let s=r.encode(n).slice(1);return t.set(i,s),s}else return o},$8=(n,t,r)=>{let{prefix:i}=r,o=t.get(i);if(o==null){let s=r.encode(n);return t.set(i,s),s}else return o},Fa=112,F8=18,d1=(n,t,r)=>{let i=bo(n),o=i+bo(t),s=new Uint8Array(o+r.byteLength);return mo(n,s,0),mo(t,s,i),s.set(r,o),s},p1=Symbol.for("@ipld/js-cid/CID"),Tc={writable:!1,configurable:!1,enumerable:!0},Mc={writable:!1,enumerable:!1,configurable:!1},q8="0.0.0-dev",j8=(n,t)=>{if(n.test(q8))console.warn(t);else throw new Error(t)},H8=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var Ih={};Ze(Ih,{base36:()=>Xr,base36upper:()=>z8});var Xr,z8,bs=it(()=>{Wr();Xr=_i({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),z8=_i({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var y1=de((GR,g1)=>{g1.exports=Nh;var b1=128,J8=127,V8=~J8,W8=Math.pow(2,31);function Nh(n,t,r){if(Number.MAX_SAFE_INTEGER&&n>Number.MAX_SAFE_INTEGER)throw Nh.bytes=0,new RangeError("Could not encode varint");t=t||[],r=r||0;for(var i=r;n>=W8;)t[r++]=n&255|b1,n/=128;for(;n&V8;)t[r++]=n&255|b1,n>>>=7;return t[r]=n|0,Nh.bytes=r-i+1,t}});var w1=de((JR,x1)=>{x1.exports=Ph;var Y8=128,v1=127;function Ph(n,i){var r=0,i=i||0,o=0,s=i,a,f=n.length;do{if(s>=f||o>49)throw Ph.bytes=0,new RangeError("Could not decode varint");a=n[s++],r+=o<28?(a&v1)<<o:(a&v1)*Math.pow(2,o),o+=7}while(a>=Y8);return Ph.bytes=s-i,r}});var _1=de((VR,E1)=>{var X8=Math.pow(2,7),Z8=Math.pow(2,14),Q8=Math.pow(2,21),eE=Math.pow(2,28),tE=Math.pow(2,35),rE=Math.pow(2,42),nE=Math.pow(2,49),iE=Math.pow(2,56),oE=Math.pow(2,63);E1.exports=function(n){return n<X8?1:n<Z8?2:n<Q8?3:n<eE?4:n<tE?5:n<rE?6:n<nE?7:n<iE?8:n<oE?9:10}});var qa=de((WR,S1)=>{S1.exports={encode:y1(),decode:w1(),encodingLength:_1()}});function xo(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}var ja=it(()=>{});function Ha(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?xo(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}var kc=it(()=>{ja()});var A1={};Ze(A1,{concat:()=>Zr});function Zr(n,t){t||(t=n.reduce((o,s)=>o+s.length,0));let r=Ha(t),i=0;for(let o of n)r.set(o,i),i+=o.length;return xo(r)}var Lh=it(()=>{kc();ja()});var Bh={};Ze(Bh,{identity:()=>sE});var sE,T1=it(()=>{Wr();Ei();sE=ps({prefix:"\0",name:"identity",encode:n=>Sh(n),decode:n=>_h(n)})});var Uh={};Ze(Uh,{base2:()=>aE});var aE,M1=it(()=>{Wr();aE=gt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var $h={};Ze($h,{base8:()=>fE});var fE,k1=it(()=>{Wr();fE=gt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var Fh={};Ze(Fh,{base10:()=>cE});var cE,C1=it(()=>{Wr();cE=_i({prefix:"9",name:"base10",alphabet:"0123456789"})});var qh={};Ze(qh,{base16:()=>uE,base16upper:()=>lE});var uE,lE,O1=it(()=>{Wr();uE=gt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),lE=gt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var jh={};Ze(jh,{base64:()=>hE,base64pad:()=>dE,base64url:()=>wo,base64urlpad:()=>pE});var hE,dE,wo,pE,Cc=it(()=>{Wr();hE=gt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),dE=gt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),wo=gt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),pE=gt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});var Hh={};Ze(Hh,{base256emoji:()=>vE});function gE(n){return n.reduce((t,r)=>(t+=mE[r],t),"")}function yE(n){let t=[];for(let r of n){let i=bE[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(i)}return new Uint8Array(t)}var D1,mE,bE,vE,R1=it(()=>{Wr();D1=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),mE=D1.reduce((n,t,r)=>(n[r]=t,n),[]),bE=D1.reduce((n,t,r)=>(n[t.codePointAt(0)]=r,n),[]);vE=ps({prefix:"\u{1F680}",name:"base256emoji",encode:gE,decode:yE})});var Rc={};Ze(Rc,{Hasher:()=>Oc,from:()=>Dc});var Dc,Oc,zh=it(()=>{vo();Dc=({name:n,code:t,encode:r})=>new Oc(n,t,r),Oc=class{constructor(t,r,i){this.name=t,this.code=r,this.encode=i}digest(t){if(t instanceof Uint8Array){let r=this.encode(t);return r instanceof Uint8Array?wn(this.code,r):r.then(i=>wn(this.code,i))}else throw Error("Unknown type, must be binary type")}}});var Kh={};Ze(Kh,{sha256:()=>Si,sha512:()=>xE});var I1,Si,xE,za=it(()=>{zh();I1=n=>async t=>new Uint8Array(await crypto.subtle.digest(n,t)),Si=Dc({name:"sha2-256",code:18,encode:I1("SHA-256")}),xE=Dc({name:"sha2-512",code:19,encode:I1("SHA-512")})});var Gh={};Ze(Gh,{identity:()=>Ic});var N1,wE,P1,EE,Ic,Jh=it(()=>{Ei();vo();N1=0,wE="identity",P1=Dr,EE=n=>wn(N1,P1(n)),Ic={code:N1,name:wE,encode:P1,digest:EE}});var Vh={};Ze(Vh,{code:()=>SE,decode:()=>TE,encode:()=>AE,name:()=>_E});var _E,SE,AE,TE,L1=it(()=>{Ei();_E="raw",SE=85,AE=n=>Dr(n),TE=n=>Dr(n)});var Wh={};Ze(Wh,{code:()=>OE,decode:()=>RE,encode:()=>DE,name:()=>CE});var ME,kE,CE,OE,DE,RE,B1=it(()=>{ME=new TextEncoder,kE=new TextDecoder,CE="json",OE=512,DE=n=>ME.encode(JSON.stringify(n)),RE=n=>JSON.parse(kE.decode(n))});var Yh=it(()=>{Yr();Sc();Ei();zh();vo()});var U1={};Ze(U1,{CID:()=>Te,bases:()=>gs,bytes:()=>Ua,codecs:()=>NE,digest:()=>yo,hasher:()=>Rc,hashes:()=>IE,varint:()=>ds});var gs,IE,NE,Nc=it(()=>{T1();M1();k1();C1();O1();Rh();bs();Ac();Cc();R1();za();Jh();L1();B1();Yh();gs={...Bh,...Uh,...$h,...Fh,...qh,...Dh,...Ih,...Oh,...jh,...Hh},IE={...Kh,...Gh},NE={raw:Vh,json:Wh}});function F1(n,t,r,i){return{name:n,prefix:t,encoder:{name:n,prefix:t,encode:r},decoder:{decode:i}}}var $1,Xh,PE,Pc,Zh=it(()=>{Nc();kc();$1=F1("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),Xh=F1("ascii","a",n=>{let t="a";for(let r=0;r<n.length;r++)t+=String.fromCharCode(n[r]);return t},n=>{n=n.substring(1);let t=Ha(n.length);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}),PE={utf8:$1,"utf-8":$1,hex:gs.base16,latin1:Xh,ascii:Xh,binary:Xh,...gs},Pc=PE});var q1={};Ze(q1,{fromString:()=>Ge});function Ge(n,t="utf8"){let r=Pc[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?xo(globalThis.Buffer.from(n,"utf-8")):r.decoder.decode(`${r.prefix}${n}`)}var Ka=it(()=>{Zh();ja()});var j1={};Ze(j1,{toString:()=>Ye});function Ye(n,t="utf8"){let r=Pc[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):r.encoder.encode(n).substring(1)}var ys=it(()=>{Zh()});var ff=de((of,Ls)=>{var Q_=200,Z2="__lodash_hash_undefined__",Q2=9007199254740991,Jd="[object Arguments]",e9="[object Array]",eg="[object Boolean]",tg="[object Date]",t9="[object Error]",Vd="[object Function]",rg="[object GeneratorFunction]",mu="[object Map]",ng="[object Number]",Wd="[object Object]",q2="[object Promise]",ig="[object RegExp]",bu="[object Set]",og="[object String]",sg="[object Symbol]",qd="[object WeakMap]",ag="[object ArrayBuffer]",gu="[object DataView]",fg="[object Float32Array]",cg="[object Float64Array]",ug="[object Int8Array]",lg="[object Int16Array]",hg="[object Int32Array]",dg="[object Uint8Array]",pg="[object Uint8ClampedArray]",mg="[object Uint16Array]",bg="[object Uint32Array]",r9=/[\\^$.*+?()[\]{}|]/g,n9=/\w*$/,i9=/^\[object .+?Constructor\]$/,o9=/^(?:0|[1-9]\d*)$/,dt={};dt[Jd]=dt[e9]=dt[ag]=dt[gu]=dt[eg]=dt[tg]=dt[fg]=dt[cg]=dt[ug]=dt[lg]=dt[hg]=dt[mu]=dt[ng]=dt[Wd]=dt[ig]=dt[bu]=dt[og]=dt[sg]=dt[dg]=dt[pg]=dt[mg]=dt[bg]=!0;dt[t9]=dt[Vd]=dt[qd]=!1;var s9=typeof global=="object"&&global&&global.Object===Object&&global,a9=typeof self=="object"&&self&&self.Object===Object&&self,Yn=s9||a9||Function("return this")(),gg=typeof of=="object"&&of&&!of.nodeType&&of,j2=gg&&typeof Ls=="object"&&Ls&&!Ls.nodeType&&Ls,f9=j2&&j2.exports===gg;function c9(n,t){return n.set(t[0],t[1]),n}function u9(n,t){return n.add(t),n}function l9(n,t){for(var r=-1,i=n?n.length:0;++r<i&&t(n[r],r,n)!==!1;);return n}function h9(n,t){for(var r=-1,i=t.length,o=n.length;++r<i;)n[o+r]=t[r];return n}function yg(n,t,r,i){var o=-1,s=n?n.length:0;for(i&&s&&(r=n[++o]);++o<s;)r=t(r,n[o],o,n);return r}function d9(n,t){for(var r=-1,i=Array(n);++r<n;)i[r]=t(r);return i}function p9(n,t){return n?.[t]}function vg(n){var t=!1;if(n!=null&&typeof n.toString!="function")try{t=!!(n+"")}catch{}return t}function H2(n){var t=-1,r=Array(n.size);return n.forEach(function(i,o){r[++t]=[o,i]}),r}function Yd(n,t){return function(r){return n(t(r))}}function z2(n){var t=-1,r=Array(n.size);return n.forEach(function(i){r[++t]=i}),r}var m9=Array.prototype,b9=Function.prototype,yu=Object.prototype,Fd=Yn["__core-js_shared__"],K2=function(){var n=/[^.]+$/.exec(Fd&&Fd.keys&&Fd.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),xg=b9.toString,ki=yu.hasOwnProperty,vu=yu.toString,g9=RegExp("^"+xg.call(ki).replace(r9,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),G2=f9?Yn.Buffer:void 0,J2=Yn.Symbol,V2=Yn.Uint8Array,y9=Yd(Object.getPrototypeOf,Object),v9=Object.create,x9=yu.propertyIsEnumerable,w9=m9.splice,W2=Object.getOwnPropertySymbols,E9=G2?G2.isBuffer:void 0,_9=Yd(Object.keys,Object),jd=$s(Yn,"DataView"),sf=$s(Yn,"Map"),Hd=$s(Yn,"Promise"),zd=$s(Yn,"Set"),Kd=$s(Yn,"WeakMap"),af=$s(Object,"create"),S9=No(jd),A9=No(sf),T9=No(Hd),M9=No(zd),k9=No(Kd),Y2=J2?J2.prototype:void 0,X2=Y2?Y2.valueOf:void 0;function Io(n){var t=-1,r=n?n.length:0;for(this.clear();++t<r;){var i=n[t];this.set(i[0],i[1])}}function C9(){this.__data__=af?af(null):{}}function O9(n){return this.has(n)&&delete this.__data__[n]}function D9(n){var t=this.__data__;if(af){var r=t[n];return r===Z2?void 0:r}return ki.call(t,n)?t[n]:void 0}function R9(n){var t=this.__data__;return af?t[n]!==void 0:ki.call(t,n)}function I9(n,t){var r=this.__data__;return r[n]=af&&t===void 0?Z2:t,this}Io.prototype.clear=C9;Io.prototype.delete=O9;Io.prototype.get=D9;Io.prototype.has=R9;Io.prototype.set=I9;function Xn(n){var t=-1,r=n?n.length:0;for(this.clear();++t<r;){var i=n[t];this.set(i[0],i[1])}}function N9(){this.__data__=[]}function P9(n){var t=this.__data__,r=xu(t,n);if(r<0)return!1;var i=t.length-1;return r==i?t.pop():w9.call(t,r,1),!0}function L9(n){var t=this.__data__,r=xu(t,n);return r<0?void 0:t[r][1]}function B9(n){return xu(this.__data__,n)>-1}function U9(n,t){var r=this.__data__,i=xu(r,n);return i<0?r.push([n,t]):r[i][1]=t,this}Xn.prototype.clear=N9;Xn.prototype.delete=P9;Xn.prototype.get=L9;Xn.prototype.has=B9;Xn.prototype.set=U9;function Bs(n){var t=-1,r=n?n.length:0;for(this.clear();++t<r;){var i=n[t];this.set(i[0],i[1])}}function $9(){this.__data__={hash:new Io,map:new(sf||Xn),string:new Io}}function F9(n){return wu(this,n).delete(n)}function q9(n){return wu(this,n).get(n)}function j9(n){return wu(this,n).has(n)}function H9(n,t){return wu(this,n).set(n,t),this}Bs.prototype.clear=$9;Bs.prototype.delete=F9;Bs.prototype.get=q9;Bs.prototype.has=j9;Bs.prototype.set=H9;function Us(n){this.__data__=new Xn(n)}function z9(){this.__data__=new Xn}function K9(n){return this.__data__.delete(n)}function G9(n){return this.__data__.get(n)}function J9(n){return this.__data__.has(n)}function V9(n,t){var r=this.__data__;if(r instanceof Xn){var i=r.__data__;if(!sf||i.length<Q_-1)return i.push([n,t]),this;r=this.__data__=new Bs(i)}return r.set(n,t),this}Us.prototype.clear=z9;Us.prototype.delete=K9;Us.prototype.get=G9;Us.prototype.has=J9;Us.prototype.set=V9;function W9(n,t){var r=Zd(n)||v7(n)?d9(n.length,String):[],i=r.length,o=!!i;for(var s in n)(t||ki.call(n,s))&&!(o&&(s=="length"||m7(s,i)))&&r.push(s);return r}function wg(n,t,r){var i=n[t];(!(ki.call(n,t)&&Ag(i,r))||r===void 0&&!(t in n))&&(n[t]=r)}function xu(n,t){for(var r=n.length;r--;)if(Ag(n[r][0],t))return r;return-1}function Y9(n,t){return n&&Eg(t,Qd(t),n)}function Gd(n,t,r,i,o,s,a){var f;if(i&&(f=s?i(n,o,s,a):i(n)),f!==void 0)return f;if(!Eu(n))return n;var u=Zd(n);if(u){if(f=h7(n),!t)return c7(n,f)}else{var d=Ro(n),h=d==Vd||d==rg;if(w7(n))return r7(n,t);if(d==Wd||d==Jd||h&&!s){if(vg(n))return s?n:{};if(f=d7(h?{}:n),!t)return u7(n,Y9(f,n))}else{if(!dt[d])return s?n:{};f=p7(n,d,Gd,t)}}a||(a=new Us);var y=a.get(n);if(y)return y;if(a.set(n,f),!u)var C=r?l7(n):Qd(n);return l9(C||n,function(O,A){C&&(A=O,O=n[A]),wg(f,A,Gd(O,t,r,i,A,n,a))}),f}function X9(n){return Eu(n)?v9(n):{}}function Z9(n,t,r){var i=t(n);return Zd(n)?i:h9(i,r(n))}function Q9(n){return vu.call(n)}function e7(n){if(!Eu(n)||g7(n))return!1;var t=Mg(n)||vg(n)?g9:i9;return t.test(No(n))}function t7(n){if(!Sg(n))return _9(n);var t=[];for(var r in Object(n))ki.call(n,r)&&r!="constructor"&&t.push(r);return t}function r7(n,t){if(t)return n.slice();var r=new n.constructor(n.length);return n.copy(r),r}function Xd(n){var t=new n.constructor(n.byteLength);return new V2(t).set(new V2(n)),t}function n7(n,t){var r=t?Xd(n.buffer):n.buffer;return new n.constructor(r,n.byteOffset,n.byteLength)}function i7(n,t,r){var i=t?r(H2(n),!0):H2(n);return yg(i,c9,new n.constructor)}function o7(n){var t=new n.constructor(n.source,n9.exec(n));return t.lastIndex=n.lastIndex,t}function s7(n,t,r){var i=t?r(z2(n),!0):z2(n);return yg(i,u9,new n.constructor)}function a7(n){return X2?Object(X2.call(n)):{}}function f7(n,t){var r=t?Xd(n.buffer):n.buffer;return new n.constructor(r,n.byteOffset,n.length)}function c7(n,t){var r=-1,i=n.length;for(t||(t=Array(i));++r<i;)t[r]=n[r];return t}function Eg(n,t,r,i){r||(r={});for(var o=-1,s=t.length;++o<s;){var a=t[o],f=i?i(r[a],n[a],a,r,n):void 0;wg(r,a,f===void 0?n[a]:f)}return r}function u7(n,t){return Eg(n,_g(n),t)}function l7(n){return Z9(n,Qd,_g)}function wu(n,t){var r=n.__data__;return b7(t)?r[typeof t=="string"?"string":"hash"]:r.map}function $s(n,t){var r=p9(n,t);return e7(r)?r:void 0}var _g=W2?Yd(W2,Object):S7,Ro=Q9;(jd&&Ro(new jd(new ArrayBuffer(1)))!=gu||sf&&Ro(new sf)!=mu||Hd&&Ro(Hd.resolve())!=q2||zd&&Ro(new zd)!=bu||Kd&&Ro(new Kd)!=qd)&&(Ro=function(n){var t=vu.call(n),r=t==Wd?n.constructor:void 0,i=r?No(r):void 0;if(i)switch(i){case S9:return gu;case A9:return mu;case T9:return q2;case M9:return bu;case k9:return qd}return t});function h7(n){var t=n.length,r=n.constructor(t);return t&&typeof n[0]=="string"&&ki.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function d7(n){return typeof n.constructor=="function"&&!Sg(n)?X9(y9(n)):{}}function p7(n,t,r,i){var o=n.constructor;switch(t){case ag:return Xd(n);case eg:case tg:return new o(+n);case gu:return n7(n,i);case fg:case cg:case ug:case lg:case hg:case dg:case pg:case mg:case bg:return f7(n,i);case mu:return i7(n,i,r);case ng:case og:return new o(n);case ig:return o7(n);case bu:return s7(n,i,r);case sg:return a7(n)}}function m7(n,t){return t=t??Q2,!!t&&(typeof n=="number"||o9.test(n))&&n>-1&&n%1==0&&n<t}function b7(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}function g7(n){return!!K2&&K2 in n}function Sg(n){var t=n&&n.constructor,r=typeof t=="function"&&t.prototype||yu;return n===r}function No(n){if(n!=null){try{return xg.call(n)}catch{}try{return n+""}catch{}}return""}function y7(n){return Gd(n,!0,!0)}function Ag(n,t){return n===t||n!==n&&t!==t}function v7(n){return x7(n)&&ki.call(n,"callee")&&(!x9.call(n,"callee")||vu.call(n)==Jd)}var Zd=Array.isArray;function Tg(n){return n!=null&&E7(n.length)&&!Mg(n)}function x7(n){return _7(n)&&Tg(n)}var w7=E9||A7;function Mg(n){var t=Eu(n)?vu.call(n):"";return t==Vd||t==rg}function E7(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Q2}function Eu(n){var t=typeof n;return!!n&&(t=="object"||t=="function")}function _7(n){return!!n&&typeof n=="object"}function Qd(n){return Tg(n)?W9(n):t7(n)}function S7(){return[]}function A7(){return!1}Ls.exports=y7});var qs=de((Zn,Og)=>{var Cg=typeof self<"u"?self:Zn,_u=function(){function n(){this.fetch=!1,this.DOMException=Cg.DOMException}return n.prototype=Cg,new n}();(function(n){var t=function(r){var i={searchParams:"URLSearchParams"in n,iterable:"Symbol"in n&&"iterator"in Symbol,blob:"FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in n,arrayBuffer:"ArrayBuffer"in n};function o(_){return _&&DataView.prototype.isPrototypeOf(_)}if(i.arrayBuffer)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=ArrayBuffer.isView||function(_){return _&&s.indexOf(Object.prototype.toString.call(_))>-1};function f(_){if(typeof _!="string"&&(_=String(_)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(_))throw new TypeError("Invalid character in header field name");return _.toLowerCase()}function u(_){return typeof _!="string"&&(_=String(_)),_}function d(_){var l={next:function(){var g=_.shift();return{done:g===void 0,value:g}}};return i.iterable&&(l[Symbol.iterator]=function(){return l}),l}function h(_){this.map={},_ instanceof h?_.forEach(function(l,g){this.append(g,l)},this):Array.isArray(_)?_.forEach(function(l){this.append(l[0],l[1])},this):_&&Object.getOwnPropertyNames(_).forEach(function(l){this.append(l,_[l])},this)}h.prototype.append=function(_,l){_=f(_),l=u(l);var g=this.map[_];this.map[_]=g?g+", "+l:l},h.prototype.delete=function(_){delete this.map[f(_)]},h.prototype.get=function(_){return _=f(_),this.has(_)?this.map[_]:null},h.prototype.has=function(_){return this.map.hasOwnProperty(f(_))},h.prototype.set=function(_,l){this.map[f(_)]=u(l)},h.prototype.forEach=function(_,l){for(var g in this.map)this.map.hasOwnProperty(g)&&_.call(l,this.map[g],g,this)},h.prototype.keys=function(){var _=[];return this.forEach(function(l,g){_.push(g)}),d(_)},h.prototype.values=function(){var _=[];return this.forEach(function(l){_.push(l)}),d(_)},h.prototype.entries=function(){var _=[];return this.forEach(function(l,g){_.push([g,l])}),d(_)},i.iterable&&(h.prototype[Symbol.iterator]=h.prototype.entries);function y(_){if(_.bodyUsed)return Promise.reject(new TypeError("Already read"));_.bodyUsed=!0}function C(_){return new Promise(function(l,g){_.onload=function(){l(_.result)},_.onerror=function(){g(_.error)}})}function O(_){var l=new FileReader,g=C(l);return l.readAsArrayBuffer(_),g}function A(_){var l=new FileReader,g=C(l);return l.readAsText(_),g}function M(_){for(var l=new Uint8Array(_),g=new Array(l.length),m=0;m<l.length;m++)g[m]=String.fromCharCode(l[m]);return g.join("")}function F(_){if(_.slice)return _.slice(0);var l=new Uint8Array(_.byteLength);return l.set(new Uint8Array(_)),l.buffer}function D(){return this.bodyUsed=!1,this._initBody=function(_){this._bodyInit=_,_?typeof _=="string"?this._bodyText=_:i.blob&&Blob.prototype.isPrototypeOf(_)?this._bodyBlob=_:i.formData&&FormData.prototype.isPrototypeOf(_)?this._bodyFormData=_:i.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)?this._bodyText=_.toString():i.arrayBuffer&&i.blob&&o(_)?(this._bodyArrayBuffer=F(_.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(_)||a(_))?this._bodyArrayBuffer=F(_):this._bodyText=_=Object.prototype.toString.call(_):this._bodyText="",this.headers.get("content-type")||(typeof _=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i.blob&&(this.blob=function(){var _=y(this);if(_)return _;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(O)}),this.text=function(){var _=y(this);if(_)return _;if(this._bodyBlob)return A(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(M(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i.formData&&(this.formData=function(){return this.text().then(X)}),this.json=function(){return this.text().then(JSON.parse)},this}var $=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function K(_){var l=_.toUpperCase();return $.indexOf(l)>-1?l:_}function j(_,l){l=l||{};var g=l.body;if(_ instanceof j){if(_.bodyUsed)throw new TypeError("Already read");this.url=_.url,this.credentials=_.credentials,l.headers||(this.headers=new h(_.headers)),this.method=_.method,this.mode=_.mode,this.signal=_.signal,!g&&_._bodyInit!=null&&(g=_._bodyInit,_.bodyUsed=!0)}else this.url=String(_);if(this.credentials=l.credentials||this.credentials||"same-origin",(l.headers||!this.headers)&&(this.headers=new h(l.headers)),this.method=K(l.method||this.method||"GET"),this.mode=l.mode||this.mode||null,this.signal=l.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&g)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(g)}j.prototype.clone=function(){return new j(this,{body:this._bodyInit})};function X(_){var l=new FormData;return _.trim().split("&").forEach(function(g){if(g){var m=g.split("="),c=m.shift().replace(/\+/g," "),p=m.join("=").replace(/\+/g," ");l.append(decodeURIComponent(c),decodeURIComponent(p))}}),l}function B(_){var l=new h,g=_.replace(/\r?\n[\t ]+/g," ");return g.split(/\r?\n/).forEach(function(m){var c=m.split(":"),p=c.shift().trim();if(p){var x=c.join(":").trim();l.append(p,x)}}),l}D.call(j.prototype);function L(_,l){l||(l={}),this.type="default",this.status=l.status===void 0?200:l.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in l?l.statusText:"OK",this.headers=new h(l.headers),this.url=l.url||"",this._initBody(_)}D.call(L.prototype),L.prototype.clone=function(){return new L(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},L.error=function(){var _=new L(null,{status:0,statusText:""});return _.type="error",_};var U=[301,302,303,307,308];L.redirect=function(_,l){if(U.indexOf(l)===-1)throw new RangeError("Invalid status code");return new L(null,{status:l,headers:{location:_}})},r.DOMException=n.DOMException;try{new r.DOMException}catch{r.DOMException=function(l,g){this.message=l,this.name=g;var m=Error(l);this.stack=m.stack},r.DOMException.prototype=Object.create(Error.prototype),r.DOMException.prototype.constructor=r.DOMException}function te(_,l){return new Promise(function(g,m){var c=new j(_,l);if(c.signal&&c.signal.aborted)return m(new r.DOMException("Aborted","AbortError"));var p=new XMLHttpRequest;function x(){p.abort()}p.onload=function(){var E={status:p.status,statusText:p.statusText,headers:B(p.getAllResponseHeaders()||"")};E.url="responseURL"in p?p.responseURL:E.headers.get("X-Request-URL");var w="response"in p?p.response:p.responseText;g(new L(w,E))},p.onerror=function(){m(new TypeError("Network request failed"))},p.ontimeout=function(){m(new TypeError("Network request failed"))},p.onabort=function(){m(new r.DOMException("Aborted","AbortError"))},p.open(c.method,c.url,!0),c.credentials==="include"?p.withCredentials=!0:c.credentials==="omit"&&(p.withCredentials=!1),"responseType"in p&&i.blob&&(p.responseType="blob"),c.headers.forEach(function(E,w){p.setRequestHeader(w,E)}),c.signal&&(c.signal.addEventListener("abort",x),p.onreadystatechange=function(){p.readyState===4&&c.signal.removeEventListener("abort",x)}),p.send(typeof c._bodyInit>"u"?null:c._bodyInit)})}return te.polyfill=!0,n.fetch||(n.fetch=te,n.Headers=h,n.Request=j,n.Response=L),r.Headers=h,r.Request=j,r.Response=L,r.fetch=te,Object.defineProperty(r,"__esModule",{value:!0}),r}({})})(_u);_u.fetch.ponyfill=!0;delete _u.fetch.polyfill;var Fs=_u;Zn=Fs.fetch;Zn.default=Fs.fetch;Zn.fetch=Fs.fetch;Zn.Headers=Fs.Headers;Zn.Request=Fs.Request;Zn.Response=Fs.Response;Og.exports=Zn});var Lg=de(Au=>{"use strict";Object.defineProperty(Au,"__esModule",{value:!0});Au.BrowserRandomSource=void 0;var Pg=65536,r0=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;let t=typeof self<"u"?self.crypto||self.msCrypto:null;t&&t.getRandomValues!==void 0&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");let r=new Uint8Array(t);for(let i=0;i<r.length;i+=Pg)this._crypto.getRandomValues(r.subarray(i,i+Math.min(r.length-i,Pg)));return r}};Au.BrowserRandomSource=r0});var Br=de(n0=>{"use strict";Object.defineProperty(n0,"__esModule",{value:!0});function M7(n){for(var t=0;t<n.length;t++)n[t]=0;return n}n0.wipe=M7});var i0=de(()=>{});var Bg=de(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});Tu.NodeRandomSource=void 0;var k7=Br(),o0=class{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof n1<"u"){let t=i0();t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(t);if(r.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");let i=new Uint8Array(t);for(let o=0;o<i.length;o++)i[o]=r[o];return(0,k7.wipe)(r),i}};Tu.NodeRandomSource=o0});var Ug=de(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});Mu.SystemRandomSource=void 0;var C7=Lg(),O7=Bg(),s0=class{constructor(){if(this.isAvailable=!1,this.name="",this._source=new C7.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new O7.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)}};Mu.SystemRandomSource=s0});var $g=de(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});function D7(n,t){var r=n>>>16&65535,i=n&65535,o=t>>>16&65535,s=t&65535;return i*s+(r*s+i*o<<16>>>0)|0}vr.mul=Math.imul||D7;function R7(n,t){return n+t|0}vr.add=R7;function I7(n,t){return n-t|0}vr.sub=I7;function N7(n,t){return n<<t|n>>>32-t}vr.rotl=N7;function P7(n,t){return n<<32-t|n>>>t}vr.rotr=P7;function L7(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}vr.isInteger=Number.isInteger||L7;vr.MAX_SAFE_INTEGER=9007199254740991;vr.isSafeInteger=function(n){return vr.isInteger(n)&&n>=-vr.MAX_SAFE_INTEGER&&n<=vr.MAX_SAFE_INTEGER}});var Po=de(We=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Fg=$g();function B7(n,t){return t===void 0&&(t=0),(n[t+0]<<8|n[t+1])<<16>>16}We.readInt16BE=B7;function U7(n,t){return t===void 0&&(t=0),(n[t+0]<<8|n[t+1])>>>0}We.readUint16BE=U7;function $7(n,t){return t===void 0&&(t=0),(n[t+1]<<8|n[t])<<16>>16}We.readInt16LE=$7;function F7(n,t){return t===void 0&&(t=0),(n[t+1]<<8|n[t])>>>0}We.readUint16LE=F7;function qg(n,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=n>>>8,t[r+1]=n>>>0,t}We.writeUint16BE=qg;We.writeInt16BE=qg;function jg(n,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=n>>>0,t[r+1]=n>>>8,t}We.writeUint16LE=jg;We.writeInt16LE=jg;function a0(n,t){return t===void 0&&(t=0),n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3]}We.readInt32BE=a0;function f0(n,t){return t===void 0&&(t=0),(n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3])>>>0}We.readUint32BE=f0;function c0(n,t){return t===void 0&&(t=0),n[t+3]<<24|n[t+2]<<16|n[t+1]<<8|n[t]}We.readInt32LE=c0;function u0(n,t){return t===void 0&&(t=0),(n[t+3]<<24|n[t+2]<<16|n[t+1]<<8|n[t])>>>0}We.readUint32LE=u0;function ku(n,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=n>>>24,t[r+1]=n>>>16,t[r+2]=n>>>8,t[r+3]=n>>>0,t}We.writeUint32BE=ku;We.writeInt32BE=ku;function Cu(n,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=n>>>0,t[r+1]=n>>>8,t[r+2]=n>>>16,t[r+3]=n>>>24,t}We.writeUint32LE=Cu;We.writeInt32LE=Cu;function q7(n,t){t===void 0&&(t=0);var r=a0(n,t),i=a0(n,t+4);return r*4294967296+i-(i>>31)*4294967296}We.readInt64BE=q7;function j7(n,t){t===void 0&&(t=0);var r=f0(n,t),i=f0(n,t+4);return r*4294967296+i}We.readUint64BE=j7;function H7(n,t){t===void 0&&(t=0);var r=c0(n,t),i=c0(n,t+4);return i*4294967296+r-(r>>31)*4294967296}We.readInt64LE=H7;function z7(n,t){t===void 0&&(t=0);var r=u0(n,t),i=u0(n,t+4);return i*4294967296+r}We.readUint64LE=z7;function Hg(n,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),ku(n/4294967296>>>0,t,r),ku(n>>>0,t,r+4),t}We.writeUint64BE=Hg;We.writeInt64BE=Hg;function zg(n,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),Cu(n>>>0,t,r),Cu(n/4294967296>>>0,t,r+4),t}We.writeUint64LE=zg;We.writeInt64LE=zg;function K7(n,t,r){if(r===void 0&&(r=0),n%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(n/8>t.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var i=0,o=1,s=n/8+r-1;s>=r;s--)i+=t[s]*o,o*=256;return i}We.readUintBE=K7;function G7(n,t,r){if(r===void 0&&(r=0),n%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(n/8>t.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var i=0,o=1,s=r;s<r+n/8;s++)i+=t[s]*o,o*=256;return i}We.readUintLE=G7;function J7(n,t,r,i){if(r===void 0&&(r=new Uint8Array(n/8)),i===void 0&&(i=0),n%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Fg.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var o=1,s=n/8+i-1;s>=i;s--)r[s]=t/o&255,o*=256;return r}We.writeUintBE=J7;function V7(n,t,r,i){if(r===void 0&&(r=new Uint8Array(n/8)),i===void 0&&(i=0),n%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Fg.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var o=1,s=i;s<i+n/8;s++)r[s]=t/o&255,o*=256;return r}We.writeUintLE=V7;function W7(n,t){t===void 0&&(t=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat32(t)}We.readFloat32BE=W7;function Y7(n,t){t===void 0&&(t=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat32(t,!0)}We.readFloat32LE=Y7;function X7(n,t){t===void 0&&(t=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat64(t)}We.readFloat64BE=X7;function Z7(n,t){t===void 0&&(t=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat64(t,!0)}We.readFloat64LE=Z7;function Q7(n,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat32(r,n),t}We.writeFloat32BE=Q7;function eS(n,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat32(r,n,!0),t}We.writeFloat32LE=eS;function tS(n,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat64(r,n),t}We.writeFloat64BE=tS;function rS(n,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat64(r,n,!0),t}We.writeFloat64LE=rS});var ei=de(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.randomStringForEntropy=Kt.randomString=Kt.randomUint32=Kt.randomBytes=Kt.defaultRandomSource=void 0;var nS=Ug(),iS=Po(),Kg=Br();Kt.defaultRandomSource=new nS.SystemRandomSource;function l0(n,t=Kt.defaultRandomSource){return t.randomBytes(n)}Kt.randomBytes=l0;function oS(n=Kt.defaultRandomSource){let t=l0(4,n),r=(0,iS.readUint32LE)(t);return(0,Kg.wipe)(t),r}Kt.randomUint32=oS;var Gg="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function Jg(n,t=Gg,r=Kt.defaultRandomSource){if(t.length<2)throw new Error("randomString charset is too short");if(t.length>256)throw new Error("randomString charset is too long");let i="",o=t.length,s=256-256%o;for(;n>0;){let a=l0(Math.ceil(n*256/s),r);for(let f=0;f<a.length&&n>0;f++){let u=a[f];u<s&&(i+=t.charAt(u%o),n--)}(0,Kg.wipe)(a)}return i}Kt.randomString=Jg;function sS(n,t=Gg,r=Kt.defaultRandomSource){let i=Math.ceil(n/(Math.log(t.length)/Math.LN2));return Jg(i,t,r)}Kt.randomStringForEntropy=sS});var on=de((uF,Yg)=>{Yg.exports={ALT:1,CAT:2,REP:3,RNM:4,TRG:5,TBS:6,TLS:7,UDT:11,AND:12,NOT:13,BKR:14,BKA:15,BKN:16,ABG:17,AEN:18,ACTIVE:100,MATCH:101,EMPTY:102,NOMATCH:103,SEM_PRE:200,SEM_POST:201,SEM_OK:300,SEM_SKIP:301,ATTR_N:400,ATTR_R:401,ATTR_MR:402,LOOKAROUND_NONE:500,LOOKAROUND_AHEAD:501,LOOKAROUND_BEHIND:502,BKR_MODE_UM:601,BKR_MODE_PM:602,BKR_MODE_CS:603,BKR_MODE_CI:604}});var pf=de((lF,Xg)=>{Xg.exports={CLASS_MONOSPACE:"apg-mono",CLASS_ACTIVE:"apg-active",CLASS_EMPTY:"apg-empty",CLASS_MATCH:"apg-match",CLASS_NOMATCH:"apg-nomatch",CLASS_LOOKAHEAD:"apg-lh-match",CLASS_LOOKBEHIND:"apg-lb-match",CLASS_REMAINDER:"apg-remainder",CLASS_CTRLCHAR:"apg-ctrl-char",CLASS_LINEEND:"apg-line-end",CLASS_ERROR:"apg-error",CLASS_PHRASE:"apg-phrase",CLASS_EMPTYPHRASE:"apg-empty-phrase",CLASS_STATE:"apg-state",CLASS_STATS:"apg-stats",CLASS_TRACE:"apg-trace",CLASS_GRAMMAR:"apg-grammar",CLASS_RULES:"apg-rules",CLASS_RULESLINK:"apg-rules-link",CLASS_ATTRIBUTES:"apg-attrs"}});var ey=de(Bt=>{var Zg=Bt,Ou=4294967292,Du=4294967293,b0=4294967294,Qg=4294967295,ye=[0,1,3,7,15,31,63,127,255,511,1023],Di=["00","01","02","03","04","05","06","07","08","09","0A","0B","0C","0D","0E","0F","10","11","12","13","14","15","16","17","18","19","1A","1B","1C","1D","1E","1F","20","21","22","23","24","25","26","27","28","29","2A","2B","2C","2D","2E","2F","30","31","32","33","34","35","36","37","38","39","3A","3B","3C","3D","3E","3F","40","41","42","43","44","45","46","47","48","49","4A","4B","4C","4D","4E","4F","50","51","52","53","54","55","56","57","58","59","5A","5B","5C","5D","5E","5F","60","61","62","63","64","65","66","67","68","69","6A","6B","6C","6D","6E","6F","70","71","72","73","74","75","76","77","78","79","7A","7B","7C","7D","7E","7F","80","81","82","83","84","85","86","87","88","89","8A","8B","8C","8D","8E","8F","90","91","92","93","94","95","96","97","98","99","9A","9B","9C","9D","9E","9F","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","AA","AB","AC","AD","AE","AF","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","BA","BB","BC","BD","BE","BF","C0","C1","C2","C3","C4","C5","C6","C7","C8","C9","CA","CB","CC","CD","CE","CF","D0","D1","D2","D3","D4","D5","D6","D7","D8","D9","DA","DB","DC","DD","DE","DF","E0","E1","E2","E3","E4","E5","E6","E7","E8","E9","EA","EB","EC","ED","EE","EF","F0","F1","F2","F3","F4","F5","F6","F7","F8","F9","FA","FB","FC","FD","FE","FF"],hS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),xr=[];hS.forEach(n=>{xr.push(n.charCodeAt(0))});Bt.utf8={encode(n){let t=[];return n.forEach(r=>{if(r>=0&&r<=127)t.push(r);else if(r<=2047)t.push(192+(r>>6&ye[5])),t.push(128+(r&ye[6]));else if(r<55296||r>57343&&r<=65535)t.push(224+(r>>12&ye[4])),t.push(128+(r>>6&ye[6])),t.push(128+(r&ye[6]));else if(r>=65536&&r<=1114111){let i=r>>16&ye[5];t.push(240+(i>>2)),t.push(128+((i&ye[2])<<4)+(r>>12&ye[4])),t.push(128+(r>>6&ye[6])),t.push(128+(r&ye[6]))}else throw new RangeError(`utf8.encode: character out of range: char: ${r}`)}),Buffer.from(t)},decode(n,t){function r(A,M){if((M&192)!==128)return Du;let F=((A&ye[5])<<6)+(M&ye[6]);return F<128?Ou:F}function i(A,M,F){if((F&192)!==128||(M&192)!==128)return Du;let D=((A&ye[4])<<12)+((M&ye[6])<<6)+(F&ye[6]);return D<2048?Ou:D>=55296&&D<=57343?b0:D}function o(A,M,F,D){if((D&192)!==128||(F&192)!==128||(M&192)!==128)return Du;let $=(((A&ye[3])<<2)+(M>>4&ye[2])<<16)+((M&ye[4])<<12)+((F&ye[6])<<6)+(D&ye[6]);return $<65536?Ou:$>1114111?b0:$}let s,a,f,u,d,h,y=n.length,C=t?3:0,O=[];for(;C<y;){a=n[C],s=Qg;let A=!0;for(;A;){if(a>=0&&a<=127){s=a,h=1;break}if(f=C+1,f<y&&a>=194&&a<=223){s=r(a,n[f]),h=2;break}if(u=C+2,u<y&&a>=224&&a<=239){s=i(a,n[f],n[u]),h=3;break}if(d=C+3,d<y&&a>=240&&a<=244){s=o(a,n[f],n[u],n[d]),h=4;break}break}if(s>1114111){let M=`byte[${C}]`;throw s===Qg?new RangeError(`utf8.decode: ill-formed UTF8 byte sequence found at: ${M}`):s===Du?new RangeError(`utf8.decode: illegal trailing byte found at: ${M}`):s===b0?new RangeError(`utf8.decode: code point out of range found at: ${M}`):s===Ou?new RangeError(`utf8.decode: non-shortest form found at: ${M}`):new RangeError(`utf8.decode: unrecognized error found at: ${M}`)}O.push(s),C+=h}return O}};Bt.utf16be={encode(n){let t=[],r,i,o;for(let s=0;s<n.length;s+=1)if(r=n[s],r>=0&&r<=55295||r>=57344&&r<=65535)t.push(r>>8&ye[8]),t.push(r&ye[8]);else if(r>=65536&&r<=1114111)o=r-65536,i=55296+(o>>10),o=56320+(o&ye[10]),t.push(i>>8&ye[8]),t.push(i&ye[8]),t.push(o>>8&ye[8]),t.push(o&ye[8]);else throw new RangeError(`utf16be.encode: UTF16BE value out of range: char[${s}]: ${r}`);return Buffer.from(t)},decode(n,t){if(n.length%2>0)throw new RangeError(`utf16be.decode: data length must be even multiple of 2: length: ${n.length}`);let r=[],i=n.length,o=t?2:0,s=0,a,f,u,d,h,y;for(;o<i;){for(;;){if(u=o+1,u<i){if(h=(n[o]<<8)+n[u],h<55296||h>57343){a=h,f=2;break}if(d=o+3,d<i&&(y=(n[o+2]<<8)+n[d],h<=56319&&y>=56320&&y<=57343)){a=65536+(h-55296<<10)+(y-56320),f=4;break}}throw new RangeError(`utf16be.decode: ill-formed UTF16BE byte sequence found: byte[${o}]`)}r[s++]=a,o+=f}return r}};Bt.utf16le={encode(n){let t=[],r,i,o;for(let s=0;s<n.length;s+=1)if(r=n[s],r>=0&&r<=55295||r>=57344&&r<=65535)t.push(r&ye[8]),t.push(r>>8&ye[8]);else if(r>=65536&&r<=1114111)o=r-65536,i=55296+(o>>10),o=56320+(o&ye[10]),t.push(i&ye[8]),t.push(i>>8&ye[8]),t.push(o&ye[8]),t.push(o>>8&ye[8]);else throw new RangeError(`utf16le.encode: UTF16LE value out of range: char[${s}]: ${r}`);return Buffer.from(t)},decode(n,t){if(n.length%2>0)throw new RangeError(`utf16le.decode: data length must be even multiple of 2: length: ${n.length}`);let r=[],i=n.length,o=t?2:0,s=0,a,f,u,d,h,y;for(;o<i;){for(;;){if(u=o+1,u<i){if(h=(n[u]<<8)+n[o],h<55296||h>57343){a=h,f=2;break}if(d=o+3,d<i&&(y=(n[d]<<8)+n[o+2],h<=56319&&y>=56320&&y<=57343)){a=65536+(h-55296<<10)+(y-56320),f=4;break}}throw new RangeError(`utf16le.decode: ill-formed UTF16LE byte sequence found: byte[${o}]`)}r[s++]=a,o+=f}return r}};Bt.utf32be={encode(n){let t=Buffer.alloc(n.length*4),r=0;return n.forEach(i=>{if(i>=55296&&i<=57343||i>1114111)throw new RangeError(`utf32be.encode: UTF32BE character code out of range: char[${r/4}]: ${i}`);t[r++]=i>>24&ye[8],t[r++]=i>>16&ye[8],t[r++]=i>>8&ye[8],t[r++]=i&ye[8]}),t},decode(n,t){if(n.length%4>0)throw new RangeError(`utf32be.decode: UTF32BE byte length must be even multiple of 4: length: ${n.length}`);let r=[],i=t?4:0;for(;i<n.length;i+=4){let o=(n[i]<<24)+(n[i+1]<<16)+(n[i+2]<<8)+n[i+3];if(o>=55296&&o<=57343||o>1114111)throw new RangeError(`utf32be.decode: UTF32BE character code out of range: char[${i/4}]: ${o}`);r.push(o)}return r}};Bt.utf32le={encode(n){let t=Buffer.alloc(n.length*4),r=0;return n.forEach(i=>{if(i>=55296&&i<=57343||i>1114111)throw new RangeError(`utf32le.encode: UTF32LE character code out of range: char[${r/4}]: ${i}`);t[r++]=i&ye[8],t[r++]=i>>8&ye[8],t[r++]=i>>16&ye[8],t[r++]=i>>24&ye[8]}),t},decode(n,t){if(n.length%4>0)throw new RangeError(`utf32be.decode: UTF32LE byte length must be even multiple of 4: length: ${n.length}`);let r=[],i=t?4:0;for(;i<n.length;i+=4){let o=(n[i+3]<<24)+(n[i+2]<<16)+(n[i+1]<<8)+n[i];if(o>=55296&&o<=57343||o>1114111)throw new RangeError(`utf32le.encode: UTF32LE character code out of range: char[${i/4}]: ${o}`);r.push(o)}return r}};Bt.uint7={encode(n){let t=Buffer.alloc(n.length);for(let r=0;r<n.length;r+=1){if(n[r]>127)throw new RangeError(`uint7.encode: UINT7 character code out of range: char[${r}]: ${n[r]}`);t[r]=n[r]}return t},decode(n){let t=[];for(let r=0;r<n.length;r+=1){if(n[r]>127)throw new RangeError(`uint7.decode: UINT7 character code out of range: byte[${r}]: ${n[r]}`);t[r]=n[r]}return t}};Bt.uint8={encode(n){let t=Buffer.alloc(n.length);for(let r=0;r<n.length;r+=1){if(n[r]>255)throw new RangeError(`uint8.encode: UINT8 character code out of range: char[${r}]: ${n[r]}`);t[r]=n[r]}return t},decode(n){let t=[];for(let r=0;r<n.length;r+=1)t[r]=n[r];return t}};Bt.uint16be={encode(n){let t=Buffer.alloc(n.length*2),r=0;return n.forEach(i=>{if(i>65535)throw new RangeError(`uint16be.encode: UINT16BE character code out of range: char[${r/2}]: ${i}`);t[r++]=i>>8&ye[8],t[r++]=i&ye[8]}),t},decode(n){if(n.length%2>0)throw new RangeError(`uint16be.decode: UINT16BE byte length must be even multiple of 2: length: ${n.length}`);let t=[];for(let r=0;r<n.length;r+=2)t.push((n[r]<<8)+n[r+1]);return t}};Bt.uint16le={encode(n){let t=Buffer.alloc(n.length*2),r=0;return n.forEach(i=>{if(i>65535)throw new RangeError(`uint16le.encode: UINT16LE character code out of range: char[${r/2}]: ${i}`);t[r++]=i&ye[8],t[r++]=i>>8&ye[8]}),t},decode(n){if(n.length%2>0)throw new RangeError(`uint16le.decode: UINT16LE byte length must be even multiple of 2: length: ${n.length}`);let t=[];for(let r=0;r<n.length;r+=2)t.push((n[r+1]<<8)+n[r]);return t}};Bt.uint32be={encode(n){let t=Buffer.alloc(n.length*4),r=0;return n.forEach(i=>{t[r++]=i>>24&ye[8],t[r++]=i>>16&ye[8],t[r++]=i>>8&ye[8],t[r++]=i&ye[8]}),t},decode(n){if(n.length%4>0)throw new RangeError(`uint32be.decode: UINT32BE byte length must be even multiple of 4: length: ${n.length}`);let t=[];for(let r=0;r<n.length;r+=4)t.push((n[r]<<24)+(n[r+1]<<16)+(n[r+2]<<8)+n[r+3]);return t}};Bt.uint32le={encode(n){let t=Buffer.alloc(n.length*4),r=0;return n.forEach(i=>{t[r++]=i&ye[8],t[r++]=i>>8&ye[8],t[r++]=i>>16&ye[8],t[r++]=i>>24&ye[8]}),t},decode(n){if(n.length%4>0)throw new RangeError(`uint32le.decode: UINT32LE byte length must be even multiple of 4: length: ${n.length}`);let t=[];for(let r=0;r<n.length;r+=4)t.push((n[r+3]<<24)+(n[r+2]<<16)+(n[r+1]<<8)+n[r]);return t}};Bt.string={encode(n){return Zg.utf16le.encode(n).toString("utf16le")},decode(n){return Zg.utf16le.decode(Buffer.from(n,"utf16le"),0)}};Bt.escaped={encode(n){let t=[];for(let r=0;r<n.length;r+=1){let i=n[r];if(i===96)t.push(i),t.push(i);else if(i===10)t.push(i);else if(i>=32&&i<=126)t.push(i);else{let o="";if(i>=0&&i<=31)o+=`\`x${Di[i]}`;else if(i>=127&&i<=255)o+=`\`x${Di[i]}`;else if(i>=256&&i<=65535)o+=`\`u${Di[i>>8&ye[8]]}${Di[i&ye[8]]}`;else if(i>=65536&&i<=4294967295){o+="`u{";let a=i>>24&ye[8];a>0&&(o+=Di[a]),o+=`${Di[i>>16&ye[8]]+Di[i>>8&ye[8]]+Di[i&ye[8]]}}`}else throw new Error("escape.encode(char): char > 0xffffffff not allowed");Buffer.from(o).forEach(a=>{t.push(a)})}}return Buffer.from(t)},decode(n){function t(y){return y>=48&&y<=57||y>=65&&y<=70||y>=97&&y<=102}function r(y,C,O){let A={char:null,nexti:y+2,error:!0};if(y+1<C&&t(O[y])&&t(O[y+1])){let M=String.fromCodePoint(O[y],O[y+1]);A.char=parseInt(M,16),Number.isNaN(A.char)||(A.error=!1)}return A}function i(y,C,O){let A={char:null,nexti:y+4,error:!0};if(y+3<C&&t(O[y])&&t(O[y+1])&&t(O[y+2])&&t(O[y+3])){let M=String.fromCodePoint(O[y],O[y+1],O[y+2],O[y+3]);A.char=parseInt(M,16),Number.isNaN(A.char)||(A.error=!1)}return A}function o(y,C,O){let A={char:null,nexti:y+4,error:!0},M="";for(;y<C&&t(O[y]);)M+=String.fromCodePoint(O[y]),y+=1;return A.char=parseInt(M,16),O[y]===125&&!Number.isNaN(A.char)&&(A.error=!1),A.nexti=y+1,A}let s=[],a=n.length,f,u,d,h=0;for(;h<a;){for(;;){if(d=!0,n[h]!==96){s.push(n[h]),h+=1,d=!1;break}if(f=h+1,f>=a)break;if(n[f]===96){s.push(96),h+=2,d=!1;break}if(n[f]===120){if(u=r(f+1,a,n),u.error)break;s.push(u.char),h=u.nexti,d=!1;break}if(n[f]===117){if(n[f+1]===123){if(u=o(f+2,a,n),u.error)break;s.push(u.char),h=u.nexti,d=!1;break}if(u=i(f+1,a,n),u.error)break;s.push(u.char),h=u.nexti,d=!1;break}break}if(d)throw new Error(`escaped.decode: ill-formed escape sequence at buf[${h}]`)}return s}};var mf=13,Ur=10;Bt.lineEnds={crlf(n){let t=[],r=0;for(;r<n.length;)switch(n[r]){case mf:r+1<n.length&&n[r+1]===Ur?r+=2:r+=1,t.push(mf),t.push(Ur);break;case Ur:t.push(mf),t.push(Ur),r+=1;break;default:t.push(n[r]),r+=1;break}return t.length>0&&t[t.length-1]!==Ur&&(t.push(mf),t.push(Ur)),t},lf(n){let t=[],r=0;for(;r<n.length;)switch(n[r]){case mf:r+1<n.length&&n[r+1]===Ur?r+=2:r+=1,t.push(Ur);break;case Ur:t.push(Ur),r+=1;break;default:t.push(n[r]),r+=1;break}return t.length>0&&t[t.length-1]!==Ur&&t.push(Ur),t}};Bt.base64={encode(n){if(n.length===0)return Buffer.alloc(0);let t,r,i,o=n.length%3;o=o>0?3-o:0;let s=(n.length+o)/3,a=Buffer.alloc(s*4);o>0&&(s-=1),t=0,r=0;for(let f=0;f<s;f+=1)i=n[t++]<<16,i+=n[t++]<<8,i+=n[t++],a[r++]=xr[i>>18&ye[6]],a[r++]=xr[i>>12&ye[6]],a[r++]=xr[i>>6&ye[6]],a[r++]=xr[i&ye[6]];if(o===0)return a;if(o===1)return i=n[t++]<<16,i+=n[t]<<8,a[r++]=xr[i>>18&ye[6]],a[r++]=xr[i>>12&ye[6]],a[r++]=xr[i>>6&ye[6]],a[r]=xr[64],a;if(o===2)return i=n[t]<<16,a[r++]=xr[i>>18&ye[6]],a[r++]=xr[i>>12&ye[6]],a[r++]=xr[64],a[r]=xr[64],a},decode(n){function t(h){let y=[],C=0;for(let O=0;O<h.length;O+=1){let A=h[O],M=!0;for(;M&&!(A===32||A===9||A===10||A===13);){if(A>=65&&A<=90){y.push(A-65);break}if(A>=97&&A<=122){y.push(A-71);break}if(A>=48&&A<=57){y.push(A+4);break}if(A===43){y.push(62);break}if(A===47){y.push(63);break}if(A===61){y.push(64),C+=1;break}throw new RangeError(`base64.decode: invalid character buf[${O}]: ${A}`)}}if(y.length%4>0)throw new RangeError(`base64.decode: string length not integral multiple of 4: ${y.length}`);switch(C){case 0:break;case 1:if(y[y.length-1]!==64)throw new RangeError("base64.decode: one tail character found: not last character");break;case 2:if(y[y.length-1]!==64||y[y.length-2]!==64)throw new RangeError("base64.decode: two tail characters found: not last characters");break;default:throw new RangeError(`base64.decode: more than two tail characters found: ${C}`)}return{tail:C,buf:Buffer.from(y)}}if(n.length===0)return Buffer.alloc(0);let r=t(n),{tail:i}=r,o=r.buf,s,a,f,u=o.length/4,d=Buffer.alloc(u*3-i);i>0&&(u-=1),a=0,s=0;for(let h=0;h<u;h+=1)f=o[s++]<<18,f+=o[s++]<<12,f+=o[s++]<<6,f+=o[s++],d[a++]=f>>16&ye[8],d[a++]=f>>8&ye[8],d[a++]=f&ye[8];return i===1&&(f=o[s++]<<18,f+=o[s++]<<12,f+=o[s]<<6,d[a++]=f>>16&ye[8],d[a]=f>>8&ye[8]),i===2&&(f=o[s++]<<18,f+=o[s++]<<12,d[a]=f>>16&ye[8]),d},toString(n){if(n.length%4>0)throw new RangeError(`base64.toString: input buffer length not multiple of 4: ${n.length}`);let t="",r=0;function i(s,a,f,u){switch(r){case 76:t+=`\r
${s}${a}${f}${u}`,r=4;break;case 75:t+=`${s}\r
${a}${f}${u}`,r=3;break;case 74:t+=`${s+a}\r
${f}${u}`,r=2;break;case 73:t+=`${s+a+f}\r
${u}`,r=1;break;default:t+=s+a+f+u,r+=4;break}}function o(s){return s>=65&&s<=90||s>=97&&s<=122||s>=48&&s<=57||s===43||s===47||s===61}for(let s=0;s<n.length;s+=4){for(let a=s;a<s+4;a+=1)if(!o(n[a]))throw new RangeError(`base64.toString: buf[${a}]: ${n[a]} : not valid base64 character code`);i(String.fromCharCode(n[s]),String.fromCharCode(n[s+1]),String.fromCharCode(n[s+2]),String.fromCharCode(n[s+3]))}return t}}});var x0=de(gf=>{var ty=gf,nt=ey(),bf="UTF8",y0="UTF16",An="UTF16BE",ti="UTF16LE",v0="UTF32",Tn="UTF32BE",ri="UTF32LE",Hs="UINT7",ry="ASCII",ny="BINARY",zs="UINT8",iy="UINT16",Ru="UINT16LE",Ks="UINT16BE",oy="UINT32",Iu="UINT32LE",Gs="UINT32BE",Nu="ESCAPED",Ri="STRING",dS=function(t){t.type=bf;let r=t.data;t.bom=0,r.length>=3&&r[0]===239&&r[1]===187&&r[2]===191&&(t.bom=3)},pS=function(t){let r=t.data;switch(t.bom=0,t.type){case y0:t.type=An,r.length>=2&&(r[0]===254&&r[1]===255?t.bom=2:r[0]===255&&r[1]===254&&(t.type=ti,t.bom=2));break;case An:if(t.type=An,r.length>=2){if(r[0]===254&&r[1]===255)t.bom=2;else if(r[0]===255&&r[1]===254)throw new TypeError(`src type: "${An}" specified but BOM is for "${ti}"`)}break;case ti:if(t.type=ti,r.length>=0){if(r[0]===254&&r[1]===255)throw new TypeError(`src type: "${ti}" specified but BOM is for "${An}"`);r[0]===255&&r[1]===254&&(t.bom=2)}break;default:throw new TypeError(`UTF16 BOM: src type "${t.type}" unrecognized`)}},mS=function(t){let r=t.data;switch(t.bom=0,t.type){case v0:t.type=Tn,r.length>=4&&(r[0]===0&&r[1]===0&&r[2]===254&&r[3]===255&&(t.bom=4),r[0]===255&&r[1]===254&&r[2]===0&&r[3]===0&&(t.type=ri,t.bom=4));break;case Tn:if(t.type=Tn,r.length>=4&&(r[0]===0&&r[1]===0&&r[2]===254&&r[3]===255&&(t.bom=4),r[0]===255&&r[1]===254&&r[2]===0&&r[3]===0))throw new TypeError(`src type: ${Tn} specified but BOM is for ${ri}"`);break;case ri:if(t.type=ri,r.length>=4){if(r[0]===0&&r[1]===0&&r[2]===254&&r[3]===255)throw new TypeError(`src type: "${ri}" specified but BOM is for "${Tn}"`);r[0]===255&&r[1]===254&&r[2]===0&&r[3]===0&&(t.bom=4)}break;default:throw new TypeError(`UTF32 BOM: src type "${t.type}" unrecognized`)}},bS=function(t,r){function i(s){let a={type:"",base64:!1},u=/^(base64:)?([a-zA-Z0-9]+)$/i.exec(s);return u&&(u[2]&&(a.type=u[2].toUpperCase()),u[1]&&(a.base64=!0)),a}if(typeof t!="string"||t==="")throw new TypeError(`type: "${t}" not recognized`);let o=i(t.toUpperCase());if(o.base64){if(o.type===Ri)throw new TypeError(`type: "${t} "BASE64:" prefix not allowed with type ${Ri}`);if(Buffer.isBuffer(r))o.data=nt.base64.decode(r);else if(typeof r=="string"){let s=Buffer.from(r,"ascii");o.data=nt.base64.decode(s)}else throw new TypeError(`type: "${t} unrecognized data type: typeof(data): ${typeof r}`)}else o.data=r;switch(o.type){case bf:dS(o);break;case y0:case An:case ti:pS(o);break;case v0:case Tn:case ri:mS(o);break;case iy:o.type=Ks;break;case oy:o.type=Gs;break;case ry:o.type=Hs;break;case ny:o.type=zs;break;case Hs:case zs:case Ru:case Ks:case Iu:case Gs:case Ri:case Nu:break;default:throw new TypeError(`type: "${t}" not recognized`)}if(o.type===Ri){if(typeof o.data!="string")throw new TypeError(`type: "${t}" but data is not a string`)}else if(!Buffer.isBuffer(o.data))throw new TypeError(`type: "${t}" but data is not a Buffer`);return o},gS=function(t,r){function i(s){let a,f,u={crlf:!1,lf:!1,base64:!1,type:""},d=!0;for(;d;){if(f=s,a=s.slice(0,5),a==="CRLF:"){u.crlf=!0,f=s.slice(5);break}if(a=s.slice(0,3),a==="LF:"){u.lf=!0,f=s.slice(3);break}break}return a=f.split(":"),a.length===1?u.type=a[0]:a.length===2&&a[1]==="BASE64"&&(u.base64=!0,u.type=a[0]),u}if(!Array.isArray(r))throw new TypeError(`dst chars: not array: "${typeof r}`);if(typeof t!="string")throw new TypeError(`dst type: not string: "${typeof t}`);let o=i(t.toUpperCase());switch(o.type){case bf:case An:case ti:case Tn:case ri:case Hs:case zs:case Ru:case Ks:case Iu:case Gs:case Nu:break;case Ri:if(o.base64)throw new TypeError(`":BASE64" suffix not allowed with type ${Ri}`);break;case ry:o.type=Hs;break;case ny:o.type=zs;break;case y0:o.type=An;break;case v0:o.type=Tn;break;case iy:o.type=Ks;break;case oy:o.type=Gs;break;default:throw new TypeError(`dst type unrecognized: "${t}" : must have form [crlf:|lf:]type[:base64]`)}return o},g0=function(t,r){switch(t){case bf:return nt.utf8.encode(r);case An:return nt.utf16be.encode(r);case ti:return nt.utf16le.encode(r);case Tn:return nt.utf32be.encode(r);case ri:return nt.utf32le.encode(r);case Hs:return nt.uint7.encode(r);case zs:return nt.uint8.encode(r);case Ks:return nt.uint16be.encode(r);case Ru:return nt.uint16le.encode(r);case Gs:return nt.uint32be.encode(r);case Iu:return nt.uint32le.encode(r);case Ri:return nt.string.encode(r);case Nu:return nt.escaped.encode(r);default:throw new TypeError(`encode type "${t}" not recognized`)}},yS=function(t){switch(t.type){case bf:return nt.utf8.decode(t.data,t.bom);case ti:return nt.utf16le.decode(t.data,t.bom);case An:return nt.utf16be.decode(t.data,t.bom);case Tn:return nt.utf32be.decode(t.data,t.bom);case ri:return nt.utf32le.decode(t.data,t.bom);case Hs:return nt.uint7.decode(t.data);case zs:return nt.uint8.decode(t.data);case Ks:return nt.uint16be.decode(t.data);case Ru:return nt.uint16le.decode(t.data);case Gs:return nt.uint32be.decode(t.data);case Iu:return nt.uint32le.decode(t.data);case Ri:return nt.string.decode(t.data);case Nu:return nt.escaped.decode(t.data);default:throw new TypeError(`decode type "${t.type}" not recognized`)}};gf.decode=function(t,r){let i=bS(t,r);return yS(i)};gf.encode=function(t,r){let i,o,s=gS(t,r);return s.crlf?(i=nt.lineEnds.crlf(r),o=g0(s.type,i)):s.lf?(i=nt.lineEnds.lf(r),o=g0(s.type,i)):o=g0(s.type,r),s.base64&&(o=nt.base64.encode(o)),o};gf.convert=function(t,r,i){return ty.encode(i,ty.decode(t,r))}});var w0=de((pF,sy)=>{sy.exports=function(){return`/* This file automatically generated by jsonToless() and LESS. */
.apg-mono {
  font-family: monospace;
}
.apg-active {
  font-weight: bold;
  color: #000000;
}
.apg-match {
  font-weight: bold;
  color: #264BFF;
}
.apg-empty {
  font-weight: bold;
  color: #0fbd0f;
}
.apg-nomatch {
  font-weight: bold;
  color: #FF4000;
}
.apg-lh-match {
  font-weight: bold;
  color: #1A97BA;
}
.apg-lb-match {
  font-weight: bold;
  color: #5F1687;
}
.apg-remainder {
  font-weight: bold;
  color: #999999;
}
.apg-ctrl-char {
  font-weight: bolder;
  font-style: italic;
  font-size: 0.6em;
}
.apg-line-end {
  font-weight: bold;
  color: #000000;
}
.apg-error {
  font-weight: bold;
  color: #FF4000;
}
.apg-phrase {
  color: #000000;
  background-color: #8caae6;
}
.apg-empty-phrase {
  color: #0fbd0f;
}
table.apg-state {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: left;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-state th,
table.apg-state td {
  text-align: left;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-state th:nth-last-child(2),
table.apg-state td:nth-last-child(2) {
  text-align: right;
}
table.apg-state caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-stats {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-stats th,
table.apg-stats td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-stats caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-trace {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-trace caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-trace th,
table.apg-trace td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-trace th:last-child,
table.apg-trace th:nth-last-child(2),
table.apg-trace td:last-child,
table.apg-trace td:nth-last-child(2) {
  text-align: left;
}
table.apg-grammar {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-grammar caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-grammar th,
table.apg-grammar td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-grammar th:last-child,
table.apg-grammar td:last-child {
  text-align: left;
}
table.apg-rules {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-rules caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-rules th,
table.apg-rules td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-rules a {
  color: #003399 !important;
}
table.apg-rules a:hover {
  color: #8caae6 !important;
}
table.apg-attrs {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: center;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-attrs caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-attrs th,
table.apg-attrs td {
  text-align: center;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-attrs th:nth-child(1),
table.apg-attrs th:nth-child(2),
table.apg-attrs th:nth-child(3) {
  text-align: right;
}
table.apg-attrs td:nth-child(1),
table.apg-attrs td:nth-child(2),
table.apg-attrs td:nth-child(3) {
  text-align: right;
}
table.apg-attrs a {
  color: #003399 !important;
}
table.apg-attrs a:hover {
  color: #8caae6 !important;
}
`}});var Bo=de(Ct=>{var fr=pf(),E0=x0(),vS=w0(),yt=on(),Ii="utilities.js: ",ni=Ct,Lo=function(n,t,r){let i,o=t,s=!0;for(;s;){if(n<=0){o=0,i=0;break}if(typeof o!="number"){o=0,i=n;break}if(o>=n){o=n,i=n;break}if(typeof r!="number"){i=n;break}if(i=o+r,i>n){i=n;break}break}return{beg:o,end:i}};Ct.htmlToPage=function(n,t){let r;if(typeof n!="string")throw new Error(`${Ii}htmlToPage: input HTML is not a string`);typeof t!="string"?r="htmlToPage":r=t;let i="";return i+=`<!DOCTYPE html>
`,i+=`<html lang="en">
`,i+=`<head>
`,i+=`<meta charset="utf-8">
`,i+=`<title>${r}</title>
`,i+=`<style>
`,i+=vS(),i+=`</style>
`,i+=`</head>
<body>
`,i+=`<p>${new Date}</p>
`,i+=n,i+=`</body>
</html>
`,i};Ct.parserResultToHtml=function(n,t){let r=null;typeof t=="string"&&t!==""&&(r=t);let i,o;n.success===!0?i=`<span class="${fr.CLASS_MATCH}">true</span>`:i=`<span class="${fr.CLASS_NOMATCH}">false</span>`,n.state===yt.EMPTY?o=`<span class="${fr.CLASS_EMPTY}">EMPTY</span>`:n.state===yt.MATCH?o=`<span class="${fr.CLASS_MATCH}">MATCH</span>`:n.state===yt.NOMATCH?o=`<span class="${fr.CLASS_NOMATCH}">NOMATCH</span>`:o=`<span class="${fr.CLASS_NOMATCH}">unrecognized</span>`;let s="";return s+=`<table class="${fr.CLASS_STATE}">
`,r&&(s+=`<caption>${r}</caption>
`),s+=`<tr><th>state item</th><th>value</th><th>description</th></tr>
`,s+=`<tr><td>parser success</td><td>${i}</td>
`,s+=`<td><span class="${fr.CLASS_MATCH}">true</span> if the parse succeeded,
`,s+=` <span class="${fr.CLASS_NOMATCH}">false</span> otherwise`,s+=`<br><i>NOTE: for success, entire string must be matched</i></td></tr>
`,s+=`<tr><td>parser state</td><td>${o}</td>
`,s+=`<td><span class="${fr.CLASS_EMPTY}">EMPTY</span>, `,s+=`<span class="${fr.CLASS_MATCH}">MATCH</span> or 
`,s+=`<span class="${fr.CLASS_NOMATCH}">NOMATCH</span></td></tr>
`,s+=`<tr><td>string length</td><td>${n.length}</td><td>length of the input (sub)string</td></tr>
`,s+=`<tr><td>matched length</td><td>${n.matched}</td><td>number of input string characters matched</td></tr>
`,s+=`<tr><td>max matched</td><td>${n.maxMatched}</td><td>maximum number of input string characters matched</td></tr>
`,s+=`<tr><td>max tree depth</td><td>${n.maxTreeDepth}</td><td>maximum depth of the parse tree reached</td></tr>
`,s+=`<tr><td>node hits</td><td>${n.nodeHits}</td><td>number of parse tree node hits (opcode function calls)</td></tr>
`,s+=`<tr><td>input length</td><td>${n.inputLength}</td><td>length of full input string</td></tr>
`,s+=`<tr><td>sub-string begin</td><td>${n.subBegin}</td><td>sub-string first character index</td></tr>
`,s+=`<tr><td>sub-string end</td><td>${n.subEnd}</td><td>sub-string end-of-string index</td></tr>
`,s+=`<tr><td>sub-string length</td><td>${n.subLength}</td><td>sub-string length</td></tr>
`,s+=`</table>
`,s};Ct.charsToString=function(n,t,r){let i,o;if(typeof t=="number"){if(t>=n.length)return"";i=t<0?0:t}else i=0;if(typeof r=="number"){if(r<=0)return"";o=r>n.length-i?n.length:i+r}else o=n.length;return i<o?E0.encode("UTF16LE",n.slice(i,o)).toString("utf16le"):""};Ct.stringToChars=function(n){return E0.decode("STRING",n)};Ct.opcodeToString=function(n){let t="unknown";switch(n){case yt.ALT:t="ALT";break;case yt.CAT:t="CAT";break;case yt.RNM:t="RNM";break;case yt.UDT:t="UDT";break;case yt.AND:t="AND";break;case yt.NOT:t="NOT";break;case yt.REP:t="REP";break;case yt.TRG:t="TRG";break;case yt.TBS:t="TBS";break;case yt.TLS:t="TLS";break;case yt.BKR:t="BKR";break;case yt.BKA:t="BKA";break;case yt.BKN:t="BKN";break;case yt.ABG:t="ABG";break;case yt.AEN:t="AEN";break;default:throw new Error("unrecognized opcode")}return t};Ct.stateToString=function(n){let t="unknown";switch(n){case yt.ACTIVE:t="ACTIVE";break;case yt.MATCH:t="MATCH";break;case yt.EMPTY:t="EMPTY";break;case yt.NOMATCH:t="NOMATCH";break;default:throw new Error("unrecognized state")}return t};Ct.asciiChars=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","TAB","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","&nbsp;","!","&#34;","#","$","%","&#38;","&#39;","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","&#60;","=","&#62;","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","&#92;","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL"];Ct.charToHex=function(n){let t=n.toString(16).toUpperCase();switch(t.length){case 1:case 3:case 7:t=`0${t}`;break;case 2:case 6:t=`00${t}`;break;case 4:break;case 5:t=`000${t}`;break;default:throw new Error("unrecognized option")}return t};Ct.charsToDec=function(n,t,r){let i="";if(!Array.isArray(n))throw new Error(`${Ii}charsToDec: input must be an array of integers`);let o=Lo(n.length,t,r);if(o.end>o.beg){i+=n[o.beg];for(let s=o.beg+1;s<o.end;s+=1)i+=`,${n[s]}`}return i};Ct.charsToHex=function(n,t,r){let i="";if(!Array.isArray(n))throw new Error(`${Ii}charsToHex: input must be an array of integers`);let o=Lo(n.length,t,r);if(o.end>o.beg){i+=`\\x${ni.charToHex(n[o.beg])}`;for(let s=o.beg+1;s<o.end;s+=1)i+=`,\\x${ni.charToHex(n[s])}`}return i};Ct.charsToHtmlEntities=function(n,t,r){let i="";if(!Array.isArray(n))throw new Error(`${Ii}charsToHex: input must be an array of integers`);let o=Lo(n.length,t,r);if(o.end>o.beg)for(let s=o.beg;s<o.end;s+=1)i+=`&#x${n[s].toString(16)};`;return i};function xS(n){return!(n>=55296&&n<=57343||n>1114111)}Ct.charsToUnicode=function(n,t,r){let i="";if(!Array.isArray(n))throw new Error(`${Ii}charsToUnicode: input must be an array of integers`);let o=Lo(n.length,t,r);if(o.end>o.beg)for(let s=o.beg;s<o.end;s+=1)xS(n[s])?i+=`&#${n[s]};`:i+=` U+${ni.charToHex(n[s])}`;return i};Ct.charsToJsUnicode=function(n,t,r){let i="";if(!Array.isArray(n))throw new Error(`${Ii}charsToJsUnicode: input must be an array of integers`);let o=Lo(n.length,t,r);if(o.end>o.beg){i+=`\\u${ni.charToHex(n[o.beg])}`;for(let s=o.beg+1;s<o.end;s+=1)i+=`,\\u${ni.charToHex(n[s])}`}return i};Ct.charsToAscii=function(n,t,r){let i="";if(!Array.isArray(n))throw new Error(`${Ii}charsToAscii: input must be an array of integers`);let o=Lo(n.length,t,r);for(let s=o.beg;s<o.end;s+=1){let a=n[s];a>=32&&a<=126?i+=String.fromCharCode(a):i+=`\\x${ni.charToHex(a)}`}return i};Ct.charsToAsciiHtml=function(n,t,r){if(!Array.isArray(n))throw new Error(`${Ii}charsToAsciiHtml: input must be an array of integers`);let i="",o,s=Lo(n.length,t,r);for(let a=s.beg;a<s.end;a+=1)o=n[a],o<32||o===127?i+=`<span class="${fr.CLASS_CTRLCHAR}">${ni.asciiChars[o]}</span>`:o>127?i+=`<span class="${fr.CLASS_CTRLCHAR}">U+${ni.charToHex(o)}</span>`:i+=ni.asciiChars[o];return i};Ct.stringToAsciiHtml=function(n){let t=E0.decode("STRING",n);return this.charsToAsciiHtml(t)}});var fy=de((bF,ay)=>{ay.exports=function(){let t=on(),r=Bo(),i="ast.js: ",o=this,s=null,a=null,f=null,u=0,d=[],h=[],y=[],C=[];this.callbacks=[],this.astObject="astObject",this.init=function(M,F,D){y.length=0,C.length=0,d.length=0,u=0,s=M,a=F,f=D;let $,K=[];for($=0;$<s.length;$+=1)K.push(s[$].lower);for($=0;$<a.length;$+=1)K.push(a[$].lower);for(u=s.length+a.length,$=0;$<u;$+=1)d[$]=!1,h[$]=null;for(let j in o.callbacks){let X=j.toLowerCase();if($=K.indexOf(X),$<0)throw new Error(`${i}init: node '${j}' not a rule or udt name`);typeof o.callbacks[j]=="function"&&(d[$]=!0,h[$]=o.callbacks[j]),o.callbacks[j]===!0&&(d[$]=!0)}},this.ruleDefined=function(M){return d[M]!==!1},this.udtDefined=function(M){return d[s.length+M]!==!1},this.down=function(M,F){let D=C.length;return y.push(D),C.push({name:F,thisIndex:D,thatIndex:null,state:t.SEM_PRE,callbackIndex:M,phraseIndex:null,phraseLength:null,stack:y.length}),D},this.up=function(M,F,D,$){let K=C.length,j=y.pop();return C.push({name:F,thisIndex:K,thatIndex:j,state:t.SEM_POST,callbackIndex:M,phraseIndex:D,phraseLength:$,stack:y.length}),C[j].thatIndex=K,C[j].phraseIndex=D,C[j].phraseLength=$,K},this.translate=function(M){let F,D,$;for(let K=0;K<C.length;K+=1)$=C[K],D=h[$.callbackIndex],$.state===t.SEM_PRE?D!==null&&(F=D(t.SEM_PRE,f,$.phraseIndex,$.phraseLength,M),F===t.SEM_SKIP&&(K=$.thatIndex)):D!==null&&D(t.SEM_POST,f,$.phraseIndex,$.phraseLength,M)},this.setLength=function(M){C.length=M,M>0?y.length=C[M-1].stack:y.length=0},this.getLength=function(){return C.length};function O(A){let M="";for(let F=0;F<A;F+=1)M+=" ";return M}this.toXml=function(M){let F=r.charsToDec,D="decimal integer character codes";if(typeof M=="string"&&M.length>=3){let j=M.slice(0,3).toLowerCase();j==="asc"?(F=r.charsToAscii,D="ASCII for printing characters, hex for non-printing"):j==="hex"?(F=r.charsToHex,D="hexadecimal integer character codes"):j==="uni"&&(F=r.charsToUnicode,D="Unicode UTF-32 integer character codes")}let $="",K=0;return $+=`<?xml version="1.0" encoding="utf-8"?>
`,$+=`<root nodes="${C.length/2}" characters="${f.length}">
`,$+=`<!-- input string, ${D} -->
`,$+=O(K+2),$+=F(f),$+=`
`,C.forEach(j=>{j.state===t.SEM_PRE?(K+=1,$+=O(K),$+=`<node name="${j.name}" index="${j.phraseIndex}" length="${j.phraseLength}">
`,$+=O(K+2),$+=F(f,j.phraseIndex,j.phraseLength),$+=`
`):($+=O(K),$+=`</node><!-- name="${j.name}" -->
`,K-=1)}),$+=`</root>
`,$},this.phrases=function(){let M={},F,D;for(F=0;F<C.length;F+=1)D=C[F],D.state===t.SEM_PRE&&(Array.isArray(M[D.name])||(M[D.name]=[]),M[D.name].push({index:D.phraseIndex,length:D.phraseLength}));return M}}});var _0=de((gF,cy)=>{cy.exports=function(){let t="circular-buffer.js: ",r=-1,i=0;this.init=function(s){if(typeof s!="number"||s<=0)throw new Error(`${t}init: circular buffer size must an integer > 0`);i=Math.ceil(s),r=-1},this.increment=function(){return r+=1,(r+i)%i},this.maxSize=function(){return i},this.items=function(){return r+1},this.getListIndex=function(s){return r===-1||s<0||s>r||r-s>=i?-1:(s+i)%i},this.forEach=function(s){if(r!==-1){if(r<i){for(let a=0;a<=r;a+=1)s(a,a);return}for(let a=r-i+1;a<=r;a+=1){let f=(a+i)%i;s(f,a)}}}}});var ly=de((yF,uy)=>{uy.exports=function(){let t=on(),r=Bo(),i="parser.js: ",o=this,s;this.ast=null,this.stats=null,this.trace=null,this.callbacks=[];let a=null,f=null,u,d,h,y,C=0,O=0,A=0,M=null,F=null,D=null,$=null,K=null,j=0,X=1/0,B=1/0,L=function(V,I,H){let ie=`${i}evaluateRule(): `;if(V>=D.length)throw new Error(`${ie}rule index: ${V} out of range`);if(I>=h)throw new Error(`${ie}phrase index: ${I} out of range`);let{length:ae}=a;a.push({type:t.RNM,index:V}),s(ae,I,H),a.pop()},U=function(ee,V,I){let H=`${i}evaluateUdt(): `;if(ee>=$.length)throw new Error(`${H}udt index: ${ee} out of range`);if(V>=h)throw new Error(`${H}phrase index: ${V} out of range`);let{length:ie}=a;a.push({type:t.UDT,empty:$[ee].empty,index:ee}),s(ie,V,I),a.pop()},te=function(){C=0,O=0,A=0,j=0,y=[{lookAround:t.LOOKAROUND_NONE,anchor:0,charsEnd:0,charsLength:0}],D=null,$=null,f=null,u=0,d=0,h=0,M=null,F=null,K=null,a=null},_=function(){let ee=[],V=function(){let H={};D.forEach(ie=>{ie.isBkr&&(H[ie.lower]=null)}),$.length>0&&$.forEach(ie=>{ie.isBkr&&(H[ie.lower]=null)}),ee.push(H)},I=function(){let H=ee[ee.length-1],ie={};for(let ae in H)ie[ae]=H[ae];return ie};this.push=function(){ee.push(I())},this.pop=function(ie){let ae=ie;if(ae||(ae=ee.length-1),ae<1||ae>ee.length)throw new Error(`${i}backRef.pop(): bad length: ${ae}`);return ee.length=ae,ee[ee.length-1]},this.length=function(){return ee.length},this.savePhrase=function(ie,ae,ce){ee[ee.length-1][ie]={phraseIndex:ae,phraseLength:ce}},this.getPhrase=function(H){return ee[ee.length-1][H]},V()},l=function(){let V=this;this.state=t.ACTIVE,this.phraseLength=0,this.ruleIndex=0,this.udtIndex=0,this.lookAround=y[y.length-1],this.uFrame=new _,this.pFrame=new _,this.evaluateRule=L,this.evaluateUdt=U,this.refresh=function(){V.state=t.ACTIVE,V.phraseLength=0,V.lookAround=y[y.length-1]}},g=function(){return y[y.length-1]},m=function(){return y.length>1},c=function(){return y[y.length-1].lookAround===t.LOOKAROUND_BEHIND},p=function(){let ee=`${i}initializeAst(): `,V=!0;for(;V;){if(o.ast===void 0){o.ast=null;break}if(o.ast===null)break;if(o.ast.astObject!=="astObject")throw new Error(`${ee}ast object not recognized`);break}o.ast!==null&&o.ast.init(D,$,f)},x=function(){let ee=`${i}initializeTrace(): `,V=!0;for(;V;){if(o.trace===void 0){o.trace=null;break}if(o.trace===null)break;if(o.trace.traceObject!=="traceObject")throw new Error(`${ee}trace object not recognized`);break}o.trace!==null&&o.trace.init(D,$,f)},E=function(){let ee=`${i}initializeStats(): `,V=!0;for(;V;){if(o.stats===void 0){o.stats=null;break}if(o.stats===null)break;if(o.stats.statsObject!=="statsObject")throw new Error(`${ee}stats object not recognized`);break}o.stats!==null&&o.stats.init(D,$)},w=function(ee){let V=`${i}initializeGrammar(): `;if(!ee)throw new Error(`${V}grammar object undefined`);if(ee.grammarObject!=="grammarObject")throw new Error(`${V}bad grammar object`);D=ee.rules,$=ee.udts},b=function(ee){let V=`${i}initializeStartRule(): `,I=null;if(typeof ee=="number"){if(ee>=D.length)throw new Error(`${V}start rule index too large: max: ${D.length}: index: ${ee}`);I=ee}else if(typeof ee=="string"){let H=ee.toLowerCase();for(let ie=0;ie<D.length;ie+=1)if(H===D[ie].lower){I=D[ie].index;break}if(I===null)throw new Error(`${V}start rule name '${ee}' not recognized`)}else throw new Error(`${V}type of start rule '${typeof ee}' not recognized`);return I},S=function(V,I,H){let ie=`${i}initializeInputChars(): `,ae=V,ce=I,me=H;if(ae===void 0)throw new Error(`${ie}input string is undefined`);if(ae===null)throw new Error(`${ie}input string is null`);if(typeof ae=="string")ae=r.stringToChars(ae);else if(!Array.isArray(ae))throw new Error(`${ie}input string is not a string or array`);if(ae.length>0&&typeof ae[0]!="number")throw new Error(`${ie}input string not an array of integers`);if(typeof ce!="number")ce=0;else if(ce=Math.floor(ce),ce<0||ce>ae.length)throw new Error(`${ie}input beginning index out of range: ${ce}`);if(typeof me!="number")me=ae.length-ce;else if(me=Math.floor(me),me<0||me>ae.length-ce)throw new Error(`${ie}input length out of range: ${me}`);f=ae,u=ce,d=me,h=u+d},R=function(){let ee=`${i}initializeCallbacks(): `,V;for(M=[],F=[],V=0;V<D.length;V+=1)M[V]=null;for(V=0;V<$.length;V+=1)F[V]=null;let I,H=[];for(V=0;V<D.length;V+=1)H.push(D[V].lower);for(V=0;V<$.length;V+=1)H.push($[V].lower);for(let ie in o.callbacks){if(V=H.indexOf(ie.toLowerCase()),V<0)throw new Error(`${ee}syntax callback '${ie}' not a rule or udt name`);if(I=o.callbacks[ie],I||(I=null),typeof I=="function"||I===null)V<D.length?M[V]=I:F[V-D.length]=I;else throw new Error(`${ee}syntax callback[${ie}] must be function reference or 'false' (false/null/undefined/etc.)`)}for(V=0;V<$.length;V+=1)if(F[V]===null)throw new Error(`${ee}all UDT callbacks must be defined. UDT callback[${$[V].lower}] not a function reference`)};this.setMaxTreeDepth=function(ee){if(typeof ee!="number")throw new Error(`parser: max tree depth must be integer > 0: ${ee}`);if(X=Math.floor(ee),X<=0)throw new Error(`parser: max tree depth must be integer > 0: ${ee}`)},this.setMaxNodeHits=function(ee){if(typeof ee!="number")throw new Error(`parser: max node hits must be integer > 0: ${ee}`);if(B=Math.floor(ee),B<=0)throw new Error(`parser: max node hits must be integer > 0: ${ee}`)};let v=function(ee,V,I){let H,ie=`${i}parse(): `;w(ee);let ae=b(V);R(),x(),E(),p();let ce=new l;switch(I!=null&&(K=I),a=[{type:t.RNM,index:ae}],s(0,u,ce),a=null,ce.state){case t.ACTIVE:throw new Error(`${ie}final state should never be 'ACTIVE'`);case t.NOMATCH:H=!1;break;case t.EMPTY:case t.MATCH:ce.phraseLength===d?H=!0:H=!1;break;default:throw new Error("unrecognized state")}return{success:H,state:ce.state,length:d,matched:ce.phraseLength,maxMatched:j,maxTreeDepth:O,nodeHits:A,inputLength:f.length,subBegin:u,subEnd:h,subLength:d}};this.parseSubstring=function(V,I,H,ie,ae,ce){return te(),S(H,ie,ae),v(V,I,ce)},this.parse=function(V,I,H,ie){return te(),S(H,0,H.length),v(V,I,ie)};let T=function(ee,V,I){let H=a[ee];for(let ie=0;ie<H.children.length&&(s(H.children[ie],V,I),I.state===t.NOMATCH);ie+=1);},re=function(ee,V,I){let H,ie,ae,ce,me=a[ee],et=I.uFrame.length(),we=I.pFrame.length();o.ast&&(ie=o.ast.getLength()),H=!0,ae=V,ce=0;for(let be=0;be<me.children.length;be+=1)if(s(me.children[be],ae,I),I.state===t.NOMATCH){H=!1;break}else ae+=I.phraseLength,ce+=I.phraseLength;H?(I.state=ce===0?t.EMPTY:t.MATCH,I.phraseLength=ce):(I.state=t.NOMATCH,I.phraseLength=0,I.uFrame.pop(et),I.pFrame.pop(we),o.ast&&o.ast.setLength(ie))},k=function(ee,V,I){let H,ie,ae,ce,me=a[ee];ie=V,ae=0,ce=0;let et=I.uFrame.length(),we=I.pFrame.length();o.ast&&(H=o.ast.getLength());let be=!0;for(;be&&!(ie>=h||(s(ee+1,ie,I),I.state===t.NOMATCH)||I.state===t.EMPTY||(ce+=1,ae+=I.phraseLength,ie+=I.phraseLength,ce===me.max)););I.state===t.EMPTY||ce>=me.min?(I.state=ae===0?t.EMPTY:t.MATCH,I.phraseLength=ae):(I.state=t.NOMATCH,I.phraseLength=0,I.uFrame.pop(et),I.pFrame.pop(we),o.ast&&o.ast.setLength(H))},z=function(ee,V,I,H){if(V.phraseLength>I){let ie=`${i}opRNM(${ee.name}): callback function error: `;throw ie+=`sysData.phraseLength: ${V.phraseLength}`,ie+=` must be <= remaining chars: ${I}`,new Error(ie)}switch(V.state){case t.ACTIVE:if(H!==!0)throw new Error(`${i}opRNM(${ee.name}): callback function return error. ACTIVE state not allowed.`);break;case t.EMPTY:V.phraseLength=0;break;case t.MATCH:V.phraseLength===0&&(V.state=t.EMPTY);break;case t.NOMATCH:V.phraseLength=0;break;default:throw new Error(`${i}opRNM(${ee.name}): callback function return error. Unrecognized return state: ${V.state}`)}},Y=function(ee,V,I){let H,ie,ae,ce,me,et,we=a[ee],be=D[we.index],rt=M[be.index],Se=!m();if(Se&&(ie=o.ast&&o.ast.ruleDefined(we.index),ie&&(H=o.ast.getLength(),o.ast.down(we.index,D[we.index].name)),ce=I.uFrame.length(),me=I.pFrame.length(),I.uFrame.push(),I.pFrame.push(),et=I.pFrame,I.pFrame=new _),rt===null)ae=a,a=be.opcodes,s(0,V,I),a=ae;else{let Me=h-V;I.ruleIndex=be.index,rt(I,f,V,K),z(be,I,Me,!0),I.state===t.ACTIVE&&(ae=a,a=be.opcodes,s(0,V,I),a=ae,I.ruleIndex=be.index,rt(I,f,V,K),z(be,I,Me,!1))}Se&&(ie&&(I.state===t.NOMATCH?o.ast.setLength(H):o.ast.up(we.index,be.name,V,I.phraseLength)),I.pFrame=et,I.state===t.NOMATCH?(I.uFrame.pop(ce),I.pFrame.pop(me)):be.isBkr&&(I.pFrame.savePhrase(be.lower,V,I.phraseLength),I.uFrame.savePhrase(be.lower,V,I.phraseLength)))},N=function(ee,V,I){if(V.phraseLength>I){let H=`${i}opUDT(${ee.name}): callback function error: `;throw H+=`sysData.phraseLength: ${V.phraseLength}`,H+=` must be <= remaining chars: ${I}`,new Error(H)}switch(V.state){case t.ACTIVE:throw new Error(`${i}opUDT(${ee.name}): callback function return error. ACTIVE state not allowed.`);case t.EMPTY:if(ee.empty===!1)throw new Error(`${i}opUDT(${ee.name}): callback function return error. May not return EMPTY.`);V.phraseLength=0;break;case t.MATCH:if(V.phraseLength===0){if(ee.empty===!1)throw new Error(`${i}opUDT(${ee.name}): callback function return error. May not return EMPTY.`);V.state=t.EMPTY}break;case t.NOMATCH:V.phraseLength=0;break;default:throw new Error(`${i}opUDT(${ee.name}): callback function return error. Unrecognized return state: ${V.state}`)}},P=function(ee,V,I){let H,ie,ae,ce,me,et,we=a[ee],be=$[we.index];I.UdtIndex=be.index;let rt=!m();rt&&(ae=o.ast&&o.ast.udtDefined(we.index),ae&&(ie=D.length+we.index,H=o.ast.getLength(),o.ast.down(ie,be.name)),ce=I.uFrame.length(),me=I.pFrame.length(),I.uFrame.push(),I.pFrame.push(),et=I.pFrame,I.pFrame=new _);let Se=h-V;F[we.index](I,f,V,K),N(be,I,Se),rt&&(ae&&(I.state===t.NOMATCH?o.ast.setLength(H):o.ast.up(ie,be.name,V,I.phraseLength)),I.pFrame=et,I.state===t.NOMATCH?(I.uFrame.pop(ce),I.pFrame.pop(me)):be.isBkr&&(I.pFrame.savePhrase(be.lower,V,I.phraseLength),I.uFrame.savePhrase(be.lower,V,I.phraseLength)))},G=function(ee,V,I){y.push({lookAround:t.LOOKAROUND_AHEAD,anchor:V,charsEnd:h,charsLength:d}),h=f.length,d=f.length-u,s(ee+1,V,I);let H=y.pop();switch(h=H.charsEnd,d=H.charsLength,I.phraseLength=0,I.state){case t.EMPTY:I.state=t.EMPTY;break;case t.MATCH:I.state=t.EMPTY;break;case t.NOMATCH:I.state=t.NOMATCH;break;default:throw new Error(`opAND: invalid state ${I.state}`)}},J=function(ee,V,I){y.push({lookAround:t.LOOKAROUND_AHEAD,anchor:V,charsEnd:h,charsLength:d}),h=f.length,d=f.length-u,s(ee+1,V,I);let H=y.pop();switch(h=H.charsEnd,d=H.charsLength,I.phraseLength=0,I.state){case t.EMPTY:case t.MATCH:I.state=t.NOMATCH;break;case t.NOMATCH:I.state=t.EMPTY;break;default:throw new Error(`opNOT: invalid state ${I.state}`)}},Q=function(ee,V,I){let H=a[ee];I.state=t.NOMATCH,V<h&&H.min<=f[V]&&f[V]<=H.max&&(I.state=t.MATCH,I.phraseLength=1)},le=function(ee,V,I){let H,ie=a[ee],ae=ie.string.length;if(I.state=t.NOMATCH,V+ae<=h){for(H=0;H<ae;H+=1)if(f[V+H]!==ie.string[H])return;I.state=t.MATCH,I.phraseLength=ae}},oe=function(ee,V,I){let H,ie,ae=a[ee];I.state=t.NOMATCH;let ce=ae.string.length;if(ce===0){I.state=t.EMPTY;return}if(V+ce<=h){for(H=0;H<ce;H+=1)if(ie=f[V+H],ie>=65&&ie<=90&&(ie+=32),ie!==ae.string[H])return;I.state=t.MATCH,I.phraseLength=ce}},W=function(ee,V,I){I.state=t.NOMATCH,I.phraseLength=0,I.state=V===0?t.EMPTY:t.NOMATCH},he=function(ee,V,I){I.state=t.NOMATCH,I.phraseLength=0,I.state=V===f.length?t.EMPTY:t.NOMATCH},Z=function(ee,V,I){let H,ie,ae,ce,me=a[ee];I.state=t.NOMATCH,me.index<D.length?ce=D[me.index].lower:ce=$[me.index-D.length].lower;let et=me.bkrMode===t.BKR_MODE_PM?I.pFrame.getPhrase(ce):I.uFrame.getPhrase(ce),we=me.bkrCase===t.BKR_MODE_CI;if(et===null)return;let be=et.phraseIndex,rt=et.phraseLength;if(rt===0){I.state=t.EMPTY;return}if(V+rt<=h){if(we){for(H=0;H<rt;H+=1)if(ie=f[V+H],ae=f[be+H],ie>=65&&ie<=90&&(ie+=32),ae>=65&&ae<=90&&(ae+=32),ie!==ae)return;I.state=t.MATCH,I.phraseLength=rt}else for(H=0;H<rt;H+=1)if(ie=f[V+H],ae=f[be+H],ie!==ae)return;I.state=t.MATCH,I.phraseLength=rt}},se=function(ee,V,I){switch(y.push({lookAround:t.LOOKAROUND_BEHIND,anchor:V}),s(ee+1,V,I),y.pop(),I.phraseLength=0,I.state){case t.EMPTY:I.state=t.EMPTY;break;case t.MATCH:I.state=t.EMPTY;break;case t.NOMATCH:I.state=t.NOMATCH;break;default:throw new Error(`opBKA: invalid state ${I.state}`)}},q=function(ee,V,I){switch(y.push({lookAround:t.LOOKAROUND_BEHIND,anchor:V}),s(ee+1,V,I),y.pop(),I.phraseLength=0,I.state){case t.EMPTY:case t.MATCH:I.state=t.NOMATCH;break;case t.NOMATCH:I.state=t.EMPTY;break;default:throw new Error(`opBKN: invalid state ${I.state}`)}},ne=function(ee,V,I){let H,ie,ae,ce,me=a[ee],et=I.uFrame.length(),we=I.pFrame.length();o.ast&&(ie=o.ast.getLength()),H=!0,ae=V,ce=0;for(let be=me.children.length-1;be>=0;be-=1)if(s(me.children[be],ae,I),ae-=I.phraseLength,ce+=I.phraseLength,I.state===t.NOMATCH){H=!1;break}H?(I.state=ce===0?t.EMPTY:t.MATCH,I.phraseLength=ce):(I.state=t.NOMATCH,I.phraseLength=0,I.uFrame.pop(et),I.pFrame.pop(we),o.ast&&o.ast.setLength(ie))},pe=function(ee,V,I){let H,ie,ae,ce,me=a[ee];ie=V,ae=0,ce=0;let et=I.uFrame.length(),we=I.pFrame.length();o.ast&&(H=o.ast.getLength());let be=!0;for(;be&&!(ie<=0||(s(ee+1,ie,I),I.state===t.NOMATCH)||I.state===t.EMPTY||(ce+=1,ae+=I.phraseLength,ie-=I.phraseLength,ce===me.max)););I.state===t.EMPTY||ce>=me.min?(I.state=ae===0?t.EMPTY:t.MATCH,I.phraseLength=ae):(I.state=t.NOMATCH,I.phraseLength=0,I.uFrame.pop(et),I.pFrame.pop(we),o.ast&&o.ast.setLength(H))},Ee=function(ee,V,I){let H=a[ee];if(I.state=t.NOMATCH,I.phraseLength=0,V>0){let ie=f[V-1];H.min<=ie&&ie<=H.max&&(I.state=t.MATCH,I.phraseLength=1)}},ve=function(ee,V,I){let H,ie=a[ee];I.state=t.NOMATCH;let ae=ie.string.length,ce=V-ae;if(ce>=0){for(H=0;H<ae;H+=1)if(f[ce+H]!==ie.string[H])return;I.state=t.MATCH,I.phraseLength=ae}},Ae=function(ee,V,I){let H,ie=a[ee];I.state=t.NOMATCH;let ae=ie.string.length;if(ae===0){I.state=t.EMPTY;return}let ce=V-ae;if(ce>=0){for(let me=0;me<ae;me+=1)if(H=f[ce+me],H>=65&&H<=90&&(H+=32),H!==ie.string[me])return;I.state=t.MATCH,I.phraseLength=ae}},tr=function(ee,V,I){let H,ie,ae,ce,me=a[ee];I.state=t.NOMATCH,I.phraseLength=0,me.index<D.length?ce=D[me.index].lower:ce=$[me.index-D.length].lower;let et=me.bkrMode===t.BKR_MODE_PM?I.pFrame.getPhrase(ce):I.uFrame.getPhrase(ce),we=me.bkrCase===t.BKR_MODE_CI;if(et===null)return;let be=et.phraseIndex,rt=et.phraseLength;if(rt===0){I.state=t.EMPTY,I.phraseLength=0;return}let Se=V-rt;if(Se>=0){if(we){for(H=0;H<rt;H+=1)if(ie=f[Se+H],ae=f[be+H],ie>=65&&ie<=90&&(ie+=32),ae>=65&&ae<=90&&(ae+=32),ie!==ae)return;I.state=t.MATCH,I.phraseLength=rt}else for(H=0;H<rt;H+=1)if(ie=f[Se+H],ae=f[be+H],ie!==ae)return;I.state=t.MATCH,I.phraseLength=rt}};s=function(V,I,H){let ie=!0,ae=a[V];if(A+=1,A>B)throw new Error(`parser: maximum number of node hits exceeded: ${B}`);if(C+=1,C>O&&(O=C,O>X))throw new Error(`parser: maximum parse tree depth exceeded: ${X}`);if(H.refresh(),o.trace!==null){let ce=g();o.trace.down(ae,H.state,I,H.phraseLength,ce.anchor,ce.lookAround)}if(c())switch(ae.type){case t.ALT:T(V,I,H);break;case t.CAT:ne(V,I,H);break;case t.REP:pe(V,I,H);break;case t.RNM:Y(V,I,H);break;case t.UDT:P(V,I,H);break;case t.AND:G(V,I,H);break;case t.NOT:J(V,I,H);break;case t.TRG:Ee(V,I,H);break;case t.TBS:ve(V,I,H);break;case t.TLS:Ae(V,I,H);break;case t.BKR:tr(V,I,H);break;case t.BKA:se(V,I,H);break;case t.BKN:q(V,I,H);break;case t.ABG:W(V,I,H);break;case t.AEN:he(V,I,H);break;default:ie=!1;break}else switch(ae.type){case t.ALT:T(V,I,H);break;case t.CAT:re(V,I,H);break;case t.REP:k(V,I,H);break;case t.RNM:Y(V,I,H);break;case t.UDT:P(V,I,H);break;case t.AND:G(V,I,H);break;case t.NOT:J(V,I,H);break;case t.TRG:Q(V,I,H);break;case t.TBS:le(V,I,H);break;case t.TLS:oe(V,I,H);break;case t.BKR:Z(V,I,H);break;case t.BKA:se(V,I,H);break;case t.BKN:q(V,I,H);break;case t.ABG:W(V,I,H);break;case t.AEN:he(V,I,H);break;default:ie=!1;break}if(!m()&&I+H.phraseLength>j&&(j=I+H.phraseLength),o.stats!==null&&o.stats.collect(ae,H),o.trace!==null){let ce=g();o.trace.up(ae,H.state,I,H.phraseLength,ce.anchor,ce.lookAround)}return C-=1,ie}}});var dy=de((vF,hy)=>{hy.exports=function(){let t=on(),r=Bo(),i=pf(),o="stats.js: ",s=[],a=[],f=[],u,d=[],h=[];this.statsObject="statsObject";let y="stats",C=function(B,L){return B.lower<L.lower?-1:B.lower>L.lower?1:0},O=function(B,L){return B.total<L.total?1:B.total>L.total?-1:C(B,L)},A=function(B,L){return B.index<L.index?-1:B.index>L.index?1:0},M=function(){this.empty=0,this.match=0,this.nomatch=0,this.total=0},F=function(){f.length=0,u=new M,f[t.ALT]=new M,f[t.CAT]=new M,f[t.REP]=new M,f[t.RNM]=new M,f[t.TRG]=new M,f[t.TBS]=new M,f[t.TLS]=new M,f[t.UDT]=new M,f[t.AND]=new M,f[t.NOT]=new M,f[t.BKR]=new M,f[t.BKA]=new M,f[t.BKN]=new M,f[t.ABG]=new M,f[t.AEN]=new M,d.length=0;for(let B=0;B<s.length;B+=1)d.push({empty:0,match:0,nomatch:0,total:0,name:s[B].name,lower:s[B].lower,index:s[B].index});if(a.length>0){h.length=0;for(let B=0;B<a.length;B+=1)h.push({empty:0,match:0,nomatch:0,total:0,name:a[B].name,lower:a[B].lower,index:a[B].index})}},D=function(B,L){switch(B.total+=1,L){case t.EMPTY:B.empty+=1;break;case t.MATCH:B.match+=1;break;case t.NOMATCH:B.nomatch+=1;break;default:throw new Error(`${o}collect(): incStat(): unrecognized state: ${L}`)}},$=function(B,L){let U="";return U+="<tr>",U+=`<td class="${i.CLASS_ACTIVE}">${B}</td>`,U+=`<td class="${i.CLASS_EMPTY}">${L.empty}</td>`,U+=`<td class="${i.CLASS_MATCH}">${L.match}</td>`,U+=`<td class="${i.CLASS_NOMATCH}">${L.nomatch}</td>`,U+=`<td class="${i.CLASS_ACTIVE}">${L.total}</td>`,U+=`</tr>
`,U},K=function(){let B="";return B+=$("ALT",f[t.ALT]),B+=$("CAT",f[t.CAT]),B+=$("REP",f[t.REP]),B+=$("RNM",f[t.RNM]),B+=$("TRG",f[t.TRG]),B+=$("TBS",f[t.TBS]),B+=$("TLS",f[t.TLS]),B+=$("UDT",f[t.UDT]),B+=$("AND",f[t.AND]),B+=$("NOT",f[t.NOT]),B+=$("BKR",f[t.BKR]),B+=$("BKA",f[t.BKA]),B+=$("BKN",f[t.BKN]),B+=$("ABG",f[t.ABG]),B+=$("AEN",f[t.AEN]),B+=$("totals",u),B},j=function(){let B="";B+=`<tr><th></th><th></th><th></th><th></th><th></th></tr>
`,B+=`<tr><th>rules</th><th></th><th></th><th></th><th></th></tr>
`;for(let L=0;L<s.length;L+=1)d[L].total>0&&(B+="<tr>",B+=`<td class="${i.CLASS_ACTIVE}">${d[L].name}</td>`,B+=`<td class="${i.CLASS_EMPTY}">${d[L].empty}</td>`,B+=`<td class="${i.CLASS_MATCH}">${d[L].match}</td>`,B+=`<td class="${i.CLASS_NOMATCH}">${d[L].nomatch}</td>`,B+=`<td class="${i.CLASS_ACTIVE}">${d[L].total}</td>`,B+=`</tr>
`);if(a.length>0){B+=`<tr><th></th><th></th><th></th><th></th><th></th></tr>
`,B+=`<tr><th>udts</th><th></th><th></th><th></th><th></th></tr>
`;for(let L=0;L<a.length;L+=1)h[L].total>0&&(B+="<tr>",B+=`<td class="${i.CLASS_ACTIVE}">${h[L].name}</td>`,B+=`<td class="${i.CLASS_EMPTY}">${h[L].empty}</td>`,B+=`<td class="${i.CLASS_MATCH}">${h[L].match}</td>`,B+=`<td class="${i.CLASS_NOMATCH}">${h[L].nomatch}</td>`,B+=`<td class="${i.CLASS_ACTIVE}">${h[L].total}</td>`,B+=`</tr>
`)}return B};this.validate=function(B){let L=!1;return typeof B=="string"&&y===B&&(L=!0),L},this.init=function(B,L){s=B,a=L,F()},this.collect=function(B,L){D(u,L.state,L.phraseLength),D(f[B.type],L.state,L.phraseLength),B.type===t.RNM&&D(d[B.index],L.state,L.phraseLength),B.type===t.UDT&&D(h[B.index],L.state,L.phraseLength)},this.toHtml=function(B,L){let U="";U+=`<table class="${i.CLASS_STATS}">
`,typeof L=="string"&&(U+=`<caption>${L}</caption>
`),U+=`<tr><th class="${i.CLASS_ACTIVE}">ops</th>
`,U+=`<th class="${i.CLASS_EMPTY}">EMPTY</th>
`,U+=`<th class="${i.CLASS_MATCH}">MATCH</th>
`,U+=`<th class="${i.CLASS_NOMATCH}">NOMATCH</th>
`,U+=`<th class="${i.CLASS_ACTIVE}">totals</th></tr>
`;let te=!0;for(;te;){if(B===void 0){U+=K();break}if(B===null){U+=K();break}if(B==="ops"){U+=K();break}if(B==="index"){d.sort(A),h.length>0&&h.sort(A),U+=K(),U+=j();break}if(B==="hits"){d.sort(O),h.length>0&&h.sort(A),U+=K(),U+=j();break}if(B==="alpha"){d.sort(C),h.length>0&&h.sort(C),U+=K(),U+=j();break}break}return U+=`</table>
`,U},this.toHtmlPage=function(B,L,U){return r.htmlToPage(this.toHtml(B,L),U)}}});var my=de((xF,py)=>{py.exports=function(){let t=Bo(),r=pf(),i=new(_0()),o=on(),s="trace.js: ",a=this,f=16,u=10,d=8,h=32,y=80,C=5,O=[],A=5e3,M=-1,F=0,D=0,$=[],K=null,j=null,X=null,B=[],L=[],U=`<span class="${r.CLASS_LINEEND}">&bull;</span>`,te=`<span class="${r.CLASS_LINEEND}">&hellip;</span>`,_=`<span class="${r.CLASS_EMPTY}">&#120634;</span>`,l=function(){let N=function(G){B[o.ALT]=G,B[o.CAT]=G,B[o.REP]=G,B[o.TLS]=G,B[o.TBS]=G,B[o.TRG]=G,B[o.AND]=G,B[o.NOT]=G,B[o.BKR]=G,B[o.BKA]=G,B[o.BKN]=G,B[o.ABG]=G,B[o.AEN]=G},P=0;for(let G in a.filter.operators)P+=1;if(P===0){N(!1);return}for(let G in a.filter.operators){let J=G.toUpperCase();if(J==="<ALL>"){N(!0);return}if(J==="<NONE>"){N(!1);return}}N(!1);for(let G in a.filter.operators){let J=G.toUpperCase();if(J==="ALT")B[o.ALT]=a.filter.operators[G]===!0;else if(J==="CAT")B[o.CAT]=a.filter.operators[G]===!0;else if(J==="REP")B[o.REP]=a.filter.operators[G]===!0;else if(J==="AND")B[o.AND]=a.filter.operators[G]===!0;else if(J==="NOT")B[o.NOT]=a.filter.operators[G]===!0;else if(J==="TLS")B[o.TLS]=a.filter.operators[G]===!0;else if(J==="TBS")B[o.TBS]=a.filter.operators[G]===!0;else if(J==="TRG")B[o.TRG]=a.filter.operators[G]===!0;else if(J==="BKR")B[o.BKR]=a.filter.operators[G]===!0;else if(J==="BKA")B[o.BKA]=a.filter.operators[G]===!0;else if(J==="BKN")B[o.BKN]=a.filter.operators[G]===!0;else if(J==="ABG")B[o.ABG]=a.filter.operators[G]===!0;else if(J==="AEN")B[o.AEN]=a.filter.operators[G]===!0;else throw new Error(`${s}initOpratorFilter: '${G}' not a valid operator name. Must be <all>, <none>, alt, cat, rep, tls, tbs, trg, and, not, bkr, bka or bkn`)}},g=function(){let N=function(Q){B[o.RNM]=Q,B[o.UDT]=Q;let le=j.length+X.length;L.length=0;for(let oe=0;oe<le;oe+=1)L.push(Q)},P,G,J=[];for(G=0;G<j.length;G+=1)J.push(j[G].lower);for(G=0;G<X.length;G+=1)J.push(X[G].lower);L.length=0,P=0;for(let Q in a.filter.rules)P+=1;if(P===0){N(!0);return}for(let Q in a.filter.rules){let le=Q.toLowerCase();if(le==="<all>"){N(!0);return}if(le==="<none>"){N(!1);return}}N(!1),B[o.RNM]=!0,B[o.UDT]=!0;for(let Q in a.filter.rules){let le=Q.toLowerCase();if(G=J.indexOf(le),G<0)throw new Error(`${s}initRuleFilter: '${Q}' not a valid rule or udt name`);L[G]=a.filter.rules[Q]===!0}};this.traceObject="traceObject",this.filter={operators:[],rules:[]},this.setMaxRecords=function(N,P){if(M=-1,typeof N=="number"&&N>0)A=Math.ceil(N);else{A=0;return}typeof P=="number"&&(M=Math.floor(P),M<0&&(M=-1))},this.getMaxRecords=function(){return A},this.getLastRecord=function(){return M},this.init=function(N,P,G){O.length=0,$.length=0,F=0,D=0,K=G,j=N,X=P,l(),g(),i.init(A)};let m=function(N){let P=!1;return N.type===o.RNM?B[N.type]&&L[N.index]?P=!0:P=!1:N.type===o.UDT?B[N.type]&&L[j.length+N.index]?P=!0:P=!1:P=B[N.type],P},c=function(N){return M===-1||N<=M};this.down=function(N,P,G,J,Q,le){c(F)&&m(N)&&($.push(F),O[i.increment()]={dirUp:!1,depth:D,thisLine:F,thatLine:void 0,opcode:N,state:P,phraseIndex:G,phraseLength:J,lookAnchor:Q,lookAround:le},F+=1,D+=1)},this.up=function(N,P,G,J,Q,le){if(c(F)&&m(N)){let oe=F,W=$.pop(),he=i.getListIndex(W);he!==-1&&(O[he].thatLine=oe),D-=1,O[i.increment()]={dirUp:!0,depth:D,thisLine:oe,thatLine:W,opcode:N,state:P,phraseIndex:G,phraseLength:J,lookAnchor:Q,lookAround:le},F+=1}};let p=function(){function N(I,H){let ie,ae,ce;if(H)switch(I.op={id:H.type,name:t.opcodeToString(H.type)},I.opData=void 0,H.type){case o.RNM:I.opData=j[H.index].name;break;case o.UDT:I.opData=X[H.index].name;break;case o.BKR:H.index<j.length?ie=j[H.index].name:ie=X[H.index-j.length].name,ae=H.bkrCase===o.BKR_MODE_CI?"%i":"%s",ce=H.bkrMode===o.BKR_MODE_UM?"%u":"%p",I.opData=`\\\\${ae}${ce}${ie}`;break;case o.TLS:I.opData=[];for(let me=0;me<H.string.length;me+=1)I.opData.push(H.string[me]);break;case o.TBS:I.opData=[];for(let me=0;me<H.string.length;me+=1)I.opData.push(H.string[me]);break;case o.TRG:I.opData=[H.min,H.max];break;case o.REP:I.opData=[H.min,H.max];break;default:throw new Error("unrecognized opcode")}else I.op={id:void 0,name:void 0},I.opData=void 0}function P(I,H,ie){return I===o.MATCH?{index:H,length:ie}:I===o.NOMATCH?{index:H,length:0}:I===o.EMPTY?{index:H,length:0}:null}let G=-1;function J(I,H,ie){let ae={id:G++,branch:-1,parent:I,up:!1,down:!1,depth:ie,children:[]};return H?(ae.down=!0,ae.state={id:H.state,name:t.stateToString(H.state)},ae.phrase=null,N(ae,H.opcode)):(ae.state={id:void 0,name:void 0},ae.phrase=P(),N(ae,void 0)),ae}function Q(I,H){H&&(I.up=!0,I.state={id:H.state,name:t.stateToString(H.state)},I.phrase=P(H.state,H.phraseIndex,H.phraseLength),I.down||N(I,H.opcode))}let le=0,oe=-1,W=1;function he(I){if(oe+=1,I.branch=W,oe>D&&(D=oe),I.children.length===0)le+=1;else for(let H=0;H<I.children.length;H+=1)H>0&&(W+=1),I.children[H].leftMost=!1,I.children[H].rightMost=!1,I.leftMost&&(I.children[H].leftMost=H===0),I.rightMost&&(I.children[H].rightMost=H===I.children.length-1),he(I.children[H]);oe-=1}function Z(I,H){let ie,ae={};if(ae.id=I.id,ae.branch=I.branch,ae.leftMost=I.leftMost,ae.rightMost=I.rightMost,ie=I.state.name?I.state.name:"ACTIVE",ae.state={id:I.state.id,name:ie},ie=I.op.name?I.op.name:"?",ae.op={id:I.op.id,name:ie},typeof I.opData=="string")ae.opData=I.opData;else if(Array.isArray(I.opData)){ae.opData=[];for(let ce=0;ce<I.opData.length;ce+=1)ae.opData[ce]=I.opData[ce]}else ae.opData=void 0;I.phrase?ae.phrase={index:I.phrase.index,length:I.phrase.length}:ae.phrase=null,ae.depth=I.depth,ae.children=[];for(let ce=0;ce<I.children.length;ce+=1){let me=ce!==I.children.length-1;ae.children[ce]=Z(I.children[ce],H,me)}return ae}let se=[],q,ne,pe,Ee,ve=!0,Ae=J(null,null,-1);for(se.push(Ae),ne=Ae,i.forEach(I=>{if(Ee=O[I],ve&&(ve=!1,Ee.depth>0)){let H=Ee.dirUp?Ee.depth+1:Ee.depth;for(let ie=0;ie<H;ie+=1)pe=ne,ne=J(ne,null,ie),se.push(ne),pe.children.push(ne)}Ee.dirUp?(ne=se.pop(),Q(ne,Ee),ne=se[se.length-1]):(pe=ne,ne=J(ne,Ee,Ee.depth),se.push(ne),pe.children.push(ne))});se.length>1;)ne=se.pop(),Q(ne,null);if(Ae.children.length===0)throw new Error("trace.toTree(): parse tree has no nodes");if(se.length===0)throw new Error("trace.toTree(): integrity check: dummy root node disappeared?");q=Ae.children[0];let tr=q;for(;q&&!q.down&&!q.up;)tr=q,q=q.children[0];q=tr,q.leftMost=!0,q.rightMost=!0,he(q),q.branch=0;let ee={};ee.string=[];for(let I=0;I<K.length;I+=1)ee.string[I]=K[I];ee.rules=[];for(let I=0;I<j.length;I+=1)ee.rules[I]=j[I].name;ee.udts=[];for(let I=0;I<X.length;I+=1)ee.udts[I]=X[I].name;ee.id={},ee.id.ALT={id:o.ALT,name:"ALT"},ee.id.CAT={id:o.CAT,name:"CAT"},ee.id.REP={id:o.REP,name:"REP"},ee.id.RNM={id:o.RNM,name:"RNM"},ee.id.TLS={id:o.TLS,name:"TLS"},ee.id.TBS={id:o.TBS,name:"TBS"},ee.id.TRG={id:o.TRG,name:"TRG"},ee.id.UDT={id:o.UDT,name:"UDT"},ee.id.AND={id:o.AND,name:"AND"},ee.id.NOT={id:o.NOT,name:"NOT"},ee.id.BKR={id:o.BKR,name:"BKR"},ee.id.BKA={id:o.BKA,name:"BKA"},ee.id.BKN={id:o.BKN,name:"BKN"},ee.id.ABG={id:o.ABG,name:"ABG"},ee.id.AEN={id:o.AEN,name:"AEN"},ee.id.ACTIVE={id:o.ACTIVE,name:"ACTIVE"},ee.id.MATCH={id:o.MATCH,name:"MATCH"},ee.id.EMPTY={id:o.EMPTY,name:"EMPTY"},ee.id.NOMATCH={id:o.NOMATCH,name:"NOMATCH"},ee.treeDepth=D,ee.leafNodes=le;let V;return q.down?q.up?V="none":V="right":q.up?V="left":V="both",ee.branchesIncomplete=V,ee.tree=Z(q,q.depth,!1),ee};this.toTree=function(N){let P=p();return N?JSON.stringify(P):P},this.toHtmlPage=function(N,P,G){return t.htmlToPage(this.toHtml(N,P),G)};let x=function(N,P){let G;switch(N){case f:G="hexadecimal";break;case u:G="decimal";break;case d:G="ASCII";break;case h:G="UNICODE";break;default:throw new Error(`${s}htmlHeader: unrecognized mode: ${N}`)}let J="";return J+=`<p>display mode: ${G}</p>
`,J+=`<table class="${r.CLASS_TRACE}">
`,typeof P=="string"&&(J+=`<caption>${P}</caption>`),J},E=function(){let N="";return N+=`</table>
`,N+=`<p class="${r.CLASS_MONOSPACE}">legend:<br>
`,N+=`(a)&nbsp;-&nbsp;line number<br>
`,N+=`(b)&nbsp;-&nbsp;matching line number<br>
`,N+=`(c)&nbsp;-&nbsp;phrase offset<br>
`,N+=`(d)&nbsp;-&nbsp;phrase length<br>
`,N+=`(e)&nbsp;-&nbsp;tree depth<br>
`,N+=`(f)&nbsp;-&nbsp;operator state<br>
`,N+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${r.CLASS_ACTIVE}">&darr;</span>&nbsp;&nbsp;phrase opened<br>
`,N+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${r.CLASS_MATCH}">&uarr;M</span> phrase matched<br>
`,N+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${r.CLASS_EMPTY}">&uarr;E</span> empty phrase matched<br>
`,N+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${r.CLASS_NOMATCH}">&uarr;N</span> phrase not matched<br>
`,N+=`operator&nbsp;-&nbsp;ALT, CAT, REP, RNM, TRG, TLS, TBS<sup>&dagger;</sup>, UDT, AND, NOT, BKA, BKN, BKR, ABG, AEN<sup>&Dagger;</sup><br>
`,N+=`phrase&nbsp;&nbsp;&nbsp;-&nbsp;up to ${y} characters of the phrase being matched<br>
`,N+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${r.CLASS_MATCH}">matched characters</span><br>
`,N+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${r.CLASS_LOOKAHEAD}">matched characters in look ahead mode</span><br>
`,N+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${r.CLASS_LOOKBEHIND}">matched characters in look behind mode</span><br>
`,N+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${r.CLASS_REMAINDER}">remainder characters(not yet examined by parser)</span><br>
`,N+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${r.CLASS_CTRLCHAR}">control characters, TAB, LF, CR, etc. (ASCII mode only)</span><br>
`,N+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${_} empty string<br>
`,N+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${U} end of input string<br>
`,N+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${te} input string display truncated<br>
`,N+=`</p>
`,N+=`<p class="${r.CLASS_MONOSPACE}">
`,N+=`<sup>&dagger;</sup>original ABNF operators:<br>
`,N+=`ALT - alternation<br>
`,N+=`CAT - concatenation<br>
`,N+=`REP - repetition<br>
`,N+=`RNM - rule name<br>
`,N+=`TRG - terminal range<br>
`,N+=`TLS - terminal literal string (case insensitive)<br>
`,N+=`TBS - terminal binary string (case sensitive)<br>
`,N+=`<br>
`,N+=`<sup>&Dagger;</sup>super set SABNF operators:<br>
`,N+=`UDT - user-defined terminal<br>
`,N+=`AND - positive look ahead<br>
`,N+=`NOT - negative look ahead<br>
`,N+=`BKA - positive look behind<br>
`,N+=`BKN - negative look behind<br>
`,N+=`BKR - back reference<br>
`,N+=`ABG - anchor - begin of input string<br>
`,N+=`AEN - anchor - end of input string<br>
`,N+=`</p>
`,N};this.indent=function(N){let P="";for(let G=0;G<N;G+=1)P+=".";return P};let w=function(N,P){let G="";if(P.type===o.TRG)if(N===f||N===h){let J=P.min.toString(16).toUpperCase();J.length%2!==0&&(J=`0${J}`),G+=N===f?"%x":"U+",G+=J,J=P.max.toString(16).toUpperCase(),J.length%2!==0&&(J=`0${J}`),G+=`&ndash;${J}`}else G=`%d${P.min.toString(10)}&ndash;${P.max.toString(10)}`;return G},b=function(N,P){let G="";if(P.type===o.REP)if(N===f){let J=P.min.toString(16).toUpperCase();J.length%2!==0&&(J=`0${J}`),G=`x${J}`,P.max<1/0?(J=P.max.toString(16).toUpperCase(),J.length%2!==0&&(J=`0${J}`)):J="inf",G+=`&ndash;${J}`}else P.max<1/0?G=`${P.min.toString(10)}&ndash;${P.max.toString(10)}`:G=`${P.min.toString(10)}&ndash;inf`;return G},S=function(N,P){let G="";if(P.type===o.TBS){let J=Math.min(P.string.length,C*2);if(N===f||N===h){G+=N===f?"%x":"U+";for(let Q=0;Q<J;Q+=1){let le;Q>0&&(G+="."),le=P.string[Q].toString(16).toUpperCase(),le.length%2!==0&&(le=`0${le}`),G+=le}}else{G="%d";for(let Q=0;Q<J;Q+=1)Q>0&&(G+="."),G+=P.string[Q].toString(10)}J<P.string.length&&(G+=te)}return G},R=function(N,P){let G="";if(P.type===o.TLS){let J=Math.min(P.string.length,C);if(N===f||N===u){let Q,le,oe;N===f?(G="%x",oe=16):(G="%d",oe=10);for(let W=0;W<J;W+=1)W>0&&(G+="."),le=P.string[W],le>=97&&le<=122?(Q=le-32,G+=`${Q.toString(oe)}/${le.toString(oe)}`.toUpperCase()):le>=65&&le<=90?(Q=le,le+=32,G+=`${Q.toString(oe)}/${le.toString(oe)}`.toUpperCase()):G+=le.toString(oe).toUpperCase();J<P.string.length&&(G+=te)}else{G='"';for(let Q=0;Q<J;Q+=1)G+=t.asciiChars[P.string[Q]];J<P.string.length&&(G+=te),G+='"'}}return G},v=function(N,P,G,J,Q){if(J===0)return"";let le="",oe=Q?",":"";switch(N){case f:le=oe+t.charsToHex(P,G,J);break;case u:if(Q)return`,${t.charsToDec(P,G,J)}`;le=oe+t.charsToDec(P,G,J);break;case h:le=t.charsToUnicode(P,G,J);break;case d:default:le=t.charsToAsciiHtml(P,G,J);break}return le},T=function(N,P,G,J,Q,le){let oe="",W,he,Z,se,q=U,ne=`<span class="${r.CLASS_LOOKBEHIND}">`,pe=`<span class="${r.CLASS_REMAINDER}">`,Ee="</span>",ve=!1;switch(G){case o.EMPTY:oe+=_;case o.NOMATCH:case o.MATCH:case o.ACTIVE:W=J-Q,he=le-W,Z=le,se=P.length-Z;break;default:throw new Error("unrecognized state")}return q=U,he>y?(he=y,q=te,se=0):he+se>y&&(q=te,se=y-he),he>0&&(oe+=ne,oe+=v(N,P,W,he,ve),oe+=Ee,ve=!0),se>0&&(oe+=pe,oe+=v(N,P,Z,se,ve),oe+=Ee),oe+q},re=function(N,P,G,J,Q,le){let oe="",W,he,Z,se,q=U,ne=`<span class="${r.CLASS_REMAINDER}">`,pe="</span>",Ee=!1;switch(G){case o.EMPTY:oe+=_;case o.NOMATCH:case o.ACTIVE:W=J,he=0,Z=J,se=P.length-Z;break;case o.MATCH:W=J,he=Q,Z=J+he,se=P.length-Z;break;default:throw new Error("unrecognized state")}return q=U,he>y?(he=y,q=te,se=0):he+se>y&&(q=te,se=y-he),he>0&&(oe+=le,oe+=v(N,P,W,he,Ee),oe+=pe,Ee=!0),se>0&&(oe+=ne,oe+=v(N,P,Z,se,Ee),oe+=pe),oe+q},k=function(N,P,G,J,Q){let le=`<span class="${r.CLASS_LOOKAHEAD}">`;return re(N,P,G,J,Q,le)},z=function(N,P,G,J,Q){let le=`<span class="${r.CLASS_MATCH}">`;return re(N,P,G,J,Q,le)},Y=function(N){if(j===null)return"";let P="",G,J,Q,le,oe,W;return P+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th>",P+=`<th>operator</th><th>phrase</th></tr>
`,i.forEach(he=>{let Z=O[he];switch(G=Z.thisLine,J=Z.thatLine!==void 0?Z.thatLine:"--",Q=!1,le=!1,oe=!1,Z.lookAround===o.LOOKAROUND_AHEAD&&(Q=!0,oe=!0,W=Z.lookAnchor),(Z.opcode.type===o.AND||Z.opcode.type===o.NOT)&&(Q=!0,oe=!0,W=Z.phraseIndex),Z.lookAround===o.LOOKAROUND_BEHIND&&(le=!0,oe=!0,W=Z.lookAnchor),(Z.opcode.type===o.BKA||Z.opcode.type===o.BKN)&&(le=!0,oe=!0,W=Z.phraseIndex),P+="<tr>",P+=`<td>${G}</td><td>${J}</td>`,P+=`<td>${Z.phraseIndex}</td>`,P+=`<td>${Z.phraseLength}</td>`,P+=`<td>${Z.depth}</td>`,P+="<td>",Z.state){case o.ACTIVE:P+=`<span class="${r.CLASS_ACTIVE}">&darr;&nbsp;</span>`;break;case o.MATCH:P+=`<span class="${r.CLASS_MATCH}">&uarr;M</span>`;break;case o.NOMATCH:P+=`<span class="${r.CLASS_NOMATCH}">&uarr;N</span>`;break;case o.EMPTY:P+=`<span class="${r.CLASS_EMPTY}">&uarr;E</span>`;break;default:P+=`<span class="${r.CLASS_ACTIVE}">--</span>`;break}if(P+="</td>",P+="<td>",P+=a.indent(Z.depth),Q?P+=`<span class="${r.CLASS_LOOKAHEAD}">`:le&&(P+=`<span class="${r.CLASS_LOOKBEHIND}">`),P+=t.opcodeToString(Z.opcode.type),Z.opcode.type===o.RNM&&(P+=`(${j[Z.opcode.index].name}) `),Z.opcode.type===o.BKR){let se=Z.opcode.bkrCase===o.BKR_MODE_CI?"%i":"%s",q=Z.opcode.bkrMode===o.BKR_MODE_UM?"%u":"%p";P+=`(\\${se}${q}${j[Z.opcode.index].name}) `}Z.opcode.type===o.UDT&&(P+=`(${X[Z.opcode.index].name}) `),Z.opcode.type===o.TRG&&(P+=`(${w(N,Z.opcode)}) `),Z.opcode.type===o.TBS&&(P+=`(${S(N,Z.opcode)}) `),Z.opcode.type===o.TLS&&(P+=`(${R(N,Z.opcode)}) `),Z.opcode.type===o.REP&&(P+=`(${b(N,Z.opcode)}) `),oe&&(P+="</span>"),P+="</td>",P+="<td>",le?P+=T(N,K,Z.state,Z.phraseIndex,Z.phraseLength,W):Q?P+=k(N,K,Z.state,Z.phraseIndex,Z.phraseLength):P+=z(N,K,Z.state,Z.phraseIndex,Z.phraseLength),P+=`</td></tr>
`}),P+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th>",P+=`<th>operator</th><th>phrase</th></tr>
`,P+=`</table>
`,P};this.toHtml=function(N,P){let G=d;if(typeof N=="string"&&N.length>=3){let Q=N.toLowerCase().slice(0,3);Q==="hex"?G=f:Q==="dec"?G=u:Q==="uni"&&(G=h)}let J="";return J+=x(G,P),J+=Y(G),J+=E(),J}}});var Uo=de((wF,by)=>{by.exports={ast:fy(),circular:_0(),ids:on(),parser:ly(),stats:dy(),trace:my(),utils:Bo(),emitcss:w0(),style:pf()}});var yy=de((EF,gy)=>{gy.exports=function(){this.grammarObject="grammarObject",this.rules=[],this.rules[0]={name:"file",lower:"file",index:0,isBkr:!1},this.rules[1]={name:"line",lower:"line",index:1,isBkr:!1},this.rules[2]={name:"line-text",lower:"line-text",index:2,isBkr:!1},this.rules[3]={name:"last-line",lower:"last-line",index:3,isBkr:!1},this.rules[4]={name:"valid",lower:"valid",index:4,isBkr:!1},this.rules[5]={name:"invalid",lower:"invalid",index:5,isBkr:!1},this.rules[6]={name:"end",lower:"end",index:6,isBkr:!1},this.rules[7]={name:"CRLF",lower:"crlf",index:7,isBkr:!1},this.rules[8]={name:"LF",lower:"lf",index:8,isBkr:!1},this.rules[9]={name:"CR",lower:"cr",index:9,isBkr:!1},this.udts=[],this.rules[0].opcodes=[],this.rules[0].opcodes[0]={type:2,children:[1,3]},this.rules[0].opcodes[1]={type:3,min:0,max:1/0},this.rules[0].opcodes[2]={type:4,index:1},this.rules[0].opcodes[3]={type:3,min:0,max:1},this.rules[0].opcodes[4]={type:4,index:3},this.rules[1].opcodes=[],this.rules[1].opcodes[0]={type:2,children:[1,2]},this.rules[1].opcodes[1]={type:4,index:2},this.rules[1].opcodes[2]={type:4,index:6},this.rules[2].opcodes=[],this.rules[2].opcodes[0]={type:3,min:0,max:1/0},this.rules[2].opcodes[1]={type:1,children:[2,3]},this.rules[2].opcodes[2]={type:4,index:4},this.rules[2].opcodes[3]={type:4,index:5},this.rules[3].opcodes=[],this.rules[3].opcodes[0]={type:3,min:1,max:1/0},this.rules[3].opcodes[1]={type:1,children:[2,3]},this.rules[3].opcodes[2]={type:4,index:4},this.rules[3].opcodes[3]={type:4,index:5},this.rules[4].opcodes=[],this.rules[4].opcodes[0]={type:1,children:[1,2]},this.rules[4].opcodes[1]={type:5,min:32,max:126},this.rules[4].opcodes[2]={type:6,string:[9]},this.rules[5].opcodes=[],this.rules[5].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[5].opcodes[1]={type:5,min:0,max:8},this.rules[5].opcodes[2]={type:5,min:11,max:12},this.rules[5].opcodes[3]={type:5,min:14,max:31},this.rules[5].opcodes[4]={type:5,min:127,max:4294967295},this.rules[6].opcodes=[],this.rules[6].opcodes[0]={type:1,children:[1,2,3]},this.rules[6].opcodes[1]={type:4,index:7},this.rules[6].opcodes[2]={type:4,index:8},this.rules[6].opcodes[3]={type:4,index:9},this.rules[7].opcodes=[],this.rules[7].opcodes[0]={type:6,string:[13,10]},this.rules[8].opcodes=[],this.rules[8].opcodes[0]={type:6,string:[10]},this.rules[9].opcodes=[],this.rules[9].opcodes[0]={type:6,string:[13]},this.toString=function(){let r="";return r+=`file = *line [last-line]
`,r+=`line = line-text end
`,r+=`line-text = *(valid/invalid)
`,r+=`last-line = 1*(valid/invalid)
`,r+=`valid = %d32-126 / %d9
`,r+=`invalid = %d0-8 / %d11-12 /%d14-31 / %x7f-ffffffff
`,r+=`end = CRLF / LF / CR
`,r+=`CRLF = %d13.10
`,r+=`LF = %d10
`,r+=`CR = %d13
`,r}}});var xy=de(vy=>{var Gt=on(),wS=Bo();function ES(n,t,r,i,o){return n===Gt.SEM_PRE?(o.endLength=0,o.textLength=0,o.invalidCount=0):o.lines.push({lineNo:o.lines.length,beginChar:r,length:i,textLength:o.textLength,endType:o.endType,invalidChars:o.invalidCount}),Gt.SEM_OK}function _S(n,t,r,i,o){return n===Gt.SEM_PRE&&(o.textLength=i),Gt.SEM_OK}function SS(n,t,r,i,o){return n===Gt.SEM_PRE?(o.endLength=0,o.textLength=0,o.invalidCount=0):o.strict?(o.lines.push({lineNo:o.lines.length,beginChar:r,length:i,textLength:i,endType:"none",invalidChars:o.invalidCount}),o.errors.push({line:o.lineNo,char:r+i,msg:"no line end on last line - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})):(t.push(10),o.lines.push({lineNo:o.lines.length,beginChar:r,length:i+1,textLength:i,endType:"LF",invalidChars:o.invalidCount})),Gt.SEM_OK}function AS(n,t,r,i,o){return n===Gt.SEM_PRE&&o.errors.push({line:o.lineNo,char:r,msg:`invalid character found '\\x${wS.charToHex(t[r])}'`}),Gt.SEM_OK}function TS(n,t,r,i,o){return n===Gt.SEM_POST&&(o.lineNo+=1),Gt.SEM_OK}function MS(n,t,r,i,o){return n===Gt.SEM_PRE&&(o.endType="LF",o.strict&&o.errors.push({line:o.lineNo,char:r,msg:"line end character LF(\\n, \\x0A) - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})),Gt.SEM_OK}function kS(n,t,r,i,o){return n===Gt.SEM_PRE&&(o.endType="CR",o.strict&&o.errors.push({line:o.lineNo,char:r,msg:"line end character CR(\\r, \\x0D) - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})),Gt.SEM_OK}function CS(n,t,r,i,o){return n===Gt.SEM_PRE&&(o.endType="CRLF"),Gt.SEM_OK}var ii=[];ii.line=ES;ii["line-text"]=_S;ii["last-line"]=SS;ii.invalid=AS;ii.end=TS;ii.lf=MS;ii.cr=kS;ii.crlf=CS;vy.callbacks=ii});var Ey=de((SF,wy)=>{wy.exports=function(t,r,i,o){let s="scanner.js: ",a=Uo(),f=new(yy()),{callbacks:u}=xy(),d=[],h=new a.parser;if(h.ast=new a.ast,h.ast.callbacks=u,o){if(o.traceObject!=="traceObject")throw new TypeError(`${s}trace argument is not a trace object`);h.trace=o}if(h.parse(f,"file",t).success!==!0){r.push({line:0,char:0,msg:"syntax analysis error analyzing input SABNF grammar"});return}let C={lines:d,lineNo:0,errors:r,strict:!!i};return h.ast.translate(C),d}});var Sy=de((AF,_y)=>{_y.exports=function(){let t="syntax-callbacks.js: ",r=Uo(),i=r.ids,o,s=function(R,v,T,re){switch(R.state){case i.ACTIVE:re.altStack=[],re.repCount=0;break;case i.EMPTY:re.errors.push({line:0,char:0,msg:"grammar file is empty"});break;case i.MATCH:re.ruleCount===0&&re.errors.push({line:0,char:0,msg:"no rules defined"});break;case i.NOMATCH:throw new Error(`${t}synFile: grammar file NOMATCH: design error: should never happen.`);default:throw new Error(`${t}synFile: unrecognized case.`)}},a=function(S,R,v,T){switch(S.state){case i.ACTIVE:T.altStack.length=0,o={groupOpen:null,groupError:!1,optionOpen:null,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},T.altStack.push(o);break;case i.EMPTY:throw new Error(`${t}synRule: EMPTY: rule cannot be empty`);case i.NOMATCH:break;case i.MATCH:T.ruleCount+=1;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},f=function(S,R,v,T){switch(S.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:T.errors.push({line:T.findLine(T.lines,v,T.charsLength),char:v,msg:"Unrecognized SABNF line. Invalid rule, comment or blank line."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},u=function(S,R,v,T){switch(S.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:T.errors.push({line:T.findLine(T.lines,v,T.charsLength),char:v,msg:"Rule names must be alphanum and begin with alphabetic character."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},d=function(S,R,v,T){switch(S.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:T.errors.push({line:T.findLine(T.lines,v,T.charsLength),char:v,msg:"Expected '=' or '=/'. Not found."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},h=function(S,R,v,T){switch(S.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:T.strict&&T.errors.push({line:T.findLine(T.lines,v,T.charsLength),char:v,msg:"AND operator(&) found - strict ABNF specified."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},y=function(S,R,v,T){switch(S.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:T.strict&&T.errors.push({line:T.findLine(T.lines,v,T.charsLength),char:v,msg:"NOT operator(!) found - strict ABNF specified."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},C=function(S,R,v,T){switch(S.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:T.strict&&T.errors.push({line:T.findLine(T.lines,v,T.charsLength),char:v,msg:"Positive look-behind operator(&&) found - strict ABNF specified."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},O=function(S,R,v,T){switch(S.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:T.strict&&T.errors.push({line:T.findLine(T.lines,v,T.charsLength),char:v,msg:"Negative look-behind operator(!!) found - strict ABNF specified."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},A=function(S,R,v,T){switch(S.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:T.strict&&T.errors.push({line:T.findLine(T.lines,v,T.charsLength),char:v,msg:"Beginning of string anchor(%^) found - strict ABNF specified."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},M=function(S,R,v,T){switch(S.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:T.strict&&T.errors.push({line:T.findLine(T.lines,v,T.charsLength),char:v,msg:"End of string anchor(%$) found - strict ABNF specified."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},F=function(S,R,v,T){switch(S.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:if(T.strict){let re=r.utils.charsToString(R,v,S.phraseLength);T.errors.push({line:T.findLine(T.lines,v,T.charsLength),char:v,msg:`Back reference operator(${re}) found - strict ABNF specified.`})}break;default:throw new Error(`${t}synFile: unrecognized case.`)}},D=function(S,R,v,T){switch(S.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:if(T.strict){let re=r.utils.charsToString(R,v,S.phraseLength);T.errors.push({line:T.findLine(T.lines,v,T.charsLength),char:v,msg:`UDT operator found(${re}) - strict ABNF specified.`})}break;default:throw new Error(`${t}synFile: unrecognized case.`)}},$=function(S,R,v){switch(S.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:o.tlsOpen=v;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},K=function(S,R,v,T){switch(S.state){case i.ACTIVE:T.stringTabChar=!1;break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:T.stringTabChar!==!1&&T.errors.push({line:T.findLine(T.lines,T.stringTabChar),char:T.stringTabChar,msg:"Tab character (\\t, x09) not allowed in literal string (see 'quoted-string' definition, RFC 7405.)"});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},j=function(S,R,v,T){switch(S.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:T.stringTabChar=v;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},X=function(S,R,v,T){switch(S.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:T.errors.push({line:T.findLine(T.lines,o.tlsOpen),char:o.tlsOpen,msg:'Case-insensitive literal string("...") opened but not closed.'}),o.basicError=!0,o.tlsOpen=null;break;case i.MATCH:o.tlsOpen=null;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},B=function(S,R,v){switch(S.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:o.clsOpen=v;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},L=function(S,R,v,T){switch(S.state){case i.ACTIVE:T.stringTabChar=!1;break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:T.stringTabChar!==!1&&T.errors.push({line:T.findLine(T.lines,T.stringTabChar),char:T.stringTabChar,msg:"Tab character (\\t, x09) not allowed in literal string."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},U=function(S,R,v,T){switch(S.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:T.errors.push({line:T.findLine(T.lines,o.clsOpen),char:o.clsOpen,msg:"Case-sensitive literal string('...') opened but not closed."}),o.clsOpen=null,o.basicError=!0;break;case i.MATCH:T.strict&&T.errors.push({line:T.findLine(T.lines,o.clsOpen),char:o.clsOpen,msg:"Case-sensitive string operator('...') found - strict ABNF specified."}),o.clsOpen=null;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},te=function(S,R,v){switch(S.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:o.prosValOpen=v;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},_=function(S,R,v,T){switch(S.state){case i.ACTIVE:T.stringTabChar=!1;break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:T.stringTabChar!==!1&&T.errors.push({line:T.findLine(T.lines,T.stringTabChar),char:T.stringTabChar,msg:"Tab character (\\t, x09) not allowed in prose value string."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},l=function(S,R,v,T){switch(S.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:T.errors.push({line:T.findLine(T.lines,o.prosValOpen),char:o.prosValOpen,msg:"Prose value operator(<...>) opened but not closed."}),o.basicError=!0,o.prosValOpen=null;break;case i.MATCH:T.errors.push({line:T.findLine(T.lines,o.prosValOpen),char:o.prosValOpen,msg:"Prose value operator(<...>) found. The ABNF syntax is valid, but a parser cannot be generated from this grammar."}),o.prosValOpen=null;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},g=function(S,R,v,T){switch(S.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:o={groupOpen:v,groupError:!1,optionOpen:null,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},T.altStack.push(o);break;default:throw new Error(`${t}synFile: unrecognized case.`)}},m=function(S,R,v,T){switch(S.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:T.errors.push({line:T.findLine(T.lines,o.groupOpen),char:o.groupOpen,msg:'Group "(...)" opened but not closed.'}),o=T.altStack.pop(),o.groupError=!0;break;case i.MATCH:o=T.altStack.pop();break;default:throw new Error(`${t}synFile: unrecognized case.`)}},c=function(S,R,v,T){switch(S.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:o={groupOpen:null,groupError:!1,optionOpen:v,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},T.altStack.push(o);break;default:throw new Error(`${t}synFile: unrecognized case.`)}},p=function(S,R,v,T){switch(S.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:T.errors.push({line:T.findLine(T.lines,o.optionOpen),char:o.optionOpen,msg:'Option "[...]" opened but not closed.'}),o=T.altStack.pop(),o.optionError=!0;break;case i.MATCH:o=T.altStack.pop();break;default:throw new Error(`${t}synFile: unrecognized case.`)}},x=function(S,R,v,T){switch(S.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:o.basicError===!1&&T.errors.push({line:T.findLine(T.lines,v,T.charsLength),char:v,msg:"Unrecognized SABNF element."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},E=function(S,R,v,T){switch(S.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:if(S.phraseLength===1&&T.strict){let re=R[v]===13?"CR":"LF";T.errors.push({line:T.findLine(T.lines,v,T.charsLength),char:v,msg:`Line end '${re}' found - strict ABNF specified, only CRLF allowed.`})}break;default:throw new Error(`${t}synFile: unrecognized case.`)}},w=function(S,R,v,T){switch(S.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:T.errors.push({line:T.findLine(T.lines,v,T.charsLength),char:v,msg:"Unrecognized grammar element or characters."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},b=function(S,R,v,T){switch(S.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:T.repCount+=1;break;case i.MATCH:T.repCount+=1;break;default:throw new Error(`${t}synFile: unrecognized case.`)}};this.callbacks=[],this.callbacks.andop=h,this.callbacks.basicelementerr=x,this.callbacks.clsclose=U,this.callbacks.clsopen=B,this.callbacks.clsstring=L,this.callbacks.definedaserror=d,this.callbacks.file=s,this.callbacks.groupclose=m,this.callbacks.groupopen=g,this.callbacks.lineenderror=w,this.callbacks.lineend=E,this.callbacks.notop=y,this.callbacks.optionclose=p,this.callbacks.optionopen=c,this.callbacks.prosvalclose=l,this.callbacks.prosvalopen=te,this.callbacks.prosvalstring=_,this.callbacks.repetition=b,this.callbacks.rule=a,this.callbacks.ruleerror=f,this.callbacks.rulenameerror=u,this.callbacks.stringtab=j,this.callbacks.tlsclose=X,this.callbacks.tlsopen=$,this.callbacks.tlsstring=K,this.callbacks.udtop=D,this.callbacks.bkaop=C,this.callbacks.bknop=O,this.callbacks.bkrop=F,this.callbacks.abgop=A,this.callbacks.aenop=M}});var Ty=de((TF,Ay)=>{Ay.exports=function(){let t=Uo(),r=t.ids,i=function(){this.names=[],this.add=function(Z){let se=-1;return this.get(Z)===-1&&(se={name:Z,lower:Z.toLowerCase(),index:this.names.length},this.names.push(se)),se},this.get=function(Z){let se=-1,q=Z.toLowerCase();for(let ne=0;ne<this.names.length;ne+=1)if(this.names[ne].lower===q){se=this.names[ne];break}return se}},o=function(he,Z,se){let q=0;for(let ne=Z;ne<Z+se;ne+=1)q=10*q+he[ne]-48;return q},s=function(he,Z,se){let q=0;for(let ne=Z;ne<Z+se;ne+=1)q=2*q+he[ne]-48;return q},a=function(he,Z,se){let q=0;for(let ne=Z;ne<Z+se;ne+=1){let pe=he[ne];if(pe>=48&&pe<=57)pe-=48;else if(pe>=65&&pe<=70)pe-=55;else if(pe>=97&&pe<=102)pe-=87;else throw new Error("hexnum out of range");q=16*q+pe}return q};function f(W,he,Z,se,q){let ne=r.SEM_OK;if(W===r.SEM_PRE)q.ruleNames=new i,q.udtNames=new i,q.rules=[],q.udts=[],q.rulesLineMap=[],q.opcodes=[],q.altStack=[],q.topStack=null,q.topRule=null;else if(W===r.SEM_POST){let pe;q.rules.forEach(Ee=>{Ee.isBkr=!1,Ee.opcodes.forEach(ve=>{ve.type===r.RNM&&(pe=q.ruleNames.get(ve.index.name),pe===-1?(q.errors.push({line:q.findLine(q.lines,ve.index.phraseIndex,q.charsLength),char:ve.index.phraseIndex,msg:`Rule name '${ve.index.name}' used but not defined.`}),ve.index=-1):ve.index=pe.index)})}),q.udts.forEach(Ee=>{Ee.isBkr=!1}),q.rules.forEach(Ee=>{Ee.opcodes.forEach(ve=>{ve.type===r.BKR&&(Ee.hasBkr=!0,pe=q.ruleNames.get(ve.index.name),pe!==-1?(q.rules[pe.index].isBkr=!0,ve.index=pe.index):(pe=q.udtNames.get(ve.index.name),pe!==-1?(q.udts[pe.index].isBkr=!0,ve.index=q.rules.length+pe.index):(q.errors.push({line:q.findLine(q.lines,ve.index.phraseIndex,q.charsLength),char:ve.index.phraseIndex,msg:`Back reference name '${ve.index.name}' refers to undefined rule or unamed UDT.`}),ve.index=-1)))})})}return ne}function u(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_PRE&&(q.altStack.length=0,q.topStack=null,q.rulesLineMap.push({line:q.findLine(q.lines,Z,q.charsLength),char:Z})),ne}function d(W,he,Z,se,q){let ne=r.SEM_OK;if(W===r.SEM_PRE)q.ruleName="",q.definedas="";else if(W===r.SEM_POST){let pe;q.definedas==="="?(pe=q.ruleNames.add(q.ruleName),pe===-1?(q.definedas=null,q.errors.push({line:q.findLine(q.lines,Z,q.charsLength),char:Z,msg:`Rule name '${q.ruleName}' previously defined.`})):(q.topRule={name:pe.name,lower:pe.lower,opcodes:[],index:pe.index},q.rules.push(q.topRule),q.opcodes=q.topRule.opcodes)):(pe=q.ruleNames.get(q.ruleName),pe===-1?(q.definedas=null,q.errors.push({line:q.findLine(q.lines,Z,q.charsLength),char:Z,msg:`Rule name '${q.ruleName}' for incremental alternate not previously defined.`})):(q.topRule=q.rules[pe.index],q.opcodes=q.topRule.opcodes))}return ne}function h(W,he,Z,se,q){let ne=r.SEM_OK;if(W===r.SEM_PRE)for(;;){if(q.definedas===null){ne=r.SEM_SKIP;break}if(q.topStack===null){if(q.definedas==="="){q.topStack={alt:{type:r.ALT,children:[]},cat:null},q.altStack.push(q.topStack),q.opcodes.push(q.topStack.alt);break}q.topStack={alt:q.opcodes[0],cat:null},q.altStack.push(q.topStack);break}q.topStack={alt:{type:r.ALT,children:[]},cat:null},q.altStack.push(q.topStack),q.opcodes.push(q.topStack.alt);break}else W===r.SEM_POST&&(q.altStack.pop(),q.altStack.length>0?q.topStack=q.altStack[q.altStack.length-1]:q.topStack=null);return ne}function y(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_PRE?(q.topStack.alt.children.push(q.opcodes.length),q.topStack.cat={type:r.CAT,children:[]},q.opcodes.push(q.topStack.cat)):W===r.SEM_POST&&(q.topStack.cat=null),ne}function C(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_PRE&&q.topStack.cat.children.push(q.opcodes.length),ne}function O(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_POST&&q.opcodes.push({type:r.REP,min:0,max:1,char:Z}),ne}function A(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_PRE&&(q.ruleName=t.utils.charsToString(he,Z,se)),ne}function M(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_POST&&(q.definedas="="),ne}function F(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_POST&&(q.definedas="=/"),ne}function D(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_PRE?(q.min=0,q.max=1/0,q.topRep={type:r.REP,min:0,max:1/0},q.opcodes.push(q.topRep)):W===r.SEM_POST&&(q.min>q.max&&q.errors.push({line:q.findLine(q.lines,Z,q.charsLength),char:Z,msg:`repetition min cannot be greater than max: min: ${q.min}: max: ${q.max}`}),q.topRep.min=q.min,q.topRep.max=q.max),ne}function $(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_POST&&(q.min=o(he,Z,se)),ne}function K(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_POST&&(q.max=o(he,Z,se)),ne}function j(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_POST&&(q.max=o(he,Z,se),q.min=q.max),ne}function X(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_POST&&q.opcodes.push({type:r.AND}),ne}function B(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_POST&&q.opcodes.push({type:r.NOT}),ne}function L(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_POST&&q.opcodes.push({type:r.RNM,index:{phraseIndex:Z,name:t.utils.charsToString(he,Z,se)}}),ne}function U(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_POST&&q.opcodes.push({type:r.ABG}),ne}function te(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_POST&&q.opcodes.push({type:r.AEN}),ne}function _(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_POST&&q.opcodes.push({type:r.BKA}),ne}function l(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_POST&&q.opcodes.push({type:r.BKN}),ne}function g(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_PRE?(q.ci=!0,q.cs=!1,q.um=!0,q.pm=!1):W===r.SEM_POST&&q.opcodes.push({type:r.BKR,bkrCase:q.cs===!0?r.BKR_MODE_CS:r.BKR_MODE_CI,bkrMode:q.pm===!0?r.BKR_MODE_PM:r.BKR_MODE_UM,index:{phraseIndex:q.bkrname.phraseIndex,name:t.utils.charsToString(he,q.bkrname.phraseIndex,q.bkrname.phraseLength)}}),ne}function m(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_POST&&(q.ci=!0),ne}function c(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_POST&&(q.cs=!0),ne}function p(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_POST&&(q.um=!0),ne}function x(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_POST&&(q.pm=!0),ne}function E(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_POST&&(q.bkrname={phraseIndex:Z,phraseLength:se}),ne}function w(W,he,Z,se,q){let ne=r.SEM_OK;if(W===r.SEM_POST){let pe=t.utils.charsToString(he,Z,se),Ee=q.udtNames.add(pe);if(Ee===-1){if(Ee=q.udtNames.get(pe),Ee===-1)throw new Error("semUdtEmpty: name look up error")}else q.udts.push({name:Ee.name,lower:Ee.lower,index:Ee.index,empty:!0});q.opcodes.push({type:r.UDT,empty:!0,index:Ee.index})}return ne}function b(W,he,Z,se,q){let ne=r.SEM_OK;if(W===r.SEM_POST){let pe=t.utils.charsToString(he,Z,se),Ee=q.udtNames.add(pe);if(Ee===-1){if(Ee=q.udtNames.get(pe),Ee===-1)throw new Error("semUdtNonEmpty: name look up error")}else q.udts.push({name:Ee.name,lower:Ee.lower,index:Ee.index,empty:!1});q.opcodes.push({type:r.UDT,empty:!1,index:Ee.index,syntax:null,semantic:null})}return ne}function S(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_PRE&&(q.tlscase=!0),ne}function R(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_POST&&se>0&&(he[Z+1]===83||he[Z+1]===115)&&(q.tlscase=!1),ne}function v(W,he,Z,se,q){let ne=r.SEM_OK;if(W===r.SEM_POST)if(q.tlscase){let pe=he.slice(Z,Z+se);for(let Ee=0;Ee<pe.length;Ee+=1)pe[Ee]>=65&&pe[Ee]<=90&&(pe[Ee]+=32);q.opcodes.push({type:r.TLS,string:pe})}else q.opcodes.push({type:r.TBS,string:he.slice(Z,Z+se)});return ne}function T(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_POST&&(se<=2?q.opcodes.push({type:r.TLS,string:[]}):q.opcodes.push({type:r.TBS,string:he.slice(Z+1,Z+se-1)})),ne}function re(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_PRE?q.tbsstr=[]:W===r.SEM_POST&&q.opcodes.push({type:r.TBS,string:q.tbsstr}),ne}function k(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_PRE?(q.min=0,q.max=0):W===r.SEM_POST&&(q.min>q.max&&q.errors.push({line:q.findLine(q.lines,Z,q.charsLength),char:Z,msg:`TRG, (%dmin-max), min cannot be greater than max: min: ${q.min}: max: ${q.max}`}),q.opcodes.push({type:r.TRG,min:q.min,max:q.max})),ne}function z(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_POST&&(q.min=o(he,Z,se)),ne}function Y(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_POST&&(q.max=o(he,Z,se)),ne}function N(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_POST&&(q.min=s(he,Z,se)),ne}function P(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_POST&&(q.max=s(he,Z,se)),ne}function G(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_POST&&(q.min=a(he,Z,se)),ne}function J(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_POST&&(q.max=a(he,Z,se)),ne}function Q(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_POST&&q.tbsstr.push(o(he,Z,se)),ne}function le(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_POST&&q.tbsstr.push(s(he,Z,se)),ne}function oe(W,he,Z,se,q){let ne=r.SEM_OK;return W===r.SEM_POST&&q.tbsstr.push(a(he,Z,se)),ne}this.callbacks=[],this.callbacks.abgop=U,this.callbacks.aenop=te,this.callbacks.alternation=h,this.callbacks.andop=X,this.callbacks.bmax=P,this.callbacks.bmin=N,this.callbacks.bkaop=_,this.callbacks.bknop=l,this.callbacks.bkrop=g,this.callbacks["bkr-name"]=E,this.callbacks.bstring=le,this.callbacks.clsop=T,this.callbacks.ci=m,this.callbacks.cs=c,this.callbacks.um=p,this.callbacks.pm=x,this.callbacks.concatenation=y,this.callbacks.defined=M,this.callbacks.dmax=Y,this.callbacks.dmin=z,this.callbacks.dstring=Q,this.callbacks.file=f,this.callbacks.incalt=F,this.callbacks.notop=B,this.callbacks.optionopen=O,this.callbacks["rep-max"]=K,this.callbacks["rep-min"]=$,this.callbacks["rep-min-max"]=j,this.callbacks.repetition=C,this.callbacks.repop=D,this.callbacks.rnmop=L,this.callbacks.rule=u,this.callbacks.rulelookup=d,this.callbacks.rulename=A,this.callbacks.tbsop=re,this.callbacks.tlscase=R,this.callbacks.tlsstring=v,this.callbacks.tlsop=S,this.callbacks.trgop=k,this.callbacks["udt-empty"]=w,this.callbacks["udt-non-empty"]=b,this.callbacks.xmax=J,this.callbacks.xmin=G,this.callbacks.xstring=oe}});var ky=de((MF,My)=>{My.exports=function(){this.grammarObject="grammarObject",this.rules=[],this.rules[0]={name:"File",lower:"file",index:0,isBkr:!1},this.rules[1]={name:"BlankLine",lower:"blankline",index:1,isBkr:!1},this.rules[2]={name:"Rule",lower:"rule",index:2,isBkr:!1},this.rules[3]={name:"RuleLookup",lower:"rulelookup",index:3,isBkr:!1},this.rules[4]={name:"RuleNameTest",lower:"rulenametest",index:4,isBkr:!1},this.rules[5]={name:"RuleName",lower:"rulename",index:5,isBkr:!1},this.rules[6]={name:"RuleNameError",lower:"rulenameerror",index:6,isBkr:!1},this.rules[7]={name:"DefinedAsTest",lower:"definedastest",index:7,isBkr:!1},this.rules[8]={name:"DefinedAsError",lower:"definedaserror",index:8,isBkr:!1},this.rules[9]={name:"DefinedAs",lower:"definedas",index:9,isBkr:!1},this.rules[10]={name:"Defined",lower:"defined",index:10,isBkr:!1},this.rules[11]={name:"IncAlt",lower:"incalt",index:11,isBkr:!1},this.rules[12]={name:"RuleError",lower:"ruleerror",index:12,isBkr:!1},this.rules[13]={name:"LineEndError",lower:"lineenderror",index:13,isBkr:!1},this.rules[14]={name:"Alternation",lower:"alternation",index:14,isBkr:!1},this.rules[15]={name:"Concatenation",lower:"concatenation",index:15,isBkr:!1},this.rules[16]={name:"Repetition",lower:"repetition",index:16,isBkr:!1},this.rules[17]={name:"Modifier",lower:"modifier",index:17,isBkr:!1},this.rules[18]={name:"Predicate",lower:"predicate",index:18,isBkr:!1},this.rules[19]={name:"BasicElement",lower:"basicelement",index:19,isBkr:!1},this.rules[20]={name:"BasicElementErr",lower:"basicelementerr",index:20,isBkr:!1},this.rules[21]={name:"Group",lower:"group",index:21,isBkr:!1},this.rules[22]={name:"GroupError",lower:"grouperror",index:22,isBkr:!1},this.rules[23]={name:"GroupOpen",lower:"groupopen",index:23,isBkr:!1},this.rules[24]={name:"GroupClose",lower:"groupclose",index:24,isBkr:!1},this.rules[25]={name:"Option",lower:"option",index:25,isBkr:!1},this.rules[26]={name:"OptionError",lower:"optionerror",index:26,isBkr:!1},this.rules[27]={name:"OptionOpen",lower:"optionopen",index:27,isBkr:!1},this.rules[28]={name:"OptionClose",lower:"optionclose",index:28,isBkr:!1},this.rules[29]={name:"RnmOp",lower:"rnmop",index:29,isBkr:!1},this.rules[30]={name:"BkrOp",lower:"bkrop",index:30,isBkr:!1},this.rules[31]={name:"bkrModifier",lower:"bkrmodifier",index:31,isBkr:!1},this.rules[32]={name:"cs",lower:"cs",index:32,isBkr:!1},this.rules[33]={name:"ci",lower:"ci",index:33,isBkr:!1},this.rules[34]={name:"um",lower:"um",index:34,isBkr:!1},this.rules[35]={name:"pm",lower:"pm",index:35,isBkr:!1},this.rules[36]={name:"bkr-name",lower:"bkr-name",index:36,isBkr:!1},this.rules[37]={name:"rname",lower:"rname",index:37,isBkr:!1},this.rules[38]={name:"uname",lower:"uname",index:38,isBkr:!1},this.rules[39]={name:"ename",lower:"ename",index:39,isBkr:!1},this.rules[40]={name:"UdtOp",lower:"udtop",index:40,isBkr:!1},this.rules[41]={name:"udt-non-empty",lower:"udt-non-empty",index:41,isBkr:!1},this.rules[42]={name:"udt-empty",lower:"udt-empty",index:42,isBkr:!1},this.rules[43]={name:"RepOp",lower:"repop",index:43,isBkr:!1},this.rules[44]={name:"AltOp",lower:"altop",index:44,isBkr:!1},this.rules[45]={name:"CatOp",lower:"catop",index:45,isBkr:!1},this.rules[46]={name:"StarOp",lower:"starop",index:46,isBkr:!1},this.rules[47]={name:"AndOp",lower:"andop",index:47,isBkr:!1},this.rules[48]={name:"NotOp",lower:"notop",index:48,isBkr:!1},this.rules[49]={name:"BkaOp",lower:"bkaop",index:49,isBkr:!1},this.rules[50]={name:"BknOp",lower:"bknop",index:50,isBkr:!1},this.rules[51]={name:"AbgOp",lower:"abgop",index:51,isBkr:!1},this.rules[52]={name:"AenOp",lower:"aenop",index:52,isBkr:!1},this.rules[53]={name:"TrgOp",lower:"trgop",index:53,isBkr:!1},this.rules[54]={name:"TbsOp",lower:"tbsop",index:54,isBkr:!1},this.rules[55]={name:"TlsOp",lower:"tlsop",index:55,isBkr:!1},this.rules[56]={name:"TlsCase",lower:"tlscase",index:56,isBkr:!1},this.rules[57]={name:"TlsOpen",lower:"tlsopen",index:57,isBkr:!1},this.rules[58]={name:"TlsClose",lower:"tlsclose",index:58,isBkr:!1},this.rules[59]={name:"TlsString",lower:"tlsstring",index:59,isBkr:!1},this.rules[60]={name:"StringTab",lower:"stringtab",index:60,isBkr:!1},this.rules[61]={name:"ClsOp",lower:"clsop",index:61,isBkr:!1},this.rules[62]={name:"ClsOpen",lower:"clsopen",index:62,isBkr:!1},this.rules[63]={name:"ClsClose",lower:"clsclose",index:63,isBkr:!1},this.rules[64]={name:"ClsString",lower:"clsstring",index:64,isBkr:!1},this.rules[65]={name:"ProsVal",lower:"prosval",index:65,isBkr:!1},this.rules[66]={name:"ProsValOpen",lower:"prosvalopen",index:66,isBkr:!1},this.rules[67]={name:"ProsValString",lower:"prosvalstring",index:67,isBkr:!1},this.rules[68]={name:"ProsValClose",lower:"prosvalclose",index:68,isBkr:!1},this.rules[69]={name:"rep-min",lower:"rep-min",index:69,isBkr:!1},this.rules[70]={name:"rep-min-max",lower:"rep-min-max",index:70,isBkr:!1},this.rules[71]={name:"rep-max",lower:"rep-max",index:71,isBkr:!1},this.rules[72]={name:"rep-num",lower:"rep-num",index:72,isBkr:!1},this.rules[73]={name:"dString",lower:"dstring",index:73,isBkr:!1},this.rules[74]={name:"xString",lower:"xstring",index:74,isBkr:!1},this.rules[75]={name:"bString",lower:"bstring",index:75,isBkr:!1},this.rules[76]={name:"Dec",lower:"dec",index:76,isBkr:!1},this.rules[77]={name:"Hex",lower:"hex",index:77,isBkr:!1},this.rules[78]={name:"Bin",lower:"bin",index:78,isBkr:!1},this.rules[79]={name:"dmin",lower:"dmin",index:79,isBkr:!1},this.rules[80]={name:"dmax",lower:"dmax",index:80,isBkr:!1},this.rules[81]={name:"bmin",lower:"bmin",index:81,isBkr:!1},this.rules[82]={name:"bmax",lower:"bmax",index:82,isBkr:!1},this.rules[83]={name:"xmin",lower:"xmin",index:83,isBkr:!1},this.rules[84]={name:"xmax",lower:"xmax",index:84,isBkr:!1},this.rules[85]={name:"dnum",lower:"dnum",index:85,isBkr:!1},this.rules[86]={name:"bnum",lower:"bnum",index:86,isBkr:!1},this.rules[87]={name:"xnum",lower:"xnum",index:87,isBkr:!1},this.rules[88]={name:"alphanum",lower:"alphanum",index:88,isBkr:!1},this.rules[89]={name:"owsp",lower:"owsp",index:89,isBkr:!1},this.rules[90]={name:"wsp",lower:"wsp",index:90,isBkr:!1},this.rules[91]={name:"space",lower:"space",index:91,isBkr:!1},this.rules[92]={name:"comment",lower:"comment",index:92,isBkr:!1},this.rules[93]={name:"LineEnd",lower:"lineend",index:93,isBkr:!1},this.rules[94]={name:"LineContinue",lower:"linecontinue",index:94,isBkr:!1},this.udts=[],this.rules[0].opcodes=[],this.rules[0].opcodes[0]={type:3,min:0,max:1/0},this.rules[0].opcodes[1]={type:1,children:[2,3,4]},this.rules[0].opcodes[2]={type:4,index:1},this.rules[0].opcodes[3]={type:4,index:2},this.rules[0].opcodes[4]={type:4,index:12},this.rules[1].opcodes=[],this.rules[1].opcodes[0]={type:2,children:[1,5,7]},this.rules[1].opcodes[1]={type:3,min:0,max:1/0},this.rules[1].opcodes[2]={type:1,children:[3,4]},this.rules[1].opcodes[3]={type:6,string:[32]},this.rules[1].opcodes[4]={type:6,string:[9]},this.rules[1].opcodes[5]={type:3,min:0,max:1},this.rules[1].opcodes[6]={type:4,index:92},this.rules[1].opcodes[7]={type:4,index:93},this.rules[2].opcodes=[],this.rules[2].opcodes[0]={type:2,children:[1,2,3,4]},this.rules[2].opcodes[1]={type:4,index:3},this.rules[2].opcodes[2]={type:4,index:89},this.rules[2].opcodes[3]={type:4,index:14},this.rules[2].opcodes[4]={type:1,children:[5,8]},this.rules[2].opcodes[5]={type:2,children:[6,7]},this.rules[2].opcodes[6]={type:4,index:89},this.rules[2].opcodes[7]={type:4,index:93},this.rules[2].opcodes[8]={type:2,children:[9,10]},this.rules[2].opcodes[9]={type:4,index:13},this.rules[2].opcodes[10]={type:4,index:93},this.rules[3].opcodes=[],this.rules[3].opcodes[0]={type:2,children:[1,2,3]},this.rules[3].opcodes[1]={type:4,index:4},this.rules[3].opcodes[2]={type:4,index:89},this.rules[3].opcodes[3]={type:4,index:7},this.rules[4].opcodes=[],this.rules[4].opcodes[0]={type:1,children:[1,2]},this.rules[4].opcodes[1]={type:4,index:5},this.rules[4].opcodes[2]={type:4,index:6},this.rules[5].opcodes=[],this.rules[5].opcodes[0]={type:4,index:88},this.rules[6].opcodes=[],this.rules[6].opcodes[0]={type:3,min:1,max:1/0},this.rules[6].opcodes[1]={type:1,children:[2,3]},this.rules[6].opcodes[2]={type:5,min:33,max:60},this.rules[6].opcodes[3]={type:5,min:62,max:126},this.rules[7].opcodes=[],this.rules[7].opcodes[0]={type:1,children:[1,2]},this.rules[7].opcodes[1]={type:4,index:9},this.rules[7].opcodes[2]={type:4,index:8},this.rules[8].opcodes=[],this.rules[8].opcodes[0]={type:3,min:1,max:2},this.rules[8].opcodes[1]={type:5,min:33,max:126},this.rules[9].opcodes=[],this.rules[9].opcodes[0]={type:1,children:[1,2]},this.rules[9].opcodes[1]={type:4,index:11},this.rules[9].opcodes[2]={type:4,index:10},this.rules[10].opcodes=[],this.rules[10].opcodes[0]={type:6,string:[61]},this.rules[11].opcodes=[],this.rules[11].opcodes[0]={type:6,string:[61,47]},this.rules[12].opcodes=[],this.rules[12].opcodes[0]={type:2,children:[1,6]},this.rules[12].opcodes[1]={type:3,min:1,max:1/0},this.rules[12].opcodes[2]={type:1,children:[3,4,5]},this.rules[12].opcodes[3]={type:5,min:32,max:126},this.rules[12].opcodes[4]={type:6,string:[9]},this.rules[12].opcodes[5]={type:4,index:94},this.rules[12].opcodes[6]={type:4,index:93},this.rules[13].opcodes=[],this.rules[13].opcodes[0]={type:3,min:1,max:1/0},this.rules[13].opcodes[1]={type:1,children:[2,3,4]},this.rules[13].opcodes[2]={type:5,min:32,max:126},this.rules[13].opcodes[3]={type:6,string:[9]},this.rules[13].opcodes[4]={type:4,index:94},this.rules[14].opcodes=[],this.rules[14].opcodes[0]={type:2,children:[1,2]},this.rules[14].opcodes[1]={type:4,index:15},this.rules[14].opcodes[2]={type:3,min:0,max:1/0},this.rules[14].opcodes[3]={type:2,children:[4,5,6]},this.rules[14].opcodes[4]={type:4,index:89},this.rules[14].opcodes[5]={type:4,index:44},this.rules[14].opcodes[6]={type:4,index:15},this.rules[15].opcodes=[],this.rules[15].opcodes[0]={type:2,children:[1,2]},this.rules[15].opcodes[1]={type:4,index:16},this.rules[15].opcodes[2]={type:3,min:0,max:1/0},this.rules[15].opcodes[3]={type:2,children:[4,5]},this.rules[15].opcodes[4]={type:4,index:45},this.rules[15].opcodes[5]={type:4,index:16},this.rules[16].opcodes=[],this.rules[16].opcodes[0]={type:2,children:[1,3]},this.rules[16].opcodes[1]={type:3,min:0,max:1},this.rules[16].opcodes[2]={type:4,index:17},this.rules[16].opcodes[3]={type:1,children:[4,5,6,7]},this.rules[16].opcodes[4]={type:4,index:21},this.rules[16].opcodes[5]={type:4,index:25},this.rules[16].opcodes[6]={type:4,index:19},this.rules[16].opcodes[7]={type:4,index:20},this.rules[17].opcodes=[],this.rules[17].opcodes[0]={type:1,children:[1,5]},this.rules[17].opcodes[1]={type:2,children:[2,3]},this.rules[17].opcodes[2]={type:4,index:18},this.rules[17].opcodes[3]={type:3,min:0,max:1},this.rules[17].opcodes[4]={type:4,index:43},this.rules[17].opcodes[5]={type:4,index:43},this.rules[18].opcodes=[],this.rules[18].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[18].opcodes[1]={type:4,index:49},this.rules[18].opcodes[2]={type:4,index:50},this.rules[18].opcodes[3]={type:4,index:47},this.rules[18].opcodes[4]={type:4,index:48},this.rules[19].opcodes=[],this.rules[19].opcodes[0]={type:1,children:[1,2,3,4,5,6,7,8,9,10]},this.rules[19].opcodes[1]={type:4,index:40},this.rules[19].opcodes[2]={type:4,index:29},this.rules[19].opcodes[3]={type:4,index:53},this.rules[19].opcodes[4]={type:4,index:54},this.rules[19].opcodes[5]={type:4,index:55},this.rules[19].opcodes[6]={type:4,index:61},this.rules[19].opcodes[7]={type:4,index:30},this.rules[19].opcodes[8]={type:4,index:51},this.rules[19].opcodes[9]={type:4,index:52},this.rules[19].opcodes[10]={type:4,index:65},this.rules[20].opcodes=[],this.rules[20].opcodes[0]={type:3,min:1,max:1/0},this.rules[20].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[20].opcodes[2]={type:5,min:33,max:40},this.rules[20].opcodes[3]={type:5,min:42,max:46},this.rules[20].opcodes[4]={type:5,min:48,max:92},this.rules[20].opcodes[5]={type:5,min:94,max:126},this.rules[21].opcodes=[],this.rules[21].opcodes[0]={type:2,children:[1,2,3]},this.rules[21].opcodes[1]={type:4,index:23},this.rules[21].opcodes[2]={type:4,index:14},this.rules[21].opcodes[3]={type:1,children:[4,5]},this.rules[21].opcodes[4]={type:4,index:24},this.rules[21].opcodes[5]={type:4,index:22},this.rules[22].opcodes=[],this.rules[22].opcodes[0]={type:3,min:1,max:1/0},this.rules[22].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[22].opcodes[2]={type:5,min:33,max:40},this.rules[22].opcodes[3]={type:5,min:42,max:46},this.rules[22].opcodes[4]={type:5,min:48,max:92},this.rules[22].opcodes[5]={type:5,min:94,max:126},this.rules[23].opcodes=[],this.rules[23].opcodes[0]={type:2,children:[1,2]},this.rules[23].opcodes[1]={type:6,string:[40]},this.rules[23].opcodes[2]={type:4,index:89},this.rules[24].opcodes=[],this.rules[24].opcodes[0]={type:2,children:[1,2]},this.rules[24].opcodes[1]={type:4,index:89},this.rules[24].opcodes[2]={type:6,string:[41]},this.rules[25].opcodes=[],this.rules[25].opcodes[0]={type:2,children:[1,2,3]},this.rules[25].opcodes[1]={type:4,index:27},this.rules[25].opcodes[2]={type:4,index:14},this.rules[25].opcodes[3]={type:1,children:[4,5]},this.rules[25].opcodes[4]={type:4,index:28},this.rules[25].opcodes[5]={type:4,index:26},this.rules[26].opcodes=[],this.rules[26].opcodes[0]={type:3,min:1,max:1/0},this.rules[26].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[26].opcodes[2]={type:5,min:33,max:40},this.rules[26].opcodes[3]={type:5,min:42,max:46},this.rules[26].opcodes[4]={type:5,min:48,max:92},this.rules[26].opcodes[5]={type:5,min:94,max:126},this.rules[27].opcodes=[],this.rules[27].opcodes[0]={type:2,children:[1,2]},this.rules[27].opcodes[1]={type:6,string:[91]},this.rules[27].opcodes[2]={type:4,index:89},this.rules[28].opcodes=[],this.rules[28].opcodes[0]={type:2,children:[1,2]},this.rules[28].opcodes[1]={type:4,index:89},this.rules[28].opcodes[2]={type:6,string:[93]},this.rules[29].opcodes=[],this.rules[29].opcodes[0]={type:4,index:88},this.rules[30].opcodes=[],this.rules[30].opcodes[0]={type:2,children:[1,2,4]},this.rules[30].opcodes[1]={type:6,string:[92]},this.rules[30].opcodes[2]={type:3,min:0,max:1},this.rules[30].opcodes[3]={type:4,index:31},this.rules[30].opcodes[4]={type:4,index:36},this.rules[31].opcodes=[],this.rules[31].opcodes[0]={type:1,children:[1,7,13,19]},this.rules[31].opcodes[1]={type:2,children:[2,3]},this.rules[31].opcodes[2]={type:4,index:32},this.rules[31].opcodes[3]={type:3,min:0,max:1},this.rules[31].opcodes[4]={type:1,children:[5,6]},this.rules[31].opcodes[5]={type:4,index:34},this.rules[31].opcodes[6]={type:4,index:35},this.rules[31].opcodes[7]={type:2,children:[8,9]},this.rules[31].opcodes[8]={type:4,index:33},this.rules[31].opcodes[9]={type:3,min:0,max:1},this.rules[31].opcodes[10]={type:1,children:[11,12]},this.rules[31].opcodes[11]={type:4,index:34},this.rules[31].opcodes[12]={type:4,index:35},this.rules[31].opcodes[13]={type:2,children:[14,15]},this.rules[31].opcodes[14]={type:4,index:34},this.rules[31].opcodes[15]={type:3,min:0,max:1},this.rules[31].opcodes[16]={type:1,children:[17,18]},this.rules[31].opcodes[17]={type:4,index:32},this.rules[31].opcodes[18]={type:4,index:33},this.rules[31].opcodes[19]={type:2,children:[20,21]},this.rules[31].opcodes[20]={type:4,index:35},this.rules[31].opcodes[21]={type:3,min:0,max:1},this.rules[31].opcodes[22]={type:1,children:[23,24]},this.rules[31].opcodes[23]={type:4,index:32},this.rules[31].opcodes[24]={type:4,index:33},this.rules[32].opcodes=[],this.rules[32].opcodes[0]={type:6,string:[37,115]},this.rules[33].opcodes=[],this.rules[33].opcodes[0]={type:6,string:[37,105]},this.rules[34].opcodes=[],this.rules[34].opcodes[0]={type:6,string:[37,117]},this.rules[35].opcodes=[],this.rules[35].opcodes[0]={type:6,string:[37,112]},this.rules[36].opcodes=[],this.rules[36].opcodes[0]={type:1,children:[1,2,3]},this.rules[36].opcodes[1]={type:4,index:38},this.rules[36].opcodes[2]={type:4,index:39},this.rules[36].opcodes[3]={type:4,index:37},this.rules[37].opcodes=[],this.rules[37].opcodes[0]={type:4,index:88},this.rules[38].opcodes=[],this.rules[38].opcodes[0]={type:2,children:[1,2]},this.rules[38].opcodes[1]={type:6,string:[117,95]},this.rules[38].opcodes[2]={type:4,index:88},this.rules[39].opcodes=[],this.rules[39].opcodes[0]={type:2,children:[1,2]},this.rules[39].opcodes[1]={type:6,string:[101,95]},this.rules[39].opcodes[2]={type:4,index:88},this.rules[40].opcodes=[],this.rules[40].opcodes[0]={type:1,children:[1,2]},this.rules[40].opcodes[1]={type:4,index:42},this.rules[40].opcodes[2]={type:4,index:41},this.rules[41].opcodes=[],this.rules[41].opcodes[0]={type:2,children:[1,2]},this.rules[41].opcodes[1]={type:6,string:[117,95]},this.rules[41].opcodes[2]={type:4,index:88},this.rules[42].opcodes=[],this.rules[42].opcodes[0]={type:2,children:[1,2]},this.rules[42].opcodes[1]={type:6,string:[101,95]},this.rules[42].opcodes[2]={type:4,index:88},this.rules[43].opcodes=[],this.rules[43].opcodes[0]={type:1,children:[1,5,8,11,12]},this.rules[43].opcodes[1]={type:2,children:[2,3,4]},this.rules[43].opcodes[2]={type:4,index:69},this.rules[43].opcodes[3]={type:4,index:46},this.rules[43].opcodes[4]={type:4,index:71},this.rules[43].opcodes[5]={type:2,children:[6,7]},this.rules[43].opcodes[6]={type:4,index:69},this.rules[43].opcodes[7]={type:4,index:46},this.rules[43].opcodes[8]={type:2,children:[9,10]},this.rules[43].opcodes[9]={type:4,index:46},this.rules[43].opcodes[10]={type:4,index:71},this.rules[43].opcodes[11]={type:4,index:46},this.rules[43].opcodes[12]={type:4,index:70},this.rules[44].opcodes=[],this.rules[44].opcodes[0]={type:2,children:[1,2]},this.rules[44].opcodes[1]={type:6,string:[47]},this.rules[44].opcodes[2]={type:4,index:89},this.rules[45].opcodes=[],this.rules[45].opcodes[0]={type:4,index:90},this.rules[46].opcodes=[],this.rules[46].opcodes[0]={type:6,string:[42]},this.rules[47].opcodes=[],this.rules[47].opcodes[0]={type:6,string:[38]},this.rules[48].opcodes=[],this.rules[48].opcodes[0]={type:6,string:[33]},this.rules[49].opcodes=[],this.rules[49].opcodes[0]={type:6,string:[38,38]},this.rules[50].opcodes=[],this.rules[50].opcodes[0]={type:6,string:[33,33]},this.rules[51].opcodes=[],this.rules[51].opcodes[0]={type:6,string:[37,94]},this.rules[52].opcodes=[],this.rules[52].opcodes[0]={type:6,string:[37,36]},this.rules[53].opcodes=[],this.rules[53].opcodes[0]={type:2,children:[1,2]},this.rules[53].opcodes[1]={type:6,string:[37]},this.rules[53].opcodes[2]={type:1,children:[3,8,13]},this.rules[53].opcodes[3]={type:2,children:[4,5,6,7]},this.rules[53].opcodes[4]={type:4,index:76},this.rules[53].opcodes[5]={type:4,index:79},this.rules[53].opcodes[6]={type:6,string:[45]},this.rules[53].opcodes[7]={type:4,index:80},this.rules[53].opcodes[8]={type:2,children:[9,10,11,12]},this.rules[53].opcodes[9]={type:4,index:77},this.rules[53].opcodes[10]={type:4,index:83},this.rules[53].opcodes[11]={type:6,string:[45]},this.rules[53].opcodes[12]={type:4,index:84},this.rules[53].opcodes[13]={type:2,children:[14,15,16,17]},this.rules[53].opcodes[14]={type:4,index:78},this.rules[53].opcodes[15]={type:4,index:81},this.rules[53].opcodes[16]={type:6,string:[45]},this.rules[53].opcodes[17]={type:4,index:82},this.rules[54].opcodes=[],this.rules[54].opcodes[0]={type:2,children:[1,2]},this.rules[54].opcodes[1]={type:6,string:[37]},this.rules[54].opcodes[2]={type:1,children:[3,10,17]},this.rules[54].opcodes[3]={type:2,children:[4,5,6]},this.rules[54].opcodes[4]={type:4,index:76},this.rules[54].opcodes[5]={type:4,index:73},this.rules[54].opcodes[6]={type:3,min:0,max:1/0},this.rules[54].opcodes[7]={type:2,children:[8,9]},this.rules[54].opcodes[8]={type:6,string:[46]},this.rules[54].opcodes[9]={type:4,index:73},this.rules[54].opcodes[10]={type:2,children:[11,12,13]},this.rules[54].opcodes[11]={type:4,index:77},this.rules[54].opcodes[12]={type:4,index:74},this.rules[54].opcodes[13]={type:3,min:0,max:1/0},this.rules[54].opcodes[14]={type:2,children:[15,16]},this.rules[54].opcodes[15]={type:6,string:[46]},this.rules[54].opcodes[16]={type:4,index:74},this.rules[54].opcodes[17]={type:2,children:[18,19,20]},this.rules[54].opcodes[18]={type:4,index:78},this.rules[54].opcodes[19]={type:4,index:75},this.rules[54].opcodes[20]={type:3,min:0,max:1/0},this.rules[54].opcodes[21]={type:2,children:[22,23]},this.rules[54].opcodes[22]={type:6,string:[46]},this.rules[54].opcodes[23]={type:4,index:75},this.rules[55].opcodes=[],this.rules[55].opcodes[0]={type:2,children:[1,2,3,4]},this.rules[55].opcodes[1]={type:4,index:56},this.rules[55].opcodes[2]={type:4,index:57},this.rules[55].opcodes[3]={type:4,index:59},this.rules[55].opcodes[4]={type:4,index:58},this.rules[56].opcodes=[],this.rules[56].opcodes[0]={type:3,min:0,max:1},this.rules[56].opcodes[1]={type:1,children:[2,3]},this.rules[56].opcodes[2]={type:7,string:[37,105]},this.rules[56].opcodes[3]={type:7,string:[37,115]},this.rules[57].opcodes=[],this.rules[57].opcodes[0]={type:6,string:[34]},this.rules[58].opcodes=[],this.rules[58].opcodes[0]={type:6,string:[34]},this.rules[59].opcodes=[],this.rules[59].opcodes[0]={type:3,min:0,max:1/0},this.rules[59].opcodes[1]={type:1,children:[2,3,4]},this.rules[59].opcodes[2]={type:5,min:32,max:33},this.rules[59].opcodes[3]={type:5,min:35,max:126},this.rules[59].opcodes[4]={type:4,index:60},this.rules[60].opcodes=[],this.rules[60].opcodes[0]={type:6,string:[9]},this.rules[61].opcodes=[],this.rules[61].opcodes[0]={type:2,children:[1,2,3]},this.rules[61].opcodes[1]={type:4,index:62},this.rules[61].opcodes[2]={type:4,index:64},this.rules[61].opcodes[3]={type:4,index:63},this.rules[62].opcodes=[],this.rules[62].opcodes[0]={type:6,string:[39]},this.rules[63].opcodes=[],this.rules[63].opcodes[0]={type:6,string:[39]},this.rules[64].opcodes=[],this.rules[64].opcodes[0]={type:3,min:0,max:1/0},this.rules[64].opcodes[1]={type:1,children:[2,3,4]},this.rules[64].opcodes[2]={type:5,min:32,max:38},this.rules[64].opcodes[3]={type:5,min:40,max:126},this.rules[64].opcodes[4]={type:4,index:60},this.rules[65].opcodes=[],this.rules[65].opcodes[0]={type:2,children:[1,2,3]},this.rules[65].opcodes[1]={type:4,index:66},this.rules[65].opcodes[2]={type:4,index:67},this.rules[65].opcodes[3]={type:4,index:68},this.rules[66].opcodes=[],this.rules[66].opcodes[0]={type:6,string:[60]},this.rules[67].opcodes=[],this.rules[67].opcodes[0]={type:3,min:0,max:1/0},this.rules[67].opcodes[1]={type:1,children:[2,3,4]},this.rules[67].opcodes[2]={type:5,min:32,max:61},this.rules[67].opcodes[3]={type:5,min:63,max:126},this.rules[67].opcodes[4]={type:4,index:60},this.rules[68].opcodes=[],this.rules[68].opcodes[0]={type:6,string:[62]},this.rules[69].opcodes=[],this.rules[69].opcodes[0]={type:4,index:72},this.rules[70].opcodes=[],this.rules[70].opcodes[0]={type:4,index:72},this.rules[71].opcodes=[],this.rules[71].opcodes[0]={type:4,index:72},this.rules[72].opcodes=[],this.rules[72].opcodes[0]={type:3,min:1,max:1/0},this.rules[72].opcodes[1]={type:5,min:48,max:57},this.rules[73].opcodes=[],this.rules[73].opcodes[0]={type:4,index:85},this.rules[74].opcodes=[],this.rules[74].opcodes[0]={type:4,index:87},this.rules[75].opcodes=[],this.rules[75].opcodes[0]={type:4,index:86},this.rules[76].opcodes=[],this.rules[76].opcodes[0]={type:1,children:[1,2]},this.rules[76].opcodes[1]={type:6,string:[68]},this.rules[76].opcodes[2]={type:6,string:[100]},this.rules[77].opcodes=[],this.rules[77].opcodes[0]={type:1,children:[1,2]},this.rules[77].opcodes[1]={type:6,string:[88]},this.rules[77].opcodes[2]={type:6,string:[120]},this.rules[78].opcodes=[],this.rules[78].opcodes[0]={type:1,children:[1,2]},this.rules[78].opcodes[1]={type:6,string:[66]},this.rules[78].opcodes[2]={type:6,string:[98]},this.rules[79].opcodes=[],this.rules[79].opcodes[0]={type:4,index:85},this.rules[80].opcodes=[],this.rules[80].opcodes[0]={type:4,index:85},this.rules[81].opcodes=[],this.rules[81].opcodes[0]={type:4,index:86},this.rules[82].opcodes=[],this.rules[82].opcodes[0]={type:4,index:86},this.rules[83].opcodes=[],this.rules[83].opcodes[0]={type:4,index:87},this.rules[84].opcodes=[],this.rules[84].opcodes[0]={type:4,index:87},this.rules[85].opcodes=[],this.rules[85].opcodes[0]={type:3,min:1,max:1/0},this.rules[85].opcodes[1]={type:5,min:48,max:57},this.rules[86].opcodes=[],this.rules[86].opcodes[0]={type:3,min:1,max:1/0},this.rules[86].opcodes[1]={type:5,min:48,max:49},this.rules[87].opcodes=[],this.rules[87].opcodes[0]={type:3,min:1,max:1/0},this.rules[87].opcodes[1]={type:1,children:[2,3,4]},this.rules[87].opcodes[2]={type:5,min:48,max:57},this.rules[87].opcodes[3]={type:5,min:65,max:70},this.rules[87].opcodes[4]={type:5,min:97,max:102},this.rules[88].opcodes=[],this.rules[88].opcodes[0]={type:2,children:[1,4]},this.rules[88].opcodes[1]={type:1,children:[2,3]},this.rules[88].opcodes[2]={type:5,min:97,max:122},this.rules[88].opcodes[3]={type:5,min:65,max:90},this.rules[88].opcodes[4]={type:3,min:0,max:1/0},this.rules[88].opcodes[5]={type:1,children:[6,7,8,9]},this.rules[88].opcodes[6]={type:5,min:97,max:122},this.rules[88].opcodes[7]={type:5,min:65,max:90},this.rules[88].opcodes[8]={type:5,min:48,max:57},this.rules[88].opcodes[9]={type:6,string:[45]},this.rules[89].opcodes=[],this.rules[89].opcodes[0]={type:3,min:0,max:1/0},this.rules[89].opcodes[1]={type:4,index:91},this.rules[90].opcodes=[],this.rules[90].opcodes[0]={type:3,min:1,max:1/0},this.rules[90].opcodes[1]={type:4,index:91},this.rules[91].opcodes=[],this.rules[91].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[91].opcodes[1]={type:6,string:[32]},this.rules[91].opcodes[2]={type:6,string:[9]},this.rules[91].opcodes[3]={type:4,index:92},this.rules[91].opcodes[4]={type:4,index:94},this.rules[92].opcodes=[],this.rules[92].opcodes[0]={type:2,children:[1,2]},this.rules[92].opcodes[1]={type:6,string:[59]},this.rules[92].opcodes[2]={type:3,min:0,max:1/0},this.rules[92].opcodes[3]={type:1,children:[4,5]},this.rules[92].opcodes[4]={type:5,min:32,max:126},this.rules[92].opcodes[5]={type:6,string:[9]},this.rules[93].opcodes=[],this.rules[93].opcodes[0]={type:1,children:[1,2,3]},this.rules[93].opcodes[1]={type:6,string:[13,10]},this.rules[93].opcodes[2]={type:6,string:[10]},this.rules[93].opcodes[3]={type:6,string:[13]},this.rules[94].opcodes=[],this.rules[94].opcodes[0]={type:2,children:[1,5]},this.rules[94].opcodes[1]={type:1,children:[2,3,4]},this.rules[94].opcodes[2]={type:6,string:[13,10]},this.rules[94].opcodes[3]={type:6,string:[10]},this.rules[94].opcodes[4]={type:6,string:[13]},this.rules[94].opcodes[5]={type:1,children:[6,7]},this.rules[94].opcodes[6]={type:6,string:[32]},this.rules[94].opcodes[7]={type:6,string:[9]},this.toString=function(){let r="";return r+=`;
`,r+=`; ABNF for JavaScript APG 2.0 SABNF
`,r+=`; RFC 5234 with some restrictions and additions.
`,r+=`; Updated 11/24/2015 for RFC 7405 case-sensitive literal string notation
`,r+=`;  - accepts %s"string" as a case-sensitive string
`,r+=`;  - accepts %i"string" as a case-insensitive string
`,r+=`;  - accepts "string" as a case-insensitive string
`,r+=`;
`,r+=`; Some restrictions:
`,r+=`;   1. Rules must begin at first character of each line.
`,r+=`;      Indentations on first rule and rules thereafter are not allowed.
`,r+=`;   2. Relaxed line endings. CRLF, LF or CR are accepted as valid line ending.
`,r+=`;   3. Prose values, i.e. <prose value>, are accepted as valid grammar syntax.
`,r+=`;      However, a working parser cannot be generated from them.
`,r+=`;
`,r+=`; Super set (SABNF) additions:
`,r+=`;   1. Look-ahead (syntactic predicate) operators are accepted as element prefixes.
`,r+=`;      & is the positive look-ahead operator, succeeds and backtracks if the look-ahead phrase is found
`,r+=`;      ! is the negative look-ahead operator, succeeds and backtracks if the look-ahead phrase is NOT found
`,r+=`;      e.g. &%d13 or &rule or !(A / B)
`,r+=`;   2. User-Defined Terminals (UDT) of the form, u_name and e_name are accepted.
`,r+=`;      'name' is alpha followed by alpha/num/hyphen just like a rule name.
`,r+=`;      u_name may be used as an element but no rule definition is given.
`,r+=`;      e.g. rule = A / u_myUdt
`,r+=`;           A = "a"
`,r+=`;      would be a valid grammar.
`,r+=`;   3. Case-sensitive, single-quoted strings are accepted.
`,r+=`;      e.g. 'abc' would be equivalent to %d97.98.99
`,r+=`;      (kept for backward compatibility, but superseded by %s"abc")  
`,r+=`; New 12/26/2015
`,r+=`;   4. Look-behind operators are accepted as element prefixes.
`,r+=`;      && is the positive look-behind operator, succeeds and backtracks if the look-behind phrase is found
`,r+=`;      !! is the negative look-behind operator, succeeds and backtracks if the look-behind phrase is NOT found
`,r+=`;      e.g. &&%d13 or &&rule or !!(A / B)
`,r+=`;   5. Back reference operators, i.e. \\rulename, are accepted.
`,r+=`;      A back reference operator acts like a TLS or TBS terminal except that the phrase it attempts
`,r+=`;      to match is a phrase previously matched by the rule 'rulename'.
`,r+=`;      There are two modes of previous phrase matching - the parent-frame mode and the universal mode.
`,r+=`;      In universal mode, \\rulename matches the last match to 'rulename' regardless of where it was found.
`,r+=`;      In parent-frame mode, \\rulename matches only the last match found on the parent's frame or parse tree level.
`,r+=`;      Back reference modifiers can be used to specify case and mode.
`,r+=`;      \\A defaults to case-insensitive and universal mode, e.g. \\A === \\%i%uA
`,r+=`;      Modifiers %i and %s determine case-insensitive and case-sensitive mode, respectively.
`,r+=`;      Modifiers %u and %p determine universal mode and parent frame mode, respectively.
`,r+=`;      Case and mode modifiers can appear in any order, e.g. \\%s%pA === \\%p%sA. 
`,r+=`;   7. String begin anchor, ABG(%^) matches the beginning of the input string location.
`,r+=`;      Returns EMPTY or NOMATCH. Never consumes any characters.
`,r+=`;   8. String end anchor, AEN(%$) matches the end of the input string location.
`,r+=`;      Returns EMPTY or NOMATCH. Never consumes any characters.
`,r+=`;
`,r+=`File            = *(BlankLine / Rule / RuleError)
`,r+=`BlankLine       = *(%d32/%d9) [comment] LineEnd
`,r+=`Rule            = RuleLookup owsp Alternation ((owsp LineEnd)
`,r+=`                / (LineEndError LineEnd))
`,r+=`RuleLookup      = RuleNameTest owsp DefinedAsTest
`,r+=`RuleNameTest    = RuleName/RuleNameError
`,r+=`RuleName        = alphanum
`,r+=`RuleNameError   = 1*(%d33-60/%d62-126)
`,r+=`DefinedAsTest   = DefinedAs / DefinedAsError
`,r+=`DefinedAsError  = 1*2%d33-126
`,r+=`DefinedAs       = IncAlt / Defined
`,r+=`Defined         = %d61
`,r+=`IncAlt          = %d61.47
`,r+=`RuleError       = 1*(%d32-126 / %d9  / LineContinue) LineEnd
`,r+=`LineEndError    = 1*(%d32-126 / %d9  / LineContinue)
`,r+=`Alternation     = Concatenation *(owsp AltOp Concatenation)
`,r+=`Concatenation   = Repetition *(CatOp Repetition)
`,r+=`Repetition      = [Modifier] (Group / Option / BasicElement / BasicElementErr)
`,r+=`Modifier        = (Predicate [RepOp])
`,r+=`                / RepOp
`,r+=`Predicate       = BkaOp
`,r+=`                / BknOp
`,r+=`                / AndOp
`,r+=`                / NotOp
`,r+=`BasicElement    = UdtOp
`,r+=`                / RnmOp
`,r+=`                / TrgOp
`,r+=`                / TbsOp
`,r+=`                / TlsOp
`,r+=`                / ClsOp
`,r+=`                / BkrOp
`,r+=`                / AbgOp
`,r+=`                / AenOp
`,r+=`                / ProsVal
`,r+=`BasicElementErr = 1*(%d33-40/%d42-46/%d48-92/%d94-126)
`,r+=`Group           = GroupOpen  Alternation (GroupClose / GroupError)
`,r+=`GroupError      = 1*(%d33-40/%d42-46/%d48-92/%d94-126) ; same as BasicElementErr
`,r+=`GroupOpen       = %d40 owsp
`,r+=`GroupClose      = owsp %d41
`,r+=`Option          = OptionOpen Alternation (OptionClose / OptionError)
`,r+=`OptionError     = 1*(%d33-40/%d42-46/%d48-92/%d94-126) ; same as BasicElementErr
`,r+=`OptionOpen      = %d91 owsp
`,r+=`OptionClose     = owsp %d93
`,r+=`RnmOp           = alphanum
`,r+=`BkrOp           = %d92 [bkrModifier] bkr-name
`,r+=`bkrModifier     = (cs [um / pm]) / (ci [um / pm]) / (um [cs /ci]) / (pm [cs / ci])
`,r+=`cs              = '%s'
`,r+=`ci              = '%i'
`,r+=`um              = '%u'
`,r+=`pm              = '%p'
`,r+=`bkr-name        = uname / ename / rname
`,r+=`rname           = alphanum
`,r+=`uname           = %d117.95 alphanum
`,r+=`ename           = %d101.95 alphanum
`,r+=`UdtOp           = udt-empty
`,r+=`                / udt-non-empty
`,r+=`udt-non-empty   = %d117.95 alphanum
`,r+=`udt-empty       = %d101.95 alphanum
`,r+=`RepOp           = (rep-min StarOp rep-max)
`,r+=`                / (rep-min StarOp)
`,r+=`                / (StarOp rep-max)
`,r+=`                / StarOp
`,r+=`                / rep-min-max
`,r+=`AltOp           = %d47 owsp
`,r+=`CatOp           = wsp
`,r+=`StarOp          = %d42
`,r+=`AndOp           = %d38
`,r+=`NotOp           = %d33
`,r+=`BkaOp           = %d38.38
`,r+=`BknOp           = %d33.33
`,r+=`AbgOp           = %d37.94
`,r+=`AenOp           = %d37.36
`,r+=`TrgOp           = %d37 ((Dec dmin %d45 dmax) / (Hex xmin %d45 xmax) / (Bin bmin %d45 bmax))
`,r+=`TbsOp           = %d37 ((Dec dString *(%d46 dString)) / (Hex xString *(%d46 xString)) / (Bin bString *(%d46 bString)))
`,r+=`TlsOp           = TlsCase TlsOpen TlsString TlsClose
`,r+=`TlsCase         = ["%i" / "%s"]
`,r+=`TlsOpen         = %d34
`,r+=`TlsClose        = %d34
`,r+=`TlsString       = *(%d32-33/%d35-126/StringTab)
`,r+=`StringTab       = %d9
`,r+=`ClsOp           = ClsOpen ClsString ClsClose
`,r+=`ClsOpen         = %d39
`,r+=`ClsClose        = %d39
`,r+=`ClsString       = *(%d32-38/%d40-126/StringTab)
`,r+=`ProsVal         = ProsValOpen ProsValString ProsValClose
`,r+=`ProsValOpen     = %d60
`,r+=`ProsValString   = *(%d32-61/%d63-126/StringTab)
`,r+=`ProsValClose    = %d62
`,r+=`rep-min         = rep-num
`,r+=`rep-min-max     = rep-num
`,r+=`rep-max         = rep-num
`,r+=`rep-num         = 1*(%d48-57)
`,r+=`dString         = dnum
`,r+=`xString         = xnum
`,r+=`bString         = bnum
`,r+=`Dec             = (%d68/%d100)
`,r+=`Hex             = (%d88/%d120)
`,r+=`Bin             = (%d66/%d98)
`,r+=`dmin            = dnum
`,r+=`dmax            = dnum
`,r+=`bmin            = bnum
`,r+=`bmax            = bnum
`,r+=`xmin            = xnum
`,r+=`xmax            = xnum
`,r+=`dnum            = 1*(%d48-57)
`,r+=`bnum            = 1*%d48-49
`,r+=`xnum            = 1*(%d48-57 / %d65-70 / %d97-102)
`,r+=`;
`,r+=`; Basics
`,r+=`alphanum        = (%d97-122/%d65-90) *(%d97-122/%d65-90/%d48-57/%d45)
`,r+=`owsp            = *space
`,r+=`wsp             = 1*space
`,r+=`space           = %d32
`,r+=`                / %d9
`,r+=`                / comment
`,r+=`                / LineContinue
`,r+=`comment         = %d59 *(%d32-126 / %d9)
`,r+=`LineEnd         = %d13.10
`,r+=`                / %d10
`,r+=`                / %d13
`,r+=`LineContinue    = (%d13.10 / %d10 / %d13) (%d32 / %d9)
`,r}}});var Oy=de((kF,Cy)=>{Cy.exports=function(){let t="parser: ",r=Uo(),i=r.ids,o=new(Sy()),s=new(Ty()),a=new(ky()),f=new r.parser;f.ast=new r.ast,f.callbacks=o.callbacks,f.ast.callbacks=s.callbacks;let u=function(C,O,A){if(O<0||O>=A)return-1;for(let M=0;M<C.length;M+=1)if(O>=C[M].beginChar&&O<C[M].beginChar+C[M].length)return M;return-1},d=function(C,O){let A=-1;if(O<C.length){for(let M=O;M<C.length;M+=1)if(C[M]!==null){A=C[M];break}}return A},h=function(C){C.forEach(O=>{let A=[],M=[],F=0;O.opcodes.forEach(D=>{D.type===i.ALT&&D.children.length===1||D.type===i.CAT&&D.children.length===1||D.type===i.REP&&D.min===1&&D.max===1?M.push(null):(M.push(F),A.push(D),F+=1)}),M.push(F),A.forEach(D=>{if(D.type===i.ALT||D.type===i.CAT)for(let $=0;$<D.children.length;$+=1)D.children[$]=d(M,D.children[$])}),O.opcodes=A})};this.syntax=function(C,O,A,M,F){if(F){if(F.traceObject!=="traceObject")throw new TypeError(`${t}trace argument is not a trace object`);f.trace=F}let D={};D.errors=A,D.strict=!!M,D.lines=O,D.findLine=u,D.charsLength=C.length,D.ruleCount=0,f.parse(a,"file",C,D).success||A.push({line:0,char:0,msg:"syntax analysis of input grammar failed"})},this.semantic=function(C,O,A){let M={};return M.errors=A,M.lines=O,M.findLine=u,M.charsLength=C.length,f.ast.translate(M),A.length?null:(h(M.rules),{rules:M.rules,udts:M.udts,lineMap:M.rulesLineMap})},this.generateSource=function(C,O,A,M,F){let D="",$,K,j,X=0,B=1/0,L=0,U=[],te=[],_=0,l=0,g=0,m=0,c=0,p=0,x=0,E=0,w=0,b=0,S=0,R=0,v=0,T=0,re=0;A.forEach(Y=>{U.push(Y.lower),X+=Y.opcodes.length,Y.opcodes.forEach(N=>{switch(N.type){case i.ALT:_+=1;break;case i.CAT:l+=1;break;case i.RNM:g+=1;break;case i.UDT:m+=1;break;case i.REP:c+=1;break;case i.AND:p+=1;break;case i.NOT:x+=1;break;case i.BKA:R+=1;break;case i.BKN:v+=1;break;case i.BKR:S+=1;break;case i.ABG:T+=1;break;case i.AEN:re+=1;break;case i.TLS:for(E+=1,$=0;$<N.string.length;$+=1)N.string[$]<B&&(B=N.string[$]),N.string[$]>L&&(L=N.string[$]);break;case i.TBS:for(w+=1,$=0;$<N.string.length;$+=1)N.string[$]<B&&(B=N.string[$]),N.string[$]>L&&(L=N.string[$]);break;case i.TRG:b+=1,N.min<B&&(B=N.min),N.max>L&&(L=N.max);break;default:throw new Error("generateSource: unrecognized opcode")}})}),U.sort(),M.length>0&&(M.forEach(Y=>{te.push(Y.lower)}),te.sort());let k="module.exports";F&&typeof F=="string"&&(k=`let ${F}`),D+=`// copyright: Copyright (c) 2021 Lowell D. Thomas, all rights reserved<br>
`,D+=`//   license: BSD-2-Clause (https://opensource.org/licenses/BSD-2-Clause)<br>
`,D+=`//
`,D+=`// Generated by apg-js, Version 4.0.0 [apg-js](https://github.com/ldthomas/apg-js)
`,D+=`${k} = function grammar(){
`,D+="  // ```\n",D+=`  // SUMMARY
`,D+=`  //      rules = ${A.length}
`,D+=`  //       udts = ${M.length}
`,D+=`  //    opcodes = ${X}
`,D+=`  //        ---   ABNF original opcodes
`,D+=`  //        ALT = ${_}
`,D+=`  //        CAT = ${l}
`,D+=`  //        REP = ${c}
`,D+=`  //        RNM = ${g}
`,D+=`  //        TLS = ${E}
`,D+=`  //        TBS = ${w}
`,D+=`  //        TRG = ${b}
`,D+=`  //        ---   SABNF superset opcodes
`,D+=`  //        UDT = ${m}
`,D+=`  //        AND = ${p}
`,D+=`  //        NOT = ${x}
`,D+=`  //        BKA = ${R}
`,D+=`  //        BKN = ${v}
`,D+=`  //        BKR = ${S}
`,D+=`  //        ABG = ${T}
`,D+=`  //        AEN = ${re}
`,D+="  // characters = [",E+w+b===0?D+=" none defined ]":D+=`${B} - ${L}]`,m>0&&(D+=" + user defined"),D+=`
`,D+="  // ```\n",D+=`  /* OBJECT IDENTIFIER (for internal parser use) */
`,D+=`  this.grammarObject = 'grammarObject';
`,D+=`
`,D+=`  /* RULES */
`,D+=`  this.rules = [];
`,A.forEach((Y,N)=>{let P="  this.rules[";P+=N,P+="] = {name: '",P+=Y.name,P+="', lower: '",P+=Y.lower,P+="', index: ",P+=Y.index,P+=", isBkr: ",P+=Y.isBkr,P+=`};
`,D+=P}),D+=`
`,D+=`  /* UDTS */
`,D+=`  this.udts = [];
`,M.length>0&&M.forEach((Y,N)=>{let P="  this.udts[";P+=N,P+="] = {name: '",P+=Y.name,P+="', lower: '",P+=Y.lower,P+="', index: ",P+=Y.index,P+=", empty: ",P+=Y.empty,P+=", isBkr: ",P+=Y.isBkr,P+=`};
`,D+=P}),D+=`
`,D+=`  /* OPCODES */
`,A.forEach((Y,N)=>{N>0&&(D+=`
`),D+=`  /* ${Y.name} */
`,D+=`  this.rules[${N}].opcodes = [];
`,Y.opcodes.forEach((P,G)=>{let J;switch(P.type){case i.ALT:D+=`  this.rules[${N}].opcodes[${G}] = {type: ${P.type}, children: [${P.children.toString()}]};// ALT
`;break;case i.CAT:D+=`  this.rules[${N}].opcodes[${G}] = {type: ${P.type}, children: [${P.children.toString()}]};// CAT
`;break;case i.RNM:D+=`  this.rules[${N}].opcodes[${G}] = {type: ${P.type}, index: ${P.index}};// RNM(${A[P.index].name})
`;break;case i.BKR:P.index>=A.length?(K=M[P.index-A.length].name,j=M[P.index-A.length].lower):(K=A[P.index].name,j=A[P.index].lower),J="%i",P.bkrCase===i.BKR_MODE_CS&&(J="%s"),P.bkrMode===i.BKR_MODE_UM?J+="%u":J+="%p",K=J+K,D+=`  this.rules[${N}].opcodes[${G}] = {type: ${P.type}, index: ${P.index}, lower: '${j}', bkrCase: ${P.bkrCase}, bkrMode: ${P.bkrMode}};// BKR(\\${K})
`;break;case i.UDT:D+=`  this.rules[${N}].opcodes[${G}] = {type: ${P.type}, empty: ${P.empty}, index: ${P.index}};// UDT(${M[P.index].name})
`;break;case i.REP:D+=`  this.rules[${N}].opcodes[${G}] = {type: ${P.type}, min: ${P.min}, max: ${P.max}};// REP
`;break;case i.AND:D+=`  this.rules[${N}].opcodes[${G}] = {type: ${P.type}};// AND
`;break;case i.NOT:D+=`  this.rules[${N}].opcodes[${G}] = {type: ${P.type}};// NOT
`;break;case i.ABG:D+=`  this.rules[${N}].opcodes[${G}] = {type: ${P.type}};// ABG(%^)
`;break;case i.AEN:D+=`  this.rules[${N}].opcodes[${G}] = {type: ${P.type}};// AEN(%$)
`;break;case i.BKA:D+=`  this.rules[${N}].opcodes[${G}] = {type: ${P.type}};// BKA
`;break;case i.BKN:D+=`  this.rules[${N}].opcodes[${G}] = {type: ${P.type}};// BKN
`;break;case i.TLS:D+=`  this.rules[${N}].opcodes[${G}] = {type: ${P.type}, string: [${P.string.toString()}]};// TLS
`;break;case i.TBS:D+=`  this.rules[${N}].opcodes[${G}] = {type: ${P.type}, string: [${P.string.toString()}]};// TBS
`;break;case i.TRG:D+=`  this.rules[${N}].opcodes[${G}] = {type: ${P.type}, min: ${P.min}, max: ${P.max}};// TRG
`;break;default:throw new Error("parser.js: ~143: unrecognized opcode")}})}),D+=`
`,D+="  // The `toString()` function will display the original grammar file(s) that produced these opcodes.\n",D+=`  this.toString = function toString(){
`,D+=`    let str = "";
`;let z;return O.forEach(Y=>{let N=Y.beginChar+Y.length;z="",D+='    str += "';for(let P=Y.beginChar;P<N;P+=1){switch(C[P]){case 9:z=" ";break;case 10:z="\\n";break;case 13:z="\\r";break;case 34:z='\\"';break;case 92:z="\\\\";break;default:z=String.fromCharCode(C[P]);break}D+=z}D+=`";
`}),D+=`    return str;
`,D+=`  }
`,D+=`}
`,D},this.generateObject=function(C,O,A){let M={},F=[],D=[],$=C.slice(0);return M.grammarObject="grammarObject",O.forEach(K=>{F.push(K.lower)}),F.sort(),A.length>0&&(A.forEach(K=>{D.push(K.lower)}),D.sort()),M.callbacks=[],F.forEach(K=>{M.callbacks[K]=!1}),A.length>0&&D.forEach(K=>{M.callbacks[K]=!1}),M.rules=O,M.udts=A,M.toString=function(){return $},M}}});var Ry=de((CF,Dy)=>{Dy.exports=function(){let t=on(),r="rule-attributes.js",i=null;function o(_){return _.left||_.nested||_.right||_.cyclic?!1:_.empty}function s(_){return!!(_.left||_.nested||_.right||_.cyclic)}function a(_,l){let g=0,m=0,c=0;for(g=0;g<l;g+=1)if(_[g].nested)return!0;for(g=0;g<l;g+=1)if(_[g].right&&!_[g].leaf){for(m=g+1;m<l;m+=1)if(!o(_[m]))return!0}for(g=l-1;g>=0;g-=1)if(_[g].left&&!_[g].leaf){for(m=g-1;m>=0;m-=1)if(!o(_[m]))return!0}for(g=0;g<l;g+=1)if(!_[g].empty&&!s(_[g])){for(m=g+1;m<l;m+=1)if(s(_[m])){for(c=m+1;c<l;c+=1)if(!_[c].empty&&!s(_[c]))return!0}}return!1}function f(_,l){for(let g=0;g<l;g+=1)if(!_[g].cyclic)return!1;return!0}function u(_,l){for(let g=0;g<l;g+=1){if(_[g].left)return!0;if(!_[g].empty)return!1}return!1}function d(_,l){for(let g=l-1;g>=0;g-=1){if(_[g].right)return!0;if(!_[g].empty)return!1}return!1}function h(_,l){for(let g=0;g<l;g+=1)if(!_[g].empty)return!1;return!0}function y(_,l){for(let g=0;g<l;g+=1)if(!_[g].finite)return!1;return!0}function C(_,l,g,m){let c=0,p=l[g],x=p.children.length,E=[];for(c=0;c<x;c+=1)E.push(_.attrGen());for(c=0;c<x;c+=1)M(_,l,p.children[c],E[c]);m.left=u(E,x),m.right=d(E,x),m.nested=a(E,x),m.empty=h(E,x),m.finite=y(E,x),m.cyclic=f(E,x)}function O(_,l,g,m){let c=0,p=l[g],x=p.children.length,E=[];for(c=0;c<x;c+=1)E.push(_.attrGen());for(c=0;c<x;c+=1)M(_,l,p.children[c],E[c]);for(m.left=!1,m.right=!1,m.nested=!1,m.empty=!1,m.finite=!1,m.cyclic=!1,c=0;c<x;c+=1)E[c].left&&(m.left=!0),E[c].nested&&(m.nested=!0),E[c].right&&(m.right=!0),E[c].empty&&(m.empty=!0),E[c].finite&&(m.finite=!0),E[c].cyclic&&(m.cyclic=!0)}function A(_,l,g,m){let c=l[g];c.index>=_.ruleCount?(m.empty=_.udts[c.index-_.ruleCount].empty,m.finite=!0):(F(_,c.index,m),m.left=!1,m.nested=!1,m.right=!1,m.cyclic=!1)}function M(_,l,g,m){_.attrInit(m);let c=l[g];switch(c.type){case t.ALT:O(_,l,g,m);break;case t.CAT:C(_,l,g,m);break;case t.REP:M(_,l,g+1,m),c.min===0&&(m.empty=!0,m.finite=!0);break;case t.RNM:F(_,l[g].index,m);break;case t.BKR:A(_,l,g,m);break;case t.AND:case t.NOT:case t.BKA:case t.BKN:M(_,l,g+1,m),m.empty=!0;break;case t.TLS:m.empty=!l[g].string.length,m.finite=!0,m.cyclic=!1;break;case t.TBS:case t.TRG:m.empty=!1,m.finite=!0,m.cyclic=!1;break;case t.UDT:m.empty=c.empty,m.finite=!0,m.cyclic=!1;break;case t.ABG:case t.AEN:m.empty=!0,m.finite=!0,m.cyclic=!1;break;default:throw new Error(`unknown opcode type: ${c}`)}}function F(_,l,g){let m=_.attrsWorking[l];m.isComplete?_.attrCopy(g,m):m.isOpen?l===_.startRule?l===_.startRule&&(g.left=!0,g.right=!0,g.cyclic=!0,g.leaf=!0):g.finite=!0:(m.isOpen=!0,M(_,m.rule.opcodes,0,g),m.left=g.left,m.right=g.right,m.nested=g.nested,m.empty=g.empty,m.finite=g.finite,m.cyclic=g.cyclic,m.leaf=!1,m.isOpen=!1,m.isComplete=!0)}let D=_=>{i=_;let l=0,g=0,m=i.attrGen();for(l=0;l<i.ruleCount;l+=1){for(g=0;g<i.ruleCount;g+=1)i.attrInit(i.attrsWorking[g]);i.startRule=l,F(i,l,m),i.attrCopy(i.attrs[l],i.attrsWorking[l])}i.attributesComplete=!0;let c=null;for(l=0;l<i.ruleCount;l+=1)if(c=i.attrs[l],c.left||!c.finite||c.cyclic){let p=i.attrGen(c.rule);i.attrCopy(p,c),i.attrsErrors.push(p),i.attrsErrorCount+=1}},$=_=>_?"t":"f",K=_=>_?"e":"f",j=_=>_?"t":"e",X=(_,l,g,m)=>{let c=`${_}:${l}:`;return c+=`${K(g.left)} `,c+=`${$(g.nested)} `,c+=`${$(g.right)} `,c+=`${K(g.cyclic)} `,c+=`${j(g.finite)} `,c+=`${$(g.empty)}:`,c+=`${i.typeToString(m.recursiveType)}:`,c+=m.recursiveType===t.ATTR_MR?m.groupNumber:"-",c+=`:${g.rule.name}
`,c},B=()=>{let _=`LEGEND - t=true, f=false, e=error
`;return _+=`sequence:rule index:left nested right cyclic finite empty:type:group number:rule name
`,_},L=()=>{let _=null,l=null,g="";if(g+=`RULE ATTRIBUTES WITH ERRORS
`,g+=B(),i.attrsErrorCount)for(let m=0;m<i.attrsErrorCount;m+=1)_=i.attrsErrors[m],l=i.ruleDeps[_.rule.index],g+=X(m,_.rule.index,_,l);else g+=`<none>
`;return g},U=_=>{let l=0,g=0,m=null,c=null,p="",{ruleIndexes:x}=i;for(_===97?x=i.ruleAlphaIndexes:_===116&&(x=i.ruleTypeIndexes),l=0;l<i.ruleCount;l+=1)g=x[l],m=i.attrs[g],c=i.ruleDeps[g],p+=X(l,g,m,c);return p};return{ruleAttributes:D,showAttributes:(_="index")=>{if(!i.attributesComplete)throw new Error(`${r}:showAttributes: attributes not available`);let l="",g=`RULE ATTRIBUTES
`;return _.charCodeAt(0)===97?(l+=`alphabetical by rule name
`,l+=g,l+=B(),l+=U(97)):_.charCodeAt(0)===116?(l+=`ordered by rule type
`,l+=g,l+=B(),l+=U(116)):(l+=`ordered by rule index
`,l+=g,l+=B(),l+=U()),l},showAttributeErrors:L}}()});var Ny=de((OF,Iy)=>{Iy.exports=(()=>{let n=on(),t=null,r=(a,f,u,d)=>{let h=0,y=0,C=f[u];d[u]=!0;let O=C.rule.opcodes;for(h=0;h<O.length;h+=1){let A=O[h];if(A.type===n.RNM)for(C.refersTo[A.index]=!0,d[A.index]||r(a,f,A.index,d),y=0;y<a;y+=1)f[A.index].refersTo[y]&&(C.refersTo[y]=!0);else A.type===n.UDT?C.refersToUdt[A.index]=!0:A.type===n.BKR&&(A.index<a?(C.refersTo[A.index]=!0,d[A.index]||r(a,f,A.index,d)):C.refersToUdt[a-A.index]=!0)}},i=a=>{t=a;let f=0,u=0,d=0,h=null,y=null,C=!1;t.dependenciesComplete=!1;let O=t.falseArray(t.ruleCount);for(f=0;f<t.ruleCount;f+=1)t.falsifyArray(O),r(t.ruleCount,t.ruleDeps,f,O);for(f=0;f<t.ruleCount;f+=1)for(u=0;u<t.ruleCount;u+=1)f!==u&&t.ruleDeps[u].refersTo[f]&&(t.ruleDeps[f].referencedBy[u]=!0);for(f=0;f<t.ruleCount;f+=1)t.ruleDeps[f].recursiveType=n.ATTR_N,t.ruleDeps[f].refersTo[f]&&(t.ruleDeps[f].recursiveType=n.ATTR_R);for(d=-1,f=0;f<t.ruleCount;f+=1)if(h=t.ruleDeps[f],h.recursiveType===n.ATTR_R)for(C=!0,u=0;u<t.ruleCount;u+=1)f!==u&&(y=t.ruleDeps[u],y.recursiveType===n.ATTR_R&&h.refersTo[u]&&y.refersTo[f]&&(C&&(d+=1,h.recursiveType=n.ATTR_MR,h.groupNumber=d,C=!1),y.recursiveType=n.ATTR_MR,y.groupNumber=d));t.isMutuallyRecursive=d>-1,t.ruleAlphaIndexes.sort(t.compRulesAlpha),t.ruleTypeIndexes.sort(t.compRulesAlpha),t.ruleTypeIndexes.sort(t.compRulesType),t.isMutuallyRecursive&&t.ruleTypeIndexes.sort(t.compRulesGroup),t.udtCount&&t.udtAlphaIndexes.sort(t.compUdtsAlpha),t.dependenciesComplete=!0},o=(a=null)=>{let f=0,u=0,d=0,h=0,y=t.ruleCount-1,C=t.udtCount-1,O=100,A="",M="",F="=> ",D="<= ",$=!1,K=null,{ruleIndexes:j}=t,{udtIndexes:X}=t;for(a===97?(j=t.ruleAlphaIndexes,X=t.udtAlphaIndexes):a===116&&(j=t.ruleTypeIndexes,X=t.udtAlphaIndexes),f=0;f<t.ruleCount;f+=1){for(K=t.ruleDeps[j[f]],M=`${j[f]}:${t.typeToString(K.recursiveType)}:`,t.isMutuallyRecursive&&(M+=K.groupNumber>-1?K.groupNumber:"-",M+=":"),M+=" ",A+=`${M+t.rules[j[f]].name}
`,$=!0,d=0,h=A.length,A+=M,u=0;u<t.ruleCount;u+=1)K.refersTo[j[u]]&&($?(A+=F,$=!1,A+=t.ruleDeps[j[u]].rule.name):A+=`, ${t.ruleDeps[j[u]].rule.name}`,d+=1),A.length-h>O&&u!==y&&(A+=`
${M}${F}`,h=A.length);if(t.udtCount)for(u=0;u<t.udtCount;u+=1)K.refersToUdt[X[u]]&&($?(A+=F,$=!1,A+=t.udts[X[u]].name):A+=`, ${t.udts[X[u]].name}`,d+=1),A.length-h>O&&u!==C&&(A+=`
${M}${F}`,h=A.length);for(d===0&&(A+=`=> <none>
`),$===!1&&(A+=`
`),$=!0,d=0,h=A.length,A+=M,u=0;u<t.ruleCount;u+=1)K.referencedBy[j[u]]&&($?(A+=D,$=!1,A+=t.ruleDeps[j[u]].rule.name):A+=`, ${t.ruleDeps[j[u]].rule.name}`,d+=1),A.length-h>O&&u!==y&&(A+=`
${M}${F}`,h=A.length);d===0&&(A+=`<= <none>
`),$===!1&&(A+=`
`),A+=`
`}return A};return{ruleDependencies:i,showRuleDependencies:(a="index")=>{let f=`RULE DEPENDENCIES(index:type:[group number:])
`;return f+=`=> refers to rule names
`,f+=`<= referenced by rule names
`,t.dependenciesComplete&&(a.charCodeAt(0)===97?(f+=`alphabetical by rule name
`,f+=o(97)):a.charCodeAt(0)===116?(f+=`ordered by rule type
`,f+=o(116)):(f+=`ordered by rule index
`,f+=o(null))),f}}})()});var Ly=de((DF,Py)=>{Py.exports=function(){let t=on(),{ruleAttributes:r,showAttributes:i,showAttributeErrors:o}=Ry(),{ruleDependencies:s,showRuleDependencies:a}=Ny();class f{constructor(h,y){this.rules=h,this.udts=y,this.ruleCount=h.length,this.udtCount=y.length,this.startRule=0,this.dependenciesComplete=!1,this.attributesComplete=!1,this.isMutuallyRecursive=!1,this.ruleIndexes=this.indexArray(this.ruleCount),this.ruleAlphaIndexes=this.indexArray(this.ruleCount),this.ruleTypeIndexes=this.indexArray(this.ruleCount),this.udtIndexes=this.indexArray(this.udtCount),this.udtAlphaIndexes=this.indexArray(this.udtCount),this.attrsErrorCount=0,this.attrs=[],this.attrsErrors=[],this.attrsWorking=[],this.ruleDeps=[];for(let C=0;C<this.ruleCount;C+=1)this.attrs.push(this.attrGen(this.rules[C])),this.attrsWorking.push(this.attrGen(this.rules[C])),this.ruleDeps.push(this.rdGen(h[C],this.ruleCount,this.udtCount));this.compRulesAlpha=this.compRulesAlpha.bind(this),this.compUdtsAlpha=this.compUdtsAlpha.bind(this),this.compRulesType=this.compRulesType.bind(this),this.compRulesGroup=this.compRulesGroup.bind(this)}attrGen(h){return{left:!1,nested:!1,right:!1,empty:!1,finite:!1,cyclic:!1,leaf:!1,isOpen:!1,isComplete:!1,rule:h}}attrInit(h){h.left=!1,h.nested=!1,h.right=!1,h.empty=!1,h.finite=!1,h.cyclic=!1,h.leaf=!1,h.isOpen=!1,h.isComplete=!1}attrCopy(h,y){h.left=y.left,h.nested=y.nested,h.right=y.right,h.empty=y.empty,h.finite=y.finite,h.cyclic=y.cyclic,h.leaf=y.leaf,h.isOpen=y.isOpen,h.isComplete=y.isComplete,h.rule=y.rule}rdGen(h,y,C){return{rule:h,recursiveType:t.ATTR_N,groupNumber:-1,refersTo:this.falseArray(y),refersToUdt:this.falseArray(C),referencedBy:this.falseArray(y)}}typeToString(h){switch(h){case t.ATTR_N:return" N";case t.ATTR_R:return" R";case t.ATTR_MR:return"MR";default:return"UNKNOWN"}}falseArray(h){let y=[];if(h>0)for(let C=0;C<h;C+=1)y.push(!1);return y}falsifyArray(h){for(let y=0;y<h.length;y+=1)h[y]=!1}indexArray(h){let y=[];if(h>0)for(let C=0;C<h;C+=1)y.push(C);return y}compRulesAlpha(h,y){return this.rules[h].lower<this.rules[y].lower?-1:this.rules[h].lower>this.rules[y].lower?1:0}compUdtsAlpha(h,y){return this.udts[h].lower<this.udts[y].lower?-1:this.udts[h].lower>this.udts[y].lower?1:0}compRulesType(h,y){return this.ruleDeps[h].recursiveType<this.ruleDeps[y].recursiveType?-1:this.ruleDeps[h].recursiveType>this.ruleDeps[y].recursiveType?1:0}compRulesGroup(h,y){if(this.ruleDeps[h].recursiveType===t.ATTR_MR&&this.ruleDeps[y].recursiveType===t.ATTR_MR){if(this.ruleDeps[h].groupNumber<this.ruleDeps[y].groupNumber)return-1;if(this.ruleDeps[h].groupNumber>this.ruleDeps[y].groupNumber)return 1}return 0}}return{attributes:function(h=[],y=[],C=[],O=[]){let A=new f(h,y);return s(A),r(A),A.attrsErrorCount&&O.push({line:0,char:0,msg:`${A.attrsErrorCount} attribute errors`}),A.attrsErrorCount},showAttributes:i,showAttributeErrors:o,showRuleDependencies:a}}()});var Uy=de((RF,By)=>{By.exports=function(){let t="show-rules.js";return function(o=[],s=[],a="index"){let f="showRules",u=[],d=[],h=[],y=[],C=o,O=s,A=o.length,M=s.length,F="RULE/UDT NAMES",D;function $(j,X){return C[j].lower<C[X].lower?-1:C[j].lower>C[X].lower?1:0}function K(j,X){return O[j].lower<O[X].lower?-1:O[j].lower>O[X].lower?1:0}if(!(Array.isArray(o)&&o.length))throw new Error(`${t}:${f}: rules arg must be array with length > 0`);if(!Array.isArray(s))throw new Error(`${t}:${f}: udts arg must be array`);for(D=0;D<A;D+=1)h.push(D);if(u=h.slice(0),u.sort($),M){for(D=0;D<M;D+=1)y.push(D);d=y.slice(0),d.sort(K)}if(a.charCodeAt(0)===97){for(F+=` - alphabetical by rule/UDT name
`,D=0;D<A;D+=1)F+=`${D}: ${u[D]}: ${C[u[D]].name}
`;if(M)for(D=0;D<M;D+=1)F+=`${D}: ${d[D]}: ${O[d[D]].name}
`}else{for(F+=` - ordered by rule/UDT index
`,D=0;D<A;D+=1)F+=`${D}: ${C[D].name}
`;if(M)for(D=0;D<M;D+=1)F+=`${D}: ${O[D].name}
`}return F}}()});var Fy=de((IF,$y)=>{$y.exports=function(t){let r="api.js: ",i=this,o=Uo(),s=x0(),a=Ey(),f=new(Oy()),{attributes:u,showAttributes:d,showAttributeErrors:h,showRuleDependencies:y}=Ly(),C=Uy(),O=function(_,l,g){let x=`<span class="${o.style.CLASS_CTRLCHAR}">`,E="</span>",w=`<span class="${o.style.CLASS_NOMATCH}">`,b="</span>",S,R="",v=!0;for(;v&&!(!Array.isArray(_)||_.length===0);){if(typeof l!="number")throw new Error("abnfToHtml: beg must be type number");if(l>=_.length)break;typeof g!="number"||l+g>=_.length?S=_.length:S=l+g;let T=0;for(let re=l;re<S;re+=1){let k=_[re];if(k>=32&&k<=126)switch(T===1?(R+=E,T=0):T===2&&(R+=b,T=0),k){case 32:R+="&nbsp;";break;case 60:R+="&lt;";break;case 62:R+="&gt;";break;case 38:R+="&amp;";break;case 34:R+="&quot;";break;case 39:R+="&#039;";break;case 92:R+="&#092;";break;default:R+=String.fromCharCode(k);break}else k===9||k===10||k===13?(T===0?(R+=x,T=1):T===2&&(R+=b+x,T=1),k===9&&(R+="TAB"),k===10&&(R+="LF"),k===13&&(R+="CR")):(T===0?(R+=w,T=2):T===1&&(R+=E+w,T=2),R+=`\\x${o.utils.charToHex(k)}`)}T===2&&(R+=b),T===1&&(R+=E);break}return R},A=function(_,l,g){let m="";for(let c=l;c<l+g;c+=1){let p=_[c];if(p>=32&&p<=126)m+=String.fromCharCode(p);else switch(p){case 9:m+="\\t";break;case 10:m+="\\n";break;case 13:m+="\\r";break;default:m+="\\unknown";break}}return m},M=function(_){let l="Annotated Input Grammar";return _.forEach(g=>{l+=`
`,l+=`line no: ${g.lineNo}`,l+=` : char index: ${g.beginChar}`,l+=` : length: ${g.length}`,l+=` : abnf: ${A(i.chars,g.beginChar,g.length)}`}),l+=`
`,l},F=function(_){let l="";return l+=`<table class="${o.style.CLASS_GRAMMAR}">
`,l+=`<caption>Annotated Input Grammar</caption>
`,l+="<tr>",l+="<th>line<br>no.</th><th>first<br>char</th><th><br>length</th><th><br>text</th>",l+=`</tr>
`,_.forEach(m=>{l+="<tr>",l+=`<td>${m.lineNo}`,l+=`</td><td>${m.beginChar}`,l+=`</td><td>${m.length}`,l+=`</td><td>${O(i.chars,m.beginChar,m.length)}`,l+="</td>",l+=`</tr>
`}),l+=`</table>
`,l},D=function(_,l,g,m){let[c]=o,p="",x=`<span class="${c.CLASS_NOMATCH}">&raquo;</span>`;return p+=`<p><table class="${c.CLASS_GRAMMAR}">
`,m&&typeof m=="string"&&(p+=`<caption>${m}</caption>
`),p+=`<tr><th>line<br>no.</th><th>line<br>offset</th><th>error<br>offset</th><th><br>text</th></tr>
`,_.forEach(E=>{let w,b,S,R,v,T="",re="";l.length===0?(v=x,b=0):(w=l[E.line],S=w.beginChar,E.char>S&&(T=O(g,S,E.char-S)),S=E.char,R=w.beginChar+w.length,S<R&&(re=O(g,S,R-S)),v=T+x+re,b=E.char-w.beginChar,p+="<tr>",p+=`<td>${E.line}</td><td>${w.beginChar}</td><td>${b}</td><td>${v}</td>`,p+=`</tr>
`,p+="<tr>",p+=`<td colspan="3"></td><td>&uarr;:&nbsp;${o.utils.stringToAsciiHtml(E.msg)}</td>`,p+=`</tr>
`)}),p+=`</table></p>
`,p},$=function(_,l,g){let m,c,p,x;return m="",_.forEach(E=>{c=l[E.line],m+=`${c.lineNo}: `,m+=`${c.beginChar}: `,m+=`${E.char-c.beginChar}: `,p=c.beginChar,x=E.char-c.beginChar,m+=A(g,p,x),m+=" >> ",p=E.char,x=c.beginChar+c.length-E.char,m+=A(g,p,x),m+=`
`,m+=`${c.lineNo}: `,m+=`${c.beginChar}: `,m+=`${E.char-c.beginChar}: `,m+="error: ",m+=E.msg,m+=`
`}),m},K=!1,j=!1,X=!1,B=!1,L=0,U;if(this.errors=[],Buffer.isBuffer(t))this.chars=s.decode("BINARY",t);else if(Array.isArray(t))this.chars=t.slice();else if(typeof t=="string")this.chars=s.decode("STRING",t);else throw new Error(`${r}input source is not a string, byte Buffer or character array`);this.sabnf=s.encode("STRING",this.chars),this.scan=function(_,l){this.lines=a(this.chars,this.errors,_,l),K=!0},this.parse=function(_,l){if(!K)throw new Error(`${r}grammar not scanned`);f.syntax(this.chars,this.lines,this.errors,_,l),j=!0},this.translate=function(){if(!j)throw new Error(`${r}grammar not scanned and parsed`);let _=f.semantic(this.chars,this.lines,this.errors);this.errors.length===0&&(this.rules=_.rules,this.udts=_.udts,U=_.lineMap,X=!0)},this.attributes=function(){if(!X)throw new Error(`${r}grammar not scanned, parsed and translated`);return L=u(this.rules,this.udts,U,this.errors),B=!0,L},this.generate=function(_){if(this.lines=a(this.chars,this.errors,_),this.errors.length||(f.syntax(this.chars,this.lines,this.errors,_),this.errors.length))return;let l=f.semantic(this.chars,this.lines,this.errors);this.errors.length||(this.rules=l.rules,this.udts=l.udts,U=l.lineMap,L=u(this.rules,this.udts,U,this.errors),B=!0)},this.displayRules=function(_="index"){if(!X)throw new Error(`${r}grammar not scanned, parsed and translated`);return C(this.rules,this.udts,_)},this.displayRuleDependencies=function(_="index"){if(!B)throw new Error(`${r}no attributes - must be preceeded by call to attributes()`);return y(_)},this.displayAttributes=function(_="index"){if(!B)throw new Error(`${r}no attributes - must be preceeded by call to attributes()`);return L&&h(_),d(_)},this.displayAttributeErrors=function(){if(!B)throw new Error(`${r}no attributes - must be preceeded by call to attributes()`);return h()},this.toSource=function(_){if(!B)throw new Error(`${r}can't generate parser source - must be preceeded by call to attributes()`);if(L)throw new Error(`${r}can't generate parser source - attributes have ${L} errors`);return f.generateSource(this.chars,this.lines,this.rules,this.udts,_)},this.toObject=function(){if(!B)throw new Error(`${r}can't generate parser source - must be preceeded by call to attributes()`);if(L)throw new Error(`${r}can't generate parser source - attributes have ${L} errors`);return f.generateObject(this.sabnf,this.rules,this.udts)},this.errorsToAscii=function(){return $(this.errors,this.lines,this.chars)},this.errorsToHtml=function(_){return D(this.errors,this.lines,this.chars,_)},this.linesToAscii=function(){return M(this.lines)},this.linesToHtml=function(){return F(this.lines)}}});var O0=de(()=>{});var R0=de((tv,D0)=>{(function(n,t){"use strict";function r(m,c){if(!m)throw new Error(c||"Assertion failed")}function i(m,c){m.super_=c;var p=function(){};p.prototype=c.prototype,m.prototype=new p,m.prototype.constructor=m}function o(m,c,p){if(o.isBN(m))return m;this.negative=0,this.words=null,this.length=0,this.red=null,m!==null&&((c==="le"||c==="be")&&(p=c,c=10),this._init(m||0,c||10,p||"be"))}typeof n=="object"?n.exports=o:t.BN=o,o.BN=o,o.wordSize=26;var s;try{typeof window<"u"&&typeof window.Buffer<"u"?s=window.Buffer:s=O0().Buffer}catch{}o.isBN=function(c){return c instanceof o?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===o.wordSize&&Array.isArray(c.words)},o.max=function(c,p){return c.cmp(p)>0?c:p},o.min=function(c,p){return c.cmp(p)<0?c:p},o.prototype._init=function(c,p,x){if(typeof c=="number")return this._initNumber(c,p,x);if(typeof c=="object")return this._initArray(c,p,x);p==="hex"&&(p=16),r(p===(p|0)&&p>=2&&p<=36),c=c.toString().replace(/\s+/g,"");var E=0;c[0]==="-"&&(E++,this.negative=1),E<c.length&&(p===16?this._parseHex(c,E,x):(this._parseBase(c,p,E),x==="le"&&this._initArray(this.toArray(),p,x)))},o.prototype._initNumber=function(c,p,x){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(r(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),x==="le"&&this._initArray(this.toArray(),p,x)},o.prototype._initArray=function(c,p,x){if(r(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var E=0;E<this.length;E++)this.words[E]=0;var w,b,S=0;if(x==="be")for(E=c.length-1,w=0;E>=0;E-=3)b=c[E]|c[E-1]<<8|c[E-2]<<16,this.words[w]|=b<<S&67108863,this.words[w+1]=b>>>26-S&67108863,S+=24,S>=26&&(S-=26,w++);else if(x==="le")for(E=0,w=0;E<c.length;E+=3)b=c[E]|c[E+1]<<8|c[E+2]<<16,this.words[w]|=b<<S&67108863,this.words[w+1]=b>>>26-S&67108863,S+=24,S>=26&&(S-=26,w++);return this._strip()};function a(m,c){var p=m.charCodeAt(c);if(p>=48&&p<=57)return p-48;if(p>=65&&p<=70)return p-55;if(p>=97&&p<=102)return p-87;r(!1,"Invalid character in "+m)}function f(m,c,p){var x=a(m,p);return p-1>=c&&(x|=a(m,p-1)<<4),x}o.prototype._parseHex=function(c,p,x){this.length=Math.ceil((c.length-p)/6),this.words=new Array(this.length);for(var E=0;E<this.length;E++)this.words[E]=0;var w=0,b=0,S;if(x==="be")for(E=c.length-1;E>=p;E-=2)S=f(c,p,E)<<w,this.words[b]|=S&67108863,w>=18?(w-=18,b+=1,this.words[b]|=S>>>26):w+=8;else{var R=c.length-p;for(E=R%2===0?p+1:p;E<c.length;E+=2)S=f(c,p,E)<<w,this.words[b]|=S&67108863,w>=18?(w-=18,b+=1,this.words[b]|=S>>>26):w+=8}this._strip()};function u(m,c,p,x){for(var E=0,w=0,b=Math.min(m.length,p),S=c;S<b;S++){var R=m.charCodeAt(S)-48;E*=x,R>=49?w=R-49+10:R>=17?w=R-17+10:w=R,r(R>=0&&w<x,"Invalid character"),E+=w}return E}o.prototype._parseBase=function(c,p,x){this.words=[0],this.length=1;for(var E=0,w=1;w<=67108863;w*=p)E++;E--,w=w/p|0;for(var b=c.length-x,S=b%E,R=Math.min(b,b-S)+x,v=0,T=x;T<R;T+=E)v=u(c,T,T+E,p),this.imuln(w),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v);if(S!==0){var re=1;for(v=u(c,T,c.length,p),T=0;T<S;T++)re*=p;this.imuln(re),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v)}this._strip()},o.prototype.copy=function(c){c.words=new Array(this.length);for(var p=0;p<this.length;p++)c.words[p]=this.words[p];c.length=this.length,c.negative=this.negative,c.red=this.red};function d(m,c){m.words=c.words,m.length=c.length,m.negative=c.negative,m.red=c.red}if(o.prototype._move=function(c){d(c,this)},o.prototype.clone=function(){var c=new o(null);return this.copy(c),c},o.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch{o.prototype.inspect=h}else o.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],C=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],O=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(c,p){c=c||10,p=p|0||1;var x;if(c===16||c==="hex"){x="";for(var E=0,w=0,b=0;b<this.length;b++){var S=this.words[b],R=((S<<E|w)&16777215).toString(16);w=S>>>24-E&16777215,E+=2,E>=26&&(E-=26,b--),w!==0||b!==this.length-1?x=y[6-R.length]+R+x:x=R+x}for(w!==0&&(x=w.toString(16)+x);x.length%p!==0;)x="0"+x;return this.negative!==0&&(x="-"+x),x}if(c===(c|0)&&c>=2&&c<=36){var v=C[c],T=O[c];x="";var re=this.clone();for(re.negative=0;!re.isZero();){var k=re.modrn(T).toString(c);re=re.idivn(T),re.isZero()?x=k+x:x=y[v-k.length]+k+x}for(this.isZero()&&(x="0"+x);x.length%p!==0;)x="0"+x;return this.negative!==0&&(x="-"+x),x}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},o.prototype.toJSON=function(){return this.toString(16,2)},s&&(o.prototype.toBuffer=function(c,p){return this.toArrayLike(s,c,p)}),o.prototype.toArray=function(c,p){return this.toArrayLike(Array,c,p)};var A=function(c,p){return c.allocUnsafe?c.allocUnsafe(p):new c(p)};o.prototype.toArrayLike=function(c,p,x){this._strip();var E=this.byteLength(),w=x||Math.max(1,E);r(E<=w,"byte array longer than desired length"),r(w>0,"Requested array length <= 0");var b=A(c,w),S=p==="le"?"LE":"BE";return this["_toArrayLike"+S](b,E),b},o.prototype._toArrayLikeLE=function(c,p){for(var x=0,E=0,w=0,b=0;w<this.length;w++){var S=this.words[w]<<b|E;c[x++]=S&255,x<c.length&&(c[x++]=S>>8&255),x<c.length&&(c[x++]=S>>16&255),b===6?(x<c.length&&(c[x++]=S>>24&255),E=0,b=0):(E=S>>>24,b+=2)}if(x<c.length)for(c[x++]=E;x<c.length;)c[x++]=0},o.prototype._toArrayLikeBE=function(c,p){for(var x=c.length-1,E=0,w=0,b=0;w<this.length;w++){var S=this.words[w]<<b|E;c[x--]=S&255,x>=0&&(c[x--]=S>>8&255),x>=0&&(c[x--]=S>>16&255),b===6?(x>=0&&(c[x--]=S>>24&255),E=0,b=0):(E=S>>>24,b+=2)}if(x>=0)for(c[x--]=E;x>=0;)c[x--]=0},Math.clz32?o.prototype._countBits=function(c){return 32-Math.clz32(c)}:o.prototype._countBits=function(c){var p=c,x=0;return p>=4096&&(x+=13,p>>>=13),p>=64&&(x+=7,p>>>=7),p>=8&&(x+=4,p>>>=4),p>=2&&(x+=2,p>>>=2),x+p},o.prototype._zeroBits=function(c){if(c===0)return 26;var p=c,x=0;return p&8191||(x+=13,p>>>=13),p&127||(x+=7,p>>>=7),p&15||(x+=4,p>>>=4),p&3||(x+=2,p>>>=2),p&1||x++,x},o.prototype.bitLength=function(){var c=this.words[this.length-1],p=this._countBits(c);return(this.length-1)*26+p};function M(m){for(var c=new Array(m.bitLength()),p=0;p<c.length;p++){var x=p/26|0,E=p%26;c[p]=m.words[x]>>>E&1}return c}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,p=0;p<this.length;p++){var x=this._zeroBits(this.words[p]);if(c+=x,x!==26)break}return c},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},o.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var p=0;p<c.length;p++)this.words[p]=this.words[p]|c.words[p];return this._strip()},o.prototype.ior=function(c){return r((this.negative|c.negative)===0),this.iuor(c)},o.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},o.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},o.prototype.iuand=function(c){var p;this.length>c.length?p=c:p=this;for(var x=0;x<p.length;x++)this.words[x]=this.words[x]&c.words[x];return this.length=p.length,this._strip()},o.prototype.iand=function(c){return r((this.negative|c.negative)===0),this.iuand(c)},o.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},o.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},o.prototype.iuxor=function(c){var p,x;this.length>c.length?(p=this,x=c):(p=c,x=this);for(var E=0;E<x.length;E++)this.words[E]=p.words[E]^x.words[E];if(this!==p)for(;E<p.length;E++)this.words[E]=p.words[E];return this.length=p.length,this._strip()},o.prototype.ixor=function(c){return r((this.negative|c.negative)===0),this.iuxor(c)},o.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},o.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},o.prototype.inotn=function(c){r(typeof c=="number"&&c>=0);var p=Math.ceil(c/26)|0,x=c%26;this._expand(p),x>0&&p--;for(var E=0;E<p;E++)this.words[E]=~this.words[E]&67108863;return x>0&&(this.words[E]=~this.words[E]&67108863>>26-x),this._strip()},o.prototype.notn=function(c){return this.clone().inotn(c)},o.prototype.setn=function(c,p){r(typeof c=="number"&&c>=0);var x=c/26|0,E=c%26;return this._expand(x+1),p?this.words[x]=this.words[x]|1<<E:this.words[x]=this.words[x]&~(1<<E),this._strip()},o.prototype.iadd=function(c){var p;if(this.negative!==0&&c.negative===0)return this.negative=0,p=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,p=this.isub(c),c.negative=1,p._normSign();var x,E;this.length>c.length?(x=this,E=c):(x=c,E=this);for(var w=0,b=0;b<E.length;b++)p=(x.words[b]|0)+(E.words[b]|0)+w,this.words[b]=p&67108863,w=p>>>26;for(;w!==0&&b<x.length;b++)p=(x.words[b]|0)+w,this.words[b]=p&67108863,w=p>>>26;if(this.length=x.length,w!==0)this.words[this.length]=w,this.length++;else if(x!==this)for(;b<x.length;b++)this.words[b]=x.words[b];return this},o.prototype.add=function(c){var p;return c.negative!==0&&this.negative===0?(c.negative=0,p=this.sub(c),c.negative^=1,p):c.negative===0&&this.negative!==0?(this.negative=0,p=c.sub(this),this.negative=1,p):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},o.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var p=this.iadd(c);return c.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var x=this.cmp(c);if(x===0)return this.negative=0,this.length=1,this.words[0]=0,this;var E,w;x>0?(E=this,w=c):(E=c,w=this);for(var b=0,S=0;S<w.length;S++)p=(E.words[S]|0)-(w.words[S]|0)+b,b=p>>26,this.words[S]=p&67108863;for(;b!==0&&S<E.length;S++)p=(E.words[S]|0)+b,b=p>>26,this.words[S]=p&67108863;if(b===0&&S<E.length&&E!==this)for(;S<E.length;S++)this.words[S]=E.words[S];return this.length=Math.max(this.length,S),E!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(c){return this.clone().isub(c)};function F(m,c,p){p.negative=c.negative^m.negative;var x=m.length+c.length|0;p.length=x,x=x-1|0;var E=m.words[0]|0,w=c.words[0]|0,b=E*w,S=b&67108863,R=b/67108864|0;p.words[0]=S;for(var v=1;v<x;v++){for(var T=R>>>26,re=R&67108863,k=Math.min(v,c.length-1),z=Math.max(0,v-m.length+1);z<=k;z++){var Y=v-z|0;E=m.words[Y]|0,w=c.words[z]|0,b=E*w+re,T+=b/67108864|0,re=b&67108863}p.words[v]=re|0,R=T|0}return R!==0?p.words[v]=R|0:p.length--,p._strip()}var D=function(c,p,x){var E=c.words,w=p.words,b=x.words,S=0,R,v,T,re=E[0]|0,k=re&8191,z=re>>>13,Y=E[1]|0,N=Y&8191,P=Y>>>13,G=E[2]|0,J=G&8191,Q=G>>>13,le=E[3]|0,oe=le&8191,W=le>>>13,he=E[4]|0,Z=he&8191,se=he>>>13,q=E[5]|0,ne=q&8191,pe=q>>>13,Ee=E[6]|0,ve=Ee&8191,Ae=Ee>>>13,tr=E[7]|0,ee=tr&8191,V=tr>>>13,I=E[8]|0,H=I&8191,ie=I>>>13,ae=E[9]|0,ce=ae&8191,me=ae>>>13,et=w[0]|0,we=et&8191,be=et>>>13,rt=w[1]|0,Se=rt&8191,Me=rt>>>13,pn=w[2]|0,ke=pn&8191,Ce=pn>>>13,mn=w[3]|0,Oe=mn&8191,De=mn>>>13,bn=w[4]|0,Re=bn&8191,Ie=bn>>>13,gn=w[5]|0,Ne=gn&8191,Pe=gn>>>13,yn=w[6]|0,Le=yn&8191,Be=yn>>>13,vn=w[7]|0,Ue=vn&8191,$e=vn>>>13,xn=w[8]|0,Fe=xn&8191,qe=xn>>>13,Vr=w[9]|0,st=Vr&8191,at=Vr>>>13;x.negative=c.negative^p.negative,x.length=19,R=Math.imul(k,we),v=Math.imul(k,be),v=v+Math.imul(z,we)|0,T=Math.imul(z,be);var Tr=(S+R|0)+((v&8191)<<13)|0;S=(T+(v>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,R=Math.imul(N,we),v=Math.imul(N,be),v=v+Math.imul(P,we)|0,T=Math.imul(P,be),R=R+Math.imul(k,Se)|0,v=v+Math.imul(k,Me)|0,v=v+Math.imul(z,Se)|0,T=T+Math.imul(z,Me)|0;var Mr=(S+R|0)+((v&8191)<<13)|0;S=(T+(v>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,R=Math.imul(J,we),v=Math.imul(J,be),v=v+Math.imul(Q,we)|0,T=Math.imul(Q,be),R=R+Math.imul(N,Se)|0,v=v+Math.imul(N,Me)|0,v=v+Math.imul(P,Se)|0,T=T+Math.imul(P,Me)|0,R=R+Math.imul(k,ke)|0,v=v+Math.imul(k,Ce)|0,v=v+Math.imul(z,ke)|0,T=T+Math.imul(z,Ce)|0;var kr=(S+R|0)+((v&8191)<<13)|0;S=(T+(v>>>13)|0)+(kr>>>26)|0,kr&=67108863,R=Math.imul(oe,we),v=Math.imul(oe,be),v=v+Math.imul(W,we)|0,T=Math.imul(W,be),R=R+Math.imul(J,Se)|0,v=v+Math.imul(J,Me)|0,v=v+Math.imul(Q,Se)|0,T=T+Math.imul(Q,Me)|0,R=R+Math.imul(N,ke)|0,v=v+Math.imul(N,Ce)|0,v=v+Math.imul(P,ke)|0,T=T+Math.imul(P,Ce)|0,R=R+Math.imul(k,Oe)|0,v=v+Math.imul(k,De)|0,v=v+Math.imul(z,Oe)|0,T=T+Math.imul(z,De)|0;var Cr=(S+R|0)+((v&8191)<<13)|0;S=(T+(v>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,R=Math.imul(Z,we),v=Math.imul(Z,be),v=v+Math.imul(se,we)|0,T=Math.imul(se,be),R=R+Math.imul(oe,Se)|0,v=v+Math.imul(oe,Me)|0,v=v+Math.imul(W,Se)|0,T=T+Math.imul(W,Me)|0,R=R+Math.imul(J,ke)|0,v=v+Math.imul(J,Ce)|0,v=v+Math.imul(Q,ke)|0,T=T+Math.imul(Q,Ce)|0,R=R+Math.imul(N,Oe)|0,v=v+Math.imul(N,De)|0,v=v+Math.imul(P,Oe)|0,T=T+Math.imul(P,De)|0,R=R+Math.imul(k,Re)|0,v=v+Math.imul(k,Ie)|0,v=v+Math.imul(z,Re)|0,T=T+Math.imul(z,Ie)|0;var Or=(S+R|0)+((v&8191)<<13)|0;S=(T+(v>>>13)|0)+(Or>>>26)|0,Or&=67108863,R=Math.imul(ne,we),v=Math.imul(ne,be),v=v+Math.imul(pe,we)|0,T=Math.imul(pe,be),R=R+Math.imul(Z,Se)|0,v=v+Math.imul(Z,Me)|0,v=v+Math.imul(se,Se)|0,T=T+Math.imul(se,Me)|0,R=R+Math.imul(oe,ke)|0,v=v+Math.imul(oe,Ce)|0,v=v+Math.imul(W,ke)|0,T=T+Math.imul(W,Ce)|0,R=R+Math.imul(J,Oe)|0,v=v+Math.imul(J,De)|0,v=v+Math.imul(Q,Oe)|0,T=T+Math.imul(Q,De)|0,R=R+Math.imul(N,Re)|0,v=v+Math.imul(N,Ie)|0,v=v+Math.imul(P,Re)|0,T=T+Math.imul(P,Ie)|0,R=R+Math.imul(k,Ne)|0,v=v+Math.imul(k,Pe)|0,v=v+Math.imul(z,Ne)|0,T=T+Math.imul(z,Pe)|0;var no=(S+R|0)+((v&8191)<<13)|0;S=(T+(v>>>13)|0)+(no>>>26)|0,no&=67108863,R=Math.imul(ve,we),v=Math.imul(ve,be),v=v+Math.imul(Ae,we)|0,T=Math.imul(Ae,be),R=R+Math.imul(ne,Se)|0,v=v+Math.imul(ne,Me)|0,v=v+Math.imul(pe,Se)|0,T=T+Math.imul(pe,Me)|0,R=R+Math.imul(Z,ke)|0,v=v+Math.imul(Z,Ce)|0,v=v+Math.imul(se,ke)|0,T=T+Math.imul(se,Ce)|0,R=R+Math.imul(oe,Oe)|0,v=v+Math.imul(oe,De)|0,v=v+Math.imul(W,Oe)|0,T=T+Math.imul(W,De)|0,R=R+Math.imul(J,Re)|0,v=v+Math.imul(J,Ie)|0,v=v+Math.imul(Q,Re)|0,T=T+Math.imul(Q,Ie)|0,R=R+Math.imul(N,Ne)|0,v=v+Math.imul(N,Pe)|0,v=v+Math.imul(P,Ne)|0,T=T+Math.imul(P,Pe)|0,R=R+Math.imul(k,Le)|0,v=v+Math.imul(k,Be)|0,v=v+Math.imul(z,Le)|0,T=T+Math.imul(z,Be)|0;var io=(S+R|0)+((v&8191)<<13)|0;S=(T+(v>>>13)|0)+(io>>>26)|0,io&=67108863,R=Math.imul(ee,we),v=Math.imul(ee,be),v=v+Math.imul(V,we)|0,T=Math.imul(V,be),R=R+Math.imul(ve,Se)|0,v=v+Math.imul(ve,Me)|0,v=v+Math.imul(Ae,Se)|0,T=T+Math.imul(Ae,Me)|0,R=R+Math.imul(ne,ke)|0,v=v+Math.imul(ne,Ce)|0,v=v+Math.imul(pe,ke)|0,T=T+Math.imul(pe,Ce)|0,R=R+Math.imul(Z,Oe)|0,v=v+Math.imul(Z,De)|0,v=v+Math.imul(se,Oe)|0,T=T+Math.imul(se,De)|0,R=R+Math.imul(oe,Re)|0,v=v+Math.imul(oe,Ie)|0,v=v+Math.imul(W,Re)|0,T=T+Math.imul(W,Ie)|0,R=R+Math.imul(J,Ne)|0,v=v+Math.imul(J,Pe)|0,v=v+Math.imul(Q,Ne)|0,T=T+Math.imul(Q,Pe)|0,R=R+Math.imul(N,Le)|0,v=v+Math.imul(N,Be)|0,v=v+Math.imul(P,Le)|0,T=T+Math.imul(P,Be)|0,R=R+Math.imul(k,Ue)|0,v=v+Math.imul(k,$e)|0,v=v+Math.imul(z,Ue)|0,T=T+Math.imul(z,$e)|0;var oo=(S+R|0)+((v&8191)<<13)|0;S=(T+(v>>>13)|0)+(oo>>>26)|0,oo&=67108863,R=Math.imul(H,we),v=Math.imul(H,be),v=v+Math.imul(ie,we)|0,T=Math.imul(ie,be),R=R+Math.imul(ee,Se)|0,v=v+Math.imul(ee,Me)|0,v=v+Math.imul(V,Se)|0,T=T+Math.imul(V,Me)|0,R=R+Math.imul(ve,ke)|0,v=v+Math.imul(ve,Ce)|0,v=v+Math.imul(Ae,ke)|0,T=T+Math.imul(Ae,Ce)|0,R=R+Math.imul(ne,Oe)|0,v=v+Math.imul(ne,De)|0,v=v+Math.imul(pe,Oe)|0,T=T+Math.imul(pe,De)|0,R=R+Math.imul(Z,Re)|0,v=v+Math.imul(Z,Ie)|0,v=v+Math.imul(se,Re)|0,T=T+Math.imul(se,Ie)|0,R=R+Math.imul(oe,Ne)|0,v=v+Math.imul(oe,Pe)|0,v=v+Math.imul(W,Ne)|0,T=T+Math.imul(W,Pe)|0,R=R+Math.imul(J,Le)|0,v=v+Math.imul(J,Be)|0,v=v+Math.imul(Q,Le)|0,T=T+Math.imul(Q,Be)|0,R=R+Math.imul(N,Ue)|0,v=v+Math.imul(N,$e)|0,v=v+Math.imul(P,Ue)|0,T=T+Math.imul(P,$e)|0,R=R+Math.imul(k,Fe)|0,v=v+Math.imul(k,qe)|0,v=v+Math.imul(z,Fe)|0,T=T+Math.imul(z,qe)|0;var so=(S+R|0)+((v&8191)<<13)|0;S=(T+(v>>>13)|0)+(so>>>26)|0,so&=67108863,R=Math.imul(ce,we),v=Math.imul(ce,be),v=v+Math.imul(me,we)|0,T=Math.imul(me,be),R=R+Math.imul(H,Se)|0,v=v+Math.imul(H,Me)|0,v=v+Math.imul(ie,Se)|0,T=T+Math.imul(ie,Me)|0,R=R+Math.imul(ee,ke)|0,v=v+Math.imul(ee,Ce)|0,v=v+Math.imul(V,ke)|0,T=T+Math.imul(V,Ce)|0,R=R+Math.imul(ve,Oe)|0,v=v+Math.imul(ve,De)|0,v=v+Math.imul(Ae,Oe)|0,T=T+Math.imul(Ae,De)|0,R=R+Math.imul(ne,Re)|0,v=v+Math.imul(ne,Ie)|0,v=v+Math.imul(pe,Re)|0,T=T+Math.imul(pe,Ie)|0,R=R+Math.imul(Z,Ne)|0,v=v+Math.imul(Z,Pe)|0,v=v+Math.imul(se,Ne)|0,T=T+Math.imul(se,Pe)|0,R=R+Math.imul(oe,Le)|0,v=v+Math.imul(oe,Be)|0,v=v+Math.imul(W,Le)|0,T=T+Math.imul(W,Be)|0,R=R+Math.imul(J,Ue)|0,v=v+Math.imul(J,$e)|0,v=v+Math.imul(Q,Ue)|0,T=T+Math.imul(Q,$e)|0,R=R+Math.imul(N,Fe)|0,v=v+Math.imul(N,qe)|0,v=v+Math.imul(P,Fe)|0,T=T+Math.imul(P,qe)|0,R=R+Math.imul(k,st)|0,v=v+Math.imul(k,at)|0,v=v+Math.imul(z,st)|0,T=T+Math.imul(z,at)|0;var ao=(S+R|0)+((v&8191)<<13)|0;S=(T+(v>>>13)|0)+(ao>>>26)|0,ao&=67108863,R=Math.imul(ce,Se),v=Math.imul(ce,Me),v=v+Math.imul(me,Se)|0,T=Math.imul(me,Me),R=R+Math.imul(H,ke)|0,v=v+Math.imul(H,Ce)|0,v=v+Math.imul(ie,ke)|0,T=T+Math.imul(ie,Ce)|0,R=R+Math.imul(ee,Oe)|0,v=v+Math.imul(ee,De)|0,v=v+Math.imul(V,Oe)|0,T=T+Math.imul(V,De)|0,R=R+Math.imul(ve,Re)|0,v=v+Math.imul(ve,Ie)|0,v=v+Math.imul(Ae,Re)|0,T=T+Math.imul(Ae,Ie)|0,R=R+Math.imul(ne,Ne)|0,v=v+Math.imul(ne,Pe)|0,v=v+Math.imul(pe,Ne)|0,T=T+Math.imul(pe,Pe)|0,R=R+Math.imul(Z,Le)|0,v=v+Math.imul(Z,Be)|0,v=v+Math.imul(se,Le)|0,T=T+Math.imul(se,Be)|0,R=R+Math.imul(oe,Ue)|0,v=v+Math.imul(oe,$e)|0,v=v+Math.imul(W,Ue)|0,T=T+Math.imul(W,$e)|0,R=R+Math.imul(J,Fe)|0,v=v+Math.imul(J,qe)|0,v=v+Math.imul(Q,Fe)|0,T=T+Math.imul(Q,qe)|0,R=R+Math.imul(N,st)|0,v=v+Math.imul(N,at)|0,v=v+Math.imul(P,st)|0,T=T+Math.imul(P,at)|0;var fo=(S+R|0)+((v&8191)<<13)|0;S=(T+(v>>>13)|0)+(fo>>>26)|0,fo&=67108863,R=Math.imul(ce,ke),v=Math.imul(ce,Ce),v=v+Math.imul(me,ke)|0,T=Math.imul(me,Ce),R=R+Math.imul(H,Oe)|0,v=v+Math.imul(H,De)|0,v=v+Math.imul(ie,Oe)|0,T=T+Math.imul(ie,De)|0,R=R+Math.imul(ee,Re)|0,v=v+Math.imul(ee,Ie)|0,v=v+Math.imul(V,Re)|0,T=T+Math.imul(V,Ie)|0,R=R+Math.imul(ve,Ne)|0,v=v+Math.imul(ve,Pe)|0,v=v+Math.imul(Ae,Ne)|0,T=T+Math.imul(Ae,Pe)|0,R=R+Math.imul(ne,Le)|0,v=v+Math.imul(ne,Be)|0,v=v+Math.imul(pe,Le)|0,T=T+Math.imul(pe,Be)|0,R=R+Math.imul(Z,Ue)|0,v=v+Math.imul(Z,$e)|0,v=v+Math.imul(se,Ue)|0,T=T+Math.imul(se,$e)|0,R=R+Math.imul(oe,Fe)|0,v=v+Math.imul(oe,qe)|0,v=v+Math.imul(W,Fe)|0,T=T+Math.imul(W,qe)|0,R=R+Math.imul(J,st)|0,v=v+Math.imul(J,at)|0,v=v+Math.imul(Q,st)|0,T=T+Math.imul(Q,at)|0;var co=(S+R|0)+((v&8191)<<13)|0;S=(T+(v>>>13)|0)+(co>>>26)|0,co&=67108863,R=Math.imul(ce,Oe),v=Math.imul(ce,De),v=v+Math.imul(me,Oe)|0,T=Math.imul(me,De),R=R+Math.imul(H,Re)|0,v=v+Math.imul(H,Ie)|0,v=v+Math.imul(ie,Re)|0,T=T+Math.imul(ie,Ie)|0,R=R+Math.imul(ee,Ne)|0,v=v+Math.imul(ee,Pe)|0,v=v+Math.imul(V,Ne)|0,T=T+Math.imul(V,Pe)|0,R=R+Math.imul(ve,Le)|0,v=v+Math.imul(ve,Be)|0,v=v+Math.imul(Ae,Le)|0,T=T+Math.imul(Ae,Be)|0,R=R+Math.imul(ne,Ue)|0,v=v+Math.imul(ne,$e)|0,v=v+Math.imul(pe,Ue)|0,T=T+Math.imul(pe,$e)|0,R=R+Math.imul(Z,Fe)|0,v=v+Math.imul(Z,qe)|0,v=v+Math.imul(se,Fe)|0,T=T+Math.imul(se,qe)|0,R=R+Math.imul(oe,st)|0,v=v+Math.imul(oe,at)|0,v=v+Math.imul(W,st)|0,T=T+Math.imul(W,at)|0;var uo=(S+R|0)+((v&8191)<<13)|0;S=(T+(v>>>13)|0)+(uo>>>26)|0,uo&=67108863,R=Math.imul(ce,Re),v=Math.imul(ce,Ie),v=v+Math.imul(me,Re)|0,T=Math.imul(me,Ie),R=R+Math.imul(H,Ne)|0,v=v+Math.imul(H,Pe)|0,v=v+Math.imul(ie,Ne)|0,T=T+Math.imul(ie,Pe)|0,R=R+Math.imul(ee,Le)|0,v=v+Math.imul(ee,Be)|0,v=v+Math.imul(V,Le)|0,T=T+Math.imul(V,Be)|0,R=R+Math.imul(ve,Ue)|0,v=v+Math.imul(ve,$e)|0,v=v+Math.imul(Ae,Ue)|0,T=T+Math.imul(Ae,$e)|0,R=R+Math.imul(ne,Fe)|0,v=v+Math.imul(ne,qe)|0,v=v+Math.imul(pe,Fe)|0,T=T+Math.imul(pe,qe)|0,R=R+Math.imul(Z,st)|0,v=v+Math.imul(Z,at)|0,v=v+Math.imul(se,st)|0,T=T+Math.imul(se,at)|0;var lo=(S+R|0)+((v&8191)<<13)|0;S=(T+(v>>>13)|0)+(lo>>>26)|0,lo&=67108863,R=Math.imul(ce,Ne),v=Math.imul(ce,Pe),v=v+Math.imul(me,Ne)|0,T=Math.imul(me,Pe),R=R+Math.imul(H,Le)|0,v=v+Math.imul(H,Be)|0,v=v+Math.imul(ie,Le)|0,T=T+Math.imul(ie,Be)|0,R=R+Math.imul(ee,Ue)|0,v=v+Math.imul(ee,$e)|0,v=v+Math.imul(V,Ue)|0,T=T+Math.imul(V,$e)|0,R=R+Math.imul(ve,Fe)|0,v=v+Math.imul(ve,qe)|0,v=v+Math.imul(Ae,Fe)|0,T=T+Math.imul(Ae,qe)|0,R=R+Math.imul(ne,st)|0,v=v+Math.imul(ne,at)|0,v=v+Math.imul(pe,st)|0,T=T+Math.imul(pe,at)|0;var ho=(S+R|0)+((v&8191)<<13)|0;S=(T+(v>>>13)|0)+(ho>>>26)|0,ho&=67108863,R=Math.imul(ce,Le),v=Math.imul(ce,Be),v=v+Math.imul(me,Le)|0,T=Math.imul(me,Be),R=R+Math.imul(H,Ue)|0,v=v+Math.imul(H,$e)|0,v=v+Math.imul(ie,Ue)|0,T=T+Math.imul(ie,$e)|0,R=R+Math.imul(ee,Fe)|0,v=v+Math.imul(ee,qe)|0,v=v+Math.imul(V,Fe)|0,T=T+Math.imul(V,qe)|0,R=R+Math.imul(ve,st)|0,v=v+Math.imul(ve,at)|0,v=v+Math.imul(Ae,st)|0,T=T+Math.imul(Ae,at)|0;var po=(S+R|0)+((v&8191)<<13)|0;S=(T+(v>>>13)|0)+(po>>>26)|0,po&=67108863,R=Math.imul(ce,Ue),v=Math.imul(ce,$e),v=v+Math.imul(me,Ue)|0,T=Math.imul(me,$e),R=R+Math.imul(H,Fe)|0,v=v+Math.imul(H,qe)|0,v=v+Math.imul(ie,Fe)|0,T=T+Math.imul(ie,qe)|0,R=R+Math.imul(ee,st)|0,v=v+Math.imul(ee,at)|0,v=v+Math.imul(V,st)|0,T=T+Math.imul(V,at)|0;var yh=(S+R|0)+((v&8191)<<13)|0;S=(T+(v>>>13)|0)+(yh>>>26)|0,yh&=67108863,R=Math.imul(ce,Fe),v=Math.imul(ce,qe),v=v+Math.imul(me,Fe)|0,T=Math.imul(me,qe),R=R+Math.imul(H,st)|0,v=v+Math.imul(H,at)|0,v=v+Math.imul(ie,st)|0,T=T+Math.imul(ie,at)|0;var vh=(S+R|0)+((v&8191)<<13)|0;S=(T+(v>>>13)|0)+(vh>>>26)|0,vh&=67108863,R=Math.imul(ce,st),v=Math.imul(ce,at),v=v+Math.imul(me,st)|0,T=Math.imul(me,at);var xh=(S+R|0)+((v&8191)<<13)|0;return S=(T+(v>>>13)|0)+(xh>>>26)|0,xh&=67108863,b[0]=Tr,b[1]=Mr,b[2]=kr,b[3]=Cr,b[4]=Or,b[5]=no,b[6]=io,b[7]=oo,b[8]=so,b[9]=ao,b[10]=fo,b[11]=co,b[12]=uo,b[13]=lo,b[14]=ho,b[15]=po,b[16]=yh,b[17]=vh,b[18]=xh,S!==0&&(b[19]=S,x.length++),x};Math.imul||(D=F);function $(m,c,p){p.negative=c.negative^m.negative,p.length=m.length+c.length;for(var x=0,E=0,w=0;w<p.length-1;w++){var b=E;E=0;for(var S=x&67108863,R=Math.min(w,c.length-1),v=Math.max(0,w-m.length+1);v<=R;v++){var T=w-v,re=m.words[T]|0,k=c.words[v]|0,z=re*k,Y=z&67108863;b=b+(z/67108864|0)|0,Y=Y+S|0,S=Y&67108863,b=b+(Y>>>26)|0,E+=b>>>26,b&=67108863}p.words[w]=S,x=b,b=E}return x!==0?p.words[w]=x:p.length--,p._strip()}function K(m,c,p){return $(m,c,p)}o.prototype.mulTo=function(c,p){var x,E=this.length+c.length;return this.length===10&&c.length===10?x=D(this,c,p):E<63?x=F(this,c,p):E<1024?x=$(this,c,p):x=K(this,c,p),x};function j(m,c){this.x=m,this.y=c}j.prototype.makeRBT=function(c){for(var p=new Array(c),x=o.prototype._countBits(c)-1,E=0;E<c;E++)p[E]=this.revBin(E,x,c);return p},j.prototype.revBin=function(c,p,x){if(c===0||c===x-1)return c;for(var E=0,w=0;w<p;w++)E|=(c&1)<<p-w-1,c>>=1;return E},j.prototype.permute=function(c,p,x,E,w,b){for(var S=0;S<b;S++)E[S]=p[c[S]],w[S]=x[c[S]]},j.prototype.transform=function(c,p,x,E,w,b){this.permute(b,c,p,x,E,w);for(var S=1;S<w;S<<=1)for(var R=S<<1,v=Math.cos(2*Math.PI/R),T=Math.sin(2*Math.PI/R),re=0;re<w;re+=R)for(var k=v,z=T,Y=0;Y<S;Y++){var N=x[re+Y],P=E[re+Y],G=x[re+Y+S],J=E[re+Y+S],Q=k*G-z*J;J=k*J+z*G,G=Q,x[re+Y]=N+G,E[re+Y]=P+J,x[re+Y+S]=N-G,E[re+Y+S]=P-J,Y!==R&&(Q=v*k-T*z,z=v*z+T*k,k=Q)}},j.prototype.guessLen13b=function(c,p){var x=Math.max(p,c)|1,E=x&1,w=0;for(x=x/2|0;x;x=x>>>1)w++;return 1<<w+1+E},j.prototype.conjugate=function(c,p,x){if(!(x<=1))for(var E=0;E<x/2;E++){var w=c[E];c[E]=c[x-E-1],c[x-E-1]=w,w=p[E],p[E]=-p[x-E-1],p[x-E-1]=-w}},j.prototype.normalize13b=function(c,p){for(var x=0,E=0;E<p/2;E++){var w=Math.round(c[2*E+1]/p)*8192+Math.round(c[2*E]/p)+x;c[E]=w&67108863,w<67108864?x=0:x=w/67108864|0}return c},j.prototype.convert13b=function(c,p,x,E){for(var w=0,b=0;b<p;b++)w=w+(c[b]|0),x[2*b]=w&8191,w=w>>>13,x[2*b+1]=w&8191,w=w>>>13;for(b=2*p;b<E;++b)x[b]=0;r(w===0),r((w&-8192)===0)},j.prototype.stub=function(c){for(var p=new Array(c),x=0;x<c;x++)p[x]=0;return p},j.prototype.mulp=function(c,p,x){var E=2*this.guessLen13b(c.length,p.length),w=this.makeRBT(E),b=this.stub(E),S=new Array(E),R=new Array(E),v=new Array(E),T=new Array(E),re=new Array(E),k=new Array(E),z=x.words;z.length=E,this.convert13b(c.words,c.length,S,E),this.convert13b(p.words,p.length,T,E),this.transform(S,b,R,v,E,w),this.transform(T,b,re,k,E,w);for(var Y=0;Y<E;Y++){var N=R[Y]*re[Y]-v[Y]*k[Y];v[Y]=R[Y]*k[Y]+v[Y]*re[Y],R[Y]=N}return this.conjugate(R,v,E),this.transform(R,v,z,b,E,w),this.conjugate(z,b,E),this.normalize13b(z,E),x.negative=c.negative^p.negative,x.length=c.length+p.length,x._strip()},o.prototype.mul=function(c){var p=new o(null);return p.words=new Array(this.length+c.length),this.mulTo(c,p)},o.prototype.mulf=function(c){var p=new o(null);return p.words=new Array(this.length+c.length),K(this,c,p)},o.prototype.imul=function(c){return this.clone().mulTo(c,this)},o.prototype.imuln=function(c){var p=c<0;p&&(c=-c),r(typeof c=="number"),r(c<67108864);for(var x=0,E=0;E<this.length;E++){var w=(this.words[E]|0)*c,b=(w&67108863)+(x&67108863);x>>=26,x+=w/67108864|0,x+=b>>>26,this.words[E]=b&67108863}return x!==0&&(this.words[E]=x,this.length++),p?this.ineg():this},o.prototype.muln=function(c){return this.clone().imuln(c)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(c){var p=M(c);if(p.length===0)return new o(1);for(var x=this,E=0;E<p.length&&p[E]===0;E++,x=x.sqr());if(++E<p.length)for(var w=x.sqr();E<p.length;E++,w=w.sqr())p[E]!==0&&(x=x.mul(w));return x},o.prototype.iushln=function(c){r(typeof c=="number"&&c>=0);var p=c%26,x=(c-p)/26,E=67108863>>>26-p<<26-p,w;if(p!==0){var b=0;for(w=0;w<this.length;w++){var S=this.words[w]&E,R=(this.words[w]|0)-S<<p;this.words[w]=R|b,b=S>>>26-p}b&&(this.words[w]=b,this.length++)}if(x!==0){for(w=this.length-1;w>=0;w--)this.words[w+x]=this.words[w];for(w=0;w<x;w++)this.words[w]=0;this.length+=x}return this._strip()},o.prototype.ishln=function(c){return r(this.negative===0),this.iushln(c)},o.prototype.iushrn=function(c,p,x){r(typeof c=="number"&&c>=0);var E;p?E=(p-p%26)/26:E=0;var w=c%26,b=Math.min((c-w)/26,this.length),S=67108863^67108863>>>w<<w,R=x;if(E-=b,E=Math.max(0,E),R){for(var v=0;v<b;v++)R.words[v]=this.words[v];R.length=b}if(b!==0)if(this.length>b)for(this.length-=b,v=0;v<this.length;v++)this.words[v]=this.words[v+b];else this.words[0]=0,this.length=1;var T=0;for(v=this.length-1;v>=0&&(T!==0||v>=E);v--){var re=this.words[v]|0;this.words[v]=T<<26-w|re>>>w,T=re&S}return R&&T!==0&&(R.words[R.length++]=T),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(c,p,x){return r(this.negative===0),this.iushrn(c,p,x)},o.prototype.shln=function(c){return this.clone().ishln(c)},o.prototype.ushln=function(c){return this.clone().iushln(c)},o.prototype.shrn=function(c){return this.clone().ishrn(c)},o.prototype.ushrn=function(c){return this.clone().iushrn(c)},o.prototype.testn=function(c){r(typeof c=="number"&&c>=0);var p=c%26,x=(c-p)/26,E=1<<p;if(this.length<=x)return!1;var w=this.words[x];return!!(w&E)},o.prototype.imaskn=function(c){r(typeof c=="number"&&c>=0);var p=c%26,x=(c-p)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=x)return this;if(p!==0&&x++,this.length=Math.min(x,this.length),p!==0){var E=67108863^67108863>>>p<<p;this.words[this.length-1]&=E}return this._strip()},o.prototype.maskn=function(c){return this.clone().imaskn(c)},o.prototype.iaddn=function(c){return r(typeof c=="number"),r(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<=c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},o.prototype._iaddn=function(c){this.words[0]+=c;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},o.prototype.isubn=function(c){if(r(typeof c=="number"),r(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this._strip()},o.prototype.addn=function(c){return this.clone().iaddn(c)},o.prototype.subn=function(c){return this.clone().isubn(c)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(c,p,x){var E=c.length+x,w;this._expand(E);var b,S=0;for(w=0;w<c.length;w++){b=(this.words[w+x]|0)+S;var R=(c.words[w]|0)*p;b-=R&67108863,S=(b>>26)-(R/67108864|0),this.words[w+x]=b&67108863}for(;w<this.length-x;w++)b=(this.words[w+x]|0)+S,S=b>>26,this.words[w+x]=b&67108863;if(S===0)return this._strip();for(r(S===-1),S=0,w=0;w<this.length;w++)b=-(this.words[w]|0)+S,S=b>>26,this.words[w]=b&67108863;return this.negative=1,this._strip()},o.prototype._wordDiv=function(c,p){var x=this.length-c.length,E=this.clone(),w=c,b=w.words[w.length-1]|0,S=this._countBits(b);x=26-S,x!==0&&(w=w.ushln(x),E.iushln(x),b=w.words[w.length-1]|0);var R=E.length-w.length,v;if(p!=="mod"){v=new o(null),v.length=R+1,v.words=new Array(v.length);for(var T=0;T<v.length;T++)v.words[T]=0}var re=E.clone()._ishlnsubmul(w,1,R);re.negative===0&&(E=re,v&&(v.words[R]=1));for(var k=R-1;k>=0;k--){var z=(E.words[w.length+k]|0)*67108864+(E.words[w.length+k-1]|0);for(z=Math.min(z/b|0,67108863),E._ishlnsubmul(w,z,k);E.negative!==0;)z--,E.negative=0,E._ishlnsubmul(w,1,k),E.isZero()||(E.negative^=1);v&&(v.words[k]=z)}return v&&v._strip(),E._strip(),p!=="div"&&x!==0&&E.iushrn(x),{div:v||null,mod:E}},o.prototype.divmod=function(c,p,x){if(r(!c.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var E,w,b;return this.negative!==0&&c.negative===0?(b=this.neg().divmod(c,p),p!=="mod"&&(E=b.div.neg()),p!=="div"&&(w=b.mod.neg(),x&&w.negative!==0&&w.iadd(c)),{div:E,mod:w}):this.negative===0&&c.negative!==0?(b=this.divmod(c.neg(),p),p!=="mod"&&(E=b.div.neg()),{div:E,mod:b.mod}):this.negative&c.negative?(b=this.neg().divmod(c.neg(),p),p!=="div"&&(w=b.mod.neg(),x&&w.negative!==0&&w.isub(c)),{div:b.div,mod:w}):c.length>this.length||this.cmp(c)<0?{div:new o(0),mod:this}:c.length===1?p==="div"?{div:this.divn(c.words[0]),mod:null}:p==="mod"?{div:null,mod:new o(this.modrn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new o(this.modrn(c.words[0]))}:this._wordDiv(c,p)},o.prototype.div=function(c){return this.divmod(c,"div",!1).div},o.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},o.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},o.prototype.divRound=function(c){var p=this.divmod(c);if(p.mod.isZero())return p.div;var x=p.div.negative!==0?p.mod.isub(c):p.mod,E=c.ushrn(1),w=c.andln(1),b=x.cmp(E);return b<0||w===1&&b===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},o.prototype.modrn=function(c){var p=c<0;p&&(c=-c),r(c<=67108863);for(var x=(1<<26)%c,E=0,w=this.length-1;w>=0;w--)E=(x*E+(this.words[w]|0))%c;return p?-E:E},o.prototype.modn=function(c){return this.modrn(c)},o.prototype.idivn=function(c){var p=c<0;p&&(c=-c),r(c<=67108863);for(var x=0,E=this.length-1;E>=0;E--){var w=(this.words[E]|0)+x*67108864;this.words[E]=w/c|0,x=w%c}return this._strip(),p?this.ineg():this},o.prototype.divn=function(c){return this.clone().idivn(c)},o.prototype.egcd=function(c){r(c.negative===0),r(!c.isZero());var p=this,x=c.clone();p.negative!==0?p=p.umod(c):p=p.clone();for(var E=new o(1),w=new o(0),b=new o(0),S=new o(1),R=0;p.isEven()&&x.isEven();)p.iushrn(1),x.iushrn(1),++R;for(var v=x.clone(),T=p.clone();!p.isZero();){for(var re=0,k=1;!(p.words[0]&k)&&re<26;++re,k<<=1);if(re>0)for(p.iushrn(re);re-- >0;)(E.isOdd()||w.isOdd())&&(E.iadd(v),w.isub(T)),E.iushrn(1),w.iushrn(1);for(var z=0,Y=1;!(x.words[0]&Y)&&z<26;++z,Y<<=1);if(z>0)for(x.iushrn(z);z-- >0;)(b.isOdd()||S.isOdd())&&(b.iadd(v),S.isub(T)),b.iushrn(1),S.iushrn(1);p.cmp(x)>=0?(p.isub(x),E.isub(b),w.isub(S)):(x.isub(p),b.isub(E),S.isub(w))}return{a:b,b:S,gcd:x.iushln(R)}},o.prototype._invmp=function(c){r(c.negative===0),r(!c.isZero());var p=this,x=c.clone();p.negative!==0?p=p.umod(c):p=p.clone();for(var E=new o(1),w=new o(0),b=x.clone();p.cmpn(1)>0&&x.cmpn(1)>0;){for(var S=0,R=1;!(p.words[0]&R)&&S<26;++S,R<<=1);if(S>0)for(p.iushrn(S);S-- >0;)E.isOdd()&&E.iadd(b),E.iushrn(1);for(var v=0,T=1;!(x.words[0]&T)&&v<26;++v,T<<=1);if(v>0)for(x.iushrn(v);v-- >0;)w.isOdd()&&w.iadd(b),w.iushrn(1);p.cmp(x)>=0?(p.isub(x),E.isub(w)):(x.isub(p),w.isub(E))}var re;return p.cmpn(1)===0?re=E:re=w,re.cmpn(0)<0&&re.iadd(c),re},o.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var p=this.clone(),x=c.clone();p.negative=0,x.negative=0;for(var E=0;p.isEven()&&x.isEven();E++)p.iushrn(1),x.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;x.isEven();)x.iushrn(1);var w=p.cmp(x);if(w<0){var b=p;p=x,x=b}else if(w===0||x.cmpn(1)===0)break;p.isub(x)}while(!0);return x.iushln(E)},o.prototype.invm=function(c){return this.egcd(c).a.umod(c)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(c){return this.words[0]&c},o.prototype.bincn=function(c){r(typeof c=="number");var p=c%26,x=(c-p)/26,E=1<<p;if(this.length<=x)return this._expand(x+1),this.words[x]|=E,this;for(var w=E,b=x;w!==0&&b<this.length;b++){var S=this.words[b]|0;S+=w,w=S>>>26,S&=67108863,this.words[b]=S}return w!==0&&(this.words[b]=w,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(c){var p=c<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this._strip();var x;if(this.length>1)x=1;else{p&&(c=-c),r(c<=67108863,"Number is too big");var E=this.words[0]|0;x=E===c?0:E<c?-1:1}return this.negative!==0?-x|0:x},o.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var p=this.ucmp(c);return this.negative!==0?-p|0:p},o.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var p=0,x=this.length-1;x>=0;x--){var E=this.words[x]|0,w=c.words[x]|0;if(E!==w){E<w?p=-1:E>w&&(p=1);break}}return p},o.prototype.gtn=function(c){return this.cmpn(c)===1},o.prototype.gt=function(c){return this.cmp(c)===1},o.prototype.gten=function(c){return this.cmpn(c)>=0},o.prototype.gte=function(c){return this.cmp(c)>=0},o.prototype.ltn=function(c){return this.cmpn(c)===-1},o.prototype.lt=function(c){return this.cmp(c)===-1},o.prototype.lten=function(c){return this.cmpn(c)<=0},o.prototype.lte=function(c){return this.cmp(c)<=0},o.prototype.eqn=function(c){return this.cmpn(c)===0},o.prototype.eq=function(c){return this.cmp(c)===0},o.red=function(c){return new l(c)},o.prototype.toRed=function(c){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(c){return this.red=c,this},o.prototype.forceRed=function(c){return r(!this.red,"Already a number in reduction context"),this._forceRed(c)},o.prototype.redAdd=function(c){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},o.prototype.redIAdd=function(c){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},o.prototype.redSub=function(c){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},o.prototype.redISub=function(c){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},o.prototype.redShl=function(c){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},o.prototype.redMul=function(c){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},o.prototype.redIMul=function(c){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(c){return r(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var X={k256:null,p224:null,p192:null,p25519:null};function B(m,c){this.name=m,this.p=new o(c,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}B.prototype._tmp=function(){var c=new o(null);return c.words=new Array(Math.ceil(this.n/13)),c},B.prototype.ireduce=function(c){var p=c,x;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),x=p.bitLength();while(x>this.n);var E=x<this.n?-1:p.ucmp(this.p);return E===0?(p.words[0]=0,p.length=1):E>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},B.prototype.split=function(c,p){c.iushrn(this.n,0,p)},B.prototype.imulK=function(c){return c.imul(this.k)};function L(){B.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(L,B),L.prototype.split=function(c,p){for(var x=4194303,E=Math.min(c.length,9),w=0;w<E;w++)p.words[w]=c.words[w];if(p.length=E,c.length<=9){c.words[0]=0,c.length=1;return}var b=c.words[9];for(p.words[p.length++]=b&x,w=10;w<c.length;w++){var S=c.words[w]|0;c.words[w-10]=(S&x)<<4|b>>>22,b=S}b>>>=22,c.words[w-10]=b,b===0&&c.length>10?c.length-=10:c.length-=9},L.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var p=0,x=0;x<c.length;x++){var E=c.words[x]|0;p+=E*977,c.words[x]=p&67108863,p=E*64+(p/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function U(){B.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(U,B);function te(){B.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(te,B);function _(){B.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(_,B),_.prototype.imulK=function(c){for(var p=0,x=0;x<c.length;x++){var E=(c.words[x]|0)*19+p,w=E&67108863;E>>>=26,c.words[x]=w,p=E}return p!==0&&(c.words[c.length++]=p),c},o._prime=function(c){if(X[c])return X[c];var p;if(c==="k256")p=new L;else if(c==="p224")p=new U;else if(c==="p192")p=new te;else if(c==="p25519")p=new _;else throw new Error("Unknown prime "+c);return X[c]=p,p};function l(m){if(typeof m=="string"){var c=o._prime(m);this.m=c.p,this.prime=c}else r(m.gtn(1),"modulus must be greater than 1"),this.m=m,this.prime=null}l.prototype._verify1=function(c){r(c.negative===0,"red works only with positives"),r(c.red,"red works only with red numbers")},l.prototype._verify2=function(c,p){r((c.negative|p.negative)===0,"red works only with positives"),r(c.red&&c.red===p.red,"red works only with red numbers")},l.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):(d(c,c.umod(this.m)._forceRed(this)),c)},l.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},l.prototype.add=function(c,p){this._verify2(c,p);var x=c.add(p);return x.cmp(this.m)>=0&&x.isub(this.m),x._forceRed(this)},l.prototype.iadd=function(c,p){this._verify2(c,p);var x=c.iadd(p);return x.cmp(this.m)>=0&&x.isub(this.m),x},l.prototype.sub=function(c,p){this._verify2(c,p);var x=c.sub(p);return x.cmpn(0)<0&&x.iadd(this.m),x._forceRed(this)},l.prototype.isub=function(c,p){this._verify2(c,p);var x=c.isub(p);return x.cmpn(0)<0&&x.iadd(this.m),x},l.prototype.shl=function(c,p){return this._verify1(c),this.imod(c.ushln(p))},l.prototype.imul=function(c,p){return this._verify2(c,p),this.imod(c.imul(p))},l.prototype.mul=function(c,p){return this._verify2(c,p),this.imod(c.mul(p))},l.prototype.isqr=function(c){return this.imul(c,c.clone())},l.prototype.sqr=function(c){return this.mul(c,c)},l.prototype.sqrt=function(c){if(c.isZero())return c.clone();var p=this.m.andln(3);if(r(p%2===1),p===3){var x=this.m.add(new o(1)).iushrn(2);return this.pow(c,x)}for(var E=this.m.subn(1),w=0;!E.isZero()&&E.andln(1)===0;)w++,E.iushrn(1);r(!E.isZero());var b=new o(1).toRed(this),S=b.redNeg(),R=this.m.subn(1).iushrn(1),v=this.m.bitLength();for(v=new o(2*v*v).toRed(this);this.pow(v,R).cmp(S)!==0;)v.redIAdd(S);for(var T=this.pow(v,E),re=this.pow(c,E.addn(1).iushrn(1)),k=this.pow(c,E),z=w;k.cmp(b)!==0;){for(var Y=k,N=0;Y.cmp(b)!==0;N++)Y=Y.redSqr();r(N<z);var P=this.pow(T,new o(1).iushln(z-N-1));re=re.redMul(P),T=P.redSqr(),k=k.redMul(T),z=N}return re},l.prototype.invm=function(c){var p=c._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},l.prototype.pow=function(c,p){if(p.isZero())return new o(1).toRed(this);if(p.cmpn(1)===0)return c.clone();var x=4,E=new Array(1<<x);E[0]=new o(1).toRed(this),E[1]=c;for(var w=2;w<E.length;w++)E[w]=this.mul(E[w-1],c);var b=E[0],S=0,R=0,v=p.bitLength()%26;for(v===0&&(v=26),w=p.length-1;w>=0;w--){for(var T=p.words[w],re=v-1;re>=0;re--){var k=T>>re&1;if(b!==E[0]&&(b=this.sqr(b)),k===0&&S===0){R=0;continue}S<<=1,S|=k,R++,!(R!==x&&(w!==0||re!==0))&&(b=this.mul(b,E[S]),R=0,S=0)}v=26}return b},l.prototype.convertTo=function(c){var p=c.umod(this.m);return p===c?p.clone():p},l.prototype.convertFrom=function(c){var p=c.clone();return p.red=null,p},o.mont=function(c){return new g(c)};function g(m){l.call(this,m),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(g,l),g.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},g.prototype.convertFrom=function(c){var p=this.imod(c.mul(this.rinv));return p.red=null,p},g.prototype.imul=function(c,p){if(c.isZero()||p.isZero())return c.words[0]=0,c.length=1,c;var x=c.imul(p),E=x.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=x.isub(E).iushrn(this.shift),b=w;return w.cmp(this.m)>=0?b=w.isub(this.m):w.cmpn(0)<0&&(b=w.iadd(this.m)),b._forceRed(this)},g.prototype.mul=function(c,p){if(c.isZero()||p.isZero())return new o(0)._forceRed(this);var x=c.mul(p),E=x.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=x.isub(E).iushrn(this.shift),b=w;return w.cmp(this.m)>=0?b=w.isub(this.m):w.cmpn(0)<0&&(b=w.iadd(this.m)),b._forceRed(this)},g.prototype.invm=function(c){var p=this.imod(c._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(typeof D0>"u"||D0,tv)});var N0=de((oq,qu)=>{(function(){"use strict";var n="input is invalid type",t="finalize already called",r=typeof window=="object",i=r?window:{};i.JS_SHA3_NO_WINDOW&&(r=!1);var o=!r&&typeof self=="object",s=!i.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;s?i=global:o&&(i=self);var a=!i.JS_SHA3_NO_COMMON_JS&&typeof qu=="object"&&qu.exports,f=typeof define=="function"&&define.amd,u=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",d="0123456789abcdef".split(""),h=[31,7936,2031616,520093696],y=[4,1024,262144,67108864],C=[1,256,65536,16777216],O=[6,1536,393216,100663296],A=[0,8,16,24],M=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],F=[224,256,384,512],D=[128,256],$=["hex","buffer","arrayBuffer","array","digest"],K={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(k){return Object.prototype.toString.call(k)==="[object Array]"}),u&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(k){return typeof k=="object"&&k.buffer&&k.buffer.constructor===ArrayBuffer});for(var j=function(k,z,Y){return function(N){return new v(k,z,k).update(N)[Y]()}},X=function(k,z,Y){return function(N,P){return new v(k,z,P).update(N)[Y]()}},B=function(k,z,Y){return function(N,P,G,J){return c["cshake"+k].update(N,P,G,J)[Y]()}},L=function(k,z,Y){return function(N,P,G,J){return c["kmac"+k].update(N,P,G,J)[Y]()}},U=function(k,z,Y,N){for(var P=0;P<$.length;++P){var G=$[P];k[G]=z(Y,N,G)}return k},te=function(k,z){var Y=j(k,z,"hex");return Y.create=function(){return new v(k,z,k)},Y.update=function(N){return Y.create().update(N)},U(Y,j,k,z)},_=function(k,z){var Y=X(k,z,"hex");return Y.create=function(N){return new v(k,z,N)},Y.update=function(N,P){return Y.create(P).update(N)},U(Y,X,k,z)},l=function(k,z){var Y=K[k],N=B(k,z,"hex");return N.create=function(P,G,J){return!G&&!J?c["shake"+k].create(P):new v(k,z,P).bytepad([G,J],Y)},N.update=function(P,G,J,Q){return N.create(G,J,Q).update(P)},U(N,B,k,z)},g=function(k,z){var Y=K[k],N=L(k,z,"hex");return N.create=function(P,G,J){return new T(k,z,G).bytepad(["KMAC",J],Y).bytepad([P],Y)},N.update=function(P,G,J,Q){return N.create(P,J,Q).update(G)},U(N,L,k,z)},m=[{name:"keccak",padding:C,bits:F,createMethod:te},{name:"sha3",padding:O,bits:F,createMethod:te},{name:"shake",padding:h,bits:D,createMethod:_},{name:"cshake",padding:y,bits:D,createMethod:l},{name:"kmac",padding:y,bits:D,createMethod:g}],c={},p=[],x=0;x<m.length;++x)for(var E=m[x],w=E.bits,b=0;b<w.length;++b){var S=E.name+"_"+w[b];if(p.push(S),c[S]=E.createMethod(w[b],E.padding),E.name!=="sha3"){var R=E.name+w[b];p.push(R),c[R]=c[S]}}function v(k,z,Y){this.blocks=[],this.s=[],this.padding=z,this.outputBits=Y,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(k<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=Y>>5,this.extraBytes=(Y&31)>>3;for(var N=0;N<50;++N)this.s[N]=0}v.prototype.update=function(k){if(this.finalized)throw new Error(t);var z,Y=typeof k;if(Y!=="string"){if(Y==="object"){if(k===null)throw new Error(n);if(u&&k.constructor===ArrayBuffer)k=new Uint8Array(k);else if(!Array.isArray(k)&&(!u||!ArrayBuffer.isView(k)))throw new Error(n)}else throw new Error(n);z=!0}for(var N=this.blocks,P=this.byteCount,G=k.length,J=this.blockCount,Q=0,le=this.s,oe,W;Q<G;){if(this.reset)for(this.reset=!1,N[0]=this.block,oe=1;oe<J+1;++oe)N[oe]=0;if(z)for(oe=this.start;Q<G&&oe<P;++Q)N[oe>>2]|=k[Q]<<A[oe++&3];else for(oe=this.start;Q<G&&oe<P;++Q)W=k.charCodeAt(Q),W<128?N[oe>>2]|=W<<A[oe++&3]:W<2048?(N[oe>>2]|=(192|W>>6)<<A[oe++&3],N[oe>>2]|=(128|W&63)<<A[oe++&3]):W<55296||W>=57344?(N[oe>>2]|=(224|W>>12)<<A[oe++&3],N[oe>>2]|=(128|W>>6&63)<<A[oe++&3],N[oe>>2]|=(128|W&63)<<A[oe++&3]):(W=65536+((W&1023)<<10|k.charCodeAt(++Q)&1023),N[oe>>2]|=(240|W>>18)<<A[oe++&3],N[oe>>2]|=(128|W>>12&63)<<A[oe++&3],N[oe>>2]|=(128|W>>6&63)<<A[oe++&3],N[oe>>2]|=(128|W&63)<<A[oe++&3]);if(this.lastByteIndex=oe,oe>=P){for(this.start=oe-P,this.block=N[J],oe=0;oe<J;++oe)le[oe]^=N[oe];re(le),this.reset=!0}else this.start=oe}return this},v.prototype.encode=function(k,z){var Y=k&255,N=1,P=[Y];for(k=k>>8,Y=k&255;Y>0;)P.unshift(Y),k=k>>8,Y=k&255,++N;return z?P.push(N):P.unshift(N),this.update(P),P.length},v.prototype.encodeString=function(k){var z,Y=typeof k;if(Y!=="string"){if(Y==="object"){if(k===null)throw new Error(n);if(u&&k.constructor===ArrayBuffer)k=new Uint8Array(k);else if(!Array.isArray(k)&&(!u||!ArrayBuffer.isView(k)))throw new Error(n)}else throw new Error(n);z=!0}var N=0,P=k.length;if(z)N=P;else for(var G=0;G<k.length;++G){var J=k.charCodeAt(G);J<128?N+=1:J<2048?N+=2:J<55296||J>=57344?N+=3:(J=65536+((J&1023)<<10|k.charCodeAt(++G)&1023),N+=4)}return N+=this.encode(N*8),this.update(k),N},v.prototype.bytepad=function(k,z){for(var Y=this.encode(z),N=0;N<k.length;++N)Y+=this.encodeString(k[N]);var P=z-Y%z,G=[];return G.length=P,this.update(G),this},v.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var k=this.blocks,z=this.lastByteIndex,Y=this.blockCount,N=this.s;if(k[z>>2]|=this.padding[z&3],this.lastByteIndex===this.byteCount)for(k[0]=k[Y],z=1;z<Y+1;++z)k[z]=0;for(k[Y-1]|=2147483648,z=0;z<Y;++z)N[z]^=k[z];re(N)}},v.prototype.toString=v.prototype.hex=function(){this.finalize();for(var k=this.blockCount,z=this.s,Y=this.outputBlocks,N=this.extraBytes,P=0,G=0,J="",Q;G<Y;){for(P=0;P<k&&G<Y;++P,++G)Q=z[P],J+=d[Q>>4&15]+d[Q&15]+d[Q>>12&15]+d[Q>>8&15]+d[Q>>20&15]+d[Q>>16&15]+d[Q>>28&15]+d[Q>>24&15];G%k===0&&(re(z),P=0)}return N&&(Q=z[P],J+=d[Q>>4&15]+d[Q&15],N>1&&(J+=d[Q>>12&15]+d[Q>>8&15]),N>2&&(J+=d[Q>>20&15]+d[Q>>16&15])),J},v.prototype.arrayBuffer=function(){this.finalize();var k=this.blockCount,z=this.s,Y=this.outputBlocks,N=this.extraBytes,P=0,G=0,J=this.outputBits>>3,Q;N?Q=new ArrayBuffer(Y+1<<2):Q=new ArrayBuffer(J);for(var le=new Uint32Array(Q);G<Y;){for(P=0;P<k&&G<Y;++P,++G)le[G]=z[P];G%k===0&&re(z)}return N&&(le[P]=z[P],Q=Q.slice(0,J)),Q},v.prototype.buffer=v.prototype.arrayBuffer,v.prototype.digest=v.prototype.array=function(){this.finalize();for(var k=this.blockCount,z=this.s,Y=this.outputBlocks,N=this.extraBytes,P=0,G=0,J=[],Q,le;G<Y;){for(P=0;P<k&&G<Y;++P,++G)Q=G<<2,le=z[P],J[Q]=le&255,J[Q+1]=le>>8&255,J[Q+2]=le>>16&255,J[Q+3]=le>>24&255;G%k===0&&re(z)}return N&&(Q=G<<2,le=z[P],J[Q]=le&255,N>1&&(J[Q+1]=le>>8&255),N>2&&(J[Q+2]=le>>16&255)),J};function T(k,z,Y){v.call(this,k,z,Y)}T.prototype=new v,T.prototype.finalize=function(){return this.encode(this.outputBits,!0),v.prototype.finalize.call(this)};var re=function(k){var z,Y,N,P,G,J,Q,le,oe,W,he,Z,se,q,ne,pe,Ee,ve,Ae,tr,ee,V,I,H,ie,ae,ce,me,et,we,be,rt,Se,Me,pn,ke,Ce,mn,Oe,De,bn,Re,Ie,gn,Ne,Pe,yn,Le,Be,vn,Ue,$e,xn,Fe,qe,Vr,st,at,Tr,Mr,kr,Cr,Or;for(N=0;N<48;N+=2)P=k[0]^k[10]^k[20]^k[30]^k[40],G=k[1]^k[11]^k[21]^k[31]^k[41],J=k[2]^k[12]^k[22]^k[32]^k[42],Q=k[3]^k[13]^k[23]^k[33]^k[43],le=k[4]^k[14]^k[24]^k[34]^k[44],oe=k[5]^k[15]^k[25]^k[35]^k[45],W=k[6]^k[16]^k[26]^k[36]^k[46],he=k[7]^k[17]^k[27]^k[37]^k[47],Z=k[8]^k[18]^k[28]^k[38]^k[48],se=k[9]^k[19]^k[29]^k[39]^k[49],z=Z^(J<<1|Q>>>31),Y=se^(Q<<1|J>>>31),k[0]^=z,k[1]^=Y,k[10]^=z,k[11]^=Y,k[20]^=z,k[21]^=Y,k[30]^=z,k[31]^=Y,k[40]^=z,k[41]^=Y,z=P^(le<<1|oe>>>31),Y=G^(oe<<1|le>>>31),k[2]^=z,k[3]^=Y,k[12]^=z,k[13]^=Y,k[22]^=z,k[23]^=Y,k[32]^=z,k[33]^=Y,k[42]^=z,k[43]^=Y,z=J^(W<<1|he>>>31),Y=Q^(he<<1|W>>>31),k[4]^=z,k[5]^=Y,k[14]^=z,k[15]^=Y,k[24]^=z,k[25]^=Y,k[34]^=z,k[35]^=Y,k[44]^=z,k[45]^=Y,z=le^(Z<<1|se>>>31),Y=oe^(se<<1|Z>>>31),k[6]^=z,k[7]^=Y,k[16]^=z,k[17]^=Y,k[26]^=z,k[27]^=Y,k[36]^=z,k[37]^=Y,k[46]^=z,k[47]^=Y,z=W^(P<<1|G>>>31),Y=he^(G<<1|P>>>31),k[8]^=z,k[9]^=Y,k[18]^=z,k[19]^=Y,k[28]^=z,k[29]^=Y,k[38]^=z,k[39]^=Y,k[48]^=z,k[49]^=Y,q=k[0],ne=k[1],Pe=k[11]<<4|k[10]>>>28,yn=k[10]<<4|k[11]>>>28,me=k[20]<<3|k[21]>>>29,et=k[21]<<3|k[20]>>>29,Mr=k[31]<<9|k[30]>>>23,kr=k[30]<<9|k[31]>>>23,Re=k[40]<<18|k[41]>>>14,Ie=k[41]<<18|k[40]>>>14,Me=k[2]<<1|k[3]>>>31,pn=k[3]<<1|k[2]>>>31,pe=k[13]<<12|k[12]>>>20,Ee=k[12]<<12|k[13]>>>20,Le=k[22]<<10|k[23]>>>22,Be=k[23]<<10|k[22]>>>22,we=k[33]<<13|k[32]>>>19,be=k[32]<<13|k[33]>>>19,Cr=k[42]<<2|k[43]>>>30,Or=k[43]<<2|k[42]>>>30,Fe=k[5]<<30|k[4]>>>2,qe=k[4]<<30|k[5]>>>2,ke=k[14]<<6|k[15]>>>26,Ce=k[15]<<6|k[14]>>>26,ve=k[25]<<11|k[24]>>>21,Ae=k[24]<<11|k[25]>>>21,vn=k[34]<<15|k[35]>>>17,Ue=k[35]<<15|k[34]>>>17,rt=k[45]<<29|k[44]>>>3,Se=k[44]<<29|k[45]>>>3,H=k[6]<<28|k[7]>>>4,ie=k[7]<<28|k[6]>>>4,Vr=k[17]<<23|k[16]>>>9,st=k[16]<<23|k[17]>>>9,mn=k[26]<<25|k[27]>>>7,Oe=k[27]<<25|k[26]>>>7,tr=k[36]<<21|k[37]>>>11,ee=k[37]<<21|k[36]>>>11,$e=k[47]<<24|k[46]>>>8,xn=k[46]<<24|k[47]>>>8,gn=k[8]<<27|k[9]>>>5,Ne=k[9]<<27|k[8]>>>5,ae=k[18]<<20|k[19]>>>12,ce=k[19]<<20|k[18]>>>12,at=k[29]<<7|k[28]>>>25,Tr=k[28]<<7|k[29]>>>25,De=k[38]<<8|k[39]>>>24,bn=k[39]<<8|k[38]>>>24,V=k[48]<<14|k[49]>>>18,I=k[49]<<14|k[48]>>>18,k[0]=q^~pe&ve,k[1]=ne^~Ee&Ae,k[10]=H^~ae&me,k[11]=ie^~ce&et,k[20]=Me^~ke&mn,k[21]=pn^~Ce&Oe,k[30]=gn^~Pe&Le,k[31]=Ne^~yn&Be,k[40]=Fe^~Vr&at,k[41]=qe^~st&Tr,k[2]=pe^~ve&tr,k[3]=Ee^~Ae&ee,k[12]=ae^~me&we,k[13]=ce^~et&be,k[22]=ke^~mn&De,k[23]=Ce^~Oe&bn,k[32]=Pe^~Le&vn,k[33]=yn^~Be&Ue,k[42]=Vr^~at&Mr,k[43]=st^~Tr&kr,k[4]=ve^~tr&V,k[5]=Ae^~ee&I,k[14]=me^~we&rt,k[15]=et^~be&Se,k[24]=mn^~De&Re,k[25]=Oe^~bn&Ie,k[34]=Le^~vn&$e,k[35]=Be^~Ue&xn,k[44]=at^~Mr&Cr,k[45]=Tr^~kr&Or,k[6]=tr^~V&q,k[7]=ee^~I&ne,k[16]=we^~rt&H,k[17]=be^~Se&ie,k[26]=De^~Re&Me,k[27]=bn^~Ie&pn,k[36]=vn^~$e&gn,k[37]=Ue^~xn&Ne,k[46]=Mr^~Cr&Fe,k[47]=kr^~Or&qe,k[8]=V^~q&pe,k[9]=I^~ne&Ee,k[18]=rt^~H&ae,k[19]=Se^~ie&ce,k[28]=Re^~Me&ke,k[29]=Ie^~pn&Ce,k[38]=$e^~gn&Pe,k[39]=xn^~Ne&yn,k[48]=Cr^~Fe&Vr,k[49]=Or^~qe&st,k[0]^=M[N],k[1]^=M[N+1]};if(a)qu.exports=c;else{for(x=0;x<p.length;++x)i[p[x]]=c[p[x]];f&&define(function(){return c})}})()});var Pi=de((Bq,mv)=>{mv.exports=pv;function pv(n,t){if(!n)throw new Error(t||"Assertion failed")}pv.equal=function(t,r,i){if(t!=r)throw new Error(i||"Assertion failed: "+t+" != "+r)}});var _f=de((Uq,B0)=>{typeof Object.create=="function"?B0.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:B0.exports=function(t,r){if(r){t.super_=r;var i=function(){};i.prototype=r.prototype,t.prototype=new i,t.prototype.constructor=t}}});var fn=de(lt=>{"use strict";var zS=Pi(),KS=_f();lt.inherits=KS;function GS(n,t){return(n.charCodeAt(t)&64512)!==55296||t<0||t+1>=n.length?!1:(n.charCodeAt(t+1)&64512)===56320}function JS(n,t){if(Array.isArray(n))return n.slice();if(!n)return[];var r=[];if(typeof n=="string")if(t){if(t==="hex")for(n=n.replace(/[^a-z0-9]+/ig,""),n.length%2!==0&&(n="0"+n),o=0;o<n.length;o+=2)r.push(parseInt(n[o]+n[o+1],16))}else for(var i=0,o=0;o<n.length;o++){var s=n.charCodeAt(o);s<128?r[i++]=s:s<2048?(r[i++]=s>>6|192,r[i++]=s&63|128):GS(n,o)?(s=65536+((s&1023)<<10)+(n.charCodeAt(++o)&1023),r[i++]=s>>18|240,r[i++]=s>>12&63|128,r[i++]=s>>6&63|128,r[i++]=s&63|128):(r[i++]=s>>12|224,r[i++]=s>>6&63|128,r[i++]=s&63|128)}else for(o=0;o<n.length;o++)r[o]=n[o]|0;return r}lt.toArray=JS;function VS(n){for(var t="",r=0;r<n.length;r++)t+=gv(n[r].toString(16));return t}lt.toHex=VS;function bv(n){var t=n>>>24|n>>>8&65280|n<<8&16711680|(n&255)<<24;return t>>>0}lt.htonl=bv;function WS(n,t){for(var r="",i=0;i<n.length;i++){var o=n[i];t==="little"&&(o=bv(o)),r+=yv(o.toString(16))}return r}lt.toHex32=WS;function gv(n){return n.length===1?"0"+n:n}lt.zero2=gv;function yv(n){return n.length===7?"0"+n:n.length===6?"00"+n:n.length===5?"000"+n:n.length===4?"0000"+n:n.length===3?"00000"+n:n.length===2?"000000"+n:n.length===1?"0000000"+n:n}lt.zero8=yv;function YS(n,t,r,i){var o=r-t;zS(o%4===0);for(var s=new Array(o/4),a=0,f=t;a<s.length;a++,f+=4){var u;i==="big"?u=n[f]<<24|n[f+1]<<16|n[f+2]<<8|n[f+3]:u=n[f+3]<<24|n[f+2]<<16|n[f+1]<<8|n[f],s[a]=u>>>0}return s}lt.join32=YS;function XS(n,t){for(var r=new Array(n.length*4),i=0,o=0;i<n.length;i++,o+=4){var s=n[i];t==="big"?(r[o]=s>>>24,r[o+1]=s>>>16&255,r[o+2]=s>>>8&255,r[o+3]=s&255):(r[o+3]=s>>>24,r[o+2]=s>>>16&255,r[o+1]=s>>>8&255,r[o]=s&255)}return r}lt.split32=XS;function ZS(n,t){return n>>>t|n<<32-t}lt.rotr32=ZS;function QS(n,t){return n<<t|n>>>32-t}lt.rotl32=QS;function eA(n,t){return n+t>>>0}lt.sum32=eA;function tA(n,t,r){return n+t+r>>>0}lt.sum32_3=tA;function rA(n,t,r,i){return n+t+r+i>>>0}lt.sum32_4=rA;function nA(n,t,r,i,o){return n+t+r+i+o>>>0}lt.sum32_5=nA;function iA(n,t,r,i){var o=n[t],s=n[t+1],a=i+s>>>0,f=(a<i?1:0)+r+o;n[t]=f>>>0,n[t+1]=a}lt.sum64=iA;function oA(n,t,r,i){var o=t+i>>>0,s=(o<t?1:0)+n+r;return s>>>0}lt.sum64_hi=oA;function sA(n,t,r,i){var o=t+i;return o>>>0}lt.sum64_lo=sA;function aA(n,t,r,i,o,s,a,f){var u=0,d=t;d=d+i>>>0,u+=d<t?1:0,d=d+s>>>0,u+=d<s?1:0,d=d+f>>>0,u+=d<f?1:0;var h=n+r+o+a+u;return h>>>0}lt.sum64_4_hi=aA;function fA(n,t,r,i,o,s,a,f){var u=t+i+s+f;return u>>>0}lt.sum64_4_lo=fA;function cA(n,t,r,i,o,s,a,f,u,d){var h=0,y=t;y=y+i>>>0,h+=y<t?1:0,y=y+s>>>0,h+=y<s?1:0,y=y+f>>>0,h+=y<f?1:0,y=y+d>>>0,h+=y<d?1:0;var C=n+r+o+a+u+h;return C>>>0}lt.sum64_5_hi=cA;function uA(n,t,r,i,o,s,a,f,u,d){var h=t+i+s+f+d;return h>>>0}lt.sum64_5_lo=uA;function lA(n,t,r){var i=t<<32-r|n>>>r;return i>>>0}lt.rotr64_hi=lA;function hA(n,t,r){var i=n<<32-r|t>>>r;return i>>>0}lt.rotr64_lo=hA;function dA(n,t,r){return n>>>r}lt.shr64_hi=dA;function pA(n,t,r){var i=n<<32-r|t>>>r;return i>>>0}lt.shr64_lo=pA});var Ys=de(xv=>{"use strict";var vv=fn(),mA=Pi();function ju(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}xv.BlockHash=ju;ju.prototype.update=function(t,r){if(t=vv.toArray(t,r),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){t=this.pending;var i=t.length%this._delta8;this.pending=t.slice(t.length-i,t.length),this.pending.length===0&&(this.pending=null),t=vv.join32(t,0,t.length-i,this.endian);for(var o=0;o<t.length;o+=this._delta32)this._update(t,o,o+this._delta32)}return this};ju.prototype.digest=function(t){return this.update(this._pad()),mA(this.pending===null),this._digest(t)};ju.prototype._pad=function(){var t=this.pendingTotal,r=this._delta8,i=r-(t+this.padLength)%r,o=new Array(i+this.padLength);o[0]=128;for(var s=1;s<i;s++)o[s]=0;if(t<<=3,this.endian==="big"){for(var a=8;a<this.padLength;a++)o[s++]=0;o[s++]=0,o[s++]=0,o[s++]=0,o[s++]=0,o[s++]=t>>>24&255,o[s++]=t>>>16&255,o[s++]=t>>>8&255,o[s++]=t&255}else for(o[s++]=t&255,o[s++]=t>>>8&255,o[s++]=t>>>16&255,o[s++]=t>>>24&255,o[s++]=0,o[s++]=0,o[s++]=0,o[s++]=0,a=8;a<this.padLength;a++)o[s++]=0;return o}});var U0=de(oi=>{"use strict";var bA=fn(),Mn=bA.rotr32;function gA(n,t,r,i){if(n===0)return wv(t,r,i);if(n===1||n===3)return _v(t,r,i);if(n===2)return Ev(t,r,i)}oi.ft_1=gA;function wv(n,t,r){return n&t^~n&r}oi.ch32=wv;function Ev(n,t,r){return n&t^n&r^t&r}oi.maj32=Ev;function _v(n,t,r){return n^t^r}oi.p32=_v;function yA(n){return Mn(n,2)^Mn(n,13)^Mn(n,22)}oi.s0_256=yA;function vA(n){return Mn(n,6)^Mn(n,11)^Mn(n,25)}oi.s1_256=vA;function xA(n){return Mn(n,7)^Mn(n,18)^n>>>3}oi.g0_256=xA;function wA(n){return Mn(n,17)^Mn(n,19)^n>>>10}oi.g1_256=wA});var Tv=de((jq,Av)=>{"use strict";var Xs=fn(),EA=Ys(),_A=U0(),$0=Xs.rotl32,Sf=Xs.sum32,SA=Xs.sum32_5,AA=_A.ft_1,Sv=EA.BlockHash,TA=[1518500249,1859775393,2400959708,3395469782];function kn(){if(!(this instanceof kn))return new kn;Sv.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Xs.inherits(kn,Sv);Av.exports=kn;kn.blockSize=512;kn.outSize=160;kn.hmacStrength=80;kn.padLength=64;kn.prototype._update=function(t,r){for(var i=this.W,o=0;o<16;o++)i[o]=t[r+o];for(;o<i.length;o++)i[o]=$0(i[o-3]^i[o-8]^i[o-14]^i[o-16],1);var s=this.h[0],a=this.h[1],f=this.h[2],u=this.h[3],d=this.h[4];for(o=0;o<i.length;o++){var h=~~(o/20),y=SA($0(s,5),AA(h,a,f,u),d,i[o],TA[h]);d=u,u=f,f=$0(a,30),a=s,s=y}this.h[0]=Sf(this.h[0],s),this.h[1]=Sf(this.h[1],a),this.h[2]=Sf(this.h[2],f),this.h[3]=Sf(this.h[3],u),this.h[4]=Sf(this.h[4],d)};kn.prototype._digest=function(t){return t==="hex"?Xs.toHex32(this.h,"big"):Xs.split32(this.h,"big")}});var F0=de((Hq,kv)=>{"use strict";var Zs=fn(),MA=Ys(),Qs=U0(),kA=Pi(),cn=Zs.sum32,CA=Zs.sum32_4,OA=Zs.sum32_5,DA=Qs.ch32,RA=Qs.maj32,IA=Qs.s0_256,NA=Qs.s1_256,PA=Qs.g0_256,LA=Qs.g1_256,Mv=MA.BlockHash,BA=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Cn(){if(!(this instanceof Cn))return new Cn;Mv.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=BA,this.W=new Array(64)}Zs.inherits(Cn,Mv);kv.exports=Cn;Cn.blockSize=512;Cn.outSize=256;Cn.hmacStrength=192;Cn.padLength=64;Cn.prototype._update=function(t,r){for(var i=this.W,o=0;o<16;o++)i[o]=t[r+o];for(;o<i.length;o++)i[o]=CA(LA(i[o-2]),i[o-7],PA(i[o-15]),i[o-16]);var s=this.h[0],a=this.h[1],f=this.h[2],u=this.h[3],d=this.h[4],h=this.h[5],y=this.h[6],C=this.h[7];for(kA(this.k.length===i.length),o=0;o<i.length;o++){var O=OA(C,NA(d),DA(d,h,y),this.k[o],i[o]),A=cn(IA(s),RA(s,a,f));C=y,y=h,h=d,d=cn(u,O),u=f,f=a,a=s,s=cn(O,A)}this.h[0]=cn(this.h[0],s),this.h[1]=cn(this.h[1],a),this.h[2]=cn(this.h[2],f),this.h[3]=cn(this.h[3],u),this.h[4]=cn(this.h[4],d),this.h[5]=cn(this.h[5],h),this.h[6]=cn(this.h[6],y),this.h[7]=cn(this.h[7],C)};Cn.prototype._digest=function(t){return t==="hex"?Zs.toHex32(this.h,"big"):Zs.split32(this.h,"big")}});var Dv=de((zq,Ov)=>{"use strict";var q0=fn(),Cv=F0();function si(){if(!(this instanceof si))return new si;Cv.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}q0.inherits(si,Cv);Ov.exports=si;si.blockSize=512;si.outSize=224;si.hmacStrength=192;si.padLength=64;si.prototype._digest=function(t){return t==="hex"?q0.toHex32(this.h.slice(0,7),"big"):q0.split32(this.h.slice(0,7),"big")}});var z0=de((Kq,Pv)=>{"use strict";var cr=fn(),UA=Ys(),$A=Pi(),On=cr.rotr64_hi,Dn=cr.rotr64_lo,Rv=cr.shr64_hi,Iv=cr.shr64_lo,Li=cr.sum64,j0=cr.sum64_hi,H0=cr.sum64_lo,FA=cr.sum64_4_hi,qA=cr.sum64_4_lo,jA=cr.sum64_5_hi,HA=cr.sum64_5_lo,Nv=UA.BlockHash,zA=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function un(){if(!(this instanceof un))return new un;Nv.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=zA,this.W=new Array(160)}cr.inherits(un,Nv);Pv.exports=un;un.blockSize=1024;un.outSize=512;un.hmacStrength=192;un.padLength=128;un.prototype._prepareBlock=function(t,r){for(var i=this.W,o=0;o<32;o++)i[o]=t[r+o];for(;o<i.length;o+=2){var s=tT(i[o-4],i[o-3]),a=rT(i[o-4],i[o-3]),f=i[o-14],u=i[o-13],d=QA(i[o-30],i[o-29]),h=eT(i[o-30],i[o-29]),y=i[o-32],C=i[o-31];i[o]=FA(s,a,f,u,d,h,y,C),i[o+1]=qA(s,a,f,u,d,h,y,C)}};un.prototype._update=function(t,r){this._prepareBlock(t,r);var i=this.W,o=this.h[0],s=this.h[1],a=this.h[2],f=this.h[3],u=this.h[4],d=this.h[5],h=this.h[6],y=this.h[7],C=this.h[8],O=this.h[9],A=this.h[10],M=this.h[11],F=this.h[12],D=this.h[13],$=this.h[14],K=this.h[15];$A(this.k.length===i.length);for(var j=0;j<i.length;j+=2){var X=$,B=K,L=XA(C,O),U=ZA(C,O),te=KA(C,O,A,M,F,D),_=GA(C,O,A,M,F,D),l=this.k[j],g=this.k[j+1],m=i[j],c=i[j+1],p=jA(X,B,L,U,te,_,l,g,m,c),x=HA(X,B,L,U,te,_,l,g,m,c);X=WA(o,s),B=YA(o,s),L=JA(o,s,a,f,u,d),U=VA(o,s,a,f,u,d);var E=j0(X,B,L,U),w=H0(X,B,L,U);$=F,K=D,F=A,D=M,A=C,M=O,C=j0(h,y,p,x),O=H0(y,y,p,x),h=u,y=d,u=a,d=f,a=o,f=s,o=j0(p,x,E,w),s=H0(p,x,E,w)}Li(this.h,0,o,s),Li(this.h,2,a,f),Li(this.h,4,u,d),Li(this.h,6,h,y),Li(this.h,8,C,O),Li(this.h,10,A,M),Li(this.h,12,F,D),Li(this.h,14,$,K)};un.prototype._digest=function(t){return t==="hex"?cr.toHex32(this.h,"big"):cr.split32(this.h,"big")};function KA(n,t,r,i,o){var s=n&r^~n&o;return s<0&&(s+=4294967296),s}function GA(n,t,r,i,o,s){var a=t&i^~t&s;return a<0&&(a+=4294967296),a}function JA(n,t,r,i,o){var s=n&r^n&o^r&o;return s<0&&(s+=4294967296),s}function VA(n,t,r,i,o,s){var a=t&i^t&s^i&s;return a<0&&(a+=4294967296),a}function WA(n,t){var r=On(n,t,28),i=On(t,n,2),o=On(t,n,7),s=r^i^o;return s<0&&(s+=4294967296),s}function YA(n,t){var r=Dn(n,t,28),i=Dn(t,n,2),o=Dn(t,n,7),s=r^i^o;return s<0&&(s+=4294967296),s}function XA(n,t){var r=On(n,t,14),i=On(n,t,18),o=On(t,n,9),s=r^i^o;return s<0&&(s+=4294967296),s}function ZA(n,t){var r=Dn(n,t,14),i=Dn(n,t,18),o=Dn(t,n,9),s=r^i^o;return s<0&&(s+=4294967296),s}function QA(n,t){var r=On(n,t,1),i=On(n,t,8),o=Rv(n,t,7),s=r^i^o;return s<0&&(s+=4294967296),s}function eT(n,t){var r=Dn(n,t,1),i=Dn(n,t,8),o=Iv(n,t,7),s=r^i^o;return s<0&&(s+=4294967296),s}function tT(n,t){var r=On(n,t,19),i=On(t,n,29),o=Rv(n,t,6),s=r^i^o;return s<0&&(s+=4294967296),s}function rT(n,t){var r=Dn(n,t,19),i=Dn(t,n,29),o=Iv(n,t,6),s=r^i^o;return s<0&&(s+=4294967296),s}});var Uv=de((Gq,Bv)=>{"use strict";var K0=fn(),Lv=z0();function ai(){if(!(this instanceof ai))return new ai;Lv.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}K0.inherits(ai,Lv);Bv.exports=ai;ai.blockSize=1024;ai.outSize=384;ai.hmacStrength=192;ai.padLength=128;ai.prototype._digest=function(t){return t==="hex"?K0.toHex32(this.h.slice(0,12),"big"):K0.split32(this.h.slice(0,12),"big")}});var $v=de(ea=>{"use strict";ea.sha1=Tv();ea.sha224=Dv();ea.sha256=F0();ea.sha384=Uv();ea.sha512=z0()});var Kv=de(zv=>{"use strict";var jo=fn(),nT=Ys(),Hu=jo.rotl32,Fv=jo.sum32,Af=jo.sum32_3,qv=jo.sum32_4,Hv=nT.BlockHash;function Rn(){if(!(this instanceof Rn))return new Rn;Hv.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}jo.inherits(Rn,Hv);zv.ripemd160=Rn;Rn.blockSize=512;Rn.outSize=160;Rn.hmacStrength=192;Rn.padLength=64;Rn.prototype._update=function(t,r){for(var i=this.h[0],o=this.h[1],s=this.h[2],a=this.h[3],f=this.h[4],u=i,d=o,h=s,y=a,C=f,O=0;O<80;O++){var A=Fv(Hu(qv(i,jv(O,o,s,a),t[sT[O]+r],iT(O)),fT[O]),f);i=f,f=a,a=Hu(s,10),s=o,o=A,A=Fv(Hu(qv(u,jv(79-O,d,h,y),t[aT[O]+r],oT(O)),cT[O]),C),u=C,C=y,y=Hu(h,10),h=d,d=A}A=Af(this.h[1],s,y),this.h[1]=Af(this.h[2],a,C),this.h[2]=Af(this.h[3],f,u),this.h[3]=Af(this.h[4],i,d),this.h[4]=Af(this.h[0],o,h),this.h[0]=A};Rn.prototype._digest=function(t){return t==="hex"?jo.toHex32(this.h,"little"):jo.split32(this.h,"little")};function jv(n,t,r,i){return n<=15?t^r^i:n<=31?t&r|~t&i:n<=47?(t|~r)^i:n<=63?t&i|r&~i:t^(r|~i)}function iT(n){return n<=15?0:n<=31?1518500249:n<=47?1859775393:n<=63?2400959708:2840853838}function oT(n){return n<=15?1352829926:n<=31?1548603684:n<=47?1836072691:n<=63?2053994217:0}var sT=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],aT=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],fT=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],cT=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]});var Jv=de((Wq,Gv)=>{"use strict";var uT=fn(),lT=Pi();function ta(n,t,r){if(!(this instanceof ta))return new ta(n,t,r);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(uT.toArray(t,r))}Gv.exports=ta;ta.prototype._init=function(t){t.length>this.blockSize&&(t=new this.Hash().update(t).digest()),lT(t.length<=this.blockSize);for(var r=t.length;r<this.blockSize;r++)t.push(0);for(r=0;r<t.length;r++)t[r]^=54;for(this.inner=new this.Hash().update(t),r=0;r<t.length;r++)t[r]^=106;this.outer=new this.Hash().update(t)};ta.prototype.update=function(t,r){return this.inner.update(t,r),this};ta.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}});var Tf=de(Vv=>{var Ut=Vv;Ut.utils=fn();Ut.common=Ys();Ut.sha=$v();Ut.ripemd=Kv();Ut.hmac=Jv();Ut.sha1=Ut.sha.sha1;Ut.sha256=Ut.sha.sha256;Ut.sha224=Ut.sha.sha224;Ut.sha384=Ut.sha.sha384;Ut.sha512=Ut.sha.sha512;Ut.ripemd160=Ut.ripemd.ripemd160});var c3=de(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});var ia=Po(),na=Br();fi.DIGEST_LENGTH=64;fi.BLOCK_SIZE=128;var f3=function(){function n(){this.digestLength=fi.DIGEST_LENGTH,this.blockSize=fi.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return n.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},n.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},n.prototype.clean=function(){na.wipe(this._buffer),na.wipe(this._tempHi),na.wipe(this._tempLo),this.reset()},n.prototype.update=function(t,r){if(r===void 0&&(r=t.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var i=0;if(this._bytesHashed+=r,this._bufferLength>0){for(;this._bufferLength<fi.BLOCK_SIZE&&r>0;)this._buffer[this._bufferLength++]=t[i++],r--;this._bufferLength===this.blockSize&&(np(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(r>=this.blockSize&&(i=np(this._tempHi,this._tempLo,this._stateHi,this._stateLo,t,i,r),r%=this.blockSize);r>0;)this._buffer[this._bufferLength++]=t[i++],r--;return this},n.prototype.finish=function(t){if(!this._finished){var r=this._bytesHashed,i=this._bufferLength,o=r/536870912|0,s=r<<3,a=r%128<112?128:256;this._buffer[i]=128;for(var f=i+1;f<a-8;f++)this._buffer[f]=0;ia.writeUint32BE(o,this._buffer,a-8),ia.writeUint32BE(s,this._buffer,a-4),np(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,a),this._finished=!0}for(var f=0;f<this.digestLength/8;f++)ia.writeUint32BE(this._stateHi[f],t,f*8),ia.writeUint32BE(this._stateLo[f],t,f*8+4);return this},n.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},n.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},n.prototype.restoreState=function(t){return this._stateHi.set(t.stateHi),this._stateLo.set(t.stateLo),this._bufferLength=t.bufferLength,t.buffer&&this._buffer.set(t.buffer),this._bytesHashed=t.bytesHashed,this._finished=!1,this},n.prototype.cleanSavedState=function(t){na.wipe(t.stateHi),na.wipe(t.stateLo),t.buffer&&na.wipe(t.buffer),t.bufferLength=0,t.bytesHashed=0},n}();fi.SHA512=f3;var a3=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function np(n,t,r,i,o,s,a){for(var f=r[0],u=r[1],d=r[2],h=r[3],y=r[4],C=r[5],O=r[6],A=r[7],M=i[0],F=i[1],D=i[2],$=i[3],K=i[4],j=i[5],X=i[6],B=i[7],L,U,te,_,l,g,m,c;a>=128;){for(var p=0;p<16;p++){var x=8*p+s;n[p]=ia.readUint32BE(o,x),t[p]=ia.readUint32BE(o,x+4)}for(var p=0;p<80;p++){var E=f,w=u,b=d,S=h,R=y,v=C,T=O,re=A,k=M,z=F,Y=D,N=$,P=K,G=j,J=X,Q=B;if(L=A,U=B,l=U&65535,g=U>>>16,m=L&65535,c=L>>>16,L=(y>>>14|K<<32-14)^(y>>>18|K<<32-18)^(K>>>41-32|y<<32-(41-32)),U=(K>>>14|y<<32-14)^(K>>>18|y<<32-18)^(y>>>41-32|K<<32-(41-32)),l+=U&65535,g+=U>>>16,m+=L&65535,c+=L>>>16,L=y&C^~y&O,U=K&j^~K&X,l+=U&65535,g+=U>>>16,m+=L&65535,c+=L>>>16,L=a3[p*2],U=a3[p*2+1],l+=U&65535,g+=U>>>16,m+=L&65535,c+=L>>>16,L=n[p%16],U=t[p%16],l+=U&65535,g+=U>>>16,m+=L&65535,c+=L>>>16,g+=l>>>16,m+=g>>>16,c+=m>>>16,te=m&65535|c<<16,_=l&65535|g<<16,L=te,U=_,l=U&65535,g=U>>>16,m=L&65535,c=L>>>16,L=(f>>>28|M<<32-28)^(M>>>34-32|f<<32-(34-32))^(M>>>39-32|f<<32-(39-32)),U=(M>>>28|f<<32-28)^(f>>>34-32|M<<32-(34-32))^(f>>>39-32|M<<32-(39-32)),l+=U&65535,g+=U>>>16,m+=L&65535,c+=L>>>16,L=f&u^f&d^u&d,U=M&F^M&D^F&D,l+=U&65535,g+=U>>>16,m+=L&65535,c+=L>>>16,g+=l>>>16,m+=g>>>16,c+=m>>>16,re=m&65535|c<<16,Q=l&65535|g<<16,L=S,U=N,l=U&65535,g=U>>>16,m=L&65535,c=L>>>16,L=te,U=_,l+=U&65535,g+=U>>>16,m+=L&65535,c+=L>>>16,g+=l>>>16,m+=g>>>16,c+=m>>>16,S=m&65535|c<<16,N=l&65535|g<<16,u=E,d=w,h=b,y=S,C=R,O=v,A=T,f=re,F=k,D=z,$=Y,K=N,j=P,X=G,B=J,M=Q,p%16===15)for(var x=0;x<16;x++)L=n[x],U=t[x],l=U&65535,g=U>>>16,m=L&65535,c=L>>>16,L=n[(x+9)%16],U=t[(x+9)%16],l+=U&65535,g+=U>>>16,m+=L&65535,c+=L>>>16,te=n[(x+1)%16],_=t[(x+1)%16],L=(te>>>1|_<<32-1)^(te>>>8|_<<32-8)^te>>>7,U=(_>>>1|te<<32-1)^(_>>>8|te<<32-8)^(_>>>7|te<<32-7),l+=U&65535,g+=U>>>16,m+=L&65535,c+=L>>>16,te=n[(x+14)%16],_=t[(x+14)%16],L=(te>>>19|_<<32-19)^(_>>>61-32|te<<32-(61-32))^te>>>6,U=(_>>>19|te<<32-19)^(te>>>61-32|_<<32-(61-32))^(_>>>6|te<<32-6),l+=U&65535,g+=U>>>16,m+=L&65535,c+=L>>>16,g+=l>>>16,m+=g>>>16,c+=m>>>16,n[x]=m&65535|c<<16,t[x]=l&65535|g<<16}L=f,U=M,l=U&65535,g=U>>>16,m=L&65535,c=L>>>16,L=r[0],U=i[0],l+=U&65535,g+=U>>>16,m+=L&65535,c+=L>>>16,g+=l>>>16,m+=g>>>16,c+=m>>>16,r[0]=f=m&65535|c<<16,i[0]=M=l&65535|g<<16,L=u,U=F,l=U&65535,g=U>>>16,m=L&65535,c=L>>>16,L=r[1],U=i[1],l+=U&65535,g+=U>>>16,m+=L&65535,c+=L>>>16,g+=l>>>16,m+=g>>>16,c+=m>>>16,r[1]=u=m&65535|c<<16,i[1]=F=l&65535|g<<16,L=d,U=D,l=U&65535,g=U>>>16,m=L&65535,c=L>>>16,L=r[2],U=i[2],l+=U&65535,g+=U>>>16,m+=L&65535,c+=L>>>16,g+=l>>>16,m+=g>>>16,c+=m>>>16,r[2]=d=m&65535|c<<16,i[2]=D=l&65535|g<<16,L=h,U=$,l=U&65535,g=U>>>16,m=L&65535,c=L>>>16,L=r[3],U=i[3],l+=U&65535,g+=U>>>16,m+=L&65535,c+=L>>>16,g+=l>>>16,m+=g>>>16,c+=m>>>16,r[3]=h=m&65535|c<<16,i[3]=$=l&65535|g<<16,L=y,U=K,l=U&65535,g=U>>>16,m=L&65535,c=L>>>16,L=r[4],U=i[4],l+=U&65535,g+=U>>>16,m+=L&65535,c+=L>>>16,g+=l>>>16,m+=g>>>16,c+=m>>>16,r[4]=y=m&65535|c<<16,i[4]=K=l&65535|g<<16,L=C,U=j,l=U&65535,g=U>>>16,m=L&65535,c=L>>>16,L=r[5],U=i[5],l+=U&65535,g+=U>>>16,m+=L&65535,c+=L>>>16,g+=l>>>16,m+=g>>>16,c+=m>>>16,r[5]=C=m&65535|c<<16,i[5]=j=l&65535|g<<16,L=O,U=X,l=U&65535,g=U>>>16,m=L&65535,c=L>>>16,L=r[6],U=i[6],l+=U&65535,g+=U>>>16,m+=L&65535,c+=L>>>16,g+=l>>>16,m+=g>>>16,c+=m>>>16,r[6]=O=m&65535|c<<16,i[6]=X=l&65535|g<<16,L=A,U=B,l=U&65535,g=U>>>16,m=L&65535,c=L>>>16,L=r[7],U=i[7],l+=U&65535,g+=U>>>16,m+=L&65535,c+=L>>>16,g+=l>>>16,m+=g>>>16,c+=m>>>16,r[7]=A=m&65535|c<<16,i[7]=B=l&65535|g<<16,s+=128,a-=128}return s}function wT(n){var t=new f3;t.update(n);var r=t.digest();return t.clean(),r}fi.hash=wT});var Yu=de(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.convertSecretKeyToX25519=ot.convertPublicKeyToX25519=ot.verify=ot.sign=ot.extractPublicKeyFromSecretKey=ot.generateKeyPair=ot.generateKeyPairFromSeed=ot.SEED_LENGTH=ot.SECRET_KEY_LENGTH=ot.PUBLIC_KEY_LENGTH=ot.SIGNATURE_LENGTH=void 0;var ET=ei(),Mf=c3(),p3=Br();ot.SIGNATURE_LENGTH=64;ot.PUBLIC_KEY_LENGTH=32;ot.SECRET_KEY_LENGTH=64;ot.SEED_LENGTH=32;function _e(n){let t=new Float64Array(16);if(n)for(let r=0;r<n.length;r++)t[r]=n[r];return t}var _T=new Uint8Array(32);_T[0]=9;var sp=_e(),oa=_e([1]),ST=_e([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),AT=_e([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),u3=_e([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),l3=_e([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),TT=_e([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function $i(n,t){for(let r=0;r<16;r++)n[r]=t[r]|0}function ip(n){let t=1;for(let r=0;r<16;r++){let i=n[r]+t+65535;t=Math.floor(i/65536),n[r]=i-t*65536}n[0]+=t-1+37*(t-1)}function m3(n,t,r){let i=~(r-1);for(let o=0;o<16;o++){let s=i&(n[o]^t[o]);n[o]^=s,t[o]^=s}}function kf(n,t){let r=_e(),i=_e();for(let o=0;o<16;o++)i[o]=t[o];ip(i),ip(i),ip(i);for(let o=0;o<2;o++){r[0]=i[0]-65517;for(let a=1;a<15;a++)r[a]=i[a]-65535-(r[a-1]>>16&1),r[a-1]&=65535;r[15]=i[15]-32767-(r[14]>>16&1);let s=r[15]>>16&1;r[14]&=65535,m3(i,r,1-s)}for(let o=0;o<16;o++)n[2*o]=i[o]&255,n[2*o+1]=i[o]>>8}function b3(n,t){let r=0;for(let i=0;i<32;i++)r|=n[i]^t[i];return(1&r-1>>>8)-1}function h3(n,t){let r=new Uint8Array(32),i=new Uint8Array(32);return kf(r,n),kf(i,t),b3(r,i)}function g3(n){let t=new Uint8Array(32);return kf(t,n),t[0]&1}function MT(n,t){for(let r=0;r<16;r++)n[r]=t[2*r]+(t[2*r+1]<<8);n[15]&=32767}function zo(n,t,r){for(let i=0;i<16;i++)n[i]=t[i]+r[i]}function Go(n,t,r){for(let i=0;i<16;i++)n[i]=t[i]-r[i]}function ct(n,t,r){let i,o,s=0,a=0,f=0,u=0,d=0,h=0,y=0,C=0,O=0,A=0,M=0,F=0,D=0,$=0,K=0,j=0,X=0,B=0,L=0,U=0,te=0,_=0,l=0,g=0,m=0,c=0,p=0,x=0,E=0,w=0,b=0,S=r[0],R=r[1],v=r[2],T=r[3],re=r[4],k=r[5],z=r[6],Y=r[7],N=r[8],P=r[9],G=r[10],J=r[11],Q=r[12],le=r[13],oe=r[14],W=r[15];i=t[0],s+=i*S,a+=i*R,f+=i*v,u+=i*T,d+=i*re,h+=i*k,y+=i*z,C+=i*Y,O+=i*N,A+=i*P,M+=i*G,F+=i*J,D+=i*Q,$+=i*le,K+=i*oe,j+=i*W,i=t[1],a+=i*S,f+=i*R,u+=i*v,d+=i*T,h+=i*re,y+=i*k,C+=i*z,O+=i*Y,A+=i*N,M+=i*P,F+=i*G,D+=i*J,$+=i*Q,K+=i*le,j+=i*oe,X+=i*W,i=t[2],f+=i*S,u+=i*R,d+=i*v,h+=i*T,y+=i*re,C+=i*k,O+=i*z,A+=i*Y,M+=i*N,F+=i*P,D+=i*G,$+=i*J,K+=i*Q,j+=i*le,X+=i*oe,B+=i*W,i=t[3],u+=i*S,d+=i*R,h+=i*v,y+=i*T,C+=i*re,O+=i*k,A+=i*z,M+=i*Y,F+=i*N,D+=i*P,$+=i*G,K+=i*J,j+=i*Q,X+=i*le,B+=i*oe,L+=i*W,i=t[4],d+=i*S,h+=i*R,y+=i*v,C+=i*T,O+=i*re,A+=i*k,M+=i*z,F+=i*Y,D+=i*N,$+=i*P,K+=i*G,j+=i*J,X+=i*Q,B+=i*le,L+=i*oe,U+=i*W,i=t[5],h+=i*S,y+=i*R,C+=i*v,O+=i*T,A+=i*re,M+=i*k,F+=i*z,D+=i*Y,$+=i*N,K+=i*P,j+=i*G,X+=i*J,B+=i*Q,L+=i*le,U+=i*oe,te+=i*W,i=t[6],y+=i*S,C+=i*R,O+=i*v,A+=i*T,M+=i*re,F+=i*k,D+=i*z,$+=i*Y,K+=i*N,j+=i*P,X+=i*G,B+=i*J,L+=i*Q,U+=i*le,te+=i*oe,_+=i*W,i=t[7],C+=i*S,O+=i*R,A+=i*v,M+=i*T,F+=i*re,D+=i*k,$+=i*z,K+=i*Y,j+=i*N,X+=i*P,B+=i*G,L+=i*J,U+=i*Q,te+=i*le,_+=i*oe,l+=i*W,i=t[8],O+=i*S,A+=i*R,M+=i*v,F+=i*T,D+=i*re,$+=i*k,K+=i*z,j+=i*Y,X+=i*N,B+=i*P,L+=i*G,U+=i*J,te+=i*Q,_+=i*le,l+=i*oe,g+=i*W,i=t[9],A+=i*S,M+=i*R,F+=i*v,D+=i*T,$+=i*re,K+=i*k,j+=i*z,X+=i*Y,B+=i*N,L+=i*P,U+=i*G,te+=i*J,_+=i*Q,l+=i*le,g+=i*oe,m+=i*W,i=t[10],M+=i*S,F+=i*R,D+=i*v,$+=i*T,K+=i*re,j+=i*k,X+=i*z,B+=i*Y,L+=i*N,U+=i*P,te+=i*G,_+=i*J,l+=i*Q,g+=i*le,m+=i*oe,c+=i*W,i=t[11],F+=i*S,D+=i*R,$+=i*v,K+=i*T,j+=i*re,X+=i*k,B+=i*z,L+=i*Y,U+=i*N,te+=i*P,_+=i*G,l+=i*J,g+=i*Q,m+=i*le,c+=i*oe,p+=i*W,i=t[12],D+=i*S,$+=i*R,K+=i*v,j+=i*T,X+=i*re,B+=i*k,L+=i*z,U+=i*Y,te+=i*N,_+=i*P,l+=i*G,g+=i*J,m+=i*Q,c+=i*le,p+=i*oe,x+=i*W,i=t[13],$+=i*S,K+=i*R,j+=i*v,X+=i*T,B+=i*re,L+=i*k,U+=i*z,te+=i*Y,_+=i*N,l+=i*P,g+=i*G,m+=i*J,c+=i*Q,p+=i*le,x+=i*oe,E+=i*W,i=t[14],K+=i*S,j+=i*R,X+=i*v,B+=i*T,L+=i*re,U+=i*k,te+=i*z,_+=i*Y,l+=i*N,g+=i*P,m+=i*G,c+=i*J,p+=i*Q,x+=i*le,E+=i*oe,w+=i*W,i=t[15],j+=i*S,X+=i*R,B+=i*v,L+=i*T,U+=i*re,te+=i*k,_+=i*z,l+=i*Y,g+=i*N,m+=i*P,c+=i*G,p+=i*J,x+=i*Q,E+=i*le,w+=i*oe,b+=i*W,s+=38*X,a+=38*B,f+=38*L,u+=38*U,d+=38*te,h+=38*_,y+=38*l,C+=38*g,O+=38*m,A+=38*c,M+=38*p,F+=38*x,D+=38*E,$+=38*w,K+=38*b,o=1,i=s+o+65535,o=Math.floor(i/65536),s=i-o*65536,i=a+o+65535,o=Math.floor(i/65536),a=i-o*65536,i=f+o+65535,o=Math.floor(i/65536),f=i-o*65536,i=u+o+65535,o=Math.floor(i/65536),u=i-o*65536,i=d+o+65535,o=Math.floor(i/65536),d=i-o*65536,i=h+o+65535,o=Math.floor(i/65536),h=i-o*65536,i=y+o+65535,o=Math.floor(i/65536),y=i-o*65536,i=C+o+65535,o=Math.floor(i/65536),C=i-o*65536,i=O+o+65535,o=Math.floor(i/65536),O=i-o*65536,i=A+o+65535,o=Math.floor(i/65536),A=i-o*65536,i=M+o+65535,o=Math.floor(i/65536),M=i-o*65536,i=F+o+65535,o=Math.floor(i/65536),F=i-o*65536,i=D+o+65535,o=Math.floor(i/65536),D=i-o*65536,i=$+o+65535,o=Math.floor(i/65536),$=i-o*65536,i=K+o+65535,o=Math.floor(i/65536),K=i-o*65536,i=j+o+65535,o=Math.floor(i/65536),j=i-o*65536,s+=o-1+37*(o-1),o=1,i=s+o+65535,o=Math.floor(i/65536),s=i-o*65536,i=a+o+65535,o=Math.floor(i/65536),a=i-o*65536,i=f+o+65535,o=Math.floor(i/65536),f=i-o*65536,i=u+o+65535,o=Math.floor(i/65536),u=i-o*65536,i=d+o+65535,o=Math.floor(i/65536),d=i-o*65536,i=h+o+65535,o=Math.floor(i/65536),h=i-o*65536,i=y+o+65535,o=Math.floor(i/65536),y=i-o*65536,i=C+o+65535,o=Math.floor(i/65536),C=i-o*65536,i=O+o+65535,o=Math.floor(i/65536),O=i-o*65536,i=A+o+65535,o=Math.floor(i/65536),A=i-o*65536,i=M+o+65535,o=Math.floor(i/65536),M=i-o*65536,i=F+o+65535,o=Math.floor(i/65536),F=i-o*65536,i=D+o+65535,o=Math.floor(i/65536),D=i-o*65536,i=$+o+65535,o=Math.floor(i/65536),$=i-o*65536,i=K+o+65535,o=Math.floor(i/65536),K=i-o*65536,i=j+o+65535,o=Math.floor(i/65536),j=i-o*65536,s+=o-1+37*(o-1),n[0]=s,n[1]=a,n[2]=f,n[3]=u,n[4]=d,n[5]=h,n[6]=y,n[7]=C,n[8]=O,n[9]=A,n[10]=M,n[11]=F,n[12]=D,n[13]=$,n[14]=K,n[15]=j}function Ko(n,t){ct(n,t,t)}function y3(n,t){let r=_e(),i;for(i=0;i<16;i++)r[i]=t[i];for(i=253;i>=0;i--)Ko(r,r),i!==2&&i!==4&&ct(r,r,t);for(i=0;i<16;i++)n[i]=r[i]}function kT(n,t){let r=_e(),i;for(i=0;i<16;i++)r[i]=t[i];for(i=250;i>=0;i--)Ko(r,r),i!==1&&ct(r,r,t);for(i=0;i<16;i++)n[i]=r[i]}function ap(n,t){let r=_e(),i=_e(),o=_e(),s=_e(),a=_e(),f=_e(),u=_e(),d=_e(),h=_e();Go(r,n[1],n[0]),Go(h,t[1],t[0]),ct(r,r,h),zo(i,n[0],n[1]),zo(h,t[0],t[1]),ct(i,i,h),ct(o,n[3],t[3]),ct(o,o,AT),ct(s,n[2],t[2]),zo(s,s,s),Go(a,i,r),Go(f,s,o),zo(u,s,o),zo(d,i,r),ct(n[0],a,f),ct(n[1],d,u),ct(n[2],u,f),ct(n[3],a,d)}function d3(n,t,r){for(let i=0;i<4;i++)m3(n[i],t[i],r)}function cp(n,t){let r=_e(),i=_e(),o=_e();y3(o,t[2]),ct(r,t[0],o),ct(i,t[1],o),kf(n,i),n[31]^=g3(r)<<7}function v3(n,t,r){$i(n[0],sp),$i(n[1],oa),$i(n[2],oa),$i(n[3],sp);for(let i=255;i>=0;--i){let o=r[i/8|0]>>(i&7)&1;d3(n,t,o),ap(t,n),ap(n,n),d3(n,t,o)}}function up(n,t){let r=[_e(),_e(),_e(),_e()];$i(r[0],u3),$i(r[1],l3),$i(r[2],oa),ct(r[3],u3,l3),v3(n,r,t)}function x3(n){if(n.length!==ot.SEED_LENGTH)throw new Error(`ed25519: seed must be ${ot.SEED_LENGTH} bytes`);let t=(0,Mf.hash)(n);t[0]&=248,t[31]&=127,t[31]|=64;let r=new Uint8Array(32),i=[_e(),_e(),_e(),_e()];up(i,t),cp(r,i);let o=new Uint8Array(64);return o.set(n),o.set(r,32),{publicKey:r,secretKey:o}}ot.generateKeyPairFromSeed=x3;function CT(n){let t=(0,ET.randomBytes)(32,n),r=x3(t);return(0,p3.wipe)(t),r}ot.generateKeyPair=CT;function OT(n){if(n.length!==ot.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${ot.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(n.subarray(32))}ot.extractPublicKeyFromSecretKey=OT;var op=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function w3(n,t){let r,i,o,s;for(i=63;i>=32;--i){for(r=0,o=i-32,s=i-12;o<s;++o)t[o]+=r-16*t[i]*op[o-(i-32)],r=Math.floor((t[o]+128)/256),t[o]-=r*256;t[o]+=r,t[i]=0}for(r=0,o=0;o<32;o++)t[o]+=r-(t[31]>>4)*op[o],r=t[o]>>8,t[o]&=255;for(o=0;o<32;o++)t[o]-=r*op[o];for(i=0;i<32;i++)t[i+1]+=t[i]>>8,n[i]=t[i]&255}function fp(n){let t=new Float64Array(64);for(let r=0;r<64;r++)t[r]=n[r];for(let r=0;r<64;r++)n[r]=0;w3(n,t)}function DT(n,t){let r=new Float64Array(64),i=[_e(),_e(),_e(),_e()],o=(0,Mf.hash)(n.subarray(0,32));o[0]&=248,o[31]&=127,o[31]|=64;let s=new Uint8Array(64);s.set(o.subarray(32),32);let a=new Mf.SHA512;a.update(s.subarray(32)),a.update(t);let f=a.digest();a.clean(),fp(f),up(i,f),cp(s,i),a.reset(),a.update(s.subarray(0,32)),a.update(n.subarray(32)),a.update(t);let u=a.digest();fp(u);for(let d=0;d<32;d++)r[d]=f[d];for(let d=0;d<32;d++)for(let h=0;h<32;h++)r[d+h]+=u[d]*o[h];return w3(s.subarray(32),r),s}ot.sign=DT;function E3(n,t){let r=_e(),i=_e(),o=_e(),s=_e(),a=_e(),f=_e(),u=_e();return $i(n[2],oa),MT(n[1],t),Ko(o,n[1]),ct(s,o,ST),Go(o,o,n[2]),zo(s,n[2],s),Ko(a,s),Ko(f,a),ct(u,f,a),ct(r,u,o),ct(r,r,s),kT(r,r),ct(r,r,o),ct(r,r,s),ct(r,r,s),ct(n[0],r,s),Ko(i,n[0]),ct(i,i,s),h3(i,o)&&ct(n[0],n[0],TT),Ko(i,n[0]),ct(i,i,s),h3(i,o)?-1:(g3(n[0])===t[31]>>7&&Go(n[0],sp,n[0]),ct(n[3],n[0],n[1]),0)}function RT(n,t,r){let i=new Uint8Array(32),o=[_e(),_e(),_e(),_e()],s=[_e(),_e(),_e(),_e()];if(r.length!==ot.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${ot.SIGNATURE_LENGTH} bytes`);if(E3(s,n))return!1;let a=new Mf.SHA512;a.update(r.subarray(0,32)),a.update(n),a.update(t);let f=a.digest();return fp(f),v3(o,s,f),up(s,r.subarray(32)),ap(o,s),cp(i,o),!b3(r,i)}ot.verify=RT;function IT(n){let t=[_e(),_e(),_e(),_e()];if(E3(t,n))throw new Error("Ed25519: invalid public key");let r=_e(),i=_e(),o=t[1];zo(r,oa,o),Go(i,oa,o),y3(i,i),ct(r,r,i);let s=new Uint8Array(32);return kf(s,r),s}ot.convertPublicKeyToX25519=IT;function NT(n){let t=(0,Mf.hash)(n.subarray(0,32));t[0]&=248,t[31]&=127,t[31]|=64;let r=new Uint8Array(t.subarray(0,32));return(0,p3.wipe)(t),r}ot.convertSecretKeyToX25519=NT});var N3=de((rH,I3)=>{"use strict";function lM(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<n.length;i++){var o=n.charAt(i),s=o.charCodeAt(0);if(t[s]!==255)throw new TypeError(o+" is ambiguous");t[s]=i}var a=n.length,f=n.charAt(0),u=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function h(O){if(O instanceof Uint8Array||(ArrayBuffer.isView(O)?O=new Uint8Array(O.buffer,O.byteOffset,O.byteLength):Array.isArray(O)&&(O=Uint8Array.from(O))),!(O instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(O.length===0)return"";for(var A=0,M=0,F=0,D=O.length;F!==D&&O[F]===0;)F++,A++;for(var $=(D-F)*d+1>>>0,K=new Uint8Array($);F!==D;){for(var j=O[F],X=0,B=$-1;(j!==0||X<M)&&B!==-1;B--,X++)j+=256*K[B]>>>0,K[B]=j%a>>>0,j=j/a>>>0;if(j!==0)throw new Error("Non-zero carry");M=X,F++}for(var L=$-M;L!==$&&K[L]===0;)L++;for(var U=f.repeat(A);L<$;++L)U+=n.charAt(K[L]);return U}function y(O){if(typeof O!="string")throw new TypeError("Expected String");if(O.length===0)return new Uint8Array;var A=0;if(O[A]!==" "){for(var M=0,F=0;O[A]===f;)M++,A++;for(var D=(O.length-A)*u+1>>>0,$=new Uint8Array(D);O[A];){var K=t[O.charCodeAt(A)];if(K===255)return;for(var j=0,X=D-1;(K!==0||j<F)&&X!==-1;X--,j++)K+=a*$[X]>>>0,$[X]=K%256>>>0,K=K/256>>>0;if(K!==0)throw new Error("Non-zero carry");F=j,A++}if(O[A]!==" "){for(var B=D-F;B!==D&&$[B]===0;)B++;for(var L=new Uint8Array(M+(D-B)),U=M;B!==D;)L[U++]=$[B++];return L}}}function C(O){var A=y(O);if(A)return A;throw new Error("Non-base"+a+" character")}return{encode:h,decodeUnsafe:y,decode:C}}I3.exports=lM});var al=de((nH,P3)=>{"use strict";var hM=new TextDecoder,dM=n=>hM.decode(n),pM=new TextEncoder,mM=n=>pM.encode(n);function bM(n,t){let r=new Uint8Array(t),i=0;for(let o of n)r.set(o,i),i+=o.length;return r}P3.exports={decodeText:dM,encodeText:mM,concat:bM}});var B3=de((iH,L3)=>{"use strict";var{encodeText:gM}=al(),Ep=class{constructor(t,r,i,o){this.name=t,this.code=r,this.codeBuf=gM(this.code),this.alphabet=o,this.codec=i(o)}encode(t){return this.codec.encode(t)}decode(t){for(let r of t)if(this.alphabet&&this.alphabet.indexOf(r)<0)throw new Error(`invalid character '${r}' in '${t}'`);return this.codec.decode(t)}};L3.exports=Ep});var $3=de((oH,U3)=>{"use strict";var yM=(n,t,r)=>{let i={};for(let d=0;d<t.length;++d)i[t[d]]=d;let o=n.length;for(;n[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),a=0,f=0,u=0;for(let d=0;d<o;++d){let h=i[n[d]];if(h===void 0)throw new SyntaxError("Invalid character "+n[d]);f=f<<r|h,a+=r,a>=8&&(a-=8,s[u++]=255&f>>a)}if(a>=r||255&f<<8-a)throw new SyntaxError("Unexpected end of data");return s},vM=(n,t,r)=>{let i=t[t.length-1]==="=",o=(1<<r)-1,s="",a=0,f=0;for(let u=0;u<n.length;++u)for(f=f<<8|n[u],a+=8;a>r;)a-=r,s+=t[o&f>>a];if(a&&(s+=t[o&f<<r-a]),i)for(;s.length*r&7;)s+="=";return s},xM=n=>t=>({encode(r){return vM(r,t,n)},decode(r){return yM(r,t,n)}});U3.exports={rfc4648:xM}});var H3=de((sH,j3)=>{"use strict";var Rf=N3(),wM=B3(),{rfc4648:qt}=$3(),{decodeText:EM,encodeText:_M}=al(),SM=()=>({encode:EM,decode:_M}),F3=[["identity","\0",SM,""],["base2","0",qt(1),"01"],["base8","7",qt(3),"01234567"],["base10","9",Rf,"0123456789"],["base16","f",qt(4),"0123456789abcdef"],["base16upper","F",qt(4),"0123456789ABCDEF"],["base32hex","v",qt(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",qt(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",qt(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",qt(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",qt(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",qt(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",qt(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",qt(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",qt(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",Rf,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",Rf,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",Rf,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",Rf,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",qt(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",qt(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",qt(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",qt(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],q3=F3.reduce((n,t)=>(n[t[0]]=new wM(t[0],t[1],t[2],t[3]),n),{}),AM=F3.reduce((n,t)=>(n[t[1]]=q3[t[0]],n),{});j3.exports={names:q3,codes:AM}});var G3=de((ci,K3)=>{"use strict";var fa=H3(),{encodeText:TM,decodeText:fl,concat:z3}=al();function MM(n,t){if(!t)throw new Error("requires an encoded Uint8Array");let{name:r,codeBuf:i}=Yo(n);return DM(r,t),z3([i,t],i.length+t.length)}function kM(n,t){let r=Yo(n),i=TM(r.encode(t));return z3([r.codeBuf,i],r.codeBuf.length+i.length)}function CM(n){n instanceof Uint8Array&&(n=fl(n));let t=n[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(t)&&(n=n.toLowerCase()),Yo(n[0]).decode(n.substring(1))}function OM(n){if(n instanceof Uint8Array&&(n=fl(n)),Object.prototype.toString.call(n)!=="[object String]")return!1;try{return Yo(n[0]).name}catch{return!1}}function DM(n,t){Yo(n).decode(fl(t))}function Yo(n){if(Object.prototype.hasOwnProperty.call(fa.names,n))return fa.names[n];if(Object.prototype.hasOwnProperty.call(fa.codes,n))return fa.codes[n];throw new Error(`Unsupported encoding: ${n}`)}function RM(n){return n instanceof Uint8Array&&(n=fl(n)),Yo(n[0])}ci=K3.exports=MM;ci.encode=kM;ci.decode=CM;ci.isEncoded=OM;ci.encoding=Yo;ci.encodingFromData=RM;var IM=Object.freeze(fa.names),NM=Object.freeze(fa.codes);ci.names=IM;ci.codes=NM});var Y3=de((aH,W3)=>{W3.exports=V3;var J3=128,PM=127,LM=~PM,BM=Math.pow(2,31);function V3(n,t,r){t=t||[],r=r||0;for(var i=r;n>=BM;)t[r++]=n&255|J3,n/=128;for(;n&LM;)t[r++]=n&255|J3,n>>>=7;return t[r]=n|0,V3.bytes=r-i+1,t}});var Q3=de((fH,Z3)=>{Z3.exports=_p;var UM=128,X3=127;function _p(n,i){var r=0,i=i||0,o=0,s=i,a,f=n.length;do{if(s>=f)throw _p.bytes=0,new RangeError("Could not decode varint");a=n[s++],r+=o<28?(a&X3)<<o:(a&X3)*Math.pow(2,o),o+=7}while(a>=UM);return _p.bytes=s-i,r}});var t6=de((cH,e6)=>{var $M=Math.pow(2,7),FM=Math.pow(2,14),qM=Math.pow(2,21),jM=Math.pow(2,28),HM=Math.pow(2,35),zM=Math.pow(2,42),KM=Math.pow(2,49),GM=Math.pow(2,56),JM=Math.pow(2,63);e6.exports=function(n){return n<$M?1:n<FM?2:n<qM?3:n<jM?4:n<HM?5:n<zM?6:n<KM?7:n<GM?8:n<JM?9:10}});var n6=de((uH,r6)=>{r6.exports={encode:Y3(),decode:Q3(),encodingLength:t6()}});var o6=de((lH,i6)=>{"use strict";var VM=Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082});i6.exports={names:VM}});var h6=de((hH,l6)=>{"use strict";var s6=G3(),ca=n6(),{names:If}=o6(),{toString:cl}=(ys(),La(j1)),{fromString:WM}=(Ka(),La(q1)),{concat:YM}=(Lh(),La(A1)),ua={};for(let n in If){let t=n;ua[If[t]]=t}Object.freeze(ua);function XM(n){if(!(n instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return cl(n,"base16")}function ZM(n){return WM(n,"base16")}function QM(n){if(!(n instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return cl(s6.encode("base58btc",n)).slice(1)}function ek(n){let t=n instanceof Uint8Array?cl(n):n;return s6.decode("z"+t)}function a6(n){if(!(n instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");if(n.length<2)throw new Error("multihash too short. must be > 2 bytes.");let t=ca.decode(n);if(!c6(t))throw new Error(`multihash unknown function code: 0x${t.toString(16)}`);n=n.slice(ca.decode.bytes);let r=ca.decode(n);if(r<0)throw new Error(`multihash invalid length: ${r}`);if(n=n.slice(ca.decode.bytes),n.length!==r)throw new Error(`multihash length inconsistent: 0x${cl(n,"base16")}`);return{code:t,name:ua[t],length:r,digest:n}}function tk(n,t,r){if(!n||t===void 0)throw new Error("multihash encode requires at least two args: digest, code");let i=f6(t);if(!(n instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(r==null&&(r=n.length),r&&n.length!==r)throw new Error("digest length should be equal to specified length.");let o=ca.encode(i),s=ca.encode(r);return YM([o,s,n],o.length+s.length+n.length)}function f6(n){let t=n;if(typeof n=="string"){if(If[n]===void 0)throw new Error(`Unrecognized hash function named: ${n}`);t=If[n]}if(typeof t!="number")throw new Error(`Hash function code should be a number. Got: ${t}`);if(ua[t]===void 0&&!Sp(t))throw new Error(`Unrecognized function code: ${t}`);return t}function Sp(n){return n>0&&n<16}function c6(n){return!!(Sp(n)||ua[n])}function u6(n){a6(n)}function rk(n){return u6(n),n.subarray(0,2)}l6.exports={names:If,codes:ua,toHexString:XM,fromHexString:ZM,toB58String:QM,fromB58String:ek,decode:a6,encode:tk,coerceCode:f6,isAppCode:Sp,validate:u6,prefix:rk,isValidCode:c6}});var x6=de(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});var pl=Po(),dl=Br();qi.DIGEST_LENGTH=32;qi.BLOCK_SIZE=64;var v6=function(){function n(){this.digestLength=qi.DIGEST_LENGTH,this.blockSize=qi.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return n.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},n.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},n.prototype.clean=function(){dl.wipe(this._buffer),dl.wipe(this._temp),this.reset()},n.prototype.update=function(t,r){if(r===void 0&&(r=t.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var i=0;if(this._bytesHashed+=r,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&r>0;)this._buffer[this._bufferLength++]=t[i++],r--;this._bufferLength===this.blockSize&&(Tp(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(r>=this.blockSize&&(i=Tp(this._temp,this._state,t,i,r),r%=this.blockSize);r>0;)this._buffer[this._bufferLength++]=t[i++],r--;return this},n.prototype.finish=function(t){if(!this._finished){var r=this._bytesHashed,i=this._bufferLength,o=r/536870912|0,s=r<<3,a=r%64<56?64:128;this._buffer[i]=128;for(var f=i+1;f<a-8;f++)this._buffer[f]=0;pl.writeUint32BE(o,this._buffer,a-8),pl.writeUint32BE(s,this._buffer,a-4),Tp(this._temp,this._state,this._buffer,0,a),this._finished=!0}for(var f=0;f<this.digestLength/4;f++)pl.writeUint32BE(this._state[f],t,f*4);return this},n.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},n.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},n.prototype.restoreState=function(t){return this._state.set(t.state),this._bufferLength=t.bufferLength,t.buffer&&this._buffer.set(t.buffer),this._bytesHashed=t.bytesHashed,this._finished=!1,this},n.prototype.cleanSavedState=function(t){dl.wipe(t.state),t.buffer&&dl.wipe(t.buffer),t.bufferLength=0,t.bytesHashed=0},n}();qi.SHA256=v6;var mk=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function Tp(n,t,r,i,o){for(;o>=64;){for(var s=t[0],a=t[1],f=t[2],u=t[3],d=t[4],h=t[5],y=t[6],C=t[7],O=0;O<16;O++){var A=i+O*4;n[O]=pl.readUint32BE(r,A)}for(var O=16;O<64;O++){var M=n[O-2],F=(M>>>17|M<<32-17)^(M>>>19|M<<32-19)^M>>>10;M=n[O-15];var D=(M>>>7|M<<32-7)^(M>>>18|M<<32-18)^M>>>3;n[O]=(F+n[O-7]|0)+(D+n[O-16]|0)}for(var O=0;O<64;O++){var F=(((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(d&h^~d&y)|0)+(C+(mk[O]+n[O]|0)|0)|0,D=((s>>>2|s<<32-2)^(s>>>13|s<<32-13)^(s>>>22|s<<32-22))+(s&a^s&f^a&f)|0;C=y,y=h,h=d,d=u+F|0,u=f,f=a,a=s,s=F+D|0}t[0]+=s,t[1]+=a,t[2]+=f,t[3]+=u,t[4]+=d,t[5]+=h,t[6]+=y,t[7]+=C,i+=64,o-=64}return i}function bk(n){var t=new v6;t.update(n);var r=t.digest();return t.clean(),r}qi.hash=bk});var w6=de((GH,gk)=>{gk.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}});var Bn=de((E6,Mp)=>{(function(n,t){"use strict";function r(_,l){if(!_)throw new Error(l||"Assertion failed")}function i(_,l){_.super_=l;var g=function(){};g.prototype=l.prototype,_.prototype=new g,_.prototype.constructor=_}function o(_,l,g){if(o.isBN(_))return _;this.negative=0,this.words=null,this.length=0,this.red=null,_!==null&&((l==="le"||l==="be")&&(g=l,l=10),this._init(_||0,l||10,g||"be"))}typeof n=="object"?n.exports=o:t.BN=o,o.BN=o,o.wordSize=26;var s;try{typeof window<"u"&&typeof window.Buffer<"u"?s=window.Buffer:s=O0().Buffer}catch{}o.isBN=function(l){return l instanceof o?!0:l!==null&&typeof l=="object"&&l.constructor.wordSize===o.wordSize&&Array.isArray(l.words)},o.max=function(l,g){return l.cmp(g)>0?l:g},o.min=function(l,g){return l.cmp(g)<0?l:g},o.prototype._init=function(l,g,m){if(typeof l=="number")return this._initNumber(l,g,m);if(typeof l=="object")return this._initArray(l,g,m);g==="hex"&&(g=16),r(g===(g|0)&&g>=2&&g<=36),l=l.toString().replace(/\s+/g,"");var c=0;l[0]==="-"&&(c++,this.negative=1),c<l.length&&(g===16?this._parseHex(l,c,m):(this._parseBase(l,g,c),m==="le"&&this._initArray(this.toArray(),g,m)))},o.prototype._initNumber=function(l,g,m){l<0&&(this.negative=1,l=-l),l<67108864?(this.words=[l&67108863],this.length=1):l<4503599627370496?(this.words=[l&67108863,l/67108864&67108863],this.length=2):(r(l<9007199254740992),this.words=[l&67108863,l/67108864&67108863,1],this.length=3),m==="le"&&this._initArray(this.toArray(),g,m)},o.prototype._initArray=function(l,g,m){if(r(typeof l.length=="number"),l.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(l.length/3),this.words=new Array(this.length);for(var c=0;c<this.length;c++)this.words[c]=0;var p,x,E=0;if(m==="be")for(c=l.length-1,p=0;c>=0;c-=3)x=l[c]|l[c-1]<<8|l[c-2]<<16,this.words[p]|=x<<E&67108863,this.words[p+1]=x>>>26-E&67108863,E+=24,E>=26&&(E-=26,p++);else if(m==="le")for(c=0,p=0;c<l.length;c+=3)x=l[c]|l[c+1]<<8|l[c+2]<<16,this.words[p]|=x<<E&67108863,this.words[p+1]=x>>>26-E&67108863,E+=24,E>=26&&(E-=26,p++);return this.strip()};function a(_,l){var g=_.charCodeAt(l);return g>=65&&g<=70?g-55:g>=97&&g<=102?g-87:g-48&15}function f(_,l,g){var m=a(_,g);return g-1>=l&&(m|=a(_,g-1)<<4),m}o.prototype._parseHex=function(l,g,m){this.length=Math.ceil((l.length-g)/6),this.words=new Array(this.length);for(var c=0;c<this.length;c++)this.words[c]=0;var p=0,x=0,E;if(m==="be")for(c=l.length-1;c>=g;c-=2)E=f(l,g,c)<<p,this.words[x]|=E&67108863,p>=18?(p-=18,x+=1,this.words[x]|=E>>>26):p+=8;else{var w=l.length-g;for(c=w%2===0?g+1:g;c<l.length;c+=2)E=f(l,g,c)<<p,this.words[x]|=E&67108863,p>=18?(p-=18,x+=1,this.words[x]|=E>>>26):p+=8}this.strip()};function u(_,l,g,m){for(var c=0,p=Math.min(_.length,g),x=l;x<p;x++){var E=_.charCodeAt(x)-48;c*=m,E>=49?c+=E-49+10:E>=17?c+=E-17+10:c+=E}return c}o.prototype._parseBase=function(l,g,m){this.words=[0],this.length=1;for(var c=0,p=1;p<=67108863;p*=g)c++;c--,p=p/g|0;for(var x=l.length-m,E=x%c,w=Math.min(x,x-E)+m,b=0,S=m;S<w;S+=c)b=u(l,S,S+c,g),this.imuln(p),this.words[0]+b<67108864?this.words[0]+=b:this._iaddn(b);if(E!==0){var R=1;for(b=u(l,S,l.length,g),S=0;S<E;S++)R*=g;this.imuln(R),this.words[0]+b<67108864?this.words[0]+=b:this._iaddn(b)}this.strip()},o.prototype.copy=function(l){l.words=new Array(this.length);for(var g=0;g<this.length;g++)l.words[g]=this.words[g];l.length=this.length,l.negative=this.negative,l.red=this.red},o.prototype.clone=function(){var l=new o(null);return this.copy(l),l},o.prototype._expand=function(l){for(;this.length<l;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(l,g){l=l||10,g=g|0||1;var m;if(l===16||l==="hex"){m="";for(var c=0,p=0,x=0;x<this.length;x++){var E=this.words[x],w=((E<<c|p)&16777215).toString(16);p=E>>>24-c&16777215,p!==0||x!==this.length-1?m=d[6-w.length]+w+m:m=w+m,c+=2,c>=26&&(c-=26,x--)}for(p!==0&&(m=p.toString(16)+m);m.length%g!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}if(l===(l|0)&&l>=2&&l<=36){var b=h[l],S=y[l];m="";var R=this.clone();for(R.negative=0;!R.isZero();){var v=R.modn(S).toString(l);R=R.idivn(S),R.isZero()?m=v+m:m=d[b-v.length]+v+m}for(this.isZero()&&(m="0"+m);m.length%g!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var l=this.words[0];return this.length===2?l+=this.words[1]*67108864:this.length===3&&this.words[2]===1?l+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-l:l},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(l,g){return r(typeof s<"u"),this.toArrayLike(s,l,g)},o.prototype.toArray=function(l,g){return this.toArrayLike(Array,l,g)},o.prototype.toArrayLike=function(l,g,m){var c=this.byteLength(),p=m||Math.max(1,c);r(c<=p,"byte array longer than desired length"),r(p>0,"Requested array length <= 0"),this.strip();var x=g==="le",E=new l(p),w,b,S=this.clone();if(x){for(b=0;!S.isZero();b++)w=S.andln(255),S.iushrn(8),E[b]=w;for(;b<p;b++)E[b]=0}else{for(b=0;b<p-c;b++)E[b]=0;for(b=0;!S.isZero();b++)w=S.andln(255),S.iushrn(8),E[p-b-1]=w}return E},Math.clz32?o.prototype._countBits=function(l){return 32-Math.clz32(l)}:o.prototype._countBits=function(l){var g=l,m=0;return g>=4096&&(m+=13,g>>>=13),g>=64&&(m+=7,g>>>=7),g>=8&&(m+=4,g>>>=4),g>=2&&(m+=2,g>>>=2),m+g},o.prototype._zeroBits=function(l){if(l===0)return 26;var g=l,m=0;return g&8191||(m+=13,g>>>=13),g&127||(m+=7,g>>>=7),g&15||(m+=4,g>>>=4),g&3||(m+=2,g>>>=2),g&1||m++,m},o.prototype.bitLength=function(){var l=this.words[this.length-1],g=this._countBits(l);return(this.length-1)*26+g};function C(_){for(var l=new Array(_.bitLength()),g=0;g<l.length;g++){var m=g/26|0,c=g%26;l[g]=(_.words[m]&1<<c)>>>c}return l}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var l=0,g=0;g<this.length;g++){var m=this._zeroBits(this.words[g]);if(l+=m,m!==26)break}return l},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(l){return this.negative!==0?this.abs().inotn(l).iaddn(1):this.clone()},o.prototype.fromTwos=function(l){return this.testn(l-1)?this.notn(l).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(l){for(;this.length<l.length;)this.words[this.length++]=0;for(var g=0;g<l.length;g++)this.words[g]=this.words[g]|l.words[g];return this.strip()},o.prototype.ior=function(l){return r((this.negative|l.negative)===0),this.iuor(l)},o.prototype.or=function(l){return this.length>l.length?this.clone().ior(l):l.clone().ior(this)},o.prototype.uor=function(l){return this.length>l.length?this.clone().iuor(l):l.clone().iuor(this)},o.prototype.iuand=function(l){var g;this.length>l.length?g=l:g=this;for(var m=0;m<g.length;m++)this.words[m]=this.words[m]&l.words[m];return this.length=g.length,this.strip()},o.prototype.iand=function(l){return r((this.negative|l.negative)===0),this.iuand(l)},o.prototype.and=function(l){return this.length>l.length?this.clone().iand(l):l.clone().iand(this)},o.prototype.uand=function(l){return this.length>l.length?this.clone().iuand(l):l.clone().iuand(this)},o.prototype.iuxor=function(l){var g,m;this.length>l.length?(g=this,m=l):(g=l,m=this);for(var c=0;c<m.length;c++)this.words[c]=g.words[c]^m.words[c];if(this!==g)for(;c<g.length;c++)this.words[c]=g.words[c];return this.length=g.length,this.strip()},o.prototype.ixor=function(l){return r((this.negative|l.negative)===0),this.iuxor(l)},o.prototype.xor=function(l){return this.length>l.length?this.clone().ixor(l):l.clone().ixor(this)},o.prototype.uxor=function(l){return this.length>l.length?this.clone().iuxor(l):l.clone().iuxor(this)},o.prototype.inotn=function(l){r(typeof l=="number"&&l>=0);var g=Math.ceil(l/26)|0,m=l%26;this._expand(g),m>0&&g--;for(var c=0;c<g;c++)this.words[c]=~this.words[c]&67108863;return m>0&&(this.words[c]=~this.words[c]&67108863>>26-m),this.strip()},o.prototype.notn=function(l){return this.clone().inotn(l)},o.prototype.setn=function(l,g){r(typeof l=="number"&&l>=0);var m=l/26|0,c=l%26;return this._expand(m+1),g?this.words[m]=this.words[m]|1<<c:this.words[m]=this.words[m]&~(1<<c),this.strip()},o.prototype.iadd=function(l){var g;if(this.negative!==0&&l.negative===0)return this.negative=0,g=this.isub(l),this.negative^=1,this._normSign();if(this.negative===0&&l.negative!==0)return l.negative=0,g=this.isub(l),l.negative=1,g._normSign();var m,c;this.length>l.length?(m=this,c=l):(m=l,c=this);for(var p=0,x=0;x<c.length;x++)g=(m.words[x]|0)+(c.words[x]|0)+p,this.words[x]=g&67108863,p=g>>>26;for(;p!==0&&x<m.length;x++)g=(m.words[x]|0)+p,this.words[x]=g&67108863,p=g>>>26;if(this.length=m.length,p!==0)this.words[this.length]=p,this.length++;else if(m!==this)for(;x<m.length;x++)this.words[x]=m.words[x];return this},o.prototype.add=function(l){var g;return l.negative!==0&&this.negative===0?(l.negative=0,g=this.sub(l),l.negative^=1,g):l.negative===0&&this.negative!==0?(this.negative=0,g=l.sub(this),this.negative=1,g):this.length>l.length?this.clone().iadd(l):l.clone().iadd(this)},o.prototype.isub=function(l){if(l.negative!==0){l.negative=0;var g=this.iadd(l);return l.negative=1,g._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(l),this.negative=1,this._normSign();var m=this.cmp(l);if(m===0)return this.negative=0,this.length=1,this.words[0]=0,this;var c,p;m>0?(c=this,p=l):(c=l,p=this);for(var x=0,E=0;E<p.length;E++)g=(c.words[E]|0)-(p.words[E]|0)+x,x=g>>26,this.words[E]=g&67108863;for(;x!==0&&E<c.length;E++)g=(c.words[E]|0)+x,x=g>>26,this.words[E]=g&67108863;if(x===0&&E<c.length&&c!==this)for(;E<c.length;E++)this.words[E]=c.words[E];return this.length=Math.max(this.length,E),c!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(l){return this.clone().isub(l)};function O(_,l,g){g.negative=l.negative^_.negative;var m=_.length+l.length|0;g.length=m,m=m-1|0;var c=_.words[0]|0,p=l.words[0]|0,x=c*p,E=x&67108863,w=x/67108864|0;g.words[0]=E;for(var b=1;b<m;b++){for(var S=w>>>26,R=w&67108863,v=Math.min(b,l.length-1),T=Math.max(0,b-_.length+1);T<=v;T++){var re=b-T|0;c=_.words[re]|0,p=l.words[T]|0,x=c*p+R,S+=x/67108864|0,R=x&67108863}g.words[b]=R|0,w=S|0}return w!==0?g.words[b]=w|0:g.length--,g.strip()}var A=function(l,g,m){var c=l.words,p=g.words,x=m.words,E=0,w,b,S,R=c[0]|0,v=R&8191,T=R>>>13,re=c[1]|0,k=re&8191,z=re>>>13,Y=c[2]|0,N=Y&8191,P=Y>>>13,G=c[3]|0,J=G&8191,Q=G>>>13,le=c[4]|0,oe=le&8191,W=le>>>13,he=c[5]|0,Z=he&8191,se=he>>>13,q=c[6]|0,ne=q&8191,pe=q>>>13,Ee=c[7]|0,ve=Ee&8191,Ae=Ee>>>13,tr=c[8]|0,ee=tr&8191,V=tr>>>13,I=c[9]|0,H=I&8191,ie=I>>>13,ae=p[0]|0,ce=ae&8191,me=ae>>>13,et=p[1]|0,we=et&8191,be=et>>>13,rt=p[2]|0,Se=rt&8191,Me=rt>>>13,pn=p[3]|0,ke=pn&8191,Ce=pn>>>13,mn=p[4]|0,Oe=mn&8191,De=mn>>>13,bn=p[5]|0,Re=bn&8191,Ie=bn>>>13,gn=p[6]|0,Ne=gn&8191,Pe=gn>>>13,yn=p[7]|0,Le=yn&8191,Be=yn>>>13,vn=p[8]|0,Ue=vn&8191,$e=vn>>>13,xn=p[9]|0,Fe=xn&8191,qe=xn>>>13;m.negative=l.negative^g.negative,m.length=19,w=Math.imul(v,ce),b=Math.imul(v,me),b=b+Math.imul(T,ce)|0,S=Math.imul(T,me);var Vr=(E+w|0)+((b&8191)<<13)|0;E=(S+(b>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,w=Math.imul(k,ce),b=Math.imul(k,me),b=b+Math.imul(z,ce)|0,S=Math.imul(z,me),w=w+Math.imul(v,we)|0,b=b+Math.imul(v,be)|0,b=b+Math.imul(T,we)|0,S=S+Math.imul(T,be)|0;var st=(E+w|0)+((b&8191)<<13)|0;E=(S+(b>>>13)|0)+(st>>>26)|0,st&=67108863,w=Math.imul(N,ce),b=Math.imul(N,me),b=b+Math.imul(P,ce)|0,S=Math.imul(P,me),w=w+Math.imul(k,we)|0,b=b+Math.imul(k,be)|0,b=b+Math.imul(z,we)|0,S=S+Math.imul(z,be)|0,w=w+Math.imul(v,Se)|0,b=b+Math.imul(v,Me)|0,b=b+Math.imul(T,Se)|0,S=S+Math.imul(T,Me)|0;var at=(E+w|0)+((b&8191)<<13)|0;E=(S+(b>>>13)|0)+(at>>>26)|0,at&=67108863,w=Math.imul(J,ce),b=Math.imul(J,me),b=b+Math.imul(Q,ce)|0,S=Math.imul(Q,me),w=w+Math.imul(N,we)|0,b=b+Math.imul(N,be)|0,b=b+Math.imul(P,we)|0,S=S+Math.imul(P,be)|0,w=w+Math.imul(k,Se)|0,b=b+Math.imul(k,Me)|0,b=b+Math.imul(z,Se)|0,S=S+Math.imul(z,Me)|0,w=w+Math.imul(v,ke)|0,b=b+Math.imul(v,Ce)|0,b=b+Math.imul(T,ke)|0,S=S+Math.imul(T,Ce)|0;var Tr=(E+w|0)+((b&8191)<<13)|0;E=(S+(b>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,w=Math.imul(oe,ce),b=Math.imul(oe,me),b=b+Math.imul(W,ce)|0,S=Math.imul(W,me),w=w+Math.imul(J,we)|0,b=b+Math.imul(J,be)|0,b=b+Math.imul(Q,we)|0,S=S+Math.imul(Q,be)|0,w=w+Math.imul(N,Se)|0,b=b+Math.imul(N,Me)|0,b=b+Math.imul(P,Se)|0,S=S+Math.imul(P,Me)|0,w=w+Math.imul(k,ke)|0,b=b+Math.imul(k,Ce)|0,b=b+Math.imul(z,ke)|0,S=S+Math.imul(z,Ce)|0,w=w+Math.imul(v,Oe)|0,b=b+Math.imul(v,De)|0,b=b+Math.imul(T,Oe)|0,S=S+Math.imul(T,De)|0;var Mr=(E+w|0)+((b&8191)<<13)|0;E=(S+(b>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,w=Math.imul(Z,ce),b=Math.imul(Z,me),b=b+Math.imul(se,ce)|0,S=Math.imul(se,me),w=w+Math.imul(oe,we)|0,b=b+Math.imul(oe,be)|0,b=b+Math.imul(W,we)|0,S=S+Math.imul(W,be)|0,w=w+Math.imul(J,Se)|0,b=b+Math.imul(J,Me)|0,b=b+Math.imul(Q,Se)|0,S=S+Math.imul(Q,Me)|0,w=w+Math.imul(N,ke)|0,b=b+Math.imul(N,Ce)|0,b=b+Math.imul(P,ke)|0,S=S+Math.imul(P,Ce)|0,w=w+Math.imul(k,Oe)|0,b=b+Math.imul(k,De)|0,b=b+Math.imul(z,Oe)|0,S=S+Math.imul(z,De)|0,w=w+Math.imul(v,Re)|0,b=b+Math.imul(v,Ie)|0,b=b+Math.imul(T,Re)|0,S=S+Math.imul(T,Ie)|0;var kr=(E+w|0)+((b&8191)<<13)|0;E=(S+(b>>>13)|0)+(kr>>>26)|0,kr&=67108863,w=Math.imul(ne,ce),b=Math.imul(ne,me),b=b+Math.imul(pe,ce)|0,S=Math.imul(pe,me),w=w+Math.imul(Z,we)|0,b=b+Math.imul(Z,be)|0,b=b+Math.imul(se,we)|0,S=S+Math.imul(se,be)|0,w=w+Math.imul(oe,Se)|0,b=b+Math.imul(oe,Me)|0,b=b+Math.imul(W,Se)|0,S=S+Math.imul(W,Me)|0,w=w+Math.imul(J,ke)|0,b=b+Math.imul(J,Ce)|0,b=b+Math.imul(Q,ke)|0,S=S+Math.imul(Q,Ce)|0,w=w+Math.imul(N,Oe)|0,b=b+Math.imul(N,De)|0,b=b+Math.imul(P,Oe)|0,S=S+Math.imul(P,De)|0,w=w+Math.imul(k,Re)|0,b=b+Math.imul(k,Ie)|0,b=b+Math.imul(z,Re)|0,S=S+Math.imul(z,Ie)|0,w=w+Math.imul(v,Ne)|0,b=b+Math.imul(v,Pe)|0,b=b+Math.imul(T,Ne)|0,S=S+Math.imul(T,Pe)|0;var Cr=(E+w|0)+((b&8191)<<13)|0;E=(S+(b>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,w=Math.imul(ve,ce),b=Math.imul(ve,me),b=b+Math.imul(Ae,ce)|0,S=Math.imul(Ae,me),w=w+Math.imul(ne,we)|0,b=b+Math.imul(ne,be)|0,b=b+Math.imul(pe,we)|0,S=S+Math.imul(pe,be)|0,w=w+Math.imul(Z,Se)|0,b=b+Math.imul(Z,Me)|0,b=b+Math.imul(se,Se)|0,S=S+Math.imul(se,Me)|0,w=w+Math.imul(oe,ke)|0,b=b+Math.imul(oe,Ce)|0,b=b+Math.imul(W,ke)|0,S=S+Math.imul(W,Ce)|0,w=w+Math.imul(J,Oe)|0,b=b+Math.imul(J,De)|0,b=b+Math.imul(Q,Oe)|0,S=S+Math.imul(Q,De)|0,w=w+Math.imul(N,Re)|0,b=b+Math.imul(N,Ie)|0,b=b+Math.imul(P,Re)|0,S=S+Math.imul(P,Ie)|0,w=w+Math.imul(k,Ne)|0,b=b+Math.imul(k,Pe)|0,b=b+Math.imul(z,Ne)|0,S=S+Math.imul(z,Pe)|0,w=w+Math.imul(v,Le)|0,b=b+Math.imul(v,Be)|0,b=b+Math.imul(T,Le)|0,S=S+Math.imul(T,Be)|0;var Or=(E+w|0)+((b&8191)<<13)|0;E=(S+(b>>>13)|0)+(Or>>>26)|0,Or&=67108863,w=Math.imul(ee,ce),b=Math.imul(ee,me),b=b+Math.imul(V,ce)|0,S=Math.imul(V,me),w=w+Math.imul(ve,we)|0,b=b+Math.imul(ve,be)|0,b=b+Math.imul(Ae,we)|0,S=S+Math.imul(Ae,be)|0,w=w+Math.imul(ne,Se)|0,b=b+Math.imul(ne,Me)|0,b=b+Math.imul(pe,Se)|0,S=S+Math.imul(pe,Me)|0,w=w+Math.imul(Z,ke)|0,b=b+Math.imul(Z,Ce)|0,b=b+Math.imul(se,ke)|0,S=S+Math.imul(se,Ce)|0,w=w+Math.imul(oe,Oe)|0,b=b+Math.imul(oe,De)|0,b=b+Math.imul(W,Oe)|0,S=S+Math.imul(W,De)|0,w=w+Math.imul(J,Re)|0,b=b+Math.imul(J,Ie)|0,b=b+Math.imul(Q,Re)|0,S=S+Math.imul(Q,Ie)|0,w=w+Math.imul(N,Ne)|0,b=b+Math.imul(N,Pe)|0,b=b+Math.imul(P,Ne)|0,S=S+Math.imul(P,Pe)|0,w=w+Math.imul(k,Le)|0,b=b+Math.imul(k,Be)|0,b=b+Math.imul(z,Le)|0,S=S+Math.imul(z,Be)|0,w=w+Math.imul(v,Ue)|0,b=b+Math.imul(v,$e)|0,b=b+Math.imul(T,Ue)|0,S=S+Math.imul(T,$e)|0;var no=(E+w|0)+((b&8191)<<13)|0;E=(S+(b>>>13)|0)+(no>>>26)|0,no&=67108863,w=Math.imul(H,ce),b=Math.imul(H,me),b=b+Math.imul(ie,ce)|0,S=Math.imul(ie,me),w=w+Math.imul(ee,we)|0,b=b+Math.imul(ee,be)|0,b=b+Math.imul(V,we)|0,S=S+Math.imul(V,be)|0,w=w+Math.imul(ve,Se)|0,b=b+Math.imul(ve,Me)|0,b=b+Math.imul(Ae,Se)|0,S=S+Math.imul(Ae,Me)|0,w=w+Math.imul(ne,ke)|0,b=b+Math.imul(ne,Ce)|0,b=b+Math.imul(pe,ke)|0,S=S+Math.imul(pe,Ce)|0,w=w+Math.imul(Z,Oe)|0,b=b+Math.imul(Z,De)|0,b=b+Math.imul(se,Oe)|0,S=S+Math.imul(se,De)|0,w=w+Math.imul(oe,Re)|0,b=b+Math.imul(oe,Ie)|0,b=b+Math.imul(W,Re)|0,S=S+Math.imul(W,Ie)|0,w=w+Math.imul(J,Ne)|0,b=b+Math.imul(J,Pe)|0,b=b+Math.imul(Q,Ne)|0,S=S+Math.imul(Q,Pe)|0,w=w+Math.imul(N,Le)|0,b=b+Math.imul(N,Be)|0,b=b+Math.imul(P,Le)|0,S=S+Math.imul(P,Be)|0,w=w+Math.imul(k,Ue)|0,b=b+Math.imul(k,$e)|0,b=b+Math.imul(z,Ue)|0,S=S+Math.imul(z,$e)|0,w=w+Math.imul(v,Fe)|0,b=b+Math.imul(v,qe)|0,b=b+Math.imul(T,Fe)|0,S=S+Math.imul(T,qe)|0;var io=(E+w|0)+((b&8191)<<13)|0;E=(S+(b>>>13)|0)+(io>>>26)|0,io&=67108863,w=Math.imul(H,we),b=Math.imul(H,be),b=b+Math.imul(ie,we)|0,S=Math.imul(ie,be),w=w+Math.imul(ee,Se)|0,b=b+Math.imul(ee,Me)|0,b=b+Math.imul(V,Se)|0,S=S+Math.imul(V,Me)|0,w=w+Math.imul(ve,ke)|0,b=b+Math.imul(ve,Ce)|0,b=b+Math.imul(Ae,ke)|0,S=S+Math.imul(Ae,Ce)|0,w=w+Math.imul(ne,Oe)|0,b=b+Math.imul(ne,De)|0,b=b+Math.imul(pe,Oe)|0,S=S+Math.imul(pe,De)|0,w=w+Math.imul(Z,Re)|0,b=b+Math.imul(Z,Ie)|0,b=b+Math.imul(se,Re)|0,S=S+Math.imul(se,Ie)|0,w=w+Math.imul(oe,Ne)|0,b=b+Math.imul(oe,Pe)|0,b=b+Math.imul(W,Ne)|0,S=S+Math.imul(W,Pe)|0,w=w+Math.imul(J,Le)|0,b=b+Math.imul(J,Be)|0,b=b+Math.imul(Q,Le)|0,S=S+Math.imul(Q,Be)|0,w=w+Math.imul(N,Ue)|0,b=b+Math.imul(N,$e)|0,b=b+Math.imul(P,Ue)|0,S=S+Math.imul(P,$e)|0,w=w+Math.imul(k,Fe)|0,b=b+Math.imul(k,qe)|0,b=b+Math.imul(z,Fe)|0,S=S+Math.imul(z,qe)|0;var oo=(E+w|0)+((b&8191)<<13)|0;E=(S+(b>>>13)|0)+(oo>>>26)|0,oo&=67108863,w=Math.imul(H,Se),b=Math.imul(H,Me),b=b+Math.imul(ie,Se)|0,S=Math.imul(ie,Me),w=w+Math.imul(ee,ke)|0,b=b+Math.imul(ee,Ce)|0,b=b+Math.imul(V,ke)|0,S=S+Math.imul(V,Ce)|0,w=w+Math.imul(ve,Oe)|0,b=b+Math.imul(ve,De)|0,b=b+Math.imul(Ae,Oe)|0,S=S+Math.imul(Ae,De)|0,w=w+Math.imul(ne,Re)|0,b=b+Math.imul(ne,Ie)|0,b=b+Math.imul(pe,Re)|0,S=S+Math.imul(pe,Ie)|0,w=w+Math.imul(Z,Ne)|0,b=b+Math.imul(Z,Pe)|0,b=b+Math.imul(se,Ne)|0,S=S+Math.imul(se,Pe)|0,w=w+Math.imul(oe,Le)|0,b=b+Math.imul(oe,Be)|0,b=b+Math.imul(W,Le)|0,S=S+Math.imul(W,Be)|0,w=w+Math.imul(J,Ue)|0,b=b+Math.imul(J,$e)|0,b=b+Math.imul(Q,Ue)|0,S=S+Math.imul(Q,$e)|0,w=w+Math.imul(N,Fe)|0,b=b+Math.imul(N,qe)|0,b=b+Math.imul(P,Fe)|0,S=S+Math.imul(P,qe)|0;var so=(E+w|0)+((b&8191)<<13)|0;E=(S+(b>>>13)|0)+(so>>>26)|0,so&=67108863,w=Math.imul(H,ke),b=Math.imul(H,Ce),b=b+Math.imul(ie,ke)|0,S=Math.imul(ie,Ce),w=w+Math.imul(ee,Oe)|0,b=b+Math.imul(ee,De)|0,b=b+Math.imul(V,Oe)|0,S=S+Math.imul(V,De)|0,w=w+Math.imul(ve,Re)|0,b=b+Math.imul(ve,Ie)|0,b=b+Math.imul(Ae,Re)|0,S=S+Math.imul(Ae,Ie)|0,w=w+Math.imul(ne,Ne)|0,b=b+Math.imul(ne,Pe)|0,b=b+Math.imul(pe,Ne)|0,S=S+Math.imul(pe,Pe)|0,w=w+Math.imul(Z,Le)|0,b=b+Math.imul(Z,Be)|0,b=b+Math.imul(se,Le)|0,S=S+Math.imul(se,Be)|0,w=w+Math.imul(oe,Ue)|0,b=b+Math.imul(oe,$e)|0,b=b+Math.imul(W,Ue)|0,S=S+Math.imul(W,$e)|0,w=w+Math.imul(J,Fe)|0,b=b+Math.imul(J,qe)|0,b=b+Math.imul(Q,Fe)|0,S=S+Math.imul(Q,qe)|0;var ao=(E+w|0)+((b&8191)<<13)|0;E=(S+(b>>>13)|0)+(ao>>>26)|0,ao&=67108863,w=Math.imul(H,Oe),b=Math.imul(H,De),b=b+Math.imul(ie,Oe)|0,S=Math.imul(ie,De),w=w+Math.imul(ee,Re)|0,b=b+Math.imul(ee,Ie)|0,b=b+Math.imul(V,Re)|0,S=S+Math.imul(V,Ie)|0,w=w+Math.imul(ve,Ne)|0,b=b+Math.imul(ve,Pe)|0,b=b+Math.imul(Ae,Ne)|0,S=S+Math.imul(Ae,Pe)|0,w=w+Math.imul(ne,Le)|0,b=b+Math.imul(ne,Be)|0,b=b+Math.imul(pe,Le)|0,S=S+Math.imul(pe,Be)|0,w=w+Math.imul(Z,Ue)|0,b=b+Math.imul(Z,$e)|0,b=b+Math.imul(se,Ue)|0,S=S+Math.imul(se,$e)|0,w=w+Math.imul(oe,Fe)|0,b=b+Math.imul(oe,qe)|0,b=b+Math.imul(W,Fe)|0,S=S+Math.imul(W,qe)|0;var fo=(E+w|0)+((b&8191)<<13)|0;E=(S+(b>>>13)|0)+(fo>>>26)|0,fo&=67108863,w=Math.imul(H,Re),b=Math.imul(H,Ie),b=b+Math.imul(ie,Re)|0,S=Math.imul(ie,Ie),w=w+Math.imul(ee,Ne)|0,b=b+Math.imul(ee,Pe)|0,b=b+Math.imul(V,Ne)|0,S=S+Math.imul(V,Pe)|0,w=w+Math.imul(ve,Le)|0,b=b+Math.imul(ve,Be)|0,b=b+Math.imul(Ae,Le)|0,S=S+Math.imul(Ae,Be)|0,w=w+Math.imul(ne,Ue)|0,b=b+Math.imul(ne,$e)|0,b=b+Math.imul(pe,Ue)|0,S=S+Math.imul(pe,$e)|0,w=w+Math.imul(Z,Fe)|0,b=b+Math.imul(Z,qe)|0,b=b+Math.imul(se,Fe)|0,S=S+Math.imul(se,qe)|0;var co=(E+w|0)+((b&8191)<<13)|0;E=(S+(b>>>13)|0)+(co>>>26)|0,co&=67108863,w=Math.imul(H,Ne),b=Math.imul(H,Pe),b=b+Math.imul(ie,Ne)|0,S=Math.imul(ie,Pe),w=w+Math.imul(ee,Le)|0,b=b+Math.imul(ee,Be)|0,b=b+Math.imul(V,Le)|0,S=S+Math.imul(V,Be)|0,w=w+Math.imul(ve,Ue)|0,b=b+Math.imul(ve,$e)|0,b=b+Math.imul(Ae,Ue)|0,S=S+Math.imul(Ae,$e)|0,w=w+Math.imul(ne,Fe)|0,b=b+Math.imul(ne,qe)|0,b=b+Math.imul(pe,Fe)|0,S=S+Math.imul(pe,qe)|0;var uo=(E+w|0)+((b&8191)<<13)|0;E=(S+(b>>>13)|0)+(uo>>>26)|0,uo&=67108863,w=Math.imul(H,Le),b=Math.imul(H,Be),b=b+Math.imul(ie,Le)|0,S=Math.imul(ie,Be),w=w+Math.imul(ee,Ue)|0,b=b+Math.imul(ee,$e)|0,b=b+Math.imul(V,Ue)|0,S=S+Math.imul(V,$e)|0,w=w+Math.imul(ve,Fe)|0,b=b+Math.imul(ve,qe)|0,b=b+Math.imul(Ae,Fe)|0,S=S+Math.imul(Ae,qe)|0;var lo=(E+w|0)+((b&8191)<<13)|0;E=(S+(b>>>13)|0)+(lo>>>26)|0,lo&=67108863,w=Math.imul(H,Ue),b=Math.imul(H,$e),b=b+Math.imul(ie,Ue)|0,S=Math.imul(ie,$e),w=w+Math.imul(ee,Fe)|0,b=b+Math.imul(ee,qe)|0,b=b+Math.imul(V,Fe)|0,S=S+Math.imul(V,qe)|0;var ho=(E+w|0)+((b&8191)<<13)|0;E=(S+(b>>>13)|0)+(ho>>>26)|0,ho&=67108863,w=Math.imul(H,Fe),b=Math.imul(H,qe),b=b+Math.imul(ie,Fe)|0,S=Math.imul(ie,qe);var po=(E+w|0)+((b&8191)<<13)|0;return E=(S+(b>>>13)|0)+(po>>>26)|0,po&=67108863,x[0]=Vr,x[1]=st,x[2]=at,x[3]=Tr,x[4]=Mr,x[5]=kr,x[6]=Cr,x[7]=Or,x[8]=no,x[9]=io,x[10]=oo,x[11]=so,x[12]=ao,x[13]=fo,x[14]=co,x[15]=uo,x[16]=lo,x[17]=ho,x[18]=po,E!==0&&(x[19]=E,m.length++),m};Math.imul||(A=O);function M(_,l,g){g.negative=l.negative^_.negative,g.length=_.length+l.length;for(var m=0,c=0,p=0;p<g.length-1;p++){var x=c;c=0;for(var E=m&67108863,w=Math.min(p,l.length-1),b=Math.max(0,p-_.length+1);b<=w;b++){var S=p-b,R=_.words[S]|0,v=l.words[b]|0,T=R*v,re=T&67108863;x=x+(T/67108864|0)|0,re=re+E|0,E=re&67108863,x=x+(re>>>26)|0,c+=x>>>26,x&=67108863}g.words[p]=E,m=x,x=c}return m!==0?g.words[p]=m:g.length--,g.strip()}function F(_,l,g){var m=new D;return m.mulp(_,l,g)}o.prototype.mulTo=function(l,g){var m,c=this.length+l.length;return this.length===10&&l.length===10?m=A(this,l,g):c<63?m=O(this,l,g):c<1024?m=M(this,l,g):m=F(this,l,g),m};function D(_,l){this.x=_,this.y=l}D.prototype.makeRBT=function(l){for(var g=new Array(l),m=o.prototype._countBits(l)-1,c=0;c<l;c++)g[c]=this.revBin(c,m,l);return g},D.prototype.revBin=function(l,g,m){if(l===0||l===m-1)return l;for(var c=0,p=0;p<g;p++)c|=(l&1)<<g-p-1,l>>=1;return c},D.prototype.permute=function(l,g,m,c,p,x){for(var E=0;E<x;E++)c[E]=g[l[E]],p[E]=m[l[E]]},D.prototype.transform=function(l,g,m,c,p,x){this.permute(x,l,g,m,c,p);for(var E=1;E<p;E<<=1)for(var w=E<<1,b=Math.cos(2*Math.PI/w),S=Math.sin(2*Math.PI/w),R=0;R<p;R+=w)for(var v=b,T=S,re=0;re<E;re++){var k=m[R+re],z=c[R+re],Y=m[R+re+E],N=c[R+re+E],P=v*Y-T*N;N=v*N+T*Y,Y=P,m[R+re]=k+Y,c[R+re]=z+N,m[R+re+E]=k-Y,c[R+re+E]=z-N,re!==w&&(P=b*v-S*T,T=b*T+S*v,v=P)}},D.prototype.guessLen13b=function(l,g){var m=Math.max(g,l)|1,c=m&1,p=0;for(m=m/2|0;m;m=m>>>1)p++;return 1<<p+1+c},D.prototype.conjugate=function(l,g,m){if(!(m<=1))for(var c=0;c<m/2;c++){var p=l[c];l[c]=l[m-c-1],l[m-c-1]=p,p=g[c],g[c]=-g[m-c-1],g[m-c-1]=-p}},D.prototype.normalize13b=function(l,g){for(var m=0,c=0;c<g/2;c++){var p=Math.round(l[2*c+1]/g)*8192+Math.round(l[2*c]/g)+m;l[c]=p&67108863,p<67108864?m=0:m=p/67108864|0}return l},D.prototype.convert13b=function(l,g,m,c){for(var p=0,x=0;x<g;x++)p=p+(l[x]|0),m[2*x]=p&8191,p=p>>>13,m[2*x+1]=p&8191,p=p>>>13;for(x=2*g;x<c;++x)m[x]=0;r(p===0),r((p&-8192)===0)},D.prototype.stub=function(l){for(var g=new Array(l),m=0;m<l;m++)g[m]=0;return g},D.prototype.mulp=function(l,g,m){var c=2*this.guessLen13b(l.length,g.length),p=this.makeRBT(c),x=this.stub(c),E=new Array(c),w=new Array(c),b=new Array(c),S=new Array(c),R=new Array(c),v=new Array(c),T=m.words;T.length=c,this.convert13b(l.words,l.length,E,c),this.convert13b(g.words,g.length,S,c),this.transform(E,x,w,b,c,p),this.transform(S,x,R,v,c,p);for(var re=0;re<c;re++){var k=w[re]*R[re]-b[re]*v[re];b[re]=w[re]*v[re]+b[re]*R[re],w[re]=k}return this.conjugate(w,b,c),this.transform(w,b,T,x,c,p),this.conjugate(T,x,c),this.normalize13b(T,c),m.negative=l.negative^g.negative,m.length=l.length+g.length,m.strip()},o.prototype.mul=function(l){var g=new o(null);return g.words=new Array(this.length+l.length),this.mulTo(l,g)},o.prototype.mulf=function(l){var g=new o(null);return g.words=new Array(this.length+l.length),F(this,l,g)},o.prototype.imul=function(l){return this.clone().mulTo(l,this)},o.prototype.imuln=function(l){r(typeof l=="number"),r(l<67108864);for(var g=0,m=0;m<this.length;m++){var c=(this.words[m]|0)*l,p=(c&67108863)+(g&67108863);g>>=26,g+=c/67108864|0,g+=p>>>26,this.words[m]=p&67108863}return g!==0&&(this.words[m]=g,this.length++),this},o.prototype.muln=function(l){return this.clone().imuln(l)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(l){var g=C(l);if(g.length===0)return new o(1);for(var m=this,c=0;c<g.length&&g[c]===0;c++,m=m.sqr());if(++c<g.length)for(var p=m.sqr();c<g.length;c++,p=p.sqr())g[c]!==0&&(m=m.mul(p));return m},o.prototype.iushln=function(l){r(typeof l=="number"&&l>=0);var g=l%26,m=(l-g)/26,c=67108863>>>26-g<<26-g,p;if(g!==0){var x=0;for(p=0;p<this.length;p++){var E=this.words[p]&c,w=(this.words[p]|0)-E<<g;this.words[p]=w|x,x=E>>>26-g}x&&(this.words[p]=x,this.length++)}if(m!==0){for(p=this.length-1;p>=0;p--)this.words[p+m]=this.words[p];for(p=0;p<m;p++)this.words[p]=0;this.length+=m}return this.strip()},o.prototype.ishln=function(l){return r(this.negative===0),this.iushln(l)},o.prototype.iushrn=function(l,g,m){r(typeof l=="number"&&l>=0);var c;g?c=(g-g%26)/26:c=0;var p=l%26,x=Math.min((l-p)/26,this.length),E=67108863^67108863>>>p<<p,w=m;if(c-=x,c=Math.max(0,c),w){for(var b=0;b<x;b++)w.words[b]=this.words[b];w.length=x}if(x!==0)if(this.length>x)for(this.length-=x,b=0;b<this.length;b++)this.words[b]=this.words[b+x];else this.words[0]=0,this.length=1;var S=0;for(b=this.length-1;b>=0&&(S!==0||b>=c);b--){var R=this.words[b]|0;this.words[b]=S<<26-p|R>>>p,S=R&E}return w&&S!==0&&(w.words[w.length++]=S),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(l,g,m){return r(this.negative===0),this.iushrn(l,g,m)},o.prototype.shln=function(l){return this.clone().ishln(l)},o.prototype.ushln=function(l){return this.clone().iushln(l)},o.prototype.shrn=function(l){return this.clone().ishrn(l)},o.prototype.ushrn=function(l){return this.clone().iushrn(l)},o.prototype.testn=function(l){r(typeof l=="number"&&l>=0);var g=l%26,m=(l-g)/26,c=1<<g;if(this.length<=m)return!1;var p=this.words[m];return!!(p&c)},o.prototype.imaskn=function(l){r(typeof l=="number"&&l>=0);var g=l%26,m=(l-g)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=m)return this;if(g!==0&&m++,this.length=Math.min(m,this.length),g!==0){var c=67108863^67108863>>>g<<g;this.words[this.length-1]&=c}return this.strip()},o.prototype.maskn=function(l){return this.clone().imaskn(l)},o.prototype.iaddn=function(l){return r(typeof l=="number"),r(l<67108864),l<0?this.isubn(-l):this.negative!==0?this.length===1&&(this.words[0]|0)<l?(this.words[0]=l-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(l),this.negative=1,this):this._iaddn(l)},o.prototype._iaddn=function(l){this.words[0]+=l;for(var g=0;g<this.length&&this.words[g]>=67108864;g++)this.words[g]-=67108864,g===this.length-1?this.words[g+1]=1:this.words[g+1]++;return this.length=Math.max(this.length,g+1),this},o.prototype.isubn=function(l){if(r(typeof l=="number"),r(l<67108864),l<0)return this.iaddn(-l);if(this.negative!==0)return this.negative=0,this.iaddn(l),this.negative=1,this;if(this.words[0]-=l,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var g=0;g<this.length&&this.words[g]<0;g++)this.words[g]+=67108864,this.words[g+1]-=1;return this.strip()},o.prototype.addn=function(l){return this.clone().iaddn(l)},o.prototype.subn=function(l){return this.clone().isubn(l)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(l,g,m){var c=l.length+m,p;this._expand(c);var x,E=0;for(p=0;p<l.length;p++){x=(this.words[p+m]|0)+E;var w=(l.words[p]|0)*g;x-=w&67108863,E=(x>>26)-(w/67108864|0),this.words[p+m]=x&67108863}for(;p<this.length-m;p++)x=(this.words[p+m]|0)+E,E=x>>26,this.words[p+m]=x&67108863;if(E===0)return this.strip();for(r(E===-1),E=0,p=0;p<this.length;p++)x=-(this.words[p]|0)+E,E=x>>26,this.words[p]=x&67108863;return this.negative=1,this.strip()},o.prototype._wordDiv=function(l,g){var m=this.length-l.length,c=this.clone(),p=l,x=p.words[p.length-1]|0,E=this._countBits(x);m=26-E,m!==0&&(p=p.ushln(m),c.iushln(m),x=p.words[p.length-1]|0);var w=c.length-p.length,b;if(g!=="mod"){b=new o(null),b.length=w+1,b.words=new Array(b.length);for(var S=0;S<b.length;S++)b.words[S]=0}var R=c.clone()._ishlnsubmul(p,1,w);R.negative===0&&(c=R,b&&(b.words[w]=1));for(var v=w-1;v>=0;v--){var T=(c.words[p.length+v]|0)*67108864+(c.words[p.length+v-1]|0);for(T=Math.min(T/x|0,67108863),c._ishlnsubmul(p,T,v);c.negative!==0;)T--,c.negative=0,c._ishlnsubmul(p,1,v),c.isZero()||(c.negative^=1);b&&(b.words[v]=T)}return b&&b.strip(),c.strip(),g!=="div"&&m!==0&&c.iushrn(m),{div:b||null,mod:c}},o.prototype.divmod=function(l,g,m){if(r(!l.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var c,p,x;return this.negative!==0&&l.negative===0?(x=this.neg().divmod(l,g),g!=="mod"&&(c=x.div.neg()),g!=="div"&&(p=x.mod.neg(),m&&p.negative!==0&&p.iadd(l)),{div:c,mod:p}):this.negative===0&&l.negative!==0?(x=this.divmod(l.neg(),g),g!=="mod"&&(c=x.div.neg()),{div:c,mod:x.mod}):this.negative&l.negative?(x=this.neg().divmod(l.neg(),g),g!=="div"&&(p=x.mod.neg(),m&&p.negative!==0&&p.isub(l)),{div:x.div,mod:p}):l.length>this.length||this.cmp(l)<0?{div:new o(0),mod:this}:l.length===1?g==="div"?{div:this.divn(l.words[0]),mod:null}:g==="mod"?{div:null,mod:new o(this.modn(l.words[0]))}:{div:this.divn(l.words[0]),mod:new o(this.modn(l.words[0]))}:this._wordDiv(l,g)},o.prototype.div=function(l){return this.divmod(l,"div",!1).div},o.prototype.mod=function(l){return this.divmod(l,"mod",!1).mod},o.prototype.umod=function(l){return this.divmod(l,"mod",!0).mod},o.prototype.divRound=function(l){var g=this.divmod(l);if(g.mod.isZero())return g.div;var m=g.div.negative!==0?g.mod.isub(l):g.mod,c=l.ushrn(1),p=l.andln(1),x=m.cmp(c);return x<0||p===1&&x===0?g.div:g.div.negative!==0?g.div.isubn(1):g.div.iaddn(1)},o.prototype.modn=function(l){r(l<=67108863);for(var g=(1<<26)%l,m=0,c=this.length-1;c>=0;c--)m=(g*m+(this.words[c]|0))%l;return m},o.prototype.idivn=function(l){r(l<=67108863);for(var g=0,m=this.length-1;m>=0;m--){var c=(this.words[m]|0)+g*67108864;this.words[m]=c/l|0,g=c%l}return this.strip()},o.prototype.divn=function(l){return this.clone().idivn(l)},o.prototype.egcd=function(l){r(l.negative===0),r(!l.isZero());var g=this,m=l.clone();g.negative!==0?g=g.umod(l):g=g.clone();for(var c=new o(1),p=new o(0),x=new o(0),E=new o(1),w=0;g.isEven()&&m.isEven();)g.iushrn(1),m.iushrn(1),++w;for(var b=m.clone(),S=g.clone();!g.isZero();){for(var R=0,v=1;!(g.words[0]&v)&&R<26;++R,v<<=1);if(R>0)for(g.iushrn(R);R-- >0;)(c.isOdd()||p.isOdd())&&(c.iadd(b),p.isub(S)),c.iushrn(1),p.iushrn(1);for(var T=0,re=1;!(m.words[0]&re)&&T<26;++T,re<<=1);if(T>0)for(m.iushrn(T);T-- >0;)(x.isOdd()||E.isOdd())&&(x.iadd(b),E.isub(S)),x.iushrn(1),E.iushrn(1);g.cmp(m)>=0?(g.isub(m),c.isub(x),p.isub(E)):(m.isub(g),x.isub(c),E.isub(p))}return{a:x,b:E,gcd:m.iushln(w)}},o.prototype._invmp=function(l){r(l.negative===0),r(!l.isZero());var g=this,m=l.clone();g.negative!==0?g=g.umod(l):g=g.clone();for(var c=new o(1),p=new o(0),x=m.clone();g.cmpn(1)>0&&m.cmpn(1)>0;){for(var E=0,w=1;!(g.words[0]&w)&&E<26;++E,w<<=1);if(E>0)for(g.iushrn(E);E-- >0;)c.isOdd()&&c.iadd(x),c.iushrn(1);for(var b=0,S=1;!(m.words[0]&S)&&b<26;++b,S<<=1);if(b>0)for(m.iushrn(b);b-- >0;)p.isOdd()&&p.iadd(x),p.iushrn(1);g.cmp(m)>=0?(g.isub(m),c.isub(p)):(m.isub(g),p.isub(c))}var R;return g.cmpn(1)===0?R=c:R=p,R.cmpn(0)<0&&R.iadd(l),R},o.prototype.gcd=function(l){if(this.isZero())return l.abs();if(l.isZero())return this.abs();var g=this.clone(),m=l.clone();g.negative=0,m.negative=0;for(var c=0;g.isEven()&&m.isEven();c++)g.iushrn(1),m.iushrn(1);do{for(;g.isEven();)g.iushrn(1);for(;m.isEven();)m.iushrn(1);var p=g.cmp(m);if(p<0){var x=g;g=m,m=x}else if(p===0||m.cmpn(1)===0)break;g.isub(m)}while(!0);return m.iushln(c)},o.prototype.invm=function(l){return this.egcd(l).a.umod(l)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(l){return this.words[0]&l},o.prototype.bincn=function(l){r(typeof l=="number");var g=l%26,m=(l-g)/26,c=1<<g;if(this.length<=m)return this._expand(m+1),this.words[m]|=c,this;for(var p=c,x=m;p!==0&&x<this.length;x++){var E=this.words[x]|0;E+=p,p=E>>>26,E&=67108863,this.words[x]=E}return p!==0&&(this.words[x]=p,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(l){var g=l<0;if(this.negative!==0&&!g)return-1;if(this.negative===0&&g)return 1;this.strip();var m;if(this.length>1)m=1;else{g&&(l=-l),r(l<=67108863,"Number is too big");var c=this.words[0]|0;m=c===l?0:c<l?-1:1}return this.negative!==0?-m|0:m},o.prototype.cmp=function(l){if(this.negative!==0&&l.negative===0)return-1;if(this.negative===0&&l.negative!==0)return 1;var g=this.ucmp(l);return this.negative!==0?-g|0:g},o.prototype.ucmp=function(l){if(this.length>l.length)return 1;if(this.length<l.length)return-1;for(var g=0,m=this.length-1;m>=0;m--){var c=this.words[m]|0,p=l.words[m]|0;if(c!==p){c<p?g=-1:c>p&&(g=1);break}}return g},o.prototype.gtn=function(l){return this.cmpn(l)===1},o.prototype.gt=function(l){return this.cmp(l)===1},o.prototype.gten=function(l){return this.cmpn(l)>=0},o.prototype.gte=function(l){return this.cmp(l)>=0},o.prototype.ltn=function(l){return this.cmpn(l)===-1},o.prototype.lt=function(l){return this.cmp(l)===-1},o.prototype.lten=function(l){return this.cmpn(l)<=0},o.prototype.lte=function(l){return this.cmp(l)<=0},o.prototype.eqn=function(l){return this.cmpn(l)===0},o.prototype.eq=function(l){return this.cmp(l)===0},o.red=function(l){return new U(l)},o.prototype.toRed=function(l){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),l.convertTo(this)._forceRed(l)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(l){return this.red=l,this},o.prototype.forceRed=function(l){return r(!this.red,"Already a number in reduction context"),this._forceRed(l)},o.prototype.redAdd=function(l){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,l)},o.prototype.redIAdd=function(l){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,l)},o.prototype.redSub=function(l){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,l)},o.prototype.redISub=function(l){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,l)},o.prototype.redShl=function(l){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,l)},o.prototype.redMul=function(l){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.mul(this,l)},o.prototype.redIMul=function(l){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.imul(this,l)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(l){return r(this.red&&!l.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,l)};var $={k256:null,p224:null,p192:null,p25519:null};function K(_,l){this.name=_,this.p=new o(l,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}K.prototype._tmp=function(){var l=new o(null);return l.words=new Array(Math.ceil(this.n/13)),l},K.prototype.ireduce=function(l){var g=l,m;do this.split(g,this.tmp),g=this.imulK(g),g=g.iadd(this.tmp),m=g.bitLength();while(m>this.n);var c=m<this.n?-1:g.ucmp(this.p);return c===0?(g.words[0]=0,g.length=1):c>0?g.isub(this.p):g.strip!==void 0?g.strip():g._strip(),g},K.prototype.split=function(l,g){l.iushrn(this.n,0,g)},K.prototype.imulK=function(l){return l.imul(this.k)};function j(){K.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(j,K),j.prototype.split=function(l,g){for(var m=4194303,c=Math.min(l.length,9),p=0;p<c;p++)g.words[p]=l.words[p];if(g.length=c,l.length<=9){l.words[0]=0,l.length=1;return}var x=l.words[9];for(g.words[g.length++]=x&m,p=10;p<l.length;p++){var E=l.words[p]|0;l.words[p-10]=(E&m)<<4|x>>>22,x=E}x>>>=22,l.words[p-10]=x,x===0&&l.length>10?l.length-=10:l.length-=9},j.prototype.imulK=function(l){l.words[l.length]=0,l.words[l.length+1]=0,l.length+=2;for(var g=0,m=0;m<l.length;m++){var c=l.words[m]|0;g+=c*977,l.words[m]=g&67108863,g=c*64+(g/67108864|0)}return l.words[l.length-1]===0&&(l.length--,l.words[l.length-1]===0&&l.length--),l};function X(){K.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(X,K);function B(){K.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(B,K);function L(){K.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(L,K),L.prototype.imulK=function(l){for(var g=0,m=0;m<l.length;m++){var c=(l.words[m]|0)*19+g,p=c&67108863;c>>>=26,l.words[m]=p,g=c}return g!==0&&(l.words[l.length++]=g),l},o._prime=function(l){if($[l])return $[l];var g;if(l==="k256")g=new j;else if(l==="p224")g=new X;else if(l==="p192")g=new B;else if(l==="p25519")g=new L;else throw new Error("Unknown prime "+l);return $[l]=g,g};function U(_){if(typeof _=="string"){var l=o._prime(_);this.m=l.p,this.prime=l}else r(_.gtn(1),"modulus must be greater than 1"),this.m=_,this.prime=null}U.prototype._verify1=function(l){r(l.negative===0,"red works only with positives"),r(l.red,"red works only with red numbers")},U.prototype._verify2=function(l,g){r((l.negative|g.negative)===0,"red works only with positives"),r(l.red&&l.red===g.red,"red works only with red numbers")},U.prototype.imod=function(l){return this.prime?this.prime.ireduce(l)._forceRed(this):l.umod(this.m)._forceRed(this)},U.prototype.neg=function(l){return l.isZero()?l.clone():this.m.sub(l)._forceRed(this)},U.prototype.add=function(l,g){this._verify2(l,g);var m=l.add(g);return m.cmp(this.m)>=0&&m.isub(this.m),m._forceRed(this)},U.prototype.iadd=function(l,g){this._verify2(l,g);var m=l.iadd(g);return m.cmp(this.m)>=0&&m.isub(this.m),m},U.prototype.sub=function(l,g){this._verify2(l,g);var m=l.sub(g);return m.cmpn(0)<0&&m.iadd(this.m),m._forceRed(this)},U.prototype.isub=function(l,g){this._verify2(l,g);var m=l.isub(g);return m.cmpn(0)<0&&m.iadd(this.m),m},U.prototype.shl=function(l,g){return this._verify1(l),this.imod(l.ushln(g))},U.prototype.imul=function(l,g){return this._verify2(l,g),this.imod(l.imul(g))},U.prototype.mul=function(l,g){return this._verify2(l,g),this.imod(l.mul(g))},U.prototype.isqr=function(l){return this.imul(l,l.clone())},U.prototype.sqr=function(l){return this.mul(l,l)},U.prototype.sqrt=function(l){if(l.isZero())return l.clone();var g=this.m.andln(3);if(r(g%2===1),g===3){var m=this.m.add(new o(1)).iushrn(2);return this.pow(l,m)}for(var c=this.m.subn(1),p=0;!c.isZero()&&c.andln(1)===0;)p++,c.iushrn(1);r(!c.isZero());var x=new o(1).toRed(this),E=x.redNeg(),w=this.m.subn(1).iushrn(1),b=this.m.bitLength();for(b=new o(2*b*b).toRed(this);this.pow(b,w).cmp(E)!==0;)b.redIAdd(E);for(var S=this.pow(b,c),R=this.pow(l,c.addn(1).iushrn(1)),v=this.pow(l,c),T=p;v.cmp(x)!==0;){for(var re=v,k=0;re.cmp(x)!==0;k++)re=re.redSqr();r(k<T);var z=this.pow(S,new o(1).iushln(T-k-1));R=R.redMul(z),S=z.redSqr(),v=v.redMul(S),T=k}return R},U.prototype.invm=function(l){var g=l._invmp(this.m);return g.negative!==0?(g.negative=0,this.imod(g).redNeg()):this.imod(g)},U.prototype.pow=function(l,g){if(g.isZero())return new o(1).toRed(this);if(g.cmpn(1)===0)return l.clone();var m=4,c=new Array(1<<m);c[0]=new o(1).toRed(this),c[1]=l;for(var p=2;p<c.length;p++)c[p]=this.mul(c[p-1],l);var x=c[0],E=0,w=0,b=g.bitLength()%26;for(b===0&&(b=26),p=g.length-1;p>=0;p--){for(var S=g.words[p],R=b-1;R>=0;R--){var v=S>>R&1;if(x!==c[0]&&(x=this.sqr(x)),v===0&&E===0){w=0;continue}E<<=1,E|=v,w++,!(w!==m&&(p!==0||R!==0))&&(x=this.mul(x,c[E]),w=0,E=0)}b=26}return x},U.prototype.convertTo=function(l){var g=l.umod(this.m);return g===l?g.clone():g},U.prototype.convertFrom=function(l){var g=l.clone();return g.red=null,g},o.mont=function(l){return new te(l)};function te(_){U.call(this,_),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(te,U),te.prototype.convertTo=function(l){return this.imod(l.ushln(this.shift))},te.prototype.convertFrom=function(l){var g=this.imod(l.mul(this.rinv));return g.red=null,g},te.prototype.imul=function(l,g){if(l.isZero()||g.isZero())return l.words[0]=0,l.length=1,l;var m=l.imul(g),c=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=m.isub(c).iushrn(this.shift),x=p;return p.cmp(this.m)>=0?x=p.isub(this.m):p.cmpn(0)<0&&(x=p.iadd(this.m)),x._forceRed(this)},te.prototype.mul=function(l,g){if(l.isZero()||g.isZero())return new o(0)._forceRed(this);var m=l.mul(g),c=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=m.isub(c).iushrn(this.shift),x=p;return p.cmp(this.m)>=0?x=p.isub(this.m):p.cmpn(0)<0&&(x=p.iadd(this.m)),x._forceRed(this)},te.prototype.invm=function(l){var g=this.imod(l._invmp(this.m).mul(this.r2));return g._forceRed(this)}})(typeof Mp>"u"||Mp,E6)});var kp=de(A6=>{"use strict";var ml=A6;function yk(n,t){if(Array.isArray(n))return n.slice();if(!n)return[];var r=[];if(typeof n!="string"){for(var i=0;i<n.length;i++)r[i]=n[i]|0;return r}if(t==="hex"){n=n.replace(/[^a-z0-9]+/ig,""),n.length%2!==0&&(n="0"+n);for(var i=0;i<n.length;i+=2)r.push(parseInt(n[i]+n[i+1],16))}else for(var i=0;i<n.length;i++){var o=n.charCodeAt(i),s=o>>8,a=o&255;s?r.push(s,a):r.push(a)}return r}ml.toArray=yk;function _6(n){return n.length===1?"0"+n:n}ml.zero2=_6;function S6(n){for(var t="",r=0;r<n.length;r++)t+=_6(n[r].toString(16));return t}ml.toHex=S6;ml.encode=function(t,r){return r==="hex"?S6(t):t}});var _r=de(T6=>{"use strict";var dn=T6,vk=Bn(),xk=Pi(),bl=kp();dn.assert=xk;dn.toArray=bl.toArray;dn.zero2=bl.zero2;dn.toHex=bl.toHex;dn.encode=bl.encode;function wk(n,t,r){var i=new Array(Math.max(n.bitLength(),r)+1);i.fill(0);for(var o=1<<t+1,s=n.clone(),a=0;a<i.length;a++){var f,u=s.andln(o-1);s.isOdd()?(u>(o>>1)-1?f=(o>>1)-u:f=u,s.isubn(f)):f=0,i[a]=f,s.iushrn(1)}return i}dn.getNAF=wk;function Ek(n,t){var r=[[],[]];n=n.clone(),t=t.clone();for(var i=0,o=0,s;n.cmpn(-i)>0||t.cmpn(-o)>0;){var a=n.andln(3)+i&3,f=t.andln(3)+o&3;a===3&&(a=-1),f===3&&(f=-1);var u;a&1?(s=n.andln(7)+i&7,(s===3||s===5)&&f===2?u=-a:u=a):u=0,r[0].push(u);var d;f&1?(s=t.andln(7)+o&7,(s===3||s===5)&&a===2?d=-f:d=f):d=0,r[1].push(d),2*i===u+1&&(i=1-i),2*o===d+1&&(o=1-o),n.iushrn(1),t.iushrn(1)}return r}dn.getJSF=Ek;function _k(n,t,r){var i="_"+t;n.prototype[t]=function(){return this[i]!==void 0?this[i]:this[i]=r.call(this)}}dn.cachedProperty=_k;function Sk(n){return typeof n=="string"?dn.toArray(n,"hex"):n}dn.parseBytes=Sk;function Ak(n){return new vk(n,"hex","le")}dn.intFromLE=Ak});var Rp=de((WH,Dp)=>{var Cp;Dp.exports=function(t){return Cp||(Cp=new ji(null)),Cp.generate(t)};function ji(n){this.rand=n}Dp.exports.Rand=ji;ji.prototype.generate=function(t){return this._rand(t)};ji.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var r=new Uint8Array(t),i=0;i<r.length;i++)r[i]=this.rand.getByte();return r};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?ji.prototype._rand=function(t){var r=new Uint8Array(t);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?ji.prototype._rand=function(t){var r=new Uint8Array(t);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(ji.prototype._rand=function(){throw new Error("Not implemented yet")});else try{if(Op=i0(),typeof Op.randomBytes!="function")throw new Error("Not supported");ji.prototype._rand=function(t){return Op.randomBytes(t)}}catch{}var Op});var Pf=de((YH,M6)=>{"use strict";var Zo=Bn(),Nf=_r(),gl=Nf.getNAF,Tk=Nf.getJSF,yl=Nf.assert;function Hi(n,t){this.type=n,this.p=new Zo(t.p,16),this.red=t.prime?Zo.red(t.prime):Zo.mont(this.p),this.zero=new Zo(0).toRed(this.red),this.one=new Zo(1).toRed(this.red),this.two=new Zo(2).toRed(this.red),this.n=t.n&&new Zo(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}M6.exports=Hi;Hi.prototype.point=function(){throw new Error("Not implemented")};Hi.prototype.validate=function(){throw new Error("Not implemented")};Hi.prototype._fixedNafMul=function(t,r){yl(t.precomputed);var i=t._getDoubles(),o=gl(r,1,this._bitLength),s=(1<<i.step+1)-(i.step%2===0?2:1);s/=3;var a=[],f,u;for(f=0;f<o.length;f+=i.step){u=0;for(var d=f+i.step-1;d>=f;d--)u=(u<<1)+o[d];a.push(u)}for(var h=this.jpoint(null,null,null),y=this.jpoint(null,null,null),C=s;C>0;C--){for(f=0;f<a.length;f++)u=a[f],u===C?y=y.mixedAdd(i.points[f]):u===-C&&(y=y.mixedAdd(i.points[f].neg()));h=h.add(y)}return h.toP()};Hi.prototype._wnafMul=function(t,r){var i=4,o=t._getNAFPoints(i);i=o.wnd;for(var s=o.points,a=gl(r,i,this._bitLength),f=this.jpoint(null,null,null),u=a.length-1;u>=0;u--){for(var d=0;u>=0&&a[u]===0;u--)d++;if(u>=0&&d++,f=f.dblp(d),u<0)break;var h=a[u];yl(h!==0),t.type==="affine"?h>0?f=f.mixedAdd(s[h-1>>1]):f=f.mixedAdd(s[-h-1>>1].neg()):h>0?f=f.add(s[h-1>>1]):f=f.add(s[-h-1>>1].neg())}return t.type==="affine"?f.toP():f};Hi.prototype._wnafMulAdd=function(t,r,i,o,s){var a=this._wnafT1,f=this._wnafT2,u=this._wnafT3,d=0,h,y,C;for(h=0;h<o;h++){C=r[h];var O=C._getNAFPoints(t);a[h]=O.wnd,f[h]=O.points}for(h=o-1;h>=1;h-=2){var A=h-1,M=h;if(a[A]!==1||a[M]!==1){u[A]=gl(i[A],a[A],this._bitLength),u[M]=gl(i[M],a[M],this._bitLength),d=Math.max(u[A].length,d),d=Math.max(u[M].length,d);continue}var F=[r[A],null,null,r[M]];r[A].y.cmp(r[M].y)===0?(F[1]=r[A].add(r[M]),F[2]=r[A].toJ().mixedAdd(r[M].neg())):r[A].y.cmp(r[M].y.redNeg())===0?(F[1]=r[A].toJ().mixedAdd(r[M]),F[2]=r[A].add(r[M].neg())):(F[1]=r[A].toJ().mixedAdd(r[M]),F[2]=r[A].toJ().mixedAdd(r[M].neg()));var D=[-3,-1,-5,-7,0,7,5,1,3],$=Tk(i[A],i[M]);for(d=Math.max($[0].length,d),u[A]=new Array(d),u[M]=new Array(d),y=0;y<d;y++){var K=$[0][y]|0,j=$[1][y]|0;u[A][y]=D[(K+1)*3+(j+1)],u[M][y]=0,f[A]=F}}var X=this.jpoint(null,null,null),B=this._wnafT4;for(h=d;h>=0;h--){for(var L=0;h>=0;){var U=!0;for(y=0;y<o;y++)B[y]=u[y][h]|0,B[y]!==0&&(U=!1);if(!U)break;L++,h--}if(h>=0&&L++,X=X.dblp(L),h<0)break;for(y=0;y<o;y++){var te=B[y];te!==0&&(te>0?C=f[y][te-1>>1]:te<0&&(C=f[y][-te-1>>1].neg()),C.type==="affine"?X=X.mixedAdd(C):X=X.add(C))}}for(h=0;h<o;h++)f[h]=null;return s?X:X.toP()};function Hr(n,t){this.curve=n,this.type=t,this.precomputed=null}Hi.BasePoint=Hr;Hr.prototype.eq=function(){throw new Error("Not implemented")};Hr.prototype.validate=function(){return this.curve.validate(this)};Hi.prototype.decodePoint=function(t,r){t=Nf.toArray(t,r);var i=this.p.byteLength();if((t[0]===4||t[0]===6||t[0]===7)&&t.length-1===2*i){t[0]===6?yl(t[t.length-1]%2===0):t[0]===7&&yl(t[t.length-1]%2===1);var o=this.point(t.slice(1,1+i),t.slice(1+i,1+2*i));return o}else if((t[0]===2||t[0]===3)&&t.length-1===i)return this.pointFromX(t.slice(1,1+i),t[0]===3);throw new Error("Unknown point format")};Hr.prototype.encodeCompressed=function(t){return this.encode(t,!0)};Hr.prototype._encode=function(t){var r=this.curve.p.byteLength(),i=this.getX().toArray("be",r);return t?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",r))};Hr.prototype.encode=function(t,r){return Nf.encode(this._encode(r),t)};Hr.prototype.precompute=function(t){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,t),r.beta=this._getBeta(),this.precomputed=r,this};Hr.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((t.bitLength()+1)/r.step):!1};Hr.prototype._getDoubles=function(t,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],o=this,s=0;s<r;s+=t){for(var a=0;a<t;a++)o=o.dbl();i.push(o)}return{step:t,points:i}};Hr.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],i=(1<<t)-1,o=i===1?null:this.dbl(),s=1;s<i;s++)r[s]=r[s-1].add(o);return{wnd:t,points:r}};Hr.prototype._getBeta=function(){return null};Hr.prototype.dblp=function(t){for(var r=this,i=0;i<t;i++)r=r.dbl();return r}});var C6=de((XH,k6)=>{"use strict";var Mk=_r(),xt=Bn(),Ip=_f(),ha=Pf(),kk=Mk.assert;function zr(n){ha.call(this,"short",n),this.a=new xt(n.a,16).toRed(this.red),this.b=new xt(n.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(n),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Ip(zr,ha);k6.exports=zr;zr.prototype._getEndomorphism=function(t){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,i;if(t.beta)r=new xt(t.beta,16).toRed(this.red);else{var o=this._getEndoRoots(this.p);r=o[0].cmp(o[1])<0?o[0]:o[1],r=r.toRed(this.red)}if(t.lambda)i=new xt(t.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?i=s[0]:(i=s[1],kk(this.g.mul(i).x.cmp(this.g.x.redMul(r))===0))}var a;return t.basis?a=t.basis.map(function(f){return{a:new xt(f.a,16),b:new xt(f.b,16)}}):a=this._getEndoBasis(i),{beta:r,lambda:i,basis:a}}};zr.prototype._getEndoRoots=function(t){var r=t===this.p?this.red:xt.mont(t),i=new xt(2).toRed(r).redInvm(),o=i.redNeg(),s=new xt(3).toRed(r).redNeg().redSqrt().redMul(i),a=o.redAdd(s).fromRed(),f=o.redSub(s).fromRed();return[a,f]};zr.prototype._getEndoBasis=function(t){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=t,o=this.n.clone(),s=new xt(1),a=new xt(0),f=new xt(0),u=new xt(1),d,h,y,C,O,A,M,F=0,D,$;i.cmpn(0)!==0;){var K=o.div(i);D=o.sub(K.mul(i)),$=f.sub(K.mul(s));var j=u.sub(K.mul(a));if(!y&&D.cmp(r)<0)d=M.neg(),h=s,y=D.neg(),C=$;else if(y&&++F===2)break;M=D,o=i,i=D,f=s,s=$,u=a,a=j}O=D.neg(),A=$;var X=y.sqr().add(C.sqr()),B=O.sqr().add(A.sqr());return B.cmp(X)>=0&&(O=d,A=h),y.negative&&(y=y.neg(),C=C.neg()),O.negative&&(O=O.neg(),A=A.neg()),[{a:y,b:C},{a:O,b:A}]};zr.prototype._endoSplit=function(t){var r=this.endo.basis,i=r[0],o=r[1],s=o.b.mul(t).divRound(this.n),a=i.b.neg().mul(t).divRound(this.n),f=s.mul(i.a),u=a.mul(o.a),d=s.mul(i.b),h=a.mul(o.b),y=t.sub(f).sub(u),C=d.add(h).neg();return{k1:y,k2:C}};zr.prototype.pointFromX=function(t,r){t=new xt(t,16),t.red||(t=t.toRed(this.red));var i=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),o=i.redSqrt();if(o.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var s=o.fromRed().isOdd();return(r&&!s||!r&&s)&&(o=o.redNeg()),this.point(t,o)};zr.prototype.validate=function(t){if(t.inf)return!0;var r=t.x,i=t.y,o=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(o).redIAdd(this.b);return i.redSqr().redISub(s).cmpn(0)===0};zr.prototype._endoWnafMulAdd=function(t,r,i){for(var o=this._endoWnafT1,s=this._endoWnafT2,a=0;a<t.length;a++){var f=this._endoSplit(r[a]),u=t[a],d=u._getBeta();f.k1.negative&&(f.k1.ineg(),u=u.neg(!0)),f.k2.negative&&(f.k2.ineg(),d=d.neg(!0)),o[a*2]=u,o[a*2+1]=d,s[a*2]=f.k1,s[a*2+1]=f.k2}for(var h=this._wnafMulAdd(1,o,s,a*2,i),y=0;y<a*2;y++)o[y]=null,s[y]=null;return h};function Dt(n,t,r,i){ha.BasePoint.call(this,n,"affine"),t===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new xt(t,16),this.y=new xt(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Ip(Dt,ha.BasePoint);zr.prototype.point=function(t,r,i){return new Dt(this,t,r,i)};zr.prototype.pointFromJSON=function(t,r){return Dt.fromJSON(this,t,r)};Dt.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var i=this.curve,o=function(s){return i.point(s.x.redMul(i.endo.beta),s.y)};t.beta=r,r.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(o)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(o)}}}return r}};Dt.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Dt.fromJSON=function(t,r,i){typeof r=="string"&&(r=JSON.parse(r));var o=t.point(r[0],r[1],i);if(!r[2])return o;function s(f){return t.point(f[0],f[1],i)}var a=r[2];return o.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[o].concat(a.doubles.points.map(s))},naf:a.naf&&{wnd:a.naf.wnd,points:[o].concat(a.naf.points.map(s))}},o};Dt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Dt.prototype.isInfinity=function(){return this.inf};Dt.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(this.x.cmp(t.x)===0)return this.curve.point(null,null);var r=this.y.redSub(t.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(t.x).redInvm()));var i=r.redSqr().redISub(this.x).redISub(t.x),o=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,o)};Dt.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(t.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,i=this.x.redSqr(),o=t.redInvm(),s=i.redAdd(i).redIAdd(i).redIAdd(r).redMul(o),a=s.redSqr().redISub(this.x.redAdd(this.x)),f=s.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,f)};Dt.prototype.getX=function(){return this.x.fromRed()};Dt.prototype.getY=function(){return this.y.fromRed()};Dt.prototype.mul=function(t){return t=new xt(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)};Dt.prototype.mulAdd=function(t,r,i){var o=[this,r],s=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(o,s):this.curve._wnafMulAdd(1,o,s,2)};Dt.prototype.jmulAdd=function(t,r,i){var o=[this,r],s=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(o,s,!0):this.curve._wnafMulAdd(1,o,s,2,!0)};Dt.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||this.x.cmp(t.x)===0&&this.y.cmp(t.y)===0)};Dt.prototype.neg=function(t){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var i=this.precomputed,o=function(s){return s.neg()};r.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(o)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(o)}}}return r};Dt.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var t=this.curve.jpoint(this.x,this.y,this.curve.one);return t};function jt(n,t,r,i){ha.BasePoint.call(this,n,"jacobian"),t===null&&r===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new xt(0)):(this.x=new xt(t,16),this.y=new xt(r,16),this.z=new xt(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Ip(jt,ha.BasePoint);zr.prototype.jpoint=function(t,r,i){return new jt(this,t,r,i)};jt.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),r=t.redSqr(),i=this.x.redMul(r),o=this.y.redMul(r).redMul(t);return this.curve.point(i,o)};jt.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};jt.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var r=t.z.redSqr(),i=this.z.redSqr(),o=this.x.redMul(r),s=t.x.redMul(i),a=this.y.redMul(r.redMul(t.z)),f=t.y.redMul(i.redMul(this.z)),u=o.redSub(s),d=a.redSub(f);if(u.cmpn(0)===0)return d.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var h=u.redSqr(),y=h.redMul(u),C=o.redMul(h),O=d.redSqr().redIAdd(y).redISub(C).redISub(C),A=d.redMul(C.redISub(O)).redISub(a.redMul(y)),M=this.z.redMul(t.z).redMul(u);return this.curve.jpoint(O,A,M)};jt.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var r=this.z.redSqr(),i=this.x,o=t.x.redMul(r),s=this.y,a=t.y.redMul(r).redMul(this.z),f=i.redSub(o),u=s.redSub(a);if(f.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var d=f.redSqr(),h=d.redMul(f),y=i.redMul(d),C=u.redSqr().redIAdd(h).redISub(y).redISub(y),O=u.redMul(y.redISub(C)).redISub(s.redMul(h)),A=this.z.redMul(f);return this.curve.jpoint(C,O,A)};jt.prototype.dblp=function(t){if(t===0)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var i=this;for(r=0;r<t;r++)i=i.dbl();return i}var o=this.curve.a,s=this.curve.tinv,a=this.x,f=this.y,u=this.z,d=u.redSqr().redSqr(),h=f.redAdd(f);for(r=0;r<t;r++){var y=a.redSqr(),C=h.redSqr(),O=C.redSqr(),A=y.redAdd(y).redIAdd(y).redIAdd(o.redMul(d)),M=a.redMul(C),F=A.redSqr().redISub(M.redAdd(M)),D=M.redISub(F),$=A.redMul(D);$=$.redIAdd($).redISub(O);var K=h.redMul(u);r+1<t&&(d=d.redMul(O)),a=F,u=K,h=$}return this.curve.jpoint(a,h.redMul(s),u)};jt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};jt.prototype._zeroDbl=function(){var t,r,i;if(this.zOne){var o=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),f=this.x.redAdd(s).redSqr().redISub(o).redISub(a);f=f.redIAdd(f);var u=o.redAdd(o).redIAdd(o),d=u.redSqr().redISub(f).redISub(f),h=a.redIAdd(a);h=h.redIAdd(h),h=h.redIAdd(h),t=d,r=u.redMul(f.redISub(d)).redISub(h),i=this.y.redAdd(this.y)}else{var y=this.x.redSqr(),C=this.y.redSqr(),O=C.redSqr(),A=this.x.redAdd(C).redSqr().redISub(y).redISub(O);A=A.redIAdd(A);var M=y.redAdd(y).redIAdd(y),F=M.redSqr(),D=O.redIAdd(O);D=D.redIAdd(D),D=D.redIAdd(D),t=F.redISub(A).redISub(A),r=M.redMul(A.redISub(t)).redISub(D),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(t,r,i)};jt.prototype._threeDbl=function(){var t,r,i;if(this.zOne){var o=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),f=this.x.redAdd(s).redSqr().redISub(o).redISub(a);f=f.redIAdd(f);var u=o.redAdd(o).redIAdd(o).redIAdd(this.curve.a),d=u.redSqr().redISub(f).redISub(f);t=d;var h=a.redIAdd(a);h=h.redIAdd(h),h=h.redIAdd(h),r=u.redMul(f.redISub(d)).redISub(h),i=this.y.redAdd(this.y)}else{var y=this.z.redSqr(),C=this.y.redSqr(),O=this.x.redMul(C),A=this.x.redSub(y).redMul(this.x.redAdd(y));A=A.redAdd(A).redIAdd(A);var M=O.redIAdd(O);M=M.redIAdd(M);var F=M.redAdd(M);t=A.redSqr().redISub(F),i=this.y.redAdd(this.z).redSqr().redISub(C).redISub(y);var D=C.redSqr();D=D.redIAdd(D),D=D.redIAdd(D),D=D.redIAdd(D),r=A.redMul(M.redISub(t)).redISub(D)}return this.curve.jpoint(t,r,i)};jt.prototype._dbl=function(){var t=this.curve.a,r=this.x,i=this.y,o=this.z,s=o.redSqr().redSqr(),a=r.redSqr(),f=i.redSqr(),u=a.redAdd(a).redIAdd(a).redIAdd(t.redMul(s)),d=r.redAdd(r);d=d.redIAdd(d);var h=d.redMul(f),y=u.redSqr().redISub(h.redAdd(h)),C=h.redISub(y),O=f.redSqr();O=O.redIAdd(O),O=O.redIAdd(O),O=O.redIAdd(O);var A=u.redMul(C).redISub(O),M=i.redAdd(i).redMul(o);return this.curve.jpoint(y,A,M)};jt.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr(),o=r.redSqr(),s=t.redAdd(t).redIAdd(t),a=s.redSqr(),f=this.x.redAdd(r).redSqr().redISub(t).redISub(o);f=f.redIAdd(f),f=f.redAdd(f).redIAdd(f),f=f.redISub(a);var u=f.redSqr(),d=o.redIAdd(o);d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);var h=s.redIAdd(f).redSqr().redISub(a).redISub(u).redISub(d),y=r.redMul(h);y=y.redIAdd(y),y=y.redIAdd(y);var C=this.x.redMul(u).redISub(y);C=C.redIAdd(C),C=C.redIAdd(C);var O=this.y.redMul(h.redMul(d.redISub(h)).redISub(f.redMul(u)));O=O.redIAdd(O),O=O.redIAdd(O),O=O.redIAdd(O);var A=this.z.redAdd(f).redSqr().redISub(i).redISub(u);return this.curve.jpoint(C,O,A)};jt.prototype.mul=function(t,r){return t=new xt(t,r),this.curve._wnafMul(this,t)};jt.prototype.eq=function(t){if(t.type==="affine")return this.eq(t.toJ());if(this===t)return!0;var r=this.z.redSqr(),i=t.z.redSqr();if(this.x.redMul(i).redISub(t.x.redMul(r)).cmpn(0)!==0)return!1;var o=r.redMul(this.z),s=i.redMul(t.z);return this.y.redMul(s).redISub(t.y.redMul(o)).cmpn(0)===0};jt.prototype.eqXToP=function(t){var r=this.z.redSqr(),i=t.toRed(this.curve.red).redMul(r);if(this.x.cmp(i)===0)return!0;for(var o=t.clone(),s=this.curve.redN.redMul(r);;){if(o.iadd(this.curve.n),o.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(s),this.x.cmp(i)===0)return!0}};jt.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};jt.prototype.isInfinity=function(){return this.z.cmpn(0)===0}});var R6=de((ZH,D6)=>{"use strict";var da=Bn(),O6=_f(),vl=Pf(),Ck=_r();function pa(n){vl.call(this,"mont",n),this.a=new da(n.a,16).toRed(this.red),this.b=new da(n.b,16).toRed(this.red),this.i4=new da(4).toRed(this.red).redInvm(),this.two=new da(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}O6(pa,vl);D6.exports=pa;pa.prototype.validate=function(t){var r=t.normalize().x,i=r.redSqr(),o=i.redMul(r).redAdd(i.redMul(this.a)).redAdd(r),s=o.redSqrt();return s.redSqr().cmp(o)===0};function Rt(n,t,r){vl.BasePoint.call(this,n,"projective"),t===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new da(t,16),this.z=new da(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}O6(Rt,vl.BasePoint);pa.prototype.decodePoint=function(t,r){return this.point(Ck.toArray(t,r),1)};pa.prototype.point=function(t,r){return new Rt(this,t,r)};pa.prototype.pointFromJSON=function(t){return Rt.fromJSON(this,t)};Rt.prototype.precompute=function(){};Rt.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Rt.fromJSON=function(t,r){return new Rt(t,r[0],r[1]||t.one)};Rt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Rt.prototype.isInfinity=function(){return this.z.cmpn(0)===0};Rt.prototype.dbl=function(){var t=this.x.redAdd(this.z),r=t.redSqr(),i=this.x.redSub(this.z),o=i.redSqr(),s=r.redSub(o),a=r.redMul(o),f=s.redMul(o.redAdd(this.curve.a24.redMul(s)));return this.curve.point(a,f)};Rt.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};Rt.prototype.diffAdd=function(t,r){var i=this.x.redAdd(this.z),o=this.x.redSub(this.z),s=t.x.redAdd(t.z),a=t.x.redSub(t.z),f=a.redMul(i),u=s.redMul(o),d=r.z.redMul(f.redAdd(u).redSqr()),h=r.x.redMul(f.redISub(u).redSqr());return this.curve.point(d,h)};Rt.prototype.mul=function(t){for(var r=t.clone(),i=this,o=this.curve.point(null,null),s=this,a=[];r.cmpn(0)!==0;r.iushrn(1))a.push(r.andln(1));for(var f=a.length-1;f>=0;f--)a[f]===0?(i=i.diffAdd(o,s),o=o.dbl()):(o=i.diffAdd(o,s),i=i.dbl());return o};Rt.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};Rt.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};Rt.prototype.eq=function(t){return this.getX().cmp(t.getX())===0};Rt.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Rt.prototype.getX=function(){return this.normalize(),this.x.fromRed()}});var P6=de((QH,N6)=>{"use strict";var Ok=_r(),ui=Bn(),I6=_f(),xl=Pf(),Dk=Ok.assert;function Un(n){this.twisted=(n.a|0)!==1,this.mOneA=this.twisted&&(n.a|0)===-1,this.extended=this.mOneA,xl.call(this,"edwards",n),this.a=new ui(n.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new ui(n.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new ui(n.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),Dk(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(n.c|0)===1}I6(Un,xl);N6.exports=Un;Un.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)};Un.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)};Un.prototype.jpoint=function(t,r,i,o){return this.point(t,r,i,o)};Un.prototype.pointFromX=function(t,r){t=new ui(t,16),t.red||(t=t.toRed(this.red));var i=t.redSqr(),o=this.c2.redSub(this.a.redMul(i)),s=this.one.redSub(this.c2.redMul(this.d).redMul(i)),a=o.redMul(s.redInvm()),f=a.redSqrt();if(f.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");var u=f.fromRed().isOdd();return(r&&!u||!r&&u)&&(f=f.redNeg()),this.point(t,f)};Un.prototype.pointFromY=function(t,r){t=new ui(t,16),t.red||(t=t.toRed(this.red));var i=t.redSqr(),o=i.redSub(this.c2),s=i.redMul(this.d).redMul(this.c2).redSub(this.a),a=o.redMul(s.redInvm());if(a.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,t)}var f=a.redSqrt();if(f.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");return f.fromRed().isOdd()!==r&&(f=f.redNeg()),this.point(f,t)};Un.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var r=t.x.redSqr(),i=t.y.redSqr(),o=r.redMul(this.a).redAdd(i),s=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(i)));return o.cmp(s)===0};function pt(n,t,r,i,o){xl.BasePoint.call(this,n,"projective"),t===null&&r===null&&i===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new ui(t,16),this.y=new ui(r,16),this.z=i?new ui(i,16):this.curve.one,this.t=o&&new ui(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}I6(pt,xl.BasePoint);Un.prototype.pointFromJSON=function(t){return pt.fromJSON(this,t)};Un.prototype.point=function(t,r,i,o){return new pt(this,t,r,i,o)};pt.fromJSON=function(t,r){return new pt(t,r[0],r[1],r[2])};pt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};pt.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};pt.prototype._extDbl=function(){var t=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var o=this.curve._mulA(t),s=this.x.redAdd(this.y).redSqr().redISub(t).redISub(r),a=o.redAdd(r),f=a.redSub(i),u=o.redSub(r),d=s.redMul(f),h=a.redMul(u),y=s.redMul(u),C=f.redMul(a);return this.curve.point(d,h,C,y)};pt.prototype._projDbl=function(){var t=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),i=this.y.redSqr(),o,s,a,f,u,d;if(this.curve.twisted){f=this.curve._mulA(r);var h=f.redAdd(i);this.zOne?(o=t.redSub(r).redSub(i).redMul(h.redSub(this.curve.two)),s=h.redMul(f.redSub(i)),a=h.redSqr().redSub(h).redSub(h)):(u=this.z.redSqr(),d=h.redSub(u).redISub(u),o=t.redSub(r).redISub(i).redMul(d),s=h.redMul(f.redSub(i)),a=h.redMul(d))}else f=r.redAdd(i),u=this.curve._mulC(this.z).redSqr(),d=f.redSub(u).redSub(u),o=this.curve._mulC(t.redISub(f)).redMul(d),s=this.curve._mulC(f).redMul(r.redISub(i)),a=f.redMul(d);return this.curve.point(o,s,a)};pt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};pt.prototype._extAdd=function(t){var r=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),i=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),o=this.t.redMul(this.curve.dd).redMul(t.t),s=this.z.redMul(t.z.redAdd(t.z)),a=i.redSub(r),f=s.redSub(o),u=s.redAdd(o),d=i.redAdd(r),h=a.redMul(f),y=u.redMul(d),C=a.redMul(d),O=f.redMul(u);return this.curve.point(h,y,O,C)};pt.prototype._projAdd=function(t){var r=this.z.redMul(t.z),i=r.redSqr(),o=this.x.redMul(t.x),s=this.y.redMul(t.y),a=this.curve.d.redMul(o).redMul(s),f=i.redSub(a),u=i.redAdd(a),d=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(o).redISub(s),h=r.redMul(f).redMul(d),y,C;return this.curve.twisted?(y=r.redMul(u).redMul(s.redSub(this.curve._mulA(o))),C=f.redMul(u)):(y=r.redMul(u).redMul(s.redSub(o)),C=this.curve._mulC(f).redMul(u)),this.curve.point(h,y,C)};pt.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)};pt.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)};pt.prototype.mulAdd=function(t,r,i){return this.curve._wnafMulAdd(1,[this,r],[t,i],2,!1)};pt.prototype.jmulAdd=function(t,r,i){return this.curve._wnafMulAdd(1,[this,r],[t,i],2,!0)};pt.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this};pt.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};pt.prototype.getX=function(){return this.normalize(),this.x.fromRed()};pt.prototype.getY=function(){return this.normalize(),this.y.fromRed()};pt.prototype.eq=function(t){return this===t||this.getX().cmp(t.getX())===0&&this.getY().cmp(t.getY())===0};pt.prototype.eqXToP=function(t){var r=t.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var i=t.clone(),o=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(o),this.x.cmp(r)===0)return!0}};pt.prototype.toP=pt.prototype.normalize;pt.prototype.mixedAdd=pt.prototype.add});var Np=de(L6=>{"use strict";var wl=L6;wl.base=Pf();wl.short=C6();wl.mont=R6();wl.edwards=P6()});var U6=de((tz,B6)=>{B6.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}});var El=de(q6=>{"use strict";var Lp=q6,zi=Tf(),Pp=Np(),Rk=_r(),$6=Rk.assert;function F6(n){n.type==="short"?this.curve=new Pp.short(n):n.type==="edwards"?this.curve=new Pp.edwards(n):this.curve=new Pp.mont(n),this.g=this.curve.g,this.n=this.curve.n,this.hash=n.hash,$6(this.g.validate(),"Invalid curve"),$6(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}Lp.PresetCurve=F6;function Ki(n,t){Object.defineProperty(Lp,n,{configurable:!0,enumerable:!0,get:function(){var r=new F6(t);return Object.defineProperty(Lp,n,{configurable:!0,enumerable:!0,value:r}),r}})}Ki("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:zi.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});Ki("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:zi.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});Ki("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:zi.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});Ki("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:zi.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});Ki("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:zi.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});Ki("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:zi.sha256,gRed:!1,g:["9"]});Ki("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:zi.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var Bp;try{Bp=U6()}catch{Bp=void 0}Ki("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:zi.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",Bp]})});var z6=de((nz,H6)=>{"use strict";var Ik=Tf(),Qo=kp(),j6=Pi();function Gi(n){if(!(this instanceof Gi))return new Gi(n);this.hash=n.hash,this.predResist=!!n.predResist,this.outLen=this.hash.outSize,this.minEntropy=n.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=Qo.toArray(n.entropy,n.entropyEnc||"hex"),r=Qo.toArray(n.nonce,n.nonceEnc||"hex"),i=Qo.toArray(n.pers,n.persEnc||"hex");j6(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,i)}H6.exports=Gi;Gi.prototype._init=function(t,r,i){var o=t.concat(r).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(o),this._reseed=1,this.reseedInterval=281474976710656};Gi.prototype._hmac=function(){return new Ik.hmac(this.hash,this.K)};Gi.prototype._update=function(t){var r=this._hmac().update(this.V).update([0]);t&&(r=r.update(t)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())};Gi.prototype.reseed=function(t,r,i,o){typeof r!="string"&&(o=i,i=r,r=null),t=Qo.toArray(t,r),i=Qo.toArray(i,o),j6(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(i||[])),this._reseed=1};Gi.prototype.generate=function(t,r,i,o){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(o=i,i=r,r=null),i&&(i=Qo.toArray(i,o||"hex"),this._update(i));for(var s=[];s.length<t;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var a=s.slice(0,t);return this._update(i),this._reseed++,Qo.encode(a,r)}});var G6=de((iz,K6)=>{"use strict";var Nk=Bn(),Pk=_r(),Up=Pk.assert;function Yt(n,t){this.ec=n,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}K6.exports=Yt;Yt.fromPublic=function(t,r,i){return r instanceof Yt?r:new Yt(t,{pub:r,pubEnc:i})};Yt.fromPrivate=function(t,r,i){return r instanceof Yt?r:new Yt(t,{priv:r,privEnc:i})};Yt.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Yt.prototype.getPublic=function(t,r){return typeof t=="string"&&(r=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,t):this.pub};Yt.prototype.getPrivate=function(t){return t==="hex"?this.priv.toString(16,2):this.priv};Yt.prototype._importPrivate=function(t,r){this.priv=new Nk(t,r||16),this.priv=this.priv.umod(this.ec.curve.n)};Yt.prototype._importPublic=function(t,r){if(t.x||t.y){this.ec.curve.type==="mont"?Up(t.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Up(t.x&&t.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(t.x,t.y);return}this.pub=this.ec.curve.decodePoint(t,r)};Yt.prototype.derive=function(t){return t.validate()||Up(t.validate(),"public point not validated"),t.mul(this.priv).getX()};Yt.prototype.sign=function(t,r,i){return this.ec.sign(t,this,r,i)};Yt.prototype.verify=function(t,r){return this.ec.verify(t,r,this)};Yt.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}});var W6=de((oz,V6)=>{"use strict";var _l=Bn(),qp=_r(),Lk=qp.assert;function Sl(n,t){if(n instanceof Sl)return n;this._importDER(n,t)||(Lk(n.r&&n.s,"Signature without r or s"),this.r=new _l(n.r,16),this.s=new _l(n.s,16),n.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=n.recoveryParam)}V6.exports=Sl;function Bk(){this.place=0}function $p(n,t){var r=n[t.place++];if(!(r&128))return r;var i=r&15;if(i===0||i>4)return!1;for(var o=0,s=0,a=t.place;s<i;s++,a++)o<<=8,o|=n[a],o>>>=0;return o<=127?!1:(t.place=a,o)}function J6(n){for(var t=0,r=n.length-1;!n[t]&&!(n[t+1]&128)&&t<r;)t++;return t===0?n:n.slice(t)}Sl.prototype._importDER=function(t,r){t=qp.toArray(t,r);var i=new Bk;if(t[i.place++]!==48)return!1;var o=$p(t,i);if(o===!1||o+i.place!==t.length||t[i.place++]!==2)return!1;var s=$p(t,i);if(s===!1)return!1;var a=t.slice(i.place,s+i.place);if(i.place+=s,t[i.place++]!==2)return!1;var f=$p(t,i);if(f===!1||t.length!==f+i.place)return!1;var u=t.slice(i.place,f+i.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(u[0]===0)if(u[1]&128)u=u.slice(1);else return!1;return this.r=new _l(a),this.s=new _l(u),this.recoveryParam=null,!0};function Fp(n,t){if(t<128){n.push(t);return}var r=1+(Math.log(t)/Math.LN2>>>3);for(n.push(r|128);--r;)n.push(t>>>(r<<3)&255);n.push(t)}Sl.prototype.toDER=function(t){var r=this.r.toArray(),i=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),i[0]&128&&(i=[0].concat(i)),r=J6(r),i=J6(i);!i[0]&&!(i[1]&128);)i=i.slice(1);var o=[2];Fp(o,r.length),o=o.concat(r),o.push(2),Fp(o,i.length);var s=o.concat(i),a=[48];return Fp(a,s.length),a=a.concat(s),qp.encode(a,t)}});var Q6=de((sz,Z6)=>{"use strict";var es=Bn(),Y6=z6(),Uk=_r(),jp=El(),$k=Rp(),X6=Uk.assert,Hp=G6(),Al=W6();function Kr(n){if(!(this instanceof Kr))return new Kr(n);typeof n=="string"&&(X6(Object.prototype.hasOwnProperty.call(jp,n),"Unknown curve "+n),n=jp[n]),n instanceof jp.PresetCurve&&(n={curve:n}),this.curve=n.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=n.curve.g,this.g.precompute(n.curve.n.bitLength()+1),this.hash=n.hash||n.curve.hash}Z6.exports=Kr;Kr.prototype.keyPair=function(t){return new Hp(this,t)};Kr.prototype.keyFromPrivate=function(t,r){return Hp.fromPrivate(this,t,r)};Kr.prototype.keyFromPublic=function(t,r){return Hp.fromPublic(this,t,r)};Kr.prototype.genKeyPair=function(t){t||(t={});for(var r=new Y6({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||$k(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),o=this.n.sub(new es(2));;){var s=new es(r.generate(i));if(!(s.cmp(o)>0))return s.iaddn(1),this.keyFromPrivate(s)}};Kr.prototype._truncateToN=function(t,r){var i=t.byteLength()*8-this.n.bitLength();return i>0&&(t=t.ushrn(i)),!r&&t.cmp(this.n)>=0?t.sub(this.n):t};Kr.prototype.sign=function(t,r,i,o){typeof i=="object"&&(o=i,i=null),o||(o={}),r=this.keyFromPrivate(r,i),t=this._truncateToN(new es(t,16));for(var s=this.n.byteLength(),a=r.getPrivate().toArray("be",s),f=t.toArray("be",s),u=new Y6({hash:this.hash,entropy:a,nonce:f,pers:o.pers,persEnc:o.persEnc||"utf8"}),d=this.n.sub(new es(1)),h=0;;h++){var y=o.k?o.k(h):new es(u.generate(this.n.byteLength()));if(y=this._truncateToN(y,!0),!(y.cmpn(1)<=0||y.cmp(d)>=0)){var C=this.g.mul(y);if(!C.isInfinity()){var O=C.getX(),A=O.umod(this.n);if(A.cmpn(0)!==0){var M=y.invm(this.n).mul(A.mul(r.getPrivate()).iadd(t));if(M=M.umod(this.n),M.cmpn(0)!==0){var F=(C.getY().isOdd()?1:0)|(O.cmp(A)!==0?2:0);return o.canonical&&M.cmp(this.nh)>0&&(M=this.n.sub(M),F^=1),new Al({r:A,s:M,recoveryParam:F})}}}}}};Kr.prototype.verify=function(t,r,i,o){t=this._truncateToN(new es(t,16)),i=this.keyFromPublic(i,o),r=new Al(r,"hex");var s=r.r,a=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var f=a.invm(this.n),u=f.mul(t).umod(this.n),d=f.mul(s).umod(this.n),h;return this.curve._maxwellTrick?(h=this.g.jmulAdd(u,i.getPublic(),d),h.isInfinity()?!1:h.eqXToP(s)):(h=this.g.mulAdd(u,i.getPublic(),d),h.isInfinity()?!1:h.getX().umod(this.n).cmp(s)===0)};Kr.prototype.recoverPubKey=function(n,t,r,i){X6((3&r)===r,"The recovery param is more than two bits"),t=new Al(t,i);var o=this.n,s=new es(n),a=t.r,f=t.s,u=r&1,d=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&d)throw new Error("Unable to find sencond key candinate");d?a=this.curve.pointFromX(a.add(this.curve.n),u):a=this.curve.pointFromX(a,u);var h=t.r.invm(o),y=o.sub(s).mul(h).umod(o),C=f.mul(h).umod(o);return this.g.mulAdd(y,a,C)};Kr.prototype.getKeyRecoveryParam=function(n,t,r,i){if(t=new Al(t,i),t.recoveryParam!==null)return t.recoveryParam;for(var o=0;o<4;o++){var s;try{s=this.recoverPubKey(n,t,o)}catch{continue}if(s.eq(r))return o}throw new Error("Unable to find valid recovery factor")}});var nx=de((az,rx)=>{"use strict";var Lf=_r(),tx=Lf.assert,ex=Lf.parseBytes,ma=Lf.cachedProperty;function It(n,t){this.eddsa=n,this._secret=ex(t.secret),n.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=ex(t.pub)}It.fromPublic=function(t,r){return r instanceof It?r:new It(t,{pub:r})};It.fromSecret=function(t,r){return r instanceof It?r:new It(t,{secret:r})};It.prototype.secret=function(){return this._secret};ma(It,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});ma(It,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});ma(It,"privBytes",function(){var t=this.eddsa,r=this.hash(),i=t.encodingLength-1,o=r.slice(0,t.encodingLength);return o[0]&=248,o[i]&=127,o[i]|=64,o});ma(It,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});ma(It,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});ma(It,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});It.prototype.sign=function(t){return tx(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)};It.prototype.verify=function(t,r){return this.eddsa.verify(t,r,this)};It.prototype.getSecret=function(t){return tx(this._secret,"KeyPair is public only"),Lf.encode(this.secret(),t)};It.prototype.getPublic=function(t){return Lf.encode(this.pubBytes(),t)};rx.exports=It});var ox=de((fz,ix)=>{"use strict";var Fk=Bn(),Tl=_r(),qk=Tl.assert,Ml=Tl.cachedProperty,jk=Tl.parseBytes;function ts(n,t){this.eddsa=n,typeof t!="object"&&(t=jk(t)),Array.isArray(t)&&(t={R:t.slice(0,n.encodingLength),S:t.slice(n.encodingLength)}),qk(t.R&&t.S,"Signature without R or S"),n.isPoint(t.R)&&(this._R=t.R),t.S instanceof Fk&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}Ml(ts,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});Ml(ts,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});Ml(ts,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});Ml(ts,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});ts.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};ts.prototype.toHex=function(){return Tl.encode(this.toBytes(),"hex").toUpperCase()};ix.exports=ts});var ux=de((cz,cx)=>{"use strict";var Hk=Tf(),zk=El(),ba=_r(),Kk=ba.assert,ax=ba.parseBytes,fx=nx(),sx=ox();function ur(n){if(Kk(n==="ed25519","only tested with ed25519 so far"),!(this instanceof ur))return new ur(n);n=zk[n].curve,this.curve=n,this.g=n.g,this.g.precompute(n.n.bitLength()+1),this.pointClass=n.point().constructor,this.encodingLength=Math.ceil(n.n.bitLength()/8),this.hash=Hk.sha512}cx.exports=ur;ur.prototype.sign=function(t,r){t=ax(t);var i=this.keyFromSecret(r),o=this.hashInt(i.messagePrefix(),t),s=this.g.mul(o),a=this.encodePoint(s),f=this.hashInt(a,i.pubBytes(),t).mul(i.priv()),u=o.add(f).umod(this.curve.n);return this.makeSignature({R:s,S:u,Rencoded:a})};ur.prototype.verify=function(t,r,i){t=ax(t),r=this.makeSignature(r);var o=this.keyFromPublic(i),s=this.hashInt(r.Rencoded(),o.pubBytes(),t),a=this.g.mul(r.S()),f=r.R().add(o.pub().mul(s));return f.eq(a)};ur.prototype.hashInt=function(){for(var t=this.hash(),r=0;r<arguments.length;r++)t.update(arguments[r]);return ba.intFromLE(t.digest()).umod(this.curve.n)};ur.prototype.keyFromPublic=function(t){return fx.fromPublic(this,t)};ur.prototype.keyFromSecret=function(t){return fx.fromSecret(this,t)};ur.prototype.makeSignature=function(t){return t instanceof sx?t:new sx(this,t)};ur.prototype.encodePoint=function(t){var r=t.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=t.getX().isOdd()?128:0,r};ur.prototype.decodePoint=function(t){t=ba.parseBytes(t);var r=t.length-1,i=t.slice(0,r).concat(t[r]&-129),o=(t[r]&128)!==0,s=ba.intFromLE(i);return this.curve.pointFromY(s,o)};ur.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)};ur.prototype.decodeInt=function(t){return ba.intFromLE(t)};ur.prototype.isPoint=function(t){return t instanceof this.pointClass}});var hx=de(lx=>{"use strict";var rs=lx;rs.version=w6().version;rs.utils=_r();rs.rand=Rp();rs.curve=Np();rs.curves=El();rs.ec=Q6();rs.eddsa=ux()});var px=de((lz,dx)=>{"use strict";dx.exports=function n(t){return t===null||typeof t!="object"||t.toJSON!=null?JSON.stringify(t):Array.isArray(t)?"["+t.reduce((r,i,o)=>{let s=o===0?"":",",a=i===void 0||typeof i=="symbol"?null:i;return r+s+n(a)},"")+"]":"{"+Object.keys(t).sort().reduce((r,i,o)=>{if(t[i]===void 0||typeof t[i]=="symbol")return r;let s=r.length===0?"":",";return r+s+n(i)+":"+n(t[i])},"")+"}"}});var yx=de(ya=>{"use strict";Object.defineProperty(ya,"__esModule",{value:!0});ya.bech32m=ya.bech32=void 0;var kl="qpzry9x8gf2tvdw0s3jn54khce6mua7l",bx={};for(let n=0;n<kl.length;n++){let t=kl.charAt(n);bx[t]=n}function ga(n){let t=n>>25;return(n&33554431)<<5^-(t>>0&1)&996825010^-(t>>1&1)&642813549^-(t>>2&1)&513874426^-(t>>3&1)&1027748829^-(t>>4&1)&705979059}function mx(n){let t=1;for(let r=0;r<n.length;++r){let i=n.charCodeAt(r);if(i<33||i>126)return"Invalid prefix ("+n+")";t=ga(t)^i>>5}t=ga(t);for(let r=0;r<n.length;++r){let i=n.charCodeAt(r);t=ga(t)^i&31}return t}function zp(n,t,r,i){let o=0,s=0,a=(1<<r)-1,f=[];for(let u=0;u<n.length;++u)for(o=o<<t|n[u],s+=t;s>=r;)s-=r,f.push(o>>s&a);if(i)s>0&&f.push(o<<r-s&a);else{if(s>=t)return"Excess padding";if(o<<r-s&a)return"Non-zero padding"}return f}function Gk(n){return zp(n,8,5,!0)}function Jk(n){let t=zp(n,5,8,!1);if(Array.isArray(t))return t}function Vk(n){let t=zp(n,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}function gx(n){let t;n==="bech32"?t=1:t=734539939;function r(a,f,u){if(u=u||90,a.length+7+f.length>u)throw new TypeError("Exceeds length limit");a=a.toLowerCase();let d=mx(a);if(typeof d=="string")throw new Error(d);let h=a+"1";for(let y=0;y<f.length;++y){let C=f[y];if(C>>5)throw new Error("Non 5-bit word");d=ga(d)^C,h+=kl.charAt(C)}for(let y=0;y<6;++y)d=ga(d);d^=t;for(let y=0;y<6;++y){let C=d>>(5-y)*5&31;h+=kl.charAt(C)}return h}function i(a,f){if(f=f||90,a.length<8)return a+" too short";if(a.length>f)return"Exceeds length limit";let u=a.toLowerCase(),d=a.toUpperCase();if(a!==u&&a!==d)return"Mixed-case string "+a;a=u;let h=a.lastIndexOf("1");if(h===-1)return"No separator character for "+a;if(h===0)return"Missing prefix for "+a;let y=a.slice(0,h),C=a.slice(h+1);if(C.length<6)return"Data too short";let O=mx(y);if(typeof O=="string")return O;let A=[];for(let M=0;M<C.length;++M){let F=C.charAt(M),D=bx[F];if(D===void 0)return"Unknown character "+F;O=ga(O)^D,!(M+6>=C.length)&&A.push(D)}return O!==t?"Invalid checksum for "+a:{prefix:y,words:A}}function o(a,f){let u=i(a,f);if(typeof u=="object")return u}function s(a,f){let u=i(a,f);if(typeof u=="object")return u;throw new Error(u)}return{decodeUnsafe:o,decode:s,encode:r,toWords:Gk,fromWordsUnsafe:Jk,fromWords:Vk}}ya.bech32=gx("bech32");ya.bech32m=gx("bech32m")});var Ex=de(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.sharedKey=wt.generateKeyPair=wt.generateKeyPairFromSeed=wt.scalarMultBase=wt.scalarMult=wt.SHARED_KEY_LENGTH=wt.SECRET_KEY_LENGTH=wt.PUBLIC_KEY_LENGTH=void 0;var Wk=ei(),Yk=Br();wt.PUBLIC_KEY_LENGTH=32;wt.SECRET_KEY_LENGTH=32;wt.SHARED_KEY_LENGTH=32;function $n(n){let t=new Float64Array(16);if(n)for(let r=0;r<n.length;r++)t[r]=n[r];return t}var vx=new Uint8Array(32);vx[0]=9;var Xk=$n([56129,1]);function Kp(n){let t=1;for(let r=0;r<16;r++){let i=n[r]+t+65535;t=Math.floor(i/65536),n[r]=i-t*65536}n[0]+=t-1+37*(t-1)}function Bf(n,t,r){let i=~(r-1);for(let o=0;o<16;o++){let s=i&(n[o]^t[o]);n[o]^=s,t[o]^=s}}function Zk(n,t){let r=$n(),i=$n();for(let o=0;o<16;o++)i[o]=t[o];Kp(i),Kp(i),Kp(i);for(let o=0;o<2;o++){r[0]=i[0]-65517;for(let a=1;a<15;a++)r[a]=i[a]-65535-(r[a-1]>>16&1),r[a-1]&=65535;r[15]=i[15]-32767-(r[14]>>16&1);let s=r[15]>>16&1;r[14]&=65535,Bf(i,r,1-s)}for(let o=0;o<16;o++)n[2*o]=i[o]&255,n[2*o+1]=i[o]>>8}function Qk(n,t){for(let r=0;r<16;r++)n[r]=t[2*r]+(t[2*r+1]<<8);n[15]&=32767}function Cl(n,t,r){for(let i=0;i<16;i++)n[i]=t[i]+r[i]}function Ol(n,t,r){for(let i=0;i<16;i++)n[i]=t[i]-r[i]}function li(n,t,r){let i,o,s=0,a=0,f=0,u=0,d=0,h=0,y=0,C=0,O=0,A=0,M=0,F=0,D=0,$=0,K=0,j=0,X=0,B=0,L=0,U=0,te=0,_=0,l=0,g=0,m=0,c=0,p=0,x=0,E=0,w=0,b=0,S=r[0],R=r[1],v=r[2],T=r[3],re=r[4],k=r[5],z=r[6],Y=r[7],N=r[8],P=r[9],G=r[10],J=r[11],Q=r[12],le=r[13],oe=r[14],W=r[15];i=t[0],s+=i*S,a+=i*R,f+=i*v,u+=i*T,d+=i*re,h+=i*k,y+=i*z,C+=i*Y,O+=i*N,A+=i*P,M+=i*G,F+=i*J,D+=i*Q,$+=i*le,K+=i*oe,j+=i*W,i=t[1],a+=i*S,f+=i*R,u+=i*v,d+=i*T,h+=i*re,y+=i*k,C+=i*z,O+=i*Y,A+=i*N,M+=i*P,F+=i*G,D+=i*J,$+=i*Q,K+=i*le,j+=i*oe,X+=i*W,i=t[2],f+=i*S,u+=i*R,d+=i*v,h+=i*T,y+=i*re,C+=i*k,O+=i*z,A+=i*Y,M+=i*N,F+=i*P,D+=i*G,$+=i*J,K+=i*Q,j+=i*le,X+=i*oe,B+=i*W,i=t[3],u+=i*S,d+=i*R,h+=i*v,y+=i*T,C+=i*re,O+=i*k,A+=i*z,M+=i*Y,F+=i*N,D+=i*P,$+=i*G,K+=i*J,j+=i*Q,X+=i*le,B+=i*oe,L+=i*W,i=t[4],d+=i*S,h+=i*R,y+=i*v,C+=i*T,O+=i*re,A+=i*k,M+=i*z,F+=i*Y,D+=i*N,$+=i*P,K+=i*G,j+=i*J,X+=i*Q,B+=i*le,L+=i*oe,U+=i*W,i=t[5],h+=i*S,y+=i*R,C+=i*v,O+=i*T,A+=i*re,M+=i*k,F+=i*z,D+=i*Y,$+=i*N,K+=i*P,j+=i*G,X+=i*J,B+=i*Q,L+=i*le,U+=i*oe,te+=i*W,i=t[6],y+=i*S,C+=i*R,O+=i*v,A+=i*T,M+=i*re,F+=i*k,D+=i*z,$+=i*Y,K+=i*N,j+=i*P,X+=i*G,B+=i*J,L+=i*Q,U+=i*le,te+=i*oe,_+=i*W,i=t[7],C+=i*S,O+=i*R,A+=i*v,M+=i*T,F+=i*re,D+=i*k,$+=i*z,K+=i*Y,j+=i*N,X+=i*P,B+=i*G,L+=i*J,U+=i*Q,te+=i*le,_+=i*oe,l+=i*W,i=t[8],O+=i*S,A+=i*R,M+=i*v,F+=i*T,D+=i*re,$+=i*k,K+=i*z,j+=i*Y,X+=i*N,B+=i*P,L+=i*G,U+=i*J,te+=i*Q,_+=i*le,l+=i*oe,g+=i*W,i=t[9],A+=i*S,M+=i*R,F+=i*v,D+=i*T,$+=i*re,K+=i*k,j+=i*z,X+=i*Y,B+=i*N,L+=i*P,U+=i*G,te+=i*J,_+=i*Q,l+=i*le,g+=i*oe,m+=i*W,i=t[10],M+=i*S,F+=i*R,D+=i*v,$+=i*T,K+=i*re,j+=i*k,X+=i*z,B+=i*Y,L+=i*N,U+=i*P,te+=i*G,_+=i*J,l+=i*Q,g+=i*le,m+=i*oe,c+=i*W,i=t[11],F+=i*S,D+=i*R,$+=i*v,K+=i*T,j+=i*re,X+=i*k,B+=i*z,L+=i*Y,U+=i*N,te+=i*P,_+=i*G,l+=i*J,g+=i*Q,m+=i*le,c+=i*oe,p+=i*W,i=t[12],D+=i*S,$+=i*R,K+=i*v,j+=i*T,X+=i*re,B+=i*k,L+=i*z,U+=i*Y,te+=i*N,_+=i*P,l+=i*G,g+=i*J,m+=i*Q,c+=i*le,p+=i*oe,x+=i*W,i=t[13],$+=i*S,K+=i*R,j+=i*v,X+=i*T,B+=i*re,L+=i*k,U+=i*z,te+=i*Y,_+=i*N,l+=i*P,g+=i*G,m+=i*J,c+=i*Q,p+=i*le,x+=i*oe,E+=i*W,i=t[14],K+=i*S,j+=i*R,X+=i*v,B+=i*T,L+=i*re,U+=i*k,te+=i*z,_+=i*Y,l+=i*N,g+=i*P,m+=i*G,c+=i*J,p+=i*Q,x+=i*le,E+=i*oe,w+=i*W,i=t[15],j+=i*S,X+=i*R,B+=i*v,L+=i*T,U+=i*re,te+=i*k,_+=i*z,l+=i*Y,g+=i*N,m+=i*P,c+=i*G,p+=i*J,x+=i*Q,E+=i*le,w+=i*oe,b+=i*W,s+=38*X,a+=38*B,f+=38*L,u+=38*U,d+=38*te,h+=38*_,y+=38*l,C+=38*g,O+=38*m,A+=38*c,M+=38*p,F+=38*x,D+=38*E,$+=38*w,K+=38*b,o=1,i=s+o+65535,o=Math.floor(i/65536),s=i-o*65536,i=a+o+65535,o=Math.floor(i/65536),a=i-o*65536,i=f+o+65535,o=Math.floor(i/65536),f=i-o*65536,i=u+o+65535,o=Math.floor(i/65536),u=i-o*65536,i=d+o+65535,o=Math.floor(i/65536),d=i-o*65536,i=h+o+65535,o=Math.floor(i/65536),h=i-o*65536,i=y+o+65535,o=Math.floor(i/65536),y=i-o*65536,i=C+o+65535,o=Math.floor(i/65536),C=i-o*65536,i=O+o+65535,o=Math.floor(i/65536),O=i-o*65536,i=A+o+65535,o=Math.floor(i/65536),A=i-o*65536,i=M+o+65535,o=Math.floor(i/65536),M=i-o*65536,i=F+o+65535,o=Math.floor(i/65536),F=i-o*65536,i=D+o+65535,o=Math.floor(i/65536),D=i-o*65536,i=$+o+65535,o=Math.floor(i/65536),$=i-o*65536,i=K+o+65535,o=Math.floor(i/65536),K=i-o*65536,i=j+o+65535,o=Math.floor(i/65536),j=i-o*65536,s+=o-1+37*(o-1),o=1,i=s+o+65535,o=Math.floor(i/65536),s=i-o*65536,i=a+o+65535,o=Math.floor(i/65536),a=i-o*65536,i=f+o+65535,o=Math.floor(i/65536),f=i-o*65536,i=u+o+65535,o=Math.floor(i/65536),u=i-o*65536,i=d+o+65535,o=Math.floor(i/65536),d=i-o*65536,i=h+o+65535,o=Math.floor(i/65536),h=i-o*65536,i=y+o+65535,o=Math.floor(i/65536),y=i-o*65536,i=C+o+65535,o=Math.floor(i/65536),C=i-o*65536,i=O+o+65535,o=Math.floor(i/65536),O=i-o*65536,i=A+o+65535,o=Math.floor(i/65536),A=i-o*65536,i=M+o+65535,o=Math.floor(i/65536),M=i-o*65536,i=F+o+65535,o=Math.floor(i/65536),F=i-o*65536,i=D+o+65535,o=Math.floor(i/65536),D=i-o*65536,i=$+o+65535,o=Math.floor(i/65536),$=i-o*65536,i=K+o+65535,o=Math.floor(i/65536),K=i-o*65536,i=j+o+65535,o=Math.floor(i/65536),j=i-o*65536,s+=o-1+37*(o-1),n[0]=s,n[1]=a,n[2]=f,n[3]=u,n[4]=d,n[5]=h,n[6]=y,n[7]=C,n[8]=O,n[9]=A,n[10]=M,n[11]=F,n[12]=D,n[13]=$,n[14]=K,n[15]=j}function Uf(n,t){li(n,t,t)}function eC(n,t){let r=$n();for(let i=0;i<16;i++)r[i]=t[i];for(let i=253;i>=0;i--)Uf(r,r),i!==2&&i!==4&&li(r,r,t);for(let i=0;i<16;i++)n[i]=r[i]}function Gp(n,t){let r=new Uint8Array(32),i=new Float64Array(80),o=$n(),s=$n(),a=$n(),f=$n(),u=$n(),d=$n();for(let O=0;O<31;O++)r[O]=n[O];r[31]=n[31]&127|64,r[0]&=248,Qk(i,t);for(let O=0;O<16;O++)s[O]=i[O];o[0]=f[0]=1;for(let O=254;O>=0;--O){let A=r[O>>>3]>>>(O&7)&1;Bf(o,s,A),Bf(a,f,A),Cl(u,o,a),Ol(o,o,a),Cl(a,s,f),Ol(s,s,f),Uf(f,u),Uf(d,o),li(o,a,o),li(a,s,u),Cl(u,o,a),Ol(o,o,a),Uf(s,o),Ol(a,f,d),li(o,a,Xk),Cl(o,o,f),li(a,a,o),li(o,f,d),li(f,s,i),Uf(s,u),Bf(o,s,A),Bf(a,f,A)}for(let O=0;O<16;O++)i[O+16]=o[O],i[O+32]=a[O],i[O+48]=s[O],i[O+64]=f[O];let h=i.subarray(32),y=i.subarray(16);eC(h,h),li(y,y,h);let C=new Uint8Array(32);return Zk(C,y),C}wt.scalarMult=Gp;function xx(n){return Gp(n,vx)}wt.scalarMultBase=xx;function wx(n){if(n.length!==wt.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${wt.SECRET_KEY_LENGTH} bytes`);let t=new Uint8Array(n);return{publicKey:xx(t),secretKey:t}}wt.generateKeyPairFromSeed=wx;function tC(n){let t=(0,Wk.randomBytes)(32,n),r=wx(t);return(0,Yk.wipe)(t),r}wt.generateKeyPair=tC;function rC(n,t,r=!1){if(n.length!==wt.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(t.length!==wt.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");let i=Gp(n,t);if(r){let o=0;for(let s=0;s<i.length;s++)o|=i[s];if(o===0)throw new Error("X25519: invalid shared key")}return i}wt.sharedKey=rC});var Vp=de(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});var Xt=Po(),Jp=Br(),nC=20;function iC(n,t,r){for(var i=1634760805,o=857760878,s=2036477234,a=1797285236,f=r[3]<<24|r[2]<<16|r[1]<<8|r[0],u=r[7]<<24|r[6]<<16|r[5]<<8|r[4],d=r[11]<<24|r[10]<<16|r[9]<<8|r[8],h=r[15]<<24|r[14]<<16|r[13]<<8|r[12],y=r[19]<<24|r[18]<<16|r[17]<<8|r[16],C=r[23]<<24|r[22]<<16|r[21]<<8|r[20],O=r[27]<<24|r[26]<<16|r[25]<<8|r[24],A=r[31]<<24|r[30]<<16|r[29]<<8|r[28],M=t[3]<<24|t[2]<<16|t[1]<<8|t[0],F=t[7]<<24|t[6]<<16|t[5]<<8|t[4],D=t[11]<<24|t[10]<<16|t[9]<<8|t[8],$=t[15]<<24|t[14]<<16|t[13]<<8|t[12],K=i,j=o,X=s,B=a,L=f,U=u,te=d,_=h,l=y,g=C,m=O,c=A,p=M,x=F,E=D,w=$,b=0;b<nC;b+=2)K=K+L|0,p^=K,p=p>>>32-16|p<<16,l=l+p|0,L^=l,L=L>>>32-12|L<<12,j=j+U|0,x^=j,x=x>>>32-16|x<<16,g=g+x|0,U^=g,U=U>>>32-12|U<<12,X=X+te|0,E^=X,E=E>>>32-16|E<<16,m=m+E|0,te^=m,te=te>>>32-12|te<<12,B=B+_|0,w^=B,w=w>>>32-16|w<<16,c=c+w|0,_^=c,_=_>>>32-12|_<<12,X=X+te|0,E^=X,E=E>>>32-8|E<<8,m=m+E|0,te^=m,te=te>>>32-7|te<<7,B=B+_|0,w^=B,w=w>>>32-8|w<<8,c=c+w|0,_^=c,_=_>>>32-7|_<<7,j=j+U|0,x^=j,x=x>>>32-8|x<<8,g=g+x|0,U^=g,U=U>>>32-7|U<<7,K=K+L|0,p^=K,p=p>>>32-8|p<<8,l=l+p|0,L^=l,L=L>>>32-7|L<<7,K=K+U|0,w^=K,w=w>>>32-16|w<<16,m=m+w|0,U^=m,U=U>>>32-12|U<<12,j=j+te|0,p^=j,p=p>>>32-16|p<<16,c=c+p|0,te^=c,te=te>>>32-12|te<<12,X=X+_|0,x^=X,x=x>>>32-16|x<<16,l=l+x|0,_^=l,_=_>>>32-12|_<<12,B=B+L|0,E^=B,E=E>>>32-16|E<<16,g=g+E|0,L^=g,L=L>>>32-12|L<<12,X=X+_|0,x^=X,x=x>>>32-8|x<<8,l=l+x|0,_^=l,_=_>>>32-7|_<<7,B=B+L|0,E^=B,E=E>>>32-8|E<<8,g=g+E|0,L^=g,L=L>>>32-7|L<<7,j=j+te|0,p^=j,p=p>>>32-8|p<<8,c=c+p|0,te^=c,te=te>>>32-7|te<<7,K=K+U|0,w^=K,w=w>>>32-8|w<<8,m=m+w|0,U^=m,U=U>>>32-7|U<<7;Xt.writeUint32LE(K+i|0,n,0),Xt.writeUint32LE(j+o|0,n,4),Xt.writeUint32LE(X+s|0,n,8),Xt.writeUint32LE(B+a|0,n,12),Xt.writeUint32LE(L+f|0,n,16),Xt.writeUint32LE(U+u|0,n,20),Xt.writeUint32LE(te+d|0,n,24),Xt.writeUint32LE(_+h|0,n,28),Xt.writeUint32LE(l+y|0,n,32),Xt.writeUint32LE(g+C|0,n,36),Xt.writeUint32LE(m+O|0,n,40),Xt.writeUint32LE(c+A|0,n,44),Xt.writeUint32LE(p+M|0,n,48),Xt.writeUint32LE(x+F|0,n,52),Xt.writeUint32LE(E+D|0,n,56),Xt.writeUint32LE(w+$|0,n,60)}function _x(n,t,r,i,o){if(o===void 0&&(o=0),n.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(i.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,a;if(o===0){if(t.length!==8&&t.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),a=s.length-t.length,s.set(t,a)}else{if(t.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=t,a=o}for(var f=new Uint8Array(64),u=0;u<r.length;u+=64){iC(f,s,n);for(var d=u;d<u+64&&d<r.length;d++)i[d]=r[d]^f[d-u];sC(s,0,a)}return Jp.wipe(f),o===0&&Jp.wipe(s),i}Dl.streamXOR=_x;function oC(n,t,r,i){return i===void 0&&(i=0),Jp.wipe(r),_x(n,t,r,r,i)}Dl.stream=oC;function sC(n,t,r){for(var i=1;r--;)i=i+(n[t]&255)|0,n[t]=i&255,i>>>=8,t++;if(i>0)throw new Error("ChaCha: counter overflow")}});var Mx=de($f=>{"use strict";Object.defineProperty($f,"__esModule",{value:!0});var Ji=Po(),Sx=Br(),aC=Vp(),fC=20;function Ax(n,t,r,i){if(t.length!==24)throw new Error("XChaCha20 nonce must be 24 bytes");var o=Tx(n,t.subarray(0,16),new Uint8Array(32)),s=new Uint8Array(12);s.set(t.subarray(16),4);var a=aC.streamXOR(o,s,r,i);return Sx.wipe(o),a}$f.streamXOR=Ax;function cC(n,t,r){return Sx.wipe(r),Ax(n,t,r,r)}$f.stream=cC;function Tx(n,t,r){for(var i=1634760805,o=857760878,s=2036477234,a=1797285236,f=n[3]<<24|n[2]<<16|n[1]<<8|n[0],u=n[7]<<24|n[6]<<16|n[5]<<8|n[4],d=n[11]<<24|n[10]<<16|n[9]<<8|n[8],h=n[15]<<24|n[14]<<16|n[13]<<8|n[12],y=n[19]<<24|n[18]<<16|n[17]<<8|n[16],C=n[23]<<24|n[22]<<16|n[21]<<8|n[20],O=n[27]<<24|n[26]<<16|n[25]<<8|n[24],A=n[31]<<24|n[30]<<16|n[29]<<8|n[28],M=t[3]<<24|t[2]<<16|t[1]<<8|t[0],F=t[7]<<24|t[6]<<16|t[5]<<8|t[4],D=t[11]<<24|t[10]<<16|t[9]<<8|t[8],$=t[15]<<24|t[14]<<16|t[13]<<8|t[12],K=i,j=o,X=s,B=a,L=f,U=u,te=d,_=h,l=y,g=C,m=O,c=A,p=M,x=F,E=D,w=$,b=0;b<fC;b+=2)K=K+L|0,p^=K,p=p>>>32-16|p<<16,l=l+p|0,L^=l,L=L>>>32-12|L<<12,j=j+U|0,x^=j,x=x>>>32-16|x<<16,g=g+x|0,U^=g,U=U>>>32-12|U<<12,X=X+te|0,E^=X,E=E>>>32-16|E<<16,m=m+E|0,te^=m,te=te>>>32-12|te<<12,B=B+_|0,w^=B,w=w>>>32-16|w<<16,c=c+w|0,_^=c,_=_>>>32-12|_<<12,X=X+te|0,E^=X,E=E>>>32-8|E<<8,m=m+E|0,te^=m,te=te>>>32-7|te<<7,B=B+_|0,w^=B,w=w>>>32-8|w<<8,c=c+w|0,_^=c,_=_>>>32-7|_<<7,j=j+U|0,x^=j,x=x>>>32-8|x<<8,g=g+x|0,U^=g,U=U>>>32-7|U<<7,K=K+L|0,p^=K,p=p>>>32-8|p<<8,l=l+p|0,L^=l,L=L>>>32-7|L<<7,K=K+U|0,w^=K,w=w>>>32-16|w<<16,m=m+w|0,U^=m,U=U>>>32-12|U<<12,j=j+te|0,p^=j,p=p>>>32-16|p<<16,c=c+p|0,te^=c,te=te>>>32-12|te<<12,X=X+_|0,x^=X,x=x>>>32-16|x<<16,l=l+x|0,_^=l,_=_>>>32-12|_<<12,B=B+L|0,E^=B,E=E>>>32-16|E<<16,g=g+E|0,L^=g,L=L>>>32-12|L<<12,X=X+_|0,x^=X,x=x>>>32-8|x<<8,l=l+x|0,_^=l,_=_>>>32-7|_<<7,B=B+L|0,E^=B,E=E>>>32-8|E<<8,g=g+E|0,L^=g,L=L>>>32-7|L<<7,j=j+te|0,p^=j,p=p>>>32-8|p<<8,c=c+p|0,te^=c,te=te>>>32-7|te<<7,K=K+U|0,w^=K,w=w>>>32-8|w<<8,m=m+w|0,U^=m,U=U>>>32-7|U<<7;return Ji.writeUint32LE(K,r,0),Ji.writeUint32LE(j,r,4),Ji.writeUint32LE(X,r,8),Ji.writeUint32LE(B,r,12),Ji.writeUint32LE(p,r,16),Ji.writeUint32LE(x,r,20),Ji.writeUint32LE(E,r,24),Ji.writeUint32LE(w,r,28),r}$f.hchacha=Tx});var Wp=de(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});function uC(n,t,r){return~(n-1)&t|n-1&r}va.select=uC;function lC(n,t){return(n|0)-(t|0)-1>>>31&1}va.lessOrEqual=lC;function kx(n,t){if(n.length!==t.length)return 0;for(var r=0,i=0;i<n.length;i++)r|=n[i]^t[i];return 1&r-1>>>8}va.compare=kx;function hC(n,t){return n.length===0||t.length===0?!1:kx(n,t)!==0}va.equal=hC});var Ox=de(hi=>{"use strict";Object.defineProperty(hi,"__esModule",{value:!0});var dC=Wp(),Rl=Br();hi.DIGEST_LENGTH=16;var Cx=function(){function n(t){this.digestLength=hi.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var r=t[0]|t[1]<<8;this._r[0]=r&8191;var i=t[2]|t[3]<<8;this._r[1]=(r>>>13|i<<3)&8191;var o=t[4]|t[5]<<8;this._r[2]=(i>>>10|o<<6)&7939;var s=t[6]|t[7]<<8;this._r[3]=(o>>>7|s<<9)&8191;var a=t[8]|t[9]<<8;this._r[4]=(s>>>4|a<<12)&255,this._r[5]=a>>>1&8190;var f=t[10]|t[11]<<8;this._r[6]=(a>>>14|f<<2)&8191;var u=t[12]|t[13]<<8;this._r[7]=(f>>>11|u<<5)&8065;var d=t[14]|t[15]<<8;this._r[8]=(u>>>8|d<<8)&8191,this._r[9]=d>>>5&127,this._pad[0]=t[16]|t[17]<<8,this._pad[1]=t[18]|t[19]<<8,this._pad[2]=t[20]|t[21]<<8,this._pad[3]=t[22]|t[23]<<8,this._pad[4]=t[24]|t[25]<<8,this._pad[5]=t[26]|t[27]<<8,this._pad[6]=t[28]|t[29]<<8,this._pad[7]=t[30]|t[31]<<8}return n.prototype._blocks=function(t,r,i){for(var o=this._fin?0:2048,s=this._h[0],a=this._h[1],f=this._h[2],u=this._h[3],d=this._h[4],h=this._h[5],y=this._h[6],C=this._h[7],O=this._h[8],A=this._h[9],M=this._r[0],F=this._r[1],D=this._r[2],$=this._r[3],K=this._r[4],j=this._r[5],X=this._r[6],B=this._r[7],L=this._r[8],U=this._r[9];i>=16;){var te=t[r+0]|t[r+1]<<8;s+=te&8191;var _=t[r+2]|t[r+3]<<8;a+=(te>>>13|_<<3)&8191;var l=t[r+4]|t[r+5]<<8;f+=(_>>>10|l<<6)&8191;var g=t[r+6]|t[r+7]<<8;u+=(l>>>7|g<<9)&8191;var m=t[r+8]|t[r+9]<<8;d+=(g>>>4|m<<12)&8191,h+=m>>>1&8191;var c=t[r+10]|t[r+11]<<8;y+=(m>>>14|c<<2)&8191;var p=t[r+12]|t[r+13]<<8;C+=(c>>>11|p<<5)&8191;var x=t[r+14]|t[r+15]<<8;O+=(p>>>8|x<<8)&8191,A+=x>>>5|o;var E=0,w=E;w+=s*M,w+=a*(5*U),w+=f*(5*L),w+=u*(5*B),w+=d*(5*X),E=w>>>13,w&=8191,w+=h*(5*j),w+=y*(5*K),w+=C*(5*$),w+=O*(5*D),w+=A*(5*F),E+=w>>>13,w&=8191;var b=E;b+=s*F,b+=a*M,b+=f*(5*U),b+=u*(5*L),b+=d*(5*B),E=b>>>13,b&=8191,b+=h*(5*X),b+=y*(5*j),b+=C*(5*K),b+=O*(5*$),b+=A*(5*D),E+=b>>>13,b&=8191;var S=E;S+=s*D,S+=a*F,S+=f*M,S+=u*(5*U),S+=d*(5*L),E=S>>>13,S&=8191,S+=h*(5*B),S+=y*(5*X),S+=C*(5*j),S+=O*(5*K),S+=A*(5*$),E+=S>>>13,S&=8191;var R=E;R+=s*$,R+=a*D,R+=f*F,R+=u*M,R+=d*(5*U),E=R>>>13,R&=8191,R+=h*(5*L),R+=y*(5*B),R+=C*(5*X),R+=O*(5*j),R+=A*(5*K),E+=R>>>13,R&=8191;var v=E;v+=s*K,v+=a*$,v+=f*D,v+=u*F,v+=d*M,E=v>>>13,v&=8191,v+=h*(5*U),v+=y*(5*L),v+=C*(5*B),v+=O*(5*X),v+=A*(5*j),E+=v>>>13,v&=8191;var T=E;T+=s*j,T+=a*K,T+=f*$,T+=u*D,T+=d*F,E=T>>>13,T&=8191,T+=h*M,T+=y*(5*U),T+=C*(5*L),T+=O*(5*B),T+=A*(5*X),E+=T>>>13,T&=8191;var re=E;re+=s*X,re+=a*j,re+=f*K,re+=u*$,re+=d*D,E=re>>>13,re&=8191,re+=h*F,re+=y*M,re+=C*(5*U),re+=O*(5*L),re+=A*(5*B),E+=re>>>13,re&=8191;var k=E;k+=s*B,k+=a*X,k+=f*j,k+=u*K,k+=d*$,E=k>>>13,k&=8191,k+=h*D,k+=y*F,k+=C*M,k+=O*(5*U),k+=A*(5*L),E+=k>>>13,k&=8191;var z=E;z+=s*L,z+=a*B,z+=f*X,z+=u*j,z+=d*K,E=z>>>13,z&=8191,z+=h*$,z+=y*D,z+=C*F,z+=O*M,z+=A*(5*U),E+=z>>>13,z&=8191;var Y=E;Y+=s*U,Y+=a*L,Y+=f*B,Y+=u*X,Y+=d*j,E=Y>>>13,Y&=8191,Y+=h*K,Y+=y*$,Y+=C*D,Y+=O*F,Y+=A*M,E+=Y>>>13,Y&=8191,E=(E<<2)+E|0,E=E+w|0,w=E&8191,E=E>>>13,b+=E,s=w,a=b,f=S,u=R,d=v,h=T,y=re,C=k,O=z,A=Y,r+=16,i-=16}this._h[0]=s,this._h[1]=a,this._h[2]=f,this._h[3]=u,this._h[4]=d,this._h[5]=h,this._h[6]=y,this._h[7]=C,this._h[8]=O,this._h[9]=A},n.prototype.finish=function(t,r){r===void 0&&(r=0);var i=new Uint16Array(10),o,s,a,f;if(this._leftover){for(f=this._leftover,this._buffer[f++]=1;f<16;f++)this._buffer[f]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(o=this._h[1]>>>13,this._h[1]&=8191,f=2;f<10;f++)this._h[f]+=o,o=this._h[f]>>>13,this._h[f]&=8191;for(this._h[0]+=o*5,o=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=o,o=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=o,i[0]=this._h[0]+5,o=i[0]>>>13,i[0]&=8191,f=1;f<10;f++)i[f]=this._h[f]+o,o=i[f]>>>13,i[f]&=8191;for(i[9]-=1<<13,s=(o^1)-1,f=0;f<10;f++)i[f]&=s;for(s=~s,f=0;f<10;f++)this._h[f]=this._h[f]&s|i[f];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,a=this._h[0]+this._pad[0],this._h[0]=a&65535,f=1;f<8;f++)a=(this._h[f]+this._pad[f]|0)+(a>>>16)|0,this._h[f]=a&65535;return t[r+0]=this._h[0]>>>0,t[r+1]=this._h[0]>>>8,t[r+2]=this._h[1]>>>0,t[r+3]=this._h[1]>>>8,t[r+4]=this._h[2]>>>0,t[r+5]=this._h[2]>>>8,t[r+6]=this._h[3]>>>0,t[r+7]=this._h[3]>>>8,t[r+8]=this._h[4]>>>0,t[r+9]=this._h[4]>>>8,t[r+10]=this._h[5]>>>0,t[r+11]=this._h[5]>>>8,t[r+12]=this._h[6]>>>0,t[r+13]=this._h[6]>>>8,t[r+14]=this._h[7]>>>0,t[r+15]=this._h[7]>>>8,this._finished=!0,this},n.prototype.update=function(t){var r=0,i=t.length,o;if(this._leftover){o=16-this._leftover,o>i&&(o=i);for(var s=0;s<o;s++)this._buffer[this._leftover+s]=t[r+s];if(i-=o,r+=o,this._leftover+=o,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(i>=16&&(o=i-i%16,this._blocks(t,r,o),r+=o,i-=o),i){for(var s=0;s<i;s++)this._buffer[this._leftover+s]=t[r+s];this._leftover+=i}return this},n.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var t=new Uint8Array(16);return this.finish(t),t},n.prototype.clean=function(){return Rl.wipe(this._buffer),Rl.wipe(this._r),Rl.wipe(this._h),Rl.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},n}();hi.Poly1305=Cx;function pC(n,t){var r=new Cx(n);r.update(t);var i=r.digest();return r.clean(),i}hi.oneTimeAuth=pC;function mC(n,t){return n.length!==hi.DIGEST_LENGTH||t.length!==hi.DIGEST_LENGTH?!1:dC.equal(n,t)}hi.equal=mC});var Ix=de(di=>{"use strict";Object.defineProperty(di,"__esModule",{value:!0});var Il=Vp(),bC=Ox(),Ff=Br(),Dx=Po(),gC=Wp();di.KEY_LENGTH=32;di.NONCE_LENGTH=12;di.TAG_LENGTH=16;var Rx=new Uint8Array(16),yC=function(){function n(t){if(this.nonceLength=di.NONCE_LENGTH,this.tagLength=di.TAG_LENGTH,t.length!==di.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(t)}return n.prototype.seal=function(t,r,i,o){if(t.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var s=new Uint8Array(16);s.set(t,s.length-t.length);var a=new Uint8Array(32);Il.stream(this._key,s,a,4);var f=r.length+this.tagLength,u;if(o){if(o.length!==f)throw new Error("ChaCha20Poly1305: incorrect destination length");u=o}else u=new Uint8Array(f);return Il.streamXOR(this._key,s,r,u,4),this._authenticate(u.subarray(u.length-this.tagLength,u.length),a,u.subarray(0,u.length-this.tagLength),i),Ff.wipe(s),u},n.prototype.open=function(t,r,i,o){if(t.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(r.length<this.tagLength)return null;var s=new Uint8Array(16);s.set(t,s.length-t.length);var a=new Uint8Array(32);Il.stream(this._key,s,a,4);var f=new Uint8Array(this.tagLength);if(this._authenticate(f,a,r.subarray(0,r.length-this.tagLength),i),!gC.equal(f,r.subarray(r.length-this.tagLength,r.length)))return null;var u=r.length-this.tagLength,d;if(o){if(o.length!==u)throw new Error("ChaCha20Poly1305: incorrect destination length");d=o}else d=new Uint8Array(u);return Il.streamXOR(this._key,s,r.subarray(0,r.length-this.tagLength),d,4),Ff.wipe(s),d},n.prototype.clean=function(){return Ff.wipe(this._key),this},n.prototype._authenticate=function(t,r,i,o){var s=new bC.Poly1305(r);o&&(s.update(o),o.length%16>0&&s.update(Rx.subarray(o.length%16))),s.update(i),i.length%16>0&&s.update(Rx.subarray(i.length%16));var a=new Uint8Array(8);o&&Dx.writeUint64LE(o.length,a),s.update(a),Dx.writeUint64LE(i.length,a),s.update(a);for(var f=s.digest(),u=0;u<f.length;u++)t[u]=f[u];s.clean(),Ff.wipe(f),Ff.wipe(a)},n}();di.ChaCha20Poly1305=yC});var Lx=de(pi=>{"use strict";Object.defineProperty(pi,"__esModule",{value:!0});var Nx=Mx(),Px=Ix(),qf=Br();pi.KEY_LENGTH=32;pi.NONCE_LENGTH=24;pi.TAG_LENGTH=16;var vC=function(){function n(t){if(this.nonceLength=pi.NONCE_LENGTH,this.tagLength=pi.TAG_LENGTH,t.length!==pi.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(t)}return n.prototype.seal=function(t,r,i,o){if(t.length!==24)throw new Error("XChaCha20Poly1305: incorrect nonce length");var s=Nx.hchacha(this._key,t.subarray(0,16),new Uint8Array(32)),a=new Uint8Array(12);a.set(t.subarray(16),4);var f=new Px.ChaCha20Poly1305(s),u=f.seal(a,r,i,o);return qf.wipe(s),qf.wipe(a),f.clean(),u},n.prototype.open=function(t,r,i,o){if(t.length!==24)throw new Error("XChaCha20Poly1305: incorrect nonce length");if(r.length<this.tagLength)return null;var s=Nx.hchacha(this._key,t.subarray(0,16),new Uint8Array(32)),a=new Uint8Array(12);a.set(t.subarray(16),4);var f=new Px.ChaCha20Poly1305(s),u=f.open(a,r,i,o);return qf.wipe(s),qf.wipe(a),f.clean(),u},n.prototype.clean=function(){return qf.wipe(this._key),this},n}();pi.XChaCha20Poly1305=vC});var mw=de((Tz,pw)=>{"use strict";pw.exports=function(n,t){t||(t={}),typeof t=="function"&&(t={cmp:t});var r=typeof t.cycles=="boolean"?t.cycles:!1,i=t.cmp&&function(s){return function(a){return function(f,u){var d={key:f,value:a[f]},h={key:u,value:a[u]};return s(d,h)}}}(t.cmp),o=[];return function s(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a!==void 0){if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);var f,u;if(Array.isArray(a)){for(u="[",f=0;f<a.length;f++)f&&(u+=","),u+=s(a[f])||"null";return u+"]"}if(a===null)return"null";if(o.indexOf(a)!==-1){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var d=o.push(a)-1,h=Object.keys(a).sort(i&&i(a));for(u="",f=0;f<h.length;f++){var y=h[f],C=s(a[y]);C&&(u&&(u+=","),u+=JSON.stringify(y)+":"+C)}return o.splice(d,1),"{"+u+"}"}}(n)}});var Cw=de((Xz,kw)=>{"use strict";function oO(n,t){for(let r=0;r<n.byteLength;r++){if(n[r]<t[r])return-1;if(n[r]>t[r])return 1}return n.byteLength>t.byteLength?1:n.byteLength<t.byteLength?-1:0}kw.exports=oO});var Dw=de((Zz,Ow)=>{"use strict";function sO(n,t){t||(t=n.reduce((o,s)=>o+s.length,0));let r=new Uint8Array(t),i=0;for(let o of n)r.set(o,i),i+=o.length;return r}Ow.exports=sO});var Iw=de((Qz,Rw)=>{"use strict";function aO(n,t){if(n===t)return!0;if(n.byteLength!==t.byteLength)return!1;for(let r=0;r<n.byteLength;r++)if(n[r]!==t[r])return!1;return!0}Rw.exports=aO});var lm=de((eK,Bw)=>{"use strict";var{bases:Nw}=(Nc(),La(U1));function Lw(n,t,r,i){return{name:n,prefix:t,encoder:{name:n,prefix:t,encode:r},decoder:{decode:i}}}var Pw=Lw("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),um=Lw("ascii","a",n=>{let t="a";for(let r=0;r<n.length;r++)t+=String.fromCharCode(n[r]);return t},n=>{n=n.substring(1);let t=new Uint8Array(n.length);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}),fO={utf8:Pw,"utf-8":Pw,hex:Nw.base16,latin1:um,ascii:um,binary:um,...Nw};Bw.exports=fO});var $w=de((tK,Uw)=>{"use strict";var cO=lm();function uO(n,t="utf8"){let r=cO[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return r.decoder.decode(`${r.prefix}${n}`)}Uw.exports=uO});var qw=de((rK,Fw)=>{"use strict";var lO=lm();function hO(n,t="utf8"){let r=lO[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return r.encoder.encode(n).substring(1)}Fw.exports=hO});var Hw=de((nK,jw)=>{"use strict";function dO(n,t){if(n.length!==t.length)throw new Error("Inputs should have the same length");let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n[i]^t[i];return r}jw.exports=dO});var Qf=de((iK,zw)=>{"use strict";var pO=Cw(),mO=Dw(),bO=Iw(),gO=$w(),yO=qw(),vO=Hw();zw.exports={compare:pO,concat:mO,equals:bO,fromString:gO,toString:yO,xor:vO}});var D4=de((GK,O4)=>{O4.exports=typeof self=="object"?self.FormData:window.FormData});var C5=de((kW,k5)=>{var M5=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};k5.exports=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return M5()}try{return __global__||M5()}finally{delete Object.prototype.__global__}}()});var O5=de((CW,iR)=>{iR.exports={name:"websocket",description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],author:"Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",contributors:["I\xF1aki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],version:"1.0.34",repository:{type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},homepage:"https://github.com/theturtle32/WebSocket-Node",engines:{node:">=4.0.0"},dependencies:{bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},devDependencies:{"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},config:{verbose:!1},scripts:{test:"tape test/unit/*.js",gulp:"gulp"},main:"index",directories:{lib:"./lib"},browser:"lib/browser.js",license:"Apache-2.0"}});var R5=de((OW,D5)=>{D5.exports=O5().version});var P5=de((DW,N5)=>{var cs;if(typeof globalThis=="object")cs=globalThis;else try{cs=C5()}catch{}finally{if(!cs&&typeof window<"u"&&(cs=window),!cs)throw new Error("Could not determine global this")}var yc=cs.WebSocket||cs.MozWebSocket,oR=R5();function I5(n,t){var r;return t?r=new yc(n,t):r=new yc(n),r}yc&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(n){Object.defineProperty(I5,n,{get:function(){return yc[n]}})});N5.exports={w3cwebsocket:yc?I5:null,version:oR}});var CR={};Ze(CR,{CeramicClient:()=>la,DIDSession:()=>qn,Document:()=>jn,MAINNET_NODE_URL:()=>Ym,Orbis:()=>r1,PINATA_GATEWAY:()=>Xm,StreamUtils:()=>Xe,TESTNET_NODE_URL:()=>gR,TileDocument:()=>jr,channelSchemaCommit:()=>e1,channelSchemaStream:()=>xR,conversationSchemaCommit:()=>Y5,conversationSchemaStream:()=>AR,createClient:()=>K5,followSchemaCommit:()=>V5,followSchemaStream:()=>_R,groupMemberSchemaCommit:()=>W5,groupMemberSchemaStream:()=>SR,groupSchemaCommit:()=>Qm,groupSchemaStream:()=>vR,messageSchemaCommit:()=>MR,messageSchemaStream:()=>TR,notificationsReadSchemaCommit:()=>t1,notificationsReadSchemaStream:()=>kR,postSchemaCommit:()=>Zm,postSchemaStream:()=>yR,profileSchemaCommit:()=>G5,profileSchemaStream:()=>wR,reactionSchemaCommit:()=>J5,reactionSchemaStream:()=>ER});Yr();bs();var m1={tile:0,"caip10-link":1,model:2,MID:3,UNLOADABLE:4};function K8(n){let t=m1[n];if(typeof t<"u")return t;throw new Error(`No stream type registered for name ${n}`)}function G8(n){let t=Object.entries(m1).find(([,r])=>r===n);if(t)return t[0];throw new Error(`No stream type registered for index ${n}`)}var lr=class{};lr.nameByCode=G8;lr.codeByName=K8;var Ed=He(qa(),1);Lh();Ka();ys();kc();ja();function hr(n){let t,r,i;return typeof n=="object"?(t=n.hashFunction,r=n.expiring,i=n.tags):t=n,(o,s,a)=>{if(a.value!=null)a.value=H1(a.value,t,r,i);else if(a.get!=null)a.get=H1(a.get,t,r,i);else throw"Only put a Memoize() decorator on a method or get accessor."}}var Qh=new Map;function H1(n,t,r=0,i){let o=Symbol("__memoized_map__");return function(...s){let a;this.hasOwnProperty(o)||Object.defineProperty(this,o,{configurable:!1,enumerable:!1,writable:!1,value:new Map});let f=this[o];if(Array.isArray(i))for(let u of i)Qh.has(u)?Qh.get(u).push(f):Qh.set(u,[f]);if(t||s.length>0||r>0){let u;t===!0?u=s.map(y=>y.toString()).join("!"):t?u=t.apply(this,s):u=s[0];let d=`${u}__timestamp`,h=!1;if(r>0)if(!f.has(d))h=!0;else{let y=f.get(d);h=Date.now()-y>r}f.has(u)&&!h?a=f.get(u):(a=n.apply(this,s),f.set(u,a),r>0&&f.set(d,Date.now()))}else{let u=this;f.has(u)?a=f.get(u):(a=n.apply(this,s),f.set(u,a))}return a}}Yr();Yh();var Lc=({enumerable:n=!0,configurable:t=!1}={})=>({enumerable:n,configurable:t,writable:!1}),ed=function*(n,t){if(n!=null&&!(n instanceof Uint8Array))for(let[r,i]of Object.entries(n)){let o=[...t,r];if(i!=null&&typeof i=="object")if(Array.isArray(i))for(let[s,a]of i.entries()){let f=[...o,s],u=Te.asCID(a);u?yield[f.join("/"),u]:typeof a=="object"&&(yield*ed(a,f))}else{let s=Te.asCID(i);s?yield[o.join("/"),s]:yield*ed(i,o)}}},td=function*(n,t){if(n!=null)for(let[r,i]of Object.entries(n)){let o=[...t,r];if(yield o.join("/"),i!=null&&!(i instanceof Uint8Array)&&typeof i=="object"&&!Te.asCID(i))if(Array.isArray(i))for(let[s,a]of i.entries()){let f=[...o,s];yield f.join("/"),typeof a=="object"&&!Te.asCID(a)&&(yield*td(a,f))}else yield*td(i,o)}},LE=(n,t)=>{let r=n;for(let[i,o]of t.entries()){if(r=r[o],r==null)throw new Error(`Object has no property at ${t.slice(0,i+1).map(a=>`[${JSON.stringify(a)}]`).join("")}`);let s=Te.asCID(r);if(s)return{value:s,remaining:t.slice(i+1).join("/")}}return{value:r}},Bc=class{constructor({cid:t,bytes:r,value:i}){if(!t||!r||typeof i>"u")throw new Error("Missing required argument");this.cid=t,this.bytes=r,this.value=i,this.asBlock=this,Object.defineProperties(this,{cid:Lc(),bytes:Lc(),value:Lc(),asBlock:Lc()})}links(){return ed(this.value,[])}tree(){return td(this.value,[])}get(t="/"){return LE(this.value,t.split("/").filter(Boolean))}},Eo=async({value:n,codec:t,hasher:r})=>{if(typeof n>"u")throw new Error('Missing required argument "value"');if(!t||!r)throw new Error("Missing required argument: codec or hasher");let i=t.encode(n),o=await r.digest(i),s=Te.create(1,t.code,o);return new Bc({value:n,bytes:i,cid:s})},z1=async({bytes:n,codec:t,hasher:r})=>{if(!n)throw new Error('Missing required argument "bytes"');if(!t||!r)throw new Error("Missing required argument: codec or hasher");let i=t.decode(n),o=await r.digest(n),s=Te.create(1,t.code,o);return new Bc({value:i,bytes:n,cid:s})};bs();za();var yd=He(qa(),1);var tn={};Ze(tn,{code:()=>As,decode:()=>dd,encode:()=>So,name:()=>y_});var BE=["string","number","bigint","symbol"],UE=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function K1(n){if(n===null)return"null";if(n===void 0)return"undefined";if(n===!0||n===!1)return"boolean";let t=typeof n;if(BE.includes(t))return t;if(t==="function")return"Function";if(Array.isArray(n))return"Array";if($E(n))return"Buffer";let r=FE(n);return r||"Object"}function $E(n){return n&&n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer.call(null,n)}function FE(n){let t=Object.prototype.toString.call(n).slice(8,-1);if(UE.includes(t))return t}var ue=class{constructor(t,r,i){this.major=t,this.majorEncoded=t<<5,this.name=r,this.terminal=i}toString(){return`Type[${this.major}].${this.name}`}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}};ue.uint=new ue(0,"uint",!0);ue.negint=new ue(1,"negint",!0);ue.bytes=new ue(2,"bytes",!0);ue.string=new ue(3,"string",!0);ue.array=new ue(4,"array",!1);ue.map=new ue(5,"map",!1);ue.tag=new ue(6,"tag",!1);ue.float=new ue(7,"float",!0);ue.false=new ue(7,"false",!0);ue.true=new ue(7,"true",!0);ue.null=new ue(7,"null",!0);ue.undefined=new ue(7,"undefined",!0);ue.break=new ue(7,"break",!0);var xe=class{constructor(t,r,i){this.type=t,this.value=r,this.encodedLength=i,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};var vs=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",qE=new TextDecoder,jE=new TextEncoder;function Uc(n){return vs&&globalThis.Buffer.isBuffer(n)}function nd(n){return n instanceof Uint8Array?Uc(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n:Uint8Array.from(n)}var W1=vs?(n,t,r)=>r-t>64?globalThis.Buffer.from(n.subarray(t,r)).toString("utf8"):J1(n,t,r):(n,t,r)=>r-t>64?qE.decode(n.subarray(t,r)):J1(n,t,r),Y1=vs?n=>n.length>64?globalThis.Buffer.from(n):G1(n):n=>n.length>64?jE.encode(n):G1(n),En=n=>Uint8Array.from(n),xs=vs?(n,t,r)=>Uc(n)?new Uint8Array(n.subarray(t,r)):n.slice(t,r):(n,t,r)=>n.slice(t,r),X1=vs?(n,t)=>(n=n.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),nd(globalThis.Buffer.concat(n,t))):(n,t)=>{let r=new Uint8Array(t),i=0;for(let o of n)i+o.length>r.length&&(o=o.subarray(0,r.length-i)),r.set(o,i),i+=o.length;return r},Z1=vs?n=>globalThis.Buffer.allocUnsafe(n):n=>new Uint8Array(n);function Q1(n,t){if(Uc(n)&&Uc(t))return n.compare(t);for(let r=0;r<n.length;r++)if(n[r]!==t[r])return n[r]<t[r]?-1:1;return 0}function G1(n,t=1/0){let r,i=n.length,o=null,s=[];for(let a=0;a<i;++a){if(r=n.charCodeAt(a),r>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}else if(a+1===i){(t-=3)>-1&&s.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),o=r;continue}r=(o-55296<<10|r-56320)+65536}else o&&(t-=3)>-1&&s.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function J1(n,t,r){let i=[];for(;t<r;){let o=n[t],s=null,a=o>239?4:o>223?3:o>191?2:1;if(t+a<=r){let f,u,d,h;switch(a){case 1:o<128&&(s=o);break;case 2:f=n[t+1],(f&192)===128&&(h=(o&31)<<6|f&63,h>127&&(s=h));break;case 3:f=n[t+1],u=n[t+2],(f&192)===128&&(u&192)===128&&(h=(o&15)<<12|(f&63)<<6|u&63,h>2047&&(h<55296||h>57343)&&(s=h));break;case 4:f=n[t+1],u=n[t+2],d=n[t+3],(f&192)===128&&(u&192)===128&&(d&192)===128&&(h=(o&15)<<18|(f&63)<<12|(u&63)<<6|d&63,h>65535&&h<1114112&&(s=h))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|s&1023),i.push(s),t+=a}return HE(i)}var V1=4096;function HE(n){let t=n.length;if(t<=V1)return String.fromCharCode.apply(String,n);let r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,n.slice(i,i+=V1));return r}var zE=256,Ga=class{constructor(t=zE){this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(t){let r=this.chunks[this.chunks.length-1];if(this.cursor+t.length<=this.maxCursor+1){let o=r.length-(this.maxCursor-this.cursor)-1;r.set(t,o)}else{if(r){let o=r.length-(this.maxCursor-this.cursor)-1;o<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,o),this.maxCursor=this.cursor-1)}t.length<64&&t.length<this.chunkSize?(r=Z1(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(t,0)):(this.chunks.push(t),this.maxCursor+=t.length)}this.cursor+=t.length}toBytes(t=!1){let r;if(this.chunks.length===1){let i=this.chunks[0];t&&this.cursor>i.length/2?(r=this.cursor===i.length?i:i.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=xs(i,0,this.cursor)}else r=X1(this.chunks,this.cursor);return t&&this.reset(),r}};var je="CBOR decode error:",id="CBOR encode error:",Ja=[];Ja[23]=1;Ja[24]=2;Ja[25]=3;Ja[26]=5;Ja[27]=9;function Jn(n,t,r){if(n.length-t<r)throw new Error(`${je} not enough data for type`)}var Tt=[24,256,65536,4294967296,BigInt("18446744073709551616")];function dr(n,t,r){Jn(n,t,1);let i=n[t];if(r.strict===!0&&i<Tt[0])throw new Error(`${je} integer encoded in more bytes than necessary (strict decode)`);return i}function pr(n,t,r){Jn(n,t,2);let i=n[t]<<8|n[t+1];if(r.strict===!0&&i<Tt[1])throw new Error(`${je} integer encoded in more bytes than necessary (strict decode)`);return i}function mr(n,t,r){Jn(n,t,4);let i=n[t]*16777216+(n[t+1]<<16)+(n[t+2]<<8)+n[t+3];if(r.strict===!0&&i<Tt[2])throw new Error(`${je} integer encoded in more bytes than necessary (strict decode)`);return i}function br(n,t,r){Jn(n,t,8);let i=n[t]*16777216+(n[t+1]<<16)+(n[t+2]<<8)+n[t+3],o=n[t+4]*16777216+(n[t+5]<<16)+(n[t+6]<<8)+n[t+7],s=(BigInt(i)<<BigInt(32))+BigInt(o);if(r.strict===!0&&s<Tt[3])throw new Error(`${je} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(r.allowBigInt===!0)return s;throw new Error(`${je} integers outside of the safe integer range are not supported`)}function eb(n,t,r,i){return new xe(ue.uint,dr(n,t+1,i),2)}function tb(n,t,r,i){return new xe(ue.uint,pr(n,t+1,i),3)}function rb(n,t,r,i){return new xe(ue.uint,mr(n,t+1,i),5)}function nb(n,t,r,i){return new xe(ue.uint,br(n,t+1,i),9)}function Ir(n,t){return Pt(n,0,t.value)}function Pt(n,t,r){if(r<Tt[0]){let i=Number(r);n.push([t|i])}else if(r<Tt[1]){let i=Number(r);n.push([t|24,i])}else if(r<Tt[2]){let i=Number(r);n.push([t|25,i>>>8,i&255])}else if(r<Tt[3]){let i=Number(r);n.push([t|26,i>>>24&255,i>>>16&255,i>>>8&255,i&255])}else{let i=BigInt(r);if(i<Tt[4]){let o=[t|27,0,0,0,0,0,0,0],s=Number(i&BigInt(4294967295)),a=Number(i>>BigInt(32)&BigInt(4294967295));o[8]=s&255,s=s>>8,o[7]=s&255,s=s>>8,o[6]=s&255,s=s>>8,o[5]=s&255,o[4]=a&255,a=a>>8,o[3]=a&255,a=a>>8,o[2]=a&255,a=a>>8,o[1]=a&255,n.push(o)}else throw new Error(`${je} encountered BigInt larger than allowable range`)}}Ir.encodedSize=function(t){return Pt.encodedSize(t.value)};Pt.encodedSize=function(t){return t<Tt[0]?1:t<Tt[1]?2:t<Tt[2]?3:t<Tt[3]?5:9};Ir.compareTokens=function(t,r){return t.value<r.value?-1:t.value>r.value?1:0};function ib(n,t,r,i){return new xe(ue.negint,-1-dr(n,t+1,i),2)}function ob(n,t,r,i){return new xe(ue.negint,-1-pr(n,t+1,i),3)}function sb(n,t,r,i){return new xe(ue.negint,-1-mr(n,t+1,i),5)}var od=BigInt(-1),ab=BigInt(1);function fb(n,t,r,i){let o=br(n,t+1,i);if(typeof o!="bigint"){let s=-1-o;if(s>=Number.MIN_SAFE_INTEGER)return new xe(ue.negint,s,9)}if(i.allowBigInt!==!0)throw new Error(`${je} integers outside of the safe integer range are not supported`);return new xe(ue.negint,od-BigInt(o),9)}function $c(n,t){let r=t.value,i=typeof r=="bigint"?r*od-ab:r*-1-1;Pt(n,t.type.majorEncoded,i)}$c.encodedSize=function(t){let r=t.value,i=typeof r=="bigint"?r*od-ab:r*-1-1;return i<Tt[0]?1:i<Tt[1]?2:i<Tt[2]?3:i<Tt[3]?5:9};$c.compareTokens=function(t,r){return t.value<r.value?1:t.value>r.value?-1:0};function Va(n,t,r,i){Jn(n,t,r+i);let o=xs(n,t+r,t+r+i);return new xe(ue.bytes,o,r+i)}function cb(n,t,r,i){return Va(n,t,1,r)}function ub(n,t,r,i){return Va(n,t,2,dr(n,t+1,i))}function lb(n,t,r,i){return Va(n,t,3,pr(n,t+1,i))}function hb(n,t,r,i){return Va(n,t,5,mr(n,t+1,i))}function db(n,t,r,i){let o=br(n,t+1,i);if(typeof o=="bigint")throw new Error(`${je} 64-bit integer bytes lengths not supported`);return Va(n,t,9,o)}function Fc(n){return n.encodedBytes===void 0&&(n.encodedBytes=n.type===ue.string?Y1(n.value):n.value),n.encodedBytes}function ws(n,t){let r=Fc(t);Pt(n,t.type.majorEncoded,r.length),n.push(r)}ws.encodedSize=function(t){let r=Fc(t);return Pt.encodedSize(r.length)+r.length};ws.compareTokens=function(t,r){return GE(Fc(t),Fc(r))};function GE(n,t){return n.length<t.length?-1:n.length>t.length?1:Q1(n,t)}function Wa(n,t,r,i,o){let s=r+i;Jn(n,t,s);let a=new xe(ue.string,W1(n,t+r,t+s),s);return o.retainStringBytes===!0&&(a.byteValue=xs(n,t+r,t+s)),a}function pb(n,t,r,i){return Wa(n,t,1,r,i)}function mb(n,t,r,i){return Wa(n,t,2,dr(n,t+1,i),i)}function bb(n,t,r,i){return Wa(n,t,3,pr(n,t+1,i),i)}function gb(n,t,r,i){return Wa(n,t,5,mr(n,t+1,i),i)}function yb(n,t,r,i){let o=br(n,t+1,i);if(typeof o=="bigint")throw new Error(`${je} 64-bit integer string lengths not supported`);return Wa(n,t,9,o,i)}var vb=ws;function Es(n,t,r,i){return new xe(ue.array,i,r)}function xb(n,t,r,i){return Es(n,t,1,r)}function wb(n,t,r,i){return Es(n,t,2,dr(n,t+1,i))}function Eb(n,t,r,i){return Es(n,t,3,pr(n,t+1,i))}function _b(n,t,r,i){return Es(n,t,5,mr(n,t+1,i))}function Sb(n,t,r,i){let o=br(n,t+1,i);if(typeof o=="bigint")throw new Error(`${je} 64-bit integer array lengths not supported`);return Es(n,t,9,o)}function Ab(n,t,r,i){if(i.allowIndefinite===!1)throw new Error(`${je} indefinite length items not allowed`);return Es(n,t,1,1/0)}function qc(n,t){Pt(n,ue.array.majorEncoded,t.value)}qc.compareTokens=Ir.compareTokens;qc.encodedSize=function(t){return Pt.encodedSize(t.value)};function _s(n,t,r,i){return new xe(ue.map,i,r)}function Tb(n,t,r,i){return _s(n,t,1,r)}function Mb(n,t,r,i){return _s(n,t,2,dr(n,t+1,i))}function kb(n,t,r,i){return _s(n,t,3,pr(n,t+1,i))}function Cb(n,t,r,i){return _s(n,t,5,mr(n,t+1,i))}function Ob(n,t,r,i){let o=br(n,t+1,i);if(typeof o=="bigint")throw new Error(`${je} 64-bit integer map lengths not supported`);return _s(n,t,9,o)}function Db(n,t,r,i){if(i.allowIndefinite===!1)throw new Error(`${je} indefinite length items not allowed`);return _s(n,t,1,1/0)}function jc(n,t){Pt(n,ue.map.majorEncoded,t.value)}jc.compareTokens=Ir.compareTokens;jc.encodedSize=function(t){return Pt.encodedSize(t.value)};function Rb(n,t,r,i){return new xe(ue.tag,r,1)}function Ib(n,t,r,i){return new xe(ue.tag,dr(n,t+1,i),2)}function Nb(n,t,r,i){return new xe(ue.tag,pr(n,t+1,i),3)}function Pb(n,t,r,i){return new xe(ue.tag,mr(n,t+1,i),5)}function Lb(n,t,r,i){return new xe(ue.tag,br(n,t+1,i),9)}function Hc(n,t){Pt(n,ue.tag.majorEncoded,t.value)}Hc.compareTokens=Ir.compareTokens;Hc.encodedSize=function(t){return Pt.encodedSize(t.value)};var ZE=20,QE=21,e_=22,t_=23;function Bb(n,t,r,i){if(i.allowUndefined===!1)throw new Error(`${je} undefined values are not supported`);return i.coerceUndefinedToNull===!0?new xe(ue.null,null,1):new xe(ue.undefined,void 0,1)}function Ub(n,t,r,i){if(i.allowIndefinite===!1)throw new Error(`${je} indefinite length items not allowed`);return new xe(ue.break,void 0,1)}function sd(n,t,r){if(r){if(r.allowNaN===!1&&Number.isNaN(n))throw new Error(`${je} NaN values are not supported`);if(r.allowInfinity===!1&&(n===1/0||n===-1/0))throw new Error(`${je} Infinity values are not supported`)}return new xe(ue.float,n,t)}function $b(n,t,r,i){return sd(ad(n,t+1),3,i)}function Fb(n,t,r,i){return sd(fd(n,t+1),5,i)}function qb(n,t,r,i){return sd(Kb(n,t+1),9,i)}function zc(n,t,r){let i=t.value;if(i===!1)n.push([ue.float.majorEncoded|ZE]);else if(i===!0)n.push([ue.float.majorEncoded|QE]);else if(i===null)n.push([ue.float.majorEncoded|e_]);else if(i===void 0)n.push([ue.float.majorEncoded|t_]);else{let o,s=!1;(!r||r.float64!==!0)&&(Hb(i),o=ad(Qr,1),i===o||Number.isNaN(i)?(Qr[0]=249,n.push(Qr.slice(0,3)),s=!0):(zb(i),o=fd(Qr,1),i===o&&(Qr[0]=250,n.push(Qr.slice(0,5)),s=!0))),s||(r_(i),o=Kb(Qr,1),Qr[0]=251,n.push(Qr.slice(0,9)))}}zc.encodedSize=function(t,r){let i=t.value;if(i===!1||i===!0||i===null||i===void 0)return 1;if(!r||r.float64!==!0){Hb(i);let o=ad(Qr,1);if(i===o||Number.isNaN(i))return 3;if(zb(i),o=fd(Qr,1),i===o)return 5}return 9};var jb=new ArrayBuffer(9),Nr=new DataView(jb,1),Qr=new Uint8Array(jb,0);function Hb(n){if(n===1/0)Nr.setUint16(0,31744,!1);else if(n===-1/0)Nr.setUint16(0,64512,!1);else if(Number.isNaN(n))Nr.setUint16(0,32256,!1);else{Nr.setFloat32(0,n);let t=Nr.getUint32(0),r=(t&2139095040)>>23,i=t&8388607;if(r===255)Nr.setUint16(0,31744,!1);else if(r===0)Nr.setUint16(0,(n&2147483648)>>16|i>>13,!1);else{let o=r-127;o<-24?Nr.setUint16(0,0):o<-14?Nr.setUint16(0,(t&2147483648)>>16|1<<24+o,!1):Nr.setUint16(0,(t&2147483648)>>16|o+15<<10|i>>13,!1)}}}function ad(n,t){if(n.length-t<2)throw new Error(`${je} not enough data for float16`);let r=(n[t]<<8)+n[t+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let i=r>>10&31,o=r&1023,s;return i===0?s=o*2**-24:i!==31?s=(o+1024)*2**(i-25):s=o===0?1/0:NaN,r&32768?-s:s}function zb(n){Nr.setFloat32(0,n,!1)}function fd(n,t){if(n.length-t<4)throw new Error(`${je} not enough data for float32`);let r=(n.byteOffset||0)+t;return new DataView(n.buffer,r,4).getFloat32(0,!1)}function r_(n){Nr.setFloat64(0,n,!1)}function Kb(n,t){if(n.length-t<8)throw new Error(`${je} not enough data for float64`);let r=(n.byteOffset||0)+t;return new DataView(n.buffer,r,8).getFloat64(0,!1)}zc.compareTokens=Ir.compareTokens;function tt(n,t,r){throw new Error(`${je} encountered invalid minor (${r}) for major ${n[t]>>>5}`)}function Kc(n){return()=>{throw new Error(`${je} ${n}`)}}var ge=[];for(let n=0;n<=23;n++)ge[n]=tt;ge[24]=eb;ge[25]=tb;ge[26]=rb;ge[27]=nb;ge[28]=tt;ge[29]=tt;ge[30]=tt;ge[31]=tt;for(let n=32;n<=55;n++)ge[n]=tt;ge[56]=ib;ge[57]=ob;ge[58]=sb;ge[59]=fb;ge[60]=tt;ge[61]=tt;ge[62]=tt;ge[63]=tt;for(let n=64;n<=87;n++)ge[n]=cb;ge[88]=ub;ge[89]=lb;ge[90]=hb;ge[91]=db;ge[92]=tt;ge[93]=tt;ge[94]=tt;ge[95]=Kc("indefinite length bytes/strings are not supported");for(let n=96;n<=119;n++)ge[n]=pb;ge[120]=mb;ge[121]=bb;ge[122]=gb;ge[123]=yb;ge[124]=tt;ge[125]=tt;ge[126]=tt;ge[127]=Kc("indefinite length bytes/strings are not supported");for(let n=128;n<=151;n++)ge[n]=xb;ge[152]=wb;ge[153]=Eb;ge[154]=_b;ge[155]=Sb;ge[156]=tt;ge[157]=tt;ge[158]=tt;ge[159]=Ab;for(let n=160;n<=183;n++)ge[n]=Tb;ge[184]=Mb;ge[185]=kb;ge[186]=Cb;ge[187]=Ob;ge[188]=tt;ge[189]=tt;ge[190]=tt;ge[191]=Db;for(let n=192;n<=215;n++)ge[n]=Rb;ge[216]=Ib;ge[217]=Nb;ge[218]=Pb;ge[219]=Lb;ge[220]=tt;ge[221]=tt;ge[222]=tt;ge[223]=tt;for(let n=224;n<=243;n++)ge[n]=Kc("simple values are not supported");ge[244]=tt;ge[245]=tt;ge[246]=tt;ge[247]=Bb;ge[248]=Kc("simple values are not supported");ge[249]=$b;ge[250]=Fb;ge[251]=qb;ge[252]=tt;ge[253]=tt;ge[254]=tt;ge[255]=Ub;var en=[];for(let n=0;n<24;n++)en[n]=new xe(ue.uint,n,1);for(let n=-1;n>=-24;n--)en[31-n]=new xe(ue.negint,n,1);en[64]=new xe(ue.bytes,new Uint8Array(0),1);en[96]=new xe(ue.string,"",1);en[128]=new xe(ue.array,0,1);en[160]=new xe(ue.map,0,1);en[244]=new xe(ue.false,!1,1);en[245]=new xe(ue.true,!0,1);en[246]=new xe(ue.null,null,1);function Gb(n){switch(n.type){case ue.false:return En([244]);case ue.true:return En([245]);case ue.null:return En([246]);case ue.bytes:return n.value.length?void 0:En([64]);case ue.string:return n.value===""?En([96]):void 0;case ue.array:return n.value===0?En([128]):void 0;case ue.map:return n.value===0?En([160]):void 0;case ue.uint:return n.value<24?En([Number(n.value)]):void 0;case ue.negint:if(n.value>=-24)return En([31-Number(n.value)])}}var i_={float64:!1,mapSorter:a_,quickEncodeToken:Gb};function o_(){let n=[];return n[ue.uint.major]=Ir,n[ue.negint.major]=$c,n[ue.bytes.major]=ws,n[ue.string.major]=vb,n[ue.array.major]=qc,n[ue.map.major]=jc,n[ue.tag.major]=Hc,n[ue.float.major]=zc,n}var Jb=o_(),cd=new Ga,Ss=class{constructor(t,r){this.obj=t,this.parent=r}includes(t){let r=this;do if(r.obj===t)return!0;while(r=r.parent);return!1}static createCheck(t,r){if(t&&t.includes(r))throw new Error(`${id} object contains circular references`);return new Ss(r,t)}},Ai={null:new xe(ue.null,null),undefined:new xe(ue.undefined,void 0),true:new xe(ue.true,!0),false:new xe(ue.false,!1),emptyArray:new xe(ue.array,0),emptyMap:new xe(ue.map,0)},Ti={number(n,t,r,i){return!Number.isInteger(n)||!Number.isSafeInteger(n)?new xe(ue.float,n):n>=0?new xe(ue.uint,n):new xe(ue.negint,n)},bigint(n,t,r,i){return n>=BigInt(0)?new xe(ue.uint,n):new xe(ue.negint,n)},Uint8Array(n,t,r,i){return new xe(ue.bytes,n)},string(n,t,r,i){return new xe(ue.string,n)},boolean(n,t,r,i){return n?Ai.true:Ai.false},null(n,t,r,i){return Ai.null},undefined(n,t,r,i){return Ai.undefined},ArrayBuffer(n,t,r,i){return new xe(ue.bytes,new Uint8Array(n))},DataView(n,t,r,i){return new xe(ue.bytes,new Uint8Array(n.buffer,n.byteOffset,n.byteLength))},Array(n,t,r,i){if(!n.length)return r.addBreakTokens===!0?[Ai.emptyArray,new xe(ue.break)]:Ai.emptyArray;i=Ss.createCheck(i,n);let o=[],s=0;for(let a of n)o[s++]=Gc(a,r,i);return r.addBreakTokens?[new xe(ue.array,n.length),o,new xe(ue.break)]:[new xe(ue.array,n.length),o]},Object(n,t,r,i){let o=t!=="Object",s=o?n.keys():Object.keys(n),a=o?n.size:s.length;if(!a)return r.addBreakTokens===!0?[Ai.emptyMap,new xe(ue.break)]:Ai.emptyMap;i=Ss.createCheck(i,n);let f=[],u=0;for(let d of s)f[u++]=[Gc(d,r,i),Gc(o?n.get(d):n[d],r,i)];return s_(f,r),r.addBreakTokens?[new xe(ue.map,a),f,new xe(ue.break)]:[new xe(ue.map,a),f]}};Ti.Map=Ti.Object;Ti.Buffer=Ti.Uint8Array;for(let n of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Ti[`${n}Array`]=Ti.DataView;function Gc(n,t={},r){let i=K1(n),o=t&&t.typeEncoders&&t.typeEncoders[i]||Ti[i];if(typeof o=="function"){let a=o(n,i,t,r);if(a!=null)return a}let s=Ti[i];if(!s)throw new Error(`${id} unsupported type: ${i}`);return s(n,i,t,r)}function s_(n,t){t.mapSorter&&n.sort(t.mapSorter)}function a_(n,t){let r=Array.isArray(n[0])?n[0][0]:n[0],i=Array.isArray(t[0])?t[0][0]:t[0];if(r.type!==i.type)return r.type.compare(i.type);let o=r.type.major,s=Jb[o].compareTokens(r,i);return s===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),s}function Vb(n,t,r,i){if(Array.isArray(t))for(let o of t)Vb(n,o,r,i);else r[t.type.major](n,t,i)}function f_(n,t,r){let i=Gc(n,r);if(!Array.isArray(i)&&r.quickEncodeToken){let o=r.quickEncodeToken(i);if(o)return o;let s=t[i.type.major];if(s.encodedSize){let a=s.encodedSize(i,r),f=new Ga(a);if(s(f,i,r),f.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${i} was wrong`);return nd(f.chunks[0])}}return cd.reset(),Vb(cd,i,t,r),cd.toBytes(!0)}function ud(n,t){return t=Object.assign({},i_,t),f_(n,Jb,t)}var c_={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},ld=class{constructor(t,r={}){this.pos=0,this.data=t,this.options=r}done(){return this.pos>=this.data.length}next(){let t=this.data[this.pos],r=en[t];if(r===void 0){let i=ge[t];if(!i)throw new Error(`${je} no decoder for major type ${t>>>5} (byte 0x${t.toString(16).padStart(2,"0")})`);let o=t&31;r=i(this.data,this.pos,o,this.options)}return this.pos+=r.encodedLength,r}},Ya=Symbol.for("DONE"),Jc=Symbol.for("BREAK");function u_(n,t,r){let i=[];for(let o=0;o<n.value;o++){let s=Xa(t,r);if(s===Jc){if(n.value===1/0)break;throw new Error(`${je} got unexpected break to lengthed array`)}if(s===Ya)throw new Error(`${je} found array but not enough entries (got ${o}, expected ${n.value})`);i[o]=s}return i}function l_(n,t,r){let i=r.useMaps===!0,o=i?void 0:{},s=i?new Map:void 0;for(let a=0;a<n.value;a++){let f=Xa(t,r);if(f===Jc){if(n.value===1/0)break;throw new Error(`${je} got unexpected break to lengthed map`)}if(f===Ya)throw new Error(`${je} found map but not enough entries (got ${a} [no key], expected ${n.value})`);if(i!==!0&&typeof f!="string")throw new Error(`${je} non-string keys not supported (got ${typeof f})`);let u=Xa(t,r);if(u===Ya)throw new Error(`${je} found map but not enough entries (got ${a} [no value], expected ${n.value})`);i?s.set(f,u):o[f]=u}return i?s:o}function Xa(n,t){if(n.done())return Ya;let r=n.next();if(r.type===ue.break)return Jc;if(r.type.terminal)return r.value;if(r.type===ue.array)return u_(r,n,t);if(r.type===ue.map)return l_(r,n,t);if(r.type===ue.tag){if(t.tags&&typeof t.tags[r.value]=="function"){let i=Xa(n,t);return t.tags[r.value](i)}throw new Error(`${je} tag not supported (${r.value})`)}throw new Error("unsupported")}function hd(n,t){if(!(n instanceof Uint8Array))throw new Error(`${je} data to decode must be a Uint8Array`);t=Object.assign({},c_,t);let r=t.tokenizer||new ld(n,t),i=Xa(r,t);if(i===Ya)throw new Error(`${je} did not find any content to decode`);if(i===Jc)throw new Error(`${je} got unexpected break`);if(!r.done())throw new Error(`${je} too many terminals, data makes no sense`);return i}Yr();var Wb=42;function d_(n){if(n.asCID!==n)return null;let t=Te.asCID(n);if(!t)return null;let r=new Uint8Array(t.bytes.byteLength+1);return r.set(t.bytes,1),[new xe(ue.tag,Wb),new xe(ue.bytes,r)]}function p_(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function m_(n){if(Number.isNaN(n))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(n===1/0||n===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var b_={float64:!0,typeEncoders:{Object:d_,undefined:p_,number:m_}};function g_(n){if(n[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return Te.decode(n.subarray(1))}var Yb={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};Yb.tags[Wb]=g_;var y_="dag-cbor",As=113,So=n=>ud(n,b_),dd=n=>hd(n,Yb);function Ts(n){try{return n()}catch(t){return t}}Yr();var pd=He(qa(),1);vo();function Ao(n){let t=pd.default.decode(n),r=pd.default.decode.bytes,i=n.subarray(r);return[t,i,r]}function v_(n){return n===0||n===1}function md(n){let[t,r]=Ao(n);if(!v_(t))throw new Error(`Unknown CID version ${t}`);let[i,o]=Ao(r),[,s,a]=Ao(o),[f,,u]=Ao(s),d=o.subarray(0,a+u+f),h=o.subarray(a+u+f);return[Te.create(t,i,$a(d)),h]}Yr();bs();function To(n,t="StreamRef"){let[r,i]=Ao(n);if(r!==206)throw new Error(`Invalid ${t}, does not include streamid codec`);let[o,s]=Ao(i),a=md(s),[f,u]=a;if(u.length===0)return{kind:"stream-id",type:o,genesis:f};if(u.length===1&&u[0]===0)return{kind:"commit-id",type:o,genesis:f,commit:null};{let[d]=md(u);return{kind:"commit-id",type:o,genesis:f,commit:d}}}var x_=/(ceramic:\/\/|\/ceramic\/)?([a-zA-Z0-9]+)(\?commit=([a-zA-Z0-9]+))?/;function Ms(n,t="StreamRef"){let r=x_.exec(n)||[],i=r[2];if(!i)throw new Error(`Malformed ${t} string: ${n}`);let o=Xr.decode(i),s=To(o),a=r[4];return a?{kind:"commit-id",type:s.type,genesis:s.genesis,commit:bd(s.genesis,a)}:s}function w_(n){try{return typeof n=="string"?Te.parse(n):Te.asCID(n)}catch{return null}}function bd(n,t=null){if(!t||t==="0")return null;let r=w_(t);if(r)return n.equals(r)?null:r;throw new Error("Cannot specify commit as a number except to request commit 0 (the genesis commit)")}var Za=function(n,t,r,i){var o=arguments.length,s=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,t,r,i);else for(var f=n.length-1;f>=0;f--)(a=n[f])&&(s=(o<3?a(s):o>3?a(t,r,s):a(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},Pr=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},vd=class extends Error{constructor(t){super(`Invalid StreamID bytes ${Xr.encode(t)}: contains commit`)}},xd=class extends Error{constructor(t){super(`Invalid StreamID string ${t}: contains commit`)}};function Qb(n){let t=To(n,"StreamID");if(t.kind==="stream-id")return new Ke(t.type,t.genesis);throw new vd(n)}function E_(n){return Ts(()=>Qb(n))}function e2(n){let t=Ms(n,"StreamID");if(t.kind==="stream-id")return new Ke(t.type,t.genesis);throw new xd(n)}function __(n){return Ts(()=>e2(n))}var Zb=Symbol.for("@ceramicnetwork/streamid/StreamID"),Ke=class{constructor(t,r){if(this._tag=Zb,!(t||t===0))throw new Error("StreamID constructor: type required");if(!r)throw new Error("StreamID constructor: cid required");this._type=typeof t=="string"?lr.codeByName(t):t,this._cid=typeof r=="string"?Te.parse(r):r}static isInstance(t){return typeof t=="object"&&"_tag"in t&&t._tag===Zb}static async fromGenesis(t,r){let i=await Eo({value:r,codec:tn,hasher:Si});return new Ke(t,i.cid)}get type(){return this._type}get typeName(){return lr.nameByCode(this._type)}get cid(){return this._cid}get bytes(){let t=yd.default.encode(206),r=yd.default.encode(this.type);return Zr([t,r,this.cid.bytes])}get baseID(){return new Ke(this._type,this._cid)}equals(t){return Ke.isInstance(t)?this.type===t.type&&this.cid.equals(t.cid):!1}toString(){return Xr.encode(this.bytes)}toUrl(){return`ceramic://${this.toString()}`}[Symbol.for("nodejs.util.inspect.custom")](){return`StreamID(${this.toString()})`}[Symbol.toPrimitive](){return this.toString()}};Ke.fromBytes=Qb;Ke.fromBytesNoThrow=E_;Ke.fromString=e2;Ke.fromStringNoThrow=__;Za([hr(),Pr("design:type",String),Pr("design:paramtypes",[])],Ke.prototype,"typeName",null);Za([hr(),Pr("design:type",Uint8Array),Pr("design:paramtypes",[])],Ke.prototype,"bytes",null);Za([hr(),Pr("design:type",Ke),Pr("design:paramtypes",[])],Ke.prototype,"baseID",null);Za([hr(),Pr("design:type",Function),Pr("design:paramtypes",[]),Pr("design:returntype",String)],Ke.prototype,"toString",null);Za([hr(),Pr("design:type",Function),Pr("design:paramtypes",[]),Pr("design:returntype",String)],Ke.prototype,"toUrl",null);var Cs=function(n,t,r,i){var o=arguments.length,s=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,t,r,i);else for(var f=n.length-1;f>=0;f--)(a=n[f])&&(s=(o<3?a(s):o>3?a(t,r,s):a(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},ar=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},wd=function(n,t,r,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!o:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(n,r):o?o.value=r:t.set(n,r),r},Vn=function(n,t,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(n):i?i.value:t.get(n)},ks,Mo,Qa,_d=class extends Error{constructor(t){super(`Error while parsing CommitID from bytes ${Xr.encode(t)}: no commit information provided`)}},Sd=class extends Error{constructor(t){super(`Error while parsing CommitID from string ${t}: no commit information provided`)}};function r2(n){let t=To(n,"CommitID");if(t.kind==="commit-id")return new ut(t.type,t.genesis,t.commit);throw new _d(n)}function S_(n){return Ts(()=>r2(n))}function n2(n){let t=Ms(n,"CommitID");if(t.kind==="commit-id")return new ut(t.type,t.genesis,t.commit);throw new Sd(n)}function A_(n){return Ts(()=>n2(n))}var t2=Symbol.for("@ceramicnetwork/streamid/CommitID");function T_(n,t){return new ut(n.type,n.cid,t)}var ut=class{constructor(t,r,i=null){if(this._tag=t2,ks.set(this,void 0),Mo.set(this,void 0),Qa.set(this,void 0),!t&&t!==0)throw new Error("constructor: type required");if(!r)throw new Error("constructor: cid required");wd(this,ks,typeof t=="string"?lr.codeByName(t):t,"f"),wd(this,Mo,typeof r=="string"?Te.parse(r):r,"f"),wd(this,Qa,bd(Vn(this,Mo,"f"),i),"f")}static isInstance(t){return typeof t=="object"&&"_tag"in t&&t._tag===t2}get baseID(){return new Ke(Vn(this,ks,"f"),Vn(this,Mo,"f"))}get type(){return Vn(this,ks,"f")}get typeName(){return lr.nameByCode(Vn(this,ks,"f"))}get cid(){return Vn(this,Mo,"f")}get commit(){return Vn(this,Qa,"f")||Vn(this,Mo,"f")}get bytes(){let t=Ed.default.encode(206),r=Ed.default.encode(this.type),i=Vn(this,Qa,"f")?.bytes||new Uint8Array([0]);return Zr([t,r,this.cid.bytes,i])}equals(t){return this.type===t.type&&this.cid.equals(t.cid)&&this.commit.equals(t.commit)}toString(){return Xr.encode(this.bytes)}toUrl(){return`ceramic://${this.toString()}`}[(ks=new WeakMap,Mo=new WeakMap,Qa=new WeakMap,Symbol.for("nodejs.util.inspect.custom"))](){return`CommitID(${this.toString()})`}[Symbol.toPrimitive](){return this.toString()}};ut.fromBytes=r2;ut.fromBytesNoThrow=S_;ut.fromString=n2;ut.fromStringNoThrow=A_;ut.make=T_;Cs([hr(),ar("design:type",Ke),ar("design:paramtypes",[])],ut.prototype,"baseID",null);Cs([hr(),ar("design:type",String),ar("design:paramtypes",[])],ut.prototype,"typeName",null);Cs([hr(),ar("design:type",Te),ar("design:paramtypes",[])],ut.prototype,"commit",null);Cs([hr(),ar("design:type",Uint8Array),ar("design:paramtypes",[])],ut.prototype,"bytes",null);Cs([hr(),ar("design:type",Function),ar("design:paramtypes",[]),ar("design:returntype",String)],ut.prototype,"toString",null);Cs([hr(),ar("design:type",Function),ar("design:paramtypes",[]),ar("design:returntype",String)],ut.prototype,"toUrl",null);bs();var gr;(function(n){function t(o){let s=To(o);switch(s.kind){case"commit-id":return new ut(s.type,s.genesis,s.commit);case"stream-id":return new Ke(s.type,s.genesis);default:throw new Error(`Malformed StreamRef bytes: ${Xr.encode(o)}`)}}n.fromBytes=t;function r(o){let s=Ms(o);switch(s.kind){case"commit-id":return new ut(s.type,s.genesis,s.commit);case"stream-id":return new Ke(s.type,s.genesis);default:throw new Error(`Malformed StreamRef string: ${o}`)}}n.fromString=r;function i(o){if(Ke.isInstance(o)||ut.isInstance(o))return o;if(o instanceof Uint8Array)return t(o);if(typeof o=="string")return r(o);throw new Error(`Can not build CommitID or StreamID from ${JSON.stringify(o)}`)}n.from=i})(gr||(gr={}));function Ad(n){return typeof n=="string"?Ke.fromString(n):n}function i2(n,t){let r=new URL(n);for(let[i,o]of Object.entries(t))Ke.isInstance(o)?r.searchParams.set(i,o.toString()):typeof o=="object"?r.searchParams.set(i,JSON.stringify(o)):r.searchParams.set(i,o);return r}function Td(n){let t={};for(let[r,i]of Object.entries(n))Ke.isInstance(i)?t[r]=i.toString():t[r]=i;return t}var Md=function(n,t){return Md=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},Md(n,t)};function Ht(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Md(n,t);function r(){this.constructor=n}n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function o2(n,t,r,i){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function f(h){try{d(i.next(h))}catch(y){a(y)}}function u(h){try{d(i.throw(h))}catch(y){a(y)}}function d(h){h.done?s(h.value):o(h.value).then(f,u)}d((i=i.apply(n,t||[])).next())})}function Vc(n,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,o,s,a;return a={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function f(d){return function(h){return u([d,h])}}function u(d){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(r=0)),r;)try{if(i=1,o&&(s=d[0]&2?o.return:d[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,d[1])).done)return s;switch(o=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,o=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(n,r)}catch(h){d=[6,h],o=0}finally{i=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Wn(n){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&n[t],i=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function yr(n,t){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var i=r.call(n),o,s=[],a;try{for(;(t===void 0||t-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(f){a={error:f}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return s}function rn(n,t,r){if(r||arguments.length===2)for(var i=0,o=t.length,s;i<o;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))}function ko(n){return this instanceof ko?(this.v=n,this):new ko(n)}function s2(n,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(n,t||[]),o,s=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(C){i[C]&&(o[C]=function(O){return new Promise(function(A,M){s.push([C,O,A,M])>1||f(C,O)})})}function f(C,O){try{u(i[C](O))}catch(A){y(s[0][3],A)}}function u(C){C.value instanceof ko?Promise.resolve(C.value.v).then(d,h):y(s[0][2],C)}function d(C){f("next",C)}function h(C){f("throw",C)}function y(C,O){C(O),s.shift(),s.length&&f(s[0][0],s[0][1])}}function a2(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],r;return t?t.call(n):(n=typeof Wn=="function"?Wn(n):n[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(s){r[s]=n[s]&&function(a){return new Promise(function(f,u){a=n[s](a),o(f,u,a.done,a.value)})}}function o(s,a,f,u){Promise.resolve(u).then(function(d){s({value:d,done:f})},a)}}function Je(n){return typeof n=="function"}function Os(n){var t=function(i){Error.call(i),i.stack=new Error().stack},r=n(t);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var Wc=Os(function(n){return function(r){n(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(i,o){return o+1+") "+i.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function Co(n,t){if(n){var r=n.indexOf(t);0<=r&&n.splice(r,1)}}var Mi=function(){function n(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return n.prototype.unsubscribe=function(){var t,r,i,o,s;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var f=Wn(a),u=f.next();!u.done;u=f.next()){var d=u.value;d.remove(this)}}catch(M){t={error:M}}finally{try{u&&!u.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}else a.remove(this);var h=this.initialTeardown;if(Je(h))try{h()}catch(M){s=M instanceof Wc?M.errors:[M]}var y=this._finalizers;if(y){this._finalizers=null;try{for(var C=Wn(y),O=C.next();!O.done;O=C.next()){var A=O.value;try{f2(A)}catch(M){s=s??[],M instanceof Wc?s=rn(rn([],yr(s)),yr(M.errors)):s.push(M)}}}catch(M){i={error:M}}finally{try{O&&!O.done&&(o=C.return)&&o.call(C)}finally{if(i)throw i.error}}}if(s)throw new Wc(s)}},n.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)f2(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(t)}},n.prototype._hasParent=function(t){var r=this._parentage;return r===t||Array.isArray(r)&&r.includes(t)},n.prototype._addParent=function(t){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t},n.prototype._removeParent=function(t){var r=this._parentage;r===t?this._parentage=null:Array.isArray(r)&&Co(r,t)},n.prototype.remove=function(t){var r=this._finalizers;r&&Co(r,t),t instanceof n&&t._removeParent(this)},n.EMPTY=function(){var t=new n;return t.closed=!0,t}(),n}();var kd=Mi.EMPTY;function Yc(n){return n instanceof Mi||n&&"closed"in n&&Je(n.remove)&&Je(n.add)&&Je(n.unsubscribe)}function f2(n){Je(n)?n():n.unsubscribe()}var nn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ds={setTimeout:function(n,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=Ds.delegate;return o?.setTimeout?o.setTimeout.apply(o,rn([n,t],yr(r))):setTimeout.apply(void 0,rn([n,t],yr(r)))},clearTimeout:function(n){var t=Ds.delegate;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Xc(n){Ds.setTimeout(function(){var t=nn.onUnhandledError;if(t)t(n);else throw n})}function Cd(){}var c2=function(){return Od("C",void 0,void 0)}();function u2(n){return Od("E",void 0,n)}function l2(n){return Od("N",n,void 0)}function Od(n,t,r){return{kind:n,value:t,error:r}}var Oo=null;function Rs(n){if(nn.useDeprecatedSynchronousErrorHandling){var t=!Oo;if(t&&(Oo={errorThrown:!1,error:null}),n(),t){var r=Oo,i=r.errorThrown,o=r.error;if(Oo=null,i)throw o}}else n()}function h2(n){nn.useDeprecatedSynchronousErrorHandling&&Oo&&(Oo.errorThrown=!0,Oo.error=n)}var ef=function(n){Ht(t,n);function t(r){var i=n.call(this)||this;return i.isStopped=!1,r?(i.destination=r,Yc(r)&&r.add(i)):i.destination=O_,i}return t.create=function(r,i,o){return new Qc(r,i,o)},t.prototype.next=function(r){this.isStopped?Rd(l2(r),this):this._next(r)},t.prototype.error=function(r){this.isStopped?Rd(u2(r),this):(this.isStopped=!0,this._error(r))},t.prototype.complete=function(){this.isStopped?Rd(c2,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(r){this.destination.next(r)},t.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Mi);var M_=Function.prototype.bind;function Dd(n,t){return M_.call(n,t)}var k_=function(){function n(t){this.partialObserver=t}return n.prototype.next=function(t){var r=this.partialObserver;if(r.next)try{r.next(t)}catch(i){Zc(i)}},n.prototype.error=function(t){var r=this.partialObserver;if(r.error)try{r.error(t)}catch(i){Zc(i)}else Zc(t)},n.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(r){Zc(r)}},n}(),Qc=function(n){Ht(t,n);function t(r,i,o){var s=n.call(this)||this,a;if(Je(r)||!r)a={next:r??void 0,error:i??void 0,complete:o??void 0};else{var f;s&&nn.useDeprecatedNextContext?(f=Object.create(r),f.unsubscribe=function(){return s.unsubscribe()},a={next:r.next&&Dd(r.next,f),error:r.error&&Dd(r.error,f),complete:r.complete&&Dd(r.complete,f)}):a=r}return s.destination=new k_(a),s}return t}(ef);function Zc(n){nn.useDeprecatedSynchronousErrorHandling?h2(n):Xc(n)}function C_(n){throw n}function Rd(n,t){var r=nn.onStoppedNotification;r&&Ds.setTimeout(function(){return r(n,t)})}var O_={closed:!0,next:Cd,error:C_,complete:Cd};var Is=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Ns(n){return n}function d2(n){return n.length===0?Ns:n.length===1?n[0]:function(r){return n.reduce(function(i,o){return o(i)},r)}}var ft=function(){function n(t){t&&(this._subscribe=t)}return n.prototype.lift=function(t){var r=new n;return r.source=this,r.operator=t,r},n.prototype.subscribe=function(t,r,i){var o=this,s=R_(t)?t:new Qc(t,r,i);return Rs(function(){var a=o,f=a.operator,u=a.source;s.add(f?f.call(s,u):u?o._subscribe(s):o._trySubscribe(s))}),s},n.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){t.error(r)}},n.prototype.forEach=function(t,r){var i=this;return r=p2(r),new r(function(o,s){var a=new Qc({next:function(f){try{t(f)}catch(u){s(u),a.unsubscribe()}},error:s,complete:o});i.subscribe(a)})},n.prototype._subscribe=function(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)},n.prototype[Is]=function(){return this},n.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return d2(t)(this)},n.prototype.toPromise=function(t){var r=this;return t=p2(t),new t(function(i,o){var s;r.subscribe(function(a){return s=a},function(a){return o(a)},function(){return i(s)})})},n.create=function(t){return new n(t)},n}();function p2(n){var t;return(t=n??nn.Promise)!==null&&t!==void 0?t:Promise}function D_(n){return n&&Je(n.next)&&Je(n.error)&&Je(n.complete)}function R_(n){return n&&n instanceof ef||D_(n)&&Yc(n)}function I_(n){return Je(n?.lift)}function Mt(n){return function(t){if(I_(t))return t.lift(function(r){try{return n(r,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function kt(n,t,r,i,o){return new N_(n,t,r,i,o)}var N_=function(n){Ht(t,n);function t(r,i,o,s,a,f){var u=n.call(this,r)||this;return u.onFinalize=a,u.shouldUnsubscribe=f,u._next=i?function(d){try{i(d)}catch(h){r.error(h)}}:n.prototype._next,u._error=s?function(d){try{s(d)}catch(h){r.error(h)}finally{this.unsubscribe()}}:n.prototype._error,u._complete=o?function(){try{o()}catch(d){r.error(d)}finally{this.unsubscribe()}}:n.prototype._complete,u}return t.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;n.prototype.unsubscribe.call(this),!i&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},t}(ef);var m2=Os(function(n){return function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}});var Id=function(n){Ht(t,n);function t(){var r=n.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return t.prototype.lift=function(r){var i=new b2(this,this);return i.operator=r,i},t.prototype._throwIfClosed=function(){if(this.closed)throw new m2},t.prototype.next=function(r){var i=this;Rs(function(){var o,s;if(i._throwIfClosed(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var a=Wn(i.currentObservers),f=a.next();!f.done;f=a.next()){var u=f.value;u.next(r)}}catch(d){o={error:d}}finally{try{f&&!f.done&&(s=a.return)&&s.call(a)}finally{if(o)throw o.error}}}})},t.prototype.error=function(r){var i=this;Rs(function(){if(i._throwIfClosed(),!i.isStopped){i.hasError=i.isStopped=!0,i.thrownError=r;for(var o=i.observers;o.length;)o.shift().error(r)}})},t.prototype.complete=function(){var r=this;Rs(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var i=r.observers;i.length;)i.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(r){return this._throwIfClosed(),n.prototype._trySubscribe.call(this,r)},t.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},t.prototype._innerSubscribe=function(r){var i=this,o=this,s=o.hasError,a=o.isStopped,f=o.observers;return s||a?kd:(this.currentObservers=null,f.push(r),new Mi(function(){i.currentObservers=null,Co(f,r)}))},t.prototype._checkFinalizedStatuses=function(r){var i=this,o=i.hasError,s=i.thrownError,a=i.isStopped;o?r.error(s):a&&r.complete()},t.prototype.asObservable=function(){var r=new ft;return r.source=this,r},t.create=function(r,i){return new b2(r,i)},t}(ft);var b2=function(n){Ht(t,n);function t(r,i){var o=n.call(this)||this;return o.destination=r,o.source=i,o}return t.prototype.next=function(r){var i,o;(o=(i=this.destination)===null||i===void 0?void 0:i.next)===null||o===void 0||o.call(i,r)},t.prototype.error=function(r){var i,o;(o=(i=this.destination)===null||i===void 0?void 0:i.error)===null||o===void 0||o.call(i,r)},t.prototype.complete=function(){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||i===void 0||i.call(r)},t.prototype._subscribe=function(r){var i,o;return(o=(i=this.source)===null||i===void 0?void 0:i.subscribe(r))!==null&&o!==void 0?o:kd},t}(Id);var Nd=function(n){Ht(t,n);function t(r){var i=n.call(this)||this;return i._value=r,i}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(r){var i=n.prototype._subscribe.call(this,r);return!i.closed&&r.next(this._value),i},t.prototype.getValue=function(){var r=this,i=r.hasError,o=r.thrownError,s=r._value;if(i)throw o;return this._throwIfClosed(),s},t.prototype.next=function(r){n.prototype.next.call(this,this._value=r)},t}(Id);var Pd={now:function(){return(Pd.delegate||Date).now()},delegate:void 0};var g2=function(n){Ht(t,n);function t(r,i){return n.call(this)||this}return t.prototype.schedule=function(r,i){return i===void 0&&(i=0),this},t}(Mi);var tf={setInterval:function(n,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=tf.delegate;return o?.setInterval?o.setInterval.apply(o,rn([n,t],yr(r))):setInterval.apply(void 0,rn([n,t],yr(r)))},clearInterval:function(n){var t=tf.delegate;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};var y2=function(n){Ht(t,n);function t(r,i){var o=n.call(this,r,i)||this;return o.scheduler=r,o.work=i,o.pending=!1,o}return t.prototype.schedule=function(r,i){var o;if(i===void 0&&(i=0),this.closed)return this;this.state=r;var s=this.id,a=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(a,s,i)),this.pending=!0,this.delay=i,this.id=(o=this.id)!==null&&o!==void 0?o:this.requestAsyncId(a,this.id,i),this},t.prototype.requestAsyncId=function(r,i,o){return o===void 0&&(o=0),tf.setInterval(r.flush.bind(r,this),o)},t.prototype.recycleAsyncId=function(r,i,o){if(o===void 0&&(o=0),o!=null&&this.delay===o&&this.pending===!1)return i;i!=null&&tf.clearInterval(i)},t.prototype.execute=function(r,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var o=this._execute(r,i);if(o)return o;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(r,i){var o=!1,s;try{this.work(r)}catch(a){o=!0,s=a||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),s},t.prototype.unsubscribe=function(){if(!this.closed){var r=this,i=r.id,o=r.scheduler,s=o.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Co(s,this),i!=null&&(this.id=this.recycleAsyncId(o,i,null)),this.delay=null,n.prototype.unsubscribe.call(this)}},t}(g2);var Ld=function(){function n(t,r){r===void 0&&(r=n.now),this.schedulerActionCtor=t,this.now=r}return n.prototype.schedule=function(t,r,i){return r===void 0&&(r=0),new this.schedulerActionCtor(this,t).schedule(i,r)},n.now=Pd.now,n}();var v2=function(n){Ht(t,n);function t(r,i){i===void 0&&(i=Ld.now);var o=n.call(this,r,i)||this;return o.actions=[],o._active=!1,o}return t.prototype.flush=function(r){var i=this.actions;if(this._active){i.push(r);return}var o;this._active=!0;do if(o=r.execute(r.state,r.delay))break;while(r=i.shift());if(this._active=!1,o){for(;r=i.shift();)r.unsubscribe();throw o}},t}(Ld);var P_=new v2(y2),x2=P_;var eu=new ft(function(n){return n.complete()});function tu(n){return n&&Je(n.schedule)}function w2(n){return n[n.length-1]}function E2(n){return tu(w2(n))?n.pop():void 0}function _2(n,t){return typeof w2(n)=="number"?n.pop():t}var Ps=function(n){return n&&typeof n.length=="number"&&typeof n!="function"};function ru(n){return Je(n?.then)}function nu(n){return Je(n[Is])}function iu(n){return Symbol.asyncIterator&&Je(n?.[Symbol.asyncIterator])}function ou(n){return new TypeError("You provided "+(n!==null&&typeof n=="object"?"an invalid object":"'"+n+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function L_(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var su=L_();function au(n){return Je(n?.[su])}function fu(n){return s2(this,arguments,function(){var r,i,o,s;return Vc(this,function(a){switch(a.label){case 0:r=n.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,ko(r.read())];case 3:return i=a.sent(),o=i.value,s=i.done,s?[4,ko(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,ko(o)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function cu(n){return Je(n?.getReader)}function zt(n){if(n instanceof ft)return n;if(n!=null){if(nu(n))return B_(n);if(Ps(n))return U_(n);if(ru(n))return $_(n);if(iu(n))return S2(n);if(au(n))return F_(n);if(cu(n))return q_(n)}throw ou(n)}function B_(n){return new ft(function(t){var r=n[Is]();if(Je(r.subscribe))return r.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function U_(n){return new ft(function(t){for(var r=0;r<n.length&&!t.closed;r++)t.next(n[r]);t.complete()})}function $_(n){return new ft(function(t){n.then(function(r){t.closed||(t.next(r),t.complete())},function(r){return t.error(r)}).then(null,Xc)})}function F_(n){return new ft(function(t){var r,i;try{for(var o=Wn(n),s=o.next();!s.done;s=o.next()){var a=s.value;if(t.next(a),t.closed)return}}catch(f){r={error:f}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}t.complete()})}function S2(n){return new ft(function(t){j_(n,t).catch(function(r){return t.error(r)})})}function q_(n){return S2(fu(n))}function j_(n,t){var r,i,o,s;return o2(this,void 0,void 0,function(){var a,f;return Vc(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),r=a2(n),u.label=1;case 1:return[4,r.next()];case 2:if(i=u.sent(),!!i.done)return[3,4];if(a=i.value,t.next(a),t.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return f=u.sent(),o={error:f},[3,11];case 6:return u.trys.push([6,,9,10]),i&&!i.done&&(s=r.return)?[4,s.call(r)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function Lr(n,t,r,i,o){i===void 0&&(i=0),o===void 0&&(o=!1);var s=t.schedule(function(){r(),o?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!o)return s}function uu(n,t){return t===void 0&&(t=0),Mt(function(r,i){r.subscribe(kt(i,function(o){return Lr(i,n,function(){return i.next(o)},t)},function(){return Lr(i,n,function(){return i.complete()},t)},function(o){return Lr(i,n,function(){return i.error(o)},t)}))})}function lu(n,t){return t===void 0&&(t=0),Mt(function(r,i){i.add(n.schedule(function(){return r.subscribe(i)},t))})}function A2(n,t){return zt(n).pipe(lu(t),uu(t))}function T2(n,t){return zt(n).pipe(lu(t),uu(t))}function M2(n,t){return new ft(function(r){var i=0;return t.schedule(function(){i===n.length?r.complete():(r.next(n[i++]),r.closed||this.schedule())})})}function k2(n,t){return new ft(function(r){var i;return Lr(r,t,function(){i=n[su](),Lr(r,t,function(){var o,s,a;try{o=i.next(),s=o.value,a=o.done}catch(f){r.error(f);return}a?r.complete():r.next(s)},0,!0)}),function(){return Je(i?.return)&&i.return()}})}function hu(n,t){if(!n)throw new Error("Iterable cannot be null");return new ft(function(r){Lr(r,t,function(){var i=n[Symbol.asyncIterator]();Lr(r,t,function(){i.next().then(function(o){o.done?r.complete():r.next(o.value)})},0,!0)})})}function C2(n,t){return hu(fu(n),t)}function O2(n,t){if(n!=null){if(nu(n))return A2(n,t);if(Ps(n))return M2(n,t);if(ru(n))return T2(n,t);if(iu(n))return hu(n,t);if(au(n))return k2(n,t);if(cu(n))return C2(n,t)}throw ou(n)}function D2(n,t){return t?O2(n,t):zt(n)}var du=Os(function(n){return function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}});function R2(n){return n instanceof Date&&!isNaN(n)}function pu(n,t){return Mt(function(r,i){var o=0;r.subscribe(kt(i,function(s){i.next(n.call(t,s,o++))}))})}var H_=Array.isArray;function z_(n,t){return H_(t)?n.apply(void 0,rn([],yr(t))):n(t)}function I2(n){return pu(function(t){return z_(n,t)})}function N2(n,t,r,i,o,s,a,f){var u=[],d=0,h=0,y=!1,C=function(){y&&!u.length&&!d&&t.complete()},O=function(M){return d<i?A(M):u.push(M)},A=function(M){s&&t.next(M),d++;var F=!1;zt(r(M,h++)).subscribe(kt(t,function(D){o?.(D),s?O(D):t.next(D)},function(){F=!0},void 0,function(){if(F)try{d--;for(var D=function(){var $=u.shift();a?Lr(t,a,function(){return A($)}):A($)};u.length&&d<i;)D();C()}catch($){t.error($)}}))};return n.subscribe(kt(t,O,function(){y=!0,C()})),function(){f?.()}}function rf(n,t,r){return r===void 0&&(r=1/0),Je(t)?rf(function(i,o){return pu(function(s,a){return t(i,s,o,a)})(zt(n(i,o)))},r):(typeof t=="number"&&(r=t),Mt(function(i,o){return N2(i,o,n,r)}))}function P2(n){return n===void 0&&(n=1/0),rf(Ns,n)}var K_=["addListener","removeListener"],G_=["addEventListener","removeEventListener"],J_=["on","off"];function nf(n,t,r,i){if(Je(r)&&(i=r,r=void 0),i)return nf(n,t,r).pipe(I2(i));var o=yr(Y_(n)?G_.map(function(f){return function(u){return n[f](t,u,r)}}):V_(n)?K_.map(L2(n,t)):W_(n)?J_.map(L2(n,t)):[],2),s=o[0],a=o[1];if(!s&&Ps(n))return rf(function(f){return nf(f,t,r)})(zt(n));if(!s)throw new TypeError("Invalid event target");return new ft(function(f){var u=function(){for(var d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];return f.next(1<d.length?d:d[0])};return s(u),function(){return a(u)}})}function L2(n,t){return function(r){return function(i){return n[r](t,i)}}}function V_(n){return Je(n.addListener)&&Je(n.removeListener)}function W_(n){return Je(n.on)&&Je(n.off)}function Y_(n){return Je(n.addEventListener)&&Je(n.removeEventListener)}function Do(n,t,r){n===void 0&&(n=0),r===void 0&&(r=x2);var i=-1;return t!=null&&(tu(t)?r=t:i=t),new ft(function(o){var s=R2(n)?+n-r.now():n;s<0&&(s=0);var a=0;return r.schedule(function(){o.closed||(o.next(a++),0<=i?this.schedule(void 0,i):o.complete())},s)})}function Bd(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var r=E2(n),i=_2(n,1/0),o=n;return o.length?o.length===1?zt(o[0]):P2(i)(D2(o,r)):eu}function B2(n,t){return Mt(function(r,i){var o=0;r.subscribe(kt(i,function(s){return n.call(t,s,o++)&&i.next(s)}))})}function U2(n){return Mt(function(t,r){var i=!1;t.subscribe(kt(r,function(o){i=!0,r.next(o)},function(){i||r.next(n),r.complete()}))})}function $2(n){return n<=0?function(){return eu}:Mt(function(t,r){var i=0;t.subscribe(kt(r,function(o){++i<=n&&(r.next(o),n<=i&&r.complete())}))})}function F2(n){return n===void 0&&(n=X_),Mt(function(t,r){var i=!1;t.subscribe(kt(r,function(o){i=!0,r.next(o)},function(){return i?r.complete():r.error(n())}))})}function X_(){return new du}function Ud(n,t){var r=arguments.length>=2;return function(i){return i.pipe(n?B2(function(o,s){return n(o,s,i)}):Ns,$2(1),r?U2(t):F2(function(){return new du}))}}var Z_={leading:!0,trailing:!1};function $d(n,t){return t===void 0&&(t=Z_),Mt(function(r,i){var o=t.leading,s=t.trailing,a=!1,f=null,u=null,d=!1,h=function(){u?.unsubscribe(),u=null,s&&(O(),d&&i.complete())},y=function(){u=null,d&&i.complete()},C=function(A){return u=zt(n(A)).subscribe(kt(i,h,y))},O=function(){if(a){a=!1;var A=f;f=null,i.next(A),!d&&C(A)}};r.subscribe(kt(i,function(A){a=!0,f=A,!(u&&!u.closed)&&(o?O():C(A))},function(){d=!0,!(s&&a&&u&&!u.closed)&&i.complete()}))})}var mt;(function(n){n[n.PREFER_CACHE=0]="PREFER_CACHE",n[n.SYNC_ALWAYS=1]="SYNC_ALWAYS",n[n.NEVER_SYNC=2]="NEVER_SYNC"})(mt||(mt={}));var e0=He(ff(),1);var kg;(function(n){n[n.GENESIS=0]="GENESIS",n[n.PARTIAL=1]="PARTIAL",n[n.SIGNED=2]="SIGNED"})(kg||(kg={}));var cf;(function(n){n[n.NOT_REQUESTED=0]="NOT_REQUESTED",n[n.PENDING=1]="PENDING",n[n.PROCESSING=2]="PROCESSING",n[n.ANCHORED=3]="ANCHORED",n[n.FAILED=4]="FAILED"})(cf||(cf={}));var t0;(function(n){n[n.GENESIS=0]="GENESIS",n[n.SIGNED=1]="SIGNED",n[n.ANCHOR=2]="ANCHOR"})(t0||(t0={}));var _n=class extends ft{constructor(t,r){super(i=>{t.subscribe(i)}),this.state$=t,this._context=r}get id(){return new Ke(this.state$.value.type,this.state$.value.log[0].cid)}get api(){return this._context.api}get content(){let{next:t,content:r}=this.state$.value;return(0,e0.default)(t?.content??r)}get tip(){return this.state$.value.log[this.state$.value.log.length-1].cid}get commitId(){return ut.make(this.id,this.tip)}get allCommitIds(){return this.state$.value.log.map(({cid:t})=>ut.make(this.id,t))}get anchorCommitIds(){return this.state$.value.log.filter(({type:t})=>t===t0.ANCHOR).map(({cid:t})=>ut.make(this.id,t))}get state(){return(0,e0.default)(this.state$.value)}async sync(t={}){t={sync:mt.PREFER_CACHE,...t};let r=await this.api.loadStream(this.id,t);this.state$.next(r.state)}async requestAnchor(){return this.api.requestAnchor(this.id)}};function Ci(){return n=>{}}var Ig=He(qs(),1);function Dg(n){let t=new AbortController;if(n.length===0)throw Error("Need abort signals to create a merged abort signal");return n.some(r=>r.aborted)?(t.abort(),t.signal):(Bd(...n.map(r=>nf(r,"abort"))).pipe(Ud()).subscribe(()=>{t.abort()}),t.signal)}var Su=class{constructor(t){let r=new AbortController;if(this.signal=r.signal,t<=0){r.abort();return}this._subscription=Do(t).subscribe(()=>{r.abort()})}clear(){this._subscription?.unsubscribe()}};async function Rg(n,t){let r=new AbortController,i=()=>{r.abort()};return n.addEventListener("abort",i),n.aborted&&r.abort(),t(r.signal).finally(()=>{n.removeEventListener("abort",i)})}var T7=60*1e3*3;async function Lt(n,t={}){t.body&&Object.assign(t,{body:JSON.stringify(t.body),headers:{...t.headers,"Content-Type":"application/json"}});let r=t.timeout||T7,i=new Su(r),o=t.signal?Dg([t.signal,i.signal]):i.signal,s=await Rg(o,a=>(0,Ig.default)(String(n),{...t,signal:a})).finally(()=>i.clear());if(!s.ok){let a=await s.text();throw new Error(`HTTP request to '${n}' failed with status '${s.statusText}': ${a}`)}return s.json()}var uf=He(ff(),1);Yr();function Qn(n){let t=Te.asCID(n);if(t)return t;if(typeof n=="string")return Te.parse(n);if(n instanceof Uint8Array)return Te.decode(n);throw new Error(`${n} cannot be converted to a CID`)}var Ng=0,Xe=class{static streamIdFromState(t){return new Ke(t.type,t.log[0].cid)}static serializeCommit(t){let r=(0,uf.default)(t);return Xe.isSignedCommitContainer(r)?(r.jws.link=r.jws.link.toString(),r.linkedBlock=Ye(r.linkedBlock,"base64"),r.cacaoBlock&&(r.cacaoBlock=Ye(r.cacaoBlock,"base64")),r):(Xe.isSignedCommit(t)&&(r.link=r.link.toString()),Xe.isAnchorCommit(t)&&(r.proof=r.proof.toString()),r.id&&(r.id=r.id.toString()),r.prev&&(r.prev=r.prev.toString()),t.header?.model&&(r.header.model=Ye(t.header.model,"base64")),r)}static deserializeCommit(t){let r=(0,uf.default)(t);return Xe.isSignedCommitContainer(r)?(r.jws.link=Qn(r.jws.link),r.linkedBlock=Ge(r.linkedBlock,"base64"),r.cacaoBlock&&(r.cacaoBlock=Ge(r.cacaoBlock,"base64")),r):(Xe.isSignedCommit(r)&&(r.link=Qn(r.link)),Xe.isAnchorCommit(r)&&(r.proof=Qn(r.proof)),r.id&&(r.id=Qn(r.id)),r.prev&&(r.prev=Qn(r.prev)),r.header?.model&&(r.header.model=Ge(r.header.model,"base64")),r)}static serializeState(t){let r=(0,uf.default)(t);return r.log=r.log.map(i=>({...i,cid:i.cid.toString()})),r.anchorStatus!=null&&(r.anchorStatus=cf[r.anchorStatus]),r.anchorProof!=null&&(r.anchorProof.txHash=r.anchorProof.txHash.toString(),r.anchorProof.root=r.anchorProof.root.toString()),t.metadata?.model&&(r.metadata.model=t.metadata.model.toString()),t.next?.metadata?.model&&(r.next.metadata.model=t.next.metadata.model.toString()),t.metadata?.unique&&t.type!=Ng&&(r.metadata.unique=Ye(r.metadata.unique,"base64")),r.doctype=lr.nameByCode(r.type),r}static deserializeState(t){if(!t)return null;let r=(0,uf.default)(t);return r.doctype&&(r.type=lr.codeByName(r.doctype),delete r.doctype),r.log=r.log.map(i=>({...i,cid:Qn(i.cid)})),r.anchorProof&&(r.anchorProof.txHash=Qn(r.anchorProof.txHash),r.anchorProof.root=Qn(r.anchorProof.root)),r.anchorStatus&&(r.anchorStatus=cf[r.anchorStatus]),t.metadata?.model&&(r.metadata.model=Ke.fromString(t.metadata.model)),t.next?.metadata?.model&&(r.next.metadata.model=Ke.fromString(t.next.metadata.model)),t.metadata?.unique&&t.type!=Ng&&(r.metadata.unique=Ge(t.metadata.unique,"base64")),r}static statesEqual(t,r){return JSON.stringify(Xe.serializeState(t))===JSON.stringify(Xe.serializeState(r))}static isStateSupersetOf(t,r){if(t.log.length<r.log.length)return!1;for(let i in r.log)if(!t.log[i].cid.equals(r.log[i].cid))return!1;return!(t.log.length===r.log.length&&t.anchorStatus!=r.anchorStatus)}static assertCommitLinksToState(t,r){let i=this.streamIdFromState(t);if(r.id&&!r.id.equals(t.log[0].cid))throw new Error(`Invalid genesis CID in commit for StreamID ${i.toString()}. Found: ${r.id}, expected ${t.log[0].cid}`);let o=t.log[t.log.length-1].cid;if(!r.prev.equals(o))throw new Error(`Commit doesn't properly point to previous commit in log. Expected ${o}, found 'prev' ${r.prev}`)}static async convertCommitToSignedCommitContainer(t,r){if(Xe.isSignedCommit(t)){let i=await r.block.get(t.link);return{jws:t,linkedBlock:i}}return t}static isSignedCommitContainer(t){return t&&t.jws!==void 0}static isSignedCommit(t){return t&&t.link!==void 0}static isAnchorCommit(t){return t&&t.proof!==void 0}static isSignedCommitData(t){return t&&t.envelope!==void 0}static isAnchorCommitData(t){return t&&t.proof!==void 0}static commitDataToLogEntry(t,r){let i={cid:t.cid,type:r};return t?.capability?.p?.exp&&(i.expirationTime=Math.floor(Date.parse(t.capability.p.exp)/1e3)),t.timestamp&&(i.timestamp=t.timestamp),i}static checkForCacaoExpiration(t){let r=Math.floor(Date.now()/1e3);for(let i of t.log){let o=i.timestamp??r;if(i.expirationTime&&i.expirationTime<o)throw new Error(`CACAO expired: Commit ${i.cid.toString()} of Stream ${Xe.streamIdFromState(t).toString()} has a CACAO that expired at ${i.expirationTime}. Loading the stream with 'sync: SyncOptions.ALWAYS_SYNC' will restore the stream to a usable state, by discarding the invalid commits (this means losing the data from those invalid writes!)`)}}};function h0(){return h0=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},h0.apply(this,arguments)}var d0={name:"chainId",regex:"[-:a-zA-Z0-9]{5,41}",parameters:{delimiter:":",values:{0:{name:"namespace",regex:"[-a-z0-9]{3,8}"},1:{name:"reference",regex:"[-a-zA-Z0-9]{1,32}"}}}},aS={name:"accountId",regex:"[-:a-zA-Z0-9]{7,106}",parameters:{delimiter:":",values:{0:{name:"namespace",regex:"[-a-z0-9]{3,8}"},1:{name:"reference",regex:"[-a-zA-Z0-9]{1,32}"},2:{name:"address",regex:"[a-zA-Z0-9]{1,64}"}}}},p0={name:"assetName",regex:"[-:a-zA-Z0-9]{5,73}",parameters:{delimiter:":",values:{0:{name:"namespace",regex:"[-a-z0-9]{3,8}"},1:{name:"reference",regex:"[-a-zA-Z0-9]{1,64}"}}}},fS={name:"assetType",regex:"[-:a-zA-Z0-9]{11,115}",parameters:{delimiter:"/",values:{0:d0,1:p0}}},cS={name:"assetId",regex:"[-:a-zA-Z0-9]{13,148}",parameters:{delimiter:"/",values:{0:d0,1:p0,2:{name:"tokenId",regex:"[-a-zA-Z0-9]{1,32}"}}}},lf={2:d0,10:aS,19:{assetName:p0,assetType:fS,assetId:cS}};function Vg(n,t){return n.split(t.parameters.delimiter)}function hf(n,t){var r=Vg(n,t),i={};return r.forEach(function(o,s){i[t.parameters.values[s].name]=o}),i}function js(n,t){return Object.values(t.parameters.values).map(function(r){var i=n[r.name];return typeof i=="string"?i:js(i,r)}).join(t.parameters.delimiter)}function df(n,t){if(!new RegExp(t.regex).test(n))return!1;var r=Vg(n,t);if(r.length!==Object.keys(t.parameters.values).length)return!1;var i=r.map(function(o,s){return new RegExp(t.parameters.values[s].regex).test(o)}).filter(function(o){return!!o});return i.length===r.length}var Oi=function(){function n(r){typeof r=="string"&&(r=n.parse(r)),this.namespace=r.namespace,this.reference=r.reference}n.parse=function(i){if(!df(i,this.spec))throw new Error("Invalid "+this.spec.name+" provided: "+i);return new n(hf(i,this.spec)).toJSON()},n.format=function(i){return js(i,this.spec)};var t=n.prototype;return t.toString=function(){return n.format(this.toJSON())},t.toJSON=function(){return{namespace:this.namespace,reference:this.reference}},n}();Oi.spec=lf[2];var Sn=function(){function n(r){typeof r=="string"&&(r=n.parse(r)),this.chainId=new Oi(r.chainId),this.address=r.address}n.parse=function(i){if(!df(i,this.spec))throw new Error("Invalid "+this.spec.name+" provided: "+i);var o=hf(i,this.spec),s=o.namespace,a=o.reference,f=o.address,u=new Oi({namespace:s,reference:a});return new n({chainId:u,address:f}).toJSON()},n.format=function(i){var o=new Oi(i.chainId),s=h0({},o.toJSON(),{address:i.address});return js(s,this.spec)};var t=n.prototype;return t.toString=function(){return n.format(this.toJSON())},t.toJSON=function(){return{chainId:this.chainId.toJSON(),address:this.address}},n}();Sn.spec=lf[10];var m0=function(){function n(r){typeof r=="string"&&(r=n.parse(r)),this.namespace=r.namespace,this.reference=r.reference}n.parse=function(i){if(!df(i,this.spec))throw new Error("Invalid "+this.spec.name+" provided: "+i);return new n(hf(i,this.spec)).toJSON()},n.format=function(i){return js(i,this.spec)};var t=n.prototype;return t.toString=function(){return n.format(this.toJSON())},t.toJSON=function(){return{namespace:this.namespace,reference:this.reference}},n}();m0.spec=lf[19].assetName;var uS=function(){function n(r){typeof r=="string"&&(r=n.parse(r)),this.chainId=new Oi(r.chainId),this.assetName=new m0(r.assetName)}n.parse=function(i){if(!df(i,this.spec))throw new Error("Invalid "+this.spec.name+" provided: "+i);return new n(hf(i,this.spec)).toJSON()},n.format=function(i){return js(i,this.spec)};var t=n.prototype;return t.toString=function(){return n.format(this.toJSON())},t.toJSON=function(){return{chainId:this.chainId.toJSON(),assetName:this.assetName}},n}();uS.spec=lf[19].assetType;var lS=function(){function n(r){typeof r=="string"&&(r=n.parse(r)),this.chainId=new Oi(r.chainId),this.assetName=new m0(r.assetName),this.tokenId=r.tokenId}n.parse=function(i){if(!df(i,this.spec))throw new Error("Invalid "+this.spec.name+" provided: "+i);return new n(hf(i,this.spec)).toJSON()},n.format=function(i){return js(i,this.spec)};var t=n.prototype;return t.toString=function(){return n.format(this.toJSON())},t.toJSON=function(){return{chainId:this.chainId.toJSON(),assetName:this.assetName.toJSON(),tokenId:this.tokenId}},n}();lS.spec=lf[19].assetId;function Wg(n){if(typeof n=="string"&&n.includes("@")){let[t,r]=n.split("@");if(!t||!r)throw new Error("Invalid accountId provided");return new Sn({address:t,chainId:r})}return new Sn(n)}var qy=He(Fy(),1),Jt=He(Uo(),1),OS=`
sign-in-with-ethereum =
    domain %s" wants you to sign in with your Ethereum account:" LF
    address LF
    LF
    [ statement LF ]
    LF
    %s"URI: " URI LF
    %s"Version: " version LF
    %s"Chain ID: " chain-id LF
    %s"Nonce: " nonce LF
    %s"Issued At: " issued-at
    [ LF %s"Expiration Time: " expiration-time ]
    [ LF %s"Not Before: " not-before ]
    [ LF %s"Request ID: " request-id ]
    [ LF %s"Resources:"
    resources ]

domain = dnsauthority

address = "0x" 40*40HEXDIG
    ; Must also conform to captilization
    ; checksum encoding specified in EIP-55
    ; where applicable (EOAs).

statement = *( reserved / unreserved / " " )
    ; The purpose is to exclude LF (line breaks).

version = "1"

nonce = 8*( ALPHA / DIGIT )

issued-at = date-time
expiration-time = date-time
not-before = date-time

request-id = *pchar

chain-id = 1*DIGIT
    ; See EIP-155 for valid CHAIN_IDs.

resources = *( LF resource )

resource = "- " URI

; ------------------------------------------------------------------------------
; RFC 3986

URI           = scheme ":" hier-part [ "?" query ] [ "#" fragment ]

hier-part     = "//" authority path-abempty
              / path-absolute
              / path-rootless
              / path-empty

scheme        = ALPHA *( ALPHA / DIGIT / "+" / "-" / "." )

authority     = [ userinfo "@" ] host [ ":" port ]
userinfo      = *( unreserved / pct-encoded / sub-delims / ":" )
host          = IP-literal / IPv4address / reg-name
port          = *DIGIT

IP-literal    = "[" ( IPv6address / IPvFuture  ) "]"

IPvFuture     = "v" 1*HEXDIG "." 1*( unreserved / sub-delims / ":" )

IPv6address   =                            6( h16 ":" ) ls32
              /                       "::" 5( h16 ":" ) ls32
              / [               h16 ] "::" 4( h16 ":" ) ls32
              / [ *1( h16 ":" ) h16 ] "::" 3( h16 ":" ) ls32
              / [ *2( h16 ":" ) h16 ] "::" 2( h16 ":" ) ls32
              / [ *3( h16 ":" ) h16 ] "::"    h16 ":"   ls32
              / [ *4( h16 ":" ) h16 ] "::"              ls32
              / [ *5( h16 ":" ) h16 ] "::"              h16
              / [ *6( h16 ":" ) h16 ] "::"

h16           = 1*4HEXDIG
ls32          = ( h16 ":" h16 ) / IPv4address
IPv4address   = dec-octet "." dec-octet "." dec-octet "." dec-octet
dec-octet     = DIGIT                 ; 0-9
                 / %x31-39 DIGIT         ; 10-99
                 / "1" 2DIGIT            ; 100-199
                 / "2" %x30-34 DIGIT     ; 200-249
                 / "25" %x30-35          ; 250-255

reg-name      = *( unreserved / pct-encoded / sub-delims )

path-abempty  = *( "/" segment )
path-absolute = "/" [ segment-nz *( "/" segment ) ]
path-rootless = segment-nz *( "/" segment )
path-empty    = 0pchar

segment       = *pchar
segment-nz    = 1*pchar

pchar         = unreserved / pct-encoded / sub-delims / ":" / "@"

query         = *( pchar / "/" / "?" )

fragment      = *( pchar / "/" / "?" )

pct-encoded   = "%" HEXDIG HEXDIG

unreserved    = ALPHA / DIGIT / "-" / "." / "_" / "~"
reserved      = gen-delims / sub-delims
gen-delims    = ":" / "/" / "?" / "#" / "[" / "]" / "@"
sub-delims    = "!" / "$" / "&" / "'" / "(" / ")"
              / "*" / "+" / "," / ";" / "="

; ------------------------------------------------------------------------------
; RFC 4501

dnsauthority    = host [ ":" port ]
                             ; See RFC 3986 for the
                             ; definition of "host" and "port".

; ------------------------------------------------------------------------------
; RFC 3339

date-fullyear   = 4DIGIT
date-month      = 2DIGIT  ; 01-12
date-mday       = 2DIGIT  ; 01-28, 01-29, 01-30, 01-31 based on
                          ; month/year
time-hour       = 2DIGIT  ; 00-23
time-minute     = 2DIGIT  ; 00-59
time-second     = 2DIGIT  ; 00-58, 00-59, 00-60 based on leap second
                          ; rules
time-secfrac    = "." 1*DIGIT
time-numoffset  = ("+" / "-") time-hour ":" time-minute
time-offset     = "Z" / time-numoffset

partial-time    = time-hour ":" time-minute ":" time-second
                  [time-secfrac]
full-date       = date-fullyear "-" date-month "-" date-mday
full-time       = partial-time time-offset

date-time       = full-date "T" full-time

; ------------------------------------------------------------------------------
; RFC 5234

ALPHA          =  %x41-5A / %x61-7A   ; A-Z / a-z
LF             =  %x0A
                  ; linefeed
DIGIT          =  %x30-39
                  ; 0-9
HEXDIG         =  DIGIT / "A" / "B" / "C" / "D" / "E" / "F"
`,Pu=class{constructor(t){let r=new qy.default(OS);if(r.generate(),r.errors.length)throw console.error(r.errorsToAscii()),console.error(r.linesToAscii()),console.log(r.displayAttributeErrors()),new Error("ABNF grammar has errors");let i=r.toObject(),o=new Jt.default.parser;o.ast=new Jt.default.ast;let s=Jt.default.ids,a=function(j,X,B,L,U){let te=s.SEM_OK;return j===s.SEM_PRE&&(U.domain=Jt.default.utils.charsToString(X,B,L)),te};o.ast.callbacks.domain=a;let f=function(j,X,B,L,U){let te=s.SEM_OK;return j===s.SEM_PRE&&(U.address=Jt.default.utils.charsToString(X,B,L)),te};o.ast.callbacks.address=f;let u=function(j,X,B,L,U){let te=s.SEM_OK;return j===s.SEM_PRE&&(U.statement=Jt.default.utils.charsToString(X,B,L)),te};o.ast.callbacks.statement=u;let d=function(j,X,B,L,U){let te=s.SEM_OK;return j===s.SEM_PRE&&(U.uri||(U.uri=Jt.default.utils.charsToString(X,B,L))),te};o.ast.callbacks.uri=d;let h=function(j,X,B,L,U){let te=s.SEM_OK;return j===s.SEM_PRE&&(U.version=Jt.default.utils.charsToString(X,B,L)),te};o.ast.callbacks.version=h;let y=function(j,X,B,L,U){let te=s.SEM_OK;return j===s.SEM_PRE&&(U.chainId=Jt.default.utils.charsToString(X,B,L)),te};o.ast.callbacks["chain-id"]=y;let C=function(j,X,B,L,U){let te=s.SEM_OK;return j===s.SEM_PRE&&(U.nonce=Jt.default.utils.charsToString(X,B,L)),te};o.ast.callbacks.nonce=C;let O=function(j,X,B,L,U){let te=s.SEM_OK;return j===s.SEM_PRE&&(U.issuedAt=Jt.default.utils.charsToString(X,B,L)),te};o.ast.callbacks["issued-at"]=O;let A=function(j,X,B,L,U){let te=s.SEM_OK;return j===s.SEM_PRE&&(U.expirationTime=Jt.default.utils.charsToString(X,B,L)),te};o.ast.callbacks["expiration-time"]=A;let M=function(j,X,B,L,U){let te=s.SEM_OK;return j===s.SEM_PRE&&(U.notBefore=Jt.default.utils.charsToString(X,B,L)),te};o.ast.callbacks["not-before"]=M;let F=function(j,X,B,L,U){let te=s.SEM_OK;return j===s.SEM_PRE&&(U.requestId=Jt.default.utils.charsToString(X,B,L)),te};o.ast.callbacks["request-id"]=F;let D=function(j,X,B,L,U){let te=s.SEM_OK;return j===s.SEM_PRE&&(U.resources=Jt.default.utils.charsToString(X,B,L).slice(3).split(`
- `)),te};o.ast.callbacks.resources=D;let $=o.parse(i,"sign-in-with-ethereum",t);if(!$.success)throw new Error(`Invalid message: ${JSON.stringify($)}`);let K={};o.ast.translate(K);for(let[j,X]of Object.entries(K))this[j]=X}};var jy;(function(n){n.INVALID_SIGNATURE="Invalid signature.",n.EXPIRED_MESSAGE="Expired message.",n.MALFORMED_SESSION="Malformed session."})(jy||(jy={}));var yf;(function(n){n.PERSONAL_SIGNATURE="Personal signature"})(yf||(yf={}));var Lu=class{static fromCacao(t){let r=Sn.parse(t.p.iss.replace("did:pkh:","")),i=new this({domain:t.p.domain,address:r.address,uri:t.p.aud,version:t.p.version,chainId:new Oi(r.chainId).reference});return t.p.statement&&(i.statement=t.p.statement),t.p.nonce&&(i.nonce=t.p.nonce),t.p.iat&&(i.issuedAt=t.p.iat),t.p.exp&&(i.expirationTime=t.p.exp),t.p.nbf&&(i.notBefore=t.p.nbf),t.p.requestId&&(i.requestId=t.p.requestId),t.p.resources&&(i.resources=t.p.resources),t.s&&(t.s.s&&(i.signature=t.s.s),t.s.t==="eip191"&&(i.type=yf.PERSONAL_SIGNATURE)),i}toMessage(t){return DS(this,t)}constructor(t){if(this.statement=void 0,this.nonce=void 0,this.issuedAt=void 0,this.expirationTime=void 0,this.notBefore=void 0,this.requestId=void 0,this.resources=void 0,this.signature=void 0,typeof t=="string"){let r=new Pu(t);this.domain=r.domain,this.address=r.address,this.statement=r.statement,this.uri=r.uri,this.version=r.version,this.nonce=r.nonce,this.issuedAt=r.issuedAt,this.expirationTime=r.expirationTime,this.notBefore=r.notBefore,this.requestId=r.requestId,this.chainId=r.chainId,this.resources=r.resources}else Object.assign(this,t)}};function Hy(n,t){let r=`${n.domain} wants you to sign in with your ${t} account:`,i=`URI: ${n.uri}`,o=[r,n.address].join(`
`),s=`Version: ${n.version}`;n.nonce||(n.nonce=(Math.random()+1).toString(36).substring(4));let a=`Nonce: ${n.nonce}`,f=[i,s,a];if(n.issuedAt&&Date.parse(n.issuedAt),n.issuedAt=n.issuedAt?n.issuedAt:new Date().toISOString(),f.push(`Issued At: ${n.issuedAt}`),n.expirationTime){let d=`Expiration Time: ${n.expirationTime}`;f.push(d)}n.notBefore&&f.push(`Not Before: ${n.notBefore}`),n.requestId&&f.push(`Request ID: ${n.requestId}`),n.chainId&&f.push(`Chain ID: ${n.chainId}`),n.resources&&f.push(["Resources:",...n.resources.map(d=>`- ${d}`)].join(`
`));let u=f.join(`
`);return n.statement&&(o=[o,n.statement].join(`

`)),[o,u].join(`

`)}function DS(n,t){let r=`${n.domain} wants you to sign in with your ${t} account:`,i=`URI: ${n.uri}`,o=[r,n.address].join(`
`),s=`Version: ${n.version}`;n.nonce||(n.nonce=(Math.random()+1).toString(36).substring(4));let a=`Nonce: ${n.nonce}`,f=`Chain ID: ${n.chainId}`,u=[i,s,f,a];if(n.issuedAt&&Date.parse(n.issuedAt),n.issuedAt=n.issuedAt?n.issuedAt:new Date().toISOString(),u.push(`Issued At: ${n.issuedAt}`),n.expirationTime){let h=`Expiration Time: ${n.expirationTime}`;u.push(h)}n.notBefore&&u.push(`Not Before: ${n.notBefore}`),n.requestId&&u.push(`Request ID: ${n.requestId}`),n.resources&&n.resources.length>=1&&u.push(["Resources:",...n.resources.map(h=>`- ${h}`)].join(`
`));let d=u.join(`
`);return n.statement&&(o=[o,n.statement].join(`

`)),[o,d].join(`

`)}var $o=class extends Lu{toMessage(){return super.toMessage("Ethereum")}signMessage(){let t;switch(this.type){case yf.PERSONAL_SIGNATURE:{t=this.toMessage();break}default:{t=this.toMessage();break}}return t}};za();var RS=5*60,qF=new Date("2022-09-20").valueOf(),Fo;(function(n){function t(s){let a={h:{t:"eip4361"},p:{domain:s.domain,iat:s.issuedAt,iss:`did:pkh:eip155:${s.chainId}:${s.address}`,aud:s.uri,version:s.version,nonce:s.nonce}};return s.signature&&(a.s={t:"eip191",s:s.signature}),s.notBefore&&(a.p.nbf=s.notBefore),s.expirationTime&&(a.p.exp=s.expirationTime),s.statement&&(a.p.statement=s.statement),s.requestId&&(a.p.requestId=s.requestId),s.resources&&(a.p.resources=s.resources),a}n.fromSiweMessage=t;function r(s){let a={h:{t:"caip122"},p:{domain:s.domain,iat:s.issuedAt,iss:`did:pkh:solana:${s.chainId}:${s.address}`,aud:s.uri,version:s.version,nonce:s.nonce}};return s.signature&&(a.s={t:"solana:ed25519",s:s.signature}),s.notBefore&&(a.p.nbf=s.notBefore),s.expirationTime&&(a.p.exp=s.expirationTime),s.statement&&(a.p.statement=s.statement),s.requestId&&(a.p.requestId=s.requestId),s.resources&&(a.p.resources=s.resources),a}n.fromSiwsMessage=r;async function i(s){return(await z1({bytes:s,codec:tn,hasher:Si})).value}n.fromBlockBytes=i;async function o(s,a={}){S0(s);let f=a.verifiers[s.s.t];if(!f)throw new Error("Unsupported CACAO signature type, register the needed verifier");return f(s,a)}n.verify=o})(Fo||(Fo={}));var vf;(function(n){function t(r){return Eo({value:r,codec:tn,hasher:Si})}n.fromCacao=t})(vf||(vf={}));function S0(n){if(n.s===null||n.s===void 0)throw new Error("CACAO does not have a signature")}function zy(n,t){let r=t.atTime?t.atTime.getTime():Date.now(),i=(t.clockSkewSecs??RS)*1e3;if(Date.parse(n.p.iat)>r+i||Date.parse(n.p.nbf)>r+i)throw new Error("CACAO is not valid yet");let o=t.revocationPhaseOutSecs?t.revocationPhaseOutSecs*1e3:0;if(!t.disableExpirationCheck&&Date.parse(n.p.exp)+o+i<r)throw new Error("CACAO has expired")}var Ky="logger/5.7.0";var Gy=!1,Jy=!1,Bu={debug:1,default:2,info:2,warning:3,error:4,off:5},Vy=Bu.default,A0=null;function IS(){try{let n=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test".normalize(t)!=="test")throw new Error("bad normalize")}catch{n.push(t)}}),n.length)throw new Error("missing "+n.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(n){return n.message}return null}var Wy=IS(),T0;(function(n){n.DEBUG="DEBUG",n.INFO="INFO",n.WARNING="WARNING",n.ERROR="ERROR",n.OFF="OFF"})(T0||(T0={}));var sn;(function(n){n.UNKNOWN_ERROR="UNKNOWN_ERROR",n.NOT_IMPLEMENTED="NOT_IMPLEMENTED",n.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.TIMEOUT="TIMEOUT",n.BUFFER_OVERRUN="BUFFER_OVERRUN",n.NUMERIC_FAULT="NUMERIC_FAULT",n.MISSING_NEW="MISSING_NEW",n.INVALID_ARGUMENT="INVALID_ARGUMENT",n.MISSING_ARGUMENT="MISSING_ARGUMENT",n.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",n.CALL_EXCEPTION="CALL_EXCEPTION",n.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",n.NONCE_EXPIRED="NONCE_EXPIRED",n.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",n.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",n.TRANSACTION_REPLACED="TRANSACTION_REPLACED",n.ACTION_REJECTED="ACTION_REJECTED"})(sn||(sn={}));var Yy="0123456789abcdef",Ve=class{constructor(t){Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}_log(t,r){let i=t.toLowerCase();Bu[i]==null&&this.throwArgumentError("invalid log level name","logLevel",t),!(Vy>Bu[i])&&console.log.apply(console,r)}debug(...t){this._log(Ve.levels.DEBUG,t)}info(...t){this._log(Ve.levels.INFO,t)}warn(...t){this._log(Ve.levels.WARNING,t)}makeError(t,r,i){if(Jy)return this.makeError("censored error",r,{});r||(r=Ve.errors.UNKNOWN_ERROR),i||(i={});let o=[];Object.keys(i).forEach(u=>{let d=i[u];try{if(d instanceof Uint8Array){let h="";for(let y=0;y<d.length;y++)h+=Yy[d[y]>>4],h+=Yy[d[y]&15];o.push(u+"=Uint8Array(0x"+h+")")}else o.push(u+"="+JSON.stringify(d))}catch{o.push(u+"="+JSON.stringify(i[u].toString()))}}),o.push(`code=${r}`),o.push(`version=${this.version}`);let s=t,a="";switch(r){case sn.NUMERIC_FAULT:{a="NUMERIC_FAULT";let u=t;switch(u){case"overflow":case"underflow":case"division-by-zero":a+="-"+u;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result";break}break}case sn.CALL_EXCEPTION:case sn.INSUFFICIENT_FUNDS:case sn.MISSING_NEW:case sn.NONCE_EXPIRED:case sn.REPLACEMENT_UNDERPRICED:case sn.TRANSACTION_REPLACED:case sn.UNPREDICTABLE_GAS_LIMIT:a=r;break}a&&(t+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),o.length&&(t+=" ("+o.join(", ")+")");let f=new Error(t);return f.reason=s,f.code=r,Object.keys(i).forEach(function(u){f[u]=i[u]}),f}throwError(t,r,i){throw this.makeError(t,r,i)}throwArgumentError(t,r,i){return this.throwError(t,Ve.errors.INVALID_ARGUMENT,{argument:r,value:i})}assert(t,r,i,o){t||this.throwError(r,i,o)}assertArgument(t,r,i,o){t||this.throwArgumentError(r,i,o)}checkNormalize(t){t==null&&(t="platform missing String.prototype.normalize"),Wy&&this.throwError("platform missing String.prototype.normalize",Ve.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Wy})}checkSafeUint53(t,r){typeof t=="number"&&(r==null&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,Ve.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,Ve.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}checkArgumentCount(t,r,i){i?i=": "+i:i="",t<r&&this.throwError("missing argument"+i,Ve.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+i,Ve.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}checkNew(t,r){(t===Object||t==null)&&this.throwError("missing new",Ve.errors.MISSING_NEW,{name:r.name})}checkAbstract(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",Ve.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):(t===Object||t==null)&&this.throwError("missing new",Ve.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return A0||(A0=new Ve(Ky)),A0}static setCensorship(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",Ve.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Gy){if(!t)return;this.globalLogger().throwError("error censorship permanent",Ve.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Jy=!!t,Gy=!!r}static setLogLevel(t){let r=Bu[t.toLowerCase()];if(r==null){Ve.globalLogger().warn("invalid log level - "+t);return}Vy=r}static from(t){return new Ve(t)}};Ve.errors=sn;Ve.levels=T0;var Xy="bytes/5.7.0";var _t=new Ve(Xy);function Qy(n){return!!n.toHexString}function Js(n){return n.slice||(n.slice=function(){let t=Array.prototype.slice.call(arguments);return Js(new Uint8Array(Array.prototype.slice.apply(n,t)))}),n}function ev(n){return an(n)&&!(n.length%2)||k0(n)}function Zy(n){return typeof n=="number"&&n==n&&n%1===0}function k0(n){if(n==null)return!1;if(n.constructor===Uint8Array)return!0;if(typeof n=="string"||!Zy(n.length)||n.length<0)return!1;for(let t=0;t<n.length;t++){let r=n[t];if(!Zy(r)||r<0||r>=256)return!1}return!0}function bt(n,t){if(t||(t={}),typeof n=="number"){_t.checkSafeUint53(n,"invalid arrayify value");let r=[];for(;n;)r.unshift(n&255),n=parseInt(String(n/256));return r.length===0&&r.push(0),Js(new Uint8Array(r))}if(t.allowMissingPrefix&&typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),Qy(n)&&(n=n.toHexString()),an(n)){let r=n.substring(2);r.length%2&&(t.hexPad==="left"?r="0"+r:t.hexPad==="right"?r+="0":_t.throwArgumentError("hex data is odd-length","value",n));let i=[];for(let o=0;o<r.length;o+=2)i.push(parseInt(r.substring(o,o+2),16));return Js(new Uint8Array(i))}return k0(n)?Js(new Uint8Array(n)):_t.throwArgumentError("invalid arrayify value","value",n)}function C0(n){let t=n.map(o=>bt(o)),r=t.reduce((o,s)=>o+s.length,0),i=new Uint8Array(r);return t.reduce((o,s)=>(i.set(s,o),o+s.length),0),Js(i)}function NS(n,t){n=bt(n),n.length>t&&_t.throwArgumentError("value out of range","value",arguments[0]);let r=new Uint8Array(t);return r.set(n,t-n.length),Js(r)}function an(n,t){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||t&&n.length!==2+2*t)}var M0="0123456789abcdef";function Vt(n,t){if(t||(t={}),typeof n=="number"){_t.checkSafeUint53(n,"invalid hexlify value");let r="";for(;n;)r=M0[n&15]+r,n=Math.floor(n/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof n=="bigint")return n=n.toString(16),n.length%2?"0x0"+n:"0x"+n;if(t.allowMissingPrefix&&typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),Qy(n))return n.toHexString();if(an(n))return n.length%2&&(t.hexPad==="left"?n="0x0"+n.substring(2):t.hexPad==="right"?n+="0":_t.throwArgumentError("hex data is odd-length","value",n)),n.toLowerCase();if(k0(n)){let r="0x";for(let i=0;i<n.length;i++){let o=n[i];r+=M0[(o&240)>>4]+M0[o&15]}return r}return _t.throwArgumentError("invalid hexlify value","value",n)}function Uu(n){if(typeof n!="string")n=Vt(n);else if(!an(n)||n.length%2)return null;return(n.length-2)/2}function $u(n,t,r){return typeof n!="string"?n=Vt(n):(!an(n)||n.length%2)&&_t.throwArgumentError("invalid hexData","value",n),t=2+2*t,r!=null?"0x"+n.substring(t,2+2*r):"0x"+n.substring(t)}function Ni(n,t){for(typeof n!="string"?n=Vt(n):an(n)||_t.throwArgumentError("invalid hex string","value",n),n.length>2*t+2&&_t.throwArgumentError("value out of range","value",arguments[1]);n.length<2*t+2;)n="0x0"+n.substring(2);return n}function Fu(n){let t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(ev(n)){let r=bt(n);r.length===64?(t.v=27+(r[32]>>7),r[32]&=127,t.r=Vt(r.slice(0,32)),t.s=Vt(r.slice(32,64))):r.length===65?(t.r=Vt(r.slice(0,32)),t.s=Vt(r.slice(32,64)),t.v=r[64]):_t.throwArgumentError("invalid signature string","signature",n),t.v<27&&(t.v===0||t.v===1?t.v+=27:_t.throwArgumentError("signature invalid v byte","signature",n)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(r[32]|=128),t._vs=Vt(r.slice(32,64))}else{if(t.r=n.r,t.s=n.s,t.v=n.v,t.recoveryParam=n.recoveryParam,t._vs=n._vs,t._vs!=null){let o=NS(bt(t._vs),32);t._vs=Vt(o);let s=o[0]>=128?1:0;t.recoveryParam==null?t.recoveryParam=s:t.recoveryParam!==s&&_t.throwArgumentError("signature recoveryParam mismatch _vs","signature",n),o[0]&=127;let a=Vt(o);t.s==null?t.s=a:t.s!==a&&_t.throwArgumentError("signature v mismatch _vs","signature",n)}if(t.recoveryParam==null)t.v==null?_t.throwArgumentError("signature missing v and recoveryParam","signature",n):t.v===0||t.v===1?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(t.v==null)t.v=27+t.recoveryParam;else{let o=t.v===0||t.v===1?t.v:1-t.v%2;t.recoveryParam!==o&&_t.throwArgumentError("signature recoveryParam mismatch v","signature",n)}t.r==null||!an(t.r)?_t.throwArgumentError("signature missing or invalid r","signature",n):t.r=Ni(t.r,32),t.s==null||!an(t.s)?_t.throwArgumentError("signature missing or invalid s","signature",n):t.s=Ni(t.s,32);let r=bt(t.s);r[0]>=128&&_t.throwArgumentError("signature s out of range","signature",n),t.recoveryParam&&(r[0]|=128);let i=Vt(r);t._vs&&(an(t._vs)||_t.throwArgumentError("signature invalid _vs","signature",n),t._vs=Ni(t._vs,32)),t._vs==null?t._vs=i:t._vs!==i&&_t.throwArgumentError("signature _vs mismatch v and s","signature",n)}return t.yParityAndS=t._vs,t.compact=t.r+t.yParityAndS.substring(2),t}var nv=He(R0());var rv="bignumber/5.7.0";var PS=nv.default.BN,tq=new Ve(rv);function I0(n){return new PS(n,36).toString(16)}var iv=He(N0());function Vs(n){return"0x"+iv.default.keccak_256(bt(n))}var ov="address/5.7.0";var xf=new Ve(ov);function sv(n){an(n,20)||xf.throwArgumentError("invalid address","address",n),n=n.toLowerCase();let t=n.substring(2).split(""),r=new Uint8Array(40);for(let o=0;o<40;o++)r[o]=t[o].charCodeAt(0);let i=bt(Vs(r));for(let o=0;o<40;o+=2)i[o>>1]>>4>=8&&(t[o]=t[o].toUpperCase()),(i[o>>1]&15)>=8&&(t[o+1]=t[o+1].toUpperCase());return"0x"+t.join("")}var US=9007199254740991;function $S(n){return Math.log10?Math.log10(n):Math.log(n)/Math.LN10}var P0={};for(let n=0;n<10;n++)P0[String(n)]=String(n);for(let n=0;n<26;n++)P0[String.fromCharCode(65+n)]=String(10+n);var av=Math.floor($S(US));function FS(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let t=n.split("").map(i=>P0[i]).join("");for(;t.length>=av;){let i=t.substring(0,av);t=parseInt(i,10)%97+t.substring(i.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}function fv(n){let t=null;if(typeof n!="string"&&xf.throwArgumentError("invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/))n.substring(0,2)!=="0x"&&(n="0x"+n),t=sv(n),n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==n&&xf.throwArgumentError("bad address checksum","address",n);else if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(n.substring(2,4)!==FS(n)&&xf.throwArgumentError("bad icap checksum","address",n),t=I0(n.substring(4));t.length<40;)t="0"+t;t=sv("0x"+t)}else xf.throwArgumentError("invalid address","address",n);return t}var cv="properties/5.7.0";var vq=new Ve(cv);function Ws(n,t,r){Object.defineProperty(n,t,{enumerable:!0,value:r,writable:!1})}var uv="strings/5.7.0";var lv=new Ve(uv),wf;(function(n){n.current="",n.NFC="NFC",n.NFD="NFD",n.NFKC="NFKC",n.NFKD="NFKD"})(wf||(wf={}));var qo;(function(n){n.UNEXPECTED_CONTINUE="unexpected continuation byte",n.BAD_PREFIX="bad codepoint prefix",n.OVERRUN="string overrun",n.MISSING_CONTINUE="missing continuation byte",n.OUT_OF_RANGE="out of UTF-8 range",n.UTF16_SURROGATE="UTF-16 surrogate",n.OVERLONG="overlong representation"})(qo||(qo={}));function qS(n,t,r,i,o){return lv.throwArgumentError(`invalid codepoint at offset ${t}; ${n}`,"bytes",r)}function hv(n,t,r,i,o){if(n===qo.BAD_PREFIX||n===qo.UNEXPECTED_CONTINUE){let s=0;for(let a=t+1;a<r.length&&r[a]>>6===2;a++)s++;return s}return n===qo.OVERRUN?r.length-t-1:0}function jS(n,t,r,i,o){return n===qo.OVERLONG?(i.push(o),0):(i.push(65533),hv(n,t,r,i,o))}var HS=Object.freeze({error:qS,ignore:hv,replace:jS});function Ef(n,t=wf.current){t!=wf.current&&(lv.checkNormalize(),n=n.normalize(t));let r=[];for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);if(o<128)r.push(o);else if(o<2048)r.push(o>>6|192),r.push(o&63|128);else if((o&64512)==55296){i++;let s=n.charCodeAt(i);if(i>=n.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");let a=65536+((o&1023)<<10)+(s&1023);r.push(a>>18|240),r.push(a>>12&63|128),r.push(a>>6&63|128),r.push(a&63|128)}else r.push(o>>12|224),r.push(o>>6&63|128),r.push(o&63|128)}return bt(r)}var dv=`Ethereum Signed Message:
`;function L0(n){return typeof n=="string"&&(n=Ef(n)),Vs(C0([Ef(dv),Ef(String(n.length)),n]))}var ze=He(R0()),In=He(Tf());function ra(n,t,r){return r={path:t,exports:{},require:function(i,o){return hT(i,o??r.path)}},n(r,r.exports),r.exports}function hT(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var W0=Yv;function Yv(n,t){if(!n)throw new Error(t||"Assertion failed")}Yv.equal=function(t,r,i){if(t!=r)throw new Error(i||"Assertion failed: "+t+" != "+r)};var ln=ra(function(n,t){"use strict";var r=t;function i(a,f){if(Array.isArray(a))return a.slice();if(!a)return[];var u=[];if(typeof a!="string"){for(var d=0;d<a.length;d++)u[d]=a[d]|0;return u}if(f==="hex"){a=a.replace(/[^a-z0-9]+/ig,""),a.length%2!==0&&(a="0"+a);for(var d=0;d<a.length;d+=2)u.push(parseInt(a[d]+a[d+1],16))}else for(var d=0;d<a.length;d++){var h=a.charCodeAt(d),y=h>>8,C=h&255;y?u.push(y,C):u.push(C)}return u}r.toArray=i;function o(a){return a.length===1?"0"+a:a}r.zero2=o;function s(a){for(var f="",u=0;u<a.length;u++)f+=o(a[u].toString(16));return f}r.toHex=s,r.encode=function(f,u){return u==="hex"?s(f):f}}),wr=ra(function(n,t){"use strict";var r=t;r.assert=W0,r.toArray=ln.toArray,r.zero2=ln.zero2,r.toHex=ln.toHex,r.encode=ln.encode;function i(u,d,h){var y=new Array(Math.max(u.bitLength(),h)+1);y.fill(0);for(var C=1<<d+1,O=u.clone(),A=0;A<y.length;A++){var M,F=O.andln(C-1);O.isOdd()?(F>(C>>1)-1?M=(C>>1)-F:M=F,O.isubn(M)):M=0,y[A]=M,O.iushrn(1)}return y}r.getNAF=i;function o(u,d){var h=[[],[]];u=u.clone(),d=d.clone();for(var y=0,C=0,O;u.cmpn(-y)>0||d.cmpn(-C)>0;){var A=u.andln(3)+y&3,M=d.andln(3)+C&3;A===3&&(A=-1),M===3&&(M=-1);var F;A&1?(O=u.andln(7)+y&7,(O===3||O===5)&&M===2?F=-A:F=A):F=0,h[0].push(F);var D;M&1?(O=d.andln(7)+C&7,(O===3||O===5)&&A===2?D=-M:D=M):D=0,h[1].push(D),2*y===F+1&&(y=1-y),2*C===D+1&&(C=1-C),u.iushrn(1),d.iushrn(1)}return h}r.getJSF=o;function s(u,d,h){var y="_"+d;u.prototype[d]=function(){return this[y]!==void 0?this[y]:this[y]=h.call(this)}}r.cachedProperty=s;function a(u){return typeof u=="string"?r.toArray(u,"hex"):u}r.parseBytes=a;function f(u){return new ze.default(u,"hex","le")}r.intFromLE=f}),Gu=wr.getNAF,dT=wr.getJSF,Ju=wr.assert;function Ui(n,t){this.type=n,this.p=new ze.default(t.p,16),this.red=t.prime?ze.default.red(t.prime):ze.default.mont(this.p),this.zero=new ze.default(0).toRed(this.red),this.one=new ze.default(1).toRed(this.red),this.two=new ze.default(2).toRed(this.red),this.n=t.n&&new ze.default(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Ho=Ui;Ui.prototype.point=function(){throw new Error("Not implemented")};Ui.prototype.validate=function(){throw new Error("Not implemented")};Ui.prototype._fixedNafMul=function(t,r){Ju(t.precomputed);var i=t._getDoubles(),o=Gu(r,1,this._bitLength),s=(1<<i.step+1)-(i.step%2===0?2:1);s/=3;var a=[],f,u;for(f=0;f<o.length;f+=i.step){u=0;for(var d=f+i.step-1;d>=f;d--)u=(u<<1)+o[d];a.push(u)}for(var h=this.jpoint(null,null,null),y=this.jpoint(null,null,null),C=s;C>0;C--){for(f=0;f<a.length;f++)u=a[f],u===C?y=y.mixedAdd(i.points[f]):u===-C&&(y=y.mixedAdd(i.points[f].neg()));h=h.add(y)}return h.toP()};Ui.prototype._wnafMul=function(t,r){var i=4,o=t._getNAFPoints(i);i=o.wnd;for(var s=o.points,a=Gu(r,i,this._bitLength),f=this.jpoint(null,null,null),u=a.length-1;u>=0;u--){for(var d=0;u>=0&&a[u]===0;u--)d++;if(u>=0&&d++,f=f.dblp(d),u<0)break;var h=a[u];Ju(h!==0),t.type==="affine"?h>0?f=f.mixedAdd(s[h-1>>1]):f=f.mixedAdd(s[-h-1>>1].neg()):h>0?f=f.add(s[h-1>>1]):f=f.add(s[-h-1>>1].neg())}return t.type==="affine"?f.toP():f};Ui.prototype._wnafMulAdd=function(t,r,i,o,s){var a=this._wnafT1,f=this._wnafT2,u=this._wnafT3,d=0,h,y,C;for(h=0;h<o;h++){C=r[h];var O=C._getNAFPoints(t);a[h]=O.wnd,f[h]=O.points}for(h=o-1;h>=1;h-=2){var A=h-1,M=h;if(a[A]!==1||a[M]!==1){u[A]=Gu(i[A],a[A],this._bitLength),u[M]=Gu(i[M],a[M],this._bitLength),d=Math.max(u[A].length,d),d=Math.max(u[M].length,d);continue}var F=[r[A],null,null,r[M]];r[A].y.cmp(r[M].y)===0?(F[1]=r[A].add(r[M]),F[2]=r[A].toJ().mixedAdd(r[M].neg())):r[A].y.cmp(r[M].y.redNeg())===0?(F[1]=r[A].toJ().mixedAdd(r[M]),F[2]=r[A].add(r[M].neg())):(F[1]=r[A].toJ().mixedAdd(r[M]),F[2]=r[A].toJ().mixedAdd(r[M].neg()));var D=[-3,-1,-5,-7,0,7,5,1,3],$=dT(i[A],i[M]);for(d=Math.max($[0].length,d),u[A]=new Array(d),u[M]=new Array(d),y=0;y<d;y++){var K=$[0][y]|0,j=$[1][y]|0;u[A][y]=D[(K+1)*3+(j+1)],u[M][y]=0,f[A]=F}}var X=this.jpoint(null,null,null),B=this._wnafT4;for(h=d;h>=0;h--){for(var L=0;h>=0;){var U=!0;for(y=0;y<o;y++)B[y]=u[y][h]|0,B[y]!==0&&(U=!1);if(!U)break;L++,h--}if(h>=0&&L++,X=X.dblp(L),h<0)break;for(y=0;y<o;y++){var te=B[y];te!==0&&(te>0?C=f[y][te-1>>1]:te<0&&(C=f[y][-te-1>>1].neg()),C.type==="affine"?X=X.mixedAdd(C):X=X.add(C))}}for(h=0;h<o;h++)f[h]=null;return s?X:X.toP()};function Fr(n,t){this.curve=n,this.type=t,this.precomputed=null}Ui.BasePoint=Fr;Fr.prototype.eq=function(){throw new Error("Not implemented")};Fr.prototype.validate=function(){return this.curve.validate(this)};Ui.prototype.decodePoint=function(t,r){t=wr.toArray(t,r);var i=this.p.byteLength();if((t[0]===4||t[0]===6||t[0]===7)&&t.length-1===2*i){t[0]===6?Ju(t[t.length-1]%2===0):t[0]===7&&Ju(t[t.length-1]%2===1);var o=this.point(t.slice(1,1+i),t.slice(1+i,1+2*i));return o}else if((t[0]===2||t[0]===3)&&t.length-1===i)return this.pointFromX(t.slice(1,1+i),t[0]===3);throw new Error("Unknown point format")};Fr.prototype.encodeCompressed=function(t){return this.encode(t,!0)};Fr.prototype._encode=function(t){var r=this.curve.p.byteLength(),i=this.getX().toArray("be",r);return t?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",r))};Fr.prototype.encode=function(t,r){return wr.encode(this._encode(r),t)};Fr.prototype.precompute=function(t){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,t),r.beta=this._getBeta(),this.precomputed=r,this};Fr.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((t.bitLength()+1)/r.step):!1};Fr.prototype._getDoubles=function(t,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],o=this,s=0;s<r;s+=t){for(var a=0;a<t;a++)o=o.dbl();i.push(o)}return{step:t,points:i}};Fr.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],i=(1<<t)-1,o=i===1?null:this.dbl(),s=1;s<i;s++)r[s]=r[s-1].add(o);return{wnd:t,points:r}};Fr.prototype._getBeta=function(){return null};Fr.prototype.dblp=function(t){for(var r=this,i=0;i<t;i++)r=r.dbl();return r};var Y0=ra(function(n){typeof Object.create=="function"?n.exports=function(r,i){i&&(r.super_=i,r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:n.exports=function(r,i){if(i){r.super_=i;var o=function(){};o.prototype=i.prototype,r.prototype=new o,r.prototype.constructor=r}}}),pT=wr.assert;function qr(n){Ho.call(this,"short",n),this.a=new ze.default(n.a,16).toRed(this.red),this.b=new ze.default(n.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(n),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Y0(qr,Ho);var mT=qr;qr.prototype._getEndomorphism=function(t){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,i;if(t.beta)r=new ze.default(t.beta,16).toRed(this.red);else{var o=this._getEndoRoots(this.p);r=o[0].cmp(o[1])<0?o[0]:o[1],r=r.toRed(this.red)}if(t.lambda)i=new ze.default(t.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?i=s[0]:(i=s[1],pT(this.g.mul(i).x.cmp(this.g.x.redMul(r))===0))}var a;return t.basis?a=t.basis.map(function(f){return{a:new ze.default(f.a,16),b:new ze.default(f.b,16)}}):a=this._getEndoBasis(i),{beta:r,lambda:i,basis:a}}};qr.prototype._getEndoRoots=function(t){var r=t===this.p?this.red:ze.default.mont(t),i=new ze.default(2).toRed(r).redInvm(),o=i.redNeg(),s=new ze.default(3).toRed(r).redNeg().redSqrt().redMul(i),a=o.redAdd(s).fromRed(),f=o.redSub(s).fromRed();return[a,f]};qr.prototype._getEndoBasis=function(t){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=t,o=this.n.clone(),s=new ze.default(1),a=new ze.default(0),f=new ze.default(0),u=new ze.default(1),d,h,y,C,O,A,M,F=0,D,$;i.cmpn(0)!==0;){var K=o.div(i);D=o.sub(K.mul(i)),$=f.sub(K.mul(s));var j=u.sub(K.mul(a));if(!y&&D.cmp(r)<0)d=M.neg(),h=s,y=D.neg(),C=$;else if(y&&++F===2)break;M=D,o=i,i=D,f=s,s=$,u=a,a=j}O=D.neg(),A=$;var X=y.sqr().add(C.sqr()),B=O.sqr().add(A.sqr());return B.cmp(X)>=0&&(O=d,A=h),y.negative&&(y=y.neg(),C=C.neg()),O.negative&&(O=O.neg(),A=A.neg()),[{a:y,b:C},{a:O,b:A}]};qr.prototype._endoSplit=function(t){var r=this.endo.basis,i=r[0],o=r[1],s=o.b.mul(t).divRound(this.n),a=i.b.neg().mul(t).divRound(this.n),f=s.mul(i.a),u=a.mul(o.a),d=s.mul(i.b),h=a.mul(o.b),y=t.sub(f).sub(u),C=d.add(h).neg();return{k1:y,k2:C}};qr.prototype.pointFromX=function(t,r){t=new ze.default(t,16),t.red||(t=t.toRed(this.red));var i=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),o=i.redSqrt();if(o.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var s=o.fromRed().isOdd();return(r&&!s||!r&&s)&&(o=o.redNeg()),this.point(t,o)};qr.prototype.validate=function(t){if(t.inf)return!0;var r=t.x,i=t.y,o=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(o).redIAdd(this.b);return i.redSqr().redISub(s).cmpn(0)===0};qr.prototype._endoWnafMulAdd=function(t,r,i){for(var o=this._endoWnafT1,s=this._endoWnafT2,a=0;a<t.length;a++){var f=this._endoSplit(r[a]),u=t[a],d=u._getBeta();f.k1.negative&&(f.k1.ineg(),u=u.neg(!0)),f.k2.negative&&(f.k2.ineg(),d=d.neg(!0)),o[a*2]=u,o[a*2+1]=d,s[a*2]=f.k1,s[a*2+1]=f.k2}for(var h=this._wnafMulAdd(1,o,s,a*2,i),y=0;y<a*2;y++)o[y]=null,s[y]=null;return h};function Ot(n,t,r,i){Ho.BasePoint.call(this,n,"affine"),t===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new ze.default(t,16),this.y=new ze.default(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Y0(Ot,Ho.BasePoint);qr.prototype.point=function(t,r,i){return new Ot(this,t,r,i)};qr.prototype.pointFromJSON=function(t,r){return Ot.fromJSON(this,t,r)};Ot.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var i=this.curve,o=function(s){return i.point(s.x.redMul(i.endo.beta),s.y)};t.beta=r,r.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(o)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(o)}}}return r}};Ot.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Ot.fromJSON=function(t,r,i){typeof r=="string"&&(r=JSON.parse(r));var o=t.point(r[0],r[1],i);if(!r[2])return o;function s(f){return t.point(f[0],f[1],i)}var a=r[2];return o.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[o].concat(a.doubles.points.map(s))},naf:a.naf&&{wnd:a.naf.wnd,points:[o].concat(a.naf.points.map(s))}},o};Ot.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Ot.prototype.isInfinity=function(){return this.inf};Ot.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(this.x.cmp(t.x)===0)return this.curve.point(null,null);var r=this.y.redSub(t.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(t.x).redInvm()));var i=r.redSqr().redISub(this.x).redISub(t.x),o=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,o)};Ot.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(t.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,i=this.x.redSqr(),o=t.redInvm(),s=i.redAdd(i).redIAdd(i).redIAdd(r).redMul(o),a=s.redSqr().redISub(this.x.redAdd(this.x)),f=s.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,f)};Ot.prototype.getX=function(){return this.x.fromRed()};Ot.prototype.getY=function(){return this.y.fromRed()};Ot.prototype.mul=function(t){return t=new ze.default(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)};Ot.prototype.mulAdd=function(t,r,i){var o=[this,r],s=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(o,s):this.curve._wnafMulAdd(1,o,s,2)};Ot.prototype.jmulAdd=function(t,r,i){var o=[this,r],s=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(o,s,!0):this.curve._wnafMulAdd(1,o,s,2,!0)};Ot.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||this.x.cmp(t.x)===0&&this.y.cmp(t.y)===0)};Ot.prototype.neg=function(t){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var i=this.precomputed,o=function(s){return s.neg()};r.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(o)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(o)}}}return r};Ot.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var t=this.curve.jpoint(this.x,this.y,this.curve.one);return t};function $t(n,t,r,i){Ho.BasePoint.call(this,n,"jacobian"),t===null&&r===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new ze.default(0)):(this.x=new ze.default(t,16),this.y=new ze.default(r,16),this.z=new ze.default(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Y0($t,Ho.BasePoint);qr.prototype.jpoint=function(t,r,i){return new $t(this,t,r,i)};$t.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),r=t.redSqr(),i=this.x.redMul(r),o=this.y.redMul(r).redMul(t);return this.curve.point(i,o)};$t.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};$t.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var r=t.z.redSqr(),i=this.z.redSqr(),o=this.x.redMul(r),s=t.x.redMul(i),a=this.y.redMul(r.redMul(t.z)),f=t.y.redMul(i.redMul(this.z)),u=o.redSub(s),d=a.redSub(f);if(u.cmpn(0)===0)return d.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var h=u.redSqr(),y=h.redMul(u),C=o.redMul(h),O=d.redSqr().redIAdd(y).redISub(C).redISub(C),A=d.redMul(C.redISub(O)).redISub(a.redMul(y)),M=this.z.redMul(t.z).redMul(u);return this.curve.jpoint(O,A,M)};$t.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var r=this.z.redSqr(),i=this.x,o=t.x.redMul(r),s=this.y,a=t.y.redMul(r).redMul(this.z),f=i.redSub(o),u=s.redSub(a);if(f.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var d=f.redSqr(),h=d.redMul(f),y=i.redMul(d),C=u.redSqr().redIAdd(h).redISub(y).redISub(y),O=u.redMul(y.redISub(C)).redISub(s.redMul(h)),A=this.z.redMul(f);return this.curve.jpoint(C,O,A)};$t.prototype.dblp=function(t){if(t===0)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var i=this;for(r=0;r<t;r++)i=i.dbl();return i}var o=this.curve.a,s=this.curve.tinv,a=this.x,f=this.y,u=this.z,d=u.redSqr().redSqr(),h=f.redAdd(f);for(r=0;r<t;r++){var y=a.redSqr(),C=h.redSqr(),O=C.redSqr(),A=y.redAdd(y).redIAdd(y).redIAdd(o.redMul(d)),M=a.redMul(C),F=A.redSqr().redISub(M.redAdd(M)),D=M.redISub(F),$=A.redMul(D);$=$.redIAdd($).redISub(O);var K=h.redMul(u);r+1<t&&(d=d.redMul(O)),a=F,u=K,h=$}return this.curve.jpoint(a,h.redMul(s),u)};$t.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};$t.prototype._zeroDbl=function(){var t,r,i;if(this.zOne){var o=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),f=this.x.redAdd(s).redSqr().redISub(o).redISub(a);f=f.redIAdd(f);var u=o.redAdd(o).redIAdd(o),d=u.redSqr().redISub(f).redISub(f),h=a.redIAdd(a);h=h.redIAdd(h),h=h.redIAdd(h),t=d,r=u.redMul(f.redISub(d)).redISub(h),i=this.y.redAdd(this.y)}else{var y=this.x.redSqr(),C=this.y.redSqr(),O=C.redSqr(),A=this.x.redAdd(C).redSqr().redISub(y).redISub(O);A=A.redIAdd(A);var M=y.redAdd(y).redIAdd(y),F=M.redSqr(),D=O.redIAdd(O);D=D.redIAdd(D),D=D.redIAdd(D),t=F.redISub(A).redISub(A),r=M.redMul(A.redISub(t)).redISub(D),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(t,r,i)};$t.prototype._threeDbl=function(){var t,r,i;if(this.zOne){var o=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),f=this.x.redAdd(s).redSqr().redISub(o).redISub(a);f=f.redIAdd(f);var u=o.redAdd(o).redIAdd(o).redIAdd(this.curve.a),d=u.redSqr().redISub(f).redISub(f);t=d;var h=a.redIAdd(a);h=h.redIAdd(h),h=h.redIAdd(h),r=u.redMul(f.redISub(d)).redISub(h),i=this.y.redAdd(this.y)}else{var y=this.z.redSqr(),C=this.y.redSqr(),O=this.x.redMul(C),A=this.x.redSub(y).redMul(this.x.redAdd(y));A=A.redAdd(A).redIAdd(A);var M=O.redIAdd(O);M=M.redIAdd(M);var F=M.redAdd(M);t=A.redSqr().redISub(F),i=this.y.redAdd(this.z).redSqr().redISub(C).redISub(y);var D=C.redSqr();D=D.redIAdd(D),D=D.redIAdd(D),D=D.redIAdd(D),r=A.redMul(M.redISub(t)).redISub(D)}return this.curve.jpoint(t,r,i)};$t.prototype._dbl=function(){var t=this.curve.a,r=this.x,i=this.y,o=this.z,s=o.redSqr().redSqr(),a=r.redSqr(),f=i.redSqr(),u=a.redAdd(a).redIAdd(a).redIAdd(t.redMul(s)),d=r.redAdd(r);d=d.redIAdd(d);var h=d.redMul(f),y=u.redSqr().redISub(h.redAdd(h)),C=h.redISub(y),O=f.redSqr();O=O.redIAdd(O),O=O.redIAdd(O),O=O.redIAdd(O);var A=u.redMul(C).redISub(O),M=i.redAdd(i).redMul(o);return this.curve.jpoint(y,A,M)};$t.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr(),o=r.redSqr(),s=t.redAdd(t).redIAdd(t),a=s.redSqr(),f=this.x.redAdd(r).redSqr().redISub(t).redISub(o);f=f.redIAdd(f),f=f.redAdd(f).redIAdd(f),f=f.redISub(a);var u=f.redSqr(),d=o.redIAdd(o);d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);var h=s.redIAdd(f).redSqr().redISub(a).redISub(u).redISub(d),y=r.redMul(h);y=y.redIAdd(y),y=y.redIAdd(y);var C=this.x.redMul(u).redISub(y);C=C.redIAdd(C),C=C.redIAdd(C);var O=this.y.redMul(h.redMul(d.redISub(h)).redISub(f.redMul(u)));O=O.redIAdd(O),O=O.redIAdd(O),O=O.redIAdd(O);var A=this.z.redAdd(f).redSqr().redISub(i).redISub(u);return this.curve.jpoint(C,O,A)};$t.prototype.mul=function(t,r){return t=new ze.default(t,r),this.curve._wnafMul(this,t)};$t.prototype.eq=function(t){if(t.type==="affine")return this.eq(t.toJ());if(this===t)return!0;var r=this.z.redSqr(),i=t.z.redSqr();if(this.x.redMul(i).redISub(t.x.redMul(r)).cmpn(0)!==0)return!1;var o=r.redMul(this.z),s=i.redMul(t.z);return this.y.redMul(s).redISub(t.y.redMul(o)).cmpn(0)===0};$t.prototype.eqXToP=function(t){var r=this.z.redSqr(),i=t.toRed(this.curve.red).redMul(r);if(this.x.cmp(i)===0)return!0;for(var o=t.clone(),s=this.curve.redN.redMul(r);;){if(o.iadd(this.curve.n),o.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(s),this.x.cmp(i)===0)return!0}};$t.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};$t.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var zu=ra(function(n,t){"use strict";var r=t;r.base=Ho,r.short=mT,r.mont=null,r.edwards=null}),Ku=ra(function(n,t){"use strict";var r=t,i=wr.assert;function o(f){f.type==="short"?this.curve=new zu.short(f):f.type==="edwards"?this.curve=new zu.edwards(f):this.curve=new zu.mont(f),this.g=this.curve.g,this.n=this.curve.n,this.hash=f.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=o;function s(f,u){Object.defineProperty(r,f,{configurable:!0,enumerable:!0,get:function(){var d=new o(u);return Object.defineProperty(r,f,{configurable:!0,enumerable:!0,value:d}),d}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:In.default.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:In.default.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:In.default.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:In.default.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:In.default.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:In.default.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:In.default.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var a;try{a=null.crash()}catch{a=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:In.default.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",a]})});function Bi(n){if(!(this instanceof Bi))return new Bi(n);this.hash=n.hash,this.predResist=!!n.predResist,this.outLen=this.hash.outSize,this.minEntropy=n.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=ln.toArray(n.entropy,n.entropyEnc||"hex"),r=ln.toArray(n.nonce,n.nonceEnc||"hex"),i=ln.toArray(n.pers,n.persEnc||"hex");W0(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,i)}var Xv=Bi;Bi.prototype._init=function(t,r,i){var o=t.concat(r).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(o),this._reseed=1,this.reseedInterval=281474976710656};Bi.prototype._hmac=function(){return new In.default.hmac(this.hash,this.K)};Bi.prototype._update=function(t){var r=this._hmac().update(this.V).update([0]);t&&(r=r.update(t)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())};Bi.prototype.reseed=function(t,r,i,o){typeof r!="string"&&(o=i,i=r,r=null),t=ln.toArray(t,r),i=ln.toArray(i,o),W0(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(i||[])),this._reseed=1};Bi.prototype.generate=function(t,r,i,o){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(o=i,i=r,r=null),i&&(i=ln.toArray(i,o||"hex"),this._update(i));for(var s=[];s.length<t;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var a=s.slice(0,t);return this._update(i),this._reseed++,ln.encode(a,r)};var V0=wr.assert;function Wt(n,t){this.ec=n,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var X0=Wt;Wt.fromPublic=function(t,r,i){return r instanceof Wt?r:new Wt(t,{pub:r,pubEnc:i})};Wt.fromPrivate=function(t,r,i){return r instanceof Wt?r:new Wt(t,{priv:r,privEnc:i})};Wt.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Wt.prototype.getPublic=function(t,r){return typeof t=="string"&&(r=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,t):this.pub};Wt.prototype.getPrivate=function(t){return t==="hex"?this.priv.toString(16,2):this.priv};Wt.prototype._importPrivate=function(t,r){this.priv=new ze.default(t,r||16),this.priv=this.priv.umod(this.ec.curve.n)};Wt.prototype._importPublic=function(t,r){if(t.x||t.y){this.ec.curve.type==="mont"?V0(t.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&V0(t.x&&t.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(t.x,t.y);return}this.pub=this.ec.curve.decodePoint(t,r)};Wt.prototype.derive=function(t){return t.validate()||V0(t.validate(),"public point not validated"),t.mul(this.priv).getX()};Wt.prototype.sign=function(t,r,i){return this.ec.sign(t,this,r,i)};Wt.prototype.verify=function(t,r){return this.ec.verify(t,r,this)};Wt.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var bT=wr.assert;function Vu(n,t){if(n instanceof Vu)return n;this._importDER(n,t)||(bT(n.r&&n.s,"Signature without r or s"),this.r=new ze.default(n.r,16),this.s=new ze.default(n.s,16),n.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=n.recoveryParam)}var Wu=Vu;function gT(){this.place=0}function G0(n,t){var r=n[t.place++];if(!(r&128))return r;var i=r&15;if(i===0||i>4)return!1;for(var o=0,s=0,a=t.place;s<i;s++,a++)o<<=8,o|=n[a],o>>>=0;return o<=127?!1:(t.place=a,o)}function Wv(n){for(var t=0,r=n.length-1;!n[t]&&!(n[t+1]&128)&&t<r;)t++;return t===0?n:n.slice(t)}Vu.prototype._importDER=function(t,r){t=wr.toArray(t,r);var i=new gT;if(t[i.place++]!==48)return!1;var o=G0(t,i);if(o===!1||o+i.place!==t.length||t[i.place++]!==2)return!1;var s=G0(t,i);if(s===!1)return!1;var a=t.slice(i.place,s+i.place);if(i.place+=s,t[i.place++]!==2)return!1;var f=G0(t,i);if(f===!1||t.length!==f+i.place)return!1;var u=t.slice(i.place,f+i.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(u[0]===0)if(u[1]&128)u=u.slice(1);else return!1;return this.r=new ze.default(a),this.s=new ze.default(u),this.recoveryParam=null,!0};function J0(n,t){if(t<128){n.push(t);return}var r=1+(Math.log(t)/Math.LN2>>>3);for(n.push(r|128);--r;)n.push(t>>>(r<<3)&255);n.push(t)}Vu.prototype.toDER=function(t){var r=this.r.toArray(),i=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),i[0]&128&&(i=[0].concat(i)),r=Wv(r),i=Wv(i);!i[0]&&!(i[1]&128);)i=i.slice(1);var o=[2];J0(o,r.length),o=o.concat(r),o.push(2),J0(o,i.length);var s=o.concat(i),a=[48];return J0(a,s.length),a=a.concat(s),wr.encode(a,t)};var yT=function(){throw new Error("unsupported")},Zv=wr.assert;function $r(n){if(!(this instanceof $r))return new $r(n);typeof n=="string"&&(Zv(Object.prototype.hasOwnProperty.call(Ku,n),"Unknown curve "+n),n=Ku[n]),n instanceof Ku.PresetCurve&&(n={curve:n}),this.curve=n.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=n.curve.g,this.g.precompute(n.curve.n.bitLength()+1),this.hash=n.hash||n.curve.hash}var vT=$r;$r.prototype.keyPair=function(t){return new X0(this,t)};$r.prototype.keyFromPrivate=function(t,r){return X0.fromPrivate(this,t,r)};$r.prototype.keyFromPublic=function(t,r){return X0.fromPublic(this,t,r)};$r.prototype.genKeyPair=function(t){t||(t={});for(var r=new Xv({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||yT(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),o=this.n.sub(new ze.default(2));;){var s=new ze.default(r.generate(i));if(!(s.cmp(o)>0))return s.iaddn(1),this.keyFromPrivate(s)}};$r.prototype._truncateToN=function(t,r){var i=t.byteLength()*8-this.n.bitLength();return i>0&&(t=t.ushrn(i)),!r&&t.cmp(this.n)>=0?t.sub(this.n):t};$r.prototype.sign=function(t,r,i,o){typeof i=="object"&&(o=i,i=null),o||(o={}),r=this.keyFromPrivate(r,i),t=this._truncateToN(new ze.default(t,16));for(var s=this.n.byteLength(),a=r.getPrivate().toArray("be",s),f=t.toArray("be",s),u=new Xv({hash:this.hash,entropy:a,nonce:f,pers:o.pers,persEnc:o.persEnc||"utf8"}),d=this.n.sub(new ze.default(1)),h=0;;h++){var y=o.k?o.k(h):new ze.default(u.generate(this.n.byteLength()));if(y=this._truncateToN(y,!0),!(y.cmpn(1)<=0||y.cmp(d)>=0)){var C=this.g.mul(y);if(!C.isInfinity()){var O=C.getX(),A=O.umod(this.n);if(A.cmpn(0)!==0){var M=y.invm(this.n).mul(A.mul(r.getPrivate()).iadd(t));if(M=M.umod(this.n),M.cmpn(0)!==0){var F=(C.getY().isOdd()?1:0)|(O.cmp(A)!==0?2:0);return o.canonical&&M.cmp(this.nh)>0&&(M=this.n.sub(M),F^=1),new Wu({r:A,s:M,recoveryParam:F})}}}}}};$r.prototype.verify=function(t,r,i,o){t=this._truncateToN(new ze.default(t,16)),i=this.keyFromPublic(i,o),r=new Wu(r,"hex");var s=r.r,a=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var f=a.invm(this.n),u=f.mul(t).umod(this.n),d=f.mul(s).umod(this.n),h;return this.curve._maxwellTrick?(h=this.g.jmulAdd(u,i.getPublic(),d),h.isInfinity()?!1:h.eqXToP(s)):(h=this.g.mulAdd(u,i.getPublic(),d),h.isInfinity()?!1:h.getX().umod(this.n).cmp(s)===0)};$r.prototype.recoverPubKey=function(n,t,r,i){Zv((3&r)===r,"The recovery param is more than two bits"),t=new Wu(t,i);var o=this.n,s=new ze.default(n),a=t.r,f=t.s,u=r&1,d=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&d)throw new Error("Unable to find sencond key candinate");d?a=this.curve.pointFromX(a.add(this.curve.n),u):a=this.curve.pointFromX(a,u);var h=t.r.invm(o),y=o.sub(s).mul(h).umod(o),C=f.mul(h).umod(o);return this.g.mulAdd(y,a,C)};$r.prototype.getKeyRecoveryParam=function(n,t,r,i){if(t=new Wu(t,i),t.recoveryParam!==null)return t.recoveryParam;for(var o=0;o<4;o++){var s;try{s=this.recoverPubKey(n,t,o)}catch{continue}if(s.eq(r))return o}throw new Error("Unable to find valid recovery factor")};var xT=ra(function(n,t){"use strict";var r=t;r.version="6.5.4",r.utils=wr,r.rand=function(){throw new Error("unsupported")},r.curve=zu,r.curves=Ku,r.ec=vT,r.eddsa=null}),Qv=xT.ec;var e3="signing-key/5.7.0";var Q0=new Ve(e3),Z0=null;function Nn(){return Z0||(Z0=new Qv("secp256k1")),Z0}var ep=class{constructor(t){Ws(this,"curve","secp256k1"),Ws(this,"privateKey",Vt(t)),Uu(this.privateKey)!==32&&Q0.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");let r=Nn().keyFromPrivate(bt(this.privateKey));Ws(this,"publicKey","0x"+r.getPublic(!1,"hex")),Ws(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),Ws(this,"_isSigningKey",!0)}_addPoint(t){let r=Nn().keyFromPublic(bt(this.publicKey)),i=Nn().keyFromPublic(bt(t));return"0x"+r.pub.add(i.pub).encodeCompressed("hex")}signDigest(t){let r=Nn().keyFromPrivate(bt(this.privateKey)),i=bt(t);i.length!==32&&Q0.throwArgumentError("bad digest length","digest",t);let o=r.sign(i,{canonical:!0});return Fu({recoveryParam:o.recoveryParam,r:Ni("0x"+o.r.toString(16),32),s:Ni("0x"+o.s.toString(16),32)})}computeSharedSecret(t){let r=Nn().keyFromPrivate(bt(this.privateKey)),i=Nn().keyFromPublic(bt(tp(t)));return Ni("0x"+r.derive(i.getPublic()).toString(16),32)}static isSigningKey(t){return!!(t&&t._isSigningKey)}};function t3(n,t){let r=Fu(t),i={r:bt(r.r),s:bt(r.s)};return"0x"+Nn().recoverPubKey(bt(n),i,r.recoveryParam).encode("hex",!1)}function tp(n,t){let r=bt(n);if(r.length===32){let i=new ep(r);return t?"0x"+Nn().keyFromPrivate(r).getPublic(!0,"hex"):i.publicKey}else{if(r.length===33)return t?Vt(r):"0x"+Nn().keyFromPublic(r).getPublic(!1,"hex");if(r.length===65)return t?"0x"+Nn().keyFromPublic(r).getPublic(!0,"hex"):Vt(r)}return Q0.throwArgumentError("invalid public or private key","key","[REDACTED]")}var r3="transactions/5.7.0";var dj=new Ve(r3),n3;(function(n){n[n.legacy=0]="legacy",n[n.eip2930=1]="eip2930",n[n.eip1559=2]="eip1559"})(n3||(n3={}));function i3(n){let t=tp(n);return fv($u(Vs($u(t,1)),12))}function o3(n,t){return i3(t3(bt(n),t))}var s3="wallet/5.7.0";var Ej=new Ve(s3);function rp(n,t){return o3(L0(n),t)}var sa=class extends Nd{next(t){let r=this.value;Xe.statesEqual(r,t)||super.next(t)}};var rr=class extends ft{constructor(t,r,i){super(o=>{this.state$.observers.length===0&&(this.periodicSubscription=Do(0,i).pipe($d(()=>this._syncState(this.id,{sync:mt.PREFER_CACHE}))).subscribe()),this.state$.subscribe(o).add(()=>{this.state$.observers.length===0&&this.periodicSubscription?.unsubscribe()})}),this.state$=new sa(t),this._apiUrl=new URL(r)}get value(){return this.state$.value}get state(){return this.state$.value}next(t){this.state$.next(t)}async _syncState(t,r){let i=await rr._load(t,this._apiUrl,r);this.state$.next(Xe.deserializeState(i))}get id(){return new Ke(this.state$.value.type,this.state$.value.log[0].cid)}static async createFromGenesis(t,r,i,o,s){let a=new URL("./streams",t),{state:f}=await Lt(a,{method:"post",body:{type:r,genesis:Xe.serializeCommit(i),opts:o}});return new rr(Xe.deserializeState(f),t,s)}static async applyCommit(t,r,i,o,s){let a=new URL("./commits",t),{state:f}=await Lt(a,{method:"post",body:{streamId:r.toString(),commit:Xe.serializeCommit(i),opts:o}});return new rr(Xe.deserializeState(f),t,s)}static async _load(t,r,i){let o=i2(new URL(`./streams/${t}`,r),i),{state:s}=await Lt(o);return s}static async load(t,r,i,o){let s=await rr._load(t,r,o);return new rr(Xe.deserializeState(s),r,i)}static async loadStreamCommits(t,r){let i=new URL(`./commits/${t}`,r),{commits:o}=await Lt(i);return o.map(s=>({cid:s.cid,value:Xe.deserializeCommit(s.value)}))}complete(){this.state$.complete()}};var lp={};Ze(lp,{JsonPatchError:()=>vt,_areEquals:()=>Df,applyOperation:()=>Jo,applyPatch:()=>nl,applyReducer:()=>$T,deepClone:()=>BT,getValueByPointer:()=>tl,validate:()=>S3,validator:()=>rl});var PT=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var s in o)o.hasOwnProperty(s)&&(i[s]=o[s])},n(t,r)};return function(t,r){n(t,r);function i(){this.constructor=t}t.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}(),LT=Object.prototype.hasOwnProperty;function Zu(n,t){return LT.call(n,t)}function Qu(n){if(Array.isArray(n)){for(var t=new Array(n.length),r=0;r<t.length;r++)t[r]=""+r;return t}if(Object.keys)return Object.keys(n);var i=[];for(var o in n)Zu(n,o)&&i.push(o);return i}function Ft(n){switch(typeof n){case"object":return JSON.parse(JSON.stringify(n));case"undefined":return null;default:return n}}function el(n){for(var t=0,r=n.length,i;t<r;){if(i=n.charCodeAt(t),i>=48&&i<=57){t++;continue}return!1}return!0}function Pn(n){return n.indexOf("/")===-1&&n.indexOf("~")===-1?n:n.replace(/~/g,"~0").replace(/\//g,"~1")}function Cf(n){return n.replace(/~1/g,"/").replace(/~0/g,"~")}function Xu(n){if(n===void 0)return!0;if(n){if(Array.isArray(n)){for(var t=0,r=n.length;t<r;t++)if(Xu(n[t]))return!0}else if(typeof n=="object"){for(var i=Qu(n),o=i.length,s=0;s<o;s++)if(Xu(n[i[s]]))return!0}}return!1}function _3(n,t){var r=[n];for(var i in t){var o=typeof t[i]=="object"?JSON.stringify(t[i],null,2):t[i];typeof o<"u"&&r.push(i+": "+o)}return r.join(`
`)}var Of=function(n){PT(t,n);function t(r,i,o,s,a){var f=this.constructor,u=n.call(this,_3(r,{name:i,index:o,operation:s,tree:a}))||this;return u.name=i,u.index=o,u.operation=s,u.tree=a,Object.setPrototypeOf(u,f.prototype),u.message=_3(r,{name:i,index:o,operation:s,tree:a}),u}return t}(Error);var vt=Of,BT=Ft,aa={add:function(n,t,r){return n[t]=this.value,{newDocument:r}},remove:function(n,t,r){var i=n[t];return delete n[t],{newDocument:r,removed:i}},replace:function(n,t,r){var i=n[t];return n[t]=this.value,{newDocument:r,removed:i}},move:function(n,t,r){var i=tl(r,this.path);i&&(i=Ft(i));var o=Jo(r,{op:"remove",path:this.from}).removed;return Jo(r,{op:"add",path:this.path,value:o}),{newDocument:r,removed:i}},copy:function(n,t,r){var i=tl(r,this.from);return Jo(r,{op:"add",path:this.path,value:Ft(i)}),{newDocument:r}},test:function(n,t,r){return{newDocument:r,test:Df(n[t],this.value)}},_get:function(n,t,r){return this.value=n[t],{newDocument:r}}},UT={add:function(n,t,r){return el(t)?n.splice(t,0,this.value):n[t]=this.value,{newDocument:r,index:t}},remove:function(n,t,r){var i=n.splice(t,1);return{newDocument:r,removed:i[0]}},replace:function(n,t,r){var i=n[t];return n[t]=this.value,{newDocument:r,removed:i}},move:aa.move,copy:aa.copy,test:aa.test,_get:aa._get};function tl(n,t){if(t=="")return n;var r={op:"_get",path:t};return Jo(n,r),r.value}function Jo(n,t,r,i,o,s){if(r===void 0&&(r=!1),i===void 0&&(i=!0),o===void 0&&(o=!0),s===void 0&&(s=0),r&&(typeof r=="function"?r(t,0,n,t.path):rl(t,0)),t.path===""){var a={newDocument:n};if(t.op==="add")return a.newDocument=t.value,a;if(t.op==="replace")return a.newDocument=t.value,a.removed=n,a;if(t.op==="move"||t.op==="copy")return a.newDocument=tl(n,t.from),t.op==="move"&&(a.removed=n),a;if(t.op==="test"){if(a.test=Df(n,t.value),a.test===!1)throw new vt("Test operation failed","TEST_OPERATION_FAILED",s,t,n);return a.newDocument=n,a}else{if(t.op==="remove")return a.removed=n,a.newDocument=null,a;if(t.op==="_get")return t.value=n,a;if(r)throw new vt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,n);return a}}else{i||(n=Ft(n));var f=t.path||"",u=f.split("/"),d=n,h=1,y=u.length,C=void 0,O=void 0,A=void 0;for(typeof r=="function"?A=r:A=rl;;){if(O=u[h],O&&O.indexOf("~")!=-1&&(O=Cf(O)),o&&(O=="__proto__"||O=="prototype"&&h>0&&u[h-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&C===void 0&&(d[O]===void 0?C=u.slice(0,h).join("/"):h==y-1&&(C=t.path),C!==void 0&&A(t,0,n,C)),h++,Array.isArray(d)){if(O==="-")O=d.length;else{if(r&&!el(O))throw new vt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,n);el(O)&&(O=~~O)}if(h>=y){if(r&&t.op==="add"&&O>d.length)throw new vt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,n);var a=UT[t.op].call(t,d,O,n);if(a.test===!1)throw new vt("Test operation failed","TEST_OPERATION_FAILED",s,t,n);return a}}else if(h>=y){var a=aa[t.op].call(t,d,O,n);if(a.test===!1)throw new vt("Test operation failed","TEST_OPERATION_FAILED",s,t,n);return a}if(d=d[O],r&&h<y&&(!d||typeof d!="object"))throw new vt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,n)}}}function nl(n,t,r,i,o){if(i===void 0&&(i=!0),o===void 0&&(o=!0),r&&!Array.isArray(t))throw new vt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(n=Ft(n));for(var s=new Array(t.length),a=0,f=t.length;a<f;a++)s[a]=Jo(n,t[a],r,!0,o,a),n=s[a].newDocument;return s.newDocument=n,s}function $T(n,t,r){var i=Jo(n,t);if(i.test===!1)throw new vt("Test operation failed","TEST_OPERATION_FAILED",r,t,n);return i.newDocument}function rl(n,t,r,i){if(typeof n!="object"||n===null||Array.isArray(n))throw new vt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,n,r);if(aa[n.op]){if(typeof n.path!="string")throw new vt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,n,r);if(n.path.indexOf("/")!==0&&n.path.length>0)throw new vt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,n,r);if((n.op==="move"||n.op==="copy")&&typeof n.from!="string")throw new vt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,n,r);if((n.op==="add"||n.op==="replace"||n.op==="test")&&n.value===void 0)throw new vt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,n,r);if((n.op==="add"||n.op==="replace"||n.op==="test")&&Xu(n.value))throw new vt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,n,r);if(r){if(n.op=="add"){var o=n.path.split("/").length,s=i.split("/").length;if(o!==s+1&&o!==s)throw new vt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,n,r)}else if(n.op==="replace"||n.op==="remove"||n.op==="_get"){if(n.path!==i)throw new vt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,n,r)}else if(n.op==="move"||n.op==="copy"){var a={op:"_get",path:n.from,value:void 0},f=S3([a],r);if(f&&f.name==="OPERATION_PATH_UNRESOLVABLE")throw new vt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,n,r)}}}else throw new vt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,n,r)}function S3(n,t,r){try{if(!Array.isArray(n))throw new vt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)nl(Ft(t),Ft(n),r||!0);else{r=r||rl;for(var i=0;i<n.length;i++)r(n[i],i,t,void 0)}}catch(o){if(o instanceof vt)return o;throw o}}function Df(n,t){if(n===t)return!0;if(n&&t&&typeof n=="object"&&typeof t=="object"){var r=Array.isArray(n),i=Array.isArray(t),o,s,a;if(r&&i){if(s=n.length,s!=t.length)return!1;for(o=s;o--!==0;)if(!Df(n[o],t[o]))return!1;return!0}if(r!=i)return!1;var f=Object.keys(n);if(s=f.length,s!==Object.keys(t).length)return!1;for(o=s;o--!==0;)if(!t.hasOwnProperty(f[o]))return!1;for(o=s;o--!==0;)if(a=f[o],!Df(n[a],t[a]))return!1;return!0}return n!==n&&t!==t}var mp={};Ze(mp,{compare:()=>JT,generate:()=>hp,observe:()=>GT,unobserve:()=>KT});var dp=new WeakMap,FT=function(){function n(t){this.observers=new Map,this.obj=t}return n}(),qT=function(){function n(t,r){this.callback=t,this.observer=r}return n}();function jT(n){return dp.get(n)}function HT(n,t){return n.observers.get(t)}function zT(n,t){n.observers.delete(t.callback)}function KT(n,t){t.unobserve()}function GT(n,t){var r=[],i,o=jT(n);if(!o)o=new FT(n),dp.set(n,o);else{var s=HT(o,t);i=s&&s.observer}if(i)return i;if(i={},o.value=Ft(n),t){i.callback=t,i.next=null;var a=function(){hp(i)},f=function(){clearTimeout(i.next),i.next=setTimeout(a)};typeof window<"u"&&(window.addEventListener("mouseup",f),window.addEventListener("keyup",f),window.addEventListener("mousedown",f),window.addEventListener("keydown",f),window.addEventListener("change",f))}return i.patches=r,i.object=n,i.unobserve=function(){hp(i),clearTimeout(i.next),zT(o,i),typeof window<"u"&&(window.removeEventListener("mouseup",f),window.removeEventListener("keyup",f),window.removeEventListener("mousedown",f),window.removeEventListener("keydown",f),window.removeEventListener("change",f))},o.observers.set(t,new qT(t,i)),i}function hp(n,t){t===void 0&&(t=!1);var r=dp.get(n.object);pp(r.value,n.object,n.patches,"",t),n.patches.length&&nl(r.value,n.patches);var i=n.patches;return i.length>0&&(n.patches=[],n.callback&&n.callback(i)),i}function pp(n,t,r,i,o){if(t!==n){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=Qu(t),a=Qu(n),f=!1,u=!1,d=a.length-1;d>=0;d--){var h=a[d],y=n[h];if(Zu(t,h)&&!(t[h]===void 0&&y!==void 0&&Array.isArray(t)===!1)){var C=t[h];typeof y=="object"&&y!=null&&typeof C=="object"&&C!=null&&Array.isArray(y)===Array.isArray(C)?pp(y,C,r,i+"/"+Pn(h),o):y!==C&&(f=!0,o&&r.push({op:"test",path:i+"/"+Pn(h),value:Ft(y)}),r.push({op:"replace",path:i+"/"+Pn(h),value:Ft(C)}))}else Array.isArray(n)===Array.isArray(t)?(o&&r.push({op:"test",path:i+"/"+Pn(h),value:Ft(y)}),r.push({op:"remove",path:i+"/"+Pn(h)}),u=!0):(o&&r.push({op:"test",path:i,value:n}),r.push({op:"replace",path:i,value:t}),f=!0)}if(!(!u&&s.length==a.length))for(var d=0;d<s.length;d++){var h=s[d];!Zu(n,h)&&t[h]!==void 0&&r.push({op:"add",path:i+"/"+Pn(h),value:Ft(t[h])})}}}function JT(n,t,r){r===void 0&&(r=!1);var i=[];return pp(n,t,i,"",r),i}var il=Object.assign({},lp,mp,{JsonPatchError:Of,deepClone:Ft,escapePathComponent:Pn,unescapePathComponent:Cf});var M3=He(ff(),1);var k3=He(ei(),1);var VT=function(n,t,r,i){var o=arguments.length,s=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,t,r,i);else for(var f=n.length-1;f>=0;f--)(a=n[f])&&(s=(o<3?a(s):o>3?a(t,r,s):a(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},Er,bp={anchor:!0,publish:!0,pin:!0,sync:mt.PREFER_CACHE},WT={sync:mt.PREFER_CACHE},A3={anchor:!0,publish:!0,throwOnInvalidCommit:!0};function gp(n,t){if(typeof n?.schema=="string")try{ut.fromString(n.schema)}catch{throw new Error("Schema must be a CommitID")}let r={controllers:n?.controllers,family:n?.family,schema:n?.schema?.toString(),tags:n?.tags};if(t)n?.deterministic||(r.unique=Ye((0,k3.randomBytes)(12),"base64")),n?.forbidControllerChange&&(r.forbidControllerChange=!0);else{if(n?.deterministic!==void 0||n?.unique!==void 0)throw new Error("Cannot change 'deterministic' or 'unique' properties on existing Streams");if(n?.forbidControllerChange!==void 0)throw new Error("Cannot change 'forbidControllerChange' property on existing Streams")}return Object.keys(r).forEach(i=>r[i]===void 0&&delete r[i]),r}async function T3(n){if(!n.did)throw new Error("No DID provided");return n.did.authenticated||(await n.did.authenticate(),n.loggerProvider&&n.loggerProvider.getDiagnosticsLogger().imp(`Now authenticated as DID ${n.did.id}`)),n.did}async function yp(){throw new Error("Historical stream commits cannot be modified. Load the stream without specifying a commit to make updates.")}var jr=Er=class extends _n{constructor(){super(...arguments),this._isReadOnly=!1}get content(){return super.content}get metadata(){let{next:t,metadata:r}=this.state$.value;return(0,M3.default)(t?.metadata??r)}get controllers(){return this.metadata.controllers}static async create(t,r,i,o={}){o={...bp,...o},!i?.deterministic&&o.syncTimeoutSeconds==null&&(o.syncTimeoutSeconds=0);let s=o.asDID?{did:o.asDID}:t,a=await Er.makeGenesis(s,r,i);return t.createStreamFromGenesis(Er.STREAM_TYPE_ID,a,o)}static async createFromGenesis(t,r,i={}){i={...bp,...i},r.header?.unique&&i.syncTimeoutSeconds==null&&(i.syncTimeoutSeconds=0);let o=r.data?await Er._signDagJWS(t,r):r;return t.createStreamFromGenesis(Er.STREAM_TYPE_ID,o,i)}static async deterministic(t,r,i={}){if(i={...bp,...i},r={...r,deterministic:!0},r.family==null&&r.tags==null)throw new Error("Family and/or tags are required when creating a deterministic tile document");let o=await Er.makeGenesis(t,null,r);return t.createStreamFromGenesis(Er.STREAM_TYPE_ID,o,i)}static async load(t,r,i={}){i={...WT,...i};let o=gr.from(r);if(o.type!=Er.STREAM_TYPE_ID)throw new Error(`StreamID ${o.toString()} does not refer to a '${Er.STREAM_TYPE_NAME}' stream, but to a ${o.typeName}`);return t.loadStream(o,i)}async update(t,r,i={}){i={...A3,...i};let o=i.asDID?{did:i.asDID}:this.api,s=await this.makeCommit(o,t,r),a=await this.api.applyCommit(this.id,s,i);this.state$.next(a.state)}async patch(t,r={}){r={...A3,...r};let o={header:gp(this.metadata,!1),data:t,prev:this.tip,id:this.id.cid},s=await Er._signDagJWS(this.api,o),a=await this.api.applyCommit(this.id,s,r);this.state$.next(a.state)}makeReadOnly(){this.update=yp,this.patch=yp,this.sync=yp,this._isReadOnly=!0}get isReadOnly(){return this._isReadOnly}async makeCommit(t,r,i){let o=await this._makeRawCommit(r,i);return Er._signDagJWS(t,o)}async _makeRawCommit(t,r){r||(r={});let i=gp(r,!1);if(t==null&&(t=this.content),i.controllers){if(i.controllers.length!==1)throw new Error("Exactly one controller must be specified");if(!i.controllers[0])throw new Error("Controller cannot be updated to an undefined value.")}let o=il.compare(this.content,t),s=this.state.log[0];return{header:i,data:o,prev:this.tip,id:s.cid}}static async makeGenesis(t,r,i){if(i||(i={}),!i.controllers||i.controllers.length===0)if(t.did){let a=await T3(t);i.controllers=[a.hasParent?a.parent:a.id]}else throw new Error("No controllers specified");if(i.controllers?.length!==1)throw new Error("Exactly one controller must be specified");let o=gp(i,!0);if(i?.deterministic&&r)throw new Error("Initial content must be null when creating a deterministic Tile document");if(r==null){let a={header:o};return So(a),a}let s={data:r,header:o};return Er._signDagJWS(t,s)}static async _signDagJWS(t,r){return(await T3(t)).createDagJWS(r)}};jr.STREAM_TYPE_NAME="tile";jr.STREAM_TYPE_ID=0;jr=Er=VT([Ci()],jr);function YT(n,t){try{var r=n()}catch(i){return t(i)}return r&&r.then?r.then(void 0,t):r}function XT(){let n=new Map;return function(t,r){try{let o=function(a){if(i)return a;let f=n.get(t.didUrl);return f!==void 0?f:Promise.resolve(r()).then(function(u){var d;return((d=u.didResolutionMetadata)==null?void 0:d.error)!=="notFound"&&n.set(t.didUrl,u),u})},i,s=function(){if(t.params&&t.params["no-cache"]==="true")return Promise.resolve(r()).then(function(a){return i=1,a})}();return Promise.resolve(s&&s.then?s.then(o):o(s))}catch(i){return Promise.reject(i)}}}function ZT(n,t){return t()}var QT="(?:%[0-9a-fA-F]{2})",C3=`(?:[a-zA-Z0-9._-]|${QT})`,eM="([a-z0-9]+)",tM=`((?:${C3}*:)*(${C3}+))`,O3="[a-zA-Z0-9_.:%-]",rM=`;${O3}+=${O3}*`,nM=`((${rM})*)`,iM="(/[^#?]*)?",oM="([?][^#]*)?",sM="(#.*)?",aM=new RegExp(`^did:${eM}:${tM}${nM}${iM}${oM}${sM}$`);function vp(n){if(n===""||!n)return null;let t=n.match(aM);if(t){let r={did:`did:${t[1]}:${t[2]}`,method:t[1],id:t[2],didUrl:n};if(t[4]){let i=t[4].slice(1).split(";");r.params={};for(let o of i){let s=o.split("=");r.params[s[0]]=s[1]}}return t[6]&&(r.path=t[6]),t[7]&&(r.query=t[7].slice(1)),t[8]&&(r.fragment=t[8].slice(1)),r}return null}var ol={didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};function fM(n){return function(t,r,i){try{return Promise.resolve(YT(function(){return Promise.resolve(n(t,r,i)).then(function(o){return{...ol,didResolutionMetadata:{contentType:"application/did+ld+json"},didDocument:o}})},function(o){return{...ol,didResolutionMetadata:{error:"notFound",message:o.toString()}}}))}catch(o){return Promise.reject(o)}}}var sl=class{constructor(t={},r={}){this.registry=void 0,this.cache=void 0,this.registry=t,this.cache=r.cache===!0?XT():r.cache||ZT,r.legacyResolvers&&Object.keys(r.legacyResolvers).map(i=>{this.registry[i]||(this.registry[i]=fM(r.legacyResolvers[i]))})}resolve(t,r={}){try{let i=this,o=vp(t);if(o===null)return Promise.resolve({...ol,didResolutionMetadata:{error:"invalidDid"}});let s=i.registry[o.method];return s?Promise.resolve(i.cache(o,()=>s(o.did,o,i,r))):Promise.resolve({...ol,didResolutionMetadata:{error:"unsupportedDidMethod"}})}catch(i){return Promise.reject(i)}}};var R3=He(ff(),1),cM=function(n,t,r,i){var o=arguments.length,s=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,t,r,i);else for(var f=n.length-1;f>=0;f--)(a=n[f])&&(s=(o<3?a(s):o>3?a(t,r,s):a(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},Vo,xp=()=>{throw new Error("Historical stream commits cannot be modified. Load the stream without specifying a commit to make updates.")},D3={anchor:!1,publish:!0,pin:!0,sync:mt.PREFER_CACHE},wp={anchor:!0,publish:!0,throwOnInvalidCommit:!0},uM={sync:mt.PREFER_CACHE},Wo=Vo=class extends _n{constructor(){super(...arguments),this._isReadOnly=!1}get did(){return this.content}get metadata(){let{next:t,metadata:r}=this.state$.value;return(0,R3.default)(t?.metadata??r)}get controllers(){return this.metadata.controllers}static async fromAccount(t,r,i={}){i={...D3,...i};let o=Wg(r),s=Vo.makeGenesis(o);return Vo.fromGenesis(t,s,i)}static async fromGenesis(t,r,i={}){return i={...D3,...i},t.createStreamFromGenesis(Vo.STREAM_TYPE_ID,r,i)}async setDid(t,r,i={}){i={...wp,...i};let o=typeof t=="string"?t.trim():t.id;if(vp(o)?.did!==o)throw new Error(`DID is not valid: '${o}'`);let a=await r.createLink(o);return this.setDidProof(a,i)}async setDidProof(t,r={}){r={...wp,...r};let i=this.makeCommit(t),o=await this.api.applyCommit(this.id,i,r);this.state$.next(o.state)}async clearDid(t,r={}){r={...wp,...r};let i=await t.createLink("");return this.setDidProof(i,r)}static async load(t,r,i={}){i={...uM,...i};let o=gr.from(r);if(o.type!=Vo.STREAM_TYPE_ID)throw new Error(`StreamID ${o.toString()} does not refer to a '${Vo.STREAM_TYPE_NAME}' stream, but to a ${o.typeName}`);return t.loadStream(o,i)}static makeGenesis(t){return t.chainId.namespace==="eip155"&&(t.address=t.address.toLowerCase()),{header:{controllers:[`${t.address}@${t.chainId.toString()}`],family:`caip10-${t.chainId.toString()}`}}}makeCommit(t){return{data:t,prev:this.tip,id:this.id.cid}}makeReadOnly(){this.setDidProof=xp,this.setDid=xp,this.sync=xp,this._isReadOnly=!0}get isReadOnly(){return this._isReadOnly}};Wo.STREAM_TYPE_NAME="caip10-link";Wo.STREAM_TYPE_ID=1;Wo=Vo=cM([Ci()],Wo);Yr();vo();var p6=He(h6(),1),nk=function(n,t,r,i){var o=arguments.length,s=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,t,r,i);else for(var f=n.length-1;f>=0;f--)(a=n[f])&&(s=(o<3?a(s):o>3?a(t,r,s):a(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},Ln,ik={sync:mt.PREFER_CACHE};async function d6(n){if(n.did==null)throw new Error("No DID provided");n.did.authenticated||(await n.did.authenticate(),n.loggerProvider&&n.loggerProvider.getDiagnosticsLogger().imp(`Now authenticated as DID ${n.did.id}`))}async function ok(){throw new Error("Historical stream commits cannot be modified. Load the stream without specifying a commit to make updates.")}var Fi=Ln=class extends _n{constructor(){super(...arguments),this._isReadOnly=!1}get content(){return super.content}get metadata(){return{controller:this.state$.value.metadata.controllers[0],model:Ln.MODEL}}static async create(t,r,i){Ln.assertComplete(r);let o={publish:!0,anchor:!0,pin:!0,sync:mt.NEVER_SYNC,throwOnInvalidCommit:!0},s=await Ln._makeGenesis(t,r,i);return await t.createStreamFromGenesis(Ln.STREAM_TYPE_ID,s,o)}static assertComplete(t,r){if(!t.name)throw r?new Error(`Model with StreamID ${r.toString()} is missing a 'name' field`):new Error("Model is missing a 'name' field");if(!t.schema)throw r?new Error(`Model ${t.name} (${r.toString()}) is missing a 'schema' field`):new Error(`Model ${t.name} is missing a 'schema' field`);if(!t.accountRelation)throw r?new Error(`Model ${t.name} (${r.toString()}) is missing a 'accountRelation' field`):new Error(`Model ${t.name} is missing a 'accountRelation' field`)}static async load(t,r,i={}){i={...ik,...i};let o=gr.from(r);if(o.type!=Ln.STREAM_TYPE_ID)throw new Error(`StreamID ${o.toString()} does not refer to a '${Ln.STREAM_TYPE_NAME}' stream, but to a ${o.typeName}`);return await t.loadStream(o,i)}static async _makeGenesis(t,r,i){let o=await this._makeRawGenesis(t,r,i);return Ln._signDagJWS(t,o)}static async _makeRawGenesis(t,r,i){if(r==null)throw new Error("Genesis content cannot be null");if(!i||!i.controller)if(t.did)await d6(t),i={controller:t.did.hasParent?t.did.parent:t.did.id};else throw new Error("No controller specified");let o={controllers:[i.controller],model:Ln.MODEL.bytes};return{data:r,header:o}}makeReadOnly(){this.sync=ok,this._isReadOnly=!0}get isReadOnly(){return this._isReadOnly}static async _signDagJWS(t,r){return await d6(t),t.did.createDagJWS(r)}};Fi.STREAM_TYPE_NAME="model";Fi.STREAM_TYPE_ID=2;Fi.MODEL=function(){let n=So("model-v1"),t=p6.default.encode(n,"identity"),r=wn(As,t),i=Te.createV1(As,r);return new Ke("UNLOADABLE",i)}();Fi=Ln=nk([Ci()],Fi);var g6=He(ei(),1);var sk=function(n,t,r,i){var o=arguments.length,s=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,t,r,i);else for(var f=n.length-1;f>=0;f--)(a=n[f])&&(s=(o<3?a(s):o>3?a(t,r,s):a(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},hn,ak={anchor:!0,publish:!0,pin:!0,sync:mt.NEVER_SYNC,syncTimeoutSeconds:0},fk={anchor:!1,publish:!1,pin:!0,sync:mt.PREFER_CACHE},ck={sync:mt.PREFER_CACHE},m6={anchor:!0,publish:!0,throwOnInvalidCommit:!0};async function b6(n){if(n.did==null)throw new Error("No DID provided");n.did.authenticated||(await n.did.authenticate(),n.loggerProvider&&n.loggerProvider.getDiagnosticsLogger().imp(`Now authenticated as DID ${n.did.id}`))}async function Ap(){throw new Error("Historical stream commits cannot be modified. Load the stream without specifying a commit to make updates.")}var Xo=hn=class extends _n{constructor(){super(...arguments),this._isReadOnly=!1}get content(){return super.content}get metadata(){let t=this.state$.value.metadata;return{controller:t.controllers[0],model:t.model}}static async create(t,r,i,o={}){o={...ak,...o};let s=o.asDID?{did:o.asDID}:t,a=await hn._makeGenesis(s,r,i);return t.createStreamFromGenesis(hn.STREAM_TYPE_ID,a,o)}static async single(t,r,i={}){i={...fk,...i};let o=i.asDID?{did:i.asDID}:t;r={...r,deterministic:!0};let s=await hn._makeGenesis(o,null,r);return t.createStreamFromGenesis(hn.STREAM_TYPE_ID,s,i)}static async load(t,r,i={}){i={...ck,...i};let o=gr.from(r);if(o.type!=hn.STREAM_TYPE_ID)throw new Error(`StreamID ${o.toString()} does not refer to a '${hn.STREAM_TYPE_NAME}' stream, but to a ${o.typeName}`);return t.loadStream(o,i)}async replace(t,r={}){r={...m6,...r};let i=r.asDID?{did:r.asDID}:this.api,o=await this._makeCommit(i,t),s=await this.api.applyCommit(this.id,o,r);this.state$.next(s.state)}async patch(t,r={}){r={...m6,...r};let i={data:t,prev:this.tip,id:this.id.cid},o=await hn._signDagJWS(this.api,i),s=await this.api.applyCommit(this.id,o,r);this.state$.next(s.state)}makeReadOnly(){this.replace=Ap,this.patch=Ap,this.sync=Ap,this._isReadOnly=!0}get isReadOnly(){return this._isReadOnly}_makeCommit(t,r){let i=this._makeRawCommit(r);return hn._signDagJWS(t,i)}_makeRawCommit(t){return{data:il.compare(this.content,t||{}),prev:this.tip,id:this.state.log[0].cid}}static async _makeGenesis(t,r,i){let o=await this._makeRawGenesis(t,r,i);return i.deterministic?(So(o),o):hn._signDagJWS(t,o)}static async _makeRawGenesis(t,r,i){if(!i.model)throw new Error("Must specify a 'model' when creating a ModelInstanceDocument");let o=i.controller;if(!o)if(t.did)await b6(t),o=t.did.hasParent?t.did.parent:t.did.id;else throw new Error("No controller specified");let s={controllers:[o],model:i.model.bytes};return i.deterministic||(s.unique=(0,g6.randomBytes)(12)),{data:r,header:s}}static async _signDagJWS(t,r){return await b6(t),t.did.createDagJWS(r)}};Xo.STREAM_TYPE_NAME="MID";Xo.STREAM_TYPE_ID=3;Xo=hn=sk([Ci()],Xo);var ul=class{constructor(t){this._apiUrl=t}async add(t,r){let i={};r&&(i.force=!0);let o=new URL(`./pins/${t}`,this._apiUrl);await Lt(o,{method:"post",body:i})}async rm(t,r){let i=new URL(`./pins/${t}`,this._apiUrl);await Lt(i,{method:"delete",body:{opts:r}})}async ls(t){let r=new URL("./pins",this._apiUrl);t&&(r=new URL(`./pins/${t.toString()}`,this._apiUrl));let i=await Lt(r),{pinnedStreamIds:o}=i;return{[Symbol.asyncIterator](){let s=0;return{next(){return s===o.length?Promise.resolve({value:null,done:!0}):Promise.resolve({value:o[s++],done:!1})}}}}}};var ll=class{constructor(t){this._fetchJson=Lt,this._collectionURL=new URL("./collection",t),this._countURL=new URL("./collection/count",t)}async count(t){return(await this._fetchJson(this._countURL,{method:"POST",body:Td(t)})).count}async query(t){let r=await this._fetchJson(this._collectionURL,{method:"POST",body:Td(t)});return{edges:r.edges.map(o=>({cursor:o.cursor,node:Xe.deserializeState(o.node)})),pageInfo:r.pageInfo}}};var hl=class{constructor(t,r){this._apiUrl=t,this._getDidFn=r,this._fetchJson=Lt,this.modelsPath="./admin/models",this.getCodePath="./admin/getCode"}getCodeUrl(){return new URL(this.getCodePath,this._apiUrl)}getModelsUrl(){return new URL(this.modelsPath,this._apiUrl)}async buildJWS(t,r,i){let o=i?{models:i.map(a=>a.toString())}:void 0,s=await t.createJWS({code:r,requestPath:this.getModelsUrl().pathname,requestBody:o});return`${s.signatures[0].protected}.${s.payload}.${s.signatures[0].signature}`}async generateCode(){return(await this._fetchJson(this.getCodeUrl())).code}async startIndexingModels(t){let r=await this.generateCode();await this._fetchJson(this.getModelsUrl(),{method:"post",body:{jws:await this.buildJWS(this._getDidFn(),r,t)}})}async getIndexedModels(){let t=await this.generateCode();return(await this._fetchJson(this.getModelsUrl(),{headers:{Authorization:`Basic ${await this.buildJWS(this._getDidFn(),t)}`}})).models.map(i=>Ke.fromString(i))}async stopIndexingModels(t){let r=await this.generateCode();await this._fetchJson(this.getModelsUrl(),{method:"delete",body:{jws:await this.buildJWS(this._getDidFn(),r,t)}})}};var uk="/api/v0/",lk="http://localhost:7007",hk={syncInterval:5e3},dk={anchor:!0,publish:!0,sync:mt.PREFER_CACHE},pk={anchor:!0,publish:!0,sync:mt.PREFER_CACHE},y6={sync:mt.PREFER_CACHE},la=class{constructor(t=lk,r={}){this._config={...hk,...r},this._apiUrl=new URL(uk,t),this.context={api:this},this.pin=new ul(this._apiUrl),this.index=new ll(this._apiUrl);let i=(()=>this.did).bind(this);this.admin=new hl(this._apiUrl,i),this._streamConstructors={[Wo.STREAM_TYPE_ID]:Wo,[Fi.STREAM_TYPE_ID]:Fi,[Xo.STREAM_TYPE_ID]:Xo,[jr.STREAM_TYPE_ID]:jr}}get did(){return this.context.did}set did(t){this.context.did=t}async createStreamFromGenesis(t,r,i={}){i={...pk,...i};let o=await rr.createFromGenesis(this._apiUrl,t,r,i,this._config.syncInterval);return this.buildStreamFromDocument(o)}async loadStream(t,r={}){r={...y6,...r};let i=gr.from(t),o=await rr.load(i,this._apiUrl,this._config.syncInterval,r);return this.buildStreamFromDocument(o)}async multiQuery(t,r){let i=t.map(a=>({...a,streamId:typeof a.streamId=="string"?a.streamId:a.streamId.toString()})),o=new URL("./multiqueries",this._apiUrl),s=await Lt(o,{method:"post",body:{queries:i,timeout:r}});return Object.entries(s).reduce((a,f)=>{let[u,d]=f,h=Xe.deserializeState(d),y=new rr(h,this._apiUrl,this._config.syncInterval);return a[u]=this.buildStreamFromDocument(y),a},{})}loadStreamCommits(t){let r=Ad(t);return rr.loadStreamCommits(r,this._apiUrl)}async applyCommit(t,r,i={}){i={...dk,...i};let o=Ad(t),s=await rr.applyCommit(this._apiUrl,o,r,i,this._config.syncInterval);return this.buildStreamFromDocument(s)}async requestAnchor(t,r={}){r={...y6,...r};let{anchorStatus:i}=await Lt(`${this._apiUrl}/streams/${t.toString()}/anchor`,{method:"post",body:{opts:r}});return i}addStreamHandler(t){this._streamConstructors[t.name]=t.stream_constructor}buildStreamFromState(t){let r=new rr(t,this._apiUrl,this._config.syncInterval);return this.buildStreamFromDocument(r)}buildStreamFromDocument(t){let r=t.state.type,i=this._streamConstructors[r];if(!i)throw new Error(`Failed to find constructor for stream ${r}`);return new i(t,this.context)}async setDID(t){this.context.did=t}async getSupportedChains(){if(this._supportedChains)return this._supportedChains;let{supportedChains:t}=await Lt(this._apiUrl+"/node/chains");return this._supportedChains=t,t}async close(){}};var Fl=He(Yu(),1);Nc();var tm=He(x6(),1),Wx=He(N0(),1),xa=He(hx(),1),Pl=He(Yu(),1),Yx=He(px(),1),Zp=He(yx(),1),Wf=He(Ex(),1),rm=He(Lx(),1),nm=He(ei(),1);Ka();function Gr(n){return Ye(n,"base64url")}function Zt(n){let t=n.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return Ge(t,"base64url")}function im(n){return Ge(n,"base58btc")}function xC(n){return Ye(n,"base58btc")}function Yp(n){let t=n.startsWith("0x")?n.substring(2):n;return Ge(t.toLowerCase(),"base16")}function Qp(n){return Gr(Ge(n))}function Xx(n){return Ye(Zt(n))}function mi(n){return Ye(n,"base16")}function Zx(n){return Ge(n)}function Qx({r:n,s:t,recoveryParam:r},i){let o=new Uint8Array(i?65:64);if(o.set(Ge(n,"base16"),0),o.set(Ge(t,"base16"),32),i){if(typeof r>"u")throw new Error("Signer did not return a recoveryParam");o[64]=r}return Gr(o)}function wC(n){let t=Zt(n);if(t.length<64||t.length>65)throw new TypeError(`Wrong size for signature. Expected 64 or 65 bytes, but got ${t.length}`);let r=mi(t.slice(0,32)),i=mi(t.slice(32,64)),o=t.length===65?t[64]:void 0;return{r,s:i,recoveryParam:o}}function ew(n,t){return Zr([Zt(n),Zt(t)])}function ns(n){let t=typeof n=="string"?Ge(n):n;return(0,tm.hash)(t)}function EC(n){return new Uint8Array(Wx.default.keccak_256.arrayBuffer(n))}function tw(n){let t=Ge(n.slice(2),"base16");return`0x${Ye(EC(t).slice(-20),"base16")}`}function em(n,t=new Uint8Array(4)){let r=Ge(n.toString(),"base10");return t.set(r,4-r.length),t}var Xp=n=>Zr([em(n.length),n]);function rw(n,t,r,i,o){if(t!==256)throw new Error(`Unsupported key length: ${t}`);let s=Zr([Xp(Ge(r)),Xp(typeof i>"u"?new Uint8Array(0):i),Xp(typeof o>"u"?new Uint8Array(0):o),em(t)]);return(0,tm.hash)(Zr([em(1),n,s]))}var _z=new xa.default.ec("secp256k1");function nw(n){let t=n;if(t.length!==64)throw new Error(`bad_key: Invalid private key format. Expecting 64 bytes, but got ${t.length}`);return function(r){try{let i=typeof r=="string"?Zx(r):r,o=(0,Pl.sign)(t,i);return Promise.resolve(Gr(o))}catch(i){return Promise.reject(i)}}}var Sz=new xa.default.ec("p256");function om(n){return typeof n=="object"&&"r"in n&&"s"in n}function _C(){return function(t,r){try{return Promise.resolve(r(t)).then(function(i){return om(i)?Qx(i):i})}catch(i){return Promise.reject(i)}}}function Bx(n){return function(r,i){try{return Promise.resolve(i(r)).then(function(o){if(om(o))return Qx(o,n);if(n&&typeof wC(o).recoveryParam>"u")throw new Error("not_supported: ES256K-R not supported when signer doesn't provide a recovery param");return o})}catch(o){return Promise.reject(o)}}}function Ux(){return function(t,r){try{return Promise.resolve(r(t)).then(function(i){if(om(i))throw new Error("invalid_config: expected a signer function that returns a string instead of signature object");return i})}catch(i){return Promise.reject(i)}}}var SC={ES256:_C(),ES256K:Bx(),"ES256K-R":Bx(!0),Ed25519:Ux(),EdDSA:Ux()};function AC(n){let t=SC[n];if(!t)throw new Error(`not_supported: Unsupported algorithm ${n}`);return t}var jf=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Hf=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],zf=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Kf=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Gf=[0,1518500249,1859775393,2400959708,2840853838],Jf=[1352829926,1548603684,1836072691,2053994217,0];function is(n,t){return n<<t|n>>>32-t}function $x(n,t,r,i,o,s,a,f){return is(n+(t^r^i)+s+a|0,f)+o|0}function Fx(n,t,r,i,o,s,a,f){return is(n+(t&r|~t&i)+s+a|0,f)+o|0}function qx(n,t,r,i,o,s,a,f){return is(n+((t|~r)^i)+s+a|0,f)+o|0}function jx(n,t,r,i,o,s,a,f){return is(n+(t&i|r&~i)+s+a|0,f)+o|0}function Hx(n,t,r,i,o,s,a,f){return is(n+(t^(r|~i))+s+a|0,f)+o|0}var Nl=class{constructor(t=64){this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this._blockOffset=0,this._block=void 0,this._blockSize=void 0,this._length=[0,0,0,0],this._finalized=void 0,this.update=r=>{if(this._finalized)throw new Error("Digest already called");let i=this._block,o=0;for(;this._blockOffset+r.length-o>=this._blockSize;){for(let s=this._blockOffset;s<this._blockSize;)i[s++]=r[o++];this._update(),this._blockOffset=0}for(;o<r.length;)i[this._blockOffset++]=r[o++];for(let s=0,a=r.length*8;a>0;++s)this._length[s]+=a,a=this._length[s]/4294967296|0,a>0&&(this._length[s]-=4294967296*a);return this},this.digest=()=>{if(this._finalized)throw new Error("Digest already called");this._finalized=!0;let r=this._digest();this._block.fill(0),this._blockOffset=0;for(let i=0;i<4;++i)this._length[i]=0;return r},this._update=()=>{let r=new Array(16),i=new DataView(this._block.buffer);for(let M=0;M<16;++M)r[M]=r[M]=i.getInt32(M*4,!0);let o=this._a|0,s=this._b|0,a=this._c|0,f=this._d|0,u=this._e|0,d=this._a|0,h=this._b|0,y=this._c|0,C=this._d|0,O=this._e|0;for(let M=0;M<80;M+=1){let F,D;M<16?(F=$x(o,s,a,f,u,r[jf[M]],Gf[0],zf[M]),D=Hx(d,h,y,C,O,r[Hf[M]],Jf[0],Kf[M])):M<32?(F=Fx(o,s,a,f,u,r[jf[M]],Gf[1],zf[M]),D=jx(d,h,y,C,O,r[Hf[M]],Jf[1],Kf[M])):M<48?(F=qx(o,s,a,f,u,r[jf[M]],Gf[2],zf[M]),D=qx(d,h,y,C,O,r[Hf[M]],Jf[2],Kf[M])):M<64?(F=jx(o,s,a,f,u,r[jf[M]],Gf[3],zf[M]),D=Fx(d,h,y,C,O,r[Hf[M]],Jf[3],Kf[M])):(F=Hx(o,s,a,f,u,r[jf[M]],Gf[4],zf[M]),D=$x(d,h,y,C,O,r[Hf[M]],Jf[4],Kf[M])),o=u,u=f,f=is(a,10),a=s,s=F,d=O,O=C,C=is(y,10),y=h,h=D}let A=this._b+a+C|0;this._b=this._c+f+O|0,this._c=this._d+u+d|0,this._d=this._e+o+h|0,this._e=this._a+s+y|0,this._a=A},this._digest=()=>{this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56);let r=new DataView(this._block.buffer);r.setUint32(56,this._length[0],!0),r.setUint32(60,this._length[1],!0),this._block=new Uint8Array(r.buffer),this._update();let i=new DataView(new Uint8Array(20).buffer);return i.setInt32(0,this._a,!0),i.setInt32(4,this._b,!0),i.setInt32(8,this._c,!0),i.setInt32(12,this._d,!0),i.setInt32(16,this._e,!0),new Uint8Array(i.buffer)},this._block=new Uint8Array(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}},TC=(n,t)=>{let r=Ye(im(t).slice(0,1),"hex"),i=Ge(n,"hex"),o=new Nl().update(ns(i)).digest(),s=r+Ye(o,"hex"),a=ns(Ge(s,"hex")),f=ns(a),u=Ye(f,"hex").substring(0,8),d=s+u;return xC(Ge(d,"hex"))},MC=xa.default.ec,kC=(n,t)=>{let i=new MC("secp256k1").keyFromPublic(n,"hex").getPublic().encode("hex",!0),o=Ge(i,"hex"),s=new Nl().update(ns(o)).digest(),a=Zp.bech32.toWords(s);return Zp.bech32.encode(t,a).replace(t,"")},CC=(n,t)=>{if(t){let r=t.split(":");switch(r[0]){case"bip122":r[r.length-1]=TC(n,r[r.length-1]);break;case"cosmos":r[r.length-1]=kC(n,r[1]);break;case"eip155":r[r.length-1]=tw(n);break;default:return!1}return r.join(":").toLowerCase()===t.toLowerCase()}return!1},sm=new xa.default.ec("secp256k1"),iw=new xa.default.ec("p256");function Vf(n,t=!1){let r=Zt(n);if(r.length!==(t?65:64))throw new Error("wrong signature length");let i=mi(r.slice(0,32)),o=mi(r.slice(32,64)),s={r:i,s:o};return t&&(s.recoveryParam=r[64]),s}function Ll(n){if(n.publicKeyBase58)return im(n.publicKeyBase58);if(n.publicKeyBase64)return Zt(n.publicKeyBase64);if(n.publicKeyHex)return Yp(n.publicKeyHex);if(n.publicKeyJwk&&n.publicKeyJwk.crv==="secp256k1"&&n.publicKeyJwk.x&&n.publicKeyJwk.y)return Yp(sm.keyFromPublic({x:mi(Zt(n.publicKeyJwk.x)),y:mi(Zt(n.publicKeyJwk.y))}).getPublic("hex"));if(n.publicKeyJwk&&n.publicKeyJwk.crv==="P-256"&&n.publicKeyJwk.x&&n.publicKeyJwk.y)return Yp(iw.keyFromPublic({x:mi(Zt(n.publicKeyJwk.x)),y:mi(Zt(n.publicKeyJwk.y))}).getPublic("hex"));if(n.publicKeyJwk&&n.publicKeyJwk.kty==="OKP"&&n.publicKeyJwk.crv==="Ed25519"&&n.publicKeyJwk.x)return Zt(n.publicKeyJwk.x);if(n.publicKeyMultibase){let{base16:t,base58btc:r,base64:i,base64url:o}=gs;return t.decoder.or(r.decoder.or(i.decoder.or(o.decoder))).decode(n.publicKeyMultibase)}return new Uint8Array}function OC(n,t,r){let i=ns(n),o=Vf(t),a=r.filter(({ethereumAddress:f,blockchainAccountId:u})=>typeof f>"u"&&typeof u>"u").find(f=>{try{let u=Ll(f);return iw.keyFromPublic(u).verify(i,o)}catch{return!1}});if(!a)throw new Error("invalid_signature: Signature invalid for JWT");return a}function DC(n,t,r){let i=ns(n),o=Vf(t),s=r.filter(({ethereumAddress:u,blockchainAccountId:d})=>typeof u>"u"&&typeof d>"u"),a=r.filter(({ethereumAddress:u,blockchainAccountId:d})=>typeof u<"u"||typeof d<"u"),f=s.find(u=>{try{let d=Ll(u);return sm.keyFromPublic(d).verify(i,o)}catch{return!1}});if(!f&&a.length>0&&(f=ow(n,t,a)),!f)throw new Error("invalid_signature: Signature invalid for JWT");return f}function ow(n,t,r){let i;if(t.length>86)i=[Vf(t,!0)];else{let a=Vf(t,!1);i=[{...a,recoveryParam:0},{...a,recoveryParam:1}]}let o=a=>{let f=ns(n),u=sm.recoverPubKey(f,a,a.recoveryParam),d=u.encode("hex"),h=u.encode("hex",!0),y=tw(d).toLowerCase();return r.find(O=>{var A,M,F;let D=mi(Ll(O));return D===d||D===h||((A=O.ethereumAddress)==null?void 0:A.toLowerCase())===y||((M=O.blockchainAccountId)==null||(F=M.split("@eip155"))==null?void 0:F[0].toLowerCase())===y||CC(d,O.blockchainAccountId)})},s=i.map(o).filter(a=>typeof a<"u");if(s.length===0)throw new Error("invalid_signature: Signature invalid for JWT");return s[0]}function zx(n,t,r){let i=Zx(n),o=Zt(t),s=r.find(a=>(0,Pl.verify)(Ll(a),i,o));if(!s)throw new Error("invalid_signature: Signature invalid for JWT");return s}var RC={ES256:OC,ES256K:DC,"ES256K-R":ow,Ed25519:zx,EdDSA:zx};function sw(n){let t=RC[n];if(!t)throw new Error(`not_supported: Unsupported algorithm ${n}`);return t}sw.toSignatureObject=Vf;var aw=function(n,t,r={},i={}){try{r.alg||(r.alg=IC);let o=typeof n=="string"?n:Kx(n,i.canonicalize),s=[Kx(r,i.canonicalize),o].join("."),a=AC(r.alg);return Promise.resolve(a(s,t)).then(function(f){return[s,f].join(".")})}catch(o){return Promise.reject(o)}};var IC="ES256K";function Kx(n,t=!1){return Qp(t?(0,Yx.default)(n):JSON.stringify(n))}function NC(n){let t=n.match(/^([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)$/);if(t)return{header:JSON.parse(Xx(t[1])),payload:t[2],signature:t[3],data:`${t[1]}.${t[2]}`};throw new Error("invalid_argument: Incorrect format JWS")}function PC({header:n,data:t,signature:r},i){return Array.isArray(i)||(i=[i]),sw(n.alg)(t,r,i)}function fw(n,t){let r=NC(n);return PC(r,t)}var Gx=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function At(n,t,r){if(!n.s){if(r instanceof os)if(r.s)t&1&&(t=r.s),r=r.v;else{r.o=At.bind(null,n,t);return}if(r&&r.then){r.then(At.bind(null,n,t),At.bind(null,n,2));return}n.s=t,n.v=r;let i=n.o;i&&i(n)}}var os=function(){function n(){}return n.prototype.then=function(t,r){let i=new n,o=this.s;if(o){let s=o&1?t:r;if(s){try{At(i,1,s(this.v))}catch(a){At(i,2,a)}return i}else return this}return this.o=function(s){try{let a=s.v;s.s&1?At(i,1,t?t(a):a):r?At(i,1,r(a)):At(i,2,a)}catch(a){At(i,2,a)}},i},n}();function Vi(n){return n instanceof os&&n.s&1}function LC(n,t,r){var i=-1,o,s;function a(f){try{for(;++i<n.length&&(!r||!r());)if(f=t(i),f&&f.then)if(Vi(f))f=f.v;else{f.then(a,s||(s=At.bind(null,o=new os,2)));return}o?At(o,1,f):o=f}catch(u){At(o||(o=new os),2,u)}}return a(),o}function BC(n,t,r){if(typeof n[Gx]=="function"){let h=function(y){try{for(;!(o=i.next()).done&&(!r||!r());)if(y=t(o.value),y&&y.then)if(Vi(y))y=y.v;else{y.then(h,a||(a=At.bind(null,s=new os,2)));return}s?At(s,1,y):s=y}catch(C){At(s||(s=new os),2,C)}};var i=n[Gx](),o,s,a;if(h(),i.return){var f=function(y){try{o.done||i.return()}catch{}return y};if(s&&s.then)return s.then(f,function(y){throw f(y)});f()}return s}if(!("length"in n))throw new TypeError("Object is not iterable");for(var u=[],d=0;d<n.length;d++)u.push(n[d]);return LC(u,function(h){return t(u[h])},r)}function UC(n,t,r){for(var i;;){var o=n();if(Vi(o)&&(o=o.v),!o)return s;if(o.then){i=0;break}var s=r();if(s&&s.then)if(Vi(s))s=s.s;else{i=1;break}if(t){var a=t();if(a&&a.then&&!Vi(a)){i=2;break}}}var f=new os,u=At.bind(null,f,2);return(i===0?o.then(h):i===1?s.then(d):a.then(y)).then(void 0,u),f;function d(C){s=C;do{if(t&&(a=t(),a&&a.then&&!Vi(a))){a.then(y).then(void 0,u);return}if(o=n(),!o||Vi(o)&&!o.v){At(f,1,s);return}if(o.then){o.then(h).then(void 0,u);return}s=r(),Vi(s)&&(s=s.v)}while(!s||!s.then);s.then(d).then(void 0,u)}function h(C){C?(s=r(),s&&s.then?s.then(d).then(void 0,u):d(s)):At(f,1,s)}function y(){(o=n())?o.then?o.then(h).then(void 0,u):h(o):At(f,1,s)}}function $C(n){if(!(n.protected&&n.iv&&n.ciphertext&&n.tag))throw new Error("bad_jwe: missing properties");n.recipients&&n.recipients.map(t=>{if(!(t.header&&t.encrypted_key))throw new Error("bad_jwe: malformed recipients")})}function Jx({ciphertext:n,tag:t,iv:r,protectedHeader:i,recipient:o},s){let a={protected:i,iv:Gr(r),ciphertext:Gr(n),tag:Gr(t)};return s&&(a.aad=Gr(s)),o&&(a.recipients=[o]),a}var cw=function(n,t){try{let i=function(d){if(f===null)throw new Error("failure: Failed to decrypt");return f},r;$C(n);let o=JSON.parse(Xx(n.protected));if(o.enc!==t.enc)throw new Error(`not_supported: Decrypter does not supported: '${o.enc}'`);let s=ew(n.ciphertext,n.tag),a=Ge(n.aad?`${n.protected}.${n.aad}`:n.protected),f=null,u=function(){return o.alg==="dir"&&t.alg==="dir"?Promise.resolve(t.decrypt(s,Zt(n.iv),a)).then(function(d){f=d}):function(){if(!n.recipients||n.recipients.length===0)throw new Error("bad_jwe: missing recipients");{let d=0;return UC(function(){return!f&&d<n.recipients.length},function(){return d++},function(){let h=n.recipients[d];Object.assign(h.header,o);let y=function(){if(h.header.alg===t.alg)return Promise.resolve(t.decrypt(s,Zt(n.iv),a,h)).then(function(C){f=C})}();if(y&&y.then)return y.then(function(){})})}}()}();return Promise.resolve(u&&u.then?u.then(i):i(u))}catch(r){return Promise.reject(r)}},uw=function(n,t,r={},i){try{if(t[0].alg==="dir"){if(t.length>1)throw new Error('not_supported: Can only do "dir" encryption to one key.');return Promise.resolve(t[0].encrypt(n,r,i)).then(function(o){return Jx(o,i)})}else{let o=t[0].enc;if(!t.reduce((u,d)=>u&&d.enc===o,!0))throw new Error("invalid_argument: Incompatible encrypters passed");let s,a,f=BC(t,function(u){let d=function(){return s?Promise.resolve(u.encryptCek==null?void 0:u.encryptCek(s)).then(function(h){if(h){var y,C;(y=a)==null||(C=y.recipients)==null||C.push(h)}}):Promise.resolve(u.encrypt(n,r,i)).then(function(h){s=h.cek,a=Jx(h,i)})}();if(d&&d.then)return d.then(function(){})});return Promise.resolve(f&&f.then?f.then(function(){return a}):a)}}catch(o){return Promise.reject(o)}};var lw=function(n,t){try{let r=function(o,s=[]){try{return Promise.resolve(t.resolve(o)).then(function({didResolutionMetadata:a,didDocument:f}){function u(){var y,C;let O=(y=f.keyAgreement)==null||(C=y.map(M=>typeof M=="string"?[...f.publicKey||[],...f.verificationMethod||[]].find(F=>F.id===M):M))==null?void 0:C.filter(M=>typeof M<"u"),A=O?.filter(M=>M.type==="X25519KeyAgreementKey2019"&&Boolean(M.publicKeyBase58))||[];if(!A.length&&!d.length)throw new Error(`no_suitable_keys: Could not find x25519 key for ${o}`);return A.map(M=>qC(im(M.publicKeyBase58),M.id)).concat(...d)}if(s.push(o),a!=null&&a.error||f==null)throw new Error(`resolver_error: Could not resolve ${o}: ${a.error}, ${a.message}`);let d=[];if(!f.controller&&!f.keyAgreement)throw new Error(`no_suitable_keys: Could not find x25519 key for ${o}`);let h=function(){if(f.controller){let y=Array.isArray(f.controller)?f.controller:[f.controller];y=y.filter(O=>!s.includes(O));let C=y.map(O=>r(O,s).catch(()=>[]));return Promise.resolve(Promise.all(C)).then(function(O){d=[].concat(...O)})}}();return h&&h.then?h.then(u):u(h)})}catch(a){return Promise.reject(a)}},i=n.map(o=>r(o));return Promise.resolve(Promise.all(i)).then(function(o){return[].concat(...o)})}catch(r){return Promise.reject(r)}};function hw(n){let t=new rm.XChaCha20Poly1305(n);return(r,i)=>{let o=(0,nm.randomBytes)(t.nonceLength),s=t.seal(o,r,i);return{ciphertext:s.subarray(0,s.length-t.tagLength),tag:s.subarray(s.length-t.tagLength),iv:o}}}function FC(n){let t=function(s,a={},f){try{let u=Qp(JSON.stringify(Object.assign({alg:o},a,{enc:i}))),d=Ge(f?`${u}.${Gr(f)}`:u);return Promise.resolve({...r(s,d),protectedHeader:u})}catch(u){return Promise.reject(u)}},r=hw(n),i="XC20P",o="dir";return{alg:o,enc:i,encrypt:t}}function Vx(n){let t=function(i,o,s){try{return Promise.resolve(r.open(o,i,s))}catch(a){return Promise.reject(a)}},r=new rm.XChaCha20Poly1305(n);return{alg:"dir",enc:"XC20P",decrypt:t}}function qC(n,t){let r=function(f,u={},d){try{Object.assign(u,{alg:void 0});let h=(0,nm.randomBytes)(32);return Promise.resolve(FC(h).encrypt(f,u,d)).then(function(y){return Promise.resolve(i(h)).then(function(C){return{...y,recipient:C,cek:h}})})}catch(h){return Promise.reject(h)}},i=function(f){try{let u=(0,Wf.generateKeyPair)(),d=(0,Wf.sharedKey)(u.secretKey,n),h=rw(d,s,o),y=hw(h)(f),C={encrypted_key:Gr(y.ciphertext),header:{alg:o,iv:Gr(y.iv),tag:Gr(y.tag),epk:{kty:"OKP",crv:a,x:Gr(u.publicKey)}}};return t&&(C.header.kid=t),Promise.resolve(C)}catch(u){return Promise.reject(u)}},o="ECDH-ES+XC20PKW",a="X25519";return{alg:o,enc:"XC20P",encrypt:r,encryptCek:i}}function jC(n){if(!(n&&n.epk&&n.iv&&n.tag))throw new Error("bad_jwe: malformed header")}function dw(n){let t=function(s,a,f,u){try{let y=function(){let M=rw(O,i,r),F=ew(u.encrypted_key,u.header.tag);return Promise.resolve(Vx(M).decrypt(F,Zt(u.header.iv))).then(function(D){return D===null?null:Vx(D).decrypt(s,a,f)})};var d,h;if(jC((d=u)==null?void 0:d.header),u=u,((h=u.header.epk)==null?void 0:h.crv)!==o||typeof u.header.epk.x>"u")return Promise.resolve(null);let C=Zt(u.header.epk.x),O,A=function(){if(n instanceof Uint8Array)O=(0,Wf.sharedKey)(n,C);else return Promise.resolve(n(C)).then(function(M){O=M})}();return Promise.resolve(A&&A.then?A.then(y):y(A))}catch(y){return Promise.reject(y)}},r="ECDH-ES+XC20PKW",o="X25519";return{alg:r,enc:"XC20P",decrypt:t}}var Tw=He(mw(),1);var bw=Symbol("abortable"),Bl=Symbol("aborted");function gw(n,t){if(t.aborted)return Promise.reject(Bl);let r,i=new Promise((o,s)=>{r=s});return t.addEventListener("abort",()=>{r(Bl)}),Promise.race([n,i])}var yw=(n=21)=>crypto.getRandomValues(new Uint8Array(n)).reduce((t,r)=>(r&=63,r<36?t+=r.toString(36):r<62?t+=(r-26).toString(36).toUpperCase():r>62?t+="-":t+="_",t),"");var Ul="utils_abort_request";var nr;(function(n){n[n.PARSE_ERROR=-32700]="PARSE_ERROR",n[n.INVALID_REQUEST=-32600]="INVALID_REQUEST",n[n.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",n[n.INVALID_PARAMS=-32602]="INVALID_PARAMS",n[n.INTERNAL_ERROR=-32603]="INTERNAL_ERROR"})(nr||(nr={}));var vw={[nr.PARSE_ERROR]:"Parse error",[nr.INVALID_REQUEST]:"Invalid request",[nr.METHOD_NOT_FOUND]:"Method not found",[nr.INVALID_PARAMS]:"Invalid params",[nr.INTERNAL_ERROR]:"Internal error"};function HC(n){return-32e3>=n&&n>=-32099}function $l(n){return vw[n.toString()]??(HC(n)?"Server error":"Application error")}var Sr=class extends Error{static fromObject(t){return new Sr(t.code,t.message,t.data)}toObject(){return{code:this.code,data:this.data,message:this.message}}constructor(t,r,i){super(),Object.setPrototypeOf(this,Sr.prototype),this.code=t,this.data=i,this.message=r??$l(t)}};function Yf(n){let t=vw[n];return function(i){return new Sr(n,t,i)}}var zC=Yf(nr.PARSE_ERROR),Iz=Yf(nr.INVALID_REQUEST),Nz=Yf(nr.METHOD_NOT_FOUND),Pz=Yf(nr.INVALID_PARAMS),Lz=Yf(nr.INTERNAL_ERROR);function KC(n,t){if(t.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function GC(n,t){return t.get?t.get.call(n):t.value}function JC(n,t,r){if(t.set)t.set.call(n,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}function xw(n,t,r){if(!t.has(n))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(n)}function am(n,t){var r=xw(n,t,"get");return GC(n,r)}function VC(n,t,r){KC(n,t),t.set(n,r)}function WC(n,t,r){var i=xw(n,t,"set");return JC(n,i,r),r}var Xf=new WeakMap,Zf=class{get connection(){return am(this,Xf)}createID(){return yw()}request(t,r=void 0,i={}){let{signal:o}=i;if(o?.aborted)return Promise.reject(Bl);let s=this.createID(),a=am(this,Xf).send({jsonrpc:"2.0",id:s,method:t,params:r}).then(f=>{if(f==null)throw new Error("Missing response");if(f.error!=null)throw Sr.fromObject(f.error);return f.result});return o==null?a:(o.addEventListener("abort",()=>{this.notify(Ul,{id:s})}),gw(a,o))}async notify(t,r=void 0){await am(this,Xf).send({jsonrpc:"2.0",method:t,params:r})}constructor(t){VC(this,Xf,{writable:!0,value:void 0}),WC(this,Xf,t)}};function ww(n,t){return{jsonrpc:"2.0",id:n,error:{code:t,message:$l(t)}}}function YC(n,t,r){console.warn("Unhandled handler error",t,r)}function XC(n,t){console.warn("Unhandled invalid message",t)}function ZC(n,t){console.warn("Unhandled notification",t)}function Ew(n,t={}){let r=t.onHandlerError??YC,i=t.onInvalidMessage??XC,o=t.onNotification??ZC,s={};function a(f,u){if(u.method===Ul){let d=u.params?.id;d!=null&&s[d]?.abort()}else o(f,u)}return async function(u,d){let h=d.id;if(d.jsonrpc!=="2.0"||d.method==null)return h==null?(i(u,d),null):ww(h,nr.INVALID_REQUEST);let y=n[d.method];if(y==null)return h==null?(a(u,d),null):ww(h,nr.METHOD_NOT_FOUND);try{let C;if(h!=null&&y[bw]){let A=new AbortController;s[h]=A,C=y(u,d.params,{signal:A.signal})}else C=y(u,d.params,{});let O=C==null?C:typeof C.then=="function"?await C:C;return h==null||s[h]?.signal.aborted?null:{jsonrpc:"2.0",id:h,result:O}}catch(C){if(h==null||s[h]?.signal.aborted)return r(u,d,C),null;let O;if(C instanceof Sr)O=C.toObject();else{r(u,d,C);let A=C.code??-32e3;O={code:A,message:C.message||$l(A)}}return{jsonrpc:"2.0",id:h,error:O}}finally{h!=null&&delete s[h]}}}var QC="base64pad";function _w(n){return JSON.parse((0,Tw.default)(n))}function eO(n){let t=new Uint8Array(n.length+2);return t[0]=237,t[1]=1,t.set(n,2),`did:key:z${Ye(t,"base58btc")}`}function Sw(n){let[t,r,i]=n.split(".");return{payload:r,signatures:[{protected:t,signature:i}]}}var Aw=async(n,t,r,i={})=>{let o=`${t}#${t.split(":")[2]}`,s=nw(r),a=_w(Object.assign(i,{kid:o,alg:"EdDSA"}));return aw(typeof n=="string"?n:_w(n),s,a)},tO={did_authenticate:async({did:n,secretKey:t},r)=>{let i=await Aw({did:n,aud:r.aud,nonce:r.nonce,paths:r.paths,exp:Math.floor(Date.now()/1e3)+600},n,t);return Sw(i)},did_createJWS:async({did:n,secretKey:t},r)=>{if(r.did.split("#")[0]!==n)throw new Sr(4100,`Unknown DID: ${n}`);let o=await Aw(r.payload,n,t,r.protected);return{jws:Sw(o)}},did_decryptJWE:async({secretKey:n},t)=>{let r=dw((0,Fl.convertSecretKeyToX25519)(n));try{let i=await cw(t.jwe,r);return{cleartext:Ye(i,QC)}}catch(i){throw new Sr(-32e3,i.message)}}},wa=class{constructor(t){let{secretKey:r,publicKey:i}=(0,Fl.generateKeyPairFromSeed)(t),o=eO(i),s=Ew(tO);this._handle=async a=>await s({did:o,secretKey:r},a)}get isDidProvider(){return!0}async send(t){return await this._handle(t)}};var vm=He(qa(),1);Ac();var fm={};Ze(fm,{keyToDidDoc:()=>rO});function rO(n,t){let r=`did:key:${t}`,i=`${r}#${t}`;return{id:r,verificationMethod:[{id:i,type:"Secp256k1VerificationKey2018",controller:r,publicKeyBase58:Ye(n,"base58btc")}],authentication:[i],assertionMethod:[i],capabilityDelegation:[i],capabilityInvocation:[i]}}var cm={};Ze(cm,{keyToDidDoc:()=>iO});ys();var Mw=He(Yu(),1);function nO(n){let t=new Uint8Array(n.length+2);return t[0]=236,t[1]=1,t.set(n,2),`z${Ye(t,"base58btc")}`}function iO(n,t){let r=`did:key:${t}`,i=`${r}#${t}`,o=(0,Mw.convertPublicKeyToX25519)(n),s=`${r}#${nO(o)}`;return{id:r,verificationMethod:[{id:i,type:"Ed25519VerificationKey2018",controller:r,publicKeyBase58:Ye(n,"base58btc")}],authentication:[i],assertionMethod:[i],capabilityDelegation:[i],capabilityInvocation:[i],keyAgreement:[{id:s,type:"X25519KeyAgreementKey2019",controller:r,publicKeyBase58:Ye(o,"base58btc")}]}}var bm={};Ze(bm,{keyToDidDoc:()=>CO,pubKeyBytesToXY:()=>Yw});var ql={};Ze(ql,{ECPointDecompress:()=>TO});var Jw=He(Qf(),1);function xO(n){return n>=0?n:-n}function wO(n,t){if(typeof n=="number"&&(n=BigInt(n)),typeof t=="number"&&(t=BigInt(t)),n<=0n||t<=0n)throw new RangeError("a and b MUST be > 0");let r=0n,i=1n,o=1n,s=0n;for(;n!==0n;){let a=t/n,f=t%n,u=r-o*a,d=i-s*a;t=n,n=f,r=o,i=s,o=u,s=d}return{g:t,x:r,y:i}}function hm(n,t){if(typeof n=="number"&&(n=BigInt(n)),typeof t=="number"&&(t=BigInt(t)),t<=0n)throw new RangeError("n must be > 0");let r=n%t;return r<0n?r+t:r}function EO(n,t){let r=wO(hm(n,t),t);if(r.g!==1n)throw new RangeError(`${n.toString()} does not have inverse modulo ${t.toString()}`);return hm(r.x,t)}function ss(n,t,r){if(typeof n=="number"&&(n=BigInt(n)),typeof t=="number"&&(t=BigInt(t)),typeof r=="number"&&(r=BigInt(r)),r<=0n)throw new RangeError("n must be > 0");if(r===1n)return 0n;if(n=hm(n,r),t<0n)return EO(ss(n,xO(t),r),r);let i=1n;for(;t>0;)t%2n===1n&&(i=i*n%r),t=t/2n,n=n**2n%r;return i}var St={};Ze(St,{pubKeyBytesToHex:()=>_O,publicKeyHexToUint8ArrayPointPair:()=>Kw,publicKeyIntToUint8ArrayPointPair:()=>Gw,publicKeyIntToXY:()=>AO,publicKeyToXY:()=>SO,testHexString:()=>pm,testUint8Array:()=>Wi});var as=He(Qf(),1);Cc();function _O(n){if(!Wi(n))throw new TypeError("input must be a Uint8Array");return as.toString(n,"base16")}function SO(n){if(!pm(n))throw new TypeError("input must be string with characters 0-9,A-F,a-f");let t=Kw(n),r=wo.encode(t.xOctet).slice(1),i=wo.encode(t.yOctet).slice(1);return{xm:r,ym:i}}function Kw(n){if(!pm(n))throw new TypeError("input must be string with characters 0-9,A-F,a-f");let t=n.slice(0,n.length/2),r=n.slice(n.length/2,n.length),i=as.fromString(t,"base16"),o=as.fromString(r,"base16");return{xOctet:i,yOctet:o}}function pm(n){let t=/^[A-Fa-f0-9]+$/i;return!!(t.exec(n)!==null&&t.test(n)&&typeof n=="string")}function Wi(n){return n==null?!1:n.constructor===Uint8Array}function AO(n){if(n==null)throw new TypeError("input cannot be null or undefined.");if(typeof n!="object")throw new TypeError("Input must be an object with properties x and y");if(!Object.prototype.hasOwnProperty.call(n,"x")||!Object.prototype.hasOwnProperty.call(n,"y"))throw new Error("Input must have properties x and y");if(typeof n.x!="bigint"&&typeof n.y!="bigint")throw new Error("Input coordinates must be BigInt");let t=Gw(n),r=wo.encode(t.xOctet).slice(1),i=wo.encode(t.yOctet).slice(1);return{xm:r,ym:i}}function Gw(n){if(n==null)throw new TypeError("input cannot be null or undefined.");if(typeof n!="object")throw new TypeError("Input must be an object with properties x and y");if(!Object.prototype.hasOwnProperty.call(n,"x")||!Object.prototype.hasOwnProperty.call(n,"y"))throw new Error("Input must have properties x and y");if(typeof n.x!="bigint"&&typeof n.y!="bigint")throw new Error("Input coordinates must be BigInt");let t=n.x.toString(),r=n.y.toString(),i=as.fromString(t,"base10"),o=as.fromString(r,"base10");return{xOctet:i,yOctet:o}}function TO(n){if(!Wi(n))throw new TypeError("input must be a Uint8Array");let t=BigInt(2),r=t**256n-t**224n+t**192n+t**96n-1n,i=41058363725152142129326129780047268409114441015993725554835256314039467401291n,o=(r+1n)/4n,s=BigInt(n[0]-2),a=n.subarray(1),f=BigInt(Jw.toString(a,"base10")),u=f**3n-f*3n+i,d=ss(u,o,r);return d%2n!==s&&(d=r-d),{x:f,y:d}}var jl={};Ze(jl,{ECPointDecompress:()=>MO});var Vw=He(Qf(),1);function MO(n){if(!Wi(n))throw new TypeError("input must be a Uint8Array");let t=BigInt(2),r=t**384n-t**128n-t**96n+t**32n-1n,i=27580193559959705877849011840389048093056905856361568521428707301988689241309860865136260764883745107765439761230575n,o=(r+1n)/4n,s=BigInt(n[0]-2),a=n.subarray(1),f=BigInt(Vw.toString(a,"base10")),u=f**3n-f*3n+i,d=ss(u,o,r);return d%2n!==s&&(d=r-d),{x:f,y:d}}var Hl={};Ze(Hl,{ECPointDecompress:()=>kO});var Ww=He(Qf(),1);function kO(n){if(!Wi(n))throw new TypeError("input must be a Uint8Array");let r=BigInt(2)**521n-1n,i=1093849038073734274511112390766805569936207598951683748994586394495953116150735016013708737573759623248592132296706313309438452531591012912142327488478985984n,o=(r+1n)/4n,s=BigInt(n[0]-2),a=n.subarray(1),f=BigInt(Ww.toString(a,"base10")),u=f**3n-f*3n+i,d=ss(u,o,r);return d%2n!==s&&(d=r-d),{x:f,y:d}}function CO(n,t){let r=`did:key:${t}`,i=`${r}#${t}`,o=Yw(n);return{id:r,verificationMethod:[{id:i,type:"JsonWebKey2020",controller:r,publicKeyJwk:{kty:"EC",crv:"P-256",x:o.xm,y:o.ym}}],authentication:[i],assertionMethod:[i],capabilityDelegation:[i],capabilityInvocation:[i]}}function Yw(n){if(!St.testUint8Array(n))throw new TypeError("input must be a Uint8Array");let t=St.pubKeyBytesToHex(n),r=t.length/2;if(r==64)return St.publicKeyToXY(t);if(r==65&&t.slice(0,2)=="04"){let i=t.slice(2);return St.publicKeyToXY(i)}if(r==33&&(t.slice(0,2)=="03"||t.slice(0,2)=="02")){let i=Ge(t,"base16"),o=ql.ECPointDecompress(i);return St.publicKeyIntToXY(o)}throw new Error("Unexpected pubKeyBytes")}var gm={};Ze(gm,{keyToDidDoc:()=>OO,pubKeyBytesToXY:()=>Xw});function OO(n,t){let r=`did:key:${t}`,i=`${r}#${t}`,o=Xw(n);return{id:r,verificationMethod:[{id:i,type:"JsonWebKey2020",controller:r,publicKeyJwk:{kty:"EC",crv:"P-384",x:o.xm,y:o.ym}}],authentication:[i],assertionMethod:[i],capabilityDelegation:[i],capabilityInvocation:[i]}}function Xw(n){if(!St.testUint8Array(n))throw new TypeError("input must be a Uint8Array");let t=St.pubKeyBytesToHex(n),r=t.length/2;if(r==96)return St.publicKeyToXY(t);if(r==97&&t.slice(0,2)=="04"){let i=t.slice(2);return St.publicKeyToXY(i)}if(r==49&&(t.slice(0,2)=="03"||t.slice(0,2)=="02")){let i=Ge(t,"base16"),o=jl.ECPointDecompress(i);return St.publicKeyIntToXY(o)}throw new Error("Unexpected pubKeyBytes")}var ym={};Ze(ym,{keyToDidDoc:()=>DO,pubKeyBytesToXY:()=>Zw});function DO(n,t){let r=`did:key:${t}`,i=`${r}#${t}`,o=Zw(n);return{id:r,verificationMethod:[{id:i,type:"JsonWebKey2020",controller:r,publicKeyJwk:{kty:"EC",crv:"P-521",x:o.xm,y:o.ym}}],authentication:[i],assertionMethod:[i],capabilityDelegation:[i],capabilityInvocation:[i]}}function Zw(n){if(!St.testUint8Array(n))throw new TypeError("input must be a Uint8Array");let t=St.pubKeyBytesToHex(n);if(132<=t.length&&t.length<=134&&(t.slice(0,2)=="03"||t.slice(0,2)=="02")){let r=Ge(t,"base16"),i=Hl.ECPointDecompress(r);return St.publicKeyIntToXY(i)}throw new Error("Unexpected pubKeyBytes")}var RO="application/did+ld+json",Qw="application/did+json",IO={231:fm,237:cm,4608:bm,4609:gm,4610:ym};function xm(){return{key:async(n,t,r,i)=>{let o=i.accept||Qw,s={didResolutionMetadata:{contentType:o},didDocument:null,didDocumentMetadata:{}};try{let a=Rr.decode(t.id),f=vm.default.decode(a),u=a.slice(vm.default.decode.bytes),d=await IO[f].keyToDidDoc(u,t.id);o===RO?(d["@context"]="https://w3id.org/did/v1",s.didDocument=d):o===Qw?s.didDocument=d:(delete s.didResolutionMetadata.contentType,s.didResolutionMetadata.error="representationNotSupported")}catch(a){s.didResolutionMetadata.error="invalidDid",s.didResolutionMetadata.message=a.toString()}return s}}}var e4={getResolver:xm};var Sm=He(ei(),1);Yr();za();Jh();Cc();var NO=24;async function t4(n){let t=await Eo({value:n,codec:tn,hasher:Si});return{cid:t.cid,linkedBlock:t.bytes}}function PO(n,t=NO){let r=(t-n.length%t)%t,i=new Uint8Array(n.length+r);return i.set(n,0),i}async function LO(n){return(await Eo({value:n,codec:tn,hasher:Ic})).cid}function BO(n){if(n=Te.asCID(n),n.code!==As)throw new Error("CID codec must be dag-cbor");if(n.multihash.code!==Ic.code)throw new Error("CID must use identity multihash");return dd(n.multihash.digest)}async function r4(n,t){return PO((await LO(n)).bytes,t)}function n4(n){return BO(Te.decodeFirst(n)[0])}Yr();function i4(){return{eip191:async(n,t)=>{$O(n,t)}}}var UO=new Date("2022-09-20").valueOf();function $O(n,t){S0(n),zy(n,t);let i=[rp($o.fromCacao(n).toMessage(),n.s.s).toLowerCase()];if(Date.parse(n.p.iat)<=UO){let s=rp(Hy($o.fromCacao(n),"Ethereum"),n.s.s).toLowerCase();i.push(s)}let o=Sn.parse(n.p.iss.replace("did:pkh:","")).address.toLowerCase();if(!i.includes(o))throw new Error("Signature does not belong to issuer")}ys();Ka();var o4=He(ei(),1);ys();function s4(){return Ye((0,o4.randomBytes)(16),"base64")}var a4="base64pad",f4="base64url";function c4(n){return Ye(n,a4)}function u4(n){return Ye(n,f4)}function l4(n){return Ge(n,a4)}function zl(n){return JSON.parse(Ye(Ge(n,f4)))}function h4(n){if(n.signatures.length>1)throw new Error("Cant convert to compact jws");return`${n.signatures[0].protected}.${n.payload}.${n.signatures[0].signature}`}function d4(n,t){if(t){let r=t.toISOString().split(".")[0]+"Z";return`${n}?versionTime=${r}`}else return n}function p4(n){return n?Array.isArray(n)?n:[n]:[]}var FO={...i4()};function qO(n){return"registry"in n&&"cache"in n}var Yi=class{get capability(){if(!this._capability)throw new Error("DID has no capability attached");return this._capability}get hasCapability(){return this._capability!=null}get parent(){if(!this._parentId)throw new Error("DID has no parent DID");return this._parentId}get hasParent(){return this._parentId!=null}get id(){if(this._id==null)throw new Error("DID is not authenticated");return this._id}get authenticated(){return this._id!=null}withCapability(t){return new Yi({provider:this._client?.connection,resolver:this._resolver,capability:t,parent:this._parentId})}setProvider(t){if(this._client==null)this._client=new Zf(t);else if(this._client.connection!==t)throw new Error("A different provider is already set, create a new DID instance to use another provider")}setResolver(t,r){this._resolver=qO(t)?t:new sl(t,r)}async authenticate({provider:t,paths:r=[],aud:i}={}){if(t!=null&&this.setProvider(t),this._client==null)throw new Error("No provider available");let o=s4(),s=await this._client.request("did_authenticate",{nonce:o,aud:i,paths:r}),{kid:a}=await this.verifyJWS(s),f=zl(s.payload);if(!a.includes(f.did))throw new Error("Invalid authencation response, kid mismatch");if(f.nonce!==o)throw new Error("Invalid authencation response, wrong nonce");if(f.aud!==i)throw new Error("Invalid authencation response, wrong aud");if(f.exp<Date.now()/1e3)throw new Error("Invalid authencation response, expired");return this._id=f.did,this._id}async createJWS(t,r={}){if(this._client==null)throw new Error("No provider available");if(this._id==null)throw new Error("DID is not authenticated");if(this._capability){let o=this._capability.p.exp;if(o&&Date.parse(o)<Date.now())throw new Error("Capability is expired, cannot create a valid signature");let s=await vf.fromCacao(this._capability),a=Te.asCID(s.cid);if(!a)throw new Error("Capability CID of the JWS cannot be set to the capability payload cid as they are incompatible");r.protected=r.protected||{},r.protected.cap=`ipfs://${a?.toString()}`}let{jws:i}=await this._client.request("did_createJWS",{did:this._id,...r,payload:t});return i}async createDagJWS(t,r={}){let{cid:i,linkedBlock:o}=await t4(t),s=u4(i.bytes);Object.assign(r,{linkedBlock:c4(o)});let a=await this.createJWS(s,r),f=Te.asCID(i);if(!f)throw new Error("CID of the JWS cannot be set to the encoded payload cid as they are incompatible");if(a.link=f,this._capability){let u=await vf.fromCacao(this._capability);return{jws:a,linkedBlock:o,cacaoBlock:u.bytes}}return{jws:a,linkedBlock:o}}async verifyJWS(t,r={}){r=Object.assign({verifiers:FO},r),typeof t!="string"&&(t=h4(t));let i=zl(t.split(".")[0]).kid;if(!i)throw new Error('No "kid" found in jws');let o=await this.resolve(i);if(!r.disableTimecheck){let d=o.didDocumentMetadata?.nextUpdate;if(d){let y=r.revocationPhaseOutSecs?r.revocationPhaseOutSecs*1e3:0,C=new Date(d).valueOf()+y;if(!(r.atTime&&r.atTime.getTime()<C))throw new Error(`invalid_jws: signature authored with a revoked DID version: ${i}`)}let h=o.didDocumentMetadata?.updated;if(h&&r.atTime&&r.atTime.getTime()<new Date(h).valueOf())throw new Error(`invalid_jws: signature authored before creation of DID version: ${i}`)}let a=o.didDocument?.id;if(r.issuer&&r.issuer===r.capability?.p.iss&&a===r.capability.p.aud){if(!r.verifiers)throw new Error("Registered verifiers needed for CACAO");await Fo.verify(r.capability,{disableExpirationCheck:r.disableTimecheck,atTime:r.atTime?r.atTime:void 0,revocationPhaseOutSecs:r.revocationPhaseOutSecs,verifiers:r.verifiers??{}})}else if(r.issuer&&r.issuer!==a){let d=d4(r.issuer,r.atTime),y=(await this.resolve(d)).didDocument?.controller,C=p4(y);if(r.capability?.s&&r.capability.p.aud===a&&C.includes(r.capability.p.iss))await Fo.verify(r.capability,{atTime:r.atTime?r.atTime:void 0,revocationPhaseOutSecs:r.revocationPhaseOutSecs,verifiers:r.verifiers??{}});else if(!(a?C.includes(a):!1))throw new Error(`invalid_jws: not a valid verificationMethod for issuer: ${i}`)}let f=o.didDocument?.verificationMethod||[];fw(t,f);let u;try{u=zl(t.split(".")[1])}catch{}return{kid:i,payload:u,didResolutionResult:o}}async createJWE(t,r,i={}){let o=await lw(r,this._resolver);return uw(t,o,i.protectedHeader,i.aad)}async createDagJWE(t,r,i={}){let o=await r4(t);return this.createJWE(o,r,i)}async decryptJWE(t,r={}){if(this._client==null)throw new Error("No provider available");if(this._id==null)throw new Error("DID is not authenticated");let{cleartext:i}=await this._client.request("did_decryptJWE",{did:this._id,...r,jwe:t});return l4(i)}async decryptDagJWE(t){let r=await this.decryptJWE(t);return n4(r)}async resolve(t){let r=await this._resolver.resolve(t);if(r.didResolutionMetadata.error){let{error:i,message:o}=r.didResolutionMetadata,s=o?`, ${o}`:"";throw new Error(`Failed to resolve ${t}: ${i}${s}`)}return r}constructor({provider:t,resolver:r={},resolverOptions:i,capability:o,parent:s}={}){if(t!=null&&(this._client=new Zf(t)),o){if(this._capability=o,this._parentId=this._capability.p.iss,s&&this._parentId!==s)throw new Error("Capability issuer and parent not equal")}else s&&(this._parentId=s);this.setResolver(r,i)}};function jO(n,t){if(t.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function HO(n,t){return t.get?t.get.call(n):t.value}function zO(n,t,r){if(t.set)t.set.call(n,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}function b4(n,t,r){if(!t.has(n))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(n)}function Fn(n,t){var r=b4(n,t,"get");return HO(n,r)}function wm(n,t,r){jO(n,t),t.set(n,r)}function Em(n,t,r){var i=b4(n,t,"set");return zO(n,i,r),r}async function m4(n){let t=new wa(n||(0,Sm.randomBytes)(32)),r=new Yi({provider:t,resolver:e4.getResolver()});return await r.authenticate(),r}async function KO(n,t){let r=n.withCapability(t);return await r.authenticate(),r}function GO(n){return Ye(Ge(JSON.stringify(n)),"base64url")}function JO(n){return JSON.parse(Ye(Ge(n,"base64url")))}function VO(n){return Ye(n,"base64pad")}function WO(n){return Ge(n,"base64pad")}var ec=new WeakMap,_m=new WeakMap,Xi=new WeakMap,qn=class{static async authorize(t,r={}){if(!r.resources||r.resources.length===0)throw new Error("Required: resource argument option when authorizing");let i=r,o=(0,Sm.randomBytes)(32),s=await m4(o);if(i.uri=s.id,r.expiresInSecs){let u=new Date(Date.now()+r.expiresInSecs*1e3);i.expirationTime=u.toISOString()}let a=await t(r),f=await KO(s,a);return new qn({cacao:a,keySeed:o,did:f})}static async initDID(t,r){let i=t.withCapability(r);return await i.authenticate(),i}get did(){return Fn(this,ec)}serialize(){let t={sessionKeySeed:VO(Fn(this,_m)),cacao:Fn(this,Xi)};return GO(t)}static async fromSession(t){let{sessionKeySeed:r,cacao:i}=JO(t),o=WO(r),s=await m4(o),a=await qn.initDID(s,i);return new qn({cacao:i,keySeed:o,did:a})}get hasSession(){return!!Fn(this,Xi)&&!!Fn(this,ec)}get isExpired(){let t=Fn(this,Xi).p.exp;return t?Date.parse(t)<Date.now():!1}get expireInSecs(){let t=Fn(this,Xi).p.exp;if(!t)throw new Error("Session does not expire");let r=Date.parse(t)-Date.now();return r<0?0:r/1e3}get authorizations(){return Fn(this,Xi)?.p.resources??[]}get cacao(){return Fn(this,Xi)}isAuthorized(t){return!this.hasSession||this.isExpired?!1:t?t.every(r=>this.authorizations.includes(r)):!0}get id(){return Fn(this,ec).parent}constructor(t){wm(this,ec,{writable:!0,value:void 0}),wm(this,_m,{writable:!0,value:void 0}),wm(this,Xi,{writable:!0,value:void 0}),Em(this,_m,t.keySeed),Em(this,Xi,t.cacao),Em(this,ec,t.did)}};var y4=He(ei(),1);function Am(n,t,r){if(r==null&&(r=[]),n.request)return n.request({method:t,params:r}).then(i=>i,i=>{throw i});if(n.sendAsync||n.send){let i=(n.sendAsync?n.sendAsync:n.send).bind(n),o=YO(t,r);return new Promise((s,a)=>{i(o,(f,u)=>{if(f&&a(f),u.error){let d=new Error(u.error.message);d.code=u.error.code,d.data=u.error.data,a(d)}s(u.result)})})}else throw new Error("Unsupported provider; provider must implement one of the following methods: send, sendAsync, request")}function YO(n,t){return{jsonrpc:"2.0",id:1,method:n,params:t}}var XO="1",ZO="eip155",tc;(function(n){async function t(r,i){if(typeof window>"u")throw new Error("Web Auth method requires browser environment");let o=window.location.hostname;return async s=>(s.domain=o,v4(s,r,i))}n.getAuthMethod=t})(tc||(tc={}));var g4;(function(n){async function t(r,i,o){let s=o;return async a=>(a.domain=s,v4(a,r,i))}n.getAuthMethod=t})(g4||(g4={}));async function v4(n,t,r){let i=new Date,o=new Date(i.getTime()+7*24*60*60*1e3),s=new $o({domain:n.domain,address:r.address,statement:n.statement??"Give this application access to some of your data on Ceramic",uri:n.uri,version:XO,nonce:n.nonce??(0,y4.randomString)(10),issuedAt:i.toISOString(),expirationTime:n.expirationTime??o.toISOString(),chainId:r.chainId.reference,resources:n.resources});console.log("siweMessage =>",s);let a={method:"personal_sign",params:[s.signMessage(),r.address]},f;return"rpcProvider"in t?f=await t.sendAsync(a):f=await Am(t,"personal_sign",[s.signMessage(),r.address]),s.signature=f,Fo.fromSiweMessage(s)}async function QO(n){let t={method:"eth_chainId",params:[]},r;return"rpcProvider"in n?r=await n.sendAsync(t):r=await Am(n,"eth_chainId",[]),parseInt(r,16)}async function Tm(n,t){let r=await QO(n),i=`${ZO}:${r}`;return new Sn({address:t,chainId:i})}function rc(n,t){return function(){return n.apply(t,arguments)}}var{toString:w4}=Object.prototype,{getPrototypeOf:km}=Object,Cm=(n=>t=>{let r=w4.call(t);return n[r]||(n[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),bi=n=>(n=n.toLowerCase(),t=>Cm(t)===n),Gl=n=>t=>typeof t===n,{isArray:Ea}=Array,nc=Gl("undefined");function eD(n){return n!==null&&!nc(n)&&n.constructor!==null&&!nc(n.constructor)&&fs(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}var E4=bi("ArrayBuffer");function tD(n){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(n):t=n&&n.buffer&&E4(n.buffer),t}var rD=Gl("string"),fs=Gl("function"),_4=Gl("number"),Om=n=>n!==null&&typeof n=="object",nD=n=>n===!0||n===!1,Kl=n=>{if(Cm(n)!=="object")return!1;let t=km(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},iD=bi("Date"),oD=bi("File"),sD=bi("Blob"),aD=bi("FileList"),fD=n=>Om(n)&&fs(n.pipe),cD=n=>{let t="[object FormData]";return n&&(typeof FormData=="function"&&n instanceof FormData||w4.call(n)===t||fs(n.toString)&&n.toString()===t)},uD=bi("URLSearchParams"),lD=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ic(n,t,{allOwnKeys:r=!1}={}){if(n===null||typeof n>"u")return;let i,o;if(typeof n!="object"&&(n=[n]),Ea(n))for(i=0,o=n.length;i<o;i++)t.call(null,n[i],i,n);else{let s=r?Object.getOwnPropertyNames(n):Object.keys(n),a=s.length,f;for(i=0;i<a;i++)f=s[i],t.call(null,n[f],f,n)}}function S4(n,t){t=t.toLowerCase();let r=Object.keys(n),i=r.length,o;for(;i-- >0;)if(o=r[i],t===o.toLowerCase())return o;return null}var A4=typeof self>"u"?typeof global>"u"?void 0:global:self,T4=n=>!nc(n)&&n!==A4;function Mm(){let{caseless:n}=T4(this)&&this||{},t={},r=(i,o)=>{let s=n&&S4(t,o)||o;Kl(t[s])&&Kl(i)?t[s]=Mm(t[s],i):Kl(i)?t[s]=Mm({},i):Ea(i)?t[s]=i.slice():t[s]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&ic(arguments[i],r);return t}var hD=(n,t,r,{allOwnKeys:i}={})=>(ic(t,(o,s)=>{r&&fs(o)?n[s]=rc(o,r):n[s]=o},{allOwnKeys:i}),n),dD=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),pD=(n,t,r,i)=>{n.prototype=Object.create(t.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:t.prototype}),r&&Object.assign(n.prototype,r)},mD=(n,t,r,i)=>{let o,s,a,f={};if(t=t||{},n==null)return t;do{for(o=Object.getOwnPropertyNames(n),s=o.length;s-- >0;)a=o[s],(!i||i(a,n,t))&&!f[a]&&(t[a]=n[a],f[a]=!0);n=r!==!1&&km(n)}while(n&&(!r||r(n,t))&&n!==Object.prototype);return t},bD=(n,t,r)=>{n=String(n),(r===void 0||r>n.length)&&(r=n.length),r-=t.length;let i=n.indexOf(t,r);return i!==-1&&i===r},gD=n=>{if(!n)return null;if(Ea(n))return n;let t=n.length;if(!_4(t))return null;let r=new Array(t);for(;t-- >0;)r[t]=n[t];return r},yD=(n=>t=>n&&t instanceof n)(typeof Uint8Array<"u"&&km(Uint8Array)),vD=(n,t)=>{let i=(n&&n[Symbol.iterator]).call(n),o;for(;(o=i.next())&&!o.done;){let s=o.value;t.call(n,s[0],s[1])}},xD=(n,t)=>{let r,i=[];for(;(r=n.exec(t))!==null;)i.push(r);return i},wD=bi("HTMLFormElement"),ED=n=>n.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,function(r,i,o){return i.toUpperCase()+o}),x4=(({hasOwnProperty:n})=>(t,r)=>n.call(t,r))(Object.prototype),_D=bi("RegExp"),M4=(n,t)=>{let r=Object.getOwnPropertyDescriptors(n),i={};ic(r,(o,s)=>{t(o,s,n)!==!1&&(i[s]=o)}),Object.defineProperties(n,i)},SD=n=>{M4(n,(t,r)=>{if(fs(n)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;let i=n[r];if(fs(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},AD=(n,t)=>{let r={},i=o=>{o.forEach(s=>{r[s]=!0})};return Ea(n)?i(n):i(String(n).split(t)),r},TD=()=>{},MD=(n,t)=>(n=+n,Number.isFinite(n)?n:t),kD=n=>{let t=new Array(10),r=(i,o)=>{if(Om(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[o]=i;let s=Ea(i)?[]:{};return ic(i,(a,f)=>{let u=r(a,o+1);!nc(u)&&(s[f]=u)}),t[o]=void 0,s}}return i};return r(n,0)},fe={isArray:Ea,isArrayBuffer:E4,isBuffer:eD,isFormData:cD,isArrayBufferView:tD,isString:rD,isNumber:_4,isBoolean:nD,isObject:Om,isPlainObject:Kl,isUndefined:nc,isDate:iD,isFile:oD,isBlob:sD,isRegExp:_D,isFunction:fs,isStream:fD,isURLSearchParams:uD,isTypedArray:yD,isFileList:aD,forEach:ic,merge:Mm,extend:hD,trim:lD,stripBOM:dD,inherits:pD,toFlatObject:mD,kindOf:Cm,kindOfTest:bi,endsWith:bD,toArray:gD,forEachEntry:vD,matchAll:xD,isHTMLForm:wD,hasOwnProperty:x4,hasOwnProp:x4,reduceDescriptors:M4,freezeMethods:SD,toObjectSet:AD,toCamelCase:ED,noop:TD,toFiniteNumber:MD,findKey:S4,global:A4,isContextDefined:T4,toJSONObject:kD};function _a(n,t,r,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),i&&(this.request=i),o&&(this.response=o)}fe.inherits(_a,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:fe.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var k4=_a.prototype,C4={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{C4[n]={value:n}});Object.defineProperties(_a,C4);Object.defineProperty(k4,"isAxiosError",{value:!0});_a.from=(n,t,r,i,o,s)=>{let a=Object.create(k4);return fe.toFlatObject(n,a,function(u){return u!==Error.prototype},f=>f!=="isAxiosError"),_a.call(a,n.message,t,r,i,o),a.cause=n,a.name=n.name,s&&Object.assign(a,s),a};var Qe=_a;var R4=He(D4(),1),I4=R4.default;function Dm(n){return fe.isPlainObject(n)||fe.isArray(n)}function P4(n){return fe.endsWith(n,"[]")?n.slice(0,-2):n}function N4(n,t,r){return n?n.concat(t).map(function(o,s){return o=P4(o),!r&&s?"["+o+"]":o}).join(r?".":""):t}function CD(n){return fe.isArray(n)&&!n.some(Dm)}var OD=fe.toFlatObject(fe,{},null,function(t){return/^is[A-Z]/.test(t)});function DD(n){return n&&fe.isFunction(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator]}function RD(n,t,r){if(!fe.isObject(n))throw new TypeError("target must be an object");t=t||new(I4||FormData),r=fe.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(M,F){return!fe.isUndefined(F[M])});let i=r.metaTokens,o=r.visitor||h,s=r.dots,a=r.indexes,u=(r.Blob||typeof Blob<"u"&&Blob)&&DD(t);if(!fe.isFunction(o))throw new TypeError("visitor must be a function");function d(A){if(A===null)return"";if(fe.isDate(A))return A.toISOString();if(!u&&fe.isBlob(A))throw new Qe("Blob is not supported. Use a Buffer instead.");return fe.isArrayBuffer(A)||fe.isTypedArray(A)?u&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function h(A,M,F){let D=A;if(A&&!F&&typeof A=="object"){if(fe.endsWith(M,"{}"))M=i?M:M.slice(0,-2),A=JSON.stringify(A);else if(fe.isArray(A)&&CD(A)||fe.isFileList(A)||fe.endsWith(M,"[]")&&(D=fe.toArray(A)))return M=P4(M),D.forEach(function(K,j){!(fe.isUndefined(K)||K===null)&&t.append(a===!0?N4([M],j,s):a===null?M:M+"[]",d(K))}),!1}return Dm(A)?!0:(t.append(N4(F,M,s),d(A)),!1)}let y=[],C=Object.assign(OD,{defaultVisitor:h,convertValue:d,isVisitable:Dm});function O(A,M){if(!fe.isUndefined(A)){if(y.indexOf(A)!==-1)throw Error("Circular reference detected in "+M.join("."));y.push(A),fe.forEach(A,function(D,$){(!(fe.isUndefined(D)||D===null)&&o.call(t,D,fe.isString($)?$.trim():$,M,C))===!0&&O(D,M?M.concat($):[$])}),y.pop()}}if(!fe.isObject(n))throw new TypeError("data must be an object");return O(n),t}var Zi=RD;function L4(n){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function B4(n,t){this._pairs=[],n&&Zi(n,this,t)}var U4=B4.prototype;U4.append=function(t,r){this._pairs.push([t,r])};U4.toString=function(t){let r=t?function(i){return t.call(this,i,L4)}:L4;return this._pairs.map(function(o){return r(o[0])+"="+r(o[1])},"").join("&")};var Jl=B4;function ID(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function oc(n,t,r){if(!t)return n;let i=r&&r.encode||ID,o=r&&r.serialize,s;if(o?s=o(t,r):s=fe.isURLSearchParams(t)?t.toString():new Jl(t,r).toString(i),s){let a=n.indexOf("#");a!==-1&&(n=n.slice(0,a)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}var Rm=class{constructor(){this.handlers=[]}use(t,r,i){return this.handlers.push({fulfilled:t,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){fe.forEach(this.handlers,function(i){i!==null&&t(i)})}},Im=Rm;var Vl={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var $4=typeof URLSearchParams<"u"?URLSearchParams:Jl;var F4=FormData;var ND=(()=>{let n;return typeof navigator<"u"&&((n=navigator.product)==="ReactNative"||n==="NativeScript"||n==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),PD=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Qt={isBrowser:!0,classes:{URLSearchParams:$4,FormData:F4,Blob},isStandardBrowserEnv:ND,isStandardBrowserWebWorkerEnv:PD,protocols:["http","https","file","blob","url","data"]};function Nm(n,t){return Zi(n,new Qt.classes.URLSearchParams,Object.assign({visitor:function(r,i,o,s){return Qt.isNode&&fe.isBuffer(r)?(this.append(i,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function LD(n){return fe.matchAll(/\w+|\[(\w*)]/g,n).map(t=>t[0]==="[]"?"":t[1]||t[0])}function BD(n){let t={},r=Object.keys(n),i,o=r.length,s;for(i=0;i<o;i++)s=r[i],t[s]=n[s];return t}function UD(n){function t(r,i,o,s){let a=r[s++],f=Number.isFinite(+a),u=s>=r.length;return a=!a&&fe.isArray(o)?o.length:a,u?(fe.hasOwnProp(o,a)?o[a]=[o[a],i]:o[a]=i,!f):((!o[a]||!fe.isObject(o[a]))&&(o[a]=[]),t(r,i,o[a],s)&&fe.isArray(o[a])&&(o[a]=BD(o[a])),!f)}if(fe.isFormData(n)&&fe.isFunction(n.entries)){let r={};return fe.forEachEntry(n,(i,o)=>{t(LD(i),o,r,0)}),r}return null}var Wl=UD;var $D={"Content-Type":void 0};function FD(n,t,r){if(fe.isString(n))try{return(t||JSON.parse)(n),fe.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(r||JSON.stringify)(n)}var Yl={transitional:Vl,adapter:["xhr","http"],transformRequest:[function(t,r){let i=r.getContentType()||"",o=i.indexOf("application/json")>-1,s=fe.isObject(t);if(s&&fe.isHTMLForm(t)&&(t=new FormData(t)),fe.isFormData(t))return o&&o?JSON.stringify(Wl(t)):t;if(fe.isArrayBuffer(t)||fe.isBuffer(t)||fe.isStream(t)||fe.isFile(t)||fe.isBlob(t))return t;if(fe.isArrayBufferView(t))return t.buffer;if(fe.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let f;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Nm(t,this.formSerializer).toString();if((f=fe.isFileList(t))||i.indexOf("multipart/form-data")>-1){let u=this.env&&this.env.FormData;return Zi(f?{"files[]":t}:t,u&&new u,this.formSerializer)}}return s||o?(r.setContentType("application/json",!1),FD(t)):t}],transformResponse:[function(t){let r=this.transitional||Yl.transitional,i=r&&r.forcedJSONParsing,o=this.responseType==="json";if(t&&fe.isString(t)&&(i&&!this.responseType||o)){let a=!(r&&r.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(f){if(a)throw f.name==="SyntaxError"?Qe.from(f,Qe.ERR_BAD_RESPONSE,this,null,this.response):f}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Qt.classes.FormData,Blob:Qt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};fe.forEach(["delete","get","head"],function(t){Yl.headers[t]={}});fe.forEach(["post","put","patch"],function(t){Yl.headers[t]=fe.merge($D)});var Sa=Yl;var qD=fe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),q4=n=>{let t={},r,i,o;return n&&n.split(`
`).forEach(function(a){o=a.indexOf(":"),r=a.substring(0,o).trim().toLowerCase(),i=a.substring(o+1).trim(),!(!r||t[r]&&qD[r])&&(r==="set-cookie"?t[r]?t[r].push(i):t[r]=[i]:t[r]=t[r]?t[r]+", "+i:i)}),t};var j4=Symbol("internals");function sc(n){return n&&String(n).trim().toLowerCase()}function Xl(n){return n===!1||n==null?n:fe.isArray(n)?n.map(Xl):String(n)}function jD(n){let t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,i;for(;i=r.exec(n);)t[i[1]]=i[2];return t}function HD(n){return/^[-_a-zA-Z]+$/.test(n.trim())}function H4(n,t,r,i){if(fe.isFunction(i))return i.call(this,t,r);if(fe.isString(t)){if(fe.isString(i))return t.indexOf(i)!==-1;if(fe.isRegExp(i))return i.test(t)}}function zD(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,i)=>r.toUpperCase()+i)}function KD(n,t){let r=fe.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+r,{value:function(o,s,a){return this[i].call(this,t,o,s,a)},configurable:!0})})}var Aa=class{constructor(t){t&&this.set(t)}set(t,r,i){let o=this;function s(f,u,d){let h=sc(u);if(!h)throw new Error("header name must be a non-empty string");let y=fe.findKey(o,h);(!y||o[y]===void 0||d===!0||d===void 0&&o[y]!==!1)&&(o[y||u]=Xl(f))}let a=(f,u)=>fe.forEach(f,(d,h)=>s(d,h,u));return fe.isPlainObject(t)||t instanceof this.constructor?a(t,r):fe.isString(t)&&(t=t.trim())&&!HD(t)?a(q4(t),r):t!=null&&s(r,t,i),this}get(t,r){if(t=sc(t),t){let i=fe.findKey(this,t);if(i){let o=this[i];if(!r)return o;if(r===!0)return jD(o);if(fe.isFunction(r))return r.call(this,o,i);if(fe.isRegExp(r))return r.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=sc(t),t){let i=fe.findKey(this,t);return!!(i&&(!r||H4(this,this[i],i,r)))}return!1}delete(t,r){let i=this,o=!1;function s(a){if(a=sc(a),a){let f=fe.findKey(i,a);f&&(!r||H4(i,i[f],f,r))&&(delete i[f],o=!0)}}return fe.isArray(t)?t.forEach(s):s(t),o}clear(){return Object.keys(this).forEach(this.delete.bind(this))}normalize(t){let r=this,i={};return fe.forEach(this,(o,s)=>{let a=fe.findKey(i,s);if(a){r[a]=Xl(o),delete r[s];return}let f=t?zD(s):String(s).trim();f!==s&&delete r[s],r[f]=Xl(o),i[f]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){let r=Object.create(null);return fe.forEach(this,(i,o)=>{i!=null&&i!==!1&&(r[o]=t&&fe.isArray(i)?i.join(", "):i)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){let i=new this(t);return r.forEach(o=>i.set(o)),i}static accessor(t){let i=(this[j4]=this[j4]={accessors:{}}).accessors,o=this.prototype;function s(a){let f=sc(a);i[f]||(KD(o,a),i[f]=!0)}return fe.isArray(t)?t.forEach(s):s(t),this}};Aa.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]);fe.freezeMethods(Aa.prototype);fe.freezeMethods(Aa);var ir=Aa;function ac(n,t){let r=this||Sa,i=t||r,o=ir.from(i.headers),s=i.data;return fe.forEach(n,function(f){s=f.call(r,s,o.normalize(),t?t.status:void 0)}),o.normalize(),s}function fc(n){return!!(n&&n.__CANCEL__)}function z4(n,t,r){Qe.call(this,n??"canceled",Qe.ERR_CANCELED,t,r),this.name="CanceledError"}fe.inherits(z4,Qe,{__CANCEL__:!0});var Qi=z4;var K4=null;function Pm(n,t,r){let i=r.config.validateStatus;!r.status||!i||i(r.status)?n(r):t(new Qe("Request failed with status code "+r.status,[Qe.ERR_BAD_REQUEST,Qe.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}var G4=Qt.isStandardBrowserEnv?function(){return{write:function(r,i,o,s,a,f){let u=[];u.push(r+"="+encodeURIComponent(i)),fe.isNumber(o)&&u.push("expires="+new Date(o).toGMTString()),fe.isString(s)&&u.push("path="+s),fe.isString(a)&&u.push("domain="+a),f===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(r){let i=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Lm(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Bm(n,t){return t?n.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):n}function cc(n,t){return n&&!Lm(t)?Bm(n,t):t}var J4=Qt.isStandardBrowserEnv?function(){let t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),i;function o(s){let a=s;return t&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return i=o(window.location.href),function(a){let f=fe.isString(a)?o(a):a;return f.protocol===i.protocol&&f.host===i.host}}():function(){return function(){return!0}}();function Um(n){let t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return t&&t[1]||""}function GD(n,t){n=n||10;let r=new Array(n),i=new Array(n),o=0,s=0,a;return t=t!==void 0?t:1e3,function(u){let d=Date.now(),h=i[s];a||(a=d),r[o]=u,i[o]=d;let y=s,C=0;for(;y!==o;)C+=r[y++],y=y%n;if(o=(o+1)%n,o===s&&(s=(s+1)%n),d-a<t)return;let O=h&&d-h;return O?Math.round(C*1e3/O):void 0}}var V4=GD;function W4(n,t){let r=0,i=V4(50,250);return o=>{let s=o.loaded,a=o.lengthComputable?o.total:void 0,f=s-r,u=i(f),d=s<=a;r=s;let h={loaded:s,total:a,progress:a?s/a:void 0,bytes:f,rate:u||void 0,estimated:u&&a&&d?(a-s)/u:void 0,event:o};h[t?"download":"upload"]=!0,n(h)}}var JD=typeof XMLHttpRequest<"u",Y4=JD&&function(n){return new Promise(function(r,i){let o=n.data,s=ir.from(n.headers).normalize(),a=n.responseType,f;function u(){n.cancelToken&&n.cancelToken.unsubscribe(f),n.signal&&n.signal.removeEventListener("abort",f)}fe.isFormData(o)&&(Qt.isStandardBrowserEnv||Qt.isStandardBrowserWebWorkerEnv)&&s.setContentType(!1);let d=new XMLHttpRequest;if(n.auth){let O=n.auth.username||"",A=n.auth.password?unescape(encodeURIComponent(n.auth.password)):"";s.set("Authorization","Basic "+btoa(O+":"+A))}let h=cc(n.baseURL,n.url);d.open(n.method.toUpperCase(),oc(h,n.params,n.paramsSerializer),!0),d.timeout=n.timeout;function y(){if(!d)return;let O=ir.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),M={data:!a||a==="text"||a==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:O,config:n,request:d};Pm(function(D){r(D),u()},function(D){i(D),u()},M),d=null}if("onloadend"in d?d.onloadend=y:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(y)},d.onabort=function(){d&&(i(new Qe("Request aborted",Qe.ECONNABORTED,n,d)),d=null)},d.onerror=function(){i(new Qe("Network Error",Qe.ERR_NETWORK,n,d)),d=null},d.ontimeout=function(){let A=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded",M=n.transitional||Vl;n.timeoutErrorMessage&&(A=n.timeoutErrorMessage),i(new Qe(A,M.clarifyTimeoutError?Qe.ETIMEDOUT:Qe.ECONNABORTED,n,d)),d=null},Qt.isStandardBrowserEnv){let O=(n.withCredentials||J4(h))&&n.xsrfCookieName&&G4.read(n.xsrfCookieName);O&&s.set(n.xsrfHeaderName,O)}o===void 0&&s.setContentType(null),"setRequestHeader"in d&&fe.forEach(s.toJSON(),function(A,M){d.setRequestHeader(M,A)}),fe.isUndefined(n.withCredentials)||(d.withCredentials=!!n.withCredentials),a&&a!=="json"&&(d.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&d.addEventListener("progress",W4(n.onDownloadProgress,!0)),typeof n.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",W4(n.onUploadProgress)),(n.cancelToken||n.signal)&&(f=O=>{d&&(i(!O||O.type?new Qi(null,n,d):O),d.abort(),d=null)},n.cancelToken&&n.cancelToken.subscribe(f),n.signal&&(n.signal.aborted?f():n.signal.addEventListener("abort",f)));let C=Um(h);if(C&&Qt.protocols.indexOf(C)===-1){i(new Qe("Unsupported protocol "+C+":",Qe.ERR_BAD_REQUEST,n));return}d.send(o||null)})};var Zl={http:K4,xhr:Y4};fe.forEach(Zl,(n,t)=>{if(n){try{Object.defineProperty(n,"name",{value:t})}catch{}Object.defineProperty(n,"adapterName",{value:t})}});var X4={getAdapter:n=>{n=fe.isArray(n)?n:[n];let{length:t}=n,r,i;for(let o=0;o<t&&(r=n[o],!(i=fe.isString(r)?Zl[r.toLowerCase()]:r));o++);if(!i)throw i===!1?new Qe(`Adapter ${r} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(fe.hasOwnProp(Zl,r)?`Adapter '${r}' is not available in the build`:`Unknown adapter '${r}'`);if(!fe.isFunction(i))throw new TypeError("adapter is not a function");return i},adapters:Zl};function $m(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Qi(null,n)}function Ql(n){return $m(n),n.headers=ir.from(n.headers),n.data=ac.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),X4.getAdapter(n.adapter||Sa.adapter)(n).then(function(i){return $m(n),i.data=ac.call(n,n.transformResponse,i),i.headers=ir.from(i.headers),i},function(i){return fc(i)||($m(n),i&&i.response&&(i.response.data=ac.call(n,n.transformResponse,i.response),i.response.headers=ir.from(i.response.headers))),Promise.reject(i)})}var Z4=n=>n instanceof ir?n.toJSON():n;function gi(n,t){t=t||{};let r={};function i(d,h,y){return fe.isPlainObject(d)&&fe.isPlainObject(h)?fe.merge.call({caseless:y},d,h):fe.isPlainObject(h)?fe.merge({},h):fe.isArray(h)?h.slice():h}function o(d,h,y){if(fe.isUndefined(h)){if(!fe.isUndefined(d))return i(void 0,d,y)}else return i(d,h,y)}function s(d,h){if(!fe.isUndefined(h))return i(void 0,h)}function a(d,h){if(fe.isUndefined(h)){if(!fe.isUndefined(d))return i(void 0,d)}else return i(void 0,h)}function f(d,h,y){if(y in t)return i(d,h);if(y in n)return i(void 0,d)}let u={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:f,headers:(d,h)=>o(Z4(d),Z4(h),!0)};return fe.forEach(Object.keys(n).concat(Object.keys(t)),function(h){let y=u[h]||o,C=y(n[h],t[h],h);fe.isUndefined(C)&&y!==f||(r[h]=C)}),r}var eh="1.2.1";var Fm={};["object","boolean","number","function","string","symbol"].forEach((n,t)=>{Fm[n]=function(i){return typeof i===n||"a"+(t<1?"n ":" ")+n}});var Q4={};Fm.transitional=function(t,r,i){function o(s,a){return"[Axios v"+eh+"] Transitional option '"+s+"'"+a+(i?". "+i:"")}return(s,a,f)=>{if(t===!1)throw new Qe(o(a," has been removed"+(r?" in "+r:"")),Qe.ERR_DEPRECATED);return r&&!Q4[a]&&(Q4[a]=!0,console.warn(o(a," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(s,a,f):!0}};function VD(n,t,r){if(typeof n!="object")throw new Qe("options must be an object",Qe.ERR_BAD_OPTION_VALUE);let i=Object.keys(n),o=i.length;for(;o-- >0;){let s=i[o],a=t[s];if(a){let f=n[s],u=f===void 0||a(f,s,n);if(u!==!0)throw new Qe("option "+s+" must be "+u,Qe.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Qe("Unknown option "+s,Qe.ERR_BAD_OPTION)}}var th={assertOptions:VD,validators:Fm};var eo=th.validators,Ta=class{constructor(t){this.defaults=t,this.interceptors={request:new Im,response:new Im}}request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=gi(this.defaults,r);let{transitional:i,paramsSerializer:o,headers:s}=r;i!==void 0&&th.assertOptions(i,{silentJSONParsing:eo.transitional(eo.boolean),forcedJSONParsing:eo.transitional(eo.boolean),clarifyTimeoutError:eo.transitional(eo.boolean)},!1),o!==void 0&&th.assertOptions(o,{encode:eo.function,serialize:eo.function},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a;a=s&&fe.merge(s.common,s[r.method]),a&&fe.forEach(["delete","get","head","post","put","patch","common"],A=>{delete s[A]}),r.headers=ir.concat(a,s);let f=[],u=!0;this.interceptors.request.forEach(function(M){typeof M.runWhen=="function"&&M.runWhen(r)===!1||(u=u&&M.synchronous,f.unshift(M.fulfilled,M.rejected))});let d=[];this.interceptors.response.forEach(function(M){d.push(M.fulfilled,M.rejected)});let h,y=0,C;if(!u){let A=[Ql.bind(this),void 0];for(A.unshift.apply(A,f),A.push.apply(A,d),C=A.length,h=Promise.resolve(r);y<C;)h=h.then(A[y++],A[y++]);return h}C=f.length;let O=r;for(y=0;y<C;){let A=f[y++],M=f[y++];try{O=A(O)}catch(F){M.call(this,F);break}}try{h=Ql.call(this,O)}catch(A){return Promise.reject(A)}for(y=0,C=d.length;y<C;)h=h.then(d[y++],d[y++]);return h}getUri(t){t=gi(this.defaults,t);let r=cc(t.baseURL,t.url);return oc(r,t.params,t.paramsSerializer)}};fe.forEach(["delete","get","head","options"],function(t){Ta.prototype[t]=function(r,i){return this.request(gi(i||{},{method:t,url:r,data:(i||{}).data}))}});fe.forEach(["post","put","patch"],function(t){function r(i){return function(s,a,f){return this.request(gi(f||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}Ta.prototype[t]=r(),Ta.prototype[t+"Form"]=r(!0)});var uc=Ta;var lc=class{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});let i=this;this.promise.then(o=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](o);i._listeners=null}),this.promise.then=o=>{let s,a=new Promise(f=>{i.subscribe(f),s=f}).then(o);return a.cancel=function(){i.unsubscribe(s)},a},t(function(s,a,f){i.reason||(i.reason=new Qi(s,a,f),r(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;let r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}static source(){let t;return{token:new lc(function(o){t=o}),cancel:t}}},e5=lc;function qm(n){return function(r){return n.apply(null,r)}}function jm(n){return fe.isObject(n)&&n.isAxiosError===!0}function t5(n){let t=new uc(n),r=rc(uc.prototype.request,t);return fe.extend(r,uc.prototype,t,{allOwnKeys:!0}),fe.extend(r,t,null,{allOwnKeys:!0}),r.create=function(o){return t5(gi(n,o))},r}var Nt=t5(Sa);Nt.Axios=uc;Nt.CanceledError=Qi;Nt.CancelToken=e5;Nt.isCancel=fc;Nt.VERSION=eh;Nt.toFormData=Zi;Nt.AxiosError=Qe;Nt.Cancel=Nt.CanceledError;Nt.all=function(t){return Promise.all(t)};Nt.spread=qm;Nt.isAxiosError=jm;Nt.mergeConfig=gi;Nt.AxiosHeaders=ir;Nt.formToJSON=n=>Wl(fe.isHTMLForm(n)?new FormData(n):n);Nt.default=Nt;var rh=Nt;var{Axios:dV,AxiosError:pV,CanceledError:mV,isCancel:bV,CancelToken:gV,VERSION:yV,all:vV,Cancel:xV,isAxiosError:wV,spread:EV,toFormData:_V,AxiosHeaders:SV,formToJSON:AV,mergeConfig:TV}=rh;var jn=class extends ft{constructor(t,r,i){super(o=>{this.state$.observers.length===0&&(this.periodicSubscription=Do(0,i).pipe(throttle(()=>this._syncState(this.id,{sync:mt.PREFER_CACHE}))).subscribe()),this.state$.subscribe(o).add(()=>{this.state$.observers.length===0&&this.periodicSubscription?.unsubscribe()})}),this.state$=new sa(t),this._apiUrl=new URL(r)}get value(){return this.state$.value}get state(){return this.state$.value}next(t){this.state$.next(t)}async _syncState(t,r){let i=await jn._load(t,this._apiUrl,r);this.state$.next(Xe.deserializeState(i))}get id(){return new StreamID(this.state$.value.type,this.state$.value.log[0].cid)}static async createFromGenesis(t,r,i,o,s){let a=new URL("./streams",t),{state:f}=await fetchJson(a,{method:"post",body:{type:r,genesis:Xe.serializeCommit(i),opts:o}});return new jn(Xe.deserializeState(f),t,s)}static async applyCommit(t,r,i,o,s){let a=new URL("./commits",t),{state:f}=await fetchJson(a,{method:"post",body:{streamId:r.toString(),commit:Xe.serializeCommit(i),opts:o}});return new jn(Xe.deserializeState(f),t,s)}static async _load(t,r,i){let o=serializeObjectToSearchParams(new URL(`./streams/${t}`,r),i),{state:s}=await fetchJson(o);return s}static async load(t,r,i,o){let s=await jn._load(t,r,o);return new jn(Xe.deserializeState(s),r,i)}static async loadStreamCommits(t,r){let i=new URL(`./commits/${t}`,r),{commits:o}=await fetchJson(i);return o.map(s=>({cid:s.cid,value:Xe.deserializeCommit(s.value)}))}complete(){this.state$.complete()}};var r5="1.35.7";var Hm={"X-Client-Info":`supabase-js/${r5}`},n5="supabase.auth.token";function i5(n){return n.replace(/\/$/,"")}var o5=()=>typeof window<"u";var s5="1.24.0";var a5="http://localhost:9999";var f5={"X-Client-Info":`gotrue-js/${s5}`},hc=10,yi={ERROR_MESSAGE:"Request Failed",MAX_RETRIES:10,RETRY_INTERVAL:2},Ma="supabase.auth.token",c5={name:"sb",lifetime:60*60*8,domain:"",path:"/",sameSite:"lax"};var dc=function(n,t,r,i){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function f(h){try{d(i.next(h))}catch(y){a(y)}}function u(h){try{d(i.throw(h))}catch(y){a(y)}}function d(h){h.done?s(h.value):o(h.value).then(f,u)}d((i=i.apply(n,t||[])).next())})},WD=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),YD=(n,t)=>{if(!n?.status)return t({message:yi.ERROR_MESSAGE});if(typeof n.json!="function")return t(n);n.json().then(r=>t({message:WD(r),status:n?.status||500}))},XD=(n,t,r)=>{let i={method:n,headers:t?.headers||{}};return n==="GET"||(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(r)),i};function nh(n,t,r,i,o){return dc(this,void 0,void 0,function*(){return new Promise((s,a)=>{n(r,XD(t,i,o)).then(f=>{if(!f.ok)throw f;return i?.noResolveJson?s:f.json()}).then(f=>s(f)).catch(f=>YD(f,a))})})}function ih(n,t,r){return dc(this,void 0,void 0,function*(){return nh(n,"GET",t,r)})}function er(n,t,r,i){return dc(this,void 0,void 0,function*(){return nh(n,"POST",t,i,r)})}function zm(n,t,r,i){return dc(this,void 0,void 0,function*(){return nh(n,"PUT",t,i,r)})}function u5(n,t,r,i){return dc(this,void 0,void 0,function*(){return nh(n,"DELETE",t,i,r)})}function ZD(n,t,r){let i=r||{},o=encodeURIComponent,s=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;if(typeof o!="function")throw new TypeError("option encode is invalid");if(!s.test(n))throw new TypeError("argument name is invalid");let a=o(t);if(a&&!s.test(a))throw new TypeError("argument val is invalid");let f=n+"="+a;if(i.maxAge!=null){let u=i.maxAge-0;if(isNaN(u)||!isFinite(u))throw new TypeError("option maxAge is invalid");f+="; Max-Age="+Math.floor(u)}if(i.domain){if(!s.test(i.domain))throw new TypeError("option domain is invalid");f+="; Domain="+i.domain}if(i.path){if(!s.test(i.path))throw new TypeError("option path is invalid");f+="; Path="+i.path}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");f+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(f+="; HttpOnly"),i.secure&&(f+="; Secure"),i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case"lax":f+="; SameSite=Lax";break;case"strict":f+="; SameSite=Strict";break;case"none":f+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return f}function QD(n){if(!n||!n.headers||!n.headers.host)throw new Error('The "host" request header is not available');let t=n.headers.host.indexOf(":")>-1&&n.headers.host.split(":")[0]||n.headers.host;return!(["localhost","127.0.0.1"].indexOf(t)>-1||t.endsWith(".local"))}function eR(n,t){var r,i,o;return ZD(n.name,n.value,{maxAge:n.maxAge,expires:new Date(Date.now()+n.maxAge*1e3),httpOnly:!0,secure:t,path:(r=n.path)!==null&&r!==void 0?r:"/",domain:(i=n.domain)!==null&&i!==void 0?i:"",sameSite:(o=n.sameSite)!==null&&o!==void 0?o:"lax"})}function oh(n,t,r){let i=r.map(s=>eR(s,QD(n))),o=t.getHeader("Set-Cookie");return o&&(o instanceof Array?Array.prototype.push.apply(i,o):typeof o=="string"&&i.push(o)),i}function pc(n,t,r){t.setHeader("Set-Cookie",oh(n,t,r))}var sh=function(n,t,r,i){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function f(h){try{d(i.next(h))}catch(y){a(y)}}function u(h){try{d(i.throw(h))}catch(y){a(y)}}function d(h){h.done?s(h.value):o(h.value).then(f,u)}d((i=i.apply(n,t||[])).next())})};function vi(n){return Math.round(Date.now()/1e3)+n}function l5(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){let t=Math.random()*16|0;return(n=="x"?t:t&3|8).toString(16)})}var Hn=()=>typeof window<"u";function zn(n,t){var r;t||(t=((r=window?.location)===null||r===void 0?void 0:r.href)||""),n=n.replace(/[\[\]]/g,"\\$&");let i=new RegExp("[?&#]"+n+"(=([^&#]*)|&|#|$)"),o=i.exec(t);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"":null}var h5=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...r)=>sh(void 0,void 0,void 0,function*(){return yield(yield Promise.resolve().then(()=>He(qs()))).fetch(...r)}):t=fetch,(...r)=>t(...r)},d5=(n,t,r)=>sh(void 0,void 0,void 0,function*(){Hn()&&(yield n?.setItem(t,JSON.stringify(r)))}),p5=(n,t)=>sh(void 0,void 0,void 0,function*(){let r=Hn()&&(yield n?.getItem(t));if(!r)return null;try{return JSON.parse(r)}catch{return r}}),m5=(n,t)=>{let r=Hn()&&n?.getItem(t);if(!r||typeof r!="string")return null;try{return JSON.parse(r)}catch{return r}},b5=(n,t)=>sh(void 0,void 0,void 0,function*(){Hn()&&(yield n?.removeItem(t))});var Et=function(n,t,r,i){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function f(h){try{d(i.next(h))}catch(y){a(y)}}function u(h){try{d(i.throw(h))}catch(y){a(y)}}function d(h){h.done?s(h.value):o(h.value).then(f,u)}d((i=i.apply(n,t||[])).next())})},ka=class{constructor({url:t="",headers:r={},cookieOptions:i,fetch:o}){this.url=t,this.headers=r,this.cookieOptions=Object.assign(Object.assign({},c5),i),this.fetch=h5(o)}_createRequestHeaders(t){let r=Object.assign({},this.headers);return r.Authorization=`Bearer ${t}`,r}cookieName(){var t;return(t=this.cookieOptions.name)!==null&&t!==void 0?t:""}getUrlForProvider(t,r){let i=[`provider=${encodeURIComponent(t)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),r?.queryParams){let o=new URLSearchParams(r.queryParams);i.push(`${o}`)}return`${this.url}/authorize?${i.join("&")}`}signUpWithEmail(t,r,i={}){return Et(this,void 0,void 0,function*(){try{let o=Object.assign({},this.headers),s="";i.redirectTo&&(s="?redirect_to="+encodeURIComponent(i.redirectTo));let a=yield er(this.fetch,`${this.url}/signup${s}`,{email:t,password:r,data:i.data,gotrue_meta_security:{captcha_token:i.captchaToken}},{headers:o}),f=Object.assign({},a);return f.expires_in&&(f.expires_at=vi(a.expires_in)),{data:f,error:null}}catch(o){return{data:null,error:o}}})}signInWithEmail(t,r,i={}){return Et(this,void 0,void 0,function*(){try{let o=Object.assign({},this.headers),s="?grant_type=password";i.redirectTo&&(s+="&redirect_to="+encodeURIComponent(i.redirectTo));let a=yield er(this.fetch,`${this.url}/token${s}`,{email:t,password:r,gotrue_meta_security:{captcha_token:i.captchaToken}},{headers:o}),f=Object.assign({},a);return f.expires_in&&(f.expires_at=vi(a.expires_in)),{data:f,error:null}}catch(o){return{data:null,error:o}}})}signUpWithPhone(t,r,i={}){return Et(this,void 0,void 0,function*(){try{let o=Object.assign({},this.headers),s=yield er(this.fetch,`${this.url}/signup`,{phone:t,password:r,data:i.data,gotrue_meta_security:{captcha_token:i.captchaToken}},{headers:o}),a=Object.assign({},s);return a.expires_in&&(a.expires_at=vi(s.expires_in)),{data:a,error:null}}catch(o){return{data:null,error:o}}})}signInWithPhone(t,r,i={}){return Et(this,void 0,void 0,function*(){try{let o=Object.assign({},this.headers),s="?grant_type=password",a=yield er(this.fetch,`${this.url}/token${s}`,{phone:t,password:r,gotrue_meta_security:{captcha_token:i.captchaToken}},{headers:o}),f=Object.assign({},a);return f.expires_in&&(f.expires_at=vi(a.expires_in)),{data:f,error:null}}catch(o){return{data:null,error:o}}})}signInWithOpenIDConnect({id_token:t,nonce:r,client_id:i,issuer:o,provider:s}){return Et(this,void 0,void 0,function*(){try{let a=Object.assign({},this.headers),f="?grant_type=id_token",u=yield er(this.fetch,`${this.url}/token${f}`,{id_token:t,nonce:r,client_id:i,issuer:o,provider:s},{headers:a}),d=Object.assign({},u);return d.expires_in&&(d.expires_at=vi(u.expires_in)),{data:d,error:null}}catch(a){return{data:null,error:a}}})}sendMagicLinkEmail(t,r={}){var i;return Et(this,void 0,void 0,function*(){try{let o=Object.assign({},this.headers),s="";r.redirectTo&&(s+="?redirect_to="+encodeURIComponent(r.redirectTo));let a=(i=r.shouldCreateUser)!==null&&i!==void 0?i:!0;return{data:yield er(this.fetch,`${this.url}/otp${s}`,{email:t,create_user:a,gotrue_meta_security:{captcha_token:r.captchaToken}},{headers:o}),error:null}}catch(o){return{data:null,error:o}}})}sendMobileOTP(t,r={}){var i;return Et(this,void 0,void 0,function*(){try{let o=(i=r.shouldCreateUser)!==null&&i!==void 0?i:!0,s=Object.assign({},this.headers);return{data:yield er(this.fetch,`${this.url}/otp`,{phone:t,create_user:o,gotrue_meta_security:{captcha_token:r.captchaToken}},{headers:s}),error:null}}catch(o){return{data:null,error:o}}})}signOut(t){return Et(this,void 0,void 0,function*(){try{return yield er(this.fetch,`${this.url}/logout`,{},{headers:this._createRequestHeaders(t),noResolveJson:!0}),{error:null}}catch(r){return{error:r}}})}verifyMobileOTP(t,r,i={}){return Et(this,void 0,void 0,function*(){try{let o=Object.assign({},this.headers),s=yield er(this.fetch,`${this.url}/verify`,{phone:t,token:r,type:"sms",redirect_to:i.redirectTo},{headers:o}),a=Object.assign({},s);return a.expires_in&&(a.expires_at=vi(s.expires_in)),{data:a,error:null}}catch(o){return{data:null,error:o}}})}verifyOTP({email:t,phone:r,token:i,type:o="sms"},s={}){return Et(this,void 0,void 0,function*(){try{let a=Object.assign({},this.headers),f=yield er(this.fetch,`${this.url}/verify`,{email:t,phone:r,token:i,type:o,redirect_to:s.redirectTo},{headers:a}),u=Object.assign({},f);return u.expires_in&&(u.expires_at=vi(f.expires_in)),{data:u,error:null}}catch(a){return{data:null,error:a}}})}inviteUserByEmail(t,r={}){return Et(this,void 0,void 0,function*(){try{let i=Object.assign({},this.headers),o="";return r.redirectTo&&(o+="?redirect_to="+encodeURIComponent(r.redirectTo)),{data:yield er(this.fetch,`${this.url}/invite${o}`,{email:t,data:r.data},{headers:i}),error:null}}catch(i){return{data:null,error:i}}})}resetPasswordForEmail(t,r={}){return Et(this,void 0,void 0,function*(){try{let i=Object.assign({},this.headers),o="";return r.redirectTo&&(o+="?redirect_to="+encodeURIComponent(r.redirectTo)),{data:yield er(this.fetch,`${this.url}/recover${o}`,{email:t,gotrue_meta_security:{captcha_token:r.captchaToken}},{headers:i}),error:null}}catch(i){return{data:null,error:i}}})}refreshAccessToken(t){return Et(this,void 0,void 0,function*(){try{let r=yield er(this.fetch,`${this.url}/token?grant_type=refresh_token`,{refresh_token:t},{headers:this.headers}),i=Object.assign({},r);return i.expires_in&&(i.expires_at=vi(r.expires_in)),{data:i,error:null}}catch(r){return{data:null,error:r}}})}setAuthCookie(t,r){t.method!=="POST"&&(r.setHeader("Allow","POST"),r.status(405).end("Method Not Allowed"));let{event:i,session:o}=t.body;if(!i)throw new Error("Auth event missing!");if(i==="SIGNED_IN"){if(!o)throw new Error("Auth session missing!");pc(t,r,[{key:"access-token",value:o.access_token},{key:"refresh-token",value:o.refresh_token}].map(s=>{var a;return{name:`${this.cookieName()}-${s.key}`,value:s.value,domain:this.cookieOptions.domain,maxAge:(a=this.cookieOptions.lifetime)!==null&&a!==void 0?a:0,path:this.cookieOptions.path,sameSite:this.cookieOptions.sameSite}}))}i==="SIGNED_OUT"&&pc(t,r,["access-token","refresh-token"].map(s=>({name:`${this.cookieName()}-${s}`,value:"",maxAge:-1}))),r.status(200).json({})}deleteAuthCookie(t,r,{redirectTo:i="/"}){return pc(t,r,["access-token","refresh-token"].map(o=>({name:`${this.cookieName()}-${o}`,value:"",maxAge:-1}))),r.redirect(307,i)}getAuthCookieString(t,r){t.method!=="POST"&&(r.setHeader("Allow","POST"),r.status(405).end("Method Not Allowed"));let{event:i,session:o}=t.body;if(!i)throw new Error("Auth event missing!");if(i==="SIGNED_IN"){if(!o)throw new Error("Auth session missing!");return oh(t,r,[{key:"access-token",value:o.access_token},{key:"refresh-token",value:o.refresh_token}].map(s=>{var a;return{name:`${this.cookieName()}-${s.key}`,value:s.value,domain:this.cookieOptions.domain,maxAge:(a=this.cookieOptions.lifetime)!==null&&a!==void 0?a:0,path:this.cookieOptions.path,sameSite:this.cookieOptions.sameSite}}))}return i==="SIGNED_OUT"?oh(t,r,["access-token","refresh-token"].map(s=>({name:`${this.cookieName()}-${s}`,value:"",maxAge:-1}))):r.getHeader("Set-Cookie")}generateLink(t,r,i={}){return Et(this,void 0,void 0,function*(){try{return{data:yield er(this.fetch,`${this.url}/admin/generate_link`,{type:t,email:r,password:i.password,data:i.data,redirect_to:i.redirectTo},{headers:this.headers}),error:null}}catch(o){return{data:null,error:o}}})}createUser(t){return Et(this,void 0,void 0,function*(){try{let r=yield er(this.fetch,`${this.url}/admin/users`,t,{headers:this.headers});return{user:r,data:r,error:null}}catch(r){return{user:null,data:null,error:r}}})}listUsers(){return Et(this,void 0,void 0,function*(){try{return{data:(yield ih(this.fetch,`${this.url}/admin/users`,{headers:this.headers})).users,error:null}}catch(t){return{data:null,error:t}}})}getUserById(t){return Et(this,void 0,void 0,function*(){try{return{data:yield ih(this.fetch,`${this.url}/admin/users/${t}`,{headers:this.headers}),error:null}}catch(r){return{data:null,error:r}}})}getUserByCookie(t,r){return Et(this,void 0,void 0,function*(){try{if(!t.cookies)throw new Error("Not able to parse cookies! When using Express make sure the cookie-parser middleware is in use!");let i=t.cookies[`${this.cookieName()}-access-token`],o=t.cookies[`${this.cookieName()}-refresh-token`];if(!i)throw new Error("No cookie found!");let{user:s,error:a}=yield this.getUser(i);if(a){if(!o)throw new Error("No refresh_token cookie found!");if(!r)throw new Error("You need to pass the res object to automatically refresh the session!");let{data:f,error:u}=yield this.refreshAccessToken(o);if(u)throw u;if(f)return pc(t,r,[{key:"access-token",value:f.access_token},{key:"refresh-token",value:f.refresh_token}].map(d=>{var h;return{name:`${this.cookieName()}-${d.key}`,value:d.value,domain:this.cookieOptions.domain,maxAge:(h=this.cookieOptions.lifetime)!==null&&h!==void 0?h:0,path:this.cookieOptions.path,sameSite:this.cookieOptions.sameSite}})),{token:f.access_token,user:f.user,data:f.user,error:null}}return{token:i,user:s,data:s,error:null}}catch(i){return{token:null,user:null,data:null,error:i}}})}updateUserById(t,r){return Et(this,void 0,void 0,function*(){try{let i=yield zm(this.fetch,`${this.url}/admin/users/${t}`,r,{headers:this.headers});return{user:i,data:i,error:null}}catch(i){return{user:null,data:null,error:i}}})}deleteUser(t){return Et(this,void 0,void 0,function*(){try{let r=yield u5(this.fetch,`${this.url}/admin/users/${t}`,{},{headers:this.headers});return{user:r,data:r,error:null}}catch(r){return{user:null,data:null,error:r}}})}getUser(t){return Et(this,void 0,void 0,function*(){try{let r=yield ih(this.fetch,`${this.url}/user`,{headers:this._createRequestHeaders(t)});return{user:r,data:r,error:null}}catch(r){return{user:null,data:null,error:r}}})}updateUser(t,r){return Et(this,void 0,void 0,function*(){try{let i=yield zm(this.fetch,`${this.url}/user`,r,{headers:this._createRequestHeaders(t)});return{user:i,data:i,error:null}}catch(i){return{user:null,data:null,error:i}}})}};function g5(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var or=function(n,t,r,i){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function f(h){try{d(i.next(h))}catch(y){a(y)}}function u(h){try{d(i.throw(h))}catch(y){a(y)}}function d(h){h.done?s(h.value):o(h.value).then(f,u)}d((i=i.apply(n,t||[])).next())})};g5();var tR={url:a5,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,multiTab:!0,headers:f5},rR=n=>{try{return atob(n.replace(/[-]/g,"+").replace(/[_]/g,"/"))}catch(t){if(t instanceof ReferenceError)return Buffer.from(n,"base64").toString("utf-8");throw t}},Ca=class{constructor(t){this.stateChangeEmitters=new Map,this.networkRetries=0;let r=Object.assign(Object.assign({},tR),t);this.currentUser=null,this.currentSession=null,this.autoRefreshToken=r.autoRefreshToken,this.persistSession=r.persistSession,this.multiTab=r.multiTab,this.localStorage=r.localStorage||globalThis.localStorage,this.api=new ka({url:r.url,headers:r.headers,cookieOptions:r.cookieOptions,fetch:r.fetch}),this._recoverSession(),this._recoverAndRefresh(),this._listenForMultiTabEvents(),this._handleVisibilityChange(),r.detectSessionInUrl&&Hn()&&zn("access_token")&&this.getSessionFromUrl({storeSession:!0}).then(({error:i})=>{if(i)throw new Error("Error getting session from URL.")})}signUp({email:t,password:r,phone:i},o={}){return or(this,void 0,void 0,function*(){try{this._removeSession();let{data:s,error:a}=i&&r?yield this.api.signUpWithPhone(i,r,{data:o.data,captchaToken:o.captchaToken}):yield this.api.signUpWithEmail(t,r,{redirectTo:o.redirectTo,data:o.data,captchaToken:o.captchaToken});if(a)throw a;if(!s)throw"An error occurred on sign up.";let f=null,u=null;return s.access_token&&(f=s,u=f.user,this._saveSession(f),this._notifyAllSubscribers("SIGNED_IN")),s.id&&(u=s),{user:u,session:f,error:null}}catch(s){return{user:null,session:null,error:s}}})}signIn({email:t,phone:r,password:i,refreshToken:o,provider:s,oidc:a},f={}){return or(this,void 0,void 0,function*(){try{if(this._removeSession(),t&&!i){let{error:u}=yield this.api.sendMagicLinkEmail(t,{redirectTo:f.redirectTo,shouldCreateUser:f.shouldCreateUser,captchaToken:f.captchaToken});return{user:null,session:null,error:u}}if(t&&i)return this._handleEmailSignIn(t,i,{redirectTo:f.redirectTo,captchaToken:f.captchaToken});if(r&&!i){let{error:u}=yield this.api.sendMobileOTP(r,{shouldCreateUser:f.shouldCreateUser,captchaToken:f.captchaToken});return{user:null,session:null,error:u}}if(r&&i)return this._handlePhoneSignIn(r,i);if(o){let{error:u}=yield this._callRefreshToken(o);if(u)throw u;return{user:this.currentUser,session:this.currentSession,error:null}}if(s)return this._handleProviderSignIn(s,{redirectTo:f.redirectTo,scopes:f.scopes,queryParams:f.queryParams});if(a)return this._handleOpenIDConnectSignIn(a);throw new Error("You must provide either an email, phone number, a third-party provider or OpenID Connect.")}catch(u){return{user:null,session:null,error:u}}})}verifyOTP(t,r={}){return or(this,void 0,void 0,function*(){try{this._removeSession();let{data:i,error:o}=yield this.api.verifyOTP(t,r);if(o)throw o;if(!i)throw"An error occurred on token verification.";let s=null,a=null;return i.access_token&&(s=i,a=s.user,this._saveSession(s),this._notifyAllSubscribers("SIGNED_IN")),i.id&&(a=i),{user:a,session:s,error:null}}catch(i){return{user:null,session:null,error:i}}})}user(){return this.currentUser}session(){return this.currentSession}refreshSession(){var t;return or(this,void 0,void 0,function*(){try{if(!(!((t=this.currentSession)===null||t===void 0)&&t.access_token))throw new Error("Not logged in.");let{error:r}=yield this._callRefreshToken();if(r)throw r;return{data:this.currentSession,user:this.currentUser,error:null}}catch(r){return{data:null,user:null,error:r}}})}update(t){var r;return or(this,void 0,void 0,function*(){try{if(!(!((r=this.currentSession)===null||r===void 0)&&r.access_token))throw new Error("Not logged in.");let{user:i,error:o}=yield this.api.updateUser(this.currentSession.access_token,t);if(o)throw o;if(!i)throw Error("Invalid user data.");let s=Object.assign(Object.assign({},this.currentSession),{user:i});return this._saveSession(s),this._notifyAllSubscribers("USER_UPDATED"),{data:i,user:i,error:null}}catch(i){return{data:null,user:null,error:i}}})}setSession(t){return or(this,void 0,void 0,function*(){let r;if(typeof t=="string"){let i=t,{data:o,error:s}=yield this.api.refreshAccessToken(i);if(s)return{session:null,error:s};r=o}else{let i=Math.round(Date.now()/1e3),{refresh_token:o,access_token:s}=t,a=0,f=0,u=s.split(".");if(u.length!==3)throw new Error("access_token is not a proper JWT");let d=rR(u[1]),h;try{h=JSON.parse(d)}catch{throw new Error("access_token is not a proper JWT, invalid JSON in body")}if(typeof h=="object"&&h&&typeof h.exp=="number")a=h.exp,f=i-h.exp;else throw new Error("access_token is not a proper JWT, missing exp claim");if(i>a){let{data:y,error:C}=yield this.api.refreshAccessToken(o);if(C)return{session:null,error:C};r=y}else{let{user:y,error:C}=yield this.api.getUser(s);if(C)throw C;r={access_token:s,expires_in:f,expires_at:a,refresh_token:o,token_type:"bearer",user:y}}}try{return this._saveSession(r),this._notifyAllSubscribers("SIGNED_IN"),{session:r,error:null}}catch(i){return{error:i,session:null}}})}setAuth(t){return this.currentSession=Object.assign(Object.assign({},this.currentSession),{access_token:t,token_type:"bearer",user:this.user()}),this._notifyAllSubscribers("TOKEN_REFRESHED"),this.currentSession}getSessionFromUrl(t){return or(this,void 0,void 0,function*(){try{if(!Hn())throw new Error("No browser detected.");let r=zn("error_description");if(r)throw new Error(r);let i=zn("provider_token"),o=zn("provider_refresh_token"),s=zn("access_token");if(!s)throw new Error("No access_token detected.");let a=zn("expires_in");if(!a)throw new Error("No expires_in detected.");let f=zn("refresh_token");if(!f)throw new Error("No refresh_token detected.");let u=zn("token_type");if(!u)throw new Error("No token_type detected.");let h=Math.round(Date.now()/1e3)+parseInt(a),{user:y,error:C}=yield this.api.getUser(s);if(C)throw C;let O={provider_token:i,provider_refresh_token:o,access_token:s,expires_in:parseInt(a),expires_at:h,refresh_token:f,token_type:u,user:y};if(t?.storeSession){this._saveSession(O);let A=zn("type");this._notifyAllSubscribers("SIGNED_IN"),A==="recovery"&&this._notifyAllSubscribers("PASSWORD_RECOVERY")}return window.location.hash="",{data:O,error:null}}catch(r){return{data:null,error:r}}})}signOut(){var t;return or(this,void 0,void 0,function*(){let r=(t=this.currentSession)===null||t===void 0?void 0:t.access_token;if(this._removeSession(),this._notifyAllSubscribers("SIGNED_OUT"),r){let{error:i}=yield this.api.signOut(r);if(i)return{error:i}}return{error:null}})}onAuthStateChange(t){try{let r=l5(),i={id:r,callback:t,unsubscribe:()=>{this.stateChangeEmitters.delete(r)}};return this.stateChangeEmitters.set(r,i),{data:i,error:null}}catch(r){return{data:null,error:r}}}_handleEmailSignIn(t,r,i={}){var o,s;return or(this,void 0,void 0,function*(){try{let{data:a,error:f}=yield this.api.signInWithEmail(t,r,{redirectTo:i.redirectTo,captchaToken:i.captchaToken});return f||!a?{data:null,user:null,session:null,error:f}:((!((o=a?.user)===null||o===void 0)&&o.confirmed_at||!((s=a?.user)===null||s===void 0)&&s.email_confirmed_at)&&(this._saveSession(a),this._notifyAllSubscribers("SIGNED_IN")),{data:a,user:a.user,session:a,error:null})}catch(a){return{data:null,user:null,session:null,error:a}}})}_handlePhoneSignIn(t,r,i={}){var o;return or(this,void 0,void 0,function*(){try{let{data:s,error:a}=yield this.api.signInWithPhone(t,r,i);return a||!s?{data:null,user:null,session:null,error:a}:(!((o=s?.user)===null||o===void 0)&&o.phone_confirmed_at&&(this._saveSession(s),this._notifyAllSubscribers("SIGNED_IN")),{data:s,user:s.user,session:s,error:null})}catch(s){return{data:null,user:null,session:null,error:s}}})}_handleProviderSignIn(t,r={}){let i=this.api.getUrlForProvider(t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});try{return Hn()&&(window.location.href=i),{provider:t,url:i,data:null,session:null,user:null,error:null}}catch(o){return i?{provider:t,url:i,data:null,session:null,user:null,error:null}:{data:null,user:null,session:null,error:o}}}_handleOpenIDConnectSignIn({id_token:t,nonce:r,client_id:i,issuer:o,provider:s}){return or(this,void 0,void 0,function*(){if(t&&r&&(i&&o||s))try{let{data:a,error:f}=yield this.api.signInWithOpenIDConnect({id_token:t,nonce:r,client_id:i,issuer:o,provider:s});return f||!a?{user:null,session:null,error:f}:(this._saveSession(a),this._notifyAllSubscribers("SIGNED_IN"),{user:a.user,session:a,error:null})}catch(a){return{user:null,session:null,error:a}}throw new Error("You must provide a OpenID Connect provider with your id token and nonce.")})}_recoverSession(){try{let t=m5(this.localStorage,Ma);if(!t)return null;let{currentSession:r,expiresAt:i}=t,o=Math.round(Date.now()/1e3);i>=o+hc&&r?.user&&(this._saveSession(r),this._notifyAllSubscribers("SIGNED_IN"))}catch(t){console.log("error",t)}}_recoverAndRefresh(){return or(this,void 0,void 0,function*(){try{let t=yield p5(this.localStorage,Ma);if(!t)return null;let{currentSession:r,expiresAt:i}=t,o=Math.round(Date.now()/1e3);if(i<o+hc)if(this.autoRefreshToken&&r.refresh_token){this.networkRetries++;let{error:s}=yield this._callRefreshToken(r.refresh_token);if(s){if(console.log(s.message),s.message===yi.ERROR_MESSAGE&&this.networkRetries<yi.MAX_RETRIES){this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),this.refreshTokenTimer=setTimeout(()=>this._recoverAndRefresh(),Math.pow(yi.RETRY_INTERVAL,this.networkRetries)*100);return}yield this._removeSession()}this.networkRetries=0}else this._removeSession();else r?(this._saveSession(r),this._notifyAllSubscribers("SIGNED_IN")):(console.log("Current session is missing data."),this._removeSession())}catch(t){return console.error(t),null}})}_callRefreshToken(t){var r;return t===void 0&&(t=(r=this.currentSession)===null||r===void 0?void 0:r.refresh_token),or(this,void 0,void 0,function*(){try{if(!t)throw new Error("No current session.");let{data:i,error:o}=yield this.api.refreshAccessToken(t);if(o)throw o;if(!i)throw Error("Invalid session data.");return this._saveSession(i),this._notifyAllSubscribers("TOKEN_REFRESHED"),this._notifyAllSubscribers("SIGNED_IN"),{data:i,error:null}}catch(i){return{data:null,error:i}}})}_notifyAllSubscribers(t){this.stateChangeEmitters.forEach(r=>r.callback(t,this.currentSession))}_saveSession(t){this.currentSession=t,this.currentUser=t.user;let r=t.expires_at;if(r){let i=Math.round(Date.now()/1e3),o=r-i,s=o>hc?hc:.5;this._startAutoRefreshToken((o-s)*1e3)}this.persistSession&&t.expires_at&&this._persistSession(this.currentSession)}_persistSession(t){let r={currentSession:t,expiresAt:t.expires_at};d5(this.localStorage,Ma,r)}_removeSession(){return or(this,void 0,void 0,function*(){this.currentSession=null,this.currentUser=null,this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),b5(this.localStorage,Ma)})}_startAutoRefreshToken(t){this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),!(t<=0||!this.autoRefreshToken)&&(this.refreshTokenTimer=setTimeout(()=>or(this,void 0,void 0,function*(){this.networkRetries++;let{error:r}=yield this._callRefreshToken();r||(this.networkRetries=0),r?.message===yi.ERROR_MESSAGE&&this.networkRetries<yi.MAX_RETRIES&&this._startAutoRefreshToken(Math.pow(yi.RETRY_INTERVAL,this.networkRetries)*100)}),t),typeof this.refreshTokenTimer.unref=="function"&&this.refreshTokenTimer.unref())}_listenForMultiTabEvents(){if(!this.multiTab||!Hn()||!window?.addEventListener)return!1;try{window?.addEventListener("storage",t=>{var r;if(t.key===Ma){let i=JSON.parse(String(t.newValue));!((r=i?.currentSession)===null||r===void 0)&&r.access_token?(this._saveSession(i.currentSession),this._notifyAllSubscribers("SIGNED_IN")):(this._removeSession(),this._notifyAllSubscribers("SIGNED_OUT"))}})}catch(t){console.error("_listenForMultiTabEvents",t)}}_handleVisibilityChange(){if(!this.multiTab||!Hn()||!window?.addEventListener)return!1;try{window?.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this._recoverAndRefresh()})}catch(t){console.error("_handleVisibilityChange",t)}}};var ah=class extends Ca{constructor(t){super(t)}};var y5=function(n,t,r,i){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function f(h){try{d(i.next(h))}catch(y){a(y)}}function u(h){try{d(i.throw(h))}catch(y){a(y)}}function d(h){h.done?s(h.value):o(h.value).then(f,u)}d((i=i.apply(n,t||[])).next())})},xi=class{constructor(t){Object.assign(this,t);let r;t.fetch?r=t.fetch:typeof fetch>"u"?r=(...i)=>y5(this,void 0,void 0,function*(){return yield(yield Promise.resolve().then(()=>He(qs()))).fetch(...i)}):r=fetch,this.fetch=(...i)=>r(...i),this.shouldThrowOnError=t.shouldThrowOnError||!1,this.allowEmpty=t.allowEmpty||!1}throwOnError(t){return t==null&&(t=!0),this.shouldThrowOnError=t,this}then(t,r){typeof this.schema>"u"||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let i=this.fetch(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(o=>y5(this,void 0,void 0,function*(){var s,a,f,u;let d=null,h=null,y=null,C=o.status,O=o.statusText;if(o.ok){let M=(s=this.headers.Prefer)===null||s===void 0?void 0:s.split(",").includes("return=minimal");if(this.method!=="HEAD"&&!M){let $=yield o.text();$&&(this.headers.Accept==="text/csv"?h=$:h=JSON.parse($))}let F=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),D=(f=o.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");F&&D&&D.length>1&&(y=parseInt(D[1]))}else{let M=yield o.text();try{d=JSON.parse(M)}catch{d={message:M}}if(d&&this.allowEmpty&&(!((u=d?.details)===null||u===void 0)&&u.includes("Results contain 0 rows"))&&(d=null,C=200,O="OK"),d&&this.shouldThrowOnError)throw d}return{error:d,data:h,count:y,status:C,statusText:O,body:h}}));return this.shouldThrowOnError||(i=i.catch(o=>({error:{message:`FetchError: ${o.message}`,details:"",hint:"",code:o.code||""},data:null,body:null,count:null,status:400,statusText:"Bad Request"}))),i.then(t,r)}};var mc=class extends xi{select(t="*"){let r=!1,i=t.split("").map(o=>/\s/.test(o)&&!r?"":(o==='"'&&(r=!r),o)).join("");return this.url.searchParams.set("select",i),this}order(t,{ascending:r=!0,nullsFirst:i=!1,foreignTable:o}={}){let s=typeof o>"u"?"order":`${o}.order`,a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${t}.${r?"asc":"desc"}.${i?"nullsfirst":"nullslast"}`),this}limit(t,{foreignTable:r}={}){let i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,r,{foreignTable:i}={}){let o=typeof i>"u"?"offset":`${i}.offset`,s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(s,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.headers.Accept="application/vnd.pgrst.object+json",this.allowEmpty=!0,this}csv(){return this.headers.Accept="text/csv",this}};var Jr=class extends mc{constructor(){super(...arguments),this.cs=this.contains,this.cd=this.containedBy,this.sl=this.rangeLt,this.sr=this.rangeGt,this.nxl=this.rangeGte,this.nxr=this.rangeLte,this.adj=this.rangeAdjacent,this.ov=this.overlaps}not(t,r,i){return this.url.searchParams.append(`${t}`,`not.${r}.${i}`),this}or(t,{foreignTable:r}={}){let i=typeof r>"u"?"or":`${r}.or`;return this.url.searchParams.append(i,`(${t})`),this}eq(t,r){return this.url.searchParams.append(`${t}`,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(`${t}`,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(`${t}`,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(`${t}`,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(`${t}`,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(`${t}`,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(`${t}`,`like.${r}`),this}ilike(t,r){return this.url.searchParams.append(`${t}`,`ilike.${r}`),this}is(t,r){return this.url.searchParams.append(`${t}`,`is.${r}`),this}in(t,r){let i=r.map(o=>typeof o=="string"&&new RegExp("[,()]").test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(`${t}`,`in.(${i})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(`${t}`,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(`${t}`,`cs.{${r.join(",")}}`):this.url.searchParams.append(`${t}`,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(`${t}`,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(`${t}`,`cd.{${r.join(",")}}`):this.url.searchParams.append(`${t}`,`cd.${JSON.stringify(r)}`),this}rangeLt(t,r){return this.url.searchParams.append(`${t}`,`sl.${r}`),this}rangeGt(t,r){return this.url.searchParams.append(`${t}`,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(`${t}`,`nxl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(`${t}`,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(`${t}`,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(`${t}`,`ov.${r}`):this.url.searchParams.append(`${t}`,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:i,type:o=null}={}){let s="";o==="plain"?s="pl":o==="phrase"?s="ph":o==="websearch"&&(s="w");let a=i===void 0?"":`(${i})`;return this.url.searchParams.append(`${t}`,`${s}fts${a}.${r}`),this}fts(t,r,{config:i}={}){let o=typeof i>"u"?"":`(${i})`;return this.url.searchParams.append(`${t}`,`fts${o}.${r}`),this}plfts(t,r,{config:i}={}){let o=typeof i>"u"?"":`(${i})`;return this.url.searchParams.append(`${t}`,`plfts${o}.${r}`),this}phfts(t,r,{config:i}={}){let o=typeof i>"u"?"":`(${i})`;return this.url.searchParams.append(`${t}`,`phfts${o}.${r}`),this}wfts(t,r,{config:i}={}){let o=typeof i>"u"?"":`(${i})`;return this.url.searchParams.append(`${t}`,`wfts${o}.${r}`),this}filter(t,r,i){return this.url.searchParams.append(`${t}`,`${r}.${i}`),this}match(t){return Object.keys(t).forEach(r=>{this.url.searchParams.append(`${r}`,`eq.${t[r]}`)}),this}};var to=class extends xi{constructor(t,{headers:r={},schema:i,fetch:o,shouldThrowOnError:s}={}){super({fetch:o,shouldThrowOnError:s}),this.url=new URL(t),this.headers=Object.assign({},r),this.schema=i}select(t="*",{head:r=!1,count:i=null}={}){this.method="GET";let o=!1,s=t.split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",s),i&&(this.headers.Prefer=`count=${i}`),r&&(this.method="HEAD"),new Jr(this)}insert(t,{upsert:r=!1,onConflict:i,returning:o="representation",count:s=null}={}){this.method="POST";let a=[`return=${o}`];if(r&&a.push("resolution=merge-duplicates"),r&&i!==void 0&&this.url.searchParams.set("on_conflict",i),this.body=t,s&&a.push(`count=${s}`),this.headers.Prefer&&a.unshift(this.headers.Prefer),this.headers.Prefer=a.join(","),Array.isArray(t)){let f=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(f.length>0){let u=[...new Set(f)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Jr(this)}upsert(t,{onConflict:r,returning:i="representation",count:o=null,ignoreDuplicates:s=!1}={}){this.method="POST";let a=[`resolution=${s?"ignore":"merge"}-duplicates`,`return=${i}`];return r!==void 0&&this.url.searchParams.set("on_conflict",r),this.body=t,o&&a.push(`count=${o}`),this.headers.Prefer&&a.unshift(this.headers.Prefer),this.headers.Prefer=a.join(","),new Jr(this)}update(t,{returning:r="representation",count:i=null}={}){this.method="PATCH";let o=[`return=${r}`];return this.body=t,i&&o.push(`count=${i}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new Jr(this)}delete({returning:t="representation",count:r=null}={}){this.method="DELETE";let i=[`return=${t}`];return r&&i.push(`count=${r}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new Jr(this)}};var bc=class extends xi{constructor(t,{headers:r={},schema:i,fetch:o,shouldThrowOnError:s}={}){super({fetch:o,shouldThrowOnError:s}),this.url=new URL(t),this.headers=Object.assign({},r),this.schema=i}rpc(t,{head:r=!1,count:i=null}={}){return r?(this.method="HEAD",t&&Object.entries(t).forEach(([o,s])=>{this.url.searchParams.append(o,s)})):(this.method="POST",this.body=t),i&&(this.headers.Prefer!==void 0?this.headers.Prefer+=`,count=${i}`:this.headers.Prefer=`count=${i}`),new Jr(this)}};var v5="0.37.4";var x5={"X-Client-Info":`postgrest-js/${v5}`};var Oa=class{constructor(t,{headers:r={},schema:i,fetch:o,throwOnError:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},x5),r),this.schema=i,this.fetch=o,this.shouldThrowOnError=s}auth(t){return this.headers.Authorization=`Bearer ${t}`,this}from(t){let r=`${this.url}/${t}`;return new to(r,{headers:this.headers,schema:this.schema,fetch:this.fetch,shouldThrowOnError:this.shouldThrowOnError})}rpc(t,r,{head:i=!1,count:o=null}={}){let s=`${this.url}/rpc/${t}`;return new bc(s,{headers:this.headers,schema:this.schema,fetch:this.fetch,shouldThrowOnError:this.shouldThrowOnError}).rpc(r,{head:i,count:o})}};var gc={};Ze(gc,{PostgresTypes:()=>ht,convertCell:()=>Gm,convertChangeData:()=>nR,convertColumn:()=>w5,toArray:()=>A5,toBoolean:()=>E5,toJson:()=>S5,toNumber:()=>_5,toTimestampString:()=>T5});var ht;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(ht||(ht={}));var nR=(n,t,r={})=>{var i;let o=(i=r.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(t).reduce((s,a)=>(s[a]=w5(a,n,t,o),s),{})},w5=(n,t,r,i)=>{let o=t.find(f=>f.name===n),s=o?.type,a=r[n];return s&&!i.includes(s)?Gm(s,a):Km(a)},Gm=(n,t)=>{if(n.charAt(0)==="_"){let r=n.slice(1,n.length);return A5(t,r)}switch(n){case ht.bool:return E5(t);case ht.float4:case ht.float8:case ht.int2:case ht.int4:case ht.int8:case ht.numeric:case ht.oid:return _5(t);case ht.json:case ht.jsonb:return S5(t);case ht.timestamp:return T5(t);case ht.abstime:case ht.date:case ht.daterange:case ht.int4range:case ht.int8range:case ht.money:case ht.reltime:case ht.text:case ht.time:case ht.timestamptz:case ht.timetz:case ht.tsrange:case ht.tstzrange:return Km(t);default:return Km(t)}},Km=n=>n,E5=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},_5=n=>{if(typeof n=="string"){let t=parseFloat(n);if(!Number.isNaN(t))return t}return n},S5=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(t){return console.log(`JSON parse error: ${t}`),n}return n},A5=(n,t)=>{if(typeof n!="string")return n;let r=n.length-1,i=n[r];if(n[0]==="{"&&i==="}"){let s,a=n.slice(1,r);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(f=>Gm(t,f))}return n},T5=n=>typeof n=="string"?n.replace(" ","T"):n;var F5=He(P5());var L5="1.7.5";var B5={"X-Client-Info":`realtime-js/${L5}`},U5="1.0.0",ch=1e4,$5=1e3,Da;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Da||(Da={}));var sr;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(sr||(sr={}));var Ar;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Ar||(Ar={}));var fh;(function(n){n.websocket="websocket"})(fh||(fh={}));var ro;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(ro||(ro={}));var us=class{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var vc=class{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){let r=new DataView(t),i=new TextDecoder;return this._decodeBroadcast(t,r,i)}_decodeBroadcast(t,r,i){let o=r.getUint8(1),s=r.getUint8(2),a=this.HEADER_LENGTH+2,f=i.decode(t.slice(a,a+o));a=a+o;let u=i.decode(t.slice(a,a+s));a=a+s;let d=JSON.parse(i.decode(t.slice(a,t.byteLength)));return{ref:null,topic:f,event:u,payload:d}}};var ls=class{constructor(t,r,i={},o=ch){this.channel=t,this.event=r,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel.joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var i;return this._hasReceived(t)&&r((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref);let t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel.on(this.refEvent,t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel.trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel.off(this.refEvent)}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}};var Ra=class{constructor(t,r={},i){this.topic=t,this.params=r,this.socket=i,this.bindings=[],this.state=sr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.timeout=this.socket.timeout,this.joinPush=new ls(this,Ar.join,this.params,this.timeout),this.rejoinTimer=new us(()=>this.rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=sr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this.onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=sr.closed,this.socket.remove(this)}),this.onError(o=>{this.isLeaving()||this.isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=sr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this.isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=sr.errored,this.rejoinTimer.scheduleTimeout())}),this.on(Ar.reply,(o,s)=>{this.trigger(this.replyEventName(s),o)})}rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this.rejoin()}subscribe(t=this.timeout){if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";return this.joinedOnce=!0,this.rejoin(t),this.joinPush}onClose(t){this.on(Ar.close,t)}onError(t){this.on(Ar.error,r=>t(r))}on(t,r){this.bindings.push({event:t,callback:r})}off(t){this.bindings=this.bindings.filter(r=>r.event!==t)}canPush(){return this.socket.isConnected()&&this.isJoined()}push(t,r,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new ls(this,t,r,i);return this.canPush()?o.send():(o.startTimeout(),this.pushBuffer.push(o)),o}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=sr.leaving;let r=()=>{this.socket.log("channel",`leave ${this.topic}`),this.trigger(Ar.close,"leave",this.joinRef())};this.joinPush.destroy();let i=new ls(this,Ar.leave,{},t);return i.receive("ok",()=>r()).receive("timeout",()=>r()),i.send(),this.canPush()||i.trigger("ok",{}),i}onMessage(t,r,i){return r}isMember(t){return this.topic===t}joinRef(){return this.joinPush.ref}rejoin(t=this.timeout){this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=sr.joining,this.joinPush.resend(t))}trigger(t,r,i){let{close:o,error:s,leave:a,join:f}=Ar;if(i&&[o,s,a,f].indexOf(t)>=0&&i!==this.joinRef())return;let d=this.onMessage(t,r,i);if(r&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";this.bindings.filter(h=>h.event==="*"?t===r?.type:h.event===t).map(h=>h.callback(d,i))}replyEventName(t){return`chan_reply_${t}`}isClosed(){return this.state===sr.closed}isErrored(){return this.state===sr.errored}isJoined(){return this.state===sr.joined}isJoining(){return this.state===sr.joining}isLeaving(){return this.state===sr.leaving}};var sR=function(n,t,r,i){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function f(h){try{d(i.next(h))}catch(y){a(y)}}function u(h){try{d(i.throw(h))}catch(y){a(y)}}function d(h){h.done?s(h.value):o(h.value).then(f,u)}d((i=i.apply(n,t||[])).next())})},aR=()=>{},Ia=class{constructor(t,r){this.accessToken=null,this.channels=[],this.endPoint="",this.headers=B5,this.params={},this.timeout=ch,this.transport=F5.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.longpollerTimeout=2e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=aR,this.conn=null,this.sendBuffer=[],this.serializer=new vc,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.endPoint=`${t}/${fh.websocket}`,r?.params&&(this.params=r.params),r?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r?.timeout&&(this.timeout=r.timeout),r?.logger&&(this.logger=r.logger),r?.transport&&(this.transport=r.transport),r?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs),r?.longpollerTimeout&&(this.longpollerTimeout=r.longpollerTimeout),this.reconnectAfterMs=r?.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r?.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r?.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new us(()=>sR(this,void 0,void 0,function*(){yield this.disconnect(),this.connect()}),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this.endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this.onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t)))}disconnect(t,r){return new Promise((i,o)=>{try{this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r||""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset()),i({error:null,data:!0})}catch(s){i({error:s,data:!1})}})}log(t,r,i){this.logger(t,r,i)}onOpen(t){this.stateChangeCallbacks.open.push(t)}onClose(t){this.stateChangeCallbacks.close.push(t)}onError(t){this.stateChangeCallbacks.error.push(t)}onMessage(t){this.stateChangeCallbacks.message.push(t)}connectionState(){switch(this.conn&&this.conn.readyState){case Da.connecting:return ro.Connecting;case Da.open:return ro.Open;case Da.closing:return ro.Closing;default:return ro.Closed}}isConnected(){return this.connectionState()===ro.Open}remove(t){this.channels=this.channels.filter(r=>r.joinRef()!==t.joinRef())}channel(t,r={}){let i=new Ra(t,r,this);return this.channels.push(i),i}push(t){let{topic:r,event:i,payload:o,ref:s}=t,a=()=>{this.encode(t,f=>{var u;(u=this.conn)===null||u===void 0||u.send(f)})};this.log("push",`${r} ${i} (${s})`,o),this.isConnected()?a():this.sendBuffer.push(a)}onConnMessage(t){this.decode(t.data,r=>{let{topic:i,event:o,payload:s,ref:a}=r;(a&&a===this.pendingHeartbeatRef||o===s?.type)&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${i} ${o} ${a&&"("+a+")"||""}`,s),this.channels.filter(f=>f.isMember(i)).forEach(f=>f.trigger(o,s,a)),this.stateChangeCallbacks.message.forEach(f=>f(r))})}endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:U5}))}makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}setAuth(t){this.accessToken=t,this.channels.forEach(r=>{t&&r.updateJoinPayload({user_token:t}),r.joinedOnce&&r.isJoined()&&r.push(Ar.access_token,{access_token:t})})}leaveOpenTopic(t){let r=this.channels.find(i=>i.topic===t&&(i.isJoined()||i.isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_onConnOpen(){this.log("transport",`connected to ${this.endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t.trigger(Ar.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;let i=t.match(/\?/)?"&":"?",o=new URLSearchParams(r);return`${t}${i}${o}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close($5,"hearbeat timeout");return}this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}};var uh=class{constructor(t,r,i,o){let s={},a=o==="*"?`realtime:${i}`:`realtime:${i}:${o}`,f=r.Authorization.split(" ")[1];f&&(s.user_token=f),this.subscription=t.channel(a,s)}getPayloadRecords(t){let r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=gc.convertChangeData(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=gc.convertChangeData(t.columns,t.old_record)),r}on(t,r){return this.subscription.on(t,i=>{let o={schema:i.schema,table:i.table,commit_timestamp:i.commit_timestamp,eventType:i.type,new:{},old:{},errors:i.errors};o=Object.assign(Object.assign({},o),this.getPayloadRecords(i)),r(o)}),this}subscribe(t=()=>{}){return this.subscription.onError(r=>t("SUBSCRIPTION_ERROR",r)),this.subscription.onClose(()=>t("CLOSED")),this.subscription.subscribe().receive("ok",()=>t("SUBSCRIBED")).receive("error",r=>t("SUBSCRIPTION_ERROR",r)).receive("timeout",()=>t("RETRYING_AFTER_TIMEOUT")),this.subscription}};var lh=class extends to{constructor(t,{headers:r={},schema:i,realtime:o,table:s,fetch:a,shouldThrowOnError:f}){super(t,{headers:r,schema:i,fetch:a,shouldThrowOnError:f}),this._subscription=null,this._realtime=o,this._headers=r,this._schema=i,this._table=s}on(t,r){return this._realtime.isConnected()||this._realtime.connect(),this._subscription||(this._subscription=new uh(this._realtime,this._headers,this._schema,this._table)),this._subscription.on(t,r)}};var q5="1.7.3";var j5={"X-Client-Info":`storage-js/${q5}`};var xc=function(n,t,r,i){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function f(h){try{d(i.next(h))}catch(y){a(y)}}function u(h){try{d(i.throw(h))}catch(y){a(y)}}function d(h){h.done?s(h.value):o(h.value).then(f,u)}d((i=i.apply(n,t||[])).next())})},fR=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),cR=(n,t)=>{if(typeof n.json!="function")return t(n);n.json().then(r=>t({message:fR(r),status:n?.status||500}))},uR=(n,t,r,i)=>{let o={method:n,headers:t?.headers||{}};return n==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),r))};function hh(n,t,r,i,o,s){return xc(this,void 0,void 0,function*(){return new Promise((a,f)=>{n(r,uR(t,i,o,s)).then(u=>{if(!u.ok)throw u;return i?.noResolveJson?a(u):u.json()}).then(u=>a(u)).catch(u=>cR(u,f))})})}function wc(n,t,r,i){return xc(this,void 0,void 0,function*(){return hh(n,"GET",t,r,i)})}function wi(n,t,r,i,o){return xc(this,void 0,void 0,function*(){return hh(n,"POST",t,i,o,r)})}function H5(n,t,r,i,o){return xc(this,void 0,void 0,function*(){return hh(n,"PUT",t,i,o,r)})}function dh(n,t,r,i,o){return xc(this,void 0,void 0,function*(){return hh(n,"DELETE",t,i,o,r)})}var lR=function(n,t,r,i){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function f(h){try{d(i.next(h))}catch(y){a(y)}}function u(h){try{d(i.throw(h))}catch(y){a(y)}}function d(h){h.done?s(h.value):o(h.value).then(f,u)}d((i=i.apply(n,t||[])).next())})},ph=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...r)=>lR(void 0,void 0,void 0,function*(){return yield(yield Promise.resolve().then(()=>He(qs()))).fetch(...r)}):t=fetch,(...r)=>t(...r)};var Na=function(n,t,r,i){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function f(h){try{d(i.next(h))}catch(y){a(y)}}function u(h){try{d(i.throw(h))}catch(y){a(y)}}function d(h){h.done?s(h.value):o(h.value).then(f,u)}d((i=i.apply(n,t||[])).next())})},mh=class{constructor(t,r={},i){this.url=t,this.headers=Object.assign(Object.assign({},j5),r),this.fetch=ph(i)}listBuckets(){return Na(this,void 0,void 0,function*(){try{return{data:yield wc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}getBucket(t){return Na(this,void 0,void 0,function*(){try{return{data:yield wc(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){return{data:null,error:r}}})}createBucket(t,r={public:!1}){return Na(this,void 0,void 0,function*(){try{return{data:(yield wi(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public},{headers:this.headers})).name,error:null}}catch(i){return{data:null,error:i}}})}updateBucket(t,r){return Na(this,void 0,void 0,function*(){try{return{data:yield H5(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public},{headers:this.headers}),error:null}}catch(i){return{data:null,error:i}}})}emptyBucket(t){return Na(this,void 0,void 0,function*(){try{return{data:yield wi(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){return{data:null,error:r}}})}deleteBucket(t){return Na(this,void 0,void 0,function*(){try{return{data:yield dh(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){return{data:null,error:r}}})}};var Kn=function(n,t,r,i){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function f(h){try{d(i.next(h))}catch(y){a(y)}}function u(h){try{d(i.throw(h))}catch(y){a(y)}}function d(h){h.done?s(h.value):o(h.value).then(f,u)}d((i=i.apply(n,t||[])).next())})},hR={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},dR={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},bh=class{constructor(t,r={},i,o){this.url=t,this.headers=r,this.bucketId=i,this.fetch=ph(o)}uploadOrUpdate(t,r,i,o){return Kn(this,void 0,void 0,function*(){try{let s,a=Object.assign(Object.assign({},dR),o),f=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});typeof Blob<"u"&&i instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),s.append("",i)):typeof FormData<"u"&&i instanceof FormData?(s=i,s.append("cacheControl",a.cacheControl)):(s=i,f["cache-control"]=`max-age=${a.cacheControl}`,f["content-type"]=a.contentType);let u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${d}`,{method:t,body:s,headers:f});return h.ok?{data:{Key:d},error:null}:{data:null,error:yield h.json()}}catch(s){return{data:null,error:s}}})}upload(t,r,i){return Kn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,i)})}update(t,r,i){return Kn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,i)})}move(t,r){return Kn(this,void 0,void 0,function*(){try{return{data:yield wi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r},{headers:this.headers}),error:null}}catch(i){return{data:null,error:i}}})}copy(t,r){return Kn(this,void 0,void 0,function*(){try{return{data:yield wi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r},{headers:this.headers}),error:null}}catch(i){return{data:null,error:i}}})}createSignedUrl(t,r){return Kn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),o=yield wi(this.fetch,`${this.url}/object/sign/${i}`,{expiresIn:r},{headers:this.headers}),s=`${this.url}${o.signedURL}`;return o={signedURL:s},{data:o,error:null,signedURL:s}}catch(i){return{data:null,error:i,signedURL:null}}})}createSignedUrls(t,r){return Kn(this,void 0,void 0,function*(){try{return{data:(yield wi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers})).map(o=>Object.assign(Object.assign({},o),{signedURL:o.signedURL?`${this.url}${o.signedURL}`:null})),error:null}}catch(i){return{data:null,error:i}}})}download(t){return Kn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);return{data:yield(yield wc(this.fetch,`${this.url}/object/${r}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(r){return{data:null,error:r}}})}getPublicUrl(t){try{let r=this._getFinalPath(t),i=`${this.url}/object/public/${r}`;return{data:{publicURL:i},error:null,publicURL:i}}catch(r){return{data:null,error:r,publicURL:null}}}remove(t){return Kn(this,void 0,void 0,function*(){try{return{data:yield dh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){return{data:null,error:r}}})}list(t,r,i){return Kn(this,void 0,void 0,function*(){try{let o=Object.assign(Object.assign(Object.assign({},hR),r),{prefix:t||""});return{data:yield wi(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){return{data:null,error:o}}})}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}};var Pa=class extends mh{constructor(t,r={},i){super(t,r,i)}from(t){return new bh(this.url,this.headers,t,this.fetch)}};var pR=function(n,t,r,i){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function f(h){try{d(i.next(h))}catch(y){a(y)}}function u(h){try{d(i.throw(h))}catch(y){a(y)}}function d(h){h.done?s(h.value):o(h.value).then(f,u)}d((i=i.apply(n,t||[])).next())})},z5=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...r)=>pR(void 0,void 0,void 0,function*(){return yield(yield Promise.resolve().then(()=>He(qs()))).fetch(...r)}):t=fetch,(...r)=>t(...r)};var mR=function(n,t,r,i){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function f(h){try{d(i.next(h))}catch(y){a(y)}}function u(h){try{d(i.throw(h))}catch(y){a(y)}}function d(h){h.done?s(h.value):o(h.value).then(f,u)}d((i=i.apply(n,t||[])).next())})},gh=class{constructor(t,{headers:r={},customFetch:i}={}){this.url=t,this.headers=r,this.fetch=z5(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r){return mR(this,void 0,void 0,function*(){try{let{headers:i,body:o}=r??{},s=yield this.fetch(`${this.url}/${t}`,{method:"POST",headers:Object.assign({},this.headers,i),body:o}),a=s.headers.get("x-relay-error");if(a&&a==="true")return{data:null,error:new Error(yield s.text())};let f,{responseType:u}=r??{};return!u||u==="json"?f=yield s.json():u==="arrayBuffer"?f=yield s.arrayBuffer():u==="blob"?f=yield s.blob():f=yield s.text(),{data:f,error:null}}catch(i){return{data:null,error:i}}})}};var Jm=function(n,t,r,i){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function f(h){try{d(i.next(h))}catch(y){a(y)}}function u(h){try{d(i.throw(h))}catch(y){a(y)}}function d(h){h.done?s(h.value):o(h.value).then(f,u)}d((i=i.apply(n,t||[])).next())})},bR={schema:"public",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,multiTab:!0,headers:Hm},Ec=class{constructor(t,r,i){if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");let o=i5(t),s=Object.assign(Object.assign({},bR),i);if(this.restUrl=`${o}/rest/v1`,this.realtimeUrl=`${o}/realtime/v1`.replace("http","ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,o.match(/(supabase\.co)|(supabase\.in)/)){let f=o.split(".");this.functionsUrl=`${f[0]}.functions.${f[1]}.${f[2]}`}else this.functionsUrl=`${o}/functions/v1`;this.schema=s.schema,this.multiTab=s.multiTab,this.fetch=s.fetch,this.headers=Object.assign(Object.assign({},Hm),i?.headers),this.shouldThrowOnError=s.shouldThrowOnError||!1,this.auth=this._initSupabaseAuthClient(s),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},s.realtime)),this._listenForAuthEvents(),this._listenForMultiTabEvents()}get functions(){return new gh(this.functionsUrl,{headers:this._getAuthHeaders(),customFetch:this.fetch})}get storage(){return new Pa(this.storageUrl,this._getAuthHeaders(),this.fetch)}from(t){let r=`${this.restUrl}/${t}`;return new lh(r,{headers:this._getAuthHeaders(),schema:this.schema,realtime:this.realtime,table:t,fetch:this.fetch,shouldThrowOnError:this.shouldThrowOnError})}rpc(t,r,{head:i=!1,count:o=null}={}){return this._initPostgRESTClient().rpc(t,r,{head:i,count:o})}removeAllSubscriptions(){return Jm(this,void 0,void 0,function*(){let t=this.getSubscriptions().slice(),r=t.map(o=>this.removeSubscription(o));return(yield Promise.all(r)).map(({error:o},s)=>({data:{subscription:t[s]},error:o}))})}removeSubscription(t){return Jm(this,void 0,void 0,function*(){let{error:r}=yield this._closeSubscription(t),i=this.getSubscriptions(),o=i.filter(s=>s.isJoined()).length;return i.length===0&&(yield this.realtime.disconnect()),{data:{openSubscriptions:o},error:r}})}_closeSubscription(t){return Jm(this,void 0,void 0,function*(){let r=null;if(!t.isClosed()){let{error:i}=yield this._unsubscribeSubscription(t);r=i}return this.realtime.remove(t),{error:r}})}_unsubscribeSubscription(t){return new Promise(r=>{t.unsubscribe().receive("ok",()=>r({error:null})).receive("error",i=>r({error:i})).receive("timeout",()=>r({error:new Error("timed out")}))})}getSubscriptions(){return this.realtime.channels}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:i,localStorage:o,headers:s,fetch:a,cookieOptions:f,multiTab:u}){let d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ah({url:this.authUrl,headers:Object.assign(Object.assign({},s),d),autoRefreshToken:t,persistSession:r,detectSessionInUrl:i,localStorage:o,fetch:a,cookieOptions:f,multiTab:u})}_initRealtimeClient(t){return new Ia(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign(Object.assign({},t?.params),{apikey:this.supabaseKey})}))}_initPostgRESTClient(){return new Oa(this.restUrl,{headers:this._getAuthHeaders(),schema:this.schema,fetch:this.fetch,throwOnError:this.shouldThrowOnError})}_getAuthHeaders(){var t,r;let i=Object.assign({},this.headers),o=(r=(t=this.auth.session())===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey;return i.apikey=this.supabaseKey,i.Authorization=i.Authorization||`Bearer ${o}`,i}_listenForMultiTabEvents(){if(!this.multiTab||!o5()||!window?.addEventListener)return null;try{return window?.addEventListener("storage",t=>{var r,i,o;if(t.key===n5){let s=JSON.parse(String(t.newValue)),a=(i=(r=s?.currentSession)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,f=(o=this.auth.session())===null||o===void 0?void 0:o.access_token;a?!f&&a?this._handleTokenChanged("SIGNED_IN",a,"STORAGE"):f!==a&&this._handleTokenChanged("TOKEN_REFRESHED",a,"STORAGE"):this._handleTokenChanged("SIGNED_OUT",a,"STORAGE")}})}catch(t){return console.error("_listenForMultiTabEvents",t),null}}_listenForAuthEvents(){let{data:t}=this.auth.onAuthStateChange((r,i)=>{this._handleTokenChanged(r,i?.access_token,"CLIENT")});return t}_handleTokenChanged(t,r,i){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r),i=="STORAGE"&&this.auth.setAuth(r),this.changedAccessToken=r):(t==="SIGNED_OUT"||t==="USER_DELETED")&&(this.realtime.setAuth(this.supabaseKey),i=="STORAGE"&&this.auth.signOut())}};var K5=(n,t,r)=>new Ec(n,t,r);var Ym="https://node1.orbis.club/",gR="https://ceramic-clay.3boxlabs.com",Xm="https://orbis.mypinata.cloud/ipfs/",Vm=null,Wm=null,yR="kjzl6cwe1jw1498inegtpji0iqf0htspb0qqswlofjy0hak1s3u2pf19qql7oak",Zm="k1dpgaqe3i64kjuyet4w0zyaqwamf9wrp1jim19y27veqkppo34yghivt2pag4wxp0fv2yl4hedynpfuynp2wvd8s7ctabea6lx732xrr8b0cgqauwlh0vwg6",vR="kjzl6cwe1jw1487a0xluwl3ip6lcdcfn8ahgomsbf8x5rf65mktdjuouz8xopbf",Qm="k3y52l7qbv1fry2bramzfrq10z2vrywf96yk6n61d8ffsyzvs0k0wd68sanjjo16o",xR="kjzl6cwe1jw148ehiqrzh9npfr4kk4kyqd4as259yqzcr3i1dnrnm30ck5q0t6f",e1="k1dpgaqe3i64kjsvqaacts7pw2j419foun3d53gbyiv90gguufsv529yaq55rh0gmo68o5nft4ja7xmrtq9x1is59hn1ibx16d1e5wzg4tdxtutmegh2hy1a6",wR="kjzl6cwe1jw145ak5a52cln1i6ztmece01w5qd03dib4lg8i3tt57sjauu14be8",G5="k3y52l7qbv1frxhn39k40plvupdqqna03kdgorggo0274ojggr7z93ex979jyp14w",ER="kjzl6cwe1jw146a2jirsoiku1eqsckmk8o7egba22jufwenwbb9fs096s340efk",J5="k3y52l7qbv1frxonm2thnyc45m0uhleofxo4ms07iq54h2g9xsg3475tc7q4iumm8",_R="kjzl6cwe1jw14av566q7ja9a2jy78uv5ih7pa683ozdulkpsc46qwsxfqzz3po5",V5="k3y52l7qbv1fryl9grzudl4xzm5v7izhj7eersc9m9nmhlfbdi5rzd9przztmejnk",SR="kjzl6cwe1jw146jk7s8ls9bjql42yqn1j5d3z0meue1zkgxeq2drqr0nl43soi8",W5="k3y52l7qbv1frxqj3rct6wya4d25131fuw65890fdk3y4xkdkpcxxa84nq56zy9kw",AR="kjzl6cwe1jw149ibyxllm19uiqvaj4gj2f84lq3y3xzs0nqpo2ufw63ut3xwn7i",Y5="k3y52l7qbv1frybmd4exlop211b2ivzpjl89sqho2k1qf8otyj88h0rff301451c0",TR="kjzl6cwe1jw14bcux0xa3ba15686iwkw78y4xda0djl58ufyq219e116ihujfh8",MR="k1dpgaqe3i64kk0894kb0j6w3oznbcz99blyot3fjkpl3t12zuj0a05yx15yodie1fnsskh5fmcas76fqqjx98lio3yqhce4za88vpbr7f0eda2oebxsga7hx",kR="kjzl6cwe1jw14a4hg7d96srbp4tm2lox68ry6uv4m0m3pfsjztxx4pe6rliqquu",t1="k3y52l7qbv1fryfzw38e9ccib6qakyi97weer4rhcskd6cwb26sx7lgkw491a6z9c",r1=class{ceramic;session;api;chain="ethereum";store;constructor(t){if(t&&t.ceramic)this.ceramic=t.ceramic;else if(t&&t.node)this.ceramic=new la(t.node),console.log("Ceramic: Connected to node: "+t.node);else try{this.ceramic=new la(Ym),console.log("Ceramic: Connected to node: "+Ym)}catch(r){console.log("Error creating Ceramic object: ",r)}t&&(t.PINATA_GATEWAY&&(Xm=t.PINATA_GATEWAY),t.PINATA_API_KEY&&(Vm=t.PINATA_API_KEY),t.PINATA_SECRET_API_KEY&&(Wm=t.PINATA_SECRET_API_KEY))}async connect_pkp(t,r=!0){if(!t)if(window.ethereum)console.log("Orbis SDK: You need to pass the provider as an argument in the `connect()` function. We will be using window.ethereum by default."),t=window.ethereum;else return alert("An ethereum provider is required to proceed with the connection to Ceramic."),!1;let i;try{i=await t.enable()}catch(D){return{status:300,error:D,result:"Error enabling Ethereum provider."}}let o,s="1",a=i[0].toLowerCase(),f=await Tm(t,a),{data:u,error:d}=await this.getDids(a);if(u&&u.length>0){let D=sortedDids[0].did.split(":");D[2]=="eip155"&&(s=D[3])}console.log("Default chain to use: ",s),f.chainId.reference=s.toString();try{o=await tc.getAuthMethod(t,f)}catch(D){return{status:300,error:D,result:"Error creating Ethereum provider object for Ceramic."}}let h;try{this.session=await qn.authorize(o,{resources:["ceramic://*"],expiresInSecs:7776e3}),h=this.session.did}catch(D){return{status:300,error:D,result:"Error creating a session for the DiD."}}try{let D=this.session.serialize();this.store.setItem("ceramic-session",D)}catch(D){console.log("Error creating sessionString: "+D)}this.ceramic.did=h;let{data:y,error:C,status:O}=await this.getProfile(this.session.id),A=!1;await this.store.getItem("lit-auth-signature")&&(A=!0);let F;return y?(F=y.details,F.hasLit=A):F={did:this.session.id,hasLit:A,profile:null},{status:200,did:this.session.id,details:F,result:"Success connecting to the DiD."}}async getSession(t){if(!t)if(window.ethereum)console.log("Orbis SDK: You need to pass the provider as an argument in the `connect()` function. We will be using window.ethereum by default."),t=window.ethereum;else return alert("An ethereum provider is required to proceed with the connection to Ceramic."),!1;let r;try{r=await t.enable()}catch(A){return{status:300,error:A,result:"Error enabling Ethereum provider."}}let i,o="1",s=r[0].toLowerCase(),a=await Tm(t,s);console.log("Default chain to use: ",o),a.chainId.reference=o.toString();try{i=await tc.getAuthMethod(t,a)}catch(A){return{status:300,error:A,result:"Error creating Ethereum provider object for Ceramic."}}let f;try{this.session=await qn.authorize(i,{resources:["ceramic://*"],expiresInSecs:7776e3}),f=this.session.did}catch(A){return{status:300,error:A,result:"Error creating a session for the DiD."}}return{did:f,ceramicSession:this.session.serialize()}}async connectWithSeed(t){let r=new wa(t),i=new Yi({provider:r,resolver:xm()});return await i.authenticate(),this.ceramic.did=i,this.session={did:i,id:i.id},{status:200,did:i.id,details:null,result:"Success connecting to the did:key."}}async updateProfile(t){return await this.createTileDocument(t,["orbis","profile"],G5)}async setNotificationsReadTime(t,r,i=null){let o;return i?o=await this.createTileDocument({last_notifications_read_time:r,context:i},["orbis","settings","notifications",t],t1):o=await this.createTileDocument({last_notifications_read_time:r},["orbis","settings","notifications",t],t1),o}async createPost(t,r=null){return!t||!t.body||t.body==""||t.body==null?{status:300,result:"You can't share an empty post."}:await this.createTileDocument(t,["orbis","post"],Zm)}async editPost(t,r,i=null){return!r||!r.body||r.body==""||r.body==null?{status:300,result:"You can't share an empty post."}:await this.updateTileDocument(t,r,["orbis","post"],Zm)}async deletePost(t){return await this.updateTileDocument(t,{is_deleted:!0,body:""},["orbis","post"])}async react(t,r){if(!t||t==null)return{status:300,result:"`post_id` is required when reacting to a post."};if(!r||r==null)return{status:300,result:"`type` is required when reacting to a post."};let i={type:r,post_id:t};return await this.createTileDocument(i,["orbis","reaction"],J5)}async createGroup(t){let r=await this.createTileDocument(t,["orbis","group"],Qm);if(r.doc){let i=await this.setGroupMember(r.doc,!0);return r}else return console.log("Error creating the initial channel."),{status:200,group_id:r.doc,result:"Group created without first channel."}}async createChannel(t,r){return!t||t==null?{status:300,result:"`group_id` is required when creating a channel."}:await this.createTileDocument(r,["orbis","channel"],e1)}async updateChannel(t,r){return t?await this.updateTileDocument(t,r,["orbis","channel"],e1):(console.log("`channel_id` is required to update a channel."),{status:300,result:"`channel_id` is required to update a channel."})}async setGroupMember(t,r=!0){if(!t)return console.log("`group_id` is required to join/leave a group."),{status:300,result:"`group_id` is required to join/leave a group."};let i={active:r,group_id:t};return await this.createTileDocument(i,["orbis","group_member"],W5)}async setFollow(t,r=!0){if(!t)return console.log("`did` is required to follow a user."),{status:300,result:"`did` is required to follow a user."};let i={active:r,did:t};return await this.createTileDocument(i,["orbis","follow"],V5)}async updateGroup(t,r){return t?await this.updateTileDocument(t,r,["orbis","group"],Qm):(console.log("`stream_id` is required to update a group."),{status:300,result:"`stream_id` is required to update a group."})}async updatePost(t,r){}async createConversation(t){if(!t||!t.recipients||t.recipients.length==0)return{status:300,error:e,result:"You can't create a conversations without recipients."};let r={...t};return r.recipients.push(this.session.id),await this.createTileDocument(r,["orbis","conversation"],Y5)}async sendMessage(t){if(!t||!t.body||t.body==null||t.body=="")return{status:300,result:"`body` is required when sending a new message."};if(!t||!t.conversation_id||t.conversation_id==null||t.conversation_id=="")return{status:300,result:"`conversation_id` is required when sending a new message."};let r;try{let{data:i,error:o}=await this.getConversation(t.conversation_id);if(o)return console.log("Error retrieving conversation details: ",o),{status:300,error:o,result:"Error retrieving conversation details."};r=i}catch(i){return{status:300,error:i,result:"Couldn't load recipients from this `content.conversation_id`"}}if(!r.recipients||r.recipients.length<=0)return{status:300,error:"Recipients array is empty or doesn't exist. Please retry or create a new conversation.",result:"Couldn't load recipients from this conversation id"}}async uploadMedia(t){if(console.log("Enter uploadMedia with: ",t),!Vm)return console.log("You haven't setup your PINATA_API_KEY yet."),{status:300,error:e,result:"You haven't setup your PINATA_API_KEY yet."};if(!Wm)return console.log("You haven't setup your PINATA_SECRET_API_KEY yet."),{status:300,error:e,result:"You haven't setup your PINATA_SECRET_API_KEY yet."};try{let r=new FormData;r.append("file",t);let i=await rh({method:"post",url:"https://api.pinata.cloud/pinning/pinFileToIPFS",data:r,headers:{pinata_api_key:Vm,pinata_secret_api_key:Wm,"Content-Type":"multipart/form-data"}});if(i.status==200)return{status:200,result:{url:"ipfs://"+i.data.IpfsHash,gateway:Xm}}}catch(r){return console.log("Error uploading media: ",r),{status:300,error:r,result:"Error uploading media."}}}async createTileDocument(t,r,i,o="orbis"){let s;try{s={status:200,doc:(await jr.create(this.ceramic,t,{family:o,controllers:[this.session.id],tags:r,schema:i})).id.toString(),result:"Success creating TileDocument."}}catch(a){console.log("Error creating TileDocument: ",a),s={status:300,error:a,result:"Error creating TileDocument."}}return s}async updateTileDocument(t,r,i,o,s="orbis"){let a,f;try{f=await jr.load(this.ceramic,t),await f.update(r,{family:s,controllers:[this.session.id],tags:i,schema:o}),a={status:200,doc:t,result:"Success updating TileDocument."}}catch(u){a={status:300,error:u,result:"Error updating TileDocument."}}return a}async deterministicDocument(t,r,i,o="orbis"){let s;try{let a=await jr.deterministic(this.ceramic,{family:o,controllers:[this.session.id],tags:r});await a.update(t,{family:o,controllers:[this.session.id],tags:r}),s={status:200,doc:a.id.toString(),result:"Success creating or updating deterministic TileDocument."}}catch(a){s={status:300,error:a,result:"Error creating or updating deterministic TileDocument."}}return s}async getDids(t){let{data:r,error:i,status:o}=await this.api.from("orbis_v_profiles").select().ilike("address",t);return{data:r,error:i,status:o}}async getPosts(t,r=0){let i;if(t?.algorithm)switch(t.algorithm){case"recommendations":i=this.api.rpc("orbis_recommendations",{user_did:this.session&&this.session?this.session.id:"none"}).range(r*50,(r+1)*50-1);break;case"all-posts":i=this.api.rpc("all_posts").range(r*50,(r+1)*50-1);break;case"all-master-posts":i=this.api.rpc("all_master_posts").range(r*50,(r+1)*50-1);break;case"all-did-master-posts":t&&t.context?i=this.api.rpc("all_did_master_posts_with_context",{post_did:t?.did,post_context:t.context}).range(r*50,(r+1)*50-1):i=this.api.rpc("all_did_master_posts",{post_did:t?.did}).range(r*50,(r+1)*50-1);break;case"all-context-master-posts":i=this.api.rpc("all_context_master_posts",{post_context:t?.context}).range(r*50,(r+1)*50-1);break;case"all-posts-non-filtered":i=this.api.rpc("all_posts_non_filtered").range(r*50,(r+1)*50-1);break;default:i=this.api.from("orbis_v_posts").select().range(r*50,(r+1)*50-1).order("timestamp",{ascending:!1});break}else i=this.api.rpc("default_posts_alpha",{q_did:t?.did?t.did:null,q_tag:t?.tag?t.tag:null,q_only_master:t?.only_master?t.only_master:!1,q_context:t?.context?t.context:null,q_master:t?.master?t.master:null}).range(r*50,(r+1)*50-1).order("timestamp",{ascending:!1});let{data:o,error:s,status:a}=await i;return{data:o,error:s,status:a}}async getPost(t){let{data:r,error:i,status:o}=await this.api.from("orbis_v_posts").select().eq("stream_id",t).single();return{data:r,error:i,status:o}}async getReaction(t,r){let{data:i,error:o,status:s}=await this.api.from("orbis_reactions").select("type").eq("post_id",t).eq("creator",r),a=null;return i&&i.length>0&&(a=i[0]),{data:a,error:o,status:s}}async getGroups(){let{data:t,error:r,status:i}=await this.api.from("orbis_v_groups").select().order("last_activity_timestamp",{ascending:!1});return{data:t,error:r,status:i}}async getGroup(t){let{data:r,error:i,status:o}=await this.api.from("orbis_v_groups").select().eq("stream_id",t).single();return{data:r,error:i,status:o}}async getGroupMembers(t){let{data:r,error:i,status:o}=await this.api.from("orbis_v_members").select().match({group_id:t,active:"true"});return{data:r,error:i,status:o}}async getIsGroupMember(t,r){let i=!1,{data:o,error:s,status:a}=await this.api.from("orbis_group_members").select("stream_id").match({group_id:t,did:r,active:"true"});return o&&o.length>0&&(i=!0),{data:i,error:s,status:a}}async getChannel(t){let{data:r,error:i,status:o}=await this.api.from("orbis_channels").select().eq("stream_id",t).single();return{data:r,error:i,status:o}}async getProfile(t){let{data:r,error:i,status:o}=await this.api.from("orbis_v_profiles").select().eq("did",t).single();return{data:r,error:i,status:o}}async getCredentials(t){let{data:r,error:i,status:o}=await this.api.from("verified_credentials").select().ilike("subject_id",t);return{data:r,error:i,status:o}}async getProfilesByUsername(t){let{data:r,error:i,status:o}=await this.api.from("orbis_v_profiles").select().ilike("username",t+"%").range(0,10).order("timestamp",{ascending:!1});return{data:r,error:i,status:o}}async getProfileGroups(t){let{data:r,error:i,status:o}=await this.api.from("orbis_user_groups").select().match({did:t,active:"true"}).not("group_id","is",null);return{data:r,error:i,status:o}}async getProfileFollowers(t){let{data:r,error:i,status:o}=await this.api.from("orbis_v_followers").select("details:did_following_details").match({did_followed:t,active:"true"});return{data:r,error:i,status:o}}async getProfileFollowing(t){let{data:r,error:i,status:o}=await this.api.from("orbis_v_followers").select("details:did_followed_details").match({did_following:t,active:"true"});return{data:r,error:i,status:o}}async getIsFollowing(t,r){let i=!1,{data:o,error:s,status:a}=await this.api.from("orbis_v_followers").select().match({did_following:t,did_followed:r,active:"true"});return o&&o.length>0&&(i=!0),{data:i,error:s,status:a}}async getNotifications(t){let r;if(!t||!t.type)return{data:null,error:"Query missing type.",status:s};if(!this.session||!this.session.id)return{data:null,error:"User must be connected to retrieve notifications.",status:s};switch(t.type){case"social":r=this.api.rpc("orbis_f_notifications",{user_did:this.session&&this.session?this.session.id:"none",notif_type:"social"});break;case"social_in_context":r=this.api.rpc("orbis_f_notifications_context",{user_did:this.session&&this.session?this.session.id:"none",notif_type:"social",context_id:t.context});break;case"messages":r=this.api.rpc("orbis_f_notifications",{user_did:this.session&&this.session?this.session.id:"none",notif_type:"messages"});break;default:}let{data:i,error:o,status:s}=await r;return{data:i,error:o,status:s}}async getNotificationsCount(t){if(!t||!t.type)return{data:null,error:"Query missing type."};if(!this.session||!this.session.id)return{data:null,error:"User must be connected to retrieve notifications."};let{data:r,error:i,status:o}=await this.api.rpc("orbis_f_count_notifications",{user_did:this.session.id,notif_type:t.type}).single();return{data:r,error:i,status:o}}async getConversations(t){let r;if(t?.context&&t?.did)r=this.api.from("orbis_v_conversations").select().eq("context",t.context).filter("recipients","cs",'["'+t.did+'"]').order("last_message_timestamp",{ascending:!1});else if(t?.context)r=this.api.from("orbis_v_conversations").select().eq("context",t.context).order("last_message_timestamp",{ascending:!1});else if(t?.did)r=this.api.from("orbis_v_conversations").select().filter("recipients","cs",'["'+t.did+'"]').order("last_message_timestamp",{ascending:!1});else return{data:[],error:"The `did` is required when retrieving conversations.",status:300};let{data:i,error:o,status:s}=await r;return{data:i,error:o,status:s}}async getConversation(t){let{data:r,error:i,status:o}=await this.api.from("orbis_v_conversations").select().eq("stream_id",t).single();return{data:r,error:i,status:o}}async getMessages(t,r=0){let{data:i,error:o,status:s}=await this.api.from("orbis_v_messages").select().eq("conversation_id",t).range(r*50,(r+1)*50-1);return{data:i,error:o,status:s}}};return La(CR);})();

// api
const CeramicClient = orbisSdk.CeramicClient;
const Orbis = orbisSdk.Orbis;
const DIDSession = orbisSdk.DIDSession;
const Document = orbisSdk.Document;
const TileDocument = orbisSdk.TileDocument;
const StreamUtils = orbisSdk.StreamUtils;
const postSchemaStream = orbisSdk.postSchemaStream;
const postSchemaCommit = orbisSdk.postSchemaCommit;
const groupSchemaStream = orbisSdk.groupSchemaStream;
const groupSchemaCommit = orbisSdk.groupSchemaCommit;
const channelSchemaStream = orbisSdk.channelSchemaStream;
const channelSchemaCommit = orbisSdk.channelSchemaCommit;
const profileSchemaStream = orbisSdk.profileSchemaStream;
const profileSchemaCommit = orbisSdk.profileSchemaCommit;
const reactionSchemaStream = orbisSdk.reactionSchemaStream;
const reactionSchemaCommit = orbisSdk.reactionSchemaCommit;
const followSchemaStream = orbisSdk.followSchemaStream;
const followSchemaCommit = orbisSdk.followSchemaCommit;
const groupMemberSchemaStream = orbisSdk.groupMemberSchemaStream;
const groupMemberSchemaCommit = orbisSdk.groupMemberSchemaCommit;
const conversationSchemaStream = orbisSdk.conversationSchemaStream;
const conversationSchemaCommit = orbisSdk.conversationSchemaCommit;
const messageSchemaStream = orbisSdk.messageSchemaStream;
const messageSchemaCommit = orbisSdk.messageSchemaCommit;
const notificationsReadSchemaStream = orbisSdk.notificationsReadSchemaStream;
const notificationsReadSchemaCommit = orbisSdk.notificationsReadSchemaCommit;
const MAINNET_NODE_URL = orbisSdk.MAINNET_NODE_URL;
const TESTNET_NODE_URL = orbisSdk.TESTNET_NODE_URL;
const PINATA_GATEWAY = orbisSdk.PINATA_GATEWAY;
const createClient = orbisSdk.createClient;

const createTileDocument = async (content, tags, schema, family = "orbis") => {

  const ceramic = new CeramicClient(MAINNET_NODE_URL);

  const session = await DIDSession.fromSession(sessionKey);
  
  ceramic.did = session.did;

  const orbis = new Orbis();

  orbis.ceramic = ceramic;

  const commit = await TileDocument.makeGenesis(ceramic, content, {
    family: 'orbis',
    controllers: [session.id],
    tags,
    schema,
  });

  console.log("commit =>", commit);

  const url = new URL('./streams', ceramic._apiUrl);

  const res = await fetch(url, {
    method: 'post',
    body: JSON.stringify({
      type: 0,
      genesis: StreamUtils.serializeCommit(commit),
      opts: {
        anchor: true,
        publish: true,
        pin: true,
        sync: 0,
      }
    }),
    headers: { 'Content-Type': 'application/json' },
  });

  let { state } = await res.json();

  const doc = new Document(StreamUtils.deserializeState(state), url, 5000);

  const post = await ceramic.buildStreamFromDocument(doc);

  console.log("post.id =>", post.id.toString());

}
let result;

if(method === 'create_post'){
  result = createTileDocument(content, ['orbis', 'post'], postSchemaCommit);
}else if (method === 'get_posts'){

  if(! globalThis.LocalStorage){
    globalThis.LocalStorage = {};
  }
  console.log("get posts");

  const url = "https://ylgfjdlgyjmdikqavpcj.supabase.co"
  const key = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlsZ2ZqZGxneWptZGlrcWF2cGNqIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NTQ3NTc3NTIsImV4cCI6MTk3MDMzMzc1Mn0.2XdkerM98LhI6q5MBBaXRq75yxOSy-JVbwtTz6Dn9d0";
  const indexer = createClient(url, key);

  console.log("indexer =>", indexer);
}else{
  console.log(`method "${method}" not found.`);
}

console.log("result =>", result);