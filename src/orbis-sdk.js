export const orbisSdk=(()=>{var X5=Object.create;var Bf=Object.defineProperty;var Z5=Object.getOwnPropertyDescriptor;var Q5=Object.getOwnPropertyNames;var ew=Object.getPrototypeOf,tw=Object.prototype.hasOwnProperty;var jp=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+n+'" is not supported')});var it=(n,t)=>()=>(n&&(t=n(n=0)),t);var de=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),Qe=(n,t)=>{for(var r in t)Bf(n,r,{get:t[r],enumerable:!0})},Gp=(n,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Q5(t))!tw.call(n,o)&&o!==r&&Bf(n,o,{get:()=>t[o],enumerable:!(i=Z5(t,o))||i.enumerable});return n};var Ve=(n,t,r)=>(r=n!=null?X5(ew(n)):{},Gp(t||!n||!n.__esModule?Bf(r,"default",{value:n,enumerable:!0}):r,n)),aa=n=>Gp(Bf({},"__esModule",{value:!0}),n);function Wp(n,t,r){t=t||[],r=r||0;for(var i=r;n>=ow;)t[r++]=n&255|Jp,n/=128;for(;n&iw;)t[r++]=n&255|Jp,n>>>=7;return t[r]=n|0,Wp.bytes=r-i+1,t}function xl(n,i){var r=0,i=i||0,o=0,s=i,a,f=n.length;do{if(s>=f)throw xl.bytes=0,new RangeError("Could not decode varint");a=n[s++],r+=o<28?(a&Vp)<<o:(a&Vp)*Math.pow(2,o),o+=7}while(a>=aw);return xl.bytes=s-i,r}var rw,Jp,nw,iw,ow,sw,aw,Vp,fw,cw,uw,lw,hw,dw,pw,mw,bw,gw,yw,vw,fa,Yp=it(()=>{rw=Wp,Jp=128,nw=127,iw=~nw,ow=Math.pow(2,31);sw=xl,aw=128,Vp=127;fw=Math.pow(2,7),cw=Math.pow(2,14),uw=Math.pow(2,21),lw=Math.pow(2,28),hw=Math.pow(2,35),dw=Math.pow(2,42),pw=Math.pow(2,49),mw=Math.pow(2,56),bw=Math.pow(2,63),gw=function(n){return n<fw?1:n<cw?2:n<uw?3:n<lw?4:n<hw?5:n<dw?6:n<pw?7:n<mw?8:n<bw?9:10},yw={encode:rw,decode:sw,encodingLength:gw},vw=yw,fa=vw});var Vo={};Qe(Vo,{decode:()=>Jo,encodeTo:()=>Zi,encodingLength:()=>Qi});var Jo,Zi,Qi,Uf=it(()=>{Yp();Jo=(n,t=0)=>[fa.decode(n,t),fa.decode.bytes],Zi=(n,t,r=0)=>(fa.encode(n,t,r),t),Qi=n=>fa.encodingLength(n)});var ca={};Qe(ca,{coerce:()=>Sr,empty:()=>Xp,equals:()=>wl,fromHex:()=>ww,fromString:()=>El,isBinary:()=>Ew,toHex:()=>xw,toString:()=>_l});var Xp,xw,ww,wl,Sr,Ew,El,_l,fi=it(()=>{Xp=new Uint8Array(0),xw=n=>n.reduce((t,r)=>t+r.toString(16).padStart(2,"0"),""),ww=n=>{let t=n.match(/../g);return t?new Uint8Array(t.map(r=>parseInt(r,16))):Xp},wl=(n,t)=>{if(n===t)return!0;if(n.byteLength!==t.byteLength)return!1;for(let r=0;r<n.byteLength;r++)if(n[r]!==t[r])return!1;return!0},Sr=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},Ew=n=>n instanceof ArrayBuffer||ArrayBuffer.isView(n),El=n=>new TextEncoder().encode(n),_l=n=>new TextDecoder().decode(n)});var to={};Qe(to,{Digest:()=>eo,create:()=>pn,decode:()=>ua,equals:()=>Al});var pn,ua,Al,eo,ro=it(()=>{fi();Uf();pn=(n,t)=>{let r=t.byteLength,i=Qi(n),o=i+Qi(r),s=new Uint8Array(o+r);return Zi(n,s,0),Zi(r,s,i),s.set(t,o),new eo(n,r,t,s)},ua=n=>{let t=Sr(n),[r,i]=Jo(t),[o,s]=Jo(t.subarray(i)),a=t.subarray(i+s);if(a.byteLength!==o)throw new Error("Incorrect length");return new eo(r,o,a,t)},Al=(n,t)=>n===t?!0:n.code===t.code&&n.size===t.size&&wl(n.bytes,t.bytes),eo=class{constructor(t,r,i,o){this.code=t,this.size=r,this.digest=i,this.bytes=o}}});function _w(n,t){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var o=0;o<n.length;o++){var s=n.charAt(o),a=s.charCodeAt(0);if(r[a]!==255)throw new TypeError(s+" is ambiguous");r[a]=o}var f=n.length,l=n.charAt(0),p=Math.log(f)/Math.log(256),b=Math.log(256)/Math.log(f);function v(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var k=0,$=0,O=0,q=S.length;O!==q&&S[O]===0;)O++,k++;for(var j=(q-O)*b+1>>>0,z=new Uint8Array(j);O!==q;){for(var X=S[O],B=0,L=j-1;(X!==0||B<$)&&L!==-1;L--,B++)X+=256*z[L]>>>0,z[L]=X%f>>>0,X=X/f>>>0;if(X!==0)throw new Error("Non-zero carry");$=B,O++}for(var U=j-$;U!==j&&z[U]===0;)U++;for(var te=l.repeat(k);U<j;++U)te+=n.charAt(z[U]);return te}function C(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var k=0;if(S[k]!==" "){for(var $=0,O=0;S[k]===l;)$++,k++;for(var q=(S.length-k)*p+1>>>0,j=new Uint8Array(q);S[k];){var z=r[S.charCodeAt(k)];if(z===255)return;for(var X=0,B=q-1;(z!==0||X<O)&&B!==-1;B--,X++)z+=f*j[B]>>>0,j[B]=z%256>>>0,z=z/256>>>0;if(z!==0)throw new Error("Non-zero carry");O=X,k++}if(S[k]!==" "){for(var L=q-O;L!==q&&j[L]===0;)L++;for(var U=new Uint8Array($+(q-L)),te=$;L!==q;)U[te++]=j[L++];return U}}}function D(S){var k=C(S);if(k)return k;throw new Error(`Non-${t} character`)}return{encode:v,decodeUnsafe:C,decode:D}}var Aw,Sw,Zp,Qp=it(()=>{Aw=_w,Sw=Aw,Zp=Sw});var Sl,Ml,Tl,e1,kl,Wo,ci,Mw,Tw,bt,zr=it(()=>{Qp();fi();Sl=class{constructor(t,r,i){this.name=t,this.prefix=r,this.baseEncode=i}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},Ml=class{constructor(t,r,i){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return e1(this,t)}},Tl=class{constructor(t){this.decoders=t}or(t){return e1(this,t)}decode(t){let r=t[0],i=this.decoders[r];if(i)return i.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},e1=(n,t)=>new Tl({...n.decoders||{[n.prefix]:n},...t.decoders||{[t.prefix]:t}}),kl=class{constructor(t,r,i,o){this.name=t,this.prefix=r,this.baseEncode=i,this.baseDecode=o,this.encoder=new Sl(t,r,i),this.decoder=new Ml(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}},Wo=({name:n,prefix:t,encode:r,decode:i})=>new kl(n,t,r,i),ci=({prefix:n,name:t,alphabet:r})=>{let{encode:i,decode:o}=Zp(r,t);return Wo({prefix:n,name:t,encode:i,decode:s=>Sr(o(s))})},Mw=(n,t,r,i)=>{let o={};for(let b=0;b<t.length;++b)o[t[b]]=b;let s=n.length;for(;n[s-1]==="=";)--s;let a=new Uint8Array(s*r/8|0),f=0,l=0,p=0;for(let b=0;b<s;++b){let v=o[n[b]];if(v===void 0)throw new SyntaxError(`Non-${i} character`);l=l<<r|v,f+=r,f>=8&&(f-=8,a[p++]=255&l>>f)}if(f>=r||255&l<<8-f)throw new SyntaxError("Unexpected end of data");return a},Tw=(n,t,r)=>{let i=t[t.length-1]==="=",o=(1<<r)-1,s="",a=0,f=0;for(let l=0;l<n.length;++l)for(f=f<<8|n[l],a+=8;a>r;)a-=r,s+=t[o&f>>a];if(a&&(s+=t[o&f<<r-a]),i)for(;s.length*r&7;)s+="=";return s},bt=({name:n,prefix:t,bitsPerChar:r,alphabet:i})=>Wo({prefix:t,name:n,encode(o){return Tw(o,i,r)},decode(o){return Mw(o,i,r,n)}})});var Cl={};Qe(Cl,{base58btc:()=>Mr,base58flickr:()=>kw});var Mr,kw,Ff=it(()=>{zr();Mr=ci({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),kw=ci({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var Dl={};Qe(Dl,{base32:()=>Yo,base32hex:()=>Iw,base32hexpad:()=>Nw,base32hexpadupper:()=>Pw,base32hexupper:()=>Rw,base32pad:()=>Dw,base32padupper:()=>Ow,base32upper:()=>Cw,base32z:()=>Lw});var Yo,Cw,Dw,Ow,Iw,Rw,Nw,Pw,Lw,Ol=it(()=>{zr();Yo=bt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Cw=bt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Dw=bt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Ow=bt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Iw=bt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Rw=bt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Nw=bt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Pw=bt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Lw=bt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var Me,Bw,Uw,Fw,la,$w,t1,r1,$f,qf,qw,zw,Hw,Hr=it(()=>{Uf();ro();Ff();Ol();fi();Me=class{constructor(t,r,i,o){this.code=r,this.version=t,this.multihash=i,this.bytes=o,this.byteOffset=o.byteOffset,this.byteLength=o.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:qf,byteLength:qf,code:$f,version:$f,multihash:$f,bytes:$f,_baseCache:qf,asCID:qf})}toV0(){switch(this.version){case 0:return this;default:{let{code:t,multihash:r}=this;if(t!==la)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==$w)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Me.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:t,digest:r}=this.multihash,i=pn(t,r);return Me.createV1(this.code,i)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(t){return t&&this.code===t.code&&this.version===t.version&&Al(this.multihash,t.multihash)}toString(t){let{bytes:r,version:i,_baseCache:o}=this;switch(i){case 0:return Uw(r,o,t||Mr.encoder);default:return Fw(r,o,t||Yo.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(t){return zw(/^0\.0/,Hw),!!(t&&(t[r1]||t.asCID===t))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(t){if(t instanceof Me)return t;if(t!=null&&t.asCID===t){let{version:r,code:i,multihash:o,bytes:s}=t;return new Me(r,i,o,s||t1(r,i,o.bytes))}else if(t!=null&&t[r1]===!0){let{version:r,multihash:i,code:o}=t,s=ua(i);return Me.create(r,o,s)}else return null}static create(t,r,i){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(t){case 0:{if(r!==la)throw new Error(`Version 0 CID must use dag-pb (code: ${la}) block encoding`);return new Me(t,r,i,i.bytes)}case 1:{let o=t1(t,r,i.bytes);return new Me(t,r,i,o)}default:throw new Error("Invalid version")}}static createV0(t){return Me.create(0,la,t)}static createV1(t,r){return Me.create(1,t,r)}static decode(t){let[r,i]=Me.decodeFirst(t);if(i.length)throw new Error("Incorrect length");return r}static decodeFirst(t){let r=Me.inspectBytes(t),i=r.size-r.multihashSize,o=Sr(t.subarray(i,i+r.multihashSize));if(o.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=o.subarray(r.multihashSize-r.digestSize),a=new eo(r.multihashCode,r.digestSize,s,o);return[r.version===0?Me.createV0(a):Me.createV1(r.codec,a),t.subarray(r.size)]}static inspectBytes(t){let r=0,i=()=>{let[v,C]=Jo(t.subarray(r));return r+=C,v},o=i(),s=la;if(o===18?(o=0,r=0):o===1&&(s=i()),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);let a=r,f=i(),l=i(),p=r+l,b=p-a;return{version:o,codec:s,multihashCode:f,digestSize:l,multihashSize:b,size:p}}static parse(t,r){let[i,o]=Bw(t,r),s=Me.decode(o);return s._baseCache.set(i,t),s}},Bw=(n,t)=>{switch(n[0]){case"Q":{let r=t||Mr;return[Mr.prefix,r.decode(`${Mr.prefix}${n}`)]}case Mr.prefix:{let r=t||Mr;return[Mr.prefix,r.decode(n)]}case Yo.prefix:{let r=t||Yo;return[Yo.prefix,r.decode(n)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[n[0],t.decode(n)]}}},Uw=(n,t,r)=>{let{prefix:i}=r;if(i!==Mr.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let o=t.get(i);if(o==null){let s=r.encode(n).slice(1);return t.set(i,s),s}else return o},Fw=(n,t,r)=>{let{prefix:i}=r,o=t.get(i);if(o==null){let s=r.encode(n);return t.set(i,s),s}else return o},la=112,$w=18,t1=(n,t,r)=>{let i=Qi(n),o=i+Qi(t),s=new Uint8Array(o+r.byteLength);return Zi(n,s,0),Zi(t,s,i),s.set(r,o),s},r1=Symbol.for("@ipld/js-cid/CID"),$f={writable:!1,configurable:!1,enumerable:!0},qf={writable:!1,enumerable:!1,configurable:!1},qw="0.0.0-dev",zw=(n,t)=>{if(n.test(qw))console.warn(t);else throw new Error(t)},Hw=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var Il={};Qe(Il,{base36:()=>Kr,base36upper:()=>Kw});var Kr,Kw,Xo=it(()=>{zr();Kr=ci({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Kw=ci({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var s1=de((gD,o1)=>{o1.exports=Rl;var i1=128,Jw=127,Vw=~Jw,Ww=Math.pow(2,31);function Rl(n,t,r){if(Number.MAX_SAFE_INTEGER&&n>Number.MAX_SAFE_INTEGER)throw Rl.bytes=0,new RangeError("Could not encode varint");t=t||[],r=r||0;for(var i=r;n>=Ww;)t[r++]=n&255|i1,n/=128;for(;n&Vw;)t[r++]=n&255|i1,n>>>=7;return t[r]=n|0,Rl.bytes=r-i+1,t}});var c1=de((yD,f1)=>{f1.exports=Nl;var Yw=128,a1=127;function Nl(n,i){var r=0,i=i||0,o=0,s=i,a,f=n.length;do{if(s>=f||o>49)throw Nl.bytes=0,new RangeError("Could not decode varint");a=n[s++],r+=o<28?(a&a1)<<o:(a&a1)*Math.pow(2,o),o+=7}while(a>=Yw);return Nl.bytes=s-i,r}});var l1=de((vD,u1)=>{var Xw=Math.pow(2,7),Zw=Math.pow(2,14),Qw=Math.pow(2,21),e4=Math.pow(2,28),t4=Math.pow(2,35),r4=Math.pow(2,42),n4=Math.pow(2,49),i4=Math.pow(2,56),o4=Math.pow(2,63);u1.exports=function(n){return n<Xw?1:n<Zw?2:n<Qw?3:n<e4?4:n<t4?5:n<r4?6:n<n4?7:n<i4?8:n<o4?9:10}});var ha=de((xD,h1)=>{h1.exports={encode:s1(),decode:c1(),encodingLength:l1()}});function no(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}var da=it(()=>{});function pa(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?no(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}var zf=it(()=>{da()});var d1={};Qe(d1,{concat:()=>jr});function jr(n,t){t||(t=n.reduce((o,s)=>o+s.length,0));let r=pa(t),i=0;for(let o of n)r.set(o,i),i+=o.length;return no(r)}var Pl=it(()=>{zf();da()});var Ll={};Qe(Ll,{identity:()=>s4});var s4,p1=it(()=>{zr();fi();s4=Wo({prefix:"\0",name:"identity",encode:n=>_l(n),decode:n=>El(n)})});var Bl={};Qe(Bl,{base2:()=>a4});var a4,m1=it(()=>{zr();a4=bt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var Ul={};Qe(Ul,{base8:()=>f4});var f4,b1=it(()=>{zr();f4=bt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var Fl={};Qe(Fl,{base10:()=>c4});var c4,g1=it(()=>{zr();c4=ci({prefix:"9",name:"base10",alphabet:"0123456789"})});var $l={};Qe($l,{base16:()=>u4,base16upper:()=>l4});var u4,l4,y1=it(()=>{zr();u4=bt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),l4=bt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var ql={};Qe(ql,{base64:()=>h4,base64pad:()=>d4,base64url:()=>io,base64urlpad:()=>p4});var h4,d4,io,p4,Hf=it(()=>{zr();h4=bt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),d4=bt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),io=bt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),p4=bt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});var zl={};Qe(zl,{base256emoji:()=>v4});function g4(n){return n.reduce((t,r)=>(t+=m4[r],t),"")}function y4(n){let t=[];for(let r of n){let i=b4[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(i)}return new Uint8Array(t)}var v1,m4,b4,v4,x1=it(()=>{zr();v1=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),m4=v1.reduce((n,t,r)=>(n[r]=t,n),[]),b4=v1.reduce((n,t,r)=>(n[t.codePointAt(0)]=r,n),[]);v4=Wo({prefix:"\u{1F680}",name:"base256emoji",encode:g4,decode:y4})});var Gf={};Qe(Gf,{Hasher:()=>Kf,from:()=>jf});var jf,Kf,Hl=it(()=>{ro();jf=({name:n,code:t,encode:r})=>new Kf(n,t,r),Kf=class{constructor(t,r,i){this.name=t,this.code=r,this.encode=i}digest(t){if(t instanceof Uint8Array){let r=this.encode(t);return r instanceof Uint8Array?pn(this.code,r):r.then(i=>pn(this.code,i))}else throw Error("Unknown type, must be binary type")}}});var Kl={};Qe(Kl,{sha256:()=>ui,sha512:()=>x4});var w1,ui,x4,ma=it(()=>{Hl();w1=n=>async t=>new Uint8Array(await crypto.subtle.digest(n,t)),ui=jf({name:"sha2-256",code:18,encode:w1("SHA-256")}),x4=jf({name:"sha2-512",code:19,encode:w1("SHA-512")})});var jl={};Qe(jl,{identity:()=>Jf});var E1,w4,_1,E4,Jf,Gl=it(()=>{fi();ro();E1=0,w4="identity",_1=Sr,E4=n=>pn(E1,_1(n)),Jf={code:E1,name:w4,encode:_1,digest:E4}});var Jl={};Qe(Jl,{code:()=>A4,decode:()=>M4,encode:()=>S4,name:()=>_4});var _4,A4,S4,M4,A1=it(()=>{fi();_4="raw",A4=85,S4=n=>Sr(n),M4=n=>Sr(n)});var Vl={};Qe(Vl,{code:()=>D4,decode:()=>I4,encode:()=>O4,name:()=>C4});var T4,k4,C4,D4,O4,I4,S1=it(()=>{T4=new TextEncoder,k4=new TextDecoder,C4="json",D4=512,O4=n=>T4.encode(JSON.stringify(n)),I4=n=>JSON.parse(k4.decode(n))});var Wl=it(()=>{Hr();Uf();fi();Hl();ro()});var M1={};Qe(M1,{CID:()=>Me,bases:()=>Zo,bytes:()=>ca,codecs:()=>N4,digest:()=>to,hasher:()=>Gf,hashes:()=>R4,varint:()=>Vo});var Zo,R4,N4,Vf=it(()=>{p1();m1();b1();g1();y1();Ol();Xo();Ff();Hf();x1();ma();Gl();A1();S1();Wl();Zo={...Ll,...Bl,...Ul,...Fl,...$l,...Dl,...Il,...Cl,...ql,...zl},R4={...Kl,...jl},N4={raw:Jl,json:Vl}});function k1(n,t,r,i){return{name:n,prefix:t,encoder:{name:n,prefix:t,encode:r},decoder:{decode:i}}}var T1,Yl,P4,Wf,Xl=it(()=>{Vf();zf();T1=k1("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),Yl=k1("ascii","a",n=>{let t="a";for(let r=0;r<n.length;r++)t+=String.fromCharCode(n[r]);return t},n=>{n=n.substring(1);let t=pa(n.length);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}),P4={utf8:T1,"utf-8":T1,hex:Zo.base16,latin1:Yl,ascii:Yl,binary:Yl,...Zo},Wf=P4});var C1={};Qe(C1,{fromString:()=>je});function je(n,t="utf8"){let r=Wf[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?no(globalThis.Buffer.from(n,"utf-8")):r.decoder.decode(`${r.prefix}${n}`)}var ba=it(()=>{Xl();da()});var D1={};Qe(D1,{toString:()=>Ye});function Ye(n,t="utf8"){let r=Wf[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):r.encoder.encode(n).substring(1)}var Qo=it(()=>{Xl()});var Ia=de((Ca,gs)=>{var Q8=200,$b="__lodash_hash_undefined__",qb=9007199254740991,Gh="[object Arguments]",eE="[object Array]",zb="[object Boolean]",Hb="[object Date]",tE="[object Error]",Jh="[object Function]",Kb="[object GeneratorFunction]",Cc="[object Map]",jb="[object Number]",Vh="[object Object]",Cb="[object Promise]",Gb="[object RegExp]",Dc="[object Set]",Jb="[object String]",Vb="[object Symbol]",$h="[object WeakMap]",Wb="[object ArrayBuffer]",Oc="[object DataView]",Yb="[object Float32Array]",Xb="[object Float64Array]",Zb="[object Int8Array]",Qb="[object Int16Array]",e2="[object Int32Array]",t2="[object Uint8Array]",r2="[object Uint8ClampedArray]",n2="[object Uint16Array]",i2="[object Uint32Array]",rE=/[\\^$.*+?()[\]{}|]/g,nE=/\w*$/,iE=/^\[object .+?Constructor\]$/,oE=/^(?:0|[1-9]\d*)$/,ht={};ht[Gh]=ht[eE]=ht[Wb]=ht[Oc]=ht[zb]=ht[Hb]=ht[Yb]=ht[Xb]=ht[Zb]=ht[Qb]=ht[e2]=ht[Cc]=ht[jb]=ht[Vh]=ht[Gb]=ht[Dc]=ht[Jb]=ht[Vb]=ht[t2]=ht[r2]=ht[n2]=ht[i2]=!0;ht[tE]=ht[Jh]=ht[$h]=!1;var sE=typeof global=="object"&&global&&global.Object===Object&&global,aE=typeof self=="object"&&self&&self.Object===Object&&self,$n=sE||aE||Function("return this")(),o2=typeof Ca=="object"&&Ca&&!Ca.nodeType&&Ca,Db=o2&&typeof gs=="object"&&gs&&!gs.nodeType&&gs,fE=Db&&Db.exports===o2;function cE(n,t){return n.set(t[0],t[1]),n}function uE(n,t){return n.add(t),n}function lE(n,t){for(var r=-1,i=n?n.length:0;++r<i&&t(n[r],r,n)!==!1;);return n}function hE(n,t){for(var r=-1,i=t.length,o=n.length;++r<i;)n[o+r]=t[r];return n}function s2(n,t,r,i){var o=-1,s=n?n.length:0;for(i&&s&&(r=n[++o]);++o<s;)r=t(r,n[o],o,n);return r}function dE(n,t){for(var r=-1,i=Array(n);++r<n;)i[r]=t(r);return i}function pE(n,t){return n?.[t]}function a2(n){var t=!1;if(n!=null&&typeof n.toString!="function")try{t=!!(n+"")}catch{}return t}function Ob(n){var t=-1,r=Array(n.size);return n.forEach(function(i,o){r[++t]=[o,i]}),r}function Wh(n,t){return function(r){return n(t(r))}}function Ib(n){var t=-1,r=Array(n.size);return n.forEach(function(i){r[++t]=i}),r}var mE=Array.prototype,bE=Function.prototype,Ic=Object.prototype,Fh=$n["__core-js_shared__"],Rb=function(){var n=/[^.]+$/.exec(Fh&&Fh.keys&&Fh.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),f2=bE.toString,pi=Ic.hasOwnProperty,Rc=Ic.toString,gE=RegExp("^"+f2.call(pi).replace(rE,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Nb=fE?$n.Buffer:void 0,Pb=$n.Symbol,Lb=$n.Uint8Array,yE=Wh(Object.getPrototypeOf,Object),vE=Object.create,xE=Ic.propertyIsEnumerable,wE=mE.splice,Bb=Object.getOwnPropertySymbols,EE=Nb?Nb.isBuffer:void 0,_E=Wh(Object.keys,Object),qh=xs($n,"DataView"),Da=xs($n,"Map"),zh=xs($n,"Promise"),Hh=xs($n,"Set"),Kh=xs($n,"WeakMap"),Oa=xs(Object,"create"),AE=yo(qh),SE=yo(Da),ME=yo(zh),TE=yo(Hh),kE=yo(Kh),Ub=Pb?Pb.prototype:void 0,Fb=Ub?Ub.valueOf:void 0;function go(n){var t=-1,r=n?n.length:0;for(this.clear();++t<r;){var i=n[t];this.set(i[0],i[1])}}function CE(){this.__data__=Oa?Oa(null):{}}function DE(n){return this.has(n)&&delete this.__data__[n]}function OE(n){var t=this.__data__;if(Oa){var r=t[n];return r===$b?void 0:r}return pi.call(t,n)?t[n]:void 0}function IE(n){var t=this.__data__;return Oa?t[n]!==void 0:pi.call(t,n)}function RE(n,t){var r=this.__data__;return r[n]=Oa&&t===void 0?$b:t,this}go.prototype.clear=CE;go.prototype.delete=DE;go.prototype.get=OE;go.prototype.has=IE;go.prototype.set=RE;function qn(n){var t=-1,r=n?n.length:0;for(this.clear();++t<r;){var i=n[t];this.set(i[0],i[1])}}function NE(){this.__data__=[]}function PE(n){var t=this.__data__,r=Nc(t,n);if(r<0)return!1;var i=t.length-1;return r==i?t.pop():wE.call(t,r,1),!0}function LE(n){var t=this.__data__,r=Nc(t,n);return r<0?void 0:t[r][1]}function BE(n){return Nc(this.__data__,n)>-1}function UE(n,t){var r=this.__data__,i=Nc(r,n);return i<0?r.push([n,t]):r[i][1]=t,this}qn.prototype.clear=NE;qn.prototype.delete=PE;qn.prototype.get=LE;qn.prototype.has=BE;qn.prototype.set=UE;function ys(n){var t=-1,r=n?n.length:0;for(this.clear();++t<r;){var i=n[t];this.set(i[0],i[1])}}function FE(){this.__data__={hash:new go,map:new(Da||qn),string:new go}}function $E(n){return Pc(this,n).delete(n)}function qE(n){return Pc(this,n).get(n)}function zE(n){return Pc(this,n).has(n)}function HE(n,t){return Pc(this,n).set(n,t),this}ys.prototype.clear=FE;ys.prototype.delete=$E;ys.prototype.get=qE;ys.prototype.has=zE;ys.prototype.set=HE;function vs(n){this.__data__=new qn(n)}function KE(){this.__data__=new qn}function jE(n){return this.__data__.delete(n)}function GE(n){return this.__data__.get(n)}function JE(n){return this.__data__.has(n)}function VE(n,t){var r=this.__data__;if(r instanceof qn){var i=r.__data__;if(!Da||i.length<Q8-1)return i.push([n,t]),this;r=this.__data__=new ys(i)}return r.set(n,t),this}vs.prototype.clear=KE;vs.prototype.delete=jE;vs.prototype.get=GE;vs.prototype.has=JE;vs.prototype.set=VE;function WE(n,t){var r=Xh(n)||v9(n)?dE(n.length,String):[],i=r.length,o=!!i;for(var s in n)(t||pi.call(n,s))&&!(o&&(s=="length"||m9(s,i)))&&r.push(s);return r}function c2(n,t,r){var i=n[t];(!(pi.call(n,t)&&d2(i,r))||r===void 0&&!(t in n))&&(n[t]=r)}function Nc(n,t){for(var r=n.length;r--;)if(d2(n[r][0],t))return r;return-1}function YE(n,t){return n&&u2(t,Zh(t),n)}function jh(n,t,r,i,o,s,a){var f;if(i&&(f=s?i(n,o,s,a):i(n)),f!==void 0)return f;if(!Lc(n))return n;var l=Xh(n);if(l){if(f=h9(n),!t)return c9(n,f)}else{var p=bo(n),b=p==Jh||p==Kb;if(w9(n))return r9(n,t);if(p==Vh||p==Gh||b&&!s){if(a2(n))return s?n:{};if(f=d9(b?{}:n),!t)return u9(n,YE(f,n))}else{if(!ht[p])return s?n:{};f=p9(n,p,jh,t)}}a||(a=new vs);var v=a.get(n);if(v)return v;if(a.set(n,f),!l)var C=r?l9(n):Zh(n);return lE(C||n,function(D,S){C&&(S=D,D=n[S]),c2(f,S,jh(D,t,r,i,S,n,a))}),f}function XE(n){return Lc(n)?vE(n):{}}function ZE(n,t,r){var i=t(n);return Xh(n)?i:hE(i,r(n))}function QE(n){return Rc.call(n)}function e9(n){if(!Lc(n)||g9(n))return!1;var t=m2(n)||a2(n)?gE:iE;return t.test(yo(n))}function t9(n){if(!h2(n))return _E(n);var t=[];for(var r in Object(n))pi.call(n,r)&&r!="constructor"&&t.push(r);return t}function r9(n,t){if(t)return n.slice();var r=new n.constructor(n.length);return n.copy(r),r}function Yh(n){var t=new n.constructor(n.byteLength);return new Lb(t).set(new Lb(n)),t}function n9(n,t){var r=t?Yh(n.buffer):n.buffer;return new n.constructor(r,n.byteOffset,n.byteLength)}function i9(n,t,r){var i=t?r(Ob(n),!0):Ob(n);return s2(i,cE,new n.constructor)}function o9(n){var t=new n.constructor(n.source,nE.exec(n));return t.lastIndex=n.lastIndex,t}function s9(n,t,r){var i=t?r(Ib(n),!0):Ib(n);return s2(i,uE,new n.constructor)}function a9(n){return Fb?Object(Fb.call(n)):{}}function f9(n,t){var r=t?Yh(n.buffer):n.buffer;return new n.constructor(r,n.byteOffset,n.length)}function c9(n,t){var r=-1,i=n.length;for(t||(t=Array(i));++r<i;)t[r]=n[r];return t}function u2(n,t,r,i){r||(r={});for(var o=-1,s=t.length;++o<s;){var a=t[o],f=i?i(r[a],n[a],a,r,n):void 0;c2(r,a,f===void 0?n[a]:f)}return r}function u9(n,t){return u2(n,l2(n),t)}function l9(n){return ZE(n,Zh,l2)}function Pc(n,t){var r=n.__data__;return b9(t)?r[typeof t=="string"?"string":"hash"]:r.map}function xs(n,t){var r=pE(n,t);return e9(r)?r:void 0}var l2=Bb?Wh(Bb,Object):A9,bo=QE;(qh&&bo(new qh(new ArrayBuffer(1)))!=Oc||Da&&bo(new Da)!=Cc||zh&&bo(zh.resolve())!=Cb||Hh&&bo(new Hh)!=Dc||Kh&&bo(new Kh)!=$h)&&(bo=function(n){var t=Rc.call(n),r=t==Vh?n.constructor:void 0,i=r?yo(r):void 0;if(i)switch(i){case AE:return Oc;case SE:return Cc;case ME:return Cb;case TE:return Dc;case kE:return $h}return t});function h9(n){var t=n.length,r=n.constructor(t);return t&&typeof n[0]=="string"&&pi.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function d9(n){return typeof n.constructor=="function"&&!h2(n)?XE(yE(n)):{}}function p9(n,t,r,i){var o=n.constructor;switch(t){case Wb:return Yh(n);case zb:case Hb:return new o(+n);case Oc:return n9(n,i);case Yb:case Xb:case Zb:case Qb:case e2:case t2:case r2:case n2:case i2:return f9(n,i);case Cc:return i9(n,i,r);case jb:case Jb:return new o(n);case Gb:return o9(n);case Dc:return s9(n,i,r);case Vb:return a9(n)}}function m9(n,t){return t=t??qb,!!t&&(typeof n=="number"||oE.test(n))&&n>-1&&n%1==0&&n<t}function b9(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}function g9(n){return!!Rb&&Rb in n}function h2(n){var t=n&&n.constructor,r=typeof t=="function"&&t.prototype||Ic;return n===r}function yo(n){if(n!=null){try{return f2.call(n)}catch{}try{return n+""}catch{}}return""}function y9(n){return jh(n,!0,!0)}function d2(n,t){return n===t||n!==n&&t!==t}function v9(n){return x9(n)&&pi.call(n,"callee")&&(!xE.call(n,"callee")||Rc.call(n)==Gh)}var Xh=Array.isArray;function p2(n){return n!=null&&E9(n.length)&&!m2(n)}function x9(n){return _9(n)&&p2(n)}var w9=EE||S9;function m2(n){var t=Lc(n)?Rc.call(n):"";return t==Jh||t==Kb}function E9(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=qb}function Lc(n){var t=typeof n;return!!n&&(t=="object"||t=="function")}function _9(n){return!!n&&typeof n=="object"}function Zh(n){return p2(n)?WE(n):t9(n)}function A9(){return[]}function S9(){return!1}gs.exports=y9});var v2=de((zn,y2)=>{var g2=typeof self<"u"?self:zn,Bc=function(){function n(){this.fetch=!1,this.DOMException=g2.DOMException}return n.prototype=g2,new n}();(function(n){var t=function(r){var i={searchParams:"URLSearchParams"in n,iterable:"Symbol"in n&&"iterator"in Symbol,blob:"FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in n,arrayBuffer:"ArrayBuffer"in n};function o(_){return _&&DataView.prototype.isPrototypeOf(_)}if(i.arrayBuffer)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=ArrayBuffer.isView||function(_){return _&&s.indexOf(Object.prototype.toString.call(_))>-1};function f(_){if(typeof _!="string"&&(_=String(_)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(_))throw new TypeError("Invalid character in header field name");return _.toLowerCase()}function l(_){return typeof _!="string"&&(_=String(_)),_}function p(_){var u={next:function(){var g=_.shift();return{done:g===void 0,value:g}}};return i.iterable&&(u[Symbol.iterator]=function(){return u}),u}function b(_){this.map={},_ instanceof b?_.forEach(function(u,g){this.append(g,u)},this):Array.isArray(_)?_.forEach(function(u){this.append(u[0],u[1])},this):_&&Object.getOwnPropertyNames(_).forEach(function(u){this.append(u,_[u])},this)}b.prototype.append=function(_,u){_=f(_),u=l(u);var g=this.map[_];this.map[_]=g?g+", "+u:u},b.prototype.delete=function(_){delete this.map[f(_)]},b.prototype.get=function(_){return _=f(_),this.has(_)?this.map[_]:null},b.prototype.has=function(_){return this.map.hasOwnProperty(f(_))},b.prototype.set=function(_,u){this.map[f(_)]=l(u)},b.prototype.forEach=function(_,u){for(var g in this.map)this.map.hasOwnProperty(g)&&_.call(u,this.map[g],g,this)},b.prototype.keys=function(){var _=[];return this.forEach(function(u,g){_.push(g)}),p(_)},b.prototype.values=function(){var _=[];return this.forEach(function(u){_.push(u)}),p(_)},b.prototype.entries=function(){var _=[];return this.forEach(function(u,g){_.push([g,u])}),p(_)},i.iterable&&(b.prototype[Symbol.iterator]=b.prototype.entries);function v(_){if(_.bodyUsed)return Promise.reject(new TypeError("Already read"));_.bodyUsed=!0}function C(_){return new Promise(function(u,g){_.onload=function(){u(_.result)},_.onerror=function(){g(_.error)}})}function D(_){var u=new FileReader,g=C(u);return u.readAsArrayBuffer(_),g}function S(_){var u=new FileReader,g=C(u);return u.readAsText(_),g}function k(_){for(var u=new Uint8Array(_),g=new Array(u.length),d=0;d<u.length;d++)g[d]=String.fromCharCode(u[d]);return g.join("")}function $(_){if(_.slice)return _.slice(0);var u=new Uint8Array(_.byteLength);return u.set(new Uint8Array(_)),u.buffer}function O(){return this.bodyUsed=!1,this._initBody=function(_){this._bodyInit=_,_?typeof _=="string"?this._bodyText=_:i.blob&&Blob.prototype.isPrototypeOf(_)?this._bodyBlob=_:i.formData&&FormData.prototype.isPrototypeOf(_)?this._bodyFormData=_:i.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)?this._bodyText=_.toString():i.arrayBuffer&&i.blob&&o(_)?(this._bodyArrayBuffer=$(_.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(_)||a(_))?this._bodyArrayBuffer=$(_):this._bodyText=_=Object.prototype.toString.call(_):this._bodyText="",this.headers.get("content-type")||(typeof _=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i.blob&&(this.blob=function(){var _=v(this);if(_)return _;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?v(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(D)}),this.text=function(){var _=v(this);if(_)return _;if(this._bodyBlob)return S(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(k(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i.formData&&(this.formData=function(){return this.text().then(X)}),this.json=function(){return this.text().then(JSON.parse)},this}var q=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function j(_){var u=_.toUpperCase();return q.indexOf(u)>-1?u:_}function z(_,u){u=u||{};var g=u.body;if(_ instanceof z){if(_.bodyUsed)throw new TypeError("Already read");this.url=_.url,this.credentials=_.credentials,u.headers||(this.headers=new b(_.headers)),this.method=_.method,this.mode=_.mode,this.signal=_.signal,!g&&_._bodyInit!=null&&(g=_._bodyInit,_.bodyUsed=!0)}else this.url=String(_);if(this.credentials=u.credentials||this.credentials||"same-origin",(u.headers||!this.headers)&&(this.headers=new b(u.headers)),this.method=j(u.method||this.method||"GET"),this.mode=u.mode||this.mode||null,this.signal=u.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&g)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(g)}z.prototype.clone=function(){return new z(this,{body:this._bodyInit})};function X(_){var u=new FormData;return _.trim().split("&").forEach(function(g){if(g){var d=g.split("="),c=d.shift().replace(/\+/g," "),h=d.join("=").replace(/\+/g," ");u.append(decodeURIComponent(c),decodeURIComponent(h))}}),u}function B(_){var u=new b,g=_.replace(/\r?\n[\t ]+/g," ");return g.split(/\r?\n/).forEach(function(d){var c=d.split(":"),h=c.shift().trim();if(h){var x=c.join(":").trim();u.append(h,x)}}),u}O.call(z.prototype);function L(_,u){u||(u={}),this.type="default",this.status=u.status===void 0?200:u.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in u?u.statusText:"OK",this.headers=new b(u.headers),this.url=u.url||"",this._initBody(_)}O.call(L.prototype),L.prototype.clone=function(){return new L(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new b(this.headers),url:this.url})},L.error=function(){var _=new L(null,{status:0,statusText:""});return _.type="error",_};var U=[301,302,303,307,308];L.redirect=function(_,u){if(U.indexOf(u)===-1)throw new RangeError("Invalid status code");return new L(null,{status:u,headers:{location:_}})},r.DOMException=n.DOMException;try{new r.DOMException}catch{r.DOMException=function(u,g){this.message=u,this.name=g;var d=Error(u);this.stack=d.stack},r.DOMException.prototype=Object.create(Error.prototype),r.DOMException.prototype.constructor=r.DOMException}function te(_,u){return new Promise(function(g,d){var c=new z(_,u);if(c.signal&&c.signal.aborted)return d(new r.DOMException("Aborted","AbortError"));var h=new XMLHttpRequest;function x(){h.abort()}h.onload=function(){var E={status:h.status,statusText:h.statusText,headers:B(h.getAllResponseHeaders()||"")};E.url="responseURL"in h?h.responseURL:E.headers.get("X-Request-URL");var w="response"in h?h.response:h.responseText;g(new L(w,E))},h.onerror=function(){d(new TypeError("Network request failed"))},h.ontimeout=function(){d(new TypeError("Network request failed"))},h.onabort=function(){d(new r.DOMException("Aborted","AbortError"))},h.open(c.method,c.url,!0),c.credentials==="include"?h.withCredentials=!0:c.credentials==="omit"&&(h.withCredentials=!1),"responseType"in h&&i.blob&&(h.responseType="blob"),c.headers.forEach(function(E,w){h.setRequestHeader(w,E)}),c.signal&&(c.signal.addEventListener("abort",x),h.onreadystatechange=function(){h.readyState===4&&c.signal.removeEventListener("abort",x)}),h.send(typeof c._bodyInit>"u"?null:c._bodyInit)})}return te.polyfill=!0,n.fetch||(n.fetch=te,n.Headers=b,n.Request=z,n.Response=L),r.Headers=b,r.Request=z,r.Response=L,r.fetch=te,Object.defineProperty(r,"__esModule",{value:!0}),r}({})})(Bc);Bc.fetch.ponyfill=!0;delete Bc.fetch.polyfill;var ws=Bc;zn=ws.fetch;zn.default=ws.fetch;zn.fetch=ws.fetch;zn.Headers=ws.Headers;zn.Request=ws.Request;zn.Response=ws.Response;y2.exports=zn});var S2=de(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});Fc.BrowserRandomSource=void 0;var A2=65536,td=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;let t=typeof self<"u"?self.crypto||self.msCrypto:null;t&&t.getRandomValues!==void 0&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");let r=new Uint8Array(t);for(let i=0;i<r.length;i+=A2)this._crypto.getRandomValues(r.subarray(i,i+Math.min(r.length-i,A2)));return r}};Fc.BrowserRandomSource=td});var Or=de(rd=>{"use strict";Object.defineProperty(rd,"__esModule",{value:!0});function T9(n){for(var t=0;t<n.length;t++)n[t]=0;return n}rd.wipe=T9});var nd=de(()=>{});var M2=de($c=>{"use strict";Object.defineProperty($c,"__esModule",{value:!0});$c.NodeRandomSource=void 0;var k9=Or(),id=class{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof jp<"u"){let t=nd();t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(t);if(r.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");let i=new Uint8Array(t);for(let o=0;o<i.length;o++)i[o]=r[o];return(0,k9.wipe)(r),i}};$c.NodeRandomSource=id});var T2=de(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});qc.SystemRandomSource=void 0;var C9=S2(),D9=M2(),od=class{constructor(){if(this.isAvailable=!1,this.name="",this._source=new C9.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new D9.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)}};qc.SystemRandomSource=od});var k2=de(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});function O9(n,t){var r=n>>>16&65535,i=n&65535,o=t>>>16&65535,s=t&65535;return i*s+(r*s+i*o<<16>>>0)|0}pr.mul=Math.imul||O9;function I9(n,t){return n+t|0}pr.add=I9;function R9(n,t){return n-t|0}pr.sub=R9;function N9(n,t){return n<<t|n>>>32-t}pr.rotl=N9;function P9(n,t){return n<<32-t|n>>>t}pr.rotr=P9;function L9(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}pr.isInteger=Number.isInteger||L9;pr.MAX_SAFE_INTEGER=9007199254740991;pr.isSafeInteger=function(n){return pr.isInteger(n)&&n>=-pr.MAX_SAFE_INTEGER&&n<=pr.MAX_SAFE_INTEGER}});var vo=de(We=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});var C2=k2();function B9(n,t){return t===void 0&&(t=0),(n[t+0]<<8|n[t+1])<<16>>16}We.readInt16BE=B9;function U9(n,t){return t===void 0&&(t=0),(n[t+0]<<8|n[t+1])>>>0}We.readUint16BE=U9;function F9(n,t){return t===void 0&&(t=0),(n[t+1]<<8|n[t])<<16>>16}We.readInt16LE=F9;function $9(n,t){return t===void 0&&(t=0),(n[t+1]<<8|n[t])>>>0}We.readUint16LE=$9;function D2(n,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=n>>>8,t[r+1]=n>>>0,t}We.writeUint16BE=D2;We.writeInt16BE=D2;function O2(n,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=n>>>0,t[r+1]=n>>>8,t}We.writeUint16LE=O2;We.writeInt16LE=O2;function sd(n,t){return t===void 0&&(t=0),n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3]}We.readInt32BE=sd;function ad(n,t){return t===void 0&&(t=0),(n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3])>>>0}We.readUint32BE=ad;function fd(n,t){return t===void 0&&(t=0),n[t+3]<<24|n[t+2]<<16|n[t+1]<<8|n[t]}We.readInt32LE=fd;function cd(n,t){return t===void 0&&(t=0),(n[t+3]<<24|n[t+2]<<16|n[t+1]<<8|n[t])>>>0}We.readUint32LE=cd;function zc(n,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=n>>>24,t[r+1]=n>>>16,t[r+2]=n>>>8,t[r+3]=n>>>0,t}We.writeUint32BE=zc;We.writeInt32BE=zc;function Hc(n,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=n>>>0,t[r+1]=n>>>8,t[r+2]=n>>>16,t[r+3]=n>>>24,t}We.writeUint32LE=Hc;We.writeInt32LE=Hc;function q9(n,t){t===void 0&&(t=0);var r=sd(n,t),i=sd(n,t+4);return r*4294967296+i-(i>>31)*4294967296}We.readInt64BE=q9;function z9(n,t){t===void 0&&(t=0);var r=ad(n,t),i=ad(n,t+4);return r*4294967296+i}We.readUint64BE=z9;function H9(n,t){t===void 0&&(t=0);var r=fd(n,t),i=fd(n,t+4);return i*4294967296+r-(r>>31)*4294967296}We.readInt64LE=H9;function K9(n,t){t===void 0&&(t=0);var r=cd(n,t),i=cd(n,t+4);return i*4294967296+r}We.readUint64LE=K9;function I2(n,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),zc(n/4294967296>>>0,t,r),zc(n>>>0,t,r+4),t}We.writeUint64BE=I2;We.writeInt64BE=I2;function R2(n,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),Hc(n>>>0,t,r),Hc(n/4294967296>>>0,t,r+4),t}We.writeUint64LE=R2;We.writeInt64LE=R2;function j9(n,t,r){if(r===void 0&&(r=0),n%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(n/8>t.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var i=0,o=1,s=n/8+r-1;s>=r;s--)i+=t[s]*o,o*=256;return i}We.readUintBE=j9;function G9(n,t,r){if(r===void 0&&(r=0),n%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(n/8>t.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var i=0,o=1,s=r;s<r+n/8;s++)i+=t[s]*o,o*=256;return i}We.readUintLE=G9;function J9(n,t,r,i){if(r===void 0&&(r=new Uint8Array(n/8)),i===void 0&&(i=0),n%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!C2.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var o=1,s=n/8+i-1;s>=i;s--)r[s]=t/o&255,o*=256;return r}We.writeUintBE=J9;function V9(n,t,r,i){if(r===void 0&&(r=new Uint8Array(n/8)),i===void 0&&(i=0),n%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!C2.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var o=1,s=i;s<i+n/8;s++)r[s]=t/o&255,o*=256;return r}We.writeUintLE=V9;function W9(n,t){t===void 0&&(t=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat32(t)}We.readFloat32BE=W9;function Y9(n,t){t===void 0&&(t=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat32(t,!0)}We.readFloat32LE=Y9;function X9(n,t){t===void 0&&(t=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat64(t)}We.readFloat64BE=X9;function Z9(n,t){t===void 0&&(t=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat64(t,!0)}We.readFloat64LE=Z9;function Q9(n,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat32(r,n),t}We.writeFloat32BE=Q9;function e7(n,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat32(r,n,!0),t}We.writeFloat32LE=e7;function t7(n,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat64(r,n),t}We.writeFloat64BE=t7;function r7(n,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat64(r,n,!0),t}We.writeFloat64LE=r7});var Kn=de(Ht=>{"use strict";Object.defineProperty(Ht,"__esModule",{value:!0});Ht.randomStringForEntropy=Ht.randomString=Ht.randomUint32=Ht.randomBytes=Ht.defaultRandomSource=void 0;var n7=T2(),i7=vo(),N2=Or();Ht.defaultRandomSource=new n7.SystemRandomSource;function ud(n,t=Ht.defaultRandomSource){return t.randomBytes(n)}Ht.randomBytes=ud;function o7(n=Ht.defaultRandomSource){let t=ud(4,n),r=(0,i7.readUint32LE)(t);return(0,N2.wipe)(t),r}Ht.randomUint32=o7;var P2="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function L2(n,t=P2,r=Ht.defaultRandomSource){if(t.length<2)throw new Error("randomString charset is too short");if(t.length>256)throw new Error("randomString charset is too long");let i="",o=t.length,s=256-256%o;for(;n>0;){let a=ud(Math.ceil(n*256/s),r);for(let f=0;f<a.length&&n>0;f++){let l=a[f];l<s&&(i+=t.charAt(l%o),n--)}(0,N2.wipe)(a)}return i}Ht.randomString=L2;function s7(n,t=P2,r=Ht.defaultRandomSource){let i=Math.ceil(n/(Math.log(t.length)/Math.LN2));return L2(i,t,r)}Ht.randomStringForEntropy=s7});var Xr=de((PB,F2)=>{F2.exports={ALT:1,CAT:2,REP:3,RNM:4,TRG:5,TBS:6,TLS:7,UDT:11,AND:12,NOT:13,BKR:14,BKA:15,BKN:16,ABG:17,AEN:18,ACTIVE:100,MATCH:101,EMPTY:102,NOMATCH:103,SEM_PRE:200,SEM_POST:201,SEM_OK:300,SEM_SKIP:301,ATTR_N:400,ATTR_R:401,ATTR_MR:402,LOOKAROUND_NONE:500,LOOKAROUND_AHEAD:501,LOOKAROUND_BEHIND:502,BKR_MODE_UM:601,BKR_MODE_PM:602,BKR_MODE_CS:603,BKR_MODE_CI:604}});var Ua=de((LB,$2)=>{$2.exports={CLASS_MONOSPACE:"apg-mono",CLASS_ACTIVE:"apg-active",CLASS_EMPTY:"apg-empty",CLASS_MATCH:"apg-match",CLASS_NOMATCH:"apg-nomatch",CLASS_LOOKAHEAD:"apg-lh-match",CLASS_LOOKBEHIND:"apg-lb-match",CLASS_REMAINDER:"apg-remainder",CLASS_CTRLCHAR:"apg-ctrl-char",CLASS_LINEEND:"apg-line-end",CLASS_ERROR:"apg-error",CLASS_PHRASE:"apg-phrase",CLASS_EMPTYPHRASE:"apg-empty-phrase",CLASS_STATE:"apg-state",CLASS_STATS:"apg-stats",CLASS_TRACE:"apg-trace",CLASS_GRAMMAR:"apg-grammar",CLASS_RULES:"apg-rules",CLASS_RULESLINK:"apg-rules-link",CLASS_ATTRIBUTES:"apg-attrs"}});var H2=de(Pt=>{var q2=Pt,Kc=4294967292,jc=4294967293,md=4294967294,z2=4294967295,ye=[0,1,3,7,15,31,63,127,255,511,1023],gi=["00","01","02","03","04","05","06","07","08","09","0A","0B","0C","0D","0E","0F","10","11","12","13","14","15","16","17","18","19","1A","1B","1C","1D","1E","1F","20","21","22","23","24","25","26","27","28","29","2A","2B","2C","2D","2E","2F","30","31","32","33","34","35","36","37","38","39","3A","3B","3C","3D","3E","3F","40","41","42","43","44","45","46","47","48","49","4A","4B","4C","4D","4E","4F","50","51","52","53","54","55","56","57","58","59","5A","5B","5C","5D","5E","5F","60","61","62","63","64","65","66","67","68","69","6A","6B","6C","6D","6E","6F","70","71","72","73","74","75","76","77","78","79","7A","7B","7C","7D","7E","7F","80","81","82","83","84","85","86","87","88","89","8A","8B","8C","8D","8E","8F","90","91","92","93","94","95","96","97","98","99","9A","9B","9C","9D","9E","9F","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","AA","AB","AC","AD","AE","AF","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","BA","BB","BC","BD","BE","BF","C0","C1","C2","C3","C4","C5","C6","C7","C8","C9","CA","CB","CC","CD","CE","CF","D0","D1","D2","D3","D4","D5","D6","D7","D8","D9","DA","DB","DC","DD","DE","DF","E0","E1","E2","E3","E4","E5","E6","E7","E8","E9","EA","EB","EC","ED","EE","EF","F0","F1","F2","F3","F4","F5","F6","F7","F8","F9","FA","FB","FC","FD","FE","FF"],h7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),mr=[];h7.forEach(n=>{mr.push(n.charCodeAt(0))});Pt.utf8={encode(n){let t=[];return n.forEach(r=>{if(r>=0&&r<=127)t.push(r);else if(r<=2047)t.push(192+(r>>6&ye[5])),t.push(128+(r&ye[6]));else if(r<55296||r>57343&&r<=65535)t.push(224+(r>>12&ye[4])),t.push(128+(r>>6&ye[6])),t.push(128+(r&ye[6]));else if(r>=65536&&r<=1114111){let i=r>>16&ye[5];t.push(240+(i>>2)),t.push(128+((i&ye[2])<<4)+(r>>12&ye[4])),t.push(128+(r>>6&ye[6])),t.push(128+(r&ye[6]))}else throw new RangeError(`utf8.encode: character out of range: char: ${r}`)}),Buffer.from(t)},decode(n,t){function r(S,k){if((k&192)!==128)return jc;let $=((S&ye[5])<<6)+(k&ye[6]);return $<128?Kc:$}function i(S,k,$){if(($&192)!==128||(k&192)!==128)return jc;let O=((S&ye[4])<<12)+((k&ye[6])<<6)+($&ye[6]);return O<2048?Kc:O>=55296&&O<=57343?md:O}function o(S,k,$,O){if((O&192)!==128||($&192)!==128||(k&192)!==128)return jc;let q=(((S&ye[3])<<2)+(k>>4&ye[2])<<16)+((k&ye[4])<<12)+(($&ye[6])<<6)+(O&ye[6]);return q<65536?Kc:q>1114111?md:q}let s,a,f,l,p,b,v=n.length,C=t?3:0,D=[];for(;C<v;){a=n[C],s=z2;let S=!0;for(;S;){if(a>=0&&a<=127){s=a,b=1;break}if(f=C+1,f<v&&a>=194&&a<=223){s=r(a,n[f]),b=2;break}if(l=C+2,l<v&&a>=224&&a<=239){s=i(a,n[f],n[l]),b=3;break}if(p=C+3,p<v&&a>=240&&a<=244){s=o(a,n[f],n[l],n[p]),b=4;break}break}if(s>1114111){let k=`byte[${C}]`;throw s===z2?new RangeError(`utf8.decode: ill-formed UTF8 byte sequence found at: ${k}`):s===jc?new RangeError(`utf8.decode: illegal trailing byte found at: ${k}`):s===md?new RangeError(`utf8.decode: code point out of range found at: ${k}`):s===Kc?new RangeError(`utf8.decode: non-shortest form found at: ${k}`):new RangeError(`utf8.decode: unrecognized error found at: ${k}`)}D.push(s),C+=b}return D}};Pt.utf16be={encode(n){let t=[],r,i,o;for(let s=0;s<n.length;s+=1)if(r=n[s],r>=0&&r<=55295||r>=57344&&r<=65535)t.push(r>>8&ye[8]),t.push(r&ye[8]);else if(r>=65536&&r<=1114111)o=r-65536,i=55296+(o>>10),o=56320+(o&ye[10]),t.push(i>>8&ye[8]),t.push(i&ye[8]),t.push(o>>8&ye[8]),t.push(o&ye[8]);else throw new RangeError(`utf16be.encode: UTF16BE value out of range: char[${s}]: ${r}`);return Buffer.from(t)},decode(n,t){if(n.length%2>0)throw new RangeError(`utf16be.decode: data length must be even multiple of 2: length: ${n.length}`);let r=[],i=n.length,o=t?2:0,s=0,a,f,l,p,b,v;for(;o<i;){for(;;){if(l=o+1,l<i){if(b=(n[o]<<8)+n[l],b<55296||b>57343){a=b,f=2;break}if(p=o+3,p<i&&(v=(n[o+2]<<8)+n[p],b<=56319&&v>=56320&&v<=57343)){a=65536+(b-55296<<10)+(v-56320),f=4;break}}throw new RangeError(`utf16be.decode: ill-formed UTF16BE byte sequence found: byte[${o}]`)}r[s++]=a,o+=f}return r}};Pt.utf16le={encode(n){let t=[],r,i,o;for(let s=0;s<n.length;s+=1)if(r=n[s],r>=0&&r<=55295||r>=57344&&r<=65535)t.push(r&ye[8]),t.push(r>>8&ye[8]);else if(r>=65536&&r<=1114111)o=r-65536,i=55296+(o>>10),o=56320+(o&ye[10]),t.push(i&ye[8]),t.push(i>>8&ye[8]),t.push(o&ye[8]),t.push(o>>8&ye[8]);else throw new RangeError(`utf16le.encode: UTF16LE value out of range: char[${s}]: ${r}`);return Buffer.from(t)},decode(n,t){if(n.length%2>0)throw new RangeError(`utf16le.decode: data length must be even multiple of 2: length: ${n.length}`);let r=[],i=n.length,o=t?2:0,s=0,a,f,l,p,b,v;for(;o<i;){for(;;){if(l=o+1,l<i){if(b=(n[l]<<8)+n[o],b<55296||b>57343){a=b,f=2;break}if(p=o+3,p<i&&(v=(n[p]<<8)+n[o+2],b<=56319&&v>=56320&&v<=57343)){a=65536+(b-55296<<10)+(v-56320),f=4;break}}throw new RangeError(`utf16le.decode: ill-formed UTF16LE byte sequence found: byte[${o}]`)}r[s++]=a,o+=f}return r}};Pt.utf32be={encode(n){let t=Buffer.alloc(n.length*4),r=0;return n.forEach(i=>{if(i>=55296&&i<=57343||i>1114111)throw new RangeError(`utf32be.encode: UTF32BE character code out of range: char[${r/4}]: ${i}`);t[r++]=i>>24&ye[8],t[r++]=i>>16&ye[8],t[r++]=i>>8&ye[8],t[r++]=i&ye[8]}),t},decode(n,t){if(n.length%4>0)throw new RangeError(`utf32be.decode: UTF32BE byte length must be even multiple of 4: length: ${n.length}`);let r=[],i=t?4:0;for(;i<n.length;i+=4){let o=(n[i]<<24)+(n[i+1]<<16)+(n[i+2]<<8)+n[i+3];if(o>=55296&&o<=57343||o>1114111)throw new RangeError(`utf32be.decode: UTF32BE character code out of range: char[${i/4}]: ${o}`);r.push(o)}return r}};Pt.utf32le={encode(n){let t=Buffer.alloc(n.length*4),r=0;return n.forEach(i=>{if(i>=55296&&i<=57343||i>1114111)throw new RangeError(`utf32le.encode: UTF32LE character code out of range: char[${r/4}]: ${i}`);t[r++]=i&ye[8],t[r++]=i>>8&ye[8],t[r++]=i>>16&ye[8],t[r++]=i>>24&ye[8]}),t},decode(n,t){if(n.length%4>0)throw new RangeError(`utf32be.decode: UTF32LE byte length must be even multiple of 4: length: ${n.length}`);let r=[],i=t?4:0;for(;i<n.length;i+=4){let o=(n[i+3]<<24)+(n[i+2]<<16)+(n[i+1]<<8)+n[i];if(o>=55296&&o<=57343||o>1114111)throw new RangeError(`utf32le.encode: UTF32LE character code out of range: char[${i/4}]: ${o}`);r.push(o)}return r}};Pt.uint7={encode(n){let t=Buffer.alloc(n.length);for(let r=0;r<n.length;r+=1){if(n[r]>127)throw new RangeError(`uint7.encode: UINT7 character code out of range: char[${r}]: ${n[r]}`);t[r]=n[r]}return t},decode(n){let t=[];for(let r=0;r<n.length;r+=1){if(n[r]>127)throw new RangeError(`uint7.decode: UINT7 character code out of range: byte[${r}]: ${n[r]}`);t[r]=n[r]}return t}};Pt.uint8={encode(n){let t=Buffer.alloc(n.length);for(let r=0;r<n.length;r+=1){if(n[r]>255)throw new RangeError(`uint8.encode: UINT8 character code out of range: char[${r}]: ${n[r]}`);t[r]=n[r]}return t},decode(n){let t=[];for(let r=0;r<n.length;r+=1)t[r]=n[r];return t}};Pt.uint16be={encode(n){let t=Buffer.alloc(n.length*2),r=0;return n.forEach(i=>{if(i>65535)throw new RangeError(`uint16be.encode: UINT16BE character code out of range: char[${r/2}]: ${i}`);t[r++]=i>>8&ye[8],t[r++]=i&ye[8]}),t},decode(n){if(n.length%2>0)throw new RangeError(`uint16be.decode: UINT16BE byte length must be even multiple of 2: length: ${n.length}`);let t=[];for(let r=0;r<n.length;r+=2)t.push((n[r]<<8)+n[r+1]);return t}};Pt.uint16le={encode(n){let t=Buffer.alloc(n.length*2),r=0;return n.forEach(i=>{if(i>65535)throw new RangeError(`uint16le.encode: UINT16LE character code out of range: char[${r/2}]: ${i}`);t[r++]=i&ye[8],t[r++]=i>>8&ye[8]}),t},decode(n){if(n.length%2>0)throw new RangeError(`uint16le.decode: UINT16LE byte length must be even multiple of 2: length: ${n.length}`);let t=[];for(let r=0;r<n.length;r+=2)t.push((n[r+1]<<8)+n[r]);return t}};Pt.uint32be={encode(n){let t=Buffer.alloc(n.length*4),r=0;return n.forEach(i=>{t[r++]=i>>24&ye[8],t[r++]=i>>16&ye[8],t[r++]=i>>8&ye[8],t[r++]=i&ye[8]}),t},decode(n){if(n.length%4>0)throw new RangeError(`uint32be.decode: UINT32BE byte length must be even multiple of 4: length: ${n.length}`);let t=[];for(let r=0;r<n.length;r+=4)t.push((n[r]<<24)+(n[r+1]<<16)+(n[r+2]<<8)+n[r+3]);return t}};Pt.uint32le={encode(n){let t=Buffer.alloc(n.length*4),r=0;return n.forEach(i=>{t[r++]=i&ye[8],t[r++]=i>>8&ye[8],t[r++]=i>>16&ye[8],t[r++]=i>>24&ye[8]}),t},decode(n){if(n.length%4>0)throw new RangeError(`uint32le.decode: UINT32LE byte length must be even multiple of 4: length: ${n.length}`);let t=[];for(let r=0;r<n.length;r+=4)t.push((n[r+3]<<24)+(n[r+2]<<16)+(n[r+1]<<8)+n[r]);return t}};Pt.string={encode(n){return q2.utf16le.encode(n).toString("utf16le")},decode(n){return q2.utf16le.decode(Buffer.from(n,"utf16le"),0)}};Pt.escaped={encode(n){let t=[];for(let r=0;r<n.length;r+=1){let i=n[r];if(i===96)t.push(i),t.push(i);else if(i===10)t.push(i);else if(i>=32&&i<=126)t.push(i);else{let o="";if(i>=0&&i<=31)o+=`\`x${gi[i]}`;else if(i>=127&&i<=255)o+=`\`x${gi[i]}`;else if(i>=256&&i<=65535)o+=`\`u${gi[i>>8&ye[8]]}${gi[i&ye[8]]}`;else if(i>=65536&&i<=4294967295){o+="`u{";let a=i>>24&ye[8];a>0&&(o+=gi[a]),o+=`${gi[i>>16&ye[8]]+gi[i>>8&ye[8]]+gi[i&ye[8]]}}`}else throw new Error("escape.encode(char): char > 0xffffffff not allowed");Buffer.from(o).forEach(a=>{t.push(a)})}}return Buffer.from(t)},decode(n){function t(v){return v>=48&&v<=57||v>=65&&v<=70||v>=97&&v<=102}function r(v,C,D){let S={char:null,nexti:v+2,error:!0};if(v+1<C&&t(D[v])&&t(D[v+1])){let k=String.fromCodePoint(D[v],D[v+1]);S.char=parseInt(k,16),Number.isNaN(S.char)||(S.error=!1)}return S}function i(v,C,D){let S={char:null,nexti:v+4,error:!0};if(v+3<C&&t(D[v])&&t(D[v+1])&&t(D[v+2])&&t(D[v+3])){let k=String.fromCodePoint(D[v],D[v+1],D[v+2],D[v+3]);S.char=parseInt(k,16),Number.isNaN(S.char)||(S.error=!1)}return S}function o(v,C,D){let S={char:null,nexti:v+4,error:!0},k="";for(;v<C&&t(D[v]);)k+=String.fromCodePoint(D[v]),v+=1;return S.char=parseInt(k,16),D[v]===125&&!Number.isNaN(S.char)&&(S.error=!1),S.nexti=v+1,S}let s=[],a=n.length,f,l,p,b=0;for(;b<a;){for(;;){if(p=!0,n[b]!==96){s.push(n[b]),b+=1,p=!1;break}if(f=b+1,f>=a)break;if(n[f]===96){s.push(96),b+=2,p=!1;break}if(n[f]===120){if(l=r(f+1,a,n),l.error)break;s.push(l.char),b=l.nexti,p=!1;break}if(n[f]===117){if(n[f+1]===123){if(l=o(f+2,a,n),l.error)break;s.push(l.char),b=l.nexti,p=!1;break}if(l=i(f+1,a,n),l.error)break;s.push(l.char),b=l.nexti,p=!1;break}break}if(p)throw new Error(`escaped.decode: ill-formed escape sequence at buf[${b}]`)}return s}};var Fa=13,Ir=10;Pt.lineEnds={crlf(n){let t=[],r=0;for(;r<n.length;)switch(n[r]){case Fa:r+1<n.length&&n[r+1]===Ir?r+=2:r+=1,t.push(Fa),t.push(Ir);break;case Ir:t.push(Fa),t.push(Ir),r+=1;break;default:t.push(n[r]),r+=1;break}return t.length>0&&t[t.length-1]!==Ir&&(t.push(Fa),t.push(Ir)),t},lf(n){let t=[],r=0;for(;r<n.length;)switch(n[r]){case Fa:r+1<n.length&&n[r+1]===Ir?r+=2:r+=1,t.push(Ir);break;case Ir:t.push(Ir),r+=1;break;default:t.push(n[r]),r+=1;break}return t.length>0&&t[t.length-1]!==Ir&&t.push(Ir),t}};Pt.base64={encode(n){if(n.length===0)return Buffer.alloc(0);let t,r,i,o=n.length%3;o=o>0?3-o:0;let s=(n.length+o)/3,a=Buffer.alloc(s*4);o>0&&(s-=1),t=0,r=0;for(let f=0;f<s;f+=1)i=n[t++]<<16,i+=n[t++]<<8,i+=n[t++],a[r++]=mr[i>>18&ye[6]],a[r++]=mr[i>>12&ye[6]],a[r++]=mr[i>>6&ye[6]],a[r++]=mr[i&ye[6]];if(o===0)return a;if(o===1)return i=n[t++]<<16,i+=n[t]<<8,a[r++]=mr[i>>18&ye[6]],a[r++]=mr[i>>12&ye[6]],a[r++]=mr[i>>6&ye[6]],a[r]=mr[64],a;if(o===2)return i=n[t]<<16,a[r++]=mr[i>>18&ye[6]],a[r++]=mr[i>>12&ye[6]],a[r++]=mr[64],a[r]=mr[64],a},decode(n){function t(b){let v=[],C=0;for(let D=0;D<b.length;D+=1){let S=b[D],k=!0;for(;k&&!(S===32||S===9||S===10||S===13);){if(S>=65&&S<=90){v.push(S-65);break}if(S>=97&&S<=122){v.push(S-71);break}if(S>=48&&S<=57){v.push(S+4);break}if(S===43){v.push(62);break}if(S===47){v.push(63);break}if(S===61){v.push(64),C+=1;break}throw new RangeError(`base64.decode: invalid character buf[${D}]: ${S}`)}}if(v.length%4>0)throw new RangeError(`base64.decode: string length not integral multiple of 4: ${v.length}`);switch(C){case 0:break;case 1:if(v[v.length-1]!==64)throw new RangeError("base64.decode: one tail character found: not last character");break;case 2:if(v[v.length-1]!==64||v[v.length-2]!==64)throw new RangeError("base64.decode: two tail characters found: not last characters");break;default:throw new RangeError(`base64.decode: more than two tail characters found: ${C}`)}return{tail:C,buf:Buffer.from(v)}}if(n.length===0)return Buffer.alloc(0);let r=t(n),{tail:i}=r,o=r.buf,s,a,f,l=o.length/4,p=Buffer.alloc(l*3-i);i>0&&(l-=1),a=0,s=0;for(let b=0;b<l;b+=1)f=o[s++]<<18,f+=o[s++]<<12,f+=o[s++]<<6,f+=o[s++],p[a++]=f>>16&ye[8],p[a++]=f>>8&ye[8],p[a++]=f&ye[8];return i===1&&(f=o[s++]<<18,f+=o[s++]<<12,f+=o[s]<<6,p[a++]=f>>16&ye[8],p[a]=f>>8&ye[8]),i===2&&(f=o[s++]<<18,f+=o[s++]<<12,p[a]=f>>16&ye[8]),p},toString(n){if(n.length%4>0)throw new RangeError(`base64.toString: input buffer length not multiple of 4: ${n.length}`);let t="",r=0;function i(s,a,f,l){switch(r){case 76:t+=`\r
${s}${a}${f}${l}`,r=4;break;case 75:t+=`${s}\r
${a}${f}${l}`,r=3;break;case 74:t+=`${s+a}\r
${f}${l}`,r=2;break;case 73:t+=`${s+a+f}\r
${l}`,r=1;break;default:t+=s+a+f+l,r+=4;break}}function o(s){return s>=65&&s<=90||s>=97&&s<=122||s>=48&&s<=57||s===43||s===47||s===61}for(let s=0;s<n.length;s+=4){for(let a=s;a<s+4;a+=1)if(!o(n[a]))throw new RangeError(`base64.toString: buf[${a}]: ${n[a]} : not valid base64 character code`);i(String.fromCharCode(n[s]),String.fromCharCode(n[s+1]),String.fromCharCode(n[s+2]),String.fromCharCode(n[s+3]))}return t}}});var vd=de(qa=>{var K2=qa,nt=H2(),$a="UTF8",gd="UTF16",yn="UTF16BE",jn="UTF16LE",yd="UTF32",vn="UTF32BE",Gn="UTF32LE",_s="UINT7",j2="ASCII",G2="BINARY",As="UINT8",J2="UINT16",Gc="UINT16LE",Ss="UINT16BE",V2="UINT32",Jc="UINT32LE",Ms="UINT32BE",Vc="ESCAPED",yi="STRING",d7=function(t){t.type=$a;let r=t.data;t.bom=0,r.length>=3&&r[0]===239&&r[1]===187&&r[2]===191&&(t.bom=3)},p7=function(t){let r=t.data;switch(t.bom=0,t.type){case gd:t.type=yn,r.length>=2&&(r[0]===254&&r[1]===255?t.bom=2:r[0]===255&&r[1]===254&&(t.type=jn,t.bom=2));break;case yn:if(t.type=yn,r.length>=2){if(r[0]===254&&r[1]===255)t.bom=2;else if(r[0]===255&&r[1]===254)throw new TypeError(`src type: "${yn}" specified but BOM is for "${jn}"`)}break;case jn:if(t.type=jn,r.length>=0){if(r[0]===254&&r[1]===255)throw new TypeError(`src type: "${jn}" specified but BOM is for "${yn}"`);r[0]===255&&r[1]===254&&(t.bom=2)}break;default:throw new TypeError(`UTF16 BOM: src type "${t.type}" unrecognized`)}},m7=function(t){let r=t.data;switch(t.bom=0,t.type){case yd:t.type=vn,r.length>=4&&(r[0]===0&&r[1]===0&&r[2]===254&&r[3]===255&&(t.bom=4),r[0]===255&&r[1]===254&&r[2]===0&&r[3]===0&&(t.type=Gn,t.bom=4));break;case vn:if(t.type=vn,r.length>=4&&(r[0]===0&&r[1]===0&&r[2]===254&&r[3]===255&&(t.bom=4),r[0]===255&&r[1]===254&&r[2]===0&&r[3]===0))throw new TypeError(`src type: ${vn} specified but BOM is for ${Gn}"`);break;case Gn:if(t.type=Gn,r.length>=4){if(r[0]===0&&r[1]===0&&r[2]===254&&r[3]===255)throw new TypeError(`src type: "${Gn}" specified but BOM is for "${vn}"`);r[0]===255&&r[1]===254&&r[2]===0&&r[3]===0&&(t.bom=4)}break;default:throw new TypeError(`UTF32 BOM: src type "${t.type}" unrecognized`)}},b7=function(t,r){function i(s){let a={type:"",base64:!1},l=/^(base64:)?([a-zA-Z0-9]+)$/i.exec(s);return l&&(l[2]&&(a.type=l[2].toUpperCase()),l[1]&&(a.base64=!0)),a}if(typeof t!="string"||t==="")throw new TypeError(`type: "${t}" not recognized`);let o=i(t.toUpperCase());if(o.base64){if(o.type===yi)throw new TypeError(`type: "${t} "BASE64:" prefix not allowed with type ${yi}`);if(Buffer.isBuffer(r))o.data=nt.base64.decode(r);else if(typeof r=="string"){let s=Buffer.from(r,"ascii");o.data=nt.base64.decode(s)}else throw new TypeError(`type: "${t} unrecognized data type: typeof(data): ${typeof r}`)}else o.data=r;switch(o.type){case $a:d7(o);break;case gd:case yn:case jn:p7(o);break;case yd:case vn:case Gn:m7(o);break;case J2:o.type=Ss;break;case V2:o.type=Ms;break;case j2:o.type=_s;break;case G2:o.type=As;break;case _s:case As:case Gc:case Ss:case Jc:case Ms:case yi:case Vc:break;default:throw new TypeError(`type: "${t}" not recognized`)}if(o.type===yi){if(typeof o.data!="string")throw new TypeError(`type: "${t}" but data is not a string`)}else if(!Buffer.isBuffer(o.data))throw new TypeError(`type: "${t}" but data is not a Buffer`);return o},g7=function(t,r){function i(s){let a,f,l={crlf:!1,lf:!1,base64:!1,type:""},p=!0;for(;p;){if(f=s,a=s.slice(0,5),a==="CRLF:"){l.crlf=!0,f=s.slice(5);break}if(a=s.slice(0,3),a==="LF:"){l.lf=!0,f=s.slice(3);break}break}return a=f.split(":"),a.length===1?l.type=a[0]:a.length===2&&a[1]==="BASE64"&&(l.base64=!0,l.type=a[0]),l}if(!Array.isArray(r))throw new TypeError(`dst chars: not array: "${typeof r}`);if(typeof t!="string")throw new TypeError(`dst type: not string: "${typeof t}`);let o=i(t.toUpperCase());switch(o.type){case $a:case yn:case jn:case vn:case Gn:case _s:case As:case Gc:case Ss:case Jc:case Ms:case Vc:break;case yi:if(o.base64)throw new TypeError(`":BASE64" suffix not allowed with type ${yi}`);break;case j2:o.type=_s;break;case G2:o.type=As;break;case gd:o.type=yn;break;case yd:o.type=vn;break;case J2:o.type=Ss;break;case V2:o.type=Ms;break;default:throw new TypeError(`dst type unrecognized: "${t}" : must have form [crlf:|lf:]type[:base64]`)}return o},bd=function(t,r){switch(t){case $a:return nt.utf8.encode(r);case yn:return nt.utf16be.encode(r);case jn:return nt.utf16le.encode(r);case vn:return nt.utf32be.encode(r);case Gn:return nt.utf32le.encode(r);case _s:return nt.uint7.encode(r);case As:return nt.uint8.encode(r);case Ss:return nt.uint16be.encode(r);case Gc:return nt.uint16le.encode(r);case Ms:return nt.uint32be.encode(r);case Jc:return nt.uint32le.encode(r);case yi:return nt.string.encode(r);case Vc:return nt.escaped.encode(r);default:throw new TypeError(`encode type "${t}" not recognized`)}},y7=function(t){switch(t.type){case $a:return nt.utf8.decode(t.data,t.bom);case jn:return nt.utf16le.decode(t.data,t.bom);case yn:return nt.utf16be.decode(t.data,t.bom);case vn:return nt.utf32be.decode(t.data,t.bom);case Gn:return nt.utf32le.decode(t.data,t.bom);case _s:return nt.uint7.decode(t.data);case As:return nt.uint8.decode(t.data);case Ss:return nt.uint16be.decode(t.data);case Gc:return nt.uint16le.decode(t.data);case Ms:return nt.uint32be.decode(t.data);case Jc:return nt.uint32le.decode(t.data);case yi:return nt.string.decode(t.data);case Vc:return nt.escaped.decode(t.data);default:throw new TypeError(`decode type "${t.type}" not recognized`)}};qa.decode=function(t,r){let i=b7(t,r);return y7(i)};qa.encode=function(t,r){let i,o,s=g7(t,r);return s.crlf?(i=nt.lineEnds.crlf(r),o=bd(s.type,i)):s.lf?(i=nt.lineEnds.lf(r),o=bd(s.type,i)):o=bd(s.type,r),s.base64&&(o=nt.base64.encode(o)),o};qa.convert=function(t,r,i){return K2.encode(i,K2.decode(t,r))}});var xd=de((FB,W2)=>{W2.exports=function(){return`/* This file automatically generated by jsonToless() and LESS. */
.apg-mono {
  font-family: monospace;
}
.apg-active {
  font-weight: bold;
  color: #000000;
}
.apg-match {
  font-weight: bold;
  color: #264BFF;
}
.apg-empty {
  font-weight: bold;
  color: #0fbd0f;
}
.apg-nomatch {
  font-weight: bold;
  color: #FF4000;
}
.apg-lh-match {
  font-weight: bold;
  color: #1A97BA;
}
.apg-lb-match {
  font-weight: bold;
  color: #5F1687;
}
.apg-remainder {
  font-weight: bold;
  color: #999999;
}
.apg-ctrl-char {
  font-weight: bolder;
  font-style: italic;
  font-size: 0.6em;
}
.apg-line-end {
  font-weight: bold;
  color: #000000;
}
.apg-error {
  font-weight: bold;
  color: #FF4000;
}
.apg-phrase {
  color: #000000;
  background-color: #8caae6;
}
.apg-empty-phrase {
  color: #0fbd0f;
}
table.apg-state {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: left;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-state th,
table.apg-state td {
  text-align: left;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-state th:nth-last-child(2),
table.apg-state td:nth-last-child(2) {
  text-align: right;
}
table.apg-state caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-stats {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-stats th,
table.apg-stats td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-stats caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-trace {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-trace caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-trace th,
table.apg-trace td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-trace th:last-child,
table.apg-trace th:nth-last-child(2),
table.apg-trace td:last-child,
table.apg-trace td:nth-last-child(2) {
  text-align: left;
}
table.apg-grammar {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-grammar caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-grammar th,
table.apg-grammar td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-grammar th:last-child,
table.apg-grammar td:last-child {
  text-align: left;
}
table.apg-rules {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-rules caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-rules th,
table.apg-rules td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-rules a {
  color: #003399 !important;
}
table.apg-rules a:hover {
  color: #8caae6 !important;
}
table.apg-attrs {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: center;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-attrs caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-attrs th,
table.apg-attrs td {
  text-align: center;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-attrs th:nth-child(1),
table.apg-attrs th:nth-child(2),
table.apg-attrs th:nth-child(3) {
  text-align: right;
}
table.apg-attrs td:nth-child(1),
table.apg-attrs td:nth-child(2),
table.apg-attrs td:nth-child(3) {
  text-align: right;
}
table.apg-attrs a {
  color: #003399 !important;
}
table.apg-attrs a:hover {
  color: #8caae6 !important;
}
`}});var wo=de(Tt=>{var nr=Ua(),wd=vd(),v7=xd(),gt=Xr(),vi="utilities.js: ",Jn=Tt,xo=function(n,t,r){let i,o=t,s=!0;for(;s;){if(n<=0){o=0,i=0;break}if(typeof o!="number"){o=0,i=n;break}if(o>=n){o=n,i=n;break}if(typeof r!="number"){i=n;break}if(i=o+r,i>n){i=n;break}break}return{beg:o,end:i}};Tt.htmlToPage=function(n,t){let r;if(typeof n!="string")throw new Error(`${vi}htmlToPage: input HTML is not a string`);typeof t!="string"?r="htmlToPage":r=t;let i="";return i+=`<!DOCTYPE html>
`,i+=`<html lang="en">
`,i+=`<head>
`,i+=`<meta charset="utf-8">
`,i+=`<title>${r}</title>
`,i+=`<style>
`,i+=v7(),i+=`</style>
`,i+=`</head>
<body>
`,i+=`<p>${new Date}</p>
`,i+=n,i+=`</body>
</html>
`,i};Tt.parserResultToHtml=function(n,t){let r=null;typeof t=="string"&&t!==""&&(r=t);let i,o;n.success===!0?i=`<span class="${nr.CLASS_MATCH}">true</span>`:i=`<span class="${nr.CLASS_NOMATCH}">false</span>`,n.state===gt.EMPTY?o=`<span class="${nr.CLASS_EMPTY}">EMPTY</span>`:n.state===gt.MATCH?o=`<span class="${nr.CLASS_MATCH}">MATCH</span>`:n.state===gt.NOMATCH?o=`<span class="${nr.CLASS_NOMATCH}">NOMATCH</span>`:o=`<span class="${nr.CLASS_NOMATCH}">unrecognized</span>`;let s="";return s+=`<table class="${nr.CLASS_STATE}">
`,r&&(s+=`<caption>${r}</caption>
`),s+=`<tr><th>state item</th><th>value</th><th>description</th></tr>
`,s+=`<tr><td>parser success</td><td>${i}</td>
`,s+=`<td><span class="${nr.CLASS_MATCH}">true</span> if the parse succeeded,
`,s+=` <span class="${nr.CLASS_NOMATCH}">false</span> otherwise`,s+=`<br><i>NOTE: for success, entire string must be matched</i></td></tr>
`,s+=`<tr><td>parser state</td><td>${o}</td>
`,s+=`<td><span class="${nr.CLASS_EMPTY}">EMPTY</span>, `,s+=`<span class="${nr.CLASS_MATCH}">MATCH</span> or 
`,s+=`<span class="${nr.CLASS_NOMATCH}">NOMATCH</span></td></tr>
`,s+=`<tr><td>string length</td><td>${n.length}</td><td>length of the input (sub)string</td></tr>
`,s+=`<tr><td>matched length</td><td>${n.matched}</td><td>number of input string characters matched</td></tr>
`,s+=`<tr><td>max matched</td><td>${n.maxMatched}</td><td>maximum number of input string characters matched</td></tr>
`,s+=`<tr><td>max tree depth</td><td>${n.maxTreeDepth}</td><td>maximum depth of the parse tree reached</td></tr>
`,s+=`<tr><td>node hits</td><td>${n.nodeHits}</td><td>number of parse tree node hits (opcode function calls)</td></tr>
`,s+=`<tr><td>input length</td><td>${n.inputLength}</td><td>length of full input string</td></tr>
`,s+=`<tr><td>sub-string begin</td><td>${n.subBegin}</td><td>sub-string first character index</td></tr>
`,s+=`<tr><td>sub-string end</td><td>${n.subEnd}</td><td>sub-string end-of-string index</td></tr>
`,s+=`<tr><td>sub-string length</td><td>${n.subLength}</td><td>sub-string length</td></tr>
`,s+=`</table>
`,s};Tt.charsToString=function(n,t,r){let i,o;if(typeof t=="number"){if(t>=n.length)return"";i=t<0?0:t}else i=0;if(typeof r=="number"){if(r<=0)return"";o=r>n.length-i?n.length:i+r}else o=n.length;return i<o?wd.encode("UTF16LE",n.slice(i,o)).toString("utf16le"):""};Tt.stringToChars=function(n){return wd.decode("STRING",n)};Tt.opcodeToString=function(n){let t="unknown";switch(n){case gt.ALT:t="ALT";break;case gt.CAT:t="CAT";break;case gt.RNM:t="RNM";break;case gt.UDT:t="UDT";break;case gt.AND:t="AND";break;case gt.NOT:t="NOT";break;case gt.REP:t="REP";break;case gt.TRG:t="TRG";break;case gt.TBS:t="TBS";break;case gt.TLS:t="TLS";break;case gt.BKR:t="BKR";break;case gt.BKA:t="BKA";break;case gt.BKN:t="BKN";break;case gt.ABG:t="ABG";break;case gt.AEN:t="AEN";break;default:throw new Error("unrecognized opcode")}return t};Tt.stateToString=function(n){let t="unknown";switch(n){case gt.ACTIVE:t="ACTIVE";break;case gt.MATCH:t="MATCH";break;case gt.EMPTY:t="EMPTY";break;case gt.NOMATCH:t="NOMATCH";break;default:throw new Error("unrecognized state")}return t};Tt.asciiChars=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","TAB","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","&nbsp;","!","&#34;","#","$","%","&#38;","&#39;","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","&#60;","=","&#62;","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","&#92;","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL"];Tt.charToHex=function(n){let t=n.toString(16).toUpperCase();switch(t.length){case 1:case 3:case 7:t=`0${t}`;break;case 2:case 6:t=`00${t}`;break;case 4:break;case 5:t=`000${t}`;break;default:throw new Error("unrecognized option")}return t};Tt.charsToDec=function(n,t,r){let i="";if(!Array.isArray(n))throw new Error(`${vi}charsToDec: input must be an array of integers`);let o=xo(n.length,t,r);if(o.end>o.beg){i+=n[o.beg];for(let s=o.beg+1;s<o.end;s+=1)i+=`,${n[s]}`}return i};Tt.charsToHex=function(n,t,r){let i="";if(!Array.isArray(n))throw new Error(`${vi}charsToHex: input must be an array of integers`);let o=xo(n.length,t,r);if(o.end>o.beg){i+=`\\x${Jn.charToHex(n[o.beg])}`;for(let s=o.beg+1;s<o.end;s+=1)i+=`,\\x${Jn.charToHex(n[s])}`}return i};Tt.charsToHtmlEntities=function(n,t,r){let i="";if(!Array.isArray(n))throw new Error(`${vi}charsToHex: input must be an array of integers`);let o=xo(n.length,t,r);if(o.end>o.beg)for(let s=o.beg;s<o.end;s+=1)i+=`&#x${n[s].toString(16)};`;return i};function x7(n){return!(n>=55296&&n<=57343||n>1114111)}Tt.charsToUnicode=function(n,t,r){let i="";if(!Array.isArray(n))throw new Error(`${vi}charsToUnicode: input must be an array of integers`);let o=xo(n.length,t,r);if(o.end>o.beg)for(let s=o.beg;s<o.end;s+=1)x7(n[s])?i+=`&#${n[s]};`:i+=` U+${Jn.charToHex(n[s])}`;return i};Tt.charsToJsUnicode=function(n,t,r){let i="";if(!Array.isArray(n))throw new Error(`${vi}charsToJsUnicode: input must be an array of integers`);let o=xo(n.length,t,r);if(o.end>o.beg){i+=`\\u${Jn.charToHex(n[o.beg])}`;for(let s=o.beg+1;s<o.end;s+=1)i+=`,\\u${Jn.charToHex(n[s])}`}return i};Tt.charsToAscii=function(n,t,r){let i="";if(!Array.isArray(n))throw new Error(`${vi}charsToAscii: input must be an array of integers`);let o=xo(n.length,t,r);for(let s=o.beg;s<o.end;s+=1){let a=n[s];a>=32&&a<=126?i+=String.fromCharCode(a):i+=`\\x${Jn.charToHex(a)}`}return i};Tt.charsToAsciiHtml=function(n,t,r){if(!Array.isArray(n))throw new Error(`${vi}charsToAsciiHtml: input must be an array of integers`);let i="",o,s=xo(n.length,t,r);for(let a=s.beg;a<s.end;a+=1)o=n[a],o<32||o===127?i+=`<span class="${nr.CLASS_CTRLCHAR}">${Jn.asciiChars[o]}</span>`:o>127?i+=`<span class="${nr.CLASS_CTRLCHAR}">U+${Jn.charToHex(o)}</span>`:i+=Jn.asciiChars[o];return i};Tt.stringToAsciiHtml=function(n){let t=wd.decode("STRING",n);return this.charsToAsciiHtml(t)}});var X2=de((qB,Y2)=>{Y2.exports=function(){let t=Xr(),r=wo(),i="ast.js: ",o=this,s=null,a=null,f=null,l=0,p=[],b=[],v=[],C=[];this.callbacks=[],this.astObject="astObject",this.init=function(k,$,O){v.length=0,C.length=0,p.length=0,l=0,s=k,a=$,f=O;let q,j=[];for(q=0;q<s.length;q+=1)j.push(s[q].lower);for(q=0;q<a.length;q+=1)j.push(a[q].lower);for(l=s.length+a.length,q=0;q<l;q+=1)p[q]=!1,b[q]=null;for(let z in o.callbacks){let X=z.toLowerCase();if(q=j.indexOf(X),q<0)throw new Error(`${i}init: node '${z}' not a rule or udt name`);typeof o.callbacks[z]=="function"&&(p[q]=!0,b[q]=o.callbacks[z]),o.callbacks[z]===!0&&(p[q]=!0)}},this.ruleDefined=function(k){return p[k]!==!1},this.udtDefined=function(k){return p[s.length+k]!==!1},this.down=function(k,$){let O=C.length;return v.push(O),C.push({name:$,thisIndex:O,thatIndex:null,state:t.SEM_PRE,callbackIndex:k,phraseIndex:null,phraseLength:null,stack:v.length}),O},this.up=function(k,$,O,q){let j=C.length,z=v.pop();return C.push({name:$,thisIndex:j,thatIndex:z,state:t.SEM_POST,callbackIndex:k,phraseIndex:O,phraseLength:q,stack:v.length}),C[z].thatIndex=j,C[z].phraseIndex=O,C[z].phraseLength=q,j},this.translate=function(k){let $,O,q;for(let j=0;j<C.length;j+=1)q=C[j],O=b[q.callbackIndex],q.state===t.SEM_PRE?O!==null&&($=O(t.SEM_PRE,f,q.phraseIndex,q.phraseLength,k),$===t.SEM_SKIP&&(j=q.thatIndex)):O!==null&&O(t.SEM_POST,f,q.phraseIndex,q.phraseLength,k)},this.setLength=function(k){C.length=k,k>0?v.length=C[k-1].stack:v.length=0},this.getLength=function(){return C.length};function D(S){let k="";for(let $=0;$<S;$+=1)k+=" ";return k}this.toXml=function(k){let $=r.charsToDec,O="decimal integer character codes";if(typeof k=="string"&&k.length>=3){let z=k.slice(0,3).toLowerCase();z==="asc"?($=r.charsToAscii,O="ASCII for printing characters, hex for non-printing"):z==="hex"?($=r.charsToHex,O="hexadecimal integer character codes"):z==="uni"&&($=r.charsToUnicode,O="Unicode UTF-32 integer character codes")}let q="",j=0;return q+=`<?xml version="1.0" encoding="utf-8"?>
`,q+=`<root nodes="${C.length/2}" characters="${f.length}">
`,q+=`<!-- input string, ${O} -->
`,q+=D(j+2),q+=$(f),q+=`
`,C.forEach(z=>{z.state===t.SEM_PRE?(j+=1,q+=D(j),q+=`<node name="${z.name}" index="${z.phraseIndex}" length="${z.phraseLength}">
`,q+=D(j+2),q+=$(f,z.phraseIndex,z.phraseLength),q+=`
`):(q+=D(j),q+=`</node><!-- name="${z.name}" -->
`,j-=1)}),q+=`</root>
`,q},this.phrases=function(){let k={},$,O;for($=0;$<C.length;$+=1)O=C[$],O.state===t.SEM_PRE&&(Array.isArray(k[O.name])||(k[O.name]=[]),k[O.name].push({index:O.phraseIndex,length:O.phraseLength}));return k}}});var Ed=de((zB,Z2)=>{Z2.exports=function(){let t="circular-buffer.js: ",r=-1,i=0;this.init=function(s){if(typeof s!="number"||s<=0)throw new Error(`${t}init: circular buffer size must an integer > 0`);i=Math.ceil(s),r=-1},this.increment=function(){return r+=1,(r+i)%i},this.maxSize=function(){return i},this.items=function(){return r+1},this.getListIndex=function(s){return r===-1||s<0||s>r||r-s>=i?-1:(s+i)%i},this.forEach=function(s){if(r!==-1){if(r<i){for(let a=0;a<=r;a+=1)s(a,a);return}for(let a=r-i+1;a<=r;a+=1){let f=(a+i)%i;s(f,a)}}}}});var eg=de((HB,Q2)=>{Q2.exports=function(){let t=Xr(),r=wo(),i="parser.js: ",o=this,s;this.ast=null,this.stats=null,this.trace=null,this.callbacks=[];let a=null,f=null,l,p,b,v,C=0,D=0,S=0,k=null,$=null,O=null,q=null,j=null,z=0,X=1/0,B=1/0,L=function(V,R,H){let ie=`${i}evaluateRule(): `;if(V>=O.length)throw new Error(`${ie}rule index: ${V} out of range`);if(R>=b)throw new Error(`${ie}phrase index: ${R} out of range`);let{length:ae}=a;a.push({type:t.RNM,index:V}),s(ae,R,H),a.pop()},U=function(ee,V,R){let H=`${i}evaluateUdt(): `;if(ee>=q.length)throw new Error(`${H}udt index: ${ee} out of range`);if(V>=b)throw new Error(`${H}phrase index: ${V} out of range`);let{length:ie}=a;a.push({type:t.UDT,empty:q[ee].empty,index:ee}),s(ie,V,R),a.pop()},te=function(){C=0,D=0,S=0,z=0,v=[{lookAround:t.LOOKAROUND_NONE,anchor:0,charsEnd:0,charsLength:0}],O=null,q=null,f=null,l=0,p=0,b=0,k=null,$=null,j=null,a=null},_=function(){let ee=[],V=function(){let H={};O.forEach(ie=>{ie.isBkr&&(H[ie.lower]=null)}),q.length>0&&q.forEach(ie=>{ie.isBkr&&(H[ie.lower]=null)}),ee.push(H)},R=function(){let H=ee[ee.length-1],ie={};for(let ae in H)ie[ae]=H[ae];return ie};this.push=function(){ee.push(R())},this.pop=function(ie){let ae=ie;if(ae||(ae=ee.length-1),ae<1||ae>ee.length)throw new Error(`${i}backRef.pop(): bad length: ${ae}`);return ee.length=ae,ee[ee.length-1]},this.length=function(){return ee.length},this.savePhrase=function(ie,ae,ce){ee[ee.length-1][ie]={phraseIndex:ae,phraseLength:ce}},this.getPhrase=function(H){return ee[ee.length-1][H]},V()},u=function(){let V=this;this.state=t.ACTIVE,this.phraseLength=0,this.ruleIndex=0,this.udtIndex=0,this.lookAround=v[v.length-1],this.uFrame=new _,this.pFrame=new _,this.evaluateRule=L,this.evaluateUdt=U,this.refresh=function(){V.state=t.ACTIVE,V.phraseLength=0,V.lookAround=v[v.length-1]}},g=function(){return v[v.length-1]},d=function(){return v.length>1},c=function(){return v[v.length-1].lookAround===t.LOOKAROUND_BEHIND},h=function(){let ee=`${i}initializeAst(): `,V=!0;for(;V;){if(o.ast===void 0){o.ast=null;break}if(o.ast===null)break;if(o.ast.astObject!=="astObject")throw new Error(`${ee}ast object not recognized`);break}o.ast!==null&&o.ast.init(O,q,f)},x=function(){let ee=`${i}initializeTrace(): `,V=!0;for(;V;){if(o.trace===void 0){o.trace=null;break}if(o.trace===null)break;if(o.trace.traceObject!=="traceObject")throw new Error(`${ee}trace object not recognized`);break}o.trace!==null&&o.trace.init(O,q,f)},E=function(){let ee=`${i}initializeStats(): `,V=!0;for(;V;){if(o.stats===void 0){o.stats=null;break}if(o.stats===null)break;if(o.stats.statsObject!=="statsObject")throw new Error(`${ee}stats object not recognized`);break}o.stats!==null&&o.stats.init(O,q)},w=function(ee){let V=`${i}initializeGrammar(): `;if(!ee)throw new Error(`${V}grammar object undefined`);if(ee.grammarObject!=="grammarObject")throw new Error(`${V}bad grammar object`);O=ee.rules,q=ee.udts},m=function(ee){let V=`${i}initializeStartRule(): `,R=null;if(typeof ee=="number"){if(ee>=O.length)throw new Error(`${V}start rule index too large: max: ${O.length}: index: ${ee}`);R=ee}else if(typeof ee=="string"){let H=ee.toLowerCase();for(let ie=0;ie<O.length;ie+=1)if(H===O[ie].lower){R=O[ie].index;break}if(R===null)throw new Error(`${V}start rule name '${ee}' not recognized`)}else throw new Error(`${V}type of start rule '${typeof ee}' not recognized`);return R},A=function(V,R,H){let ie=`${i}initializeInputChars(): `,ae=V,ce=R,me=H;if(ae===void 0)throw new Error(`${ie}input string is undefined`);if(ae===null)throw new Error(`${ie}input string is null`);if(typeof ae=="string")ae=r.stringToChars(ae);else if(!Array.isArray(ae))throw new Error(`${ie}input string is not a string or array`);if(ae.length>0&&typeof ae[0]!="number")throw new Error(`${ie}input string not an array of integers`);if(typeof ce!="number")ce=0;else if(ce=Math.floor(ce),ce<0||ce>ae.length)throw new Error(`${ie}input beginning index out of range: ${ce}`);if(typeof me!="number")me=ae.length-ce;else if(me=Math.floor(me),me<0||me>ae.length-ce)throw new Error(`${ie}input length out of range: ${me}`);f=ae,l=ce,p=me,b=l+p},I=function(){let ee=`${i}initializeCallbacks(): `,V;for(k=[],$=[],V=0;V<O.length;V+=1)k[V]=null;for(V=0;V<q.length;V+=1)$[V]=null;let R,H=[];for(V=0;V<O.length;V+=1)H.push(O[V].lower);for(V=0;V<q.length;V+=1)H.push(q[V].lower);for(let ie in o.callbacks){if(V=H.indexOf(ie.toLowerCase()),V<0)throw new Error(`${ee}syntax callback '${ie}' not a rule or udt name`);if(R=o.callbacks[ie],R||(R=null),typeof R=="function"||R===null)V<O.length?k[V]=R:$[V-O.length]=R;else throw new Error(`${ee}syntax callback[${ie}] must be function reference or 'false' (false/null/undefined/etc.)`)}for(V=0;V<q.length;V+=1)if($[V]===null)throw new Error(`${ee}all UDT callbacks must be defined. UDT callback[${q[V].lower}] not a function reference`)};this.setMaxTreeDepth=function(ee){if(typeof ee!="number")throw new Error(`parser: max tree depth must be integer > 0: ${ee}`);if(X=Math.floor(ee),X<=0)throw new Error(`parser: max tree depth must be integer > 0: ${ee}`)},this.setMaxNodeHits=function(ee){if(typeof ee!="number")throw new Error(`parser: max node hits must be integer > 0: ${ee}`);if(B=Math.floor(ee),B<=0)throw new Error(`parser: max node hits must be integer > 0: ${ee}`)};let y=function(ee,V,R){let H,ie=`${i}parse(): `;w(ee);let ae=m(V);I(),x(),E(),h();let ce=new u;switch(R!=null&&(j=R),a=[{type:t.RNM,index:ae}],s(0,l,ce),a=null,ce.state){case t.ACTIVE:throw new Error(`${ie}final state should never be 'ACTIVE'`);case t.NOMATCH:H=!1;break;case t.EMPTY:case t.MATCH:ce.phraseLength===p?H=!0:H=!1;break;default:throw new Error("unrecognized state")}return{success:H,state:ce.state,length:p,matched:ce.phraseLength,maxMatched:z,maxTreeDepth:D,nodeHits:S,inputLength:f.length,subBegin:l,subEnd:b,subLength:p}};this.parseSubstring=function(V,R,H,ie,ae,ce){return te(),A(H,ie,ae),y(V,R,ce)},this.parse=function(V,R,H,ie){return te(),A(H,0,H.length),y(V,R,ie)};let M=function(ee,V,R){let H=a[ee];for(let ie=0;ie<H.children.length&&(s(H.children[ie],V,R),R.state===t.NOMATCH);ie+=1);},re=function(ee,V,R){let H,ie,ae,ce,me=a[ee],et=R.uFrame.length(),we=R.pFrame.length();o.ast&&(ie=o.ast.getLength()),H=!0,ae=V,ce=0;for(let be=0;be<me.children.length;be+=1)if(s(me.children[be],ae,R),R.state===t.NOMATCH){H=!1;break}else ae+=R.phraseLength,ce+=R.phraseLength;H?(R.state=ce===0?t.EMPTY:t.MATCH,R.phraseLength=ce):(R.state=t.NOMATCH,R.phraseLength=0,R.uFrame.pop(et),R.pFrame.pop(we),o.ast&&o.ast.setLength(ie))},T=function(ee,V,R){let H,ie,ae,ce,me=a[ee];ie=V,ae=0,ce=0;let et=R.uFrame.length(),we=R.pFrame.length();o.ast&&(H=o.ast.getLength());let be=!0;for(;be&&!(ie>=b||(s(ee+1,ie,R),R.state===t.NOMATCH)||R.state===t.EMPTY||(ce+=1,ae+=R.phraseLength,ie+=R.phraseLength,ce===me.max)););R.state===t.EMPTY||ce>=me.min?(R.state=ae===0?t.EMPTY:t.MATCH,R.phraseLength=ae):(R.state=t.NOMATCH,R.phraseLength=0,R.uFrame.pop(et),R.pFrame.pop(we),o.ast&&o.ast.setLength(H))},K=function(ee,V,R,H){if(V.phraseLength>R){let ie=`${i}opRNM(${ee.name}): callback function error: `;throw ie+=`sysData.phraseLength: ${V.phraseLength}`,ie+=` must be <= remaining chars: ${R}`,new Error(ie)}switch(V.state){case t.ACTIVE:if(H!==!0)throw new Error(`${i}opRNM(${ee.name}): callback function return error. ACTIVE state not allowed.`);break;case t.EMPTY:V.phraseLength=0;break;case t.MATCH:V.phraseLength===0&&(V.state=t.EMPTY);break;case t.NOMATCH:V.phraseLength=0;break;default:throw new Error(`${i}opRNM(${ee.name}): callback function return error. Unrecognized return state: ${V.state}`)}},Y=function(ee,V,R){let H,ie,ae,ce,me,et,we=a[ee],be=O[we.index],rt=k[be.index],Ae=!d();if(Ae&&(ie=o.ast&&o.ast.ruleDefined(we.index),ie&&(H=o.ast.getLength(),o.ast.down(we.index,O[we.index].name)),ce=R.uFrame.length(),me=R.pFrame.length(),R.uFrame.push(),R.pFrame.push(),et=R.pFrame,R.pFrame=new _),rt===null)ae=a,a=be.opcodes,s(0,V,R),a=ae;else{let Te=b-V;R.ruleIndex=be.index,rt(R,f,V,j),K(be,R,Te,!0),R.state===t.ACTIVE&&(ae=a,a=be.opcodes,s(0,V,R),a=ae,R.ruleIndex=be.index,rt(R,f,V,j),K(be,R,Te,!1))}Ae&&(ie&&(R.state===t.NOMATCH?o.ast.setLength(H):o.ast.up(we.index,be.name,V,R.phraseLength)),R.pFrame=et,R.state===t.NOMATCH?(R.uFrame.pop(ce),R.pFrame.pop(me)):be.isBkr&&(R.pFrame.savePhrase(be.lower,V,R.phraseLength),R.uFrame.savePhrase(be.lower,V,R.phraseLength)))},N=function(ee,V,R){if(V.phraseLength>R){let H=`${i}opUDT(${ee.name}): callback function error: `;throw H+=`sysData.phraseLength: ${V.phraseLength}`,H+=` must be <= remaining chars: ${R}`,new Error(H)}switch(V.state){case t.ACTIVE:throw new Error(`${i}opUDT(${ee.name}): callback function return error. ACTIVE state not allowed.`);case t.EMPTY:if(ee.empty===!1)throw new Error(`${i}opUDT(${ee.name}): callback function return error. May not return EMPTY.`);V.phraseLength=0;break;case t.MATCH:if(V.phraseLength===0){if(ee.empty===!1)throw new Error(`${i}opUDT(${ee.name}): callback function return error. May not return EMPTY.`);V.state=t.EMPTY}break;case t.NOMATCH:V.phraseLength=0;break;default:throw new Error(`${i}opUDT(${ee.name}): callback function return error. Unrecognized return state: ${V.state}`)}},P=function(ee,V,R){let H,ie,ae,ce,me,et,we=a[ee],be=q[we.index];R.UdtIndex=be.index;let rt=!d();rt&&(ae=o.ast&&o.ast.udtDefined(we.index),ae&&(ie=O.length+we.index,H=o.ast.getLength(),o.ast.down(ie,be.name)),ce=R.uFrame.length(),me=R.pFrame.length(),R.uFrame.push(),R.pFrame.push(),et=R.pFrame,R.pFrame=new _);let Ae=b-V;$[we.index](R,f,V,j),N(be,R,Ae),rt&&(ae&&(R.state===t.NOMATCH?o.ast.setLength(H):o.ast.up(ie,be.name,V,R.phraseLength)),R.pFrame=et,R.state===t.NOMATCH?(R.uFrame.pop(ce),R.pFrame.pop(me)):be.isBkr&&(R.pFrame.savePhrase(be.lower,V,R.phraseLength),R.uFrame.savePhrase(be.lower,V,R.phraseLength)))},G=function(ee,V,R){v.push({lookAround:t.LOOKAROUND_AHEAD,anchor:V,charsEnd:b,charsLength:p}),b=f.length,p=f.length-l,s(ee+1,V,R);let H=v.pop();switch(b=H.charsEnd,p=H.charsLength,R.phraseLength=0,R.state){case t.EMPTY:R.state=t.EMPTY;break;case t.MATCH:R.state=t.EMPTY;break;case t.NOMATCH:R.state=t.NOMATCH;break;default:throw new Error(`opAND: invalid state ${R.state}`)}},J=function(ee,V,R){v.push({lookAround:t.LOOKAROUND_AHEAD,anchor:V,charsEnd:b,charsLength:p}),b=f.length,p=f.length-l,s(ee+1,V,R);let H=v.pop();switch(b=H.charsEnd,p=H.charsLength,R.phraseLength=0,R.state){case t.EMPTY:case t.MATCH:R.state=t.NOMATCH;break;case t.NOMATCH:R.state=t.EMPTY;break;default:throw new Error(`opNOT: invalid state ${R.state}`)}},Q=function(ee,V,R){let H=a[ee];R.state=t.NOMATCH,V<b&&H.min<=f[V]&&f[V]<=H.max&&(R.state=t.MATCH,R.phraseLength=1)},le=function(ee,V,R){let H,ie=a[ee],ae=ie.string.length;if(R.state=t.NOMATCH,V+ae<=b){for(H=0;H<ae;H+=1)if(f[V+H]!==ie.string[H])return;R.state=t.MATCH,R.phraseLength=ae}},oe=function(ee,V,R){let H,ie,ae=a[ee];R.state=t.NOMATCH;let ce=ae.string.length;if(ce===0){R.state=t.EMPTY;return}if(V+ce<=b){for(H=0;H<ce;H+=1)if(ie=f[V+H],ie>=65&&ie<=90&&(ie+=32),ie!==ae.string[H])return;R.state=t.MATCH,R.phraseLength=ce}},W=function(ee,V,R){R.state=t.NOMATCH,R.phraseLength=0,R.state=V===0?t.EMPTY:t.NOMATCH},he=function(ee,V,R){R.state=t.NOMATCH,R.phraseLength=0,R.state=V===f.length?t.EMPTY:t.NOMATCH},Z=function(ee,V,R){let H,ie,ae,ce,me=a[ee];R.state=t.NOMATCH,me.index<O.length?ce=O[me.index].lower:ce=q[me.index-O.length].lower;let et=me.bkrMode===t.BKR_MODE_PM?R.pFrame.getPhrase(ce):R.uFrame.getPhrase(ce),we=me.bkrCase===t.BKR_MODE_CI;if(et===null)return;let be=et.phraseIndex,rt=et.phraseLength;if(rt===0){R.state=t.EMPTY;return}if(V+rt<=b){if(we){for(H=0;H<rt;H+=1)if(ie=f[V+H],ae=f[be+H],ie>=65&&ie<=90&&(ie+=32),ae>=65&&ae<=90&&(ae+=32),ie!==ae)return;R.state=t.MATCH,R.phraseLength=rt}else for(H=0;H<rt;H+=1)if(ie=f[V+H],ae=f[be+H],ie!==ae)return;R.state=t.MATCH,R.phraseLength=rt}},se=function(ee,V,R){switch(v.push({lookAround:t.LOOKAROUND_BEHIND,anchor:V}),s(ee+1,V,R),v.pop(),R.phraseLength=0,R.state){case t.EMPTY:R.state=t.EMPTY;break;case t.MATCH:R.state=t.EMPTY;break;case t.NOMATCH:R.state=t.NOMATCH;break;default:throw new Error(`opBKA: invalid state ${R.state}`)}},F=function(ee,V,R){switch(v.push({lookAround:t.LOOKAROUND_BEHIND,anchor:V}),s(ee+1,V,R),v.pop(),R.phraseLength=0,R.state){case t.EMPTY:case t.MATCH:R.state=t.NOMATCH;break;case t.NOMATCH:R.state=t.EMPTY;break;default:throw new Error(`opBKN: invalid state ${R.state}`)}},ne=function(ee,V,R){let H,ie,ae,ce,me=a[ee],et=R.uFrame.length(),we=R.pFrame.length();o.ast&&(ie=o.ast.getLength()),H=!0,ae=V,ce=0;for(let be=me.children.length-1;be>=0;be-=1)if(s(me.children[be],ae,R),ae-=R.phraseLength,ce+=R.phraseLength,R.state===t.NOMATCH){H=!1;break}H?(R.state=ce===0?t.EMPTY:t.MATCH,R.phraseLength=ce):(R.state=t.NOMATCH,R.phraseLength=0,R.uFrame.pop(et),R.pFrame.pop(we),o.ast&&o.ast.setLength(ie))},pe=function(ee,V,R){let H,ie,ae,ce,me=a[ee];ie=V,ae=0,ce=0;let et=R.uFrame.length(),we=R.pFrame.length();o.ast&&(H=o.ast.getLength());let be=!0;for(;be&&!(ie<=0||(s(ee+1,ie,R),R.state===t.NOMATCH)||R.state===t.EMPTY||(ce+=1,ae+=R.phraseLength,ie-=R.phraseLength,ce===me.max)););R.state===t.EMPTY||ce>=me.min?(R.state=ae===0?t.EMPTY:t.MATCH,R.phraseLength=ae):(R.state=t.NOMATCH,R.phraseLength=0,R.uFrame.pop(et),R.pFrame.pop(we),o.ast&&o.ast.setLength(H))},Ee=function(ee,V,R){let H=a[ee];if(R.state=t.NOMATCH,R.phraseLength=0,V>0){let ie=f[V-1];H.min<=ie&&ie<=H.max&&(R.state=t.MATCH,R.phraseLength=1)}},ve=function(ee,V,R){let H,ie=a[ee];R.state=t.NOMATCH;let ae=ie.string.length,ce=V-ae;if(ce>=0){for(H=0;H<ae;H+=1)if(f[ce+H]!==ie.string[H])return;R.state=t.MATCH,R.phraseLength=ae}},Se=function(ee,V,R){let H,ie=a[ee];R.state=t.NOMATCH;let ae=ie.string.length;if(ae===0){R.state=t.EMPTY;return}let ce=V-ae;if(ce>=0){for(let me=0;me<ae;me+=1)if(H=f[ce+me],H>=65&&H<=90&&(H+=32),H!==ie.string[me])return;R.state=t.MATCH,R.phraseLength=ae}},Zt=function(ee,V,R){let H,ie,ae,ce,me=a[ee];R.state=t.NOMATCH,R.phraseLength=0,me.index<O.length?ce=O[me.index].lower:ce=q[me.index-O.length].lower;let et=me.bkrMode===t.BKR_MODE_PM?R.pFrame.getPhrase(ce):R.uFrame.getPhrase(ce),we=me.bkrCase===t.BKR_MODE_CI;if(et===null)return;let be=et.phraseIndex,rt=et.phraseLength;if(rt===0){R.state=t.EMPTY,R.phraseLength=0;return}let Ae=V-rt;if(Ae>=0){if(we){for(H=0;H<rt;H+=1)if(ie=f[Ae+H],ae=f[be+H],ie>=65&&ie<=90&&(ie+=32),ae>=65&&ae<=90&&(ae+=32),ie!==ae)return;R.state=t.MATCH,R.phraseLength=rt}else for(H=0;H<rt;H+=1)if(ie=f[Ae+H],ae=f[be+H],ie!==ae)return;R.state=t.MATCH,R.phraseLength=rt}};s=function(V,R,H){let ie=!0,ae=a[V];if(S+=1,S>B)throw new Error(`parser: maximum number of node hits exceeded: ${B}`);if(C+=1,C>D&&(D=C,D>X))throw new Error(`parser: maximum parse tree depth exceeded: ${X}`);if(H.refresh(),o.trace!==null){let ce=g();o.trace.down(ae,H.state,R,H.phraseLength,ce.anchor,ce.lookAround)}if(c())switch(ae.type){case t.ALT:M(V,R,H);break;case t.CAT:ne(V,R,H);break;case t.REP:pe(V,R,H);break;case t.RNM:Y(V,R,H);break;case t.UDT:P(V,R,H);break;case t.AND:G(V,R,H);break;case t.NOT:J(V,R,H);break;case t.TRG:Ee(V,R,H);break;case t.TBS:ve(V,R,H);break;case t.TLS:Se(V,R,H);break;case t.BKR:Zt(V,R,H);break;case t.BKA:se(V,R,H);break;case t.BKN:F(V,R,H);break;case t.ABG:W(V,R,H);break;case t.AEN:he(V,R,H);break;default:ie=!1;break}else switch(ae.type){case t.ALT:M(V,R,H);break;case t.CAT:re(V,R,H);break;case t.REP:T(V,R,H);break;case t.RNM:Y(V,R,H);break;case t.UDT:P(V,R,H);break;case t.AND:G(V,R,H);break;case t.NOT:J(V,R,H);break;case t.TRG:Q(V,R,H);break;case t.TBS:le(V,R,H);break;case t.TLS:oe(V,R,H);break;case t.BKR:Z(V,R,H);break;case t.BKA:se(V,R,H);break;case t.BKN:F(V,R,H);break;case t.ABG:W(V,R,H);break;case t.AEN:he(V,R,H);break;default:ie=!1;break}if(!d()&&R+H.phraseLength>z&&(z=R+H.phraseLength),o.stats!==null&&o.stats.collect(ae,H),o.trace!==null){let ce=g();o.trace.up(ae,H.state,R,H.phraseLength,ce.anchor,ce.lookAround)}return C-=1,ie}}});var rg=de((KB,tg)=>{tg.exports=function(){let t=Xr(),r=wo(),i=Ua(),o="stats.js: ",s=[],a=[],f=[],l,p=[],b=[];this.statsObject="statsObject";let v="stats",C=function(B,L){return B.lower<L.lower?-1:B.lower>L.lower?1:0},D=function(B,L){return B.total<L.total?1:B.total>L.total?-1:C(B,L)},S=function(B,L){return B.index<L.index?-1:B.index>L.index?1:0},k=function(){this.empty=0,this.match=0,this.nomatch=0,this.total=0},$=function(){f.length=0,l=new k,f[t.ALT]=new k,f[t.CAT]=new k,f[t.REP]=new k,f[t.RNM]=new k,f[t.TRG]=new k,f[t.TBS]=new k,f[t.TLS]=new k,f[t.UDT]=new k,f[t.AND]=new k,f[t.NOT]=new k,f[t.BKR]=new k,f[t.BKA]=new k,f[t.BKN]=new k,f[t.ABG]=new k,f[t.AEN]=new k,p.length=0;for(let B=0;B<s.length;B+=1)p.push({empty:0,match:0,nomatch:0,total:0,name:s[B].name,lower:s[B].lower,index:s[B].index});if(a.length>0){b.length=0;for(let B=0;B<a.length;B+=1)b.push({empty:0,match:0,nomatch:0,total:0,name:a[B].name,lower:a[B].lower,index:a[B].index})}},O=function(B,L){switch(B.total+=1,L){case t.EMPTY:B.empty+=1;break;case t.MATCH:B.match+=1;break;case t.NOMATCH:B.nomatch+=1;break;default:throw new Error(`${o}collect(): incStat(): unrecognized state: ${L}`)}},q=function(B,L){let U="";return U+="<tr>",U+=`<td class="${i.CLASS_ACTIVE}">${B}</td>`,U+=`<td class="${i.CLASS_EMPTY}">${L.empty}</td>`,U+=`<td class="${i.CLASS_MATCH}">${L.match}</td>`,U+=`<td class="${i.CLASS_NOMATCH}">${L.nomatch}</td>`,U+=`<td class="${i.CLASS_ACTIVE}">${L.total}</td>`,U+=`</tr>
`,U},j=function(){let B="";return B+=q("ALT",f[t.ALT]),B+=q("CAT",f[t.CAT]),B+=q("REP",f[t.REP]),B+=q("RNM",f[t.RNM]),B+=q("TRG",f[t.TRG]),B+=q("TBS",f[t.TBS]),B+=q("TLS",f[t.TLS]),B+=q("UDT",f[t.UDT]),B+=q("AND",f[t.AND]),B+=q("NOT",f[t.NOT]),B+=q("BKR",f[t.BKR]),B+=q("BKA",f[t.BKA]),B+=q("BKN",f[t.BKN]),B+=q("ABG",f[t.ABG]),B+=q("AEN",f[t.AEN]),B+=q("totals",l),B},z=function(){let B="";B+=`<tr><th></th><th></th><th></th><th></th><th></th></tr>
`,B+=`<tr><th>rules</th><th></th><th></th><th></th><th></th></tr>
`;for(let L=0;L<s.length;L+=1)p[L].total>0&&(B+="<tr>",B+=`<td class="${i.CLASS_ACTIVE}">${p[L].name}</td>`,B+=`<td class="${i.CLASS_EMPTY}">${p[L].empty}</td>`,B+=`<td class="${i.CLASS_MATCH}">${p[L].match}</td>`,B+=`<td class="${i.CLASS_NOMATCH}">${p[L].nomatch}</td>`,B+=`<td class="${i.CLASS_ACTIVE}">${p[L].total}</td>`,B+=`</tr>
`);if(a.length>0){B+=`<tr><th></th><th></th><th></th><th></th><th></th></tr>
`,B+=`<tr><th>udts</th><th></th><th></th><th></th><th></th></tr>
`;for(let L=0;L<a.length;L+=1)b[L].total>0&&(B+="<tr>",B+=`<td class="${i.CLASS_ACTIVE}">${b[L].name}</td>`,B+=`<td class="${i.CLASS_EMPTY}">${b[L].empty}</td>`,B+=`<td class="${i.CLASS_MATCH}">${b[L].match}</td>`,B+=`<td class="${i.CLASS_NOMATCH}">${b[L].nomatch}</td>`,B+=`<td class="${i.CLASS_ACTIVE}">${b[L].total}</td>`,B+=`</tr>
`)}return B};this.validate=function(B){let L=!1;return typeof B=="string"&&v===B&&(L=!0),L},this.init=function(B,L){s=B,a=L,$()},this.collect=function(B,L){O(l,L.state,L.phraseLength),O(f[B.type],L.state,L.phraseLength),B.type===t.RNM&&O(p[B.index],L.state,L.phraseLength),B.type===t.UDT&&O(b[B.index],L.state,L.phraseLength)},this.toHtml=function(B,L){let U="";U+=`<table class="${i.CLASS_STATS}">
`,typeof L=="string"&&(U+=`<caption>${L}</caption>
`),U+=`<tr><th class="${i.CLASS_ACTIVE}">ops</th>
`,U+=`<th class="${i.CLASS_EMPTY}">EMPTY</th>
`,U+=`<th class="${i.CLASS_MATCH}">MATCH</th>
`,U+=`<th class="${i.CLASS_NOMATCH}">NOMATCH</th>
`,U+=`<th class="${i.CLASS_ACTIVE}">totals</th></tr>
`;let te=!0;for(;te;){if(B===void 0){U+=j();break}if(B===null){U+=j();break}if(B==="ops"){U+=j();break}if(B==="index"){p.sort(S),b.length>0&&b.sort(S),U+=j(),U+=z();break}if(B==="hits"){p.sort(D),b.length>0&&b.sort(S),U+=j(),U+=z();break}if(B==="alpha"){p.sort(C),b.length>0&&b.sort(C),U+=j(),U+=z();break}break}return U+=`</table>
`,U},this.toHtmlPage=function(B,L,U){return r.htmlToPage(this.toHtml(B,L),U)}}});var ig=de((jB,ng)=>{ng.exports=function(){let t=wo(),r=Ua(),i=new(Ed()),o=Xr(),s="trace.js: ",a=this,f=16,l=10,p=8,b=32,v=80,C=5,D=[],S=5e3,k=-1,$=0,O=0,q=[],j=null,z=null,X=null,B=[],L=[],U=`<span class="${r.CLASS_LINEEND}">&bull;</span>`,te=`<span class="${r.CLASS_LINEEND}">&hellip;</span>`,_=`<span class="${r.CLASS_EMPTY}">&#120634;</span>`,u=function(){let N=function(G){B[o.ALT]=G,B[o.CAT]=G,B[o.REP]=G,B[o.TLS]=G,B[o.TBS]=G,B[o.TRG]=G,B[o.AND]=G,B[o.NOT]=G,B[o.BKR]=G,B[o.BKA]=G,B[o.BKN]=G,B[o.ABG]=G,B[o.AEN]=G},P=0;for(let G in a.filter.operators)P+=1;if(P===0){N(!1);return}for(let G in a.filter.operators){let J=G.toUpperCase();if(J==="<ALL>"){N(!0);return}if(J==="<NONE>"){N(!1);return}}N(!1);for(let G in a.filter.operators){let J=G.toUpperCase();if(J==="ALT")B[o.ALT]=a.filter.operators[G]===!0;else if(J==="CAT")B[o.CAT]=a.filter.operators[G]===!0;else if(J==="REP")B[o.REP]=a.filter.operators[G]===!0;else if(J==="AND")B[o.AND]=a.filter.operators[G]===!0;else if(J==="NOT")B[o.NOT]=a.filter.operators[G]===!0;else if(J==="TLS")B[o.TLS]=a.filter.operators[G]===!0;else if(J==="TBS")B[o.TBS]=a.filter.operators[G]===!0;else if(J==="TRG")B[o.TRG]=a.filter.operators[G]===!0;else if(J==="BKR")B[o.BKR]=a.filter.operators[G]===!0;else if(J==="BKA")B[o.BKA]=a.filter.operators[G]===!0;else if(J==="BKN")B[o.BKN]=a.filter.operators[G]===!0;else if(J==="ABG")B[o.ABG]=a.filter.operators[G]===!0;else if(J==="AEN")B[o.AEN]=a.filter.operators[G]===!0;else throw new Error(`${s}initOpratorFilter: '${G}' not a valid operator name. Must be <all>, <none>, alt, cat, rep, tls, tbs, trg, and, not, bkr, bka or bkn`)}},g=function(){let N=function(Q){B[o.RNM]=Q,B[o.UDT]=Q;let le=z.length+X.length;L.length=0;for(let oe=0;oe<le;oe+=1)L.push(Q)},P,G,J=[];for(G=0;G<z.length;G+=1)J.push(z[G].lower);for(G=0;G<X.length;G+=1)J.push(X[G].lower);L.length=0,P=0;for(let Q in a.filter.rules)P+=1;if(P===0){N(!0);return}for(let Q in a.filter.rules){let le=Q.toLowerCase();if(le==="<all>"){N(!0);return}if(le==="<none>"){N(!1);return}}N(!1),B[o.RNM]=!0,B[o.UDT]=!0;for(let Q in a.filter.rules){let le=Q.toLowerCase();if(G=J.indexOf(le),G<0)throw new Error(`${s}initRuleFilter: '${Q}' not a valid rule or udt name`);L[G]=a.filter.rules[Q]===!0}};this.traceObject="traceObject",this.filter={operators:[],rules:[]},this.setMaxRecords=function(N,P){if(k=-1,typeof N=="number"&&N>0)S=Math.ceil(N);else{S=0;return}typeof P=="number"&&(k=Math.floor(P),k<0&&(k=-1))},this.getMaxRecords=function(){return S},this.getLastRecord=function(){return k},this.init=function(N,P,G){D.length=0,q.length=0,$=0,O=0,j=G,z=N,X=P,u(),g(),i.init(S)};let d=function(N){let P=!1;return N.type===o.RNM?B[N.type]&&L[N.index]?P=!0:P=!1:N.type===o.UDT?B[N.type]&&L[z.length+N.index]?P=!0:P=!1:P=B[N.type],P},c=function(N){return k===-1||N<=k};this.down=function(N,P,G,J,Q,le){c($)&&d(N)&&(q.push($),D[i.increment()]={dirUp:!1,depth:O,thisLine:$,thatLine:void 0,opcode:N,state:P,phraseIndex:G,phraseLength:J,lookAnchor:Q,lookAround:le},$+=1,O+=1)},this.up=function(N,P,G,J,Q,le){if(c($)&&d(N)){let oe=$,W=q.pop(),he=i.getListIndex(W);he!==-1&&(D[he].thatLine=oe),O-=1,D[i.increment()]={dirUp:!0,depth:O,thisLine:oe,thatLine:W,opcode:N,state:P,phraseIndex:G,phraseLength:J,lookAnchor:Q,lookAround:le},$+=1}};let h=function(){function N(R,H){let ie,ae,ce;if(H)switch(R.op={id:H.type,name:t.opcodeToString(H.type)},R.opData=void 0,H.type){case o.RNM:R.opData=z[H.index].name;break;case o.UDT:R.opData=X[H.index].name;break;case o.BKR:H.index<z.length?ie=z[H.index].name:ie=X[H.index-z.length].name,ae=H.bkrCase===o.BKR_MODE_CI?"%i":"%s",ce=H.bkrMode===o.BKR_MODE_UM?"%u":"%p",R.opData=`\\\\${ae}${ce}${ie}`;break;case o.TLS:R.opData=[];for(let me=0;me<H.string.length;me+=1)R.opData.push(H.string[me]);break;case o.TBS:R.opData=[];for(let me=0;me<H.string.length;me+=1)R.opData.push(H.string[me]);break;case o.TRG:R.opData=[H.min,H.max];break;case o.REP:R.opData=[H.min,H.max];break;default:throw new Error("unrecognized opcode")}else R.op={id:void 0,name:void 0},R.opData=void 0}function P(R,H,ie){return R===o.MATCH?{index:H,length:ie}:R===o.NOMATCH?{index:H,length:0}:R===o.EMPTY?{index:H,length:0}:null}let G=-1;function J(R,H,ie){let ae={id:G++,branch:-1,parent:R,up:!1,down:!1,depth:ie,children:[]};return H?(ae.down=!0,ae.state={id:H.state,name:t.stateToString(H.state)},ae.phrase=null,N(ae,H.opcode)):(ae.state={id:void 0,name:void 0},ae.phrase=P(),N(ae,void 0)),ae}function Q(R,H){H&&(R.up=!0,R.state={id:H.state,name:t.stateToString(H.state)},R.phrase=P(H.state,H.phraseIndex,H.phraseLength),R.down||N(R,H.opcode))}let le=0,oe=-1,W=1;function he(R){if(oe+=1,R.branch=W,oe>O&&(O=oe),R.children.length===0)le+=1;else for(let H=0;H<R.children.length;H+=1)H>0&&(W+=1),R.children[H].leftMost=!1,R.children[H].rightMost=!1,R.leftMost&&(R.children[H].leftMost=H===0),R.rightMost&&(R.children[H].rightMost=H===R.children.length-1),he(R.children[H]);oe-=1}function Z(R,H){let ie,ae={};if(ae.id=R.id,ae.branch=R.branch,ae.leftMost=R.leftMost,ae.rightMost=R.rightMost,ie=R.state.name?R.state.name:"ACTIVE",ae.state={id:R.state.id,name:ie},ie=R.op.name?R.op.name:"?",ae.op={id:R.op.id,name:ie},typeof R.opData=="string")ae.opData=R.opData;else if(Array.isArray(R.opData)){ae.opData=[];for(let ce=0;ce<R.opData.length;ce+=1)ae.opData[ce]=R.opData[ce]}else ae.opData=void 0;R.phrase?ae.phrase={index:R.phrase.index,length:R.phrase.length}:ae.phrase=null,ae.depth=R.depth,ae.children=[];for(let ce=0;ce<R.children.length;ce+=1){let me=ce!==R.children.length-1;ae.children[ce]=Z(R.children[ce],H,me)}return ae}let se=[],F,ne,pe,Ee,ve=!0,Se=J(null,null,-1);for(se.push(Se),ne=Se,i.forEach(R=>{if(Ee=D[R],ve&&(ve=!1,Ee.depth>0)){let H=Ee.dirUp?Ee.depth+1:Ee.depth;for(let ie=0;ie<H;ie+=1)pe=ne,ne=J(ne,null,ie),se.push(ne),pe.children.push(ne)}Ee.dirUp?(ne=se.pop(),Q(ne,Ee),ne=se[se.length-1]):(pe=ne,ne=J(ne,Ee,Ee.depth),se.push(ne),pe.children.push(ne))});se.length>1;)ne=se.pop(),Q(ne,null);if(Se.children.length===0)throw new Error("trace.toTree(): parse tree has no nodes");if(se.length===0)throw new Error("trace.toTree(): integrity check: dummy root node disappeared?");F=Se.children[0];let Zt=F;for(;F&&!F.down&&!F.up;)Zt=F,F=F.children[0];F=Zt,F.leftMost=!0,F.rightMost=!0,he(F),F.branch=0;let ee={};ee.string=[];for(let R=0;R<j.length;R+=1)ee.string[R]=j[R];ee.rules=[];for(let R=0;R<z.length;R+=1)ee.rules[R]=z[R].name;ee.udts=[];for(let R=0;R<X.length;R+=1)ee.udts[R]=X[R].name;ee.id={},ee.id.ALT={id:o.ALT,name:"ALT"},ee.id.CAT={id:o.CAT,name:"CAT"},ee.id.REP={id:o.REP,name:"REP"},ee.id.RNM={id:o.RNM,name:"RNM"},ee.id.TLS={id:o.TLS,name:"TLS"},ee.id.TBS={id:o.TBS,name:"TBS"},ee.id.TRG={id:o.TRG,name:"TRG"},ee.id.UDT={id:o.UDT,name:"UDT"},ee.id.AND={id:o.AND,name:"AND"},ee.id.NOT={id:o.NOT,name:"NOT"},ee.id.BKR={id:o.BKR,name:"BKR"},ee.id.BKA={id:o.BKA,name:"BKA"},ee.id.BKN={id:o.BKN,name:"BKN"},ee.id.ABG={id:o.ABG,name:"ABG"},ee.id.AEN={id:o.AEN,name:"AEN"},ee.id.ACTIVE={id:o.ACTIVE,name:"ACTIVE"},ee.id.MATCH={id:o.MATCH,name:"MATCH"},ee.id.EMPTY={id:o.EMPTY,name:"EMPTY"},ee.id.NOMATCH={id:o.NOMATCH,name:"NOMATCH"},ee.treeDepth=O,ee.leafNodes=le;let V;return F.down?F.up?V="none":V="right":F.up?V="left":V="both",ee.branchesIncomplete=V,ee.tree=Z(F,F.depth,!1),ee};this.toTree=function(N){let P=h();return N?JSON.stringify(P):P},this.toHtmlPage=function(N,P,G){return t.htmlToPage(this.toHtml(N,P),G)};let x=function(N,P){let G;switch(N){case f:G="hexadecimal";break;case l:G="decimal";break;case p:G="ASCII";break;case b:G="UNICODE";break;default:throw new Error(`${s}htmlHeader: unrecognized mode: ${N}`)}let J="";return J+=`<p>display mode: ${G}</p>
`,J+=`<table class="${r.CLASS_TRACE}">
`,typeof P=="string"&&(J+=`<caption>${P}</caption>`),J},E=function(){let N="";return N+=`</table>
`,N+=`<p class="${r.CLASS_MONOSPACE}">legend:<br>
`,N+=`(a)&nbsp;-&nbsp;line number<br>
`,N+=`(b)&nbsp;-&nbsp;matching line number<br>
`,N+=`(c)&nbsp;-&nbsp;phrase offset<br>
`,N+=`(d)&nbsp;-&nbsp;phrase length<br>
`,N+=`(e)&nbsp;-&nbsp;tree depth<br>
`,N+=`(f)&nbsp;-&nbsp;operator state<br>
`,N+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${r.CLASS_ACTIVE}">&darr;</span>&nbsp;&nbsp;phrase opened<br>
`,N+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${r.CLASS_MATCH}">&uarr;M</span> phrase matched<br>
`,N+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${r.CLASS_EMPTY}">&uarr;E</span> empty phrase matched<br>
`,N+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${r.CLASS_NOMATCH}">&uarr;N</span> phrase not matched<br>
`,N+=`operator&nbsp;-&nbsp;ALT, CAT, REP, RNM, TRG, TLS, TBS<sup>&dagger;</sup>, UDT, AND, NOT, BKA, BKN, BKR, ABG, AEN<sup>&Dagger;</sup><br>
`,N+=`phrase&nbsp;&nbsp;&nbsp;-&nbsp;up to ${v} characters of the phrase being matched<br>
`,N+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${r.CLASS_MATCH}">matched characters</span><br>
`,N+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${r.CLASS_LOOKAHEAD}">matched characters in look ahead mode</span><br>
`,N+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${r.CLASS_LOOKBEHIND}">matched characters in look behind mode</span><br>
`,N+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${r.CLASS_REMAINDER}">remainder characters(not yet examined by parser)</span><br>
`,N+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${r.CLASS_CTRLCHAR}">control characters, TAB, LF, CR, etc. (ASCII mode only)</span><br>
`,N+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${_} empty string<br>
`,N+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${U} end of input string<br>
`,N+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${te} input string display truncated<br>
`,N+=`</p>
`,N+=`<p class="${r.CLASS_MONOSPACE}">
`,N+=`<sup>&dagger;</sup>original ABNF operators:<br>
`,N+=`ALT - alternation<br>
`,N+=`CAT - concatenation<br>
`,N+=`REP - repetition<br>
`,N+=`RNM - rule name<br>
`,N+=`TRG - terminal range<br>
`,N+=`TLS - terminal literal string (case insensitive)<br>
`,N+=`TBS - terminal binary string (case sensitive)<br>
`,N+=`<br>
`,N+=`<sup>&Dagger;</sup>super set SABNF operators:<br>
`,N+=`UDT - user-defined terminal<br>
`,N+=`AND - positive look ahead<br>
`,N+=`NOT - negative look ahead<br>
`,N+=`BKA - positive look behind<br>
`,N+=`BKN - negative look behind<br>
`,N+=`BKR - back reference<br>
`,N+=`ABG - anchor - begin of input string<br>
`,N+=`AEN - anchor - end of input string<br>
`,N+=`</p>
`,N};this.indent=function(N){let P="";for(let G=0;G<N;G+=1)P+=".";return P};let w=function(N,P){let G="";if(P.type===o.TRG)if(N===f||N===b){let J=P.min.toString(16).toUpperCase();J.length%2!==0&&(J=`0${J}`),G+=N===f?"%x":"U+",G+=J,J=P.max.toString(16).toUpperCase(),J.length%2!==0&&(J=`0${J}`),G+=`&ndash;${J}`}else G=`%d${P.min.toString(10)}&ndash;${P.max.toString(10)}`;return G},m=function(N,P){let G="";if(P.type===o.REP)if(N===f){let J=P.min.toString(16).toUpperCase();J.length%2!==0&&(J=`0${J}`),G=`x${J}`,P.max<1/0?(J=P.max.toString(16).toUpperCase(),J.length%2!==0&&(J=`0${J}`)):J="inf",G+=`&ndash;${J}`}else P.max<1/0?G=`${P.min.toString(10)}&ndash;${P.max.toString(10)}`:G=`${P.min.toString(10)}&ndash;inf`;return G},A=function(N,P){let G="";if(P.type===o.TBS){let J=Math.min(P.string.length,C*2);if(N===f||N===b){G+=N===f?"%x":"U+";for(let Q=0;Q<J;Q+=1){let le;Q>0&&(G+="."),le=P.string[Q].toString(16).toUpperCase(),le.length%2!==0&&(le=`0${le}`),G+=le}}else{G="%d";for(let Q=0;Q<J;Q+=1)Q>0&&(G+="."),G+=P.string[Q].toString(10)}J<P.string.length&&(G+=te)}return G},I=function(N,P){let G="";if(P.type===o.TLS){let J=Math.min(P.string.length,C);if(N===f||N===l){let Q,le,oe;N===f?(G="%x",oe=16):(G="%d",oe=10);for(let W=0;W<J;W+=1)W>0&&(G+="."),le=P.string[W],le>=97&&le<=122?(Q=le-32,G+=`${Q.toString(oe)}/${le.toString(oe)}`.toUpperCase()):le>=65&&le<=90?(Q=le,le+=32,G+=`${Q.toString(oe)}/${le.toString(oe)}`.toUpperCase()):G+=le.toString(oe).toUpperCase();J<P.string.length&&(G+=te)}else{G='"';for(let Q=0;Q<J;Q+=1)G+=t.asciiChars[P.string[Q]];J<P.string.length&&(G+=te),G+='"'}}return G},y=function(N,P,G,J,Q){if(J===0)return"";let le="",oe=Q?",":"";switch(N){case f:le=oe+t.charsToHex(P,G,J);break;case l:if(Q)return`,${t.charsToDec(P,G,J)}`;le=oe+t.charsToDec(P,G,J);break;case b:le=t.charsToUnicode(P,G,J);break;case p:default:le=t.charsToAsciiHtml(P,G,J);break}return le},M=function(N,P,G,J,Q,le){let oe="",W,he,Z,se,F=U,ne=`<span class="${r.CLASS_LOOKBEHIND}">`,pe=`<span class="${r.CLASS_REMAINDER}">`,Ee="</span>",ve=!1;switch(G){case o.EMPTY:oe+=_;case o.NOMATCH:case o.MATCH:case o.ACTIVE:W=J-Q,he=le-W,Z=le,se=P.length-Z;break;default:throw new Error("unrecognized state")}return F=U,he>v?(he=v,F=te,se=0):he+se>v&&(F=te,se=v-he),he>0&&(oe+=ne,oe+=y(N,P,W,he,ve),oe+=Ee,ve=!0),se>0&&(oe+=pe,oe+=y(N,P,Z,se,ve),oe+=Ee),oe+F},re=function(N,P,G,J,Q,le){let oe="",W,he,Z,se,F=U,ne=`<span class="${r.CLASS_REMAINDER}">`,pe="</span>",Ee=!1;switch(G){case o.EMPTY:oe+=_;case o.NOMATCH:case o.ACTIVE:W=J,he=0,Z=J,se=P.length-Z;break;case o.MATCH:W=J,he=Q,Z=J+he,se=P.length-Z;break;default:throw new Error("unrecognized state")}return F=U,he>v?(he=v,F=te,se=0):he+se>v&&(F=te,se=v-he),he>0&&(oe+=le,oe+=y(N,P,W,he,Ee),oe+=pe,Ee=!0),se>0&&(oe+=ne,oe+=y(N,P,Z,se,Ee),oe+=pe),oe+F},T=function(N,P,G,J,Q){let le=`<span class="${r.CLASS_LOOKAHEAD}">`;return re(N,P,G,J,Q,le)},K=function(N,P,G,J,Q){let le=`<span class="${r.CLASS_MATCH}">`;return re(N,P,G,J,Q,le)},Y=function(N){if(z===null)return"";let P="",G,J,Q,le,oe,W;return P+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th>",P+=`<th>operator</th><th>phrase</th></tr>
`,i.forEach(he=>{let Z=D[he];switch(G=Z.thisLine,J=Z.thatLine!==void 0?Z.thatLine:"--",Q=!1,le=!1,oe=!1,Z.lookAround===o.LOOKAROUND_AHEAD&&(Q=!0,oe=!0,W=Z.lookAnchor),(Z.opcode.type===o.AND||Z.opcode.type===o.NOT)&&(Q=!0,oe=!0,W=Z.phraseIndex),Z.lookAround===o.LOOKAROUND_BEHIND&&(le=!0,oe=!0,W=Z.lookAnchor),(Z.opcode.type===o.BKA||Z.opcode.type===o.BKN)&&(le=!0,oe=!0,W=Z.phraseIndex),P+="<tr>",P+=`<td>${G}</td><td>${J}</td>`,P+=`<td>${Z.phraseIndex}</td>`,P+=`<td>${Z.phraseLength}</td>`,P+=`<td>${Z.depth}</td>`,P+="<td>",Z.state){case o.ACTIVE:P+=`<span class="${r.CLASS_ACTIVE}">&darr;&nbsp;</span>`;break;case o.MATCH:P+=`<span class="${r.CLASS_MATCH}">&uarr;M</span>`;break;case o.NOMATCH:P+=`<span class="${r.CLASS_NOMATCH}">&uarr;N</span>`;break;case o.EMPTY:P+=`<span class="${r.CLASS_EMPTY}">&uarr;E</span>`;break;default:P+=`<span class="${r.CLASS_ACTIVE}">--</span>`;break}if(P+="</td>",P+="<td>",P+=a.indent(Z.depth),Q?P+=`<span class="${r.CLASS_LOOKAHEAD}">`:le&&(P+=`<span class="${r.CLASS_LOOKBEHIND}">`),P+=t.opcodeToString(Z.opcode.type),Z.opcode.type===o.RNM&&(P+=`(${z[Z.opcode.index].name}) `),Z.opcode.type===o.BKR){let se=Z.opcode.bkrCase===o.BKR_MODE_CI?"%i":"%s",F=Z.opcode.bkrMode===o.BKR_MODE_UM?"%u":"%p";P+=`(\\${se}${F}${z[Z.opcode.index].name}) `}Z.opcode.type===o.UDT&&(P+=`(${X[Z.opcode.index].name}) `),Z.opcode.type===o.TRG&&(P+=`(${w(N,Z.opcode)}) `),Z.opcode.type===o.TBS&&(P+=`(${A(N,Z.opcode)}) `),Z.opcode.type===o.TLS&&(P+=`(${I(N,Z.opcode)}) `),Z.opcode.type===o.REP&&(P+=`(${m(N,Z.opcode)}) `),oe&&(P+="</span>"),P+="</td>",P+="<td>",le?P+=M(N,j,Z.state,Z.phraseIndex,Z.phraseLength,W):Q?P+=T(N,j,Z.state,Z.phraseIndex,Z.phraseLength):P+=K(N,j,Z.state,Z.phraseIndex,Z.phraseLength),P+=`</td></tr>
`}),P+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th>",P+=`<th>operator</th><th>phrase</th></tr>
`,P+=`</table>
`,P};this.toHtml=function(N,P){let G=p;if(typeof N=="string"&&N.length>=3){let Q=N.toLowerCase().slice(0,3);Q==="hex"?G=f:Q==="dec"?G=l:Q==="uni"&&(G=b)}let J="";return J+=x(G,P),J+=Y(G),J+=E(),J}}});var Eo=de((GB,og)=>{og.exports={ast:X2(),circular:Ed(),ids:Xr(),parser:eg(),stats:rg(),trace:ig(),utils:wo(),emitcss:xd(),style:Ua()}});var ag=de((JB,sg)=>{sg.exports=function(){this.grammarObject="grammarObject",this.rules=[],this.rules[0]={name:"file",lower:"file",index:0,isBkr:!1},this.rules[1]={name:"line",lower:"line",index:1,isBkr:!1},this.rules[2]={name:"line-text",lower:"line-text",index:2,isBkr:!1},this.rules[3]={name:"last-line",lower:"last-line",index:3,isBkr:!1},this.rules[4]={name:"valid",lower:"valid",index:4,isBkr:!1},this.rules[5]={name:"invalid",lower:"invalid",index:5,isBkr:!1},this.rules[6]={name:"end",lower:"end",index:6,isBkr:!1},this.rules[7]={name:"CRLF",lower:"crlf",index:7,isBkr:!1},this.rules[8]={name:"LF",lower:"lf",index:8,isBkr:!1},this.rules[9]={name:"CR",lower:"cr",index:9,isBkr:!1},this.udts=[],this.rules[0].opcodes=[],this.rules[0].opcodes[0]={type:2,children:[1,3]},this.rules[0].opcodes[1]={type:3,min:0,max:1/0},this.rules[0].opcodes[2]={type:4,index:1},this.rules[0].opcodes[3]={type:3,min:0,max:1},this.rules[0].opcodes[4]={type:4,index:3},this.rules[1].opcodes=[],this.rules[1].opcodes[0]={type:2,children:[1,2]},this.rules[1].opcodes[1]={type:4,index:2},this.rules[1].opcodes[2]={type:4,index:6},this.rules[2].opcodes=[],this.rules[2].opcodes[0]={type:3,min:0,max:1/0},this.rules[2].opcodes[1]={type:1,children:[2,3]},this.rules[2].opcodes[2]={type:4,index:4},this.rules[2].opcodes[3]={type:4,index:5},this.rules[3].opcodes=[],this.rules[3].opcodes[0]={type:3,min:1,max:1/0},this.rules[3].opcodes[1]={type:1,children:[2,3]},this.rules[3].opcodes[2]={type:4,index:4},this.rules[3].opcodes[3]={type:4,index:5},this.rules[4].opcodes=[],this.rules[4].opcodes[0]={type:1,children:[1,2]},this.rules[4].opcodes[1]={type:5,min:32,max:126},this.rules[4].opcodes[2]={type:6,string:[9]},this.rules[5].opcodes=[],this.rules[5].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[5].opcodes[1]={type:5,min:0,max:8},this.rules[5].opcodes[2]={type:5,min:11,max:12},this.rules[5].opcodes[3]={type:5,min:14,max:31},this.rules[5].opcodes[4]={type:5,min:127,max:4294967295},this.rules[6].opcodes=[],this.rules[6].opcodes[0]={type:1,children:[1,2,3]},this.rules[6].opcodes[1]={type:4,index:7},this.rules[6].opcodes[2]={type:4,index:8},this.rules[6].opcodes[3]={type:4,index:9},this.rules[7].opcodes=[],this.rules[7].opcodes[0]={type:6,string:[13,10]},this.rules[8].opcodes=[],this.rules[8].opcodes[0]={type:6,string:[10]},this.rules[9].opcodes=[],this.rules[9].opcodes[0]={type:6,string:[13]},this.toString=function(){let r="";return r+=`file = *line [last-line]
`,r+=`line = line-text end
`,r+=`line-text = *(valid/invalid)
`,r+=`last-line = 1*(valid/invalid)
`,r+=`valid = %d32-126 / %d9
`,r+=`invalid = %d0-8 / %d11-12 /%d14-31 / %x7f-ffffffff
`,r+=`end = CRLF / LF / CR
`,r+=`CRLF = %d13.10
`,r+=`LF = %d10
`,r+=`CR = %d13
`,r}}});var cg=de(fg=>{var Kt=Xr(),w7=wo();function E7(n,t,r,i,o){return n===Kt.SEM_PRE?(o.endLength=0,o.textLength=0,o.invalidCount=0):o.lines.push({lineNo:o.lines.length,beginChar:r,length:i,textLength:o.textLength,endType:o.endType,invalidChars:o.invalidCount}),Kt.SEM_OK}function _7(n,t,r,i,o){return n===Kt.SEM_PRE&&(o.textLength=i),Kt.SEM_OK}function A7(n,t,r,i,o){return n===Kt.SEM_PRE?(o.endLength=0,o.textLength=0,o.invalidCount=0):o.strict?(o.lines.push({lineNo:o.lines.length,beginChar:r,length:i,textLength:i,endType:"none",invalidChars:o.invalidCount}),o.errors.push({line:o.lineNo,char:r+i,msg:"no line end on last line - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})):(t.push(10),o.lines.push({lineNo:o.lines.length,beginChar:r,length:i+1,textLength:i,endType:"LF",invalidChars:o.invalidCount})),Kt.SEM_OK}function S7(n,t,r,i,o){return n===Kt.SEM_PRE&&o.errors.push({line:o.lineNo,char:r,msg:`invalid character found '\\x${w7.charToHex(t[r])}'`}),Kt.SEM_OK}function M7(n,t,r,i,o){return n===Kt.SEM_POST&&(o.lineNo+=1),Kt.SEM_OK}function T7(n,t,r,i,o){return n===Kt.SEM_PRE&&(o.endType="LF",o.strict&&o.errors.push({line:o.lineNo,char:r,msg:"line end character LF(\\n, \\x0A) - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})),Kt.SEM_OK}function k7(n,t,r,i,o){return n===Kt.SEM_PRE&&(o.endType="CR",o.strict&&o.errors.push({line:o.lineNo,char:r,msg:"line end character CR(\\r, \\x0D) - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})),Kt.SEM_OK}function C7(n,t,r,i,o){return n===Kt.SEM_PRE&&(o.endType="CRLF"),Kt.SEM_OK}var Vn=[];Vn.line=E7;Vn["line-text"]=_7;Vn["last-line"]=A7;Vn.invalid=S7;Vn.end=M7;Vn.lf=T7;Vn.cr=k7;Vn.crlf=C7;fg.callbacks=Vn});var lg=de((WB,ug)=>{ug.exports=function(t,r,i,o){let s="scanner.js: ",a=Eo(),f=new(ag()),{callbacks:l}=cg(),p=[],b=new a.parser;if(b.ast=new a.ast,b.ast.callbacks=l,o){if(o.traceObject!=="traceObject")throw new TypeError(`${s}trace argument is not a trace object`);b.trace=o}if(b.parse(f,"file",t).success!==!0){r.push({line:0,char:0,msg:"syntax analysis error analyzing input SABNF grammar"});return}let C={lines:p,lineNo:0,errors:r,strict:!!i};return b.ast.translate(C),p}});var dg=de((YB,hg)=>{hg.exports=function(){let t="syntax-callbacks.js: ",r=Eo(),i=r.ids,o,s=function(I,y,M,re){switch(I.state){case i.ACTIVE:re.altStack=[],re.repCount=0;break;case i.EMPTY:re.errors.push({line:0,char:0,msg:"grammar file is empty"});break;case i.MATCH:re.ruleCount===0&&re.errors.push({line:0,char:0,msg:"no rules defined"});break;case i.NOMATCH:throw new Error(`${t}synFile: grammar file NOMATCH: design error: should never happen.`);default:throw new Error(`${t}synFile: unrecognized case.`)}},a=function(A,I,y,M){switch(A.state){case i.ACTIVE:M.altStack.length=0,o={groupOpen:null,groupError:!1,optionOpen:null,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},M.altStack.push(o);break;case i.EMPTY:throw new Error(`${t}synRule: EMPTY: rule cannot be empty`);case i.NOMATCH:break;case i.MATCH:M.ruleCount+=1;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},f=function(A,I,y,M){switch(A.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:M.errors.push({line:M.findLine(M.lines,y,M.charsLength),char:y,msg:"Unrecognized SABNF line. Invalid rule, comment or blank line."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},l=function(A,I,y,M){switch(A.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:M.errors.push({line:M.findLine(M.lines,y,M.charsLength),char:y,msg:"Rule names must be alphanum and begin with alphabetic character."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},p=function(A,I,y,M){switch(A.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:M.errors.push({line:M.findLine(M.lines,y,M.charsLength),char:y,msg:"Expected '=' or '=/'. Not found."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},b=function(A,I,y,M){switch(A.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:M.strict&&M.errors.push({line:M.findLine(M.lines,y,M.charsLength),char:y,msg:"AND operator(&) found - strict ABNF specified."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},v=function(A,I,y,M){switch(A.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:M.strict&&M.errors.push({line:M.findLine(M.lines,y,M.charsLength),char:y,msg:"NOT operator(!) found - strict ABNF specified."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},C=function(A,I,y,M){switch(A.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:M.strict&&M.errors.push({line:M.findLine(M.lines,y,M.charsLength),char:y,msg:"Positive look-behind operator(&&) found - strict ABNF specified."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},D=function(A,I,y,M){switch(A.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:M.strict&&M.errors.push({line:M.findLine(M.lines,y,M.charsLength),char:y,msg:"Negative look-behind operator(!!) found - strict ABNF specified."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},S=function(A,I,y,M){switch(A.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:M.strict&&M.errors.push({line:M.findLine(M.lines,y,M.charsLength),char:y,msg:"Beginning of string anchor(%^) found - strict ABNF specified."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},k=function(A,I,y,M){switch(A.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:M.strict&&M.errors.push({line:M.findLine(M.lines,y,M.charsLength),char:y,msg:"End of string anchor(%$) found - strict ABNF specified."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},$=function(A,I,y,M){switch(A.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:if(M.strict){let re=r.utils.charsToString(I,y,A.phraseLength);M.errors.push({line:M.findLine(M.lines,y,M.charsLength),char:y,msg:`Back reference operator(${re}) found - strict ABNF specified.`})}break;default:throw new Error(`${t}synFile: unrecognized case.`)}},O=function(A,I,y,M){switch(A.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:if(M.strict){let re=r.utils.charsToString(I,y,A.phraseLength);M.errors.push({line:M.findLine(M.lines,y,M.charsLength),char:y,msg:`UDT operator found(${re}) - strict ABNF specified.`})}break;default:throw new Error(`${t}synFile: unrecognized case.`)}},q=function(A,I,y){switch(A.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:o.tlsOpen=y;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},j=function(A,I,y,M){switch(A.state){case i.ACTIVE:M.stringTabChar=!1;break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:M.stringTabChar!==!1&&M.errors.push({line:M.findLine(M.lines,M.stringTabChar),char:M.stringTabChar,msg:"Tab character (\\t, x09) not allowed in literal string (see 'quoted-string' definition, RFC 7405.)"});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},z=function(A,I,y,M){switch(A.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:M.stringTabChar=y;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},X=function(A,I,y,M){switch(A.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:M.errors.push({line:M.findLine(M.lines,o.tlsOpen),char:o.tlsOpen,msg:'Case-insensitive literal string("...") opened but not closed.'}),o.basicError=!0,o.tlsOpen=null;break;case i.MATCH:o.tlsOpen=null;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},B=function(A,I,y){switch(A.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:o.clsOpen=y;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},L=function(A,I,y,M){switch(A.state){case i.ACTIVE:M.stringTabChar=!1;break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:M.stringTabChar!==!1&&M.errors.push({line:M.findLine(M.lines,M.stringTabChar),char:M.stringTabChar,msg:"Tab character (\\t, x09) not allowed in literal string."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},U=function(A,I,y,M){switch(A.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:M.errors.push({line:M.findLine(M.lines,o.clsOpen),char:o.clsOpen,msg:"Case-sensitive literal string('...') opened but not closed."}),o.clsOpen=null,o.basicError=!0;break;case i.MATCH:M.strict&&M.errors.push({line:M.findLine(M.lines,o.clsOpen),char:o.clsOpen,msg:"Case-sensitive string operator('...') found - strict ABNF specified."}),o.clsOpen=null;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},te=function(A,I,y){switch(A.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:o.prosValOpen=y;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},_=function(A,I,y,M){switch(A.state){case i.ACTIVE:M.stringTabChar=!1;break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:M.stringTabChar!==!1&&M.errors.push({line:M.findLine(M.lines,M.stringTabChar),char:M.stringTabChar,msg:"Tab character (\\t, x09) not allowed in prose value string."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},u=function(A,I,y,M){switch(A.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:M.errors.push({line:M.findLine(M.lines,o.prosValOpen),char:o.prosValOpen,msg:"Prose value operator(<...>) opened but not closed."}),o.basicError=!0,o.prosValOpen=null;break;case i.MATCH:M.errors.push({line:M.findLine(M.lines,o.prosValOpen),char:o.prosValOpen,msg:"Prose value operator(<...>) found. The ABNF syntax is valid, but a parser cannot be generated from this grammar."}),o.prosValOpen=null;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},g=function(A,I,y,M){switch(A.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:o={groupOpen:y,groupError:!1,optionOpen:null,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},M.altStack.push(o);break;default:throw new Error(`${t}synFile: unrecognized case.`)}},d=function(A,I,y,M){switch(A.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:M.errors.push({line:M.findLine(M.lines,o.groupOpen),char:o.groupOpen,msg:'Group "(...)" opened but not closed.'}),o=M.altStack.pop(),o.groupError=!0;break;case i.MATCH:o=M.altStack.pop();break;default:throw new Error(`${t}synFile: unrecognized case.`)}},c=function(A,I,y,M){switch(A.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:o={groupOpen:null,groupError:!1,optionOpen:y,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},M.altStack.push(o);break;default:throw new Error(`${t}synFile: unrecognized case.`)}},h=function(A,I,y,M){switch(A.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:M.errors.push({line:M.findLine(M.lines,o.optionOpen),char:o.optionOpen,msg:'Option "[...]" opened but not closed.'}),o=M.altStack.pop(),o.optionError=!0;break;case i.MATCH:o=M.altStack.pop();break;default:throw new Error(`${t}synFile: unrecognized case.`)}},x=function(A,I,y,M){switch(A.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:o.basicError===!1&&M.errors.push({line:M.findLine(M.lines,y,M.charsLength),char:y,msg:"Unrecognized SABNF element."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},E=function(A,I,y,M){switch(A.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:if(A.phraseLength===1&&M.strict){let re=I[y]===13?"CR":"LF";M.errors.push({line:M.findLine(M.lines,y,M.charsLength),char:y,msg:`Line end '${re}' found - strict ABNF specified, only CRLF allowed.`})}break;default:throw new Error(`${t}synFile: unrecognized case.`)}},w=function(A,I,y,M){switch(A.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:break;case i.MATCH:M.errors.push({line:M.findLine(M.lines,y,M.charsLength),char:y,msg:"Unrecognized grammar element or characters."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},m=function(A,I,y,M){switch(A.state){case i.ACTIVE:break;case i.EMPTY:break;case i.NOMATCH:M.repCount+=1;break;case i.MATCH:M.repCount+=1;break;default:throw new Error(`${t}synFile: unrecognized case.`)}};this.callbacks=[],this.callbacks.andop=b,this.callbacks.basicelementerr=x,this.callbacks.clsclose=U,this.callbacks.clsopen=B,this.callbacks.clsstring=L,this.callbacks.definedaserror=p,this.callbacks.file=s,this.callbacks.groupclose=d,this.callbacks.groupopen=g,this.callbacks.lineenderror=w,this.callbacks.lineend=E,this.callbacks.notop=v,this.callbacks.optionclose=h,this.callbacks.optionopen=c,this.callbacks.prosvalclose=u,this.callbacks.prosvalopen=te,this.callbacks.prosvalstring=_,this.callbacks.repetition=m,this.callbacks.rule=a,this.callbacks.ruleerror=f,this.callbacks.rulenameerror=l,this.callbacks.stringtab=z,this.callbacks.tlsclose=X,this.callbacks.tlsopen=q,this.callbacks.tlsstring=j,this.callbacks.udtop=O,this.callbacks.bkaop=C,this.callbacks.bknop=D,this.callbacks.bkrop=$,this.callbacks.abgop=S,this.callbacks.aenop=k}});var mg=de((XB,pg)=>{pg.exports=function(){let t=Eo(),r=t.ids,i=function(){this.names=[],this.add=function(Z){let se=-1;return this.get(Z)===-1&&(se={name:Z,lower:Z.toLowerCase(),index:this.names.length},this.names.push(se)),se},this.get=function(Z){let se=-1,F=Z.toLowerCase();for(let ne=0;ne<this.names.length;ne+=1)if(this.names[ne].lower===F){se=this.names[ne];break}return se}},o=function(he,Z,se){let F=0;for(let ne=Z;ne<Z+se;ne+=1)F=10*F+he[ne]-48;return F},s=function(he,Z,se){let F=0;for(let ne=Z;ne<Z+se;ne+=1)F=2*F+he[ne]-48;return F},a=function(he,Z,se){let F=0;for(let ne=Z;ne<Z+se;ne+=1){let pe=he[ne];if(pe>=48&&pe<=57)pe-=48;else if(pe>=65&&pe<=70)pe-=55;else if(pe>=97&&pe<=102)pe-=87;else throw new Error("hexnum out of range");F=16*F+pe}return F};function f(W,he,Z,se,F){let ne=r.SEM_OK;if(W===r.SEM_PRE)F.ruleNames=new i,F.udtNames=new i,F.rules=[],F.udts=[],F.rulesLineMap=[],F.opcodes=[],F.altStack=[],F.topStack=null,F.topRule=null;else if(W===r.SEM_POST){let pe;F.rules.forEach(Ee=>{Ee.isBkr=!1,Ee.opcodes.forEach(ve=>{ve.type===r.RNM&&(pe=F.ruleNames.get(ve.index.name),pe===-1?(F.errors.push({line:F.findLine(F.lines,ve.index.phraseIndex,F.charsLength),char:ve.index.phraseIndex,msg:`Rule name '${ve.index.name}' used but not defined.`}),ve.index=-1):ve.index=pe.index)})}),F.udts.forEach(Ee=>{Ee.isBkr=!1}),F.rules.forEach(Ee=>{Ee.opcodes.forEach(ve=>{ve.type===r.BKR&&(Ee.hasBkr=!0,pe=F.ruleNames.get(ve.index.name),pe!==-1?(F.rules[pe.index].isBkr=!0,ve.index=pe.index):(pe=F.udtNames.get(ve.index.name),pe!==-1?(F.udts[pe.index].isBkr=!0,ve.index=F.rules.length+pe.index):(F.errors.push({line:F.findLine(F.lines,ve.index.phraseIndex,F.charsLength),char:ve.index.phraseIndex,msg:`Back reference name '${ve.index.name}' refers to undefined rule or unamed UDT.`}),ve.index=-1)))})})}return ne}function l(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_PRE&&(F.altStack.length=0,F.topStack=null,F.rulesLineMap.push({line:F.findLine(F.lines,Z,F.charsLength),char:Z})),ne}function p(W,he,Z,se,F){let ne=r.SEM_OK;if(W===r.SEM_PRE)F.ruleName="",F.definedas="";else if(W===r.SEM_POST){let pe;F.definedas==="="?(pe=F.ruleNames.add(F.ruleName),pe===-1?(F.definedas=null,F.errors.push({line:F.findLine(F.lines,Z,F.charsLength),char:Z,msg:`Rule name '${F.ruleName}' previously defined.`})):(F.topRule={name:pe.name,lower:pe.lower,opcodes:[],index:pe.index},F.rules.push(F.topRule),F.opcodes=F.topRule.opcodes)):(pe=F.ruleNames.get(F.ruleName),pe===-1?(F.definedas=null,F.errors.push({line:F.findLine(F.lines,Z,F.charsLength),char:Z,msg:`Rule name '${F.ruleName}' for incremental alternate not previously defined.`})):(F.topRule=F.rules[pe.index],F.opcodes=F.topRule.opcodes))}return ne}function b(W,he,Z,se,F){let ne=r.SEM_OK;if(W===r.SEM_PRE)for(;;){if(F.definedas===null){ne=r.SEM_SKIP;break}if(F.topStack===null){if(F.definedas==="="){F.topStack={alt:{type:r.ALT,children:[]},cat:null},F.altStack.push(F.topStack),F.opcodes.push(F.topStack.alt);break}F.topStack={alt:F.opcodes[0],cat:null},F.altStack.push(F.topStack);break}F.topStack={alt:{type:r.ALT,children:[]},cat:null},F.altStack.push(F.topStack),F.opcodes.push(F.topStack.alt);break}else W===r.SEM_POST&&(F.altStack.pop(),F.altStack.length>0?F.topStack=F.altStack[F.altStack.length-1]:F.topStack=null);return ne}function v(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_PRE?(F.topStack.alt.children.push(F.opcodes.length),F.topStack.cat={type:r.CAT,children:[]},F.opcodes.push(F.topStack.cat)):W===r.SEM_POST&&(F.topStack.cat=null),ne}function C(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_PRE&&F.topStack.cat.children.push(F.opcodes.length),ne}function D(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_POST&&F.opcodes.push({type:r.REP,min:0,max:1,char:Z}),ne}function S(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_PRE&&(F.ruleName=t.utils.charsToString(he,Z,se)),ne}function k(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_POST&&(F.definedas="="),ne}function $(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_POST&&(F.definedas="=/"),ne}function O(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_PRE?(F.min=0,F.max=1/0,F.topRep={type:r.REP,min:0,max:1/0},F.opcodes.push(F.topRep)):W===r.SEM_POST&&(F.min>F.max&&F.errors.push({line:F.findLine(F.lines,Z,F.charsLength),char:Z,msg:`repetition min cannot be greater than max: min: ${F.min}: max: ${F.max}`}),F.topRep.min=F.min,F.topRep.max=F.max),ne}function q(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_POST&&(F.min=o(he,Z,se)),ne}function j(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_POST&&(F.max=o(he,Z,se)),ne}function z(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_POST&&(F.max=o(he,Z,se),F.min=F.max),ne}function X(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_POST&&F.opcodes.push({type:r.AND}),ne}function B(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_POST&&F.opcodes.push({type:r.NOT}),ne}function L(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_POST&&F.opcodes.push({type:r.RNM,index:{phraseIndex:Z,name:t.utils.charsToString(he,Z,se)}}),ne}function U(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_POST&&F.opcodes.push({type:r.ABG}),ne}function te(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_POST&&F.opcodes.push({type:r.AEN}),ne}function _(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_POST&&F.opcodes.push({type:r.BKA}),ne}function u(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_POST&&F.opcodes.push({type:r.BKN}),ne}function g(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_PRE?(F.ci=!0,F.cs=!1,F.um=!0,F.pm=!1):W===r.SEM_POST&&F.opcodes.push({type:r.BKR,bkrCase:F.cs===!0?r.BKR_MODE_CS:r.BKR_MODE_CI,bkrMode:F.pm===!0?r.BKR_MODE_PM:r.BKR_MODE_UM,index:{phraseIndex:F.bkrname.phraseIndex,name:t.utils.charsToString(he,F.bkrname.phraseIndex,F.bkrname.phraseLength)}}),ne}function d(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_POST&&(F.ci=!0),ne}function c(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_POST&&(F.cs=!0),ne}function h(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_POST&&(F.um=!0),ne}function x(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_POST&&(F.pm=!0),ne}function E(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_POST&&(F.bkrname={phraseIndex:Z,phraseLength:se}),ne}function w(W,he,Z,se,F){let ne=r.SEM_OK;if(W===r.SEM_POST){let pe=t.utils.charsToString(he,Z,se),Ee=F.udtNames.add(pe);if(Ee===-1){if(Ee=F.udtNames.get(pe),Ee===-1)throw new Error("semUdtEmpty: name look up error")}else F.udts.push({name:Ee.name,lower:Ee.lower,index:Ee.index,empty:!0});F.opcodes.push({type:r.UDT,empty:!0,index:Ee.index})}return ne}function m(W,he,Z,se,F){let ne=r.SEM_OK;if(W===r.SEM_POST){let pe=t.utils.charsToString(he,Z,se),Ee=F.udtNames.add(pe);if(Ee===-1){if(Ee=F.udtNames.get(pe),Ee===-1)throw new Error("semUdtNonEmpty: name look up error")}else F.udts.push({name:Ee.name,lower:Ee.lower,index:Ee.index,empty:!1});F.opcodes.push({type:r.UDT,empty:!1,index:Ee.index,syntax:null,semantic:null})}return ne}function A(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_PRE&&(F.tlscase=!0),ne}function I(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_POST&&se>0&&(he[Z+1]===83||he[Z+1]===115)&&(F.tlscase=!1),ne}function y(W,he,Z,se,F){let ne=r.SEM_OK;if(W===r.SEM_POST)if(F.tlscase){let pe=he.slice(Z,Z+se);for(let Ee=0;Ee<pe.length;Ee+=1)pe[Ee]>=65&&pe[Ee]<=90&&(pe[Ee]+=32);F.opcodes.push({type:r.TLS,string:pe})}else F.opcodes.push({type:r.TBS,string:he.slice(Z,Z+se)});return ne}function M(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_POST&&(se<=2?F.opcodes.push({type:r.TLS,string:[]}):F.opcodes.push({type:r.TBS,string:he.slice(Z+1,Z+se-1)})),ne}function re(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_PRE?F.tbsstr=[]:W===r.SEM_POST&&F.opcodes.push({type:r.TBS,string:F.tbsstr}),ne}function T(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_PRE?(F.min=0,F.max=0):W===r.SEM_POST&&(F.min>F.max&&F.errors.push({line:F.findLine(F.lines,Z,F.charsLength),char:Z,msg:`TRG, (%dmin-max), min cannot be greater than max: min: ${F.min}: max: ${F.max}`}),F.opcodes.push({type:r.TRG,min:F.min,max:F.max})),ne}function K(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_POST&&(F.min=o(he,Z,se)),ne}function Y(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_POST&&(F.max=o(he,Z,se)),ne}function N(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_POST&&(F.min=s(he,Z,se)),ne}function P(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_POST&&(F.max=s(he,Z,se)),ne}function G(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_POST&&(F.min=a(he,Z,se)),ne}function J(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_POST&&(F.max=a(he,Z,se)),ne}function Q(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_POST&&F.tbsstr.push(o(he,Z,se)),ne}function le(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_POST&&F.tbsstr.push(s(he,Z,se)),ne}function oe(W,he,Z,se,F){let ne=r.SEM_OK;return W===r.SEM_POST&&F.tbsstr.push(a(he,Z,se)),ne}this.callbacks=[],this.callbacks.abgop=U,this.callbacks.aenop=te,this.callbacks.alternation=b,this.callbacks.andop=X,this.callbacks.bmax=P,this.callbacks.bmin=N,this.callbacks.bkaop=_,this.callbacks.bknop=u,this.callbacks.bkrop=g,this.callbacks["bkr-name"]=E,this.callbacks.bstring=le,this.callbacks.clsop=M,this.callbacks.ci=d,this.callbacks.cs=c,this.callbacks.um=h,this.callbacks.pm=x,this.callbacks.concatenation=v,this.callbacks.defined=k,this.callbacks.dmax=Y,this.callbacks.dmin=K,this.callbacks.dstring=Q,this.callbacks.file=f,this.callbacks.incalt=$,this.callbacks.notop=B,this.callbacks.optionopen=D,this.callbacks["rep-max"]=j,this.callbacks["rep-min"]=q,this.callbacks["rep-min-max"]=z,this.callbacks.repetition=C,this.callbacks.repop=O,this.callbacks.rnmop=L,this.callbacks.rule=l,this.callbacks.rulelookup=p,this.callbacks.rulename=S,this.callbacks.tbsop=re,this.callbacks.tlscase=I,this.callbacks.tlsstring=y,this.callbacks.tlsop=A,this.callbacks.trgop=T,this.callbacks["udt-empty"]=w,this.callbacks["udt-non-empty"]=m,this.callbacks.xmax=J,this.callbacks.xmin=G,this.callbacks.xstring=oe}});var gg=de((ZB,bg)=>{bg.exports=function(){this.grammarObject="grammarObject",this.rules=[],this.rules[0]={name:"File",lower:"file",index:0,isBkr:!1},this.rules[1]={name:"BlankLine",lower:"blankline",index:1,isBkr:!1},this.rules[2]={name:"Rule",lower:"rule",index:2,isBkr:!1},this.rules[3]={name:"RuleLookup",lower:"rulelookup",index:3,isBkr:!1},this.rules[4]={name:"RuleNameTest",lower:"rulenametest",index:4,isBkr:!1},this.rules[5]={name:"RuleName",lower:"rulename",index:5,isBkr:!1},this.rules[6]={name:"RuleNameError",lower:"rulenameerror",index:6,isBkr:!1},this.rules[7]={name:"DefinedAsTest",lower:"definedastest",index:7,isBkr:!1},this.rules[8]={name:"DefinedAsError",lower:"definedaserror",index:8,isBkr:!1},this.rules[9]={name:"DefinedAs",lower:"definedas",index:9,isBkr:!1},this.rules[10]={name:"Defined",lower:"defined",index:10,isBkr:!1},this.rules[11]={name:"IncAlt",lower:"incalt",index:11,isBkr:!1},this.rules[12]={name:"RuleError",lower:"ruleerror",index:12,isBkr:!1},this.rules[13]={name:"LineEndError",lower:"lineenderror",index:13,isBkr:!1},this.rules[14]={name:"Alternation",lower:"alternation",index:14,isBkr:!1},this.rules[15]={name:"Concatenation",lower:"concatenation",index:15,isBkr:!1},this.rules[16]={name:"Repetition",lower:"repetition",index:16,isBkr:!1},this.rules[17]={name:"Modifier",lower:"modifier",index:17,isBkr:!1},this.rules[18]={name:"Predicate",lower:"predicate",index:18,isBkr:!1},this.rules[19]={name:"BasicElement",lower:"basicelement",index:19,isBkr:!1},this.rules[20]={name:"BasicElementErr",lower:"basicelementerr",index:20,isBkr:!1},this.rules[21]={name:"Group",lower:"group",index:21,isBkr:!1},this.rules[22]={name:"GroupError",lower:"grouperror",index:22,isBkr:!1},this.rules[23]={name:"GroupOpen",lower:"groupopen",index:23,isBkr:!1},this.rules[24]={name:"GroupClose",lower:"groupclose",index:24,isBkr:!1},this.rules[25]={name:"Option",lower:"option",index:25,isBkr:!1},this.rules[26]={name:"OptionError",lower:"optionerror",index:26,isBkr:!1},this.rules[27]={name:"OptionOpen",lower:"optionopen",index:27,isBkr:!1},this.rules[28]={name:"OptionClose",lower:"optionclose",index:28,isBkr:!1},this.rules[29]={name:"RnmOp",lower:"rnmop",index:29,isBkr:!1},this.rules[30]={name:"BkrOp",lower:"bkrop",index:30,isBkr:!1},this.rules[31]={name:"bkrModifier",lower:"bkrmodifier",index:31,isBkr:!1},this.rules[32]={name:"cs",lower:"cs",index:32,isBkr:!1},this.rules[33]={name:"ci",lower:"ci",index:33,isBkr:!1},this.rules[34]={name:"um",lower:"um",index:34,isBkr:!1},this.rules[35]={name:"pm",lower:"pm",index:35,isBkr:!1},this.rules[36]={name:"bkr-name",lower:"bkr-name",index:36,isBkr:!1},this.rules[37]={name:"rname",lower:"rname",index:37,isBkr:!1},this.rules[38]={name:"uname",lower:"uname",index:38,isBkr:!1},this.rules[39]={name:"ename",lower:"ename",index:39,isBkr:!1},this.rules[40]={name:"UdtOp",lower:"udtop",index:40,isBkr:!1},this.rules[41]={name:"udt-non-empty",lower:"udt-non-empty",index:41,isBkr:!1},this.rules[42]={name:"udt-empty",lower:"udt-empty",index:42,isBkr:!1},this.rules[43]={name:"RepOp",lower:"repop",index:43,isBkr:!1},this.rules[44]={name:"AltOp",lower:"altop",index:44,isBkr:!1},this.rules[45]={name:"CatOp",lower:"catop",index:45,isBkr:!1},this.rules[46]={name:"StarOp",lower:"starop",index:46,isBkr:!1},this.rules[47]={name:"AndOp",lower:"andop",index:47,isBkr:!1},this.rules[48]={name:"NotOp",lower:"notop",index:48,isBkr:!1},this.rules[49]={name:"BkaOp",lower:"bkaop",index:49,isBkr:!1},this.rules[50]={name:"BknOp",lower:"bknop",index:50,isBkr:!1},this.rules[51]={name:"AbgOp",lower:"abgop",index:51,isBkr:!1},this.rules[52]={name:"AenOp",lower:"aenop",index:52,isBkr:!1},this.rules[53]={name:"TrgOp",lower:"trgop",index:53,isBkr:!1},this.rules[54]={name:"TbsOp",lower:"tbsop",index:54,isBkr:!1},this.rules[55]={name:"TlsOp",lower:"tlsop",index:55,isBkr:!1},this.rules[56]={name:"TlsCase",lower:"tlscase",index:56,isBkr:!1},this.rules[57]={name:"TlsOpen",lower:"tlsopen",index:57,isBkr:!1},this.rules[58]={name:"TlsClose",lower:"tlsclose",index:58,isBkr:!1},this.rules[59]={name:"TlsString",lower:"tlsstring",index:59,isBkr:!1},this.rules[60]={name:"StringTab",lower:"stringtab",index:60,isBkr:!1},this.rules[61]={name:"ClsOp",lower:"clsop",index:61,isBkr:!1},this.rules[62]={name:"ClsOpen",lower:"clsopen",index:62,isBkr:!1},this.rules[63]={name:"ClsClose",lower:"clsclose",index:63,isBkr:!1},this.rules[64]={name:"ClsString",lower:"clsstring",index:64,isBkr:!1},this.rules[65]={name:"ProsVal",lower:"prosval",index:65,isBkr:!1},this.rules[66]={name:"ProsValOpen",lower:"prosvalopen",index:66,isBkr:!1},this.rules[67]={name:"ProsValString",lower:"prosvalstring",index:67,isBkr:!1},this.rules[68]={name:"ProsValClose",lower:"prosvalclose",index:68,isBkr:!1},this.rules[69]={name:"rep-min",lower:"rep-min",index:69,isBkr:!1},this.rules[70]={name:"rep-min-max",lower:"rep-min-max",index:70,isBkr:!1},this.rules[71]={name:"rep-max",lower:"rep-max",index:71,isBkr:!1},this.rules[72]={name:"rep-num",lower:"rep-num",index:72,isBkr:!1},this.rules[73]={name:"dString",lower:"dstring",index:73,isBkr:!1},this.rules[74]={name:"xString",lower:"xstring",index:74,isBkr:!1},this.rules[75]={name:"bString",lower:"bstring",index:75,isBkr:!1},this.rules[76]={name:"Dec",lower:"dec",index:76,isBkr:!1},this.rules[77]={name:"Hex",lower:"hex",index:77,isBkr:!1},this.rules[78]={name:"Bin",lower:"bin",index:78,isBkr:!1},this.rules[79]={name:"dmin",lower:"dmin",index:79,isBkr:!1},this.rules[80]={name:"dmax",lower:"dmax",index:80,isBkr:!1},this.rules[81]={name:"bmin",lower:"bmin",index:81,isBkr:!1},this.rules[82]={name:"bmax",lower:"bmax",index:82,isBkr:!1},this.rules[83]={name:"xmin",lower:"xmin",index:83,isBkr:!1},this.rules[84]={name:"xmax",lower:"xmax",index:84,isBkr:!1},this.rules[85]={name:"dnum",lower:"dnum",index:85,isBkr:!1},this.rules[86]={name:"bnum",lower:"bnum",index:86,isBkr:!1},this.rules[87]={name:"xnum",lower:"xnum",index:87,isBkr:!1},this.rules[88]={name:"alphanum",lower:"alphanum",index:88,isBkr:!1},this.rules[89]={name:"owsp",lower:"owsp",index:89,isBkr:!1},this.rules[90]={name:"wsp",lower:"wsp",index:90,isBkr:!1},this.rules[91]={name:"space",lower:"space",index:91,isBkr:!1},this.rules[92]={name:"comment",lower:"comment",index:92,isBkr:!1},this.rules[93]={name:"LineEnd",lower:"lineend",index:93,isBkr:!1},this.rules[94]={name:"LineContinue",lower:"linecontinue",index:94,isBkr:!1},this.udts=[],this.rules[0].opcodes=[],this.rules[0].opcodes[0]={type:3,min:0,max:1/0},this.rules[0].opcodes[1]={type:1,children:[2,3,4]},this.rules[0].opcodes[2]={type:4,index:1},this.rules[0].opcodes[3]={type:4,index:2},this.rules[0].opcodes[4]={type:4,index:12},this.rules[1].opcodes=[],this.rules[1].opcodes[0]={type:2,children:[1,5,7]},this.rules[1].opcodes[1]={type:3,min:0,max:1/0},this.rules[1].opcodes[2]={type:1,children:[3,4]},this.rules[1].opcodes[3]={type:6,string:[32]},this.rules[1].opcodes[4]={type:6,string:[9]},this.rules[1].opcodes[5]={type:3,min:0,max:1},this.rules[1].opcodes[6]={type:4,index:92},this.rules[1].opcodes[7]={type:4,index:93},this.rules[2].opcodes=[],this.rules[2].opcodes[0]={type:2,children:[1,2,3,4]},this.rules[2].opcodes[1]={type:4,index:3},this.rules[2].opcodes[2]={type:4,index:89},this.rules[2].opcodes[3]={type:4,index:14},this.rules[2].opcodes[4]={type:1,children:[5,8]},this.rules[2].opcodes[5]={type:2,children:[6,7]},this.rules[2].opcodes[6]={type:4,index:89},this.rules[2].opcodes[7]={type:4,index:93},this.rules[2].opcodes[8]={type:2,children:[9,10]},this.rules[2].opcodes[9]={type:4,index:13},this.rules[2].opcodes[10]={type:4,index:93},this.rules[3].opcodes=[],this.rules[3].opcodes[0]={type:2,children:[1,2,3]},this.rules[3].opcodes[1]={type:4,index:4},this.rules[3].opcodes[2]={type:4,index:89},this.rules[3].opcodes[3]={type:4,index:7},this.rules[4].opcodes=[],this.rules[4].opcodes[0]={type:1,children:[1,2]},this.rules[4].opcodes[1]={type:4,index:5},this.rules[4].opcodes[2]={type:4,index:6},this.rules[5].opcodes=[],this.rules[5].opcodes[0]={type:4,index:88},this.rules[6].opcodes=[],this.rules[6].opcodes[0]={type:3,min:1,max:1/0},this.rules[6].opcodes[1]={type:1,children:[2,3]},this.rules[6].opcodes[2]={type:5,min:33,max:60},this.rules[6].opcodes[3]={type:5,min:62,max:126},this.rules[7].opcodes=[],this.rules[7].opcodes[0]={type:1,children:[1,2]},this.rules[7].opcodes[1]={type:4,index:9},this.rules[7].opcodes[2]={type:4,index:8},this.rules[8].opcodes=[],this.rules[8].opcodes[0]={type:3,min:1,max:2},this.rules[8].opcodes[1]={type:5,min:33,max:126},this.rules[9].opcodes=[],this.rules[9].opcodes[0]={type:1,children:[1,2]},this.rules[9].opcodes[1]={type:4,index:11},this.rules[9].opcodes[2]={type:4,index:10},this.rules[10].opcodes=[],this.rules[10].opcodes[0]={type:6,string:[61]},this.rules[11].opcodes=[],this.rules[11].opcodes[0]={type:6,string:[61,47]},this.rules[12].opcodes=[],this.rules[12].opcodes[0]={type:2,children:[1,6]},this.rules[12].opcodes[1]={type:3,min:1,max:1/0},this.rules[12].opcodes[2]={type:1,children:[3,4,5]},this.rules[12].opcodes[3]={type:5,min:32,max:126},this.rules[12].opcodes[4]={type:6,string:[9]},this.rules[12].opcodes[5]={type:4,index:94},this.rules[12].opcodes[6]={type:4,index:93},this.rules[13].opcodes=[],this.rules[13].opcodes[0]={type:3,min:1,max:1/0},this.rules[13].opcodes[1]={type:1,children:[2,3,4]},this.rules[13].opcodes[2]={type:5,min:32,max:126},this.rules[13].opcodes[3]={type:6,string:[9]},this.rules[13].opcodes[4]={type:4,index:94},this.rules[14].opcodes=[],this.rules[14].opcodes[0]={type:2,children:[1,2]},this.rules[14].opcodes[1]={type:4,index:15},this.rules[14].opcodes[2]={type:3,min:0,max:1/0},this.rules[14].opcodes[3]={type:2,children:[4,5,6]},this.rules[14].opcodes[4]={type:4,index:89},this.rules[14].opcodes[5]={type:4,index:44},this.rules[14].opcodes[6]={type:4,index:15},this.rules[15].opcodes=[],this.rules[15].opcodes[0]={type:2,children:[1,2]},this.rules[15].opcodes[1]={type:4,index:16},this.rules[15].opcodes[2]={type:3,min:0,max:1/0},this.rules[15].opcodes[3]={type:2,children:[4,5]},this.rules[15].opcodes[4]={type:4,index:45},this.rules[15].opcodes[5]={type:4,index:16},this.rules[16].opcodes=[],this.rules[16].opcodes[0]={type:2,children:[1,3]},this.rules[16].opcodes[1]={type:3,min:0,max:1},this.rules[16].opcodes[2]={type:4,index:17},this.rules[16].opcodes[3]={type:1,children:[4,5,6,7]},this.rules[16].opcodes[4]={type:4,index:21},this.rules[16].opcodes[5]={type:4,index:25},this.rules[16].opcodes[6]={type:4,index:19},this.rules[16].opcodes[7]={type:4,index:20},this.rules[17].opcodes=[],this.rules[17].opcodes[0]={type:1,children:[1,5]},this.rules[17].opcodes[1]={type:2,children:[2,3]},this.rules[17].opcodes[2]={type:4,index:18},this.rules[17].opcodes[3]={type:3,min:0,max:1},this.rules[17].opcodes[4]={type:4,index:43},this.rules[17].opcodes[5]={type:4,index:43},this.rules[18].opcodes=[],this.rules[18].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[18].opcodes[1]={type:4,index:49},this.rules[18].opcodes[2]={type:4,index:50},this.rules[18].opcodes[3]={type:4,index:47},this.rules[18].opcodes[4]={type:4,index:48},this.rules[19].opcodes=[],this.rules[19].opcodes[0]={type:1,children:[1,2,3,4,5,6,7,8,9,10]},this.rules[19].opcodes[1]={type:4,index:40},this.rules[19].opcodes[2]={type:4,index:29},this.rules[19].opcodes[3]={type:4,index:53},this.rules[19].opcodes[4]={type:4,index:54},this.rules[19].opcodes[5]={type:4,index:55},this.rules[19].opcodes[6]={type:4,index:61},this.rules[19].opcodes[7]={type:4,index:30},this.rules[19].opcodes[8]={type:4,index:51},this.rules[19].opcodes[9]={type:4,index:52},this.rules[19].opcodes[10]={type:4,index:65},this.rules[20].opcodes=[],this.rules[20].opcodes[0]={type:3,min:1,max:1/0},this.rules[20].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[20].opcodes[2]={type:5,min:33,max:40},this.rules[20].opcodes[3]={type:5,min:42,max:46},this.rules[20].opcodes[4]={type:5,min:48,max:92},this.rules[20].opcodes[5]={type:5,min:94,max:126},this.rules[21].opcodes=[],this.rules[21].opcodes[0]={type:2,children:[1,2,3]},this.rules[21].opcodes[1]={type:4,index:23},this.rules[21].opcodes[2]={type:4,index:14},this.rules[21].opcodes[3]={type:1,children:[4,5]},this.rules[21].opcodes[4]={type:4,index:24},this.rules[21].opcodes[5]={type:4,index:22},this.rules[22].opcodes=[],this.rules[22].opcodes[0]={type:3,min:1,max:1/0},this.rules[22].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[22].opcodes[2]={type:5,min:33,max:40},this.rules[22].opcodes[3]={type:5,min:42,max:46},this.rules[22].opcodes[4]={type:5,min:48,max:92},this.rules[22].opcodes[5]={type:5,min:94,max:126},this.rules[23].opcodes=[],this.rules[23].opcodes[0]={type:2,children:[1,2]},this.rules[23].opcodes[1]={type:6,string:[40]},this.rules[23].opcodes[2]={type:4,index:89},this.rules[24].opcodes=[],this.rules[24].opcodes[0]={type:2,children:[1,2]},this.rules[24].opcodes[1]={type:4,index:89},this.rules[24].opcodes[2]={type:6,string:[41]},this.rules[25].opcodes=[],this.rules[25].opcodes[0]={type:2,children:[1,2,3]},this.rules[25].opcodes[1]={type:4,index:27},this.rules[25].opcodes[2]={type:4,index:14},this.rules[25].opcodes[3]={type:1,children:[4,5]},this.rules[25].opcodes[4]={type:4,index:28},this.rules[25].opcodes[5]={type:4,index:26},this.rules[26].opcodes=[],this.rules[26].opcodes[0]={type:3,min:1,max:1/0},this.rules[26].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[26].opcodes[2]={type:5,min:33,max:40},this.rules[26].opcodes[3]={type:5,min:42,max:46},this.rules[26].opcodes[4]={type:5,min:48,max:92},this.rules[26].opcodes[5]={type:5,min:94,max:126},this.rules[27].opcodes=[],this.rules[27].opcodes[0]={type:2,children:[1,2]},this.rules[27].opcodes[1]={type:6,string:[91]},this.rules[27].opcodes[2]={type:4,index:89},this.rules[28].opcodes=[],this.rules[28].opcodes[0]={type:2,children:[1,2]},this.rules[28].opcodes[1]={type:4,index:89},this.rules[28].opcodes[2]={type:6,string:[93]},this.rules[29].opcodes=[],this.rules[29].opcodes[0]={type:4,index:88},this.rules[30].opcodes=[],this.rules[30].opcodes[0]={type:2,children:[1,2,4]},this.rules[30].opcodes[1]={type:6,string:[92]},this.rules[30].opcodes[2]={type:3,min:0,max:1},this.rules[30].opcodes[3]={type:4,index:31},this.rules[30].opcodes[4]={type:4,index:36},this.rules[31].opcodes=[],this.rules[31].opcodes[0]={type:1,children:[1,7,13,19]},this.rules[31].opcodes[1]={type:2,children:[2,3]},this.rules[31].opcodes[2]={type:4,index:32},this.rules[31].opcodes[3]={type:3,min:0,max:1},this.rules[31].opcodes[4]={type:1,children:[5,6]},this.rules[31].opcodes[5]={type:4,index:34},this.rules[31].opcodes[6]={type:4,index:35},this.rules[31].opcodes[7]={type:2,children:[8,9]},this.rules[31].opcodes[8]={type:4,index:33},this.rules[31].opcodes[9]={type:3,min:0,max:1},this.rules[31].opcodes[10]={type:1,children:[11,12]},this.rules[31].opcodes[11]={type:4,index:34},this.rules[31].opcodes[12]={type:4,index:35},this.rules[31].opcodes[13]={type:2,children:[14,15]},this.rules[31].opcodes[14]={type:4,index:34},this.rules[31].opcodes[15]={type:3,min:0,max:1},this.rules[31].opcodes[16]={type:1,children:[17,18]},this.rules[31].opcodes[17]={type:4,index:32},this.rules[31].opcodes[18]={type:4,index:33},this.rules[31].opcodes[19]={type:2,children:[20,21]},this.rules[31].opcodes[20]={type:4,index:35},this.rules[31].opcodes[21]={type:3,min:0,max:1},this.rules[31].opcodes[22]={type:1,children:[23,24]},this.rules[31].opcodes[23]={type:4,index:32},this.rules[31].opcodes[24]={type:4,index:33},this.rules[32].opcodes=[],this.rules[32].opcodes[0]={type:6,string:[37,115]},this.rules[33].opcodes=[],this.rules[33].opcodes[0]={type:6,string:[37,105]},this.rules[34].opcodes=[],this.rules[34].opcodes[0]={type:6,string:[37,117]},this.rules[35].opcodes=[],this.rules[35].opcodes[0]={type:6,string:[37,112]},this.rules[36].opcodes=[],this.rules[36].opcodes[0]={type:1,children:[1,2,3]},this.rules[36].opcodes[1]={type:4,index:38},this.rules[36].opcodes[2]={type:4,index:39},this.rules[36].opcodes[3]={type:4,index:37},this.rules[37].opcodes=[],this.rules[37].opcodes[0]={type:4,index:88},this.rules[38].opcodes=[],this.rules[38].opcodes[0]={type:2,children:[1,2]},this.rules[38].opcodes[1]={type:6,string:[117,95]},this.rules[38].opcodes[2]={type:4,index:88},this.rules[39].opcodes=[],this.rules[39].opcodes[0]={type:2,children:[1,2]},this.rules[39].opcodes[1]={type:6,string:[101,95]},this.rules[39].opcodes[2]={type:4,index:88},this.rules[40].opcodes=[],this.rules[40].opcodes[0]={type:1,children:[1,2]},this.rules[40].opcodes[1]={type:4,index:42},this.rules[40].opcodes[2]={type:4,index:41},this.rules[41].opcodes=[],this.rules[41].opcodes[0]={type:2,children:[1,2]},this.rules[41].opcodes[1]={type:6,string:[117,95]},this.rules[41].opcodes[2]={type:4,index:88},this.rules[42].opcodes=[],this.rules[42].opcodes[0]={type:2,children:[1,2]},this.rules[42].opcodes[1]={type:6,string:[101,95]},this.rules[42].opcodes[2]={type:4,index:88},this.rules[43].opcodes=[],this.rules[43].opcodes[0]={type:1,children:[1,5,8,11,12]},this.rules[43].opcodes[1]={type:2,children:[2,3,4]},this.rules[43].opcodes[2]={type:4,index:69},this.rules[43].opcodes[3]={type:4,index:46},this.rules[43].opcodes[4]={type:4,index:71},this.rules[43].opcodes[5]={type:2,children:[6,7]},this.rules[43].opcodes[6]={type:4,index:69},this.rules[43].opcodes[7]={type:4,index:46},this.rules[43].opcodes[8]={type:2,children:[9,10]},this.rules[43].opcodes[9]={type:4,index:46},this.rules[43].opcodes[10]={type:4,index:71},this.rules[43].opcodes[11]={type:4,index:46},this.rules[43].opcodes[12]={type:4,index:70},this.rules[44].opcodes=[],this.rules[44].opcodes[0]={type:2,children:[1,2]},this.rules[44].opcodes[1]={type:6,string:[47]},this.rules[44].opcodes[2]={type:4,index:89},this.rules[45].opcodes=[],this.rules[45].opcodes[0]={type:4,index:90},this.rules[46].opcodes=[],this.rules[46].opcodes[0]={type:6,string:[42]},this.rules[47].opcodes=[],this.rules[47].opcodes[0]={type:6,string:[38]},this.rules[48].opcodes=[],this.rules[48].opcodes[0]={type:6,string:[33]},this.rules[49].opcodes=[],this.rules[49].opcodes[0]={type:6,string:[38,38]},this.rules[50].opcodes=[],this.rules[50].opcodes[0]={type:6,string:[33,33]},this.rules[51].opcodes=[],this.rules[51].opcodes[0]={type:6,string:[37,94]},this.rules[52].opcodes=[],this.rules[52].opcodes[0]={type:6,string:[37,36]},this.rules[53].opcodes=[],this.rules[53].opcodes[0]={type:2,children:[1,2]},this.rules[53].opcodes[1]={type:6,string:[37]},this.rules[53].opcodes[2]={type:1,children:[3,8,13]},this.rules[53].opcodes[3]={type:2,children:[4,5,6,7]},this.rules[53].opcodes[4]={type:4,index:76},this.rules[53].opcodes[5]={type:4,index:79},this.rules[53].opcodes[6]={type:6,string:[45]},this.rules[53].opcodes[7]={type:4,index:80},this.rules[53].opcodes[8]={type:2,children:[9,10,11,12]},this.rules[53].opcodes[9]={type:4,index:77},this.rules[53].opcodes[10]={type:4,index:83},this.rules[53].opcodes[11]={type:6,string:[45]},this.rules[53].opcodes[12]={type:4,index:84},this.rules[53].opcodes[13]={type:2,children:[14,15,16,17]},this.rules[53].opcodes[14]={type:4,index:78},this.rules[53].opcodes[15]={type:4,index:81},this.rules[53].opcodes[16]={type:6,string:[45]},this.rules[53].opcodes[17]={type:4,index:82},this.rules[54].opcodes=[],this.rules[54].opcodes[0]={type:2,children:[1,2]},this.rules[54].opcodes[1]={type:6,string:[37]},this.rules[54].opcodes[2]={type:1,children:[3,10,17]},this.rules[54].opcodes[3]={type:2,children:[4,5,6]},this.rules[54].opcodes[4]={type:4,index:76},this.rules[54].opcodes[5]={type:4,index:73},this.rules[54].opcodes[6]={type:3,min:0,max:1/0},this.rules[54].opcodes[7]={type:2,children:[8,9]},this.rules[54].opcodes[8]={type:6,string:[46]},this.rules[54].opcodes[9]={type:4,index:73},this.rules[54].opcodes[10]={type:2,children:[11,12,13]},this.rules[54].opcodes[11]={type:4,index:77},this.rules[54].opcodes[12]={type:4,index:74},this.rules[54].opcodes[13]={type:3,min:0,max:1/0},this.rules[54].opcodes[14]={type:2,children:[15,16]},this.rules[54].opcodes[15]={type:6,string:[46]},this.rules[54].opcodes[16]={type:4,index:74},this.rules[54].opcodes[17]={type:2,children:[18,19,20]},this.rules[54].opcodes[18]={type:4,index:78},this.rules[54].opcodes[19]={type:4,index:75},this.rules[54].opcodes[20]={type:3,min:0,max:1/0},this.rules[54].opcodes[21]={type:2,children:[22,23]},this.rules[54].opcodes[22]={type:6,string:[46]},this.rules[54].opcodes[23]={type:4,index:75},this.rules[55].opcodes=[],this.rules[55].opcodes[0]={type:2,children:[1,2,3,4]},this.rules[55].opcodes[1]={type:4,index:56},this.rules[55].opcodes[2]={type:4,index:57},this.rules[55].opcodes[3]={type:4,index:59},this.rules[55].opcodes[4]={type:4,index:58},this.rules[56].opcodes=[],this.rules[56].opcodes[0]={type:3,min:0,max:1},this.rules[56].opcodes[1]={type:1,children:[2,3]},this.rules[56].opcodes[2]={type:7,string:[37,105]},this.rules[56].opcodes[3]={type:7,string:[37,115]},this.rules[57].opcodes=[],this.rules[57].opcodes[0]={type:6,string:[34]},this.rules[58].opcodes=[],this.rules[58].opcodes[0]={type:6,string:[34]},this.rules[59].opcodes=[],this.rules[59].opcodes[0]={type:3,min:0,max:1/0},this.rules[59].opcodes[1]={type:1,children:[2,3,4]},this.rules[59].opcodes[2]={type:5,min:32,max:33},this.rules[59].opcodes[3]={type:5,min:35,max:126},this.rules[59].opcodes[4]={type:4,index:60},this.rules[60].opcodes=[],this.rules[60].opcodes[0]={type:6,string:[9]},this.rules[61].opcodes=[],this.rules[61].opcodes[0]={type:2,children:[1,2,3]},this.rules[61].opcodes[1]={type:4,index:62},this.rules[61].opcodes[2]={type:4,index:64},this.rules[61].opcodes[3]={type:4,index:63},this.rules[62].opcodes=[],this.rules[62].opcodes[0]={type:6,string:[39]},this.rules[63].opcodes=[],this.rules[63].opcodes[0]={type:6,string:[39]},this.rules[64].opcodes=[],this.rules[64].opcodes[0]={type:3,min:0,max:1/0},this.rules[64].opcodes[1]={type:1,children:[2,3,4]},this.rules[64].opcodes[2]={type:5,min:32,max:38},this.rules[64].opcodes[3]={type:5,min:40,max:126},this.rules[64].opcodes[4]={type:4,index:60},this.rules[65].opcodes=[],this.rules[65].opcodes[0]={type:2,children:[1,2,3]},this.rules[65].opcodes[1]={type:4,index:66},this.rules[65].opcodes[2]={type:4,index:67},this.rules[65].opcodes[3]={type:4,index:68},this.rules[66].opcodes=[],this.rules[66].opcodes[0]={type:6,string:[60]},this.rules[67].opcodes=[],this.rules[67].opcodes[0]={type:3,min:0,max:1/0},this.rules[67].opcodes[1]={type:1,children:[2,3,4]},this.rules[67].opcodes[2]={type:5,min:32,max:61},this.rules[67].opcodes[3]={type:5,min:63,max:126},this.rules[67].opcodes[4]={type:4,index:60},this.rules[68].opcodes=[],this.rules[68].opcodes[0]={type:6,string:[62]},this.rules[69].opcodes=[],this.rules[69].opcodes[0]={type:4,index:72},this.rules[70].opcodes=[],this.rules[70].opcodes[0]={type:4,index:72},this.rules[71].opcodes=[],this.rules[71].opcodes[0]={type:4,index:72},this.rules[72].opcodes=[],this.rules[72].opcodes[0]={type:3,min:1,max:1/0},this.rules[72].opcodes[1]={type:5,min:48,max:57},this.rules[73].opcodes=[],this.rules[73].opcodes[0]={type:4,index:85},this.rules[74].opcodes=[],this.rules[74].opcodes[0]={type:4,index:87},this.rules[75].opcodes=[],this.rules[75].opcodes[0]={type:4,index:86},this.rules[76].opcodes=[],this.rules[76].opcodes[0]={type:1,children:[1,2]},this.rules[76].opcodes[1]={type:6,string:[68]},this.rules[76].opcodes[2]={type:6,string:[100]},this.rules[77].opcodes=[],this.rules[77].opcodes[0]={type:1,children:[1,2]},this.rules[77].opcodes[1]={type:6,string:[88]},this.rules[77].opcodes[2]={type:6,string:[120]},this.rules[78].opcodes=[],this.rules[78].opcodes[0]={type:1,children:[1,2]},this.rules[78].opcodes[1]={type:6,string:[66]},this.rules[78].opcodes[2]={type:6,string:[98]},this.rules[79].opcodes=[],this.rules[79].opcodes[0]={type:4,index:85},this.rules[80].opcodes=[],this.rules[80].opcodes[0]={type:4,index:85},this.rules[81].opcodes=[],this.rules[81].opcodes[0]={type:4,index:86},this.rules[82].opcodes=[],this.rules[82].opcodes[0]={type:4,index:86},this.rules[83].opcodes=[],this.rules[83].opcodes[0]={type:4,index:87},this.rules[84].opcodes=[],this.rules[84].opcodes[0]={type:4,index:87},this.rules[85].opcodes=[],this.rules[85].opcodes[0]={type:3,min:1,max:1/0},this.rules[85].opcodes[1]={type:5,min:48,max:57},this.rules[86].opcodes=[],this.rules[86].opcodes[0]={type:3,min:1,max:1/0},this.rules[86].opcodes[1]={type:5,min:48,max:49},this.rules[87].opcodes=[],this.rules[87].opcodes[0]={type:3,min:1,max:1/0},this.rules[87].opcodes[1]={type:1,children:[2,3,4]},this.rules[87].opcodes[2]={type:5,min:48,max:57},this.rules[87].opcodes[3]={type:5,min:65,max:70},this.rules[87].opcodes[4]={type:5,min:97,max:102},this.rules[88].opcodes=[],this.rules[88].opcodes[0]={type:2,children:[1,4]},this.rules[88].opcodes[1]={type:1,children:[2,3]},this.rules[88].opcodes[2]={type:5,min:97,max:122},this.rules[88].opcodes[3]={type:5,min:65,max:90},this.rules[88].opcodes[4]={type:3,min:0,max:1/0},this.rules[88].opcodes[5]={type:1,children:[6,7,8,9]},this.rules[88].opcodes[6]={type:5,min:97,max:122},this.rules[88].opcodes[7]={type:5,min:65,max:90},this.rules[88].opcodes[8]={type:5,min:48,max:57},this.rules[88].opcodes[9]={type:6,string:[45]},this.rules[89].opcodes=[],this.rules[89].opcodes[0]={type:3,min:0,max:1/0},this.rules[89].opcodes[1]={type:4,index:91},this.rules[90].opcodes=[],this.rules[90].opcodes[0]={type:3,min:1,max:1/0},this.rules[90].opcodes[1]={type:4,index:91},this.rules[91].opcodes=[],this.rules[91].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[91].opcodes[1]={type:6,string:[32]},this.rules[91].opcodes[2]={type:6,string:[9]},this.rules[91].opcodes[3]={type:4,index:92},this.rules[91].opcodes[4]={type:4,index:94},this.rules[92].opcodes=[],this.rules[92].opcodes[0]={type:2,children:[1,2]},this.rules[92].opcodes[1]={type:6,string:[59]},this.rules[92].opcodes[2]={type:3,min:0,max:1/0},this.rules[92].opcodes[3]={type:1,children:[4,5]},this.rules[92].opcodes[4]={type:5,min:32,max:126},this.rules[92].opcodes[5]={type:6,string:[9]},this.rules[93].opcodes=[],this.rules[93].opcodes[0]={type:1,children:[1,2,3]},this.rules[93].opcodes[1]={type:6,string:[13,10]},this.rules[93].opcodes[2]={type:6,string:[10]},this.rules[93].opcodes[3]={type:6,string:[13]},this.rules[94].opcodes=[],this.rules[94].opcodes[0]={type:2,children:[1,5]},this.rules[94].opcodes[1]={type:1,children:[2,3,4]},this.rules[94].opcodes[2]={type:6,string:[13,10]},this.rules[94].opcodes[3]={type:6,string:[10]},this.rules[94].opcodes[4]={type:6,string:[13]},this.rules[94].opcodes[5]={type:1,children:[6,7]},this.rules[94].opcodes[6]={type:6,string:[32]},this.rules[94].opcodes[7]={type:6,string:[9]},this.toString=function(){let r="";return r+=`;
`,r+=`; ABNF for JavaScript APG 2.0 SABNF
`,r+=`; RFC 5234 with some restrictions and additions.
`,r+=`; Updated 11/24/2015 for RFC 7405 case-sensitive literal string notation
`,r+=`;  - accepts %s"string" as a case-sensitive string
`,r+=`;  - accepts %i"string" as a case-insensitive string
`,r+=`;  - accepts "string" as a case-insensitive string
`,r+=`;
`,r+=`; Some restrictions:
`,r+=`;   1. Rules must begin at first character of each line.
`,r+=`;      Indentations on first rule and rules thereafter are not allowed.
`,r+=`;   2. Relaxed line endings. CRLF, LF or CR are accepted as valid line ending.
`,r+=`;   3. Prose values, i.e. <prose value>, are accepted as valid grammar syntax.
`,r+=`;      However, a working parser cannot be generated from them.
`,r+=`;
`,r+=`; Super set (SABNF) additions:
`,r+=`;   1. Look-ahead (syntactic predicate) operators are accepted as element prefixes.
`,r+=`;      & is the positive look-ahead operator, succeeds and backtracks if the look-ahead phrase is found
`,r+=`;      ! is the negative look-ahead operator, succeeds and backtracks if the look-ahead phrase is NOT found
`,r+=`;      e.g. &%d13 or &rule or !(A / B)
`,r+=`;   2. User-Defined Terminals (UDT) of the form, u_name and e_name are accepted.
`,r+=`;      'name' is alpha followed by alpha/num/hyphen just like a rule name.
`,r+=`;      u_name may be used as an element but no rule definition is given.
`,r+=`;      e.g. rule = A / u_myUdt
`,r+=`;           A = "a"
`,r+=`;      would be a valid grammar.
`,r+=`;   3. Case-sensitive, single-quoted strings are accepted.
`,r+=`;      e.g. 'abc' would be equivalent to %d97.98.99
`,r+=`;      (kept for backward compatibility, but superseded by %s"abc")  
`,r+=`; New 12/26/2015
`,r+=`;   4. Look-behind operators are accepted as element prefixes.
`,r+=`;      && is the positive look-behind operator, succeeds and backtracks if the look-behind phrase is found
`,r+=`;      !! is the negative look-behind operator, succeeds and backtracks if the look-behind phrase is NOT found
`,r+=`;      e.g. &&%d13 or &&rule or !!(A / B)
`,r+=`;   5. Back reference operators, i.e. \\rulename, are accepted.
`,r+=`;      A back reference operator acts like a TLS or TBS terminal except that the phrase it attempts
`,r+=`;      to match is a phrase previously matched by the rule 'rulename'.
`,r+=`;      There are two modes of previous phrase matching - the parent-frame mode and the universal mode.
`,r+=`;      In universal mode, \\rulename matches the last match to 'rulename' regardless of where it was found.
`,r+=`;      In parent-frame mode, \\rulename matches only the last match found on the parent's frame or parse tree level.
`,r+=`;      Back reference modifiers can be used to specify case and mode.
`,r+=`;      \\A defaults to case-insensitive and universal mode, e.g. \\A === \\%i%uA
`,r+=`;      Modifiers %i and %s determine case-insensitive and case-sensitive mode, respectively.
`,r+=`;      Modifiers %u and %p determine universal mode and parent frame mode, respectively.
`,r+=`;      Case and mode modifiers can appear in any order, e.g. \\%s%pA === \\%p%sA. 
`,r+=`;   7. String begin anchor, ABG(%^) matches the beginning of the input string location.
`,r+=`;      Returns EMPTY or NOMATCH. Never consumes any characters.
`,r+=`;   8. String end anchor, AEN(%$) matches the end of the input string location.
`,r+=`;      Returns EMPTY or NOMATCH. Never consumes any characters.
`,r+=`;
`,r+=`File            = *(BlankLine / Rule / RuleError)
`,r+=`BlankLine       = *(%d32/%d9) [comment] LineEnd
`,r+=`Rule            = RuleLookup owsp Alternation ((owsp LineEnd)
`,r+=`                / (LineEndError LineEnd))
`,r+=`RuleLookup      = RuleNameTest owsp DefinedAsTest
`,r+=`RuleNameTest    = RuleName/RuleNameError
`,r+=`RuleName        = alphanum
`,r+=`RuleNameError   = 1*(%d33-60/%d62-126)
`,r+=`DefinedAsTest   = DefinedAs / DefinedAsError
`,r+=`DefinedAsError  = 1*2%d33-126
`,r+=`DefinedAs       = IncAlt / Defined
`,r+=`Defined         = %d61
`,r+=`IncAlt          = %d61.47
`,r+=`RuleError       = 1*(%d32-126 / %d9  / LineContinue) LineEnd
`,r+=`LineEndError    = 1*(%d32-126 / %d9  / LineContinue)
`,r+=`Alternation     = Concatenation *(owsp AltOp Concatenation)
`,r+=`Concatenation   = Repetition *(CatOp Repetition)
`,r+=`Repetition      = [Modifier] (Group / Option / BasicElement / BasicElementErr)
`,r+=`Modifier        = (Predicate [RepOp])
`,r+=`                / RepOp
`,r+=`Predicate       = BkaOp
`,r+=`                / BknOp
`,r+=`                / AndOp
`,r+=`                / NotOp
`,r+=`BasicElement    = UdtOp
`,r+=`                / RnmOp
`,r+=`                / TrgOp
`,r+=`                / TbsOp
`,r+=`                / TlsOp
`,r+=`                / ClsOp
`,r+=`                / BkrOp
`,r+=`                / AbgOp
`,r+=`                / AenOp
`,r+=`                / ProsVal
`,r+=`BasicElementErr = 1*(%d33-40/%d42-46/%d48-92/%d94-126)
`,r+=`Group           = GroupOpen  Alternation (GroupClose / GroupError)
`,r+=`GroupError      = 1*(%d33-40/%d42-46/%d48-92/%d94-126) ; same as BasicElementErr
`,r+=`GroupOpen       = %d40 owsp
`,r+=`GroupClose      = owsp %d41
`,r+=`Option          = OptionOpen Alternation (OptionClose / OptionError)
`,r+=`OptionError     = 1*(%d33-40/%d42-46/%d48-92/%d94-126) ; same as BasicElementErr
`,r+=`OptionOpen      = %d91 owsp
`,r+=`OptionClose     = owsp %d93
`,r+=`RnmOp           = alphanum
`,r+=`BkrOp           = %d92 [bkrModifier] bkr-name
`,r+=`bkrModifier     = (cs [um / pm]) / (ci [um / pm]) / (um [cs /ci]) / (pm [cs / ci])
`,r+=`cs              = '%s'
`,r+=`ci              = '%i'
`,r+=`um              = '%u'
`,r+=`pm              = '%p'
`,r+=`bkr-name        = uname / ename / rname
`,r+=`rname           = alphanum
`,r+=`uname           = %d117.95 alphanum
`,r+=`ename           = %d101.95 alphanum
`,r+=`UdtOp           = udt-empty
`,r+=`                / udt-non-empty
`,r+=`udt-non-empty   = %d117.95 alphanum
`,r+=`udt-empty       = %d101.95 alphanum
`,r+=`RepOp           = (rep-min StarOp rep-max)
`,r+=`                / (rep-min StarOp)
`,r+=`                / (StarOp rep-max)
`,r+=`                / StarOp
`,r+=`                / rep-min-max
`,r+=`AltOp           = %d47 owsp
`,r+=`CatOp           = wsp
`,r+=`StarOp          = %d42
`,r+=`AndOp           = %d38
`,r+=`NotOp           = %d33
`,r+=`BkaOp           = %d38.38
`,r+=`BknOp           = %d33.33
`,r+=`AbgOp           = %d37.94
`,r+=`AenOp           = %d37.36
`,r+=`TrgOp           = %d37 ((Dec dmin %d45 dmax) / (Hex xmin %d45 xmax) / (Bin bmin %d45 bmax))
`,r+=`TbsOp           = %d37 ((Dec dString *(%d46 dString)) / (Hex xString *(%d46 xString)) / (Bin bString *(%d46 bString)))
`,r+=`TlsOp           = TlsCase TlsOpen TlsString TlsClose
`,r+=`TlsCase         = ["%i" / "%s"]
`,r+=`TlsOpen         = %d34
`,r+=`TlsClose        = %d34
`,r+=`TlsString       = *(%d32-33/%d35-126/StringTab)
`,r+=`StringTab       = %d9
`,r+=`ClsOp           = ClsOpen ClsString ClsClose
`,r+=`ClsOpen         = %d39
`,r+=`ClsClose        = %d39
`,r+=`ClsString       = *(%d32-38/%d40-126/StringTab)
`,r+=`ProsVal         = ProsValOpen ProsValString ProsValClose
`,r+=`ProsValOpen     = %d60
`,r+=`ProsValString   = *(%d32-61/%d63-126/StringTab)
`,r+=`ProsValClose    = %d62
`,r+=`rep-min         = rep-num
`,r+=`rep-min-max     = rep-num
`,r+=`rep-max         = rep-num
`,r+=`rep-num         = 1*(%d48-57)
`,r+=`dString         = dnum
`,r+=`xString         = xnum
`,r+=`bString         = bnum
`,r+=`Dec             = (%d68/%d100)
`,r+=`Hex             = (%d88/%d120)
`,r+=`Bin             = (%d66/%d98)
`,r+=`dmin            = dnum
`,r+=`dmax            = dnum
`,r+=`bmin            = bnum
`,r+=`bmax            = bnum
`,r+=`xmin            = xnum
`,r+=`xmax            = xnum
`,r+=`dnum            = 1*(%d48-57)
`,r+=`bnum            = 1*%d48-49
`,r+=`xnum            = 1*(%d48-57 / %d65-70 / %d97-102)
`,r+=`;
`,r+=`; Basics
`,r+=`alphanum        = (%d97-122/%d65-90) *(%d97-122/%d65-90/%d48-57/%d45)
`,r+=`owsp            = *space
`,r+=`wsp             = 1*space
`,r+=`space           = %d32
`,r+=`                / %d9
`,r+=`                / comment
`,r+=`                / LineContinue
`,r+=`comment         = %d59 *(%d32-126 / %d9)
`,r+=`LineEnd         = %d13.10
`,r+=`                / %d10
`,r+=`                / %d13
`,r+=`LineContinue    = (%d13.10 / %d10 / %d13) (%d32 / %d9)
`,r}}});var vg=de((QB,yg)=>{yg.exports=function(){let t="parser: ",r=Eo(),i=r.ids,o=new(dg()),s=new(mg()),a=new(gg()),f=new r.parser;f.ast=new r.ast,f.callbacks=o.callbacks,f.ast.callbacks=s.callbacks;let l=function(C,D,S){if(D<0||D>=S)return-1;for(let k=0;k<C.length;k+=1)if(D>=C[k].beginChar&&D<C[k].beginChar+C[k].length)return k;return-1},p=function(C,D){let S=-1;if(D<C.length){for(let k=D;k<C.length;k+=1)if(C[k]!==null){S=C[k];break}}return S},b=function(C){C.forEach(D=>{let S=[],k=[],$=0;D.opcodes.forEach(O=>{O.type===i.ALT&&O.children.length===1||O.type===i.CAT&&O.children.length===1||O.type===i.REP&&O.min===1&&O.max===1?k.push(null):(k.push($),S.push(O),$+=1)}),k.push($),S.forEach(O=>{if(O.type===i.ALT||O.type===i.CAT)for(let q=0;q<O.children.length;q+=1)O.children[q]=p(k,O.children[q])}),D.opcodes=S})};this.syntax=function(C,D,S,k,$){if($){if($.traceObject!=="traceObject")throw new TypeError(`${t}trace argument is not a trace object`);f.trace=$}let O={};O.errors=S,O.strict=!!k,O.lines=D,O.findLine=l,O.charsLength=C.length,O.ruleCount=0,f.parse(a,"file",C,O).success||S.push({line:0,char:0,msg:"syntax analysis of input grammar failed"})},this.semantic=function(C,D,S){let k={};return k.errors=S,k.lines=D,k.findLine=l,k.charsLength=C.length,f.ast.translate(k),S.length?null:(b(k.rules),{rules:k.rules,udts:k.udts,lineMap:k.rulesLineMap})},this.generateSource=function(C,D,S,k,$){let O="",q,j,z,X=0,B=1/0,L=0,U=[],te=[],_=0,u=0,g=0,d=0,c=0,h=0,x=0,E=0,w=0,m=0,A=0,I=0,y=0,M=0,re=0;S.forEach(Y=>{U.push(Y.lower),X+=Y.opcodes.length,Y.opcodes.forEach(N=>{switch(N.type){case i.ALT:_+=1;break;case i.CAT:u+=1;break;case i.RNM:g+=1;break;case i.UDT:d+=1;break;case i.REP:c+=1;break;case i.AND:h+=1;break;case i.NOT:x+=1;break;case i.BKA:I+=1;break;case i.BKN:y+=1;break;case i.BKR:A+=1;break;case i.ABG:M+=1;break;case i.AEN:re+=1;break;case i.TLS:for(E+=1,q=0;q<N.string.length;q+=1)N.string[q]<B&&(B=N.string[q]),N.string[q]>L&&(L=N.string[q]);break;case i.TBS:for(w+=1,q=0;q<N.string.length;q+=1)N.string[q]<B&&(B=N.string[q]),N.string[q]>L&&(L=N.string[q]);break;case i.TRG:m+=1,N.min<B&&(B=N.min),N.max>L&&(L=N.max);break;default:throw new Error("generateSource: unrecognized opcode")}})}),U.sort(),k.length>0&&(k.forEach(Y=>{te.push(Y.lower)}),te.sort());let T="module.exports";$&&typeof $=="string"&&(T=`let ${$}`),O+=`// copyright: Copyright (c) 2021 Lowell D. Thomas, all rights reserved<br>
`,O+=`//   license: BSD-2-Clause (https://opensource.org/licenses/BSD-2-Clause)<br>
`,O+=`//
`,O+=`// Generated by apg-js, Version 4.0.0 [apg-js](https://github.com/ldthomas/apg-js)
`,O+=`${T} = function grammar(){
`,O+="  // ```\n",O+=`  // SUMMARY
`,O+=`  //      rules = ${S.length}
`,O+=`  //       udts = ${k.length}
`,O+=`  //    opcodes = ${X}
`,O+=`  //        ---   ABNF original opcodes
`,O+=`  //        ALT = ${_}
`,O+=`  //        CAT = ${u}
`,O+=`  //        REP = ${c}
`,O+=`  //        RNM = ${g}
`,O+=`  //        TLS = ${E}
`,O+=`  //        TBS = ${w}
`,O+=`  //        TRG = ${m}
`,O+=`  //        ---   SABNF superset opcodes
`,O+=`  //        UDT = ${d}
`,O+=`  //        AND = ${h}
`,O+=`  //        NOT = ${x}
`,O+=`  //        BKA = ${I}
`,O+=`  //        BKN = ${y}
`,O+=`  //        BKR = ${A}
`,O+=`  //        ABG = ${M}
`,O+=`  //        AEN = ${re}
`,O+="  // characters = [",E+w+m===0?O+=" none defined ]":O+=`${B} - ${L}]`,d>0&&(O+=" + user defined"),O+=`
`,O+="  // ```\n",O+=`  /* OBJECT IDENTIFIER (for internal parser use) */
`,O+=`  this.grammarObject = 'grammarObject';
`,O+=`
`,O+=`  /* RULES */
`,O+=`  this.rules = [];
`,S.forEach((Y,N)=>{let P="  this.rules[";P+=N,P+="] = {name: '",P+=Y.name,P+="', lower: '",P+=Y.lower,P+="', index: ",P+=Y.index,P+=", isBkr: ",P+=Y.isBkr,P+=`};
`,O+=P}),O+=`
`,O+=`  /* UDTS */
`,O+=`  this.udts = [];
`,k.length>0&&k.forEach((Y,N)=>{let P="  this.udts[";P+=N,P+="] = {name: '",P+=Y.name,P+="', lower: '",P+=Y.lower,P+="', index: ",P+=Y.index,P+=", empty: ",P+=Y.empty,P+=", isBkr: ",P+=Y.isBkr,P+=`};
`,O+=P}),O+=`
`,O+=`  /* OPCODES */
`,S.forEach((Y,N)=>{N>0&&(O+=`
`),O+=`  /* ${Y.name} */
`,O+=`  this.rules[${N}].opcodes = [];
`,Y.opcodes.forEach((P,G)=>{let J;switch(P.type){case i.ALT:O+=`  this.rules[${N}].opcodes[${G}] = {type: ${P.type}, children: [${P.children.toString()}]};// ALT
`;break;case i.CAT:O+=`  this.rules[${N}].opcodes[${G}] = {type: ${P.type}, children: [${P.children.toString()}]};// CAT
`;break;case i.RNM:O+=`  this.rules[${N}].opcodes[${G}] = {type: ${P.type}, index: ${P.index}};// RNM(${S[P.index].name})
`;break;case i.BKR:P.index>=S.length?(j=k[P.index-S.length].name,z=k[P.index-S.length].lower):(j=S[P.index].name,z=S[P.index].lower),J="%i",P.bkrCase===i.BKR_MODE_CS&&(J="%s"),P.bkrMode===i.BKR_MODE_UM?J+="%u":J+="%p",j=J+j,O+=`  this.rules[${N}].opcodes[${G}] = {type: ${P.type}, index: ${P.index}, lower: '${z}', bkrCase: ${P.bkrCase}, bkrMode: ${P.bkrMode}};// BKR(\\${j})
`;break;case i.UDT:O+=`  this.rules[${N}].opcodes[${G}] = {type: ${P.type}, empty: ${P.empty}, index: ${P.index}};// UDT(${k[P.index].name})
`;break;case i.REP:O+=`  this.rules[${N}].opcodes[${G}] = {type: ${P.type}, min: ${P.min}, max: ${P.max}};// REP
`;break;case i.AND:O+=`  this.rules[${N}].opcodes[${G}] = {type: ${P.type}};// AND
`;break;case i.NOT:O+=`  this.rules[${N}].opcodes[${G}] = {type: ${P.type}};// NOT
`;break;case i.ABG:O+=`  this.rules[${N}].opcodes[${G}] = {type: ${P.type}};// ABG(%^)
`;break;case i.AEN:O+=`  this.rules[${N}].opcodes[${G}] = {type: ${P.type}};// AEN(%$)
`;break;case i.BKA:O+=`  this.rules[${N}].opcodes[${G}] = {type: ${P.type}};// BKA
`;break;case i.BKN:O+=`  this.rules[${N}].opcodes[${G}] = {type: ${P.type}};// BKN
`;break;case i.TLS:O+=`  this.rules[${N}].opcodes[${G}] = {type: ${P.type}, string: [${P.string.toString()}]};// TLS
`;break;case i.TBS:O+=`  this.rules[${N}].opcodes[${G}] = {type: ${P.type}, string: [${P.string.toString()}]};// TBS
`;break;case i.TRG:O+=`  this.rules[${N}].opcodes[${G}] = {type: ${P.type}, min: ${P.min}, max: ${P.max}};// TRG
`;break;default:throw new Error("parser.js: ~143: unrecognized opcode")}})}),O+=`
`,O+="  // The `toString()` function will display the original grammar file(s) that produced these opcodes.\n",O+=`  this.toString = function toString(){
`,O+=`    let str = "";
`;let K;return D.forEach(Y=>{let N=Y.beginChar+Y.length;K="",O+='    str += "';for(let P=Y.beginChar;P<N;P+=1){switch(C[P]){case 9:K=" ";break;case 10:K="\\n";break;case 13:K="\\r";break;case 34:K='\\"';break;case 92:K="\\\\";break;default:K=String.fromCharCode(C[P]);break}O+=K}O+=`";
`}),O+=`    return str;
`,O+=`  }
`,O+=`}
`,O},this.generateObject=function(C,D,S){let k={},$=[],O=[],q=C.slice(0);return k.grammarObject="grammarObject",D.forEach(j=>{$.push(j.lower)}),$.sort(),S.length>0&&(S.forEach(j=>{O.push(j.lower)}),O.sort()),k.callbacks=[],$.forEach(j=>{k.callbacks[j]=!1}),S.length>0&&O.forEach(j=>{k.callbacks[j]=!1}),k.rules=D,k.udts=S,k.toString=function(){return q},k}}});var wg=de((eU,xg)=>{xg.exports=function(){let t=Xr(),r="rule-attributes.js",i=null;function o(_){return _.left||_.nested||_.right||_.cyclic?!1:_.empty}function s(_){return!!(_.left||_.nested||_.right||_.cyclic)}function a(_,u){let g=0,d=0,c=0;for(g=0;g<u;g+=1)if(_[g].nested)return!0;for(g=0;g<u;g+=1)if(_[g].right&&!_[g].leaf){for(d=g+1;d<u;d+=1)if(!o(_[d]))return!0}for(g=u-1;g>=0;g-=1)if(_[g].left&&!_[g].leaf){for(d=g-1;d>=0;d-=1)if(!o(_[d]))return!0}for(g=0;g<u;g+=1)if(!_[g].empty&&!s(_[g])){for(d=g+1;d<u;d+=1)if(s(_[d])){for(c=d+1;c<u;c+=1)if(!_[c].empty&&!s(_[c]))return!0}}return!1}function f(_,u){for(let g=0;g<u;g+=1)if(!_[g].cyclic)return!1;return!0}function l(_,u){for(let g=0;g<u;g+=1){if(_[g].left)return!0;if(!_[g].empty)return!1}return!1}function p(_,u){for(let g=u-1;g>=0;g-=1){if(_[g].right)return!0;if(!_[g].empty)return!1}return!1}function b(_,u){for(let g=0;g<u;g+=1)if(!_[g].empty)return!1;return!0}function v(_,u){for(let g=0;g<u;g+=1)if(!_[g].finite)return!1;return!0}function C(_,u,g,d){let c=0,h=u[g],x=h.children.length,E=[];for(c=0;c<x;c+=1)E.push(_.attrGen());for(c=0;c<x;c+=1)k(_,u,h.children[c],E[c]);d.left=l(E,x),d.right=p(E,x),d.nested=a(E,x),d.empty=b(E,x),d.finite=v(E,x),d.cyclic=f(E,x)}function D(_,u,g,d){let c=0,h=u[g],x=h.children.length,E=[];for(c=0;c<x;c+=1)E.push(_.attrGen());for(c=0;c<x;c+=1)k(_,u,h.children[c],E[c]);for(d.left=!1,d.right=!1,d.nested=!1,d.empty=!1,d.finite=!1,d.cyclic=!1,c=0;c<x;c+=1)E[c].left&&(d.left=!0),E[c].nested&&(d.nested=!0),E[c].right&&(d.right=!0),E[c].empty&&(d.empty=!0),E[c].finite&&(d.finite=!0),E[c].cyclic&&(d.cyclic=!0)}function S(_,u,g,d){let c=u[g];c.index>=_.ruleCount?(d.empty=_.udts[c.index-_.ruleCount].empty,d.finite=!0):($(_,c.index,d),d.left=!1,d.nested=!1,d.right=!1,d.cyclic=!1)}function k(_,u,g,d){_.attrInit(d);let c=u[g];switch(c.type){case t.ALT:D(_,u,g,d);break;case t.CAT:C(_,u,g,d);break;case t.REP:k(_,u,g+1,d),c.min===0&&(d.empty=!0,d.finite=!0);break;case t.RNM:$(_,u[g].index,d);break;case t.BKR:S(_,u,g,d);break;case t.AND:case t.NOT:case t.BKA:case t.BKN:k(_,u,g+1,d),d.empty=!0;break;case t.TLS:d.empty=!u[g].string.length,d.finite=!0,d.cyclic=!1;break;case t.TBS:case t.TRG:d.empty=!1,d.finite=!0,d.cyclic=!1;break;case t.UDT:d.empty=c.empty,d.finite=!0,d.cyclic=!1;break;case t.ABG:case t.AEN:d.empty=!0,d.finite=!0,d.cyclic=!1;break;default:throw new Error(`unknown opcode type: ${c}`)}}function $(_,u,g){let d=_.attrsWorking[u];d.isComplete?_.attrCopy(g,d):d.isOpen?u===_.startRule?u===_.startRule&&(g.left=!0,g.right=!0,g.cyclic=!0,g.leaf=!0):g.finite=!0:(d.isOpen=!0,k(_,d.rule.opcodes,0,g),d.left=g.left,d.right=g.right,d.nested=g.nested,d.empty=g.empty,d.finite=g.finite,d.cyclic=g.cyclic,d.leaf=!1,d.isOpen=!1,d.isComplete=!0)}let O=_=>{i=_;let u=0,g=0,d=i.attrGen();for(u=0;u<i.ruleCount;u+=1){for(g=0;g<i.ruleCount;g+=1)i.attrInit(i.attrsWorking[g]);i.startRule=u,$(i,u,d),i.attrCopy(i.attrs[u],i.attrsWorking[u])}i.attributesComplete=!0;let c=null;for(u=0;u<i.ruleCount;u+=1)if(c=i.attrs[u],c.left||!c.finite||c.cyclic){let h=i.attrGen(c.rule);i.attrCopy(h,c),i.attrsErrors.push(h),i.attrsErrorCount+=1}},q=_=>_?"t":"f",j=_=>_?"e":"f",z=_=>_?"t":"e",X=(_,u,g,d)=>{let c=`${_}:${u}:`;return c+=`${j(g.left)} `,c+=`${q(g.nested)} `,c+=`${q(g.right)} `,c+=`${j(g.cyclic)} `,c+=`${z(g.finite)} `,c+=`${q(g.empty)}:`,c+=`${i.typeToString(d.recursiveType)}:`,c+=d.recursiveType===t.ATTR_MR?d.groupNumber:"-",c+=`:${g.rule.name}
`,c},B=()=>{let _=`LEGEND - t=true, f=false, e=error
`;return _+=`sequence:rule index:left nested right cyclic finite empty:type:group number:rule name
`,_},L=()=>{let _=null,u=null,g="";if(g+=`RULE ATTRIBUTES WITH ERRORS
`,g+=B(),i.attrsErrorCount)for(let d=0;d<i.attrsErrorCount;d+=1)_=i.attrsErrors[d],u=i.ruleDeps[_.rule.index],g+=X(d,_.rule.index,_,u);else g+=`<none>
`;return g},U=_=>{let u=0,g=0,d=null,c=null,h="",{ruleIndexes:x}=i;for(_===97?x=i.ruleAlphaIndexes:_===116&&(x=i.ruleTypeIndexes),u=0;u<i.ruleCount;u+=1)g=x[u],d=i.attrs[g],c=i.ruleDeps[g],h+=X(u,g,d,c);return h};return{ruleAttributes:O,showAttributes:(_="index")=>{if(!i.attributesComplete)throw new Error(`${r}:showAttributes: attributes not available`);let u="",g=`RULE ATTRIBUTES
`;return _.charCodeAt(0)===97?(u+=`alphabetical by rule name
`,u+=g,u+=B(),u+=U(97)):_.charCodeAt(0)===116?(u+=`ordered by rule type
`,u+=g,u+=B(),u+=U(116)):(u+=`ordered by rule index
`,u+=g,u+=B(),u+=U()),u},showAttributeErrors:L}}()});var _g=de((tU,Eg)=>{Eg.exports=(()=>{let n=Xr(),t=null,r=(a,f,l,p)=>{let b=0,v=0,C=f[l];p[l]=!0;let D=C.rule.opcodes;for(b=0;b<D.length;b+=1){let S=D[b];if(S.type===n.RNM)for(C.refersTo[S.index]=!0,p[S.index]||r(a,f,S.index,p),v=0;v<a;v+=1)f[S.index].refersTo[v]&&(C.refersTo[v]=!0);else S.type===n.UDT?C.refersToUdt[S.index]=!0:S.type===n.BKR&&(S.index<a?(C.refersTo[S.index]=!0,p[S.index]||r(a,f,S.index,p)):C.refersToUdt[a-S.index]=!0)}},i=a=>{t=a;let f=0,l=0,p=0,b=null,v=null,C=!1;t.dependenciesComplete=!1;let D=t.falseArray(t.ruleCount);for(f=0;f<t.ruleCount;f+=1)t.falsifyArray(D),r(t.ruleCount,t.ruleDeps,f,D);for(f=0;f<t.ruleCount;f+=1)for(l=0;l<t.ruleCount;l+=1)f!==l&&t.ruleDeps[l].refersTo[f]&&(t.ruleDeps[f].referencedBy[l]=!0);for(f=0;f<t.ruleCount;f+=1)t.ruleDeps[f].recursiveType=n.ATTR_N,t.ruleDeps[f].refersTo[f]&&(t.ruleDeps[f].recursiveType=n.ATTR_R);for(p=-1,f=0;f<t.ruleCount;f+=1)if(b=t.ruleDeps[f],b.recursiveType===n.ATTR_R)for(C=!0,l=0;l<t.ruleCount;l+=1)f!==l&&(v=t.ruleDeps[l],v.recursiveType===n.ATTR_R&&b.refersTo[l]&&v.refersTo[f]&&(C&&(p+=1,b.recursiveType=n.ATTR_MR,b.groupNumber=p,C=!1),v.recursiveType=n.ATTR_MR,v.groupNumber=p));t.isMutuallyRecursive=p>-1,t.ruleAlphaIndexes.sort(t.compRulesAlpha),t.ruleTypeIndexes.sort(t.compRulesAlpha),t.ruleTypeIndexes.sort(t.compRulesType),t.isMutuallyRecursive&&t.ruleTypeIndexes.sort(t.compRulesGroup),t.udtCount&&t.udtAlphaIndexes.sort(t.compUdtsAlpha),t.dependenciesComplete=!0},o=(a=null)=>{let f=0,l=0,p=0,b=0,v=t.ruleCount-1,C=t.udtCount-1,D=100,S="",k="",$="=> ",O="<= ",q=!1,j=null,{ruleIndexes:z}=t,{udtIndexes:X}=t;for(a===97?(z=t.ruleAlphaIndexes,X=t.udtAlphaIndexes):a===116&&(z=t.ruleTypeIndexes,X=t.udtAlphaIndexes),f=0;f<t.ruleCount;f+=1){for(j=t.ruleDeps[z[f]],k=`${z[f]}:${t.typeToString(j.recursiveType)}:`,t.isMutuallyRecursive&&(k+=j.groupNumber>-1?j.groupNumber:"-",k+=":"),k+=" ",S+=`${k+t.rules[z[f]].name}
`,q=!0,p=0,b=S.length,S+=k,l=0;l<t.ruleCount;l+=1)j.refersTo[z[l]]&&(q?(S+=$,q=!1,S+=t.ruleDeps[z[l]].rule.name):S+=`, ${t.ruleDeps[z[l]].rule.name}`,p+=1),S.length-b>D&&l!==v&&(S+=`
${k}${$}`,b=S.length);if(t.udtCount)for(l=0;l<t.udtCount;l+=1)j.refersToUdt[X[l]]&&(q?(S+=$,q=!1,S+=t.udts[X[l]].name):S+=`, ${t.udts[X[l]].name}`,p+=1),S.length-b>D&&l!==C&&(S+=`
${k}${$}`,b=S.length);for(p===0&&(S+=`=> <none>
`),q===!1&&(S+=`
`),q=!0,p=0,b=S.length,S+=k,l=0;l<t.ruleCount;l+=1)j.referencedBy[z[l]]&&(q?(S+=O,q=!1,S+=t.ruleDeps[z[l]].rule.name):S+=`, ${t.ruleDeps[z[l]].rule.name}`,p+=1),S.length-b>D&&l!==v&&(S+=`
${k}${$}`,b=S.length);p===0&&(S+=`<= <none>
`),q===!1&&(S+=`
`),S+=`
`}return S};return{ruleDependencies:i,showRuleDependencies:(a="index")=>{let f=`RULE DEPENDENCIES(index:type:[group number:])
`;return f+=`=> refers to rule names
`,f+=`<= referenced by rule names
`,t.dependenciesComplete&&(a.charCodeAt(0)===97?(f+=`alphabetical by rule name
`,f+=o(97)):a.charCodeAt(0)===116?(f+=`ordered by rule type
`,f+=o(116)):(f+=`ordered by rule index
`,f+=o(null))),f}}})()});var Sg=de((rU,Ag)=>{Ag.exports=function(){let t=Xr(),{ruleAttributes:r,showAttributes:i,showAttributeErrors:o}=wg(),{ruleDependencies:s,showRuleDependencies:a}=_g();class f{constructor(b,v){this.rules=b,this.udts=v,this.ruleCount=b.length,this.udtCount=v.length,this.startRule=0,this.dependenciesComplete=!1,this.attributesComplete=!1,this.isMutuallyRecursive=!1,this.ruleIndexes=this.indexArray(this.ruleCount),this.ruleAlphaIndexes=this.indexArray(this.ruleCount),this.ruleTypeIndexes=this.indexArray(this.ruleCount),this.udtIndexes=this.indexArray(this.udtCount),this.udtAlphaIndexes=this.indexArray(this.udtCount),this.attrsErrorCount=0,this.attrs=[],this.attrsErrors=[],this.attrsWorking=[],this.ruleDeps=[];for(let C=0;C<this.ruleCount;C+=1)this.attrs.push(this.attrGen(this.rules[C])),this.attrsWorking.push(this.attrGen(this.rules[C])),this.ruleDeps.push(this.rdGen(b[C],this.ruleCount,this.udtCount));this.compRulesAlpha=this.compRulesAlpha.bind(this),this.compUdtsAlpha=this.compUdtsAlpha.bind(this),this.compRulesType=this.compRulesType.bind(this),this.compRulesGroup=this.compRulesGroup.bind(this)}attrGen(b){return{left:!1,nested:!1,right:!1,empty:!1,finite:!1,cyclic:!1,leaf:!1,isOpen:!1,isComplete:!1,rule:b}}attrInit(b){b.left=!1,b.nested=!1,b.right=!1,b.empty=!1,b.finite=!1,b.cyclic=!1,b.leaf=!1,b.isOpen=!1,b.isComplete=!1}attrCopy(b,v){b.left=v.left,b.nested=v.nested,b.right=v.right,b.empty=v.empty,b.finite=v.finite,b.cyclic=v.cyclic,b.leaf=v.leaf,b.isOpen=v.isOpen,b.isComplete=v.isComplete,b.rule=v.rule}rdGen(b,v,C){return{rule:b,recursiveType:t.ATTR_N,groupNumber:-1,refersTo:this.falseArray(v),refersToUdt:this.falseArray(C),referencedBy:this.falseArray(v)}}typeToString(b){switch(b){case t.ATTR_N:return" N";case t.ATTR_R:return" R";case t.ATTR_MR:return"MR";default:return"UNKNOWN"}}falseArray(b){let v=[];if(b>0)for(let C=0;C<b;C+=1)v.push(!1);return v}falsifyArray(b){for(let v=0;v<b.length;v+=1)b[v]=!1}indexArray(b){let v=[];if(b>0)for(let C=0;C<b;C+=1)v.push(C);return v}compRulesAlpha(b,v){return this.rules[b].lower<this.rules[v].lower?-1:this.rules[b].lower>this.rules[v].lower?1:0}compUdtsAlpha(b,v){return this.udts[b].lower<this.udts[v].lower?-1:this.udts[b].lower>this.udts[v].lower?1:0}compRulesType(b,v){return this.ruleDeps[b].recursiveType<this.ruleDeps[v].recursiveType?-1:this.ruleDeps[b].recursiveType>this.ruleDeps[v].recursiveType?1:0}compRulesGroup(b,v){if(this.ruleDeps[b].recursiveType===t.ATTR_MR&&this.ruleDeps[v].recursiveType===t.ATTR_MR){if(this.ruleDeps[b].groupNumber<this.ruleDeps[v].groupNumber)return-1;if(this.ruleDeps[b].groupNumber>this.ruleDeps[v].groupNumber)return 1}return 0}}return{attributes:function(b=[],v=[],C=[],D=[]){let S=new f(b,v);return s(S),r(S),S.attrsErrorCount&&D.push({line:0,char:0,msg:`${S.attrsErrorCount} attribute errors`}),S.attrsErrorCount},showAttributes:i,showAttributeErrors:o,showRuleDependencies:a}}()});var Tg=de((nU,Mg)=>{Mg.exports=function(){let t="show-rules.js";return function(o=[],s=[],a="index"){let f="showRules",l=[],p=[],b=[],v=[],C=o,D=s,S=o.length,k=s.length,$="RULE/UDT NAMES",O;function q(z,X){return C[z].lower<C[X].lower?-1:C[z].lower>C[X].lower?1:0}function j(z,X){return D[z].lower<D[X].lower?-1:D[z].lower>D[X].lower?1:0}if(!(Array.isArray(o)&&o.length))throw new Error(`${t}:${f}: rules arg must be array with length > 0`);if(!Array.isArray(s))throw new Error(`${t}:${f}: udts arg must be array`);for(O=0;O<S;O+=1)b.push(O);if(l=b.slice(0),l.sort(q),k){for(O=0;O<k;O+=1)v.push(O);p=v.slice(0),p.sort(j)}if(a.charCodeAt(0)===97){for($+=` - alphabetical by rule/UDT name
`,O=0;O<S;O+=1)$+=`${O}: ${l[O]}: ${C[l[O]].name}
`;if(k)for(O=0;O<k;O+=1)$+=`${O}: ${p[O]}: ${D[p[O]].name}
`}else{for($+=` - ordered by rule/UDT index
`,O=0;O<S;O+=1)$+=`${O}: ${C[O].name}
`;if(k)for(O=0;O<k;O+=1)$+=`${O}: ${D[O].name}
`}return $}}()});var Cg=de((iU,kg)=>{kg.exports=function(t){let r="api.js: ",i=this,o=Eo(),s=vd(),a=lg(),f=new(vg()),{attributes:l,showAttributes:p,showAttributeErrors:b,showRuleDependencies:v}=Sg(),C=Tg(),D=function(_,u,g){let x=`<span class="${o.style.CLASS_CTRLCHAR}">`,E="</span>",w=`<span class="${o.style.CLASS_NOMATCH}">`,m="</span>",A,I="",y=!0;for(;y&&!(!Array.isArray(_)||_.length===0);){if(typeof u!="number")throw new Error("abnfToHtml: beg must be type number");if(u>=_.length)break;typeof g!="number"||u+g>=_.length?A=_.length:A=u+g;let M=0;for(let re=u;re<A;re+=1){let T=_[re];if(T>=32&&T<=126)switch(M===1?(I+=E,M=0):M===2&&(I+=m,M=0),T){case 32:I+="&nbsp;";break;case 60:I+="&lt;";break;case 62:I+="&gt;";break;case 38:I+="&amp;";break;case 34:I+="&quot;";break;case 39:I+="&#039;";break;case 92:I+="&#092;";break;default:I+=String.fromCharCode(T);break}else T===9||T===10||T===13?(M===0?(I+=x,M=1):M===2&&(I+=m+x,M=1),T===9&&(I+="TAB"),T===10&&(I+="LF"),T===13&&(I+="CR")):(M===0?(I+=w,M=2):M===1&&(I+=E+w,M=2),I+=`\\x${o.utils.charToHex(T)}`)}M===2&&(I+=m),M===1&&(I+=E);break}return I},S=function(_,u,g){let d="";for(let c=u;c<u+g;c+=1){let h=_[c];if(h>=32&&h<=126)d+=String.fromCharCode(h);else switch(h){case 9:d+="\\t";break;case 10:d+="\\n";break;case 13:d+="\\r";break;default:d+="\\unknown";break}}return d},k=function(_){let u="Annotated Input Grammar";return _.forEach(g=>{u+=`
`,u+=`line no: ${g.lineNo}`,u+=` : char index: ${g.beginChar}`,u+=` : length: ${g.length}`,u+=` : abnf: ${S(i.chars,g.beginChar,g.length)}`}),u+=`
`,u},$=function(_){let u="";return u+=`<table class="${o.style.CLASS_GRAMMAR}">
`,u+=`<caption>Annotated Input Grammar</caption>
`,u+="<tr>",u+="<th>line<br>no.</th><th>first<br>char</th><th><br>length</th><th><br>text</th>",u+=`</tr>
`,_.forEach(d=>{u+="<tr>",u+=`<td>${d.lineNo}`,u+=`</td><td>${d.beginChar}`,u+=`</td><td>${d.length}`,u+=`</td><td>${D(i.chars,d.beginChar,d.length)}`,u+="</td>",u+=`</tr>
`}),u+=`</table>
`,u},O=function(_,u,g,d){let[c]=o,h="",x=`<span class="${c.CLASS_NOMATCH}">&raquo;</span>`;return h+=`<p><table class="${c.CLASS_GRAMMAR}">
`,d&&typeof d=="string"&&(h+=`<caption>${d}</caption>
`),h+=`<tr><th>line<br>no.</th><th>line<br>offset</th><th>error<br>offset</th><th><br>text</th></tr>
`,_.forEach(E=>{let w,m,A,I,y,M="",re="";u.length===0?(y=x,m=0):(w=u[E.line],A=w.beginChar,E.char>A&&(M=D(g,A,E.char-A)),A=E.char,I=w.beginChar+w.length,A<I&&(re=D(g,A,I-A)),y=M+x+re,m=E.char-w.beginChar,h+="<tr>",h+=`<td>${E.line}</td><td>${w.beginChar}</td><td>${m}</td><td>${y}</td>`,h+=`</tr>
`,h+="<tr>",h+=`<td colspan="3"></td><td>&uarr;:&nbsp;${o.utils.stringToAsciiHtml(E.msg)}</td>`,h+=`</tr>
`)}),h+=`</table></p>
`,h},q=function(_,u,g){let d,c,h,x;return d="",_.forEach(E=>{c=u[E.line],d+=`${c.lineNo}: `,d+=`${c.beginChar}: `,d+=`${E.char-c.beginChar}: `,h=c.beginChar,x=E.char-c.beginChar,d+=S(g,h,x),d+=" >> ",h=E.char,x=c.beginChar+c.length-E.char,d+=S(g,h,x),d+=`
`,d+=`${c.lineNo}: `,d+=`${c.beginChar}: `,d+=`${E.char-c.beginChar}: `,d+="error: ",d+=E.msg,d+=`
`}),d},j=!1,z=!1,X=!1,B=!1,L=0,U;if(this.errors=[],Buffer.isBuffer(t))this.chars=s.decode("BINARY",t);else if(Array.isArray(t))this.chars=t.slice();else if(typeof t=="string")this.chars=s.decode("STRING",t);else throw new Error(`${r}input source is not a string, byte Buffer or character array`);this.sabnf=s.encode("STRING",this.chars),this.scan=function(_,u){this.lines=a(this.chars,this.errors,_,u),j=!0},this.parse=function(_,u){if(!j)throw new Error(`${r}grammar not scanned`);f.syntax(this.chars,this.lines,this.errors,_,u),z=!0},this.translate=function(){if(!z)throw new Error(`${r}grammar not scanned and parsed`);let _=f.semantic(this.chars,this.lines,this.errors);this.errors.length===0&&(this.rules=_.rules,this.udts=_.udts,U=_.lineMap,X=!0)},this.attributes=function(){if(!X)throw new Error(`${r}grammar not scanned, parsed and translated`);return L=l(this.rules,this.udts,U,this.errors),B=!0,L},this.generate=function(_){if(this.lines=a(this.chars,this.errors,_),this.errors.length||(f.syntax(this.chars,this.lines,this.errors,_),this.errors.length))return;let u=f.semantic(this.chars,this.lines,this.errors);this.errors.length||(this.rules=u.rules,this.udts=u.udts,U=u.lineMap,L=l(this.rules,this.udts,U,this.errors),B=!0)},this.displayRules=function(_="index"){if(!X)throw new Error(`${r}grammar not scanned, parsed and translated`);return C(this.rules,this.udts,_)},this.displayRuleDependencies=function(_="index"){if(!B)throw new Error(`${r}no attributes - must be preceeded by call to attributes()`);return v(_)},this.displayAttributes=function(_="index"){if(!B)throw new Error(`${r}no attributes - must be preceeded by call to attributes()`);return L&&b(_),p(_)},this.displayAttributeErrors=function(){if(!B)throw new Error(`${r}no attributes - must be preceeded by call to attributes()`);return b()},this.toSource=function(_){if(!B)throw new Error(`${r}can't generate parser source - must be preceeded by call to attributes()`);if(L)throw new Error(`${r}can't generate parser source - attributes have ${L} errors`);return f.generateSource(this.chars,this.lines,this.rules,this.udts,_)},this.toObject=function(){if(!B)throw new Error(`${r}can't generate parser source - must be preceeded by call to attributes()`);if(L)throw new Error(`${r}can't generate parser source - attributes have ${L} errors`);return f.generateObject(this.sabnf,this.rules,this.udts)},this.errorsToAscii=function(){return q(this.errors,this.lines,this.chars)},this.errorsToHtml=function(_){return O(this.errors,this.lines,this.chars,_)},this.linesToAscii=function(){return k(this.lines)},this.linesToHtml=function(){return $(this.lines)}}});var Cd=de(()=>{});var Od=de((Kg,Dd)=>{(function(n,t){"use strict";function r(d,c){if(!d)throw new Error(c||"Assertion failed")}function i(d,c){d.super_=c;var h=function(){};h.prototype=c.prototype,d.prototype=new h,d.prototype.constructor=d}function o(d,c,h){if(o.isBN(d))return d;this.negative=0,this.words=null,this.length=0,this.red=null,d!==null&&((c==="le"||c==="be")&&(h=c,c=10),this._init(d||0,c||10,h||"be"))}typeof n=="object"?n.exports=o:t.BN=o,o.BN=o,o.wordSize=26;var s;try{typeof window<"u"&&typeof window.Buffer<"u"?s=window.Buffer:s=Cd().Buffer}catch{}o.isBN=function(c){return c instanceof o?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===o.wordSize&&Array.isArray(c.words)},o.max=function(c,h){return c.cmp(h)>0?c:h},o.min=function(c,h){return c.cmp(h)<0?c:h},o.prototype._init=function(c,h,x){if(typeof c=="number")return this._initNumber(c,h,x);if(typeof c=="object")return this._initArray(c,h,x);h==="hex"&&(h=16),r(h===(h|0)&&h>=2&&h<=36),c=c.toString().replace(/\s+/g,"");var E=0;c[0]==="-"&&(E++,this.negative=1),E<c.length&&(h===16?this._parseHex(c,E,x):(this._parseBase(c,h,E),x==="le"&&this._initArray(this.toArray(),h,x)))},o.prototype._initNumber=function(c,h,x){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(r(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),x==="le"&&this._initArray(this.toArray(),h,x)},o.prototype._initArray=function(c,h,x){if(r(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var E=0;E<this.length;E++)this.words[E]=0;var w,m,A=0;if(x==="be")for(E=c.length-1,w=0;E>=0;E-=3)m=c[E]|c[E-1]<<8|c[E-2]<<16,this.words[w]|=m<<A&67108863,this.words[w+1]=m>>>26-A&67108863,A+=24,A>=26&&(A-=26,w++);else if(x==="le")for(E=0,w=0;E<c.length;E+=3)m=c[E]|c[E+1]<<8|c[E+2]<<16,this.words[w]|=m<<A&67108863,this.words[w+1]=m>>>26-A&67108863,A+=24,A>=26&&(A-=26,w++);return this._strip()};function a(d,c){var h=d.charCodeAt(c);if(h>=48&&h<=57)return h-48;if(h>=65&&h<=70)return h-55;if(h>=97&&h<=102)return h-87;r(!1,"Invalid character in "+d)}function f(d,c,h){var x=a(d,h);return h-1>=c&&(x|=a(d,h-1)<<4),x}o.prototype._parseHex=function(c,h,x){this.length=Math.ceil((c.length-h)/6),this.words=new Array(this.length);for(var E=0;E<this.length;E++)this.words[E]=0;var w=0,m=0,A;if(x==="be")for(E=c.length-1;E>=h;E-=2)A=f(c,h,E)<<w,this.words[m]|=A&67108863,w>=18?(w-=18,m+=1,this.words[m]|=A>>>26):w+=8;else{var I=c.length-h;for(E=I%2===0?h+1:h;E<c.length;E+=2)A=f(c,h,E)<<w,this.words[m]|=A&67108863,w>=18?(w-=18,m+=1,this.words[m]|=A>>>26):w+=8}this._strip()};function l(d,c,h,x){for(var E=0,w=0,m=Math.min(d.length,h),A=c;A<m;A++){var I=d.charCodeAt(A)-48;E*=x,I>=49?w=I-49+10:I>=17?w=I-17+10:w=I,r(I>=0&&w<x,"Invalid character"),E+=w}return E}o.prototype._parseBase=function(c,h,x){this.words=[0],this.length=1;for(var E=0,w=1;w<=67108863;w*=h)E++;E--,w=w/h|0;for(var m=c.length-x,A=m%E,I=Math.min(m,m-A)+x,y=0,M=x;M<I;M+=E)y=l(c,M,M+E,h),this.imuln(w),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y);if(A!==0){var re=1;for(y=l(c,M,c.length,h),M=0;M<A;M++)re*=h;this.imuln(re),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y)}this._strip()},o.prototype.copy=function(c){c.words=new Array(this.length);for(var h=0;h<this.length;h++)c.words[h]=this.words[h];c.length=this.length,c.negative=this.negative,c.red=this.red};function p(d,c){d.words=c.words,d.length=c.length,d.negative=c.negative,d.red=c.red}if(o.prototype._move=function(c){p(c,this)},o.prototype.clone=function(){var c=new o(null);return this.copy(c),c},o.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=b}catch{o.prototype.inspect=b}else o.prototype.inspect=b;function b(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var v=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],C=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],D=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(c,h){c=c||10,h=h|0||1;var x;if(c===16||c==="hex"){x="";for(var E=0,w=0,m=0;m<this.length;m++){var A=this.words[m],I=((A<<E|w)&16777215).toString(16);w=A>>>24-E&16777215,E+=2,E>=26&&(E-=26,m--),w!==0||m!==this.length-1?x=v[6-I.length]+I+x:x=I+x}for(w!==0&&(x=w.toString(16)+x);x.length%h!==0;)x="0"+x;return this.negative!==0&&(x="-"+x),x}if(c===(c|0)&&c>=2&&c<=36){var y=C[c],M=D[c];x="";var re=this.clone();for(re.negative=0;!re.isZero();){var T=re.modrn(M).toString(c);re=re.idivn(M),re.isZero()?x=T+x:x=v[y-T.length]+T+x}for(this.isZero()&&(x="0"+x);x.length%h!==0;)x="0"+x;return this.negative!==0&&(x="-"+x),x}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},o.prototype.toJSON=function(){return this.toString(16,2)},s&&(o.prototype.toBuffer=function(c,h){return this.toArrayLike(s,c,h)}),o.prototype.toArray=function(c,h){return this.toArrayLike(Array,c,h)};var S=function(c,h){return c.allocUnsafe?c.allocUnsafe(h):new c(h)};o.prototype.toArrayLike=function(c,h,x){this._strip();var E=this.byteLength(),w=x||Math.max(1,E);r(E<=w,"byte array longer than desired length"),r(w>0,"Requested array length <= 0");var m=S(c,w),A=h==="le"?"LE":"BE";return this["_toArrayLike"+A](m,E),m},o.prototype._toArrayLikeLE=function(c,h){for(var x=0,E=0,w=0,m=0;w<this.length;w++){var A=this.words[w]<<m|E;c[x++]=A&255,x<c.length&&(c[x++]=A>>8&255),x<c.length&&(c[x++]=A>>16&255),m===6?(x<c.length&&(c[x++]=A>>24&255),E=0,m=0):(E=A>>>24,m+=2)}if(x<c.length)for(c[x++]=E;x<c.length;)c[x++]=0},o.prototype._toArrayLikeBE=function(c,h){for(var x=c.length-1,E=0,w=0,m=0;w<this.length;w++){var A=this.words[w]<<m|E;c[x--]=A&255,x>=0&&(c[x--]=A>>8&255),x>=0&&(c[x--]=A>>16&255),m===6?(x>=0&&(c[x--]=A>>24&255),E=0,m=0):(E=A>>>24,m+=2)}if(x>=0)for(c[x--]=E;x>=0;)c[x--]=0},Math.clz32?o.prototype._countBits=function(c){return 32-Math.clz32(c)}:o.prototype._countBits=function(c){var h=c,x=0;return h>=4096&&(x+=13,h>>>=13),h>=64&&(x+=7,h>>>=7),h>=8&&(x+=4,h>>>=4),h>=2&&(x+=2,h>>>=2),x+h},o.prototype._zeroBits=function(c){if(c===0)return 26;var h=c,x=0;return h&8191||(x+=13,h>>>=13),h&127||(x+=7,h>>>=7),h&15||(x+=4,h>>>=4),h&3||(x+=2,h>>>=2),h&1||x++,x},o.prototype.bitLength=function(){var c=this.words[this.length-1],h=this._countBits(c);return(this.length-1)*26+h};function k(d){for(var c=new Array(d.bitLength()),h=0;h<c.length;h++){var x=h/26|0,E=h%26;c[h]=d.words[x]>>>E&1}return c}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,h=0;h<this.length;h++){var x=this._zeroBits(this.words[h]);if(c+=x,x!==26)break}return c},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},o.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var h=0;h<c.length;h++)this.words[h]=this.words[h]|c.words[h];return this._strip()},o.prototype.ior=function(c){return r((this.negative|c.negative)===0),this.iuor(c)},o.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},o.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},o.prototype.iuand=function(c){var h;this.length>c.length?h=c:h=this;for(var x=0;x<h.length;x++)this.words[x]=this.words[x]&c.words[x];return this.length=h.length,this._strip()},o.prototype.iand=function(c){return r((this.negative|c.negative)===0),this.iuand(c)},o.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},o.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},o.prototype.iuxor=function(c){var h,x;this.length>c.length?(h=this,x=c):(h=c,x=this);for(var E=0;E<x.length;E++)this.words[E]=h.words[E]^x.words[E];if(this!==h)for(;E<h.length;E++)this.words[E]=h.words[E];return this.length=h.length,this._strip()},o.prototype.ixor=function(c){return r((this.negative|c.negative)===0),this.iuxor(c)},o.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},o.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},o.prototype.inotn=function(c){r(typeof c=="number"&&c>=0);var h=Math.ceil(c/26)|0,x=c%26;this._expand(h),x>0&&h--;for(var E=0;E<h;E++)this.words[E]=~this.words[E]&67108863;return x>0&&(this.words[E]=~this.words[E]&67108863>>26-x),this._strip()},o.prototype.notn=function(c){return this.clone().inotn(c)},o.prototype.setn=function(c,h){r(typeof c=="number"&&c>=0);var x=c/26|0,E=c%26;return this._expand(x+1),h?this.words[x]=this.words[x]|1<<E:this.words[x]=this.words[x]&~(1<<E),this._strip()},o.prototype.iadd=function(c){var h;if(this.negative!==0&&c.negative===0)return this.negative=0,h=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,h=this.isub(c),c.negative=1,h._normSign();var x,E;this.length>c.length?(x=this,E=c):(x=c,E=this);for(var w=0,m=0;m<E.length;m++)h=(x.words[m]|0)+(E.words[m]|0)+w,this.words[m]=h&67108863,w=h>>>26;for(;w!==0&&m<x.length;m++)h=(x.words[m]|0)+w,this.words[m]=h&67108863,w=h>>>26;if(this.length=x.length,w!==0)this.words[this.length]=w,this.length++;else if(x!==this)for(;m<x.length;m++)this.words[m]=x.words[m];return this},o.prototype.add=function(c){var h;return c.negative!==0&&this.negative===0?(c.negative=0,h=this.sub(c),c.negative^=1,h):c.negative===0&&this.negative!==0?(this.negative=0,h=c.sub(this),this.negative=1,h):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},o.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var h=this.iadd(c);return c.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var x=this.cmp(c);if(x===0)return this.negative=0,this.length=1,this.words[0]=0,this;var E,w;x>0?(E=this,w=c):(E=c,w=this);for(var m=0,A=0;A<w.length;A++)h=(E.words[A]|0)-(w.words[A]|0)+m,m=h>>26,this.words[A]=h&67108863;for(;m!==0&&A<E.length;A++)h=(E.words[A]|0)+m,m=h>>26,this.words[A]=h&67108863;if(m===0&&A<E.length&&E!==this)for(;A<E.length;A++)this.words[A]=E.words[A];return this.length=Math.max(this.length,A),E!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(c){return this.clone().isub(c)};function $(d,c,h){h.negative=c.negative^d.negative;var x=d.length+c.length|0;h.length=x,x=x-1|0;var E=d.words[0]|0,w=c.words[0]|0,m=E*w,A=m&67108863,I=m/67108864|0;h.words[0]=A;for(var y=1;y<x;y++){for(var M=I>>>26,re=I&67108863,T=Math.min(y,c.length-1),K=Math.max(0,y-d.length+1);K<=T;K++){var Y=y-K|0;E=d.words[Y]|0,w=c.words[K]|0,m=E*w+re,M+=m/67108864|0,re=m&67108863}h.words[y]=re|0,I=M|0}return I!==0?h.words[y]=I|0:h.length--,h._strip()}var O=function(c,h,x){var E=c.words,w=h.words,m=x.words,A=0,I,y,M,re=E[0]|0,T=re&8191,K=re>>>13,Y=E[1]|0,N=Y&8191,P=Y>>>13,G=E[2]|0,J=G&8191,Q=G>>>13,le=E[3]|0,oe=le&8191,W=le>>>13,he=E[4]|0,Z=he&8191,se=he>>>13,F=E[5]|0,ne=F&8191,pe=F>>>13,Ee=E[6]|0,ve=Ee&8191,Se=Ee>>>13,Zt=E[7]|0,ee=Zt&8191,V=Zt>>>13,R=E[8]|0,H=R&8191,ie=R>>>13,ae=E[9]|0,ce=ae&8191,me=ae>>>13,et=w[0]|0,we=et&8191,be=et>>>13,rt=w[1]|0,Ae=rt&8191,Te=rt>>>13,an=w[2]|0,ke=an&8191,Ce=an>>>13,fn=w[3]|0,De=fn&8191,Oe=fn>>>13,cn=w[4]|0,Ie=cn&8191,Re=cn>>>13,un=w[5]|0,Ne=un&8191,Pe=un>>>13,ln=w[6]|0,Le=ln&8191,Be=ln>>>13,hn=w[7]|0,Ue=hn&8191,Fe=hn>>>13,dn=w[8]|0,$e=dn&8191,qe=dn>>>13,qr=w[9]|0,st=qr&8191,at=qr>>>13;x.negative=c.negative^h.negative,x.length=19,I=Math.imul(T,we),y=Math.imul(T,be),y=y+Math.imul(K,we)|0,M=Math.imul(K,be);var xr=(A+I|0)+((y&8191)<<13)|0;A=(M+(y>>>13)|0)+(xr>>>26)|0,xr&=67108863,I=Math.imul(N,we),y=Math.imul(N,be),y=y+Math.imul(P,we)|0,M=Math.imul(P,be),I=I+Math.imul(T,Ae)|0,y=y+Math.imul(T,Te)|0,y=y+Math.imul(K,Ae)|0,M=M+Math.imul(K,Te)|0;var wr=(A+I|0)+((y&8191)<<13)|0;A=(M+(y>>>13)|0)+(wr>>>26)|0,wr&=67108863,I=Math.imul(J,we),y=Math.imul(J,be),y=y+Math.imul(Q,we)|0,M=Math.imul(Q,be),I=I+Math.imul(N,Ae)|0,y=y+Math.imul(N,Te)|0,y=y+Math.imul(P,Ae)|0,M=M+Math.imul(P,Te)|0,I=I+Math.imul(T,ke)|0,y=y+Math.imul(T,Ce)|0,y=y+Math.imul(K,ke)|0,M=M+Math.imul(K,Ce)|0;var Er=(A+I|0)+((y&8191)<<13)|0;A=(M+(y>>>13)|0)+(Er>>>26)|0,Er&=67108863,I=Math.imul(oe,we),y=Math.imul(oe,be),y=y+Math.imul(W,we)|0,M=Math.imul(W,be),I=I+Math.imul(J,Ae)|0,y=y+Math.imul(J,Te)|0,y=y+Math.imul(Q,Ae)|0,M=M+Math.imul(Q,Te)|0,I=I+Math.imul(N,ke)|0,y=y+Math.imul(N,Ce)|0,y=y+Math.imul(P,ke)|0,M=M+Math.imul(P,Ce)|0,I=I+Math.imul(T,De)|0,y=y+Math.imul(T,Oe)|0,y=y+Math.imul(K,De)|0,M=M+Math.imul(K,Oe)|0;var _r=(A+I|0)+((y&8191)<<13)|0;A=(M+(y>>>13)|0)+(_r>>>26)|0,_r&=67108863,I=Math.imul(Z,we),y=Math.imul(Z,be),y=y+Math.imul(se,we)|0,M=Math.imul(se,be),I=I+Math.imul(oe,Ae)|0,y=y+Math.imul(oe,Te)|0,y=y+Math.imul(W,Ae)|0,M=M+Math.imul(W,Te)|0,I=I+Math.imul(J,ke)|0,y=y+Math.imul(J,Ce)|0,y=y+Math.imul(Q,ke)|0,M=M+Math.imul(Q,Ce)|0,I=I+Math.imul(N,De)|0,y=y+Math.imul(N,Oe)|0,y=y+Math.imul(P,De)|0,M=M+Math.imul(P,Oe)|0,I=I+Math.imul(T,Ie)|0,y=y+Math.imul(T,Re)|0,y=y+Math.imul(K,Ie)|0,M=M+Math.imul(K,Re)|0;var Ar=(A+I|0)+((y&8191)<<13)|0;A=(M+(y>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,I=Math.imul(ne,we),y=Math.imul(ne,be),y=y+Math.imul(pe,we)|0,M=Math.imul(pe,be),I=I+Math.imul(Z,Ae)|0,y=y+Math.imul(Z,Te)|0,y=y+Math.imul(se,Ae)|0,M=M+Math.imul(se,Te)|0,I=I+Math.imul(oe,ke)|0,y=y+Math.imul(oe,Ce)|0,y=y+Math.imul(W,ke)|0,M=M+Math.imul(W,Ce)|0,I=I+Math.imul(J,De)|0,y=y+Math.imul(J,Oe)|0,y=y+Math.imul(Q,De)|0,M=M+Math.imul(Q,Oe)|0,I=I+Math.imul(N,Ie)|0,y=y+Math.imul(N,Re)|0,y=y+Math.imul(P,Ie)|0,M=M+Math.imul(P,Re)|0,I=I+Math.imul(T,Ne)|0,y=y+Math.imul(T,Pe)|0,y=y+Math.imul(K,Ne)|0,M=M+Math.imul(K,Pe)|0;var qi=(A+I|0)+((y&8191)<<13)|0;A=(M+(y>>>13)|0)+(qi>>>26)|0,qi&=67108863,I=Math.imul(ve,we),y=Math.imul(ve,be),y=y+Math.imul(Se,we)|0,M=Math.imul(Se,be),I=I+Math.imul(ne,Ae)|0,y=y+Math.imul(ne,Te)|0,y=y+Math.imul(pe,Ae)|0,M=M+Math.imul(pe,Te)|0,I=I+Math.imul(Z,ke)|0,y=y+Math.imul(Z,Ce)|0,y=y+Math.imul(se,ke)|0,M=M+Math.imul(se,Ce)|0,I=I+Math.imul(oe,De)|0,y=y+Math.imul(oe,Oe)|0,y=y+Math.imul(W,De)|0,M=M+Math.imul(W,Oe)|0,I=I+Math.imul(J,Ie)|0,y=y+Math.imul(J,Re)|0,y=y+Math.imul(Q,Ie)|0,M=M+Math.imul(Q,Re)|0,I=I+Math.imul(N,Ne)|0,y=y+Math.imul(N,Pe)|0,y=y+Math.imul(P,Ne)|0,M=M+Math.imul(P,Pe)|0,I=I+Math.imul(T,Le)|0,y=y+Math.imul(T,Be)|0,y=y+Math.imul(K,Le)|0,M=M+Math.imul(K,Be)|0;var zi=(A+I|0)+((y&8191)<<13)|0;A=(M+(y>>>13)|0)+(zi>>>26)|0,zi&=67108863,I=Math.imul(ee,we),y=Math.imul(ee,be),y=y+Math.imul(V,we)|0,M=Math.imul(V,be),I=I+Math.imul(ve,Ae)|0,y=y+Math.imul(ve,Te)|0,y=y+Math.imul(Se,Ae)|0,M=M+Math.imul(Se,Te)|0,I=I+Math.imul(ne,ke)|0,y=y+Math.imul(ne,Ce)|0,y=y+Math.imul(pe,ke)|0,M=M+Math.imul(pe,Ce)|0,I=I+Math.imul(Z,De)|0,y=y+Math.imul(Z,Oe)|0,y=y+Math.imul(se,De)|0,M=M+Math.imul(se,Oe)|0,I=I+Math.imul(oe,Ie)|0,y=y+Math.imul(oe,Re)|0,y=y+Math.imul(W,Ie)|0,M=M+Math.imul(W,Re)|0,I=I+Math.imul(J,Ne)|0,y=y+Math.imul(J,Pe)|0,y=y+Math.imul(Q,Ne)|0,M=M+Math.imul(Q,Pe)|0,I=I+Math.imul(N,Le)|0,y=y+Math.imul(N,Be)|0,y=y+Math.imul(P,Le)|0,M=M+Math.imul(P,Be)|0,I=I+Math.imul(T,Ue)|0,y=y+Math.imul(T,Fe)|0,y=y+Math.imul(K,Ue)|0,M=M+Math.imul(K,Fe)|0;var Hi=(A+I|0)+((y&8191)<<13)|0;A=(M+(y>>>13)|0)+(Hi>>>26)|0,Hi&=67108863,I=Math.imul(H,we),y=Math.imul(H,be),y=y+Math.imul(ie,we)|0,M=Math.imul(ie,be),I=I+Math.imul(ee,Ae)|0,y=y+Math.imul(ee,Te)|0,y=y+Math.imul(V,Ae)|0,M=M+Math.imul(V,Te)|0,I=I+Math.imul(ve,ke)|0,y=y+Math.imul(ve,Ce)|0,y=y+Math.imul(Se,ke)|0,M=M+Math.imul(Se,Ce)|0,I=I+Math.imul(ne,De)|0,y=y+Math.imul(ne,Oe)|0,y=y+Math.imul(pe,De)|0,M=M+Math.imul(pe,Oe)|0,I=I+Math.imul(Z,Ie)|0,y=y+Math.imul(Z,Re)|0,y=y+Math.imul(se,Ie)|0,M=M+Math.imul(se,Re)|0,I=I+Math.imul(oe,Ne)|0,y=y+Math.imul(oe,Pe)|0,y=y+Math.imul(W,Ne)|0,M=M+Math.imul(W,Pe)|0,I=I+Math.imul(J,Le)|0,y=y+Math.imul(J,Be)|0,y=y+Math.imul(Q,Le)|0,M=M+Math.imul(Q,Be)|0,I=I+Math.imul(N,Ue)|0,y=y+Math.imul(N,Fe)|0,y=y+Math.imul(P,Ue)|0,M=M+Math.imul(P,Fe)|0,I=I+Math.imul(T,$e)|0,y=y+Math.imul(T,qe)|0,y=y+Math.imul(K,$e)|0,M=M+Math.imul(K,qe)|0;var Ki=(A+I|0)+((y&8191)<<13)|0;A=(M+(y>>>13)|0)+(Ki>>>26)|0,Ki&=67108863,I=Math.imul(ce,we),y=Math.imul(ce,be),y=y+Math.imul(me,we)|0,M=Math.imul(me,be),I=I+Math.imul(H,Ae)|0,y=y+Math.imul(H,Te)|0,y=y+Math.imul(ie,Ae)|0,M=M+Math.imul(ie,Te)|0,I=I+Math.imul(ee,ke)|0,y=y+Math.imul(ee,Ce)|0,y=y+Math.imul(V,ke)|0,M=M+Math.imul(V,Ce)|0,I=I+Math.imul(ve,De)|0,y=y+Math.imul(ve,Oe)|0,y=y+Math.imul(Se,De)|0,M=M+Math.imul(Se,Oe)|0,I=I+Math.imul(ne,Ie)|0,y=y+Math.imul(ne,Re)|0,y=y+Math.imul(pe,Ie)|0,M=M+Math.imul(pe,Re)|0,I=I+Math.imul(Z,Ne)|0,y=y+Math.imul(Z,Pe)|0,y=y+Math.imul(se,Ne)|0,M=M+Math.imul(se,Pe)|0,I=I+Math.imul(oe,Le)|0,y=y+Math.imul(oe,Be)|0,y=y+Math.imul(W,Le)|0,M=M+Math.imul(W,Be)|0,I=I+Math.imul(J,Ue)|0,y=y+Math.imul(J,Fe)|0,y=y+Math.imul(Q,Ue)|0,M=M+Math.imul(Q,Fe)|0,I=I+Math.imul(N,$e)|0,y=y+Math.imul(N,qe)|0,y=y+Math.imul(P,$e)|0,M=M+Math.imul(P,qe)|0,I=I+Math.imul(T,st)|0,y=y+Math.imul(T,at)|0,y=y+Math.imul(K,st)|0,M=M+Math.imul(K,at)|0;var ji=(A+I|0)+((y&8191)<<13)|0;A=(M+(y>>>13)|0)+(ji>>>26)|0,ji&=67108863,I=Math.imul(ce,Ae),y=Math.imul(ce,Te),y=y+Math.imul(me,Ae)|0,M=Math.imul(me,Te),I=I+Math.imul(H,ke)|0,y=y+Math.imul(H,Ce)|0,y=y+Math.imul(ie,ke)|0,M=M+Math.imul(ie,Ce)|0,I=I+Math.imul(ee,De)|0,y=y+Math.imul(ee,Oe)|0,y=y+Math.imul(V,De)|0,M=M+Math.imul(V,Oe)|0,I=I+Math.imul(ve,Ie)|0,y=y+Math.imul(ve,Re)|0,y=y+Math.imul(Se,Ie)|0,M=M+Math.imul(Se,Re)|0,I=I+Math.imul(ne,Ne)|0,y=y+Math.imul(ne,Pe)|0,y=y+Math.imul(pe,Ne)|0,M=M+Math.imul(pe,Pe)|0,I=I+Math.imul(Z,Le)|0,y=y+Math.imul(Z,Be)|0,y=y+Math.imul(se,Le)|0,M=M+Math.imul(se,Be)|0,I=I+Math.imul(oe,Ue)|0,y=y+Math.imul(oe,Fe)|0,y=y+Math.imul(W,Ue)|0,M=M+Math.imul(W,Fe)|0,I=I+Math.imul(J,$e)|0,y=y+Math.imul(J,qe)|0,y=y+Math.imul(Q,$e)|0,M=M+Math.imul(Q,qe)|0,I=I+Math.imul(N,st)|0,y=y+Math.imul(N,at)|0,y=y+Math.imul(P,st)|0,M=M+Math.imul(P,at)|0;var Gi=(A+I|0)+((y&8191)<<13)|0;A=(M+(y>>>13)|0)+(Gi>>>26)|0,Gi&=67108863,I=Math.imul(ce,ke),y=Math.imul(ce,Ce),y=y+Math.imul(me,ke)|0,M=Math.imul(me,Ce),I=I+Math.imul(H,De)|0,y=y+Math.imul(H,Oe)|0,y=y+Math.imul(ie,De)|0,M=M+Math.imul(ie,Oe)|0,I=I+Math.imul(ee,Ie)|0,y=y+Math.imul(ee,Re)|0,y=y+Math.imul(V,Ie)|0,M=M+Math.imul(V,Re)|0,I=I+Math.imul(ve,Ne)|0,y=y+Math.imul(ve,Pe)|0,y=y+Math.imul(Se,Ne)|0,M=M+Math.imul(Se,Pe)|0,I=I+Math.imul(ne,Le)|0,y=y+Math.imul(ne,Be)|0,y=y+Math.imul(pe,Le)|0,M=M+Math.imul(pe,Be)|0,I=I+Math.imul(Z,Ue)|0,y=y+Math.imul(Z,Fe)|0,y=y+Math.imul(se,Ue)|0,M=M+Math.imul(se,Fe)|0,I=I+Math.imul(oe,$e)|0,y=y+Math.imul(oe,qe)|0,y=y+Math.imul(W,$e)|0,M=M+Math.imul(W,qe)|0,I=I+Math.imul(J,st)|0,y=y+Math.imul(J,at)|0,y=y+Math.imul(Q,st)|0,M=M+Math.imul(Q,at)|0;var Ji=(A+I|0)+((y&8191)<<13)|0;A=(M+(y>>>13)|0)+(Ji>>>26)|0,Ji&=67108863,I=Math.imul(ce,De),y=Math.imul(ce,Oe),y=y+Math.imul(me,De)|0,M=Math.imul(me,Oe),I=I+Math.imul(H,Ie)|0,y=y+Math.imul(H,Re)|0,y=y+Math.imul(ie,Ie)|0,M=M+Math.imul(ie,Re)|0,I=I+Math.imul(ee,Ne)|0,y=y+Math.imul(ee,Pe)|0,y=y+Math.imul(V,Ne)|0,M=M+Math.imul(V,Pe)|0,I=I+Math.imul(ve,Le)|0,y=y+Math.imul(ve,Be)|0,y=y+Math.imul(Se,Le)|0,M=M+Math.imul(Se,Be)|0,I=I+Math.imul(ne,Ue)|0,y=y+Math.imul(ne,Fe)|0,y=y+Math.imul(pe,Ue)|0,M=M+Math.imul(pe,Fe)|0,I=I+Math.imul(Z,$e)|0,y=y+Math.imul(Z,qe)|0,y=y+Math.imul(se,$e)|0,M=M+Math.imul(se,qe)|0,I=I+Math.imul(oe,st)|0,y=y+Math.imul(oe,at)|0,y=y+Math.imul(W,st)|0,M=M+Math.imul(W,at)|0;var Vi=(A+I|0)+((y&8191)<<13)|0;A=(M+(y>>>13)|0)+(Vi>>>26)|0,Vi&=67108863,I=Math.imul(ce,Ie),y=Math.imul(ce,Re),y=y+Math.imul(me,Ie)|0,M=Math.imul(me,Re),I=I+Math.imul(H,Ne)|0,y=y+Math.imul(H,Pe)|0,y=y+Math.imul(ie,Ne)|0,M=M+Math.imul(ie,Pe)|0,I=I+Math.imul(ee,Le)|0,y=y+Math.imul(ee,Be)|0,y=y+Math.imul(V,Le)|0,M=M+Math.imul(V,Be)|0,I=I+Math.imul(ve,Ue)|0,y=y+Math.imul(ve,Fe)|0,y=y+Math.imul(Se,Ue)|0,M=M+Math.imul(Se,Fe)|0,I=I+Math.imul(ne,$e)|0,y=y+Math.imul(ne,qe)|0,y=y+Math.imul(pe,$e)|0,M=M+Math.imul(pe,qe)|0,I=I+Math.imul(Z,st)|0,y=y+Math.imul(Z,at)|0,y=y+Math.imul(se,st)|0,M=M+Math.imul(se,at)|0;var Wi=(A+I|0)+((y&8191)<<13)|0;A=(M+(y>>>13)|0)+(Wi>>>26)|0,Wi&=67108863,I=Math.imul(ce,Ne),y=Math.imul(ce,Pe),y=y+Math.imul(me,Ne)|0,M=Math.imul(me,Pe),I=I+Math.imul(H,Le)|0,y=y+Math.imul(H,Be)|0,y=y+Math.imul(ie,Le)|0,M=M+Math.imul(ie,Be)|0,I=I+Math.imul(ee,Ue)|0,y=y+Math.imul(ee,Fe)|0,y=y+Math.imul(V,Ue)|0,M=M+Math.imul(V,Fe)|0,I=I+Math.imul(ve,$e)|0,y=y+Math.imul(ve,qe)|0,y=y+Math.imul(Se,$e)|0,M=M+Math.imul(Se,qe)|0,I=I+Math.imul(ne,st)|0,y=y+Math.imul(ne,at)|0,y=y+Math.imul(pe,st)|0,M=M+Math.imul(pe,at)|0;var Yi=(A+I|0)+((y&8191)<<13)|0;A=(M+(y>>>13)|0)+(Yi>>>26)|0,Yi&=67108863,I=Math.imul(ce,Le),y=Math.imul(ce,Be),y=y+Math.imul(me,Le)|0,M=Math.imul(me,Be),I=I+Math.imul(H,Ue)|0,y=y+Math.imul(H,Fe)|0,y=y+Math.imul(ie,Ue)|0,M=M+Math.imul(ie,Fe)|0,I=I+Math.imul(ee,$e)|0,y=y+Math.imul(ee,qe)|0,y=y+Math.imul(V,$e)|0,M=M+Math.imul(V,qe)|0,I=I+Math.imul(ve,st)|0,y=y+Math.imul(ve,at)|0,y=y+Math.imul(Se,st)|0,M=M+Math.imul(Se,at)|0;var Xi=(A+I|0)+((y&8191)<<13)|0;A=(M+(y>>>13)|0)+(Xi>>>26)|0,Xi&=67108863,I=Math.imul(ce,Ue),y=Math.imul(ce,Fe),y=y+Math.imul(me,Ue)|0,M=Math.imul(me,Fe),I=I+Math.imul(H,$e)|0,y=y+Math.imul(H,qe)|0,y=y+Math.imul(ie,$e)|0,M=M+Math.imul(ie,qe)|0,I=I+Math.imul(ee,st)|0,y=y+Math.imul(ee,at)|0,y=y+Math.imul(V,st)|0,M=M+Math.imul(V,at)|0;var gl=(A+I|0)+((y&8191)<<13)|0;A=(M+(y>>>13)|0)+(gl>>>26)|0,gl&=67108863,I=Math.imul(ce,$e),y=Math.imul(ce,qe),y=y+Math.imul(me,$e)|0,M=Math.imul(me,qe),I=I+Math.imul(H,st)|0,y=y+Math.imul(H,at)|0,y=y+Math.imul(ie,st)|0,M=M+Math.imul(ie,at)|0;var yl=(A+I|0)+((y&8191)<<13)|0;A=(M+(y>>>13)|0)+(yl>>>26)|0,yl&=67108863,I=Math.imul(ce,st),y=Math.imul(ce,at),y=y+Math.imul(me,st)|0,M=Math.imul(me,at);var vl=(A+I|0)+((y&8191)<<13)|0;return A=(M+(y>>>13)|0)+(vl>>>26)|0,vl&=67108863,m[0]=xr,m[1]=wr,m[2]=Er,m[3]=_r,m[4]=Ar,m[5]=qi,m[6]=zi,m[7]=Hi,m[8]=Ki,m[9]=ji,m[10]=Gi,m[11]=Ji,m[12]=Vi,m[13]=Wi,m[14]=Yi,m[15]=Xi,m[16]=gl,m[17]=yl,m[18]=vl,A!==0&&(m[19]=A,x.length++),x};Math.imul||(O=$);function q(d,c,h){h.negative=c.negative^d.negative,h.length=d.length+c.length;for(var x=0,E=0,w=0;w<h.length-1;w++){var m=E;E=0;for(var A=x&67108863,I=Math.min(w,c.length-1),y=Math.max(0,w-d.length+1);y<=I;y++){var M=w-y,re=d.words[M]|0,T=c.words[y]|0,K=re*T,Y=K&67108863;m=m+(K/67108864|0)|0,Y=Y+A|0,A=Y&67108863,m=m+(Y>>>26)|0,E+=m>>>26,m&=67108863}h.words[w]=A,x=m,m=E}return x!==0?h.words[w]=x:h.length--,h._strip()}function j(d,c,h){return q(d,c,h)}o.prototype.mulTo=function(c,h){var x,E=this.length+c.length;return this.length===10&&c.length===10?x=O(this,c,h):E<63?x=$(this,c,h):E<1024?x=q(this,c,h):x=j(this,c,h),x};function z(d,c){this.x=d,this.y=c}z.prototype.makeRBT=function(c){for(var h=new Array(c),x=o.prototype._countBits(c)-1,E=0;E<c;E++)h[E]=this.revBin(E,x,c);return h},z.prototype.revBin=function(c,h,x){if(c===0||c===x-1)return c;for(var E=0,w=0;w<h;w++)E|=(c&1)<<h-w-1,c>>=1;return E},z.prototype.permute=function(c,h,x,E,w,m){for(var A=0;A<m;A++)E[A]=h[c[A]],w[A]=x[c[A]]},z.prototype.transform=function(c,h,x,E,w,m){this.permute(m,c,h,x,E,w);for(var A=1;A<w;A<<=1)for(var I=A<<1,y=Math.cos(2*Math.PI/I),M=Math.sin(2*Math.PI/I),re=0;re<w;re+=I)for(var T=y,K=M,Y=0;Y<A;Y++){var N=x[re+Y],P=E[re+Y],G=x[re+Y+A],J=E[re+Y+A],Q=T*G-K*J;J=T*J+K*G,G=Q,x[re+Y]=N+G,E[re+Y]=P+J,x[re+Y+A]=N-G,E[re+Y+A]=P-J,Y!==I&&(Q=y*T-M*K,K=y*K+M*T,T=Q)}},z.prototype.guessLen13b=function(c,h){var x=Math.max(h,c)|1,E=x&1,w=0;for(x=x/2|0;x;x=x>>>1)w++;return 1<<w+1+E},z.prototype.conjugate=function(c,h,x){if(!(x<=1))for(var E=0;E<x/2;E++){var w=c[E];c[E]=c[x-E-1],c[x-E-1]=w,w=h[E],h[E]=-h[x-E-1],h[x-E-1]=-w}},z.prototype.normalize13b=function(c,h){for(var x=0,E=0;E<h/2;E++){var w=Math.round(c[2*E+1]/h)*8192+Math.round(c[2*E]/h)+x;c[E]=w&67108863,w<67108864?x=0:x=w/67108864|0}return c},z.prototype.convert13b=function(c,h,x,E){for(var w=0,m=0;m<h;m++)w=w+(c[m]|0),x[2*m]=w&8191,w=w>>>13,x[2*m+1]=w&8191,w=w>>>13;for(m=2*h;m<E;++m)x[m]=0;r(w===0),r((w&-8192)===0)},z.prototype.stub=function(c){for(var h=new Array(c),x=0;x<c;x++)h[x]=0;return h},z.prototype.mulp=function(c,h,x){var E=2*this.guessLen13b(c.length,h.length),w=this.makeRBT(E),m=this.stub(E),A=new Array(E),I=new Array(E),y=new Array(E),M=new Array(E),re=new Array(E),T=new Array(E),K=x.words;K.length=E,this.convert13b(c.words,c.length,A,E),this.convert13b(h.words,h.length,M,E),this.transform(A,m,I,y,E,w),this.transform(M,m,re,T,E,w);for(var Y=0;Y<E;Y++){var N=I[Y]*re[Y]-y[Y]*T[Y];y[Y]=I[Y]*T[Y]+y[Y]*re[Y],I[Y]=N}return this.conjugate(I,y,E),this.transform(I,y,K,m,E,w),this.conjugate(K,m,E),this.normalize13b(K,E),x.negative=c.negative^h.negative,x.length=c.length+h.length,x._strip()},o.prototype.mul=function(c){var h=new o(null);return h.words=new Array(this.length+c.length),this.mulTo(c,h)},o.prototype.mulf=function(c){var h=new o(null);return h.words=new Array(this.length+c.length),j(this,c,h)},o.prototype.imul=function(c){return this.clone().mulTo(c,this)},o.prototype.imuln=function(c){var h=c<0;h&&(c=-c),r(typeof c=="number"),r(c<67108864);for(var x=0,E=0;E<this.length;E++){var w=(this.words[E]|0)*c,m=(w&67108863)+(x&67108863);x>>=26,x+=w/67108864|0,x+=m>>>26,this.words[E]=m&67108863}return x!==0&&(this.words[E]=x,this.length++),h?this.ineg():this},o.prototype.muln=function(c){return this.clone().imuln(c)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(c){var h=k(c);if(h.length===0)return new o(1);for(var x=this,E=0;E<h.length&&h[E]===0;E++,x=x.sqr());if(++E<h.length)for(var w=x.sqr();E<h.length;E++,w=w.sqr())h[E]!==0&&(x=x.mul(w));return x},o.prototype.iushln=function(c){r(typeof c=="number"&&c>=0);var h=c%26,x=(c-h)/26,E=67108863>>>26-h<<26-h,w;if(h!==0){var m=0;for(w=0;w<this.length;w++){var A=this.words[w]&E,I=(this.words[w]|0)-A<<h;this.words[w]=I|m,m=A>>>26-h}m&&(this.words[w]=m,this.length++)}if(x!==0){for(w=this.length-1;w>=0;w--)this.words[w+x]=this.words[w];for(w=0;w<x;w++)this.words[w]=0;this.length+=x}return this._strip()},o.prototype.ishln=function(c){return r(this.negative===0),this.iushln(c)},o.prototype.iushrn=function(c,h,x){r(typeof c=="number"&&c>=0);var E;h?E=(h-h%26)/26:E=0;var w=c%26,m=Math.min((c-w)/26,this.length),A=67108863^67108863>>>w<<w,I=x;if(E-=m,E=Math.max(0,E),I){for(var y=0;y<m;y++)I.words[y]=this.words[y];I.length=m}if(m!==0)if(this.length>m)for(this.length-=m,y=0;y<this.length;y++)this.words[y]=this.words[y+m];else this.words[0]=0,this.length=1;var M=0;for(y=this.length-1;y>=0&&(M!==0||y>=E);y--){var re=this.words[y]|0;this.words[y]=M<<26-w|re>>>w,M=re&A}return I&&M!==0&&(I.words[I.length++]=M),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(c,h,x){return r(this.negative===0),this.iushrn(c,h,x)},o.prototype.shln=function(c){return this.clone().ishln(c)},o.prototype.ushln=function(c){return this.clone().iushln(c)},o.prototype.shrn=function(c){return this.clone().ishrn(c)},o.prototype.ushrn=function(c){return this.clone().iushrn(c)},o.prototype.testn=function(c){r(typeof c=="number"&&c>=0);var h=c%26,x=(c-h)/26,E=1<<h;if(this.length<=x)return!1;var w=this.words[x];return!!(w&E)},o.prototype.imaskn=function(c){r(typeof c=="number"&&c>=0);var h=c%26,x=(c-h)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=x)return this;if(h!==0&&x++,this.length=Math.min(x,this.length),h!==0){var E=67108863^67108863>>>h<<h;this.words[this.length-1]&=E}return this._strip()},o.prototype.maskn=function(c){return this.clone().imaskn(c)},o.prototype.iaddn=function(c){return r(typeof c=="number"),r(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<=c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},o.prototype._iaddn=function(c){this.words[0]+=c;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},o.prototype.isubn=function(c){if(r(typeof c=="number"),r(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this._strip()},o.prototype.addn=function(c){return this.clone().iaddn(c)},o.prototype.subn=function(c){return this.clone().isubn(c)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(c,h,x){var E=c.length+x,w;this._expand(E);var m,A=0;for(w=0;w<c.length;w++){m=(this.words[w+x]|0)+A;var I=(c.words[w]|0)*h;m-=I&67108863,A=(m>>26)-(I/67108864|0),this.words[w+x]=m&67108863}for(;w<this.length-x;w++)m=(this.words[w+x]|0)+A,A=m>>26,this.words[w+x]=m&67108863;if(A===0)return this._strip();for(r(A===-1),A=0,w=0;w<this.length;w++)m=-(this.words[w]|0)+A,A=m>>26,this.words[w]=m&67108863;return this.negative=1,this._strip()},o.prototype._wordDiv=function(c,h){var x=this.length-c.length,E=this.clone(),w=c,m=w.words[w.length-1]|0,A=this._countBits(m);x=26-A,x!==0&&(w=w.ushln(x),E.iushln(x),m=w.words[w.length-1]|0);var I=E.length-w.length,y;if(h!=="mod"){y=new o(null),y.length=I+1,y.words=new Array(y.length);for(var M=0;M<y.length;M++)y.words[M]=0}var re=E.clone()._ishlnsubmul(w,1,I);re.negative===0&&(E=re,y&&(y.words[I]=1));for(var T=I-1;T>=0;T--){var K=(E.words[w.length+T]|0)*67108864+(E.words[w.length+T-1]|0);for(K=Math.min(K/m|0,67108863),E._ishlnsubmul(w,K,T);E.negative!==0;)K--,E.negative=0,E._ishlnsubmul(w,1,T),E.isZero()||(E.negative^=1);y&&(y.words[T]=K)}return y&&y._strip(),E._strip(),h!=="div"&&x!==0&&E.iushrn(x),{div:y||null,mod:E}},o.prototype.divmod=function(c,h,x){if(r(!c.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var E,w,m;return this.negative!==0&&c.negative===0?(m=this.neg().divmod(c,h),h!=="mod"&&(E=m.div.neg()),h!=="div"&&(w=m.mod.neg(),x&&w.negative!==0&&w.iadd(c)),{div:E,mod:w}):this.negative===0&&c.negative!==0?(m=this.divmod(c.neg(),h),h!=="mod"&&(E=m.div.neg()),{div:E,mod:m.mod}):this.negative&c.negative?(m=this.neg().divmod(c.neg(),h),h!=="div"&&(w=m.mod.neg(),x&&w.negative!==0&&w.isub(c)),{div:m.div,mod:w}):c.length>this.length||this.cmp(c)<0?{div:new o(0),mod:this}:c.length===1?h==="div"?{div:this.divn(c.words[0]),mod:null}:h==="mod"?{div:null,mod:new o(this.modrn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new o(this.modrn(c.words[0]))}:this._wordDiv(c,h)},o.prototype.div=function(c){return this.divmod(c,"div",!1).div},o.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},o.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},o.prototype.divRound=function(c){var h=this.divmod(c);if(h.mod.isZero())return h.div;var x=h.div.negative!==0?h.mod.isub(c):h.mod,E=c.ushrn(1),w=c.andln(1),m=x.cmp(E);return m<0||w===1&&m===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},o.prototype.modrn=function(c){var h=c<0;h&&(c=-c),r(c<=67108863);for(var x=(1<<26)%c,E=0,w=this.length-1;w>=0;w--)E=(x*E+(this.words[w]|0))%c;return h?-E:E},o.prototype.modn=function(c){return this.modrn(c)},o.prototype.idivn=function(c){var h=c<0;h&&(c=-c),r(c<=67108863);for(var x=0,E=this.length-1;E>=0;E--){var w=(this.words[E]|0)+x*67108864;this.words[E]=w/c|0,x=w%c}return this._strip(),h?this.ineg():this},o.prototype.divn=function(c){return this.clone().idivn(c)},o.prototype.egcd=function(c){r(c.negative===0),r(!c.isZero());var h=this,x=c.clone();h.negative!==0?h=h.umod(c):h=h.clone();for(var E=new o(1),w=new o(0),m=new o(0),A=new o(1),I=0;h.isEven()&&x.isEven();)h.iushrn(1),x.iushrn(1),++I;for(var y=x.clone(),M=h.clone();!h.isZero();){for(var re=0,T=1;!(h.words[0]&T)&&re<26;++re,T<<=1);if(re>0)for(h.iushrn(re);re-- >0;)(E.isOdd()||w.isOdd())&&(E.iadd(y),w.isub(M)),E.iushrn(1),w.iushrn(1);for(var K=0,Y=1;!(x.words[0]&Y)&&K<26;++K,Y<<=1);if(K>0)for(x.iushrn(K);K-- >0;)(m.isOdd()||A.isOdd())&&(m.iadd(y),A.isub(M)),m.iushrn(1),A.iushrn(1);h.cmp(x)>=0?(h.isub(x),E.isub(m),w.isub(A)):(x.isub(h),m.isub(E),A.isub(w))}return{a:m,b:A,gcd:x.iushln(I)}},o.prototype._invmp=function(c){r(c.negative===0),r(!c.isZero());var h=this,x=c.clone();h.negative!==0?h=h.umod(c):h=h.clone();for(var E=new o(1),w=new o(0),m=x.clone();h.cmpn(1)>0&&x.cmpn(1)>0;){for(var A=0,I=1;!(h.words[0]&I)&&A<26;++A,I<<=1);if(A>0)for(h.iushrn(A);A-- >0;)E.isOdd()&&E.iadd(m),E.iushrn(1);for(var y=0,M=1;!(x.words[0]&M)&&y<26;++y,M<<=1);if(y>0)for(x.iushrn(y);y-- >0;)w.isOdd()&&w.iadd(m),w.iushrn(1);h.cmp(x)>=0?(h.isub(x),E.isub(w)):(x.isub(h),w.isub(E))}var re;return h.cmpn(1)===0?re=E:re=w,re.cmpn(0)<0&&re.iadd(c),re},o.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var h=this.clone(),x=c.clone();h.negative=0,x.negative=0;for(var E=0;h.isEven()&&x.isEven();E++)h.iushrn(1),x.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;x.isEven();)x.iushrn(1);var w=h.cmp(x);if(w<0){var m=h;h=x,x=m}else if(w===0||x.cmpn(1)===0)break;h.isub(x)}while(!0);return x.iushln(E)},o.prototype.invm=function(c){return this.egcd(c).a.umod(c)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(c){return this.words[0]&c},o.prototype.bincn=function(c){r(typeof c=="number");var h=c%26,x=(c-h)/26,E=1<<h;if(this.length<=x)return this._expand(x+1),this.words[x]|=E,this;for(var w=E,m=x;w!==0&&m<this.length;m++){var A=this.words[m]|0;A+=w,w=A>>>26,A&=67108863,this.words[m]=A}return w!==0&&(this.words[m]=w,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(c){var h=c<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this._strip();var x;if(this.length>1)x=1;else{h&&(c=-c),r(c<=67108863,"Number is too big");var E=this.words[0]|0;x=E===c?0:E<c?-1:1}return this.negative!==0?-x|0:x},o.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var h=this.ucmp(c);return this.negative!==0?-h|0:h},o.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var h=0,x=this.length-1;x>=0;x--){var E=this.words[x]|0,w=c.words[x]|0;if(E!==w){E<w?h=-1:E>w&&(h=1);break}}return h},o.prototype.gtn=function(c){return this.cmpn(c)===1},o.prototype.gt=function(c){return this.cmp(c)===1},o.prototype.gten=function(c){return this.cmpn(c)>=0},o.prototype.gte=function(c){return this.cmp(c)>=0},o.prototype.ltn=function(c){return this.cmpn(c)===-1},o.prototype.lt=function(c){return this.cmp(c)===-1},o.prototype.lten=function(c){return this.cmpn(c)<=0},o.prototype.lte=function(c){return this.cmp(c)<=0},o.prototype.eqn=function(c){return this.cmpn(c)===0},o.prototype.eq=function(c){return this.cmp(c)===0},o.red=function(c){return new u(c)},o.prototype.toRed=function(c){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(c){return this.red=c,this},o.prototype.forceRed=function(c){return r(!this.red,"Already a number in reduction context"),this._forceRed(c)},o.prototype.redAdd=function(c){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},o.prototype.redIAdd=function(c){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},o.prototype.redSub=function(c){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},o.prototype.redISub=function(c){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},o.prototype.redShl=function(c){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},o.prototype.redMul=function(c){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},o.prototype.redIMul=function(c){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(c){return r(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var X={k256:null,p224:null,p192:null,p25519:null};function B(d,c){this.name=d,this.p=new o(c,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}B.prototype._tmp=function(){var c=new o(null);return c.words=new Array(Math.ceil(this.n/13)),c},B.prototype.ireduce=function(c){var h=c,x;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),x=h.bitLength();while(x>this.n);var E=x<this.n?-1:h.ucmp(this.p);return E===0?(h.words[0]=0,h.length=1):E>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},B.prototype.split=function(c,h){c.iushrn(this.n,0,h)},B.prototype.imulK=function(c){return c.imul(this.k)};function L(){B.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(L,B),L.prototype.split=function(c,h){for(var x=4194303,E=Math.min(c.length,9),w=0;w<E;w++)h.words[w]=c.words[w];if(h.length=E,c.length<=9){c.words[0]=0,c.length=1;return}var m=c.words[9];for(h.words[h.length++]=m&x,w=10;w<c.length;w++){var A=c.words[w]|0;c.words[w-10]=(A&x)<<4|m>>>22,m=A}m>>>=22,c.words[w-10]=m,m===0&&c.length>10?c.length-=10:c.length-=9},L.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var h=0,x=0;x<c.length;x++){var E=c.words[x]|0;h+=E*977,c.words[x]=h&67108863,h=E*64+(h/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function U(){B.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(U,B);function te(){B.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(te,B);function _(){B.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(_,B),_.prototype.imulK=function(c){for(var h=0,x=0;x<c.length;x++){var E=(c.words[x]|0)*19+h,w=E&67108863;E>>>=26,c.words[x]=w,h=E}return h!==0&&(c.words[c.length++]=h),c},o._prime=function(c){if(X[c])return X[c];var h;if(c==="k256")h=new L;else if(c==="p224")h=new U;else if(c==="p192")h=new te;else if(c==="p25519")h=new _;else throw new Error("Unknown prime "+c);return X[c]=h,h};function u(d){if(typeof d=="string"){var c=o._prime(d);this.m=c.p,this.prime=c}else r(d.gtn(1),"modulus must be greater than 1"),this.m=d,this.prime=null}u.prototype._verify1=function(c){r(c.negative===0,"red works only with positives"),r(c.red,"red works only with red numbers")},u.prototype._verify2=function(c,h){r((c.negative|h.negative)===0,"red works only with positives"),r(c.red&&c.red===h.red,"red works only with red numbers")},u.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):(p(c,c.umod(this.m)._forceRed(this)),c)},u.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},u.prototype.add=function(c,h){this._verify2(c,h);var x=c.add(h);return x.cmp(this.m)>=0&&x.isub(this.m),x._forceRed(this)},u.prototype.iadd=function(c,h){this._verify2(c,h);var x=c.iadd(h);return x.cmp(this.m)>=0&&x.isub(this.m),x},u.prototype.sub=function(c,h){this._verify2(c,h);var x=c.sub(h);return x.cmpn(0)<0&&x.iadd(this.m),x._forceRed(this)},u.prototype.isub=function(c,h){this._verify2(c,h);var x=c.isub(h);return x.cmpn(0)<0&&x.iadd(this.m),x},u.prototype.shl=function(c,h){return this._verify1(c),this.imod(c.ushln(h))},u.prototype.imul=function(c,h){return this._verify2(c,h),this.imod(c.imul(h))},u.prototype.mul=function(c,h){return this._verify2(c,h),this.imod(c.mul(h))},u.prototype.isqr=function(c){return this.imul(c,c.clone())},u.prototype.sqr=function(c){return this.mul(c,c)},u.prototype.sqrt=function(c){if(c.isZero())return c.clone();var h=this.m.andln(3);if(r(h%2===1),h===3){var x=this.m.add(new o(1)).iushrn(2);return this.pow(c,x)}for(var E=this.m.subn(1),w=0;!E.isZero()&&E.andln(1)===0;)w++,E.iushrn(1);r(!E.isZero());var m=new o(1).toRed(this),A=m.redNeg(),I=this.m.subn(1).iushrn(1),y=this.m.bitLength();for(y=new o(2*y*y).toRed(this);this.pow(y,I).cmp(A)!==0;)y.redIAdd(A);for(var M=this.pow(y,E),re=this.pow(c,E.addn(1).iushrn(1)),T=this.pow(c,E),K=w;T.cmp(m)!==0;){for(var Y=T,N=0;Y.cmp(m)!==0;N++)Y=Y.redSqr();r(N<K);var P=this.pow(M,new o(1).iushln(K-N-1));re=re.redMul(P),M=P.redSqr(),T=T.redMul(M),K=N}return re},u.prototype.invm=function(c){var h=c._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},u.prototype.pow=function(c,h){if(h.isZero())return new o(1).toRed(this);if(h.cmpn(1)===0)return c.clone();var x=4,E=new Array(1<<x);E[0]=new o(1).toRed(this),E[1]=c;for(var w=2;w<E.length;w++)E[w]=this.mul(E[w-1],c);var m=E[0],A=0,I=0,y=h.bitLength()%26;for(y===0&&(y=26),w=h.length-1;w>=0;w--){for(var M=h.words[w],re=y-1;re>=0;re--){var T=M>>re&1;if(m!==E[0]&&(m=this.sqr(m)),T===0&&A===0){I=0;continue}A<<=1,A|=T,I++,!(I!==x&&(w!==0||re!==0))&&(m=this.mul(m,E[A]),I=0,A=0)}y=26}return m},u.prototype.convertTo=function(c){var h=c.umod(this.m);return h===c?h.clone():h},u.prototype.convertFrom=function(c){var h=c.clone();return h.red=null,h},o.mont=function(c){return new g(c)};function g(d){u.call(this,d),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(g,u),g.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},g.prototype.convertFrom=function(c){var h=this.imod(c.mul(this.rinv));return h.red=null,h},g.prototype.imul=function(c,h){if(c.isZero()||h.isZero())return c.words[0]=0,c.length=1,c;var x=c.imul(h),E=x.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=x.isub(E).iushrn(this.shift),m=w;return w.cmp(this.m)>=0?m=w.isub(this.m):w.cmpn(0)<0&&(m=w.iadd(this.m)),m._forceRed(this)},g.prototype.mul=function(c,h){if(c.isZero()||h.isZero())return new o(0)._forceRed(this);var x=c.mul(h),E=x.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=x.isub(E).iushrn(this.shift),m=w;return w.cmp(this.m)>=0?m=w.isub(this.m):w.cmpn(0)<0&&(m=w.iadd(this.m)),m._forceRed(this)},g.prototype.invm=function(c){var h=this.imod(c._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(typeof Dd>"u"||Dd,Kg)});var Rd=de((DU,tu)=>{(function(){"use strict";var n="input is invalid type",t="finalize already called",r=typeof window=="object",i=r?window:{};i.JS_SHA3_NO_WINDOW&&(r=!1);var o=!r&&typeof self=="object",s=!i.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;s?i=global:o&&(i=self);var a=!i.JS_SHA3_NO_COMMON_JS&&typeof tu=="object"&&tu.exports,f=typeof define=="function"&&define.amd,l=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",p="0123456789abcdef".split(""),b=[31,7936,2031616,520093696],v=[4,1024,262144,67108864],C=[1,256,65536,16777216],D=[6,1536,393216,100663296],S=[0,8,16,24],k=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],$=[224,256,384,512],O=[128,256],q=["hex","buffer","arrayBuffer","array","digest"],j={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(T){return Object.prototype.toString.call(T)==="[object Array]"}),l&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(T){return typeof T=="object"&&T.buffer&&T.buffer.constructor===ArrayBuffer});for(var z=function(T,K,Y){return function(N){return new y(T,K,T).update(N)[Y]()}},X=function(T,K,Y){return function(N,P){return new y(T,K,P).update(N)[Y]()}},B=function(T,K,Y){return function(N,P,G,J){return c["cshake"+T].update(N,P,G,J)[Y]()}},L=function(T,K,Y){return function(N,P,G,J){return c["kmac"+T].update(N,P,G,J)[Y]()}},U=function(T,K,Y,N){for(var P=0;P<q.length;++P){var G=q[P];T[G]=K(Y,N,G)}return T},te=function(T,K){var Y=z(T,K,"hex");return Y.create=function(){return new y(T,K,T)},Y.update=function(N){return Y.create().update(N)},U(Y,z,T,K)},_=function(T,K){var Y=X(T,K,"hex");return Y.create=function(N){return new y(T,K,N)},Y.update=function(N,P){return Y.create(P).update(N)},U(Y,X,T,K)},u=function(T,K){var Y=j[T],N=B(T,K,"hex");return N.create=function(P,G,J){return!G&&!J?c["shake"+T].create(P):new y(T,K,P).bytepad([G,J],Y)},N.update=function(P,G,J,Q){return N.create(G,J,Q).update(P)},U(N,B,T,K)},g=function(T,K){var Y=j[T],N=L(T,K,"hex");return N.create=function(P,G,J){return new M(T,K,G).bytepad(["KMAC",J],Y).bytepad([P],Y)},N.update=function(P,G,J,Q){return N.create(P,J,Q).update(G)},U(N,L,T,K)},d=[{name:"keccak",padding:C,bits:$,createMethod:te},{name:"sha3",padding:D,bits:$,createMethod:te},{name:"shake",padding:b,bits:O,createMethod:_},{name:"cshake",padding:v,bits:O,createMethod:u},{name:"kmac",padding:v,bits:O,createMethod:g}],c={},h=[],x=0;x<d.length;++x)for(var E=d[x],w=E.bits,m=0;m<w.length;++m){var A=E.name+"_"+w[m];if(h.push(A),c[A]=E.createMethod(w[m],E.padding),E.name!=="sha3"){var I=E.name+w[m];h.push(I),c[I]=c[A]}}function y(T,K,Y){this.blocks=[],this.s=[],this.padding=K,this.outputBits=Y,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(T<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=Y>>5,this.extraBytes=(Y&31)>>3;for(var N=0;N<50;++N)this.s[N]=0}y.prototype.update=function(T){if(this.finalized)throw new Error(t);var K,Y=typeof T;if(Y!=="string"){if(Y==="object"){if(T===null)throw new Error(n);if(l&&T.constructor===ArrayBuffer)T=new Uint8Array(T);else if(!Array.isArray(T)&&(!l||!ArrayBuffer.isView(T)))throw new Error(n)}else throw new Error(n);K=!0}for(var N=this.blocks,P=this.byteCount,G=T.length,J=this.blockCount,Q=0,le=this.s,oe,W;Q<G;){if(this.reset)for(this.reset=!1,N[0]=this.block,oe=1;oe<J+1;++oe)N[oe]=0;if(K)for(oe=this.start;Q<G&&oe<P;++Q)N[oe>>2]|=T[Q]<<S[oe++&3];else for(oe=this.start;Q<G&&oe<P;++Q)W=T.charCodeAt(Q),W<128?N[oe>>2]|=W<<S[oe++&3]:W<2048?(N[oe>>2]|=(192|W>>6)<<S[oe++&3],N[oe>>2]|=(128|W&63)<<S[oe++&3]):W<55296||W>=57344?(N[oe>>2]|=(224|W>>12)<<S[oe++&3],N[oe>>2]|=(128|W>>6&63)<<S[oe++&3],N[oe>>2]|=(128|W&63)<<S[oe++&3]):(W=65536+((W&1023)<<10|T.charCodeAt(++Q)&1023),N[oe>>2]|=(240|W>>18)<<S[oe++&3],N[oe>>2]|=(128|W>>12&63)<<S[oe++&3],N[oe>>2]|=(128|W>>6&63)<<S[oe++&3],N[oe>>2]|=(128|W&63)<<S[oe++&3]);if(this.lastByteIndex=oe,oe>=P){for(this.start=oe-P,this.block=N[J],oe=0;oe<J;++oe)le[oe]^=N[oe];re(le),this.reset=!0}else this.start=oe}return this},y.prototype.encode=function(T,K){var Y=T&255,N=1,P=[Y];for(T=T>>8,Y=T&255;Y>0;)P.unshift(Y),T=T>>8,Y=T&255,++N;return K?P.push(N):P.unshift(N),this.update(P),P.length},y.prototype.encodeString=function(T){var K,Y=typeof T;if(Y!=="string"){if(Y==="object"){if(T===null)throw new Error(n);if(l&&T.constructor===ArrayBuffer)T=new Uint8Array(T);else if(!Array.isArray(T)&&(!l||!ArrayBuffer.isView(T)))throw new Error(n)}else throw new Error(n);K=!0}var N=0,P=T.length;if(K)N=P;else for(var G=0;G<T.length;++G){var J=T.charCodeAt(G);J<128?N+=1:J<2048?N+=2:J<55296||J>=57344?N+=3:(J=65536+((J&1023)<<10|T.charCodeAt(++G)&1023),N+=4)}return N+=this.encode(N*8),this.update(T),N},y.prototype.bytepad=function(T,K){for(var Y=this.encode(K),N=0;N<T.length;++N)Y+=this.encodeString(T[N]);var P=K-Y%K,G=[];return G.length=P,this.update(G),this},y.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var T=this.blocks,K=this.lastByteIndex,Y=this.blockCount,N=this.s;if(T[K>>2]|=this.padding[K&3],this.lastByteIndex===this.byteCount)for(T[0]=T[Y],K=1;K<Y+1;++K)T[K]=0;for(T[Y-1]|=2147483648,K=0;K<Y;++K)N[K]^=T[K];re(N)}},y.prototype.toString=y.prototype.hex=function(){this.finalize();for(var T=this.blockCount,K=this.s,Y=this.outputBlocks,N=this.extraBytes,P=0,G=0,J="",Q;G<Y;){for(P=0;P<T&&G<Y;++P,++G)Q=K[P],J+=p[Q>>4&15]+p[Q&15]+p[Q>>12&15]+p[Q>>8&15]+p[Q>>20&15]+p[Q>>16&15]+p[Q>>28&15]+p[Q>>24&15];G%T===0&&(re(K),P=0)}return N&&(Q=K[P],J+=p[Q>>4&15]+p[Q&15],N>1&&(J+=p[Q>>12&15]+p[Q>>8&15]),N>2&&(J+=p[Q>>20&15]+p[Q>>16&15])),J},y.prototype.arrayBuffer=function(){this.finalize();var T=this.blockCount,K=this.s,Y=this.outputBlocks,N=this.extraBytes,P=0,G=0,J=this.outputBits>>3,Q;N?Q=new ArrayBuffer(Y+1<<2):Q=new ArrayBuffer(J);for(var le=new Uint32Array(Q);G<Y;){for(P=0;P<T&&G<Y;++P,++G)le[G]=K[P];G%T===0&&re(K)}return N&&(le[P]=K[P],Q=Q.slice(0,J)),Q},y.prototype.buffer=y.prototype.arrayBuffer,y.prototype.digest=y.prototype.array=function(){this.finalize();for(var T=this.blockCount,K=this.s,Y=this.outputBlocks,N=this.extraBytes,P=0,G=0,J=[],Q,le;G<Y;){for(P=0;P<T&&G<Y;++P,++G)Q=G<<2,le=K[P],J[Q]=le&255,J[Q+1]=le>>8&255,J[Q+2]=le>>16&255,J[Q+3]=le>>24&255;G%T===0&&re(K)}return N&&(Q=G<<2,le=K[P],J[Q]=le&255,N>1&&(J[Q+1]=le>>8&255),N>2&&(J[Q+2]=le>>16&255)),J};function M(T,K,Y){y.call(this,T,K,Y)}M.prototype=new y,M.prototype.finalize=function(){return this.encode(this.outputBits,!0),y.prototype.finalize.call(this)};var re=function(T){var K,Y,N,P,G,J,Q,le,oe,W,he,Z,se,F,ne,pe,Ee,ve,Se,Zt,ee,V,R,H,ie,ae,ce,me,et,we,be,rt,Ae,Te,an,ke,Ce,fn,De,Oe,cn,Ie,Re,un,Ne,Pe,ln,Le,Be,hn,Ue,Fe,dn,$e,qe,qr,st,at,xr,wr,Er,_r,Ar;for(N=0;N<48;N+=2)P=T[0]^T[10]^T[20]^T[30]^T[40],G=T[1]^T[11]^T[21]^T[31]^T[41],J=T[2]^T[12]^T[22]^T[32]^T[42],Q=T[3]^T[13]^T[23]^T[33]^T[43],le=T[4]^T[14]^T[24]^T[34]^T[44],oe=T[5]^T[15]^T[25]^T[35]^T[45],W=T[6]^T[16]^T[26]^T[36]^T[46],he=T[7]^T[17]^T[27]^T[37]^T[47],Z=T[8]^T[18]^T[28]^T[38]^T[48],se=T[9]^T[19]^T[29]^T[39]^T[49],K=Z^(J<<1|Q>>>31),Y=se^(Q<<1|J>>>31),T[0]^=K,T[1]^=Y,T[10]^=K,T[11]^=Y,T[20]^=K,T[21]^=Y,T[30]^=K,T[31]^=Y,T[40]^=K,T[41]^=Y,K=P^(le<<1|oe>>>31),Y=G^(oe<<1|le>>>31),T[2]^=K,T[3]^=Y,T[12]^=K,T[13]^=Y,T[22]^=K,T[23]^=Y,T[32]^=K,T[33]^=Y,T[42]^=K,T[43]^=Y,K=J^(W<<1|he>>>31),Y=Q^(he<<1|W>>>31),T[4]^=K,T[5]^=Y,T[14]^=K,T[15]^=Y,T[24]^=K,T[25]^=Y,T[34]^=K,T[35]^=Y,T[44]^=K,T[45]^=Y,K=le^(Z<<1|se>>>31),Y=oe^(se<<1|Z>>>31),T[6]^=K,T[7]^=Y,T[16]^=K,T[17]^=Y,T[26]^=K,T[27]^=Y,T[36]^=K,T[37]^=Y,T[46]^=K,T[47]^=Y,K=W^(P<<1|G>>>31),Y=he^(G<<1|P>>>31),T[8]^=K,T[9]^=Y,T[18]^=K,T[19]^=Y,T[28]^=K,T[29]^=Y,T[38]^=K,T[39]^=Y,T[48]^=K,T[49]^=Y,F=T[0],ne=T[1],Pe=T[11]<<4|T[10]>>>28,ln=T[10]<<4|T[11]>>>28,me=T[20]<<3|T[21]>>>29,et=T[21]<<3|T[20]>>>29,wr=T[31]<<9|T[30]>>>23,Er=T[30]<<9|T[31]>>>23,Ie=T[40]<<18|T[41]>>>14,Re=T[41]<<18|T[40]>>>14,Te=T[2]<<1|T[3]>>>31,an=T[3]<<1|T[2]>>>31,pe=T[13]<<12|T[12]>>>20,Ee=T[12]<<12|T[13]>>>20,Le=T[22]<<10|T[23]>>>22,Be=T[23]<<10|T[22]>>>22,we=T[33]<<13|T[32]>>>19,be=T[32]<<13|T[33]>>>19,_r=T[42]<<2|T[43]>>>30,Ar=T[43]<<2|T[42]>>>30,$e=T[5]<<30|T[4]>>>2,qe=T[4]<<30|T[5]>>>2,ke=T[14]<<6|T[15]>>>26,Ce=T[15]<<6|T[14]>>>26,ve=T[25]<<11|T[24]>>>21,Se=T[24]<<11|T[25]>>>21,hn=T[34]<<15|T[35]>>>17,Ue=T[35]<<15|T[34]>>>17,rt=T[45]<<29|T[44]>>>3,Ae=T[44]<<29|T[45]>>>3,H=T[6]<<28|T[7]>>>4,ie=T[7]<<28|T[6]>>>4,qr=T[17]<<23|T[16]>>>9,st=T[16]<<23|T[17]>>>9,fn=T[26]<<25|T[27]>>>7,De=T[27]<<25|T[26]>>>7,Zt=T[36]<<21|T[37]>>>11,ee=T[37]<<21|T[36]>>>11,Fe=T[47]<<24|T[46]>>>8,dn=T[46]<<24|T[47]>>>8,un=T[8]<<27|T[9]>>>5,Ne=T[9]<<27|T[8]>>>5,ae=T[18]<<20|T[19]>>>12,ce=T[19]<<20|T[18]>>>12,at=T[29]<<7|T[28]>>>25,xr=T[28]<<7|T[29]>>>25,Oe=T[38]<<8|T[39]>>>24,cn=T[39]<<8|T[38]>>>24,V=T[48]<<14|T[49]>>>18,R=T[49]<<14|T[48]>>>18,T[0]=F^~pe&ve,T[1]=ne^~Ee&Se,T[10]=H^~ae&me,T[11]=ie^~ce&et,T[20]=Te^~ke&fn,T[21]=an^~Ce&De,T[30]=un^~Pe&Le,T[31]=Ne^~ln&Be,T[40]=$e^~qr&at,T[41]=qe^~st&xr,T[2]=pe^~ve&Zt,T[3]=Ee^~Se&ee,T[12]=ae^~me&we,T[13]=ce^~et&be,T[22]=ke^~fn&Oe,T[23]=Ce^~De&cn,T[32]=Pe^~Le&hn,T[33]=ln^~Be&Ue,T[42]=qr^~at&wr,T[43]=st^~xr&Er,T[4]=ve^~Zt&V,T[5]=Se^~ee&R,T[14]=me^~we&rt,T[15]=et^~be&Ae,T[24]=fn^~Oe&Ie,T[25]=De^~cn&Re,T[34]=Le^~hn&Fe,T[35]=Be^~Ue&dn,T[44]=at^~wr&_r,T[45]=xr^~Er&Ar,T[6]=Zt^~V&F,T[7]=ee^~R&ne,T[16]=we^~rt&H,T[17]=be^~Ae&ie,T[26]=Oe^~Ie&Te,T[27]=cn^~Re&an,T[36]=hn^~Fe&un,T[37]=Ue^~dn&Ne,T[46]=wr^~_r&$e,T[47]=Er^~Ar&qe,T[8]=V^~F&pe,T[9]=R^~ne&Ee,T[18]=rt^~H&ae,T[19]=Ae^~ie&ce,T[28]=Ie^~Te&ke,T[29]=Re^~an&Ce,T[38]=Fe^~un&Pe,T[39]=dn^~Ne&ln,T[48]=_r^~$e&qr,T[49]=Ar^~qe&st,T[0]^=k[N],T[1]^=k[N+1]};if(a)tu.exports=c;else{for(x=0;x<h.length;++x)i[h[x]]=c[h[x]];f&&define(function(){return c})}})()});var wi=de((fF,i3)=>{i3.exports=n3;function n3(n,t){if(!n)throw new Error(t||"Assertion failed")}n3.equal=function(t,r,i){if(t!=r)throw new Error(i||"Assertion failed: "+t+" != "+r)}});var Ja=de((cF,Ld)=>{typeof Object.create=="function"?Ld.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Ld.exports=function(t,r){if(r){t.super_=r;var i=function(){};i.prototype=r.prototype,t.prototype=new i,t.prototype.constructor=t}}});var en=de(lt=>{"use strict";var K7=wi(),j7=Ja();lt.inherits=j7;function G7(n,t){return(n.charCodeAt(t)&64512)!==55296||t<0||t+1>=n.length?!1:(n.charCodeAt(t+1)&64512)===56320}function J7(n,t){if(Array.isArray(n))return n.slice();if(!n)return[];var r=[];if(typeof n=="string")if(t){if(t==="hex")for(n=n.replace(/[^a-z0-9]+/ig,""),n.length%2!==0&&(n="0"+n),o=0;o<n.length;o+=2)r.push(parseInt(n[o]+n[o+1],16))}else for(var i=0,o=0;o<n.length;o++){var s=n.charCodeAt(o);s<128?r[i++]=s:s<2048?(r[i++]=s>>6|192,r[i++]=s&63|128):G7(n,o)?(s=65536+((s&1023)<<10)+(n.charCodeAt(++o)&1023),r[i++]=s>>18|240,r[i++]=s>>12&63|128,r[i++]=s>>6&63|128,r[i++]=s&63|128):(r[i++]=s>>12|224,r[i++]=s>>6&63|128,r[i++]=s&63|128)}else for(o=0;o<n.length;o++)r[o]=n[o]|0;return r}lt.toArray=J7;function V7(n){for(var t="",r=0;r<n.length;r++)t+=s3(n[r].toString(16));return t}lt.toHex=V7;function o3(n){var t=n>>>24|n>>>8&65280|n<<8&16711680|(n&255)<<24;return t>>>0}lt.htonl=o3;function W7(n,t){for(var r="",i=0;i<n.length;i++){var o=n[i];t==="little"&&(o=o3(o)),r+=a3(o.toString(16))}return r}lt.toHex32=W7;function s3(n){return n.length===1?"0"+n:n}lt.zero2=s3;function a3(n){return n.length===7?"0"+n:n.length===6?"00"+n:n.length===5?"000"+n:n.length===4?"0000"+n:n.length===3?"00000"+n:n.length===2?"000000"+n:n.length===1?"0000000"+n:n}lt.zero8=a3;function Y7(n,t,r,i){var o=r-t;K7(o%4===0);for(var s=new Array(o/4),a=0,f=t;a<s.length;a++,f+=4){var l;i==="big"?l=n[f]<<24|n[f+1]<<16|n[f+2]<<8|n[f+3]:l=n[f+3]<<24|n[f+2]<<16|n[f+1]<<8|n[f],s[a]=l>>>0}return s}lt.join32=Y7;function X7(n,t){for(var r=new Array(n.length*4),i=0,o=0;i<n.length;i++,o+=4){var s=n[i];t==="big"?(r[o]=s>>>24,r[o+1]=s>>>16&255,r[o+2]=s>>>8&255,r[o+3]=s&255):(r[o+3]=s>>>24,r[o+2]=s>>>16&255,r[o+1]=s>>>8&255,r[o]=s&255)}return r}lt.split32=X7;function Z7(n,t){return n>>>t|n<<32-t}lt.rotr32=Z7;function Q7(n,t){return n<<t|n>>>32-t}lt.rotl32=Q7;function e_(n,t){return n+t>>>0}lt.sum32=e_;function t_(n,t,r){return n+t+r>>>0}lt.sum32_3=t_;function r_(n,t,r,i){return n+t+r+i>>>0}lt.sum32_4=r_;function n_(n,t,r,i,o){return n+t+r+i+o>>>0}lt.sum32_5=n_;function i_(n,t,r,i){var o=n[t],s=n[t+1],a=i+s>>>0,f=(a<i?1:0)+r+o;n[t]=f>>>0,n[t+1]=a}lt.sum64=i_;function o_(n,t,r,i){var o=t+i>>>0,s=(o<t?1:0)+n+r;return s>>>0}lt.sum64_hi=o_;function s_(n,t,r,i){var o=t+i;return o>>>0}lt.sum64_lo=s_;function a_(n,t,r,i,o,s,a,f){var l=0,p=t;p=p+i>>>0,l+=p<t?1:0,p=p+s>>>0,l+=p<s?1:0,p=p+f>>>0,l+=p<f?1:0;var b=n+r+o+a+l;return b>>>0}lt.sum64_4_hi=a_;function f_(n,t,r,i,o,s,a,f){var l=t+i+s+f;return l>>>0}lt.sum64_4_lo=f_;function c_(n,t,r,i,o,s,a,f,l,p){var b=0,v=t;v=v+i>>>0,b+=v<t?1:0,v=v+s>>>0,b+=v<s?1:0,v=v+f>>>0,b+=v<f?1:0,v=v+p>>>0,b+=v<p?1:0;var C=n+r+o+a+l+b;return C>>>0}lt.sum64_5_hi=c_;function u_(n,t,r,i,o,s,a,f,l,p){var b=t+i+s+f+p;return b>>>0}lt.sum64_5_lo=u_;function l_(n,t,r){var i=t<<32-r|n>>>r;return i>>>0}lt.rotr64_hi=l_;function h_(n,t,r){var i=n<<32-r|t>>>r;return i>>>0}lt.rotr64_lo=h_;function d_(n,t,r){return n>>>r}lt.shr64_hi=d_;function p_(n,t,r){var i=n<<32-r|t>>>r;return i>>>0}lt.shr64_lo=p_});var Ds=de(c3=>{"use strict";var f3=en(),m_=wi();function ru(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}c3.BlockHash=ru;ru.prototype.update=function(t,r){if(t=f3.toArray(t,r),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){t=this.pending;var i=t.length%this._delta8;this.pending=t.slice(t.length-i,t.length),this.pending.length===0&&(this.pending=null),t=f3.join32(t,0,t.length-i,this.endian);for(var o=0;o<t.length;o+=this._delta32)this._update(t,o,o+this._delta32)}return this};ru.prototype.digest=function(t){return this.update(this._pad()),m_(this.pending===null),this._digest(t)};ru.prototype._pad=function(){var t=this.pendingTotal,r=this._delta8,i=r-(t+this.padLength)%r,o=new Array(i+this.padLength);o[0]=128;for(var s=1;s<i;s++)o[s]=0;if(t<<=3,this.endian==="big"){for(var a=8;a<this.padLength;a++)o[s++]=0;o[s++]=0,o[s++]=0,o[s++]=0,o[s++]=0,o[s++]=t>>>24&255,o[s++]=t>>>16&255,o[s++]=t>>>8&255,o[s++]=t&255}else for(o[s++]=t&255,o[s++]=t>>>8&255,o[s++]=t>>>16&255,o[s++]=t>>>24&255,o[s++]=0,o[s++]=0,o[s++]=0,o[s++]=0,a=8;a<this.padLength;a++)o[s++]=0;return o}});var Bd=de(Wn=>{"use strict";var b_=en(),xn=b_.rotr32;function g_(n,t,r,i){if(n===0)return u3(t,r,i);if(n===1||n===3)return h3(t,r,i);if(n===2)return l3(t,r,i)}Wn.ft_1=g_;function u3(n,t,r){return n&t^~n&r}Wn.ch32=u3;function l3(n,t,r){return n&t^n&r^t&r}Wn.maj32=l3;function h3(n,t,r){return n^t^r}Wn.p32=h3;function y_(n){return xn(n,2)^xn(n,13)^xn(n,22)}Wn.s0_256=y_;function v_(n){return xn(n,6)^xn(n,11)^xn(n,25)}Wn.s1_256=v_;function x_(n){return xn(n,7)^xn(n,18)^n>>>3}Wn.g0_256=x_;function w_(n){return xn(n,17)^xn(n,19)^n>>>10}Wn.g1_256=w_});var m3=de((dF,p3)=>{"use strict";var Os=en(),E_=Ds(),__=Bd(),Ud=Os.rotl32,Va=Os.sum32,A_=Os.sum32_5,S_=__.ft_1,d3=E_.BlockHash,M_=[1518500249,1859775393,2400959708,3395469782];function wn(){if(!(this instanceof wn))return new wn;d3.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Os.inherits(wn,d3);p3.exports=wn;wn.blockSize=512;wn.outSize=160;wn.hmacStrength=80;wn.padLength=64;wn.prototype._update=function(t,r){for(var i=this.W,o=0;o<16;o++)i[o]=t[r+o];for(;o<i.length;o++)i[o]=Ud(i[o-3]^i[o-8]^i[o-14]^i[o-16],1);var s=this.h[0],a=this.h[1],f=this.h[2],l=this.h[3],p=this.h[4];for(o=0;o<i.length;o++){var b=~~(o/20),v=A_(Ud(s,5),S_(b,a,f,l),p,i[o],M_[b]);p=l,l=f,f=Ud(a,30),a=s,s=v}this.h[0]=Va(this.h[0],s),this.h[1]=Va(this.h[1],a),this.h[2]=Va(this.h[2],f),this.h[3]=Va(this.h[3],l),this.h[4]=Va(this.h[4],p)};wn.prototype._digest=function(t){return t==="hex"?Os.toHex32(this.h,"big"):Os.split32(this.h,"big")}});var Fd=de((pF,g3)=>{"use strict";var Is=en(),T_=Ds(),Rs=Bd(),k_=wi(),tn=Is.sum32,C_=Is.sum32_4,D_=Is.sum32_5,O_=Rs.ch32,I_=Rs.maj32,R_=Rs.s0_256,N_=Rs.s1_256,P_=Rs.g0_256,L_=Rs.g1_256,b3=T_.BlockHash,B_=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function En(){if(!(this instanceof En))return new En;b3.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=B_,this.W=new Array(64)}Is.inherits(En,b3);g3.exports=En;En.blockSize=512;En.outSize=256;En.hmacStrength=192;En.padLength=64;En.prototype._update=function(t,r){for(var i=this.W,o=0;o<16;o++)i[o]=t[r+o];for(;o<i.length;o++)i[o]=C_(L_(i[o-2]),i[o-7],P_(i[o-15]),i[o-16]);var s=this.h[0],a=this.h[1],f=this.h[2],l=this.h[3],p=this.h[4],b=this.h[5],v=this.h[6],C=this.h[7];for(k_(this.k.length===i.length),o=0;o<i.length;o++){var D=D_(C,N_(p),O_(p,b,v),this.k[o],i[o]),S=tn(R_(s),I_(s,a,f));C=v,v=b,b=p,p=tn(l,D),l=f,f=a,a=s,s=tn(D,S)}this.h[0]=tn(this.h[0],s),this.h[1]=tn(this.h[1],a),this.h[2]=tn(this.h[2],f),this.h[3]=tn(this.h[3],l),this.h[4]=tn(this.h[4],p),this.h[5]=tn(this.h[5],b),this.h[6]=tn(this.h[6],v),this.h[7]=tn(this.h[7],C)};En.prototype._digest=function(t){return t==="hex"?Is.toHex32(this.h,"big"):Is.split32(this.h,"big")}});var x3=de((mF,v3)=>{"use strict";var $d=en(),y3=Fd();function Yn(){if(!(this instanceof Yn))return new Yn;y3.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}$d.inherits(Yn,y3);v3.exports=Yn;Yn.blockSize=512;Yn.outSize=224;Yn.hmacStrength=192;Yn.padLength=64;Yn.prototype._digest=function(t){return t==="hex"?$d.toHex32(this.h.slice(0,7),"big"):$d.split32(this.h.slice(0,7),"big")}});var Hd=de((bF,A3)=>{"use strict";var ir=en(),U_=Ds(),F_=wi(),_n=ir.rotr64_hi,An=ir.rotr64_lo,w3=ir.shr64_hi,E3=ir.shr64_lo,Ei=ir.sum64,qd=ir.sum64_hi,zd=ir.sum64_lo,$_=ir.sum64_4_hi,q_=ir.sum64_4_lo,z_=ir.sum64_5_hi,H_=ir.sum64_5_lo,_3=U_.BlockHash,K_=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function rn(){if(!(this instanceof rn))return new rn;_3.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=K_,this.W=new Array(160)}ir.inherits(rn,_3);A3.exports=rn;rn.blockSize=1024;rn.outSize=512;rn.hmacStrength=192;rn.padLength=128;rn.prototype._prepareBlock=function(t,r){for(var i=this.W,o=0;o<32;o++)i[o]=t[r+o];for(;o<i.length;o+=2){var s=tA(i[o-4],i[o-3]),a=rA(i[o-4],i[o-3]),f=i[o-14],l=i[o-13],p=Q_(i[o-30],i[o-29]),b=eA(i[o-30],i[o-29]),v=i[o-32],C=i[o-31];i[o]=$_(s,a,f,l,p,b,v,C),i[o+1]=q_(s,a,f,l,p,b,v,C)}};rn.prototype._update=function(t,r){this._prepareBlock(t,r);var i=this.W,o=this.h[0],s=this.h[1],a=this.h[2],f=this.h[3],l=this.h[4],p=this.h[5],b=this.h[6],v=this.h[7],C=this.h[8],D=this.h[9],S=this.h[10],k=this.h[11],$=this.h[12],O=this.h[13],q=this.h[14],j=this.h[15];F_(this.k.length===i.length);for(var z=0;z<i.length;z+=2){var X=q,B=j,L=X_(C,D),U=Z_(C,D),te=j_(C,D,S,k,$,O),_=G_(C,D,S,k,$,O),u=this.k[z],g=this.k[z+1],d=i[z],c=i[z+1],h=z_(X,B,L,U,te,_,u,g,d,c),x=H_(X,B,L,U,te,_,u,g,d,c);X=W_(o,s),B=Y_(o,s),L=J_(o,s,a,f,l,p),U=V_(o,s,a,f,l,p);var E=qd(X,B,L,U),w=zd(X,B,L,U);q=$,j=O,$=S,O=k,S=C,k=D,C=qd(b,v,h,x),D=zd(v,v,h,x),b=l,v=p,l=a,p=f,a=o,f=s,o=qd(h,x,E,w),s=zd(h,x,E,w)}Ei(this.h,0,o,s),Ei(this.h,2,a,f),Ei(this.h,4,l,p),Ei(this.h,6,b,v),Ei(this.h,8,C,D),Ei(this.h,10,S,k),Ei(this.h,12,$,O),Ei(this.h,14,q,j)};rn.prototype._digest=function(t){return t==="hex"?ir.toHex32(this.h,"big"):ir.split32(this.h,"big")};function j_(n,t,r,i,o){var s=n&r^~n&o;return s<0&&(s+=4294967296),s}function G_(n,t,r,i,o,s){var a=t&i^~t&s;return a<0&&(a+=4294967296),a}function J_(n,t,r,i,o){var s=n&r^n&o^r&o;return s<0&&(s+=4294967296),s}function V_(n,t,r,i,o,s){var a=t&i^t&s^i&s;return a<0&&(a+=4294967296),a}function W_(n,t){var r=_n(n,t,28),i=_n(t,n,2),o=_n(t,n,7),s=r^i^o;return s<0&&(s+=4294967296),s}function Y_(n,t){var r=An(n,t,28),i=An(t,n,2),o=An(t,n,7),s=r^i^o;return s<0&&(s+=4294967296),s}function X_(n,t){var r=_n(n,t,14),i=_n(n,t,18),o=_n(t,n,9),s=r^i^o;return s<0&&(s+=4294967296),s}function Z_(n,t){var r=An(n,t,14),i=An(n,t,18),o=An(t,n,9),s=r^i^o;return s<0&&(s+=4294967296),s}function Q_(n,t){var r=_n(n,t,1),i=_n(n,t,8),o=w3(n,t,7),s=r^i^o;return s<0&&(s+=4294967296),s}function eA(n,t){var r=An(n,t,1),i=An(n,t,8),o=E3(n,t,7),s=r^i^o;return s<0&&(s+=4294967296),s}function tA(n,t){var r=_n(n,t,19),i=_n(t,n,29),o=w3(n,t,6),s=r^i^o;return s<0&&(s+=4294967296),s}function rA(n,t){var r=An(n,t,19),i=An(t,n,29),o=E3(n,t,6),s=r^i^o;return s<0&&(s+=4294967296),s}});var T3=de((gF,M3)=>{"use strict";var Kd=en(),S3=Hd();function Xn(){if(!(this instanceof Xn))return new Xn;S3.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Kd.inherits(Xn,S3);M3.exports=Xn;Xn.blockSize=1024;Xn.outSize=384;Xn.hmacStrength=192;Xn.padLength=128;Xn.prototype._digest=function(t){return t==="hex"?Kd.toHex32(this.h.slice(0,12),"big"):Kd.split32(this.h.slice(0,12),"big")}});var k3=de(Ns=>{"use strict";Ns.sha1=m3();Ns.sha224=x3();Ns.sha256=Fd();Ns.sha384=T3();Ns.sha512=Hd()});var N3=de(R3=>{"use strict";var Mo=en(),nA=Ds(),nu=Mo.rotl32,C3=Mo.sum32,Wa=Mo.sum32_3,D3=Mo.sum32_4,I3=nA.BlockHash;function Sn(){if(!(this instanceof Sn))return new Sn;I3.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Mo.inherits(Sn,I3);R3.ripemd160=Sn;Sn.blockSize=512;Sn.outSize=160;Sn.hmacStrength=192;Sn.padLength=64;Sn.prototype._update=function(t,r){for(var i=this.h[0],o=this.h[1],s=this.h[2],a=this.h[3],f=this.h[4],l=i,p=o,b=s,v=a,C=f,D=0;D<80;D++){var S=C3(nu(D3(i,O3(D,o,s,a),t[sA[D]+r],iA(D)),fA[D]),f);i=f,f=a,a=nu(s,10),s=o,o=S,S=C3(nu(D3(l,O3(79-D,p,b,v),t[aA[D]+r],oA(D)),cA[D]),C),l=C,C=v,v=nu(b,10),b=p,p=S}S=Wa(this.h[1],s,v),this.h[1]=Wa(this.h[2],a,C),this.h[2]=Wa(this.h[3],f,l),this.h[3]=Wa(this.h[4],i,p),this.h[4]=Wa(this.h[0],o,b),this.h[0]=S};Sn.prototype._digest=function(t){return t==="hex"?Mo.toHex32(this.h,"little"):Mo.split32(this.h,"little")};function O3(n,t,r,i){return n<=15?t^r^i:n<=31?t&r|~t&i:n<=47?(t|~r)^i:n<=63?t&i|r&~i:t^(r|~i)}function iA(n){return n<=15?0:n<=31?1518500249:n<=47?1859775393:n<=63?2400959708:2840853838}function oA(n){return n<=15?1352829926:n<=31?1548603684:n<=47?1836072691:n<=63?2053994217:0}var sA=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],aA=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],fA=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],cA=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]});var L3=de((xF,P3)=>{"use strict";var uA=en(),lA=wi();function Ps(n,t,r){if(!(this instanceof Ps))return new Ps(n,t,r);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(uA.toArray(t,r))}P3.exports=Ps;Ps.prototype._init=function(t){t.length>this.blockSize&&(t=new this.Hash().update(t).digest()),lA(t.length<=this.blockSize);for(var r=t.length;r<this.blockSize;r++)t.push(0);for(r=0;r<t.length;r++)t[r]^=54;for(this.inner=new this.Hash().update(t),r=0;r<t.length;r++)t[r]^=106;this.outer=new this.Hash().update(t)};Ps.prototype.update=function(t,r){return this.inner.update(t,r),this};Ps.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}});var Ya=de(B3=>{var Lt=B3;Lt.utils=en();Lt.common=Ds();Lt.sha=k3();Lt.ripemd=N3();Lt.hmac=L3();Lt.sha1=Lt.sha.sha1;Lt.sha256=Lt.sha.sha256;Lt.sha224=Lt.sha.sha224;Lt.sha384=Lt.sha.sha384;Lt.sha512=Lt.sha.sha512;Lt.ripemd160=Lt.ripemd.ripemd160});var Z3=de(Zn=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});var Us=vo(),Bs=Or();Zn.DIGEST_LENGTH=64;Zn.BLOCK_SIZE=128;var X3=function(){function n(){this.digestLength=Zn.DIGEST_LENGTH,this.blockSize=Zn.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return n.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},n.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},n.prototype.clean=function(){Bs.wipe(this._buffer),Bs.wipe(this._tempHi),Bs.wipe(this._tempLo),this.reset()},n.prototype.update=function(t,r){if(r===void 0&&(r=t.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var i=0;if(this._bytesHashed+=r,this._bufferLength>0){for(;this._bufferLength<Zn.BLOCK_SIZE&&r>0;)this._buffer[this._bufferLength++]=t[i++],r--;this._bufferLength===this.blockSize&&(r0(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(r>=this.blockSize&&(i=r0(this._tempHi,this._tempLo,this._stateHi,this._stateLo,t,i,r),r%=this.blockSize);r>0;)this._buffer[this._bufferLength++]=t[i++],r--;return this},n.prototype.finish=function(t){if(!this._finished){var r=this._bytesHashed,i=this._bufferLength,o=r/536870912|0,s=r<<3,a=r%128<112?128:256;this._buffer[i]=128;for(var f=i+1;f<a-8;f++)this._buffer[f]=0;Us.writeUint32BE(o,this._buffer,a-8),Us.writeUint32BE(s,this._buffer,a-4),r0(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,a),this._finished=!0}for(var f=0;f<this.digestLength/8;f++)Us.writeUint32BE(this._stateHi[f],t,f*8),Us.writeUint32BE(this._stateLo[f],t,f*8+4);return this},n.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},n.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},n.prototype.restoreState=function(t){return this._stateHi.set(t.stateHi),this._stateLo.set(t.stateLo),this._bufferLength=t.bufferLength,t.buffer&&this._buffer.set(t.buffer),this._bytesHashed=t.bytesHashed,this._finished=!1,this},n.prototype.cleanSavedState=function(t){Bs.wipe(t.stateHi),Bs.wipe(t.stateLo),t.buffer&&Bs.wipe(t.buffer),t.bufferLength=0,t.bytesHashed=0},n}();Zn.SHA512=X3;var Y3=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function r0(n,t,r,i,o,s,a){for(var f=r[0],l=r[1],p=r[2],b=r[3],v=r[4],C=r[5],D=r[6],S=r[7],k=i[0],$=i[1],O=i[2],q=i[3],j=i[4],z=i[5],X=i[6],B=i[7],L,U,te,_,u,g,d,c;a>=128;){for(var h=0;h<16;h++){var x=8*h+s;n[h]=Us.readUint32BE(o,x),t[h]=Us.readUint32BE(o,x+4)}for(var h=0;h<80;h++){var E=f,w=l,m=p,A=b,I=v,y=C,M=D,re=S,T=k,K=$,Y=O,N=q,P=j,G=z,J=X,Q=B;if(L=S,U=B,u=U&65535,g=U>>>16,d=L&65535,c=L>>>16,L=(v>>>14|j<<32-14)^(v>>>18|j<<32-18)^(j>>>41-32|v<<32-(41-32)),U=(j>>>14|v<<32-14)^(j>>>18|v<<32-18)^(v>>>41-32|j<<32-(41-32)),u+=U&65535,g+=U>>>16,d+=L&65535,c+=L>>>16,L=v&C^~v&D,U=j&z^~j&X,u+=U&65535,g+=U>>>16,d+=L&65535,c+=L>>>16,L=Y3[h*2],U=Y3[h*2+1],u+=U&65535,g+=U>>>16,d+=L&65535,c+=L>>>16,L=n[h%16],U=t[h%16],u+=U&65535,g+=U>>>16,d+=L&65535,c+=L>>>16,g+=u>>>16,d+=g>>>16,c+=d>>>16,te=d&65535|c<<16,_=u&65535|g<<16,L=te,U=_,u=U&65535,g=U>>>16,d=L&65535,c=L>>>16,L=(f>>>28|k<<32-28)^(k>>>34-32|f<<32-(34-32))^(k>>>39-32|f<<32-(39-32)),U=(k>>>28|f<<32-28)^(f>>>34-32|k<<32-(34-32))^(f>>>39-32|k<<32-(39-32)),u+=U&65535,g+=U>>>16,d+=L&65535,c+=L>>>16,L=f&l^f&p^l&p,U=k&$^k&O^$&O,u+=U&65535,g+=U>>>16,d+=L&65535,c+=L>>>16,g+=u>>>16,d+=g>>>16,c+=d>>>16,re=d&65535|c<<16,Q=u&65535|g<<16,L=A,U=N,u=U&65535,g=U>>>16,d=L&65535,c=L>>>16,L=te,U=_,u+=U&65535,g+=U>>>16,d+=L&65535,c+=L>>>16,g+=u>>>16,d+=g>>>16,c+=d>>>16,A=d&65535|c<<16,N=u&65535|g<<16,l=E,p=w,b=m,v=A,C=I,D=y,S=M,f=re,$=T,O=K,q=Y,j=N,z=P,X=G,B=J,k=Q,h%16===15)for(var x=0;x<16;x++)L=n[x],U=t[x],u=U&65535,g=U>>>16,d=L&65535,c=L>>>16,L=n[(x+9)%16],U=t[(x+9)%16],u+=U&65535,g+=U>>>16,d+=L&65535,c+=L>>>16,te=n[(x+1)%16],_=t[(x+1)%16],L=(te>>>1|_<<32-1)^(te>>>8|_<<32-8)^te>>>7,U=(_>>>1|te<<32-1)^(_>>>8|te<<32-8)^(_>>>7|te<<32-7),u+=U&65535,g+=U>>>16,d+=L&65535,c+=L>>>16,te=n[(x+14)%16],_=t[(x+14)%16],L=(te>>>19|_<<32-19)^(_>>>61-32|te<<32-(61-32))^te>>>6,U=(_>>>19|te<<32-19)^(te>>>61-32|_<<32-(61-32))^(_>>>6|te<<32-6),u+=U&65535,g+=U>>>16,d+=L&65535,c+=L>>>16,g+=u>>>16,d+=g>>>16,c+=d>>>16,n[x]=d&65535|c<<16,t[x]=u&65535|g<<16}L=f,U=k,u=U&65535,g=U>>>16,d=L&65535,c=L>>>16,L=r[0],U=i[0],u+=U&65535,g+=U>>>16,d+=L&65535,c+=L>>>16,g+=u>>>16,d+=g>>>16,c+=d>>>16,r[0]=f=d&65535|c<<16,i[0]=k=u&65535|g<<16,L=l,U=$,u=U&65535,g=U>>>16,d=L&65535,c=L>>>16,L=r[1],U=i[1],u+=U&65535,g+=U>>>16,d+=L&65535,c+=L>>>16,g+=u>>>16,d+=g>>>16,c+=d>>>16,r[1]=l=d&65535|c<<16,i[1]=$=u&65535|g<<16,L=p,U=O,u=U&65535,g=U>>>16,d=L&65535,c=L>>>16,L=r[2],U=i[2],u+=U&65535,g+=U>>>16,d+=L&65535,c+=L>>>16,g+=u>>>16,d+=g>>>16,c+=d>>>16,r[2]=p=d&65535|c<<16,i[2]=O=u&65535|g<<16,L=b,U=q,u=U&65535,g=U>>>16,d=L&65535,c=L>>>16,L=r[3],U=i[3],u+=U&65535,g+=U>>>16,d+=L&65535,c+=L>>>16,g+=u>>>16,d+=g>>>16,c+=d>>>16,r[3]=b=d&65535|c<<16,i[3]=q=u&65535|g<<16,L=v,U=j,u=U&65535,g=U>>>16,d=L&65535,c=L>>>16,L=r[4],U=i[4],u+=U&65535,g+=U>>>16,d+=L&65535,c+=L>>>16,g+=u>>>16,d+=g>>>16,c+=d>>>16,r[4]=v=d&65535|c<<16,i[4]=j=u&65535|g<<16,L=C,U=z,u=U&65535,g=U>>>16,d=L&65535,c=L>>>16,L=r[5],U=i[5],u+=U&65535,g+=U>>>16,d+=L&65535,c+=L>>>16,g+=u>>>16,d+=g>>>16,c+=d>>>16,r[5]=C=d&65535|c<<16,i[5]=z=u&65535|g<<16,L=D,U=X,u=U&65535,g=U>>>16,d=L&65535,c=L>>>16,L=r[6],U=i[6],u+=U&65535,g+=U>>>16,d+=L&65535,c+=L>>>16,g+=u>>>16,d+=g>>>16,c+=d>>>16,r[6]=D=d&65535|c<<16,i[6]=X=u&65535|g<<16,L=S,U=B,u=U&65535,g=U>>>16,d=L&65535,c=L>>>16,L=r[7],U=i[7],u+=U&65535,g+=U>>>16,d+=L&65535,c+=L>>>16,g+=u>>>16,d+=g>>>16,c+=d>>>16,r[7]=S=d&65535|c<<16,i[7]=B=u&65535|g<<16,s+=128,a-=128}return s}function wA(n){var t=new X3;t.update(n);var r=t.digest();return t.clean(),r}Zn.hash=wA});var uu=de(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.convertSecretKeyToX25519=ot.convertPublicKeyToX25519=ot.verify=ot.sign=ot.extractPublicKeyFromSecretKey=ot.generateKeyPair=ot.generateKeyPairFromSeed=ot.SEED_LENGTH=ot.SECRET_KEY_LENGTH=ot.PUBLIC_KEY_LENGTH=ot.SIGNATURE_LENGTH=void 0;var EA=Kn(),Xa=Z3(),ny=Or();ot.SIGNATURE_LENGTH=64;ot.PUBLIC_KEY_LENGTH=32;ot.SECRET_KEY_LENGTH=64;ot.SEED_LENGTH=32;function _e(n){let t=new Float64Array(16);if(n)for(let r=0;r<n.length;r++)t[r]=n[r];return t}var _A=new Uint8Array(32);_A[0]=9;var o0=_e(),Fs=_e([1]),AA=_e([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),SA=_e([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),Q3=_e([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),ey=_e([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),MA=_e([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Si(n,t){for(let r=0;r<16;r++)n[r]=t[r]|0}function n0(n){let t=1;for(let r=0;r<16;r++){let i=n[r]+t+65535;t=Math.floor(i/65536),n[r]=i-t*65536}n[0]+=t-1+37*(t-1)}function iy(n,t,r){let i=~(r-1);for(let o=0;o<16;o++){let s=i&(n[o]^t[o]);n[o]^=s,t[o]^=s}}function Za(n,t){let r=_e(),i=_e();for(let o=0;o<16;o++)i[o]=t[o];n0(i),n0(i),n0(i);for(let o=0;o<2;o++){r[0]=i[0]-65517;for(let a=1;a<15;a++)r[a]=i[a]-65535-(r[a-1]>>16&1),r[a-1]&=65535;r[15]=i[15]-32767-(r[14]>>16&1);let s=r[15]>>16&1;r[14]&=65535,iy(i,r,1-s)}for(let o=0;o<16;o++)n[2*o]=i[o]&255,n[2*o+1]=i[o]>>8}function oy(n,t){let r=0;for(let i=0;i<32;i++)r|=n[i]^t[i];return(1&r-1>>>8)-1}function ty(n,t){let r=new Uint8Array(32),i=new Uint8Array(32);return Za(r,n),Za(i,t),oy(r,i)}function sy(n){let t=new Uint8Array(32);return Za(t,n),t[0]&1}function TA(n,t){for(let r=0;r<16;r++)n[r]=t[2*r]+(t[2*r+1]<<8);n[15]&=32767}function ko(n,t,r){for(let i=0;i<16;i++)n[i]=t[i]+r[i]}function Do(n,t,r){for(let i=0;i<16;i++)n[i]=t[i]-r[i]}function ct(n,t,r){let i,o,s=0,a=0,f=0,l=0,p=0,b=0,v=0,C=0,D=0,S=0,k=0,$=0,O=0,q=0,j=0,z=0,X=0,B=0,L=0,U=0,te=0,_=0,u=0,g=0,d=0,c=0,h=0,x=0,E=0,w=0,m=0,A=r[0],I=r[1],y=r[2],M=r[3],re=r[4],T=r[5],K=r[6],Y=r[7],N=r[8],P=r[9],G=r[10],J=r[11],Q=r[12],le=r[13],oe=r[14],W=r[15];i=t[0],s+=i*A,a+=i*I,f+=i*y,l+=i*M,p+=i*re,b+=i*T,v+=i*K,C+=i*Y,D+=i*N,S+=i*P,k+=i*G,$+=i*J,O+=i*Q,q+=i*le,j+=i*oe,z+=i*W,i=t[1],a+=i*A,f+=i*I,l+=i*y,p+=i*M,b+=i*re,v+=i*T,C+=i*K,D+=i*Y,S+=i*N,k+=i*P,$+=i*G,O+=i*J,q+=i*Q,j+=i*le,z+=i*oe,X+=i*W,i=t[2],f+=i*A,l+=i*I,p+=i*y,b+=i*M,v+=i*re,C+=i*T,D+=i*K,S+=i*Y,k+=i*N,$+=i*P,O+=i*G,q+=i*J,j+=i*Q,z+=i*le,X+=i*oe,B+=i*W,i=t[3],l+=i*A,p+=i*I,b+=i*y,v+=i*M,C+=i*re,D+=i*T,S+=i*K,k+=i*Y,$+=i*N,O+=i*P,q+=i*G,j+=i*J,z+=i*Q,X+=i*le,B+=i*oe,L+=i*W,i=t[4],p+=i*A,b+=i*I,v+=i*y,C+=i*M,D+=i*re,S+=i*T,k+=i*K,$+=i*Y,O+=i*N,q+=i*P,j+=i*G,z+=i*J,X+=i*Q,B+=i*le,L+=i*oe,U+=i*W,i=t[5],b+=i*A,v+=i*I,C+=i*y,D+=i*M,S+=i*re,k+=i*T,$+=i*K,O+=i*Y,q+=i*N,j+=i*P,z+=i*G,X+=i*J,B+=i*Q,L+=i*le,U+=i*oe,te+=i*W,i=t[6],v+=i*A,C+=i*I,D+=i*y,S+=i*M,k+=i*re,$+=i*T,O+=i*K,q+=i*Y,j+=i*N,z+=i*P,X+=i*G,B+=i*J,L+=i*Q,U+=i*le,te+=i*oe,_+=i*W,i=t[7],C+=i*A,D+=i*I,S+=i*y,k+=i*M,$+=i*re,O+=i*T,q+=i*K,j+=i*Y,z+=i*N,X+=i*P,B+=i*G,L+=i*J,U+=i*Q,te+=i*le,_+=i*oe,u+=i*W,i=t[8],D+=i*A,S+=i*I,k+=i*y,$+=i*M,O+=i*re,q+=i*T,j+=i*K,z+=i*Y,X+=i*N,B+=i*P,L+=i*G,U+=i*J,te+=i*Q,_+=i*le,u+=i*oe,g+=i*W,i=t[9],S+=i*A,k+=i*I,$+=i*y,O+=i*M,q+=i*re,j+=i*T,z+=i*K,X+=i*Y,B+=i*N,L+=i*P,U+=i*G,te+=i*J,_+=i*Q,u+=i*le,g+=i*oe,d+=i*W,i=t[10],k+=i*A,$+=i*I,O+=i*y,q+=i*M,j+=i*re,z+=i*T,X+=i*K,B+=i*Y,L+=i*N,U+=i*P,te+=i*G,_+=i*J,u+=i*Q,g+=i*le,d+=i*oe,c+=i*W,i=t[11],$+=i*A,O+=i*I,q+=i*y,j+=i*M,z+=i*re,X+=i*T,B+=i*K,L+=i*Y,U+=i*N,te+=i*P,_+=i*G,u+=i*J,g+=i*Q,d+=i*le,c+=i*oe,h+=i*W,i=t[12],O+=i*A,q+=i*I,j+=i*y,z+=i*M,X+=i*re,B+=i*T,L+=i*K,U+=i*Y,te+=i*N,_+=i*P,u+=i*G,g+=i*J,d+=i*Q,c+=i*le,h+=i*oe,x+=i*W,i=t[13],q+=i*A,j+=i*I,z+=i*y,X+=i*M,B+=i*re,L+=i*T,U+=i*K,te+=i*Y,_+=i*N,u+=i*P,g+=i*G,d+=i*J,c+=i*Q,h+=i*le,x+=i*oe,E+=i*W,i=t[14],j+=i*A,z+=i*I,X+=i*y,B+=i*M,L+=i*re,U+=i*T,te+=i*K,_+=i*Y,u+=i*N,g+=i*P,d+=i*G,c+=i*J,h+=i*Q,x+=i*le,E+=i*oe,w+=i*W,i=t[15],z+=i*A,X+=i*I,B+=i*y,L+=i*M,U+=i*re,te+=i*T,_+=i*K,u+=i*Y,g+=i*N,d+=i*P,c+=i*G,h+=i*J,x+=i*Q,E+=i*le,w+=i*oe,m+=i*W,s+=38*X,a+=38*B,f+=38*L,l+=38*U,p+=38*te,b+=38*_,v+=38*u,C+=38*g,D+=38*d,S+=38*c,k+=38*h,$+=38*x,O+=38*E,q+=38*w,j+=38*m,o=1,i=s+o+65535,o=Math.floor(i/65536),s=i-o*65536,i=a+o+65535,o=Math.floor(i/65536),a=i-o*65536,i=f+o+65535,o=Math.floor(i/65536),f=i-o*65536,i=l+o+65535,o=Math.floor(i/65536),l=i-o*65536,i=p+o+65535,o=Math.floor(i/65536),p=i-o*65536,i=b+o+65535,o=Math.floor(i/65536),b=i-o*65536,i=v+o+65535,o=Math.floor(i/65536),v=i-o*65536,i=C+o+65535,o=Math.floor(i/65536),C=i-o*65536,i=D+o+65535,o=Math.floor(i/65536),D=i-o*65536,i=S+o+65535,o=Math.floor(i/65536),S=i-o*65536,i=k+o+65535,o=Math.floor(i/65536),k=i-o*65536,i=$+o+65535,o=Math.floor(i/65536),$=i-o*65536,i=O+o+65535,o=Math.floor(i/65536),O=i-o*65536,i=q+o+65535,o=Math.floor(i/65536),q=i-o*65536,i=j+o+65535,o=Math.floor(i/65536),j=i-o*65536,i=z+o+65535,o=Math.floor(i/65536),z=i-o*65536,s+=o-1+37*(o-1),o=1,i=s+o+65535,o=Math.floor(i/65536),s=i-o*65536,i=a+o+65535,o=Math.floor(i/65536),a=i-o*65536,i=f+o+65535,o=Math.floor(i/65536),f=i-o*65536,i=l+o+65535,o=Math.floor(i/65536),l=i-o*65536,i=p+o+65535,o=Math.floor(i/65536),p=i-o*65536,i=b+o+65535,o=Math.floor(i/65536),b=i-o*65536,i=v+o+65535,o=Math.floor(i/65536),v=i-o*65536,i=C+o+65535,o=Math.floor(i/65536),C=i-o*65536,i=D+o+65535,o=Math.floor(i/65536),D=i-o*65536,i=S+o+65535,o=Math.floor(i/65536),S=i-o*65536,i=k+o+65535,o=Math.floor(i/65536),k=i-o*65536,i=$+o+65535,o=Math.floor(i/65536),$=i-o*65536,i=O+o+65535,o=Math.floor(i/65536),O=i-o*65536,i=q+o+65535,o=Math.floor(i/65536),q=i-o*65536,i=j+o+65535,o=Math.floor(i/65536),j=i-o*65536,i=z+o+65535,o=Math.floor(i/65536),z=i-o*65536,s+=o-1+37*(o-1),n[0]=s,n[1]=a,n[2]=f,n[3]=l,n[4]=p,n[5]=b,n[6]=v,n[7]=C,n[8]=D,n[9]=S,n[10]=k,n[11]=$,n[12]=O,n[13]=q,n[14]=j,n[15]=z}function Co(n,t){ct(n,t,t)}function ay(n,t){let r=_e(),i;for(i=0;i<16;i++)r[i]=t[i];for(i=253;i>=0;i--)Co(r,r),i!==2&&i!==4&&ct(r,r,t);for(i=0;i<16;i++)n[i]=r[i]}function kA(n,t){let r=_e(),i;for(i=0;i<16;i++)r[i]=t[i];for(i=250;i>=0;i--)Co(r,r),i!==1&&ct(r,r,t);for(i=0;i<16;i++)n[i]=r[i]}function s0(n,t){let r=_e(),i=_e(),o=_e(),s=_e(),a=_e(),f=_e(),l=_e(),p=_e(),b=_e();Do(r,n[1],n[0]),Do(b,t[1],t[0]),ct(r,r,b),ko(i,n[0],n[1]),ko(b,t[0],t[1]),ct(i,i,b),ct(o,n[3],t[3]),ct(o,o,SA),ct(s,n[2],t[2]),ko(s,s,s),Do(a,i,r),Do(f,s,o),ko(l,s,o),ko(p,i,r),ct(n[0],a,f),ct(n[1],p,l),ct(n[2],l,f),ct(n[3],a,p)}function ry(n,t,r){for(let i=0;i<4;i++)iy(n[i],t[i],r)}function f0(n,t){let r=_e(),i=_e(),o=_e();ay(o,t[2]),ct(r,t[0],o),ct(i,t[1],o),Za(n,i),n[31]^=sy(r)<<7}function fy(n,t,r){Si(n[0],o0),Si(n[1],Fs),Si(n[2],Fs),Si(n[3],o0);for(let i=255;i>=0;--i){let o=r[i/8|0]>>(i&7)&1;ry(n,t,o),s0(t,n),s0(n,n),ry(n,t,o)}}function c0(n,t){let r=[_e(),_e(),_e(),_e()];Si(r[0],Q3),Si(r[1],ey),Si(r[2],Fs),ct(r[3],Q3,ey),fy(n,r,t)}function cy(n){if(n.length!==ot.SEED_LENGTH)throw new Error(`ed25519: seed must be ${ot.SEED_LENGTH} bytes`);let t=(0,Xa.hash)(n);t[0]&=248,t[31]&=127,t[31]|=64;let r=new Uint8Array(32),i=[_e(),_e(),_e(),_e()];c0(i,t),f0(r,i);let o=new Uint8Array(64);return o.set(n),o.set(r,32),{publicKey:r,secretKey:o}}ot.generateKeyPairFromSeed=cy;function CA(n){let t=(0,EA.randomBytes)(32,n),r=cy(t);return(0,ny.wipe)(t),r}ot.generateKeyPair=CA;function DA(n){if(n.length!==ot.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${ot.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(n.subarray(32))}ot.extractPublicKeyFromSecretKey=DA;var i0=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function uy(n,t){let r,i,o,s;for(i=63;i>=32;--i){for(r=0,o=i-32,s=i-12;o<s;++o)t[o]+=r-16*t[i]*i0[o-(i-32)],r=Math.floor((t[o]+128)/256),t[o]-=r*256;t[o]+=r,t[i]=0}for(r=0,o=0;o<32;o++)t[o]+=r-(t[31]>>4)*i0[o],r=t[o]>>8,t[o]&=255;for(o=0;o<32;o++)t[o]-=r*i0[o];for(i=0;i<32;i++)t[i+1]+=t[i]>>8,n[i]=t[i]&255}function a0(n){let t=new Float64Array(64);for(let r=0;r<64;r++)t[r]=n[r];for(let r=0;r<64;r++)n[r]=0;uy(n,t)}function OA(n,t){let r=new Float64Array(64),i=[_e(),_e(),_e(),_e()],o=(0,Xa.hash)(n.subarray(0,32));o[0]&=248,o[31]&=127,o[31]|=64;let s=new Uint8Array(64);s.set(o.subarray(32),32);let a=new Xa.SHA512;a.update(s.subarray(32)),a.update(t);let f=a.digest();a.clean(),a0(f),c0(i,f),f0(s,i),a.reset(),a.update(s.subarray(0,32)),a.update(n.subarray(32)),a.update(t);let l=a.digest();a0(l);for(let p=0;p<32;p++)r[p]=f[p];for(let p=0;p<32;p++)for(let b=0;b<32;b++)r[p+b]+=l[p]*o[b];return uy(s.subarray(32),r),s}ot.sign=OA;function ly(n,t){let r=_e(),i=_e(),o=_e(),s=_e(),a=_e(),f=_e(),l=_e();return Si(n[2],Fs),TA(n[1],t),Co(o,n[1]),ct(s,o,AA),Do(o,o,n[2]),ko(s,n[2],s),Co(a,s),Co(f,a),ct(l,f,a),ct(r,l,o),ct(r,r,s),kA(r,r),ct(r,r,o),ct(r,r,s),ct(r,r,s),ct(n[0],r,s),Co(i,n[0]),ct(i,i,s),ty(i,o)&&ct(n[0],n[0],MA),Co(i,n[0]),ct(i,i,s),ty(i,o)?-1:(sy(n[0])===t[31]>>7&&Do(n[0],o0,n[0]),ct(n[3],n[0],n[1]),0)}function IA(n,t,r){let i=new Uint8Array(32),o=[_e(),_e(),_e(),_e()],s=[_e(),_e(),_e(),_e()];if(r.length!==ot.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${ot.SIGNATURE_LENGTH} bytes`);if(ly(s,n))return!1;let a=new Xa.SHA512;a.update(r.subarray(0,32)),a.update(n),a.update(t);let f=a.digest();return a0(f),fy(o,s,f),c0(s,r.subarray(32)),s0(o,s),f0(i,o),!oy(r,i)}ot.verify=IA;function RA(n){let t=[_e(),_e(),_e(),_e()];if(ly(t,n))throw new Error("Ed25519: invalid public key");let r=_e(),i=_e(),o=t[1];ko(r,Fs,o),Do(i,Fs,o),ay(i,i),ct(r,r,i);let s=new Uint8Array(32);return Za(s,r),s}ot.convertPublicKeyToX25519=RA;function NA(n){let t=(0,Xa.hash)(n.subarray(0,32));t[0]&=248,t[31]&=127,t[31]|=64;let r=new Uint8Array(t.subarray(0,32));return(0,ny.wipe)(t),r}ot.convertSecretKeyToX25519=NA});var _y=de((T$,Ey)=>{"use strict";function lS(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<n.length;i++){var o=n.charAt(i),s=o.charCodeAt(0);if(t[s]!==255)throw new TypeError(o+" is ambiguous");t[s]=i}var a=n.length,f=n.charAt(0),l=Math.log(a)/Math.log(256),p=Math.log(256)/Math.log(a);function b(D){if(D instanceof Uint8Array||(ArrayBuffer.isView(D)?D=new Uint8Array(D.buffer,D.byteOffset,D.byteLength):Array.isArray(D)&&(D=Uint8Array.from(D))),!(D instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(D.length===0)return"";for(var S=0,k=0,$=0,O=D.length;$!==O&&D[$]===0;)$++,S++;for(var q=(O-$)*p+1>>>0,j=new Uint8Array(q);$!==O;){for(var z=D[$],X=0,B=q-1;(z!==0||X<k)&&B!==-1;B--,X++)z+=256*j[B]>>>0,j[B]=z%a>>>0,z=z/a>>>0;if(z!==0)throw new Error("Non-zero carry");k=X,$++}for(var L=q-k;L!==q&&j[L]===0;)L++;for(var U=f.repeat(S);L<q;++L)U+=n.charAt(j[L]);return U}function v(D){if(typeof D!="string")throw new TypeError("Expected String");if(D.length===0)return new Uint8Array;var S=0;if(D[S]!==" "){for(var k=0,$=0;D[S]===f;)k++,S++;for(var O=(D.length-S)*l+1>>>0,q=new Uint8Array(O);D[S];){var j=t[D.charCodeAt(S)];if(j===255)return;for(var z=0,X=O-1;(j!==0||z<$)&&X!==-1;X--,z++)j+=a*q[X]>>>0,q[X]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");$=z,S++}if(D[S]!==" "){for(var B=O-$;B!==O&&q[B]===0;)B++;for(var L=new Uint8Array(k+(O-B)),U=k;B!==O;)L[U++]=q[B++];return L}}}function C(D){var S=v(D);if(S)return S;throw new Error("Non-base"+a+" character")}return{encode:b,decodeUnsafe:v,decode:C}}Ey.exports=lS});var wu=de((k$,Ay)=>{"use strict";var hS=new TextDecoder,dS=n=>hS.decode(n),pS=new TextEncoder,mS=n=>pS.encode(n);function bS(n,t){let r=new Uint8Array(t),i=0;for(let o of n)r.set(o,i),i+=o.length;return r}Ay.exports={decodeText:dS,encodeText:mS,concat:bS}});var My=de((C$,Sy)=>{"use strict";var{encodeText:gS}=wu(),w0=class{constructor(t,r,i,o){this.name=t,this.code=r,this.codeBuf=gS(this.code),this.alphabet=o,this.codec=i(o)}encode(t){return this.codec.encode(t)}decode(t){for(let r of t)if(this.alphabet&&this.alphabet.indexOf(r)<0)throw new Error(`invalid character '${r}' in '${t}'`);return this.codec.decode(t)}};Sy.exports=w0});var ky=de((D$,Ty)=>{"use strict";var yS=(n,t,r)=>{let i={};for(let p=0;p<t.length;++p)i[t[p]]=p;let o=n.length;for(;n[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),a=0,f=0,l=0;for(let p=0;p<o;++p){let b=i[n[p]];if(b===void 0)throw new SyntaxError("Invalid character "+n[p]);f=f<<r|b,a+=r,a>=8&&(a-=8,s[l++]=255&f>>a)}if(a>=r||255&f<<8-a)throw new SyntaxError("Unexpected end of data");return s},vS=(n,t,r)=>{let i=t[t.length-1]==="=",o=(1<<r)-1,s="",a=0,f=0;for(let l=0;l<n.length;++l)for(f=f<<8|n[l],a+=8;a>r;)a-=r,s+=t[o&f>>a];if(a&&(s+=t[o&f<<r-a]),i)for(;s.length*r&7;)s+="=";return s},xS=n=>t=>({encode(r){return vS(r,t,n)},decode(r){return yS(r,t,n)}});Ty.exports={rfc4648:xS}});var Iy=de((O$,Oy)=>{"use strict";var rf=_y(),wS=My(),{rfc4648:Ft}=ky(),{decodeText:ES,encodeText:_S}=wu(),AS=()=>({encode:ES,decode:_S}),Cy=[["identity","\0",AS,""],["base2","0",Ft(1),"01"],["base8","7",Ft(3),"01234567"],["base10","9",rf,"0123456789"],["base16","f",Ft(4),"0123456789abcdef"],["base16upper","F",Ft(4),"0123456789ABCDEF"],["base32hex","v",Ft(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",Ft(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",Ft(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",Ft(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",Ft(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",Ft(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",Ft(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",Ft(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",Ft(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",rf,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",rf,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",rf,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",rf,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",Ft(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",Ft(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",Ft(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",Ft(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],Dy=Cy.reduce((n,t)=>(n[t[0]]=new wS(t[0],t[1],t[2],t[3]),n),{}),SS=Cy.reduce((n,t)=>(n[t[1]]=Dy[t[0]],n),{});Oy.exports={names:Dy,codes:SS}});var Py=de((Qn,Ny)=>{"use strict";var zs=Iy(),{encodeText:MS,decodeText:Eu,concat:Ry}=wu();function TS(n,t){if(!t)throw new Error("requires an encoded Uint8Array");let{name:r,codeBuf:i}=No(n);return OS(r,t),Ry([i,t],i.length+t.length)}function kS(n,t){let r=No(n),i=MS(r.encode(t));return Ry([r.codeBuf,i],r.codeBuf.length+i.length)}function CS(n){n instanceof Uint8Array&&(n=Eu(n));let t=n[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(t)&&(n=n.toLowerCase()),No(n[0]).decode(n.substring(1))}function DS(n){if(n instanceof Uint8Array&&(n=Eu(n)),Object.prototype.toString.call(n)!=="[object String]")return!1;try{return No(n[0]).name}catch{return!1}}function OS(n,t){No(n).decode(Eu(t))}function No(n){if(Object.prototype.hasOwnProperty.call(zs.names,n))return zs.names[n];if(Object.prototype.hasOwnProperty.call(zs.codes,n))return zs.codes[n];throw new Error(`Unsupported encoding: ${n}`)}function IS(n){return n instanceof Uint8Array&&(n=Eu(n)),No(n[0])}Qn=Ny.exports=TS;Qn.encode=kS;Qn.decode=CS;Qn.isEncoded=DS;Qn.encoding=No;Qn.encodingFromData=IS;var RS=Object.freeze(zs.names),NS=Object.freeze(zs.codes);Qn.names=RS;Qn.codes=NS});var Fy=de((I$,Uy)=>{Uy.exports=By;var Ly=128,PS=127,LS=~PS,BS=Math.pow(2,31);function By(n,t,r){t=t||[],r=r||0;for(var i=r;n>=BS;)t[r++]=n&255|Ly,n/=128;for(;n&LS;)t[r++]=n&255|Ly,n>>>=7;return t[r]=n|0,By.bytes=r-i+1,t}});var zy=de((R$,qy)=>{qy.exports=E0;var US=128,$y=127;function E0(n,i){var r=0,i=i||0,o=0,s=i,a,f=n.length;do{if(s>=f)throw E0.bytes=0,new RangeError("Could not decode varint");a=n[s++],r+=o<28?(a&$y)<<o:(a&$y)*Math.pow(2,o),o+=7}while(a>=US);return E0.bytes=s-i,r}});var Ky=de((N$,Hy)=>{var FS=Math.pow(2,7),$S=Math.pow(2,14),qS=Math.pow(2,21),zS=Math.pow(2,28),HS=Math.pow(2,35),KS=Math.pow(2,42),jS=Math.pow(2,49),GS=Math.pow(2,56),JS=Math.pow(2,63);Hy.exports=function(n){return n<FS?1:n<$S?2:n<qS?3:n<zS?4:n<HS?5:n<KS?6:n<jS?7:n<GS?8:n<JS?9:10}});var Gy=de((P$,jy)=>{jy.exports={encode:Fy(),decode:zy(),encodingLength:Ky()}});var Vy=de((L$,Jy)=>{"use strict";var VS=Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082});Jy.exports={names:VS}});var tv=de((B$,ev)=>{"use strict";var Wy=Py(),Hs=Gy(),{names:nf}=Vy(),{toString:_u}=(Qo(),aa(D1)),{fromString:WS}=(ba(),aa(C1)),{concat:YS}=(Pl(),aa(d1)),Ks={};for(let n in nf){let t=n;Ks[nf[t]]=t}Object.freeze(Ks);function XS(n){if(!(n instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return _u(n,"base16")}function ZS(n){return WS(n,"base16")}function QS(n){if(!(n instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return _u(Wy.encode("base58btc",n)).slice(1)}function eM(n){let t=n instanceof Uint8Array?_u(n):n;return Wy.decode("z"+t)}function Yy(n){if(!(n instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");if(n.length<2)throw new Error("multihash too short. must be > 2 bytes.");let t=Hs.decode(n);if(!Zy(t))throw new Error(`multihash unknown function code: 0x${t.toString(16)}`);n=n.slice(Hs.decode.bytes);let r=Hs.decode(n);if(r<0)throw new Error(`multihash invalid length: ${r}`);if(n=n.slice(Hs.decode.bytes),n.length!==r)throw new Error(`multihash length inconsistent: 0x${_u(n,"base16")}`);return{code:t,name:Ks[t],length:r,digest:n}}function tM(n,t,r){if(!n||t===void 0)throw new Error("multihash encode requires at least two args: digest, code");let i=Xy(t);if(!(n instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(r==null&&(r=n.length),r&&n.length!==r)throw new Error("digest length should be equal to specified length.");let o=Hs.encode(i),s=Hs.encode(r);return YS([o,s,n],o.length+s.length+n.length)}function Xy(n){let t=n;if(typeof n=="string"){if(nf[n]===void 0)throw new Error(`Unrecognized hash function named: ${n}`);t=nf[n]}if(typeof t!="number")throw new Error(`Hash function code should be a number. Got: ${t}`);if(Ks[t]===void 0&&!_0(t))throw new Error(`Unrecognized function code: ${t}`);return t}function _0(n){return n>0&&n<16}function Zy(n){return!!(_0(n)||Ks[n])}function Qy(n){Yy(n)}function rM(n){return Qy(n),n.subarray(0,2)}ev.exports={names:nf,codes:Ks,toHexString:XS,fromHexString:ZS,toB58String:QS,fromB58String:eM,decode:Yy,encode:tM,coerceCode:Xy,isAppCode:_0,validate:Qy,prefix:rM,isValidCode:Zy}});var cv=de(Ti=>{"use strict";Object.defineProperty(Ti,"__esModule",{value:!0});var ku=vo(),Tu=Or();Ti.DIGEST_LENGTH=32;Ti.BLOCK_SIZE=64;var fv=function(){function n(){this.digestLength=Ti.DIGEST_LENGTH,this.blockSize=Ti.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return n.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},n.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},n.prototype.clean=function(){Tu.wipe(this._buffer),Tu.wipe(this._temp),this.reset()},n.prototype.update=function(t,r){if(r===void 0&&(r=t.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var i=0;if(this._bytesHashed+=r,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&r>0;)this._buffer[this._bufferLength++]=t[i++],r--;this._bufferLength===this.blockSize&&(S0(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(r>=this.blockSize&&(i=S0(this._temp,this._state,t,i,r),r%=this.blockSize);r>0;)this._buffer[this._bufferLength++]=t[i++],r--;return this},n.prototype.finish=function(t){if(!this._finished){var r=this._bytesHashed,i=this._bufferLength,o=r/536870912|0,s=r<<3,a=r%64<56?64:128;this._buffer[i]=128;for(var f=i+1;f<a-8;f++)this._buffer[f]=0;ku.writeUint32BE(o,this._buffer,a-8),ku.writeUint32BE(s,this._buffer,a-4),S0(this._temp,this._state,this._buffer,0,a),this._finished=!0}for(var f=0;f<this.digestLength/4;f++)ku.writeUint32BE(this._state[f],t,f*4);return this},n.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},n.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},n.prototype.restoreState=function(t){return this._state.set(t.state),this._bufferLength=t.bufferLength,t.buffer&&this._buffer.set(t.buffer),this._bytesHashed=t.bytesHashed,this._finished=!1,this},n.prototype.cleanSavedState=function(t){Tu.wipe(t.state),t.buffer&&Tu.wipe(t.buffer),t.bufferLength=0,t.bytesHashed=0},n}();Ti.SHA256=fv;var mM=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function S0(n,t,r,i,o){for(;o>=64;){for(var s=t[0],a=t[1],f=t[2],l=t[3],p=t[4],b=t[5],v=t[6],C=t[7],D=0;D<16;D++){var S=i+D*4;n[D]=ku.readUint32BE(r,S)}for(var D=16;D<64;D++){var k=n[D-2],$=(k>>>17|k<<32-17)^(k>>>19|k<<32-19)^k>>>10;k=n[D-15];var O=(k>>>7|k<<32-7)^(k>>>18|k<<32-18)^k>>>3;n[D]=($+n[D-7]|0)+(O+n[D-16]|0)}for(var D=0;D<64;D++){var $=(((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&b^~p&v)|0)+(C+(mM[D]+n[D]|0)|0)|0,O=((s>>>2|s<<32-2)^(s>>>13|s<<32-13)^(s>>>22|s<<32-22))+(s&a^s&f^a&f)|0;C=v,v=b,b=p,p=l+$|0,l=f,f=a,a=s,s=$+O|0}t[0]+=s,t[1]+=a,t[2]+=f,t[3]+=l,t[4]+=p,t[5]+=b,t[6]+=v,t[7]+=C,i+=64,o-=64}return i}function bM(n){var t=new fv;t.update(n);var r=t.digest();return t.clean(),r}Ti.hash=bM});var uv=de((gq,gM)=>{gM.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}});var Dn=de((lv,M0)=>{(function(n,t){"use strict";function r(_,u){if(!_)throw new Error(u||"Assertion failed")}function i(_,u){_.super_=u;var g=function(){};g.prototype=u.prototype,_.prototype=new g,_.prototype.constructor=_}function o(_,u,g){if(o.isBN(_))return _;this.negative=0,this.words=null,this.length=0,this.red=null,_!==null&&((u==="le"||u==="be")&&(g=u,u=10),this._init(_||0,u||10,g||"be"))}typeof n=="object"?n.exports=o:t.BN=o,o.BN=o,o.wordSize=26;var s;try{typeof window<"u"&&typeof window.Buffer<"u"?s=window.Buffer:s=Cd().Buffer}catch{}o.isBN=function(u){return u instanceof o?!0:u!==null&&typeof u=="object"&&u.constructor.wordSize===o.wordSize&&Array.isArray(u.words)},o.max=function(u,g){return u.cmp(g)>0?u:g},o.min=function(u,g){return u.cmp(g)<0?u:g},o.prototype._init=function(u,g,d){if(typeof u=="number")return this._initNumber(u,g,d);if(typeof u=="object")return this._initArray(u,g,d);g==="hex"&&(g=16),r(g===(g|0)&&g>=2&&g<=36),u=u.toString().replace(/\s+/g,"");var c=0;u[0]==="-"&&(c++,this.negative=1),c<u.length&&(g===16?this._parseHex(u,c,d):(this._parseBase(u,g,c),d==="le"&&this._initArray(this.toArray(),g,d)))},o.prototype._initNumber=function(u,g,d){u<0&&(this.negative=1,u=-u),u<67108864?(this.words=[u&67108863],this.length=1):u<4503599627370496?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(r(u<9007199254740992),this.words=[u&67108863,u/67108864&67108863,1],this.length=3),d==="le"&&this._initArray(this.toArray(),g,d)},o.prototype._initArray=function(u,g,d){if(r(typeof u.length=="number"),u.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3),this.words=new Array(this.length);for(var c=0;c<this.length;c++)this.words[c]=0;var h,x,E=0;if(d==="be")for(c=u.length-1,h=0;c>=0;c-=3)x=u[c]|u[c-1]<<8|u[c-2]<<16,this.words[h]|=x<<E&67108863,this.words[h+1]=x>>>26-E&67108863,E+=24,E>=26&&(E-=26,h++);else if(d==="le")for(c=0,h=0;c<u.length;c+=3)x=u[c]|u[c+1]<<8|u[c+2]<<16,this.words[h]|=x<<E&67108863,this.words[h+1]=x>>>26-E&67108863,E+=24,E>=26&&(E-=26,h++);return this.strip()};function a(_,u){var g=_.charCodeAt(u);return g>=65&&g<=70?g-55:g>=97&&g<=102?g-87:g-48&15}function f(_,u,g){var d=a(_,g);return g-1>=u&&(d|=a(_,g-1)<<4),d}o.prototype._parseHex=function(u,g,d){this.length=Math.ceil((u.length-g)/6),this.words=new Array(this.length);for(var c=0;c<this.length;c++)this.words[c]=0;var h=0,x=0,E;if(d==="be")for(c=u.length-1;c>=g;c-=2)E=f(u,g,c)<<h,this.words[x]|=E&67108863,h>=18?(h-=18,x+=1,this.words[x]|=E>>>26):h+=8;else{var w=u.length-g;for(c=w%2===0?g+1:g;c<u.length;c+=2)E=f(u,g,c)<<h,this.words[x]|=E&67108863,h>=18?(h-=18,x+=1,this.words[x]|=E>>>26):h+=8}this.strip()};function l(_,u,g,d){for(var c=0,h=Math.min(_.length,g),x=u;x<h;x++){var E=_.charCodeAt(x)-48;c*=d,E>=49?c+=E-49+10:E>=17?c+=E-17+10:c+=E}return c}o.prototype._parseBase=function(u,g,d){this.words=[0],this.length=1;for(var c=0,h=1;h<=67108863;h*=g)c++;c--,h=h/g|0;for(var x=u.length-d,E=x%c,w=Math.min(x,x-E)+d,m=0,A=d;A<w;A+=c)m=l(u,A,A+c,g),this.imuln(h),this.words[0]+m<67108864?this.words[0]+=m:this._iaddn(m);if(E!==0){var I=1;for(m=l(u,A,u.length,g),A=0;A<E;A++)I*=g;this.imuln(I),this.words[0]+m<67108864?this.words[0]+=m:this._iaddn(m)}this.strip()},o.prototype.copy=function(u){u.words=new Array(this.length);for(var g=0;g<this.length;g++)u.words[g]=this.words[g];u.length=this.length,u.negative=this.negative,u.red=this.red},o.prototype.clone=function(){var u=new o(null);return this.copy(u),u},o.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],b=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(u,g){u=u||10,g=g|0||1;var d;if(u===16||u==="hex"){d="";for(var c=0,h=0,x=0;x<this.length;x++){var E=this.words[x],w=((E<<c|h)&16777215).toString(16);h=E>>>24-c&16777215,h!==0||x!==this.length-1?d=p[6-w.length]+w+d:d=w+d,c+=2,c>=26&&(c-=26,x--)}for(h!==0&&(d=h.toString(16)+d);d.length%g!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}if(u===(u|0)&&u>=2&&u<=36){var m=b[u],A=v[u];d="";var I=this.clone();for(I.negative=0;!I.isZero();){var y=I.modn(A).toString(u);I=I.idivn(A),I.isZero()?d=y+d:d=p[m-y.length]+y+d}for(this.isZero()&&(d="0"+d);d.length%g!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var u=this.words[0];return this.length===2?u+=this.words[1]*67108864:this.length===3&&this.words[2]===1?u+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-u:u},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(u,g){return r(typeof s<"u"),this.toArrayLike(s,u,g)},o.prototype.toArray=function(u,g){return this.toArrayLike(Array,u,g)},o.prototype.toArrayLike=function(u,g,d){var c=this.byteLength(),h=d||Math.max(1,c);r(c<=h,"byte array longer than desired length"),r(h>0,"Requested array length <= 0"),this.strip();var x=g==="le",E=new u(h),w,m,A=this.clone();if(x){for(m=0;!A.isZero();m++)w=A.andln(255),A.iushrn(8),E[m]=w;for(;m<h;m++)E[m]=0}else{for(m=0;m<h-c;m++)E[m]=0;for(m=0;!A.isZero();m++)w=A.andln(255),A.iushrn(8),E[h-m-1]=w}return E},Math.clz32?o.prototype._countBits=function(u){return 32-Math.clz32(u)}:o.prototype._countBits=function(u){var g=u,d=0;return g>=4096&&(d+=13,g>>>=13),g>=64&&(d+=7,g>>>=7),g>=8&&(d+=4,g>>>=4),g>=2&&(d+=2,g>>>=2),d+g},o.prototype._zeroBits=function(u){if(u===0)return 26;var g=u,d=0;return g&8191||(d+=13,g>>>=13),g&127||(d+=7,g>>>=7),g&15||(d+=4,g>>>=4),g&3||(d+=2,g>>>=2),g&1||d++,d},o.prototype.bitLength=function(){var u=this.words[this.length-1],g=this._countBits(u);return(this.length-1)*26+g};function C(_){for(var u=new Array(_.bitLength()),g=0;g<u.length;g++){var d=g/26|0,c=g%26;u[g]=(_.words[d]&1<<c)>>>c}return u}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,g=0;g<this.length;g++){var d=this._zeroBits(this.words[g]);if(u+=d,d!==26)break}return u},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(u){return this.negative!==0?this.abs().inotn(u).iaddn(1):this.clone()},o.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var g=0;g<u.length;g++)this.words[g]=this.words[g]|u.words[g];return this.strip()},o.prototype.ior=function(u){return r((this.negative|u.negative)===0),this.iuor(u)},o.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)},o.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)},o.prototype.iuand=function(u){var g;this.length>u.length?g=u:g=this;for(var d=0;d<g.length;d++)this.words[d]=this.words[d]&u.words[d];return this.length=g.length,this.strip()},o.prototype.iand=function(u){return r((this.negative|u.negative)===0),this.iuand(u)},o.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)},o.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)},o.prototype.iuxor=function(u){var g,d;this.length>u.length?(g=this,d=u):(g=u,d=this);for(var c=0;c<d.length;c++)this.words[c]=g.words[c]^d.words[c];if(this!==g)for(;c<g.length;c++)this.words[c]=g.words[c];return this.length=g.length,this.strip()},o.prototype.ixor=function(u){return r((this.negative|u.negative)===0),this.iuxor(u)},o.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)},o.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)},o.prototype.inotn=function(u){r(typeof u=="number"&&u>=0);var g=Math.ceil(u/26)|0,d=u%26;this._expand(g),d>0&&g--;for(var c=0;c<g;c++)this.words[c]=~this.words[c]&67108863;return d>0&&(this.words[c]=~this.words[c]&67108863>>26-d),this.strip()},o.prototype.notn=function(u){return this.clone().inotn(u)},o.prototype.setn=function(u,g){r(typeof u=="number"&&u>=0);var d=u/26|0,c=u%26;return this._expand(d+1),g?this.words[d]=this.words[d]|1<<c:this.words[d]=this.words[d]&~(1<<c),this.strip()},o.prototype.iadd=function(u){var g;if(this.negative!==0&&u.negative===0)return this.negative=0,g=this.isub(u),this.negative^=1,this._normSign();if(this.negative===0&&u.negative!==0)return u.negative=0,g=this.isub(u),u.negative=1,g._normSign();var d,c;this.length>u.length?(d=this,c=u):(d=u,c=this);for(var h=0,x=0;x<c.length;x++)g=(d.words[x]|0)+(c.words[x]|0)+h,this.words[x]=g&67108863,h=g>>>26;for(;h!==0&&x<d.length;x++)g=(d.words[x]|0)+h,this.words[x]=g&67108863,h=g>>>26;if(this.length=d.length,h!==0)this.words[this.length]=h,this.length++;else if(d!==this)for(;x<d.length;x++)this.words[x]=d.words[x];return this},o.prototype.add=function(u){var g;return u.negative!==0&&this.negative===0?(u.negative=0,g=this.sub(u),u.negative^=1,g):u.negative===0&&this.negative!==0?(this.negative=0,g=u.sub(this),this.negative=1,g):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)},o.prototype.isub=function(u){if(u.negative!==0){u.negative=0;var g=this.iadd(u);return u.negative=1,g._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();var d=this.cmp(u);if(d===0)return this.negative=0,this.length=1,this.words[0]=0,this;var c,h;d>0?(c=this,h=u):(c=u,h=this);for(var x=0,E=0;E<h.length;E++)g=(c.words[E]|0)-(h.words[E]|0)+x,x=g>>26,this.words[E]=g&67108863;for(;x!==0&&E<c.length;E++)g=(c.words[E]|0)+x,x=g>>26,this.words[E]=g&67108863;if(x===0&&E<c.length&&c!==this)for(;E<c.length;E++)this.words[E]=c.words[E];return this.length=Math.max(this.length,E),c!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(u){return this.clone().isub(u)};function D(_,u,g){g.negative=u.negative^_.negative;var d=_.length+u.length|0;g.length=d,d=d-1|0;var c=_.words[0]|0,h=u.words[0]|0,x=c*h,E=x&67108863,w=x/67108864|0;g.words[0]=E;for(var m=1;m<d;m++){for(var A=w>>>26,I=w&67108863,y=Math.min(m,u.length-1),M=Math.max(0,m-_.length+1);M<=y;M++){var re=m-M|0;c=_.words[re]|0,h=u.words[M]|0,x=c*h+I,A+=x/67108864|0,I=x&67108863}g.words[m]=I|0,w=A|0}return w!==0?g.words[m]=w|0:g.length--,g.strip()}var S=function(u,g,d){var c=u.words,h=g.words,x=d.words,E=0,w,m,A,I=c[0]|0,y=I&8191,M=I>>>13,re=c[1]|0,T=re&8191,K=re>>>13,Y=c[2]|0,N=Y&8191,P=Y>>>13,G=c[3]|0,J=G&8191,Q=G>>>13,le=c[4]|0,oe=le&8191,W=le>>>13,he=c[5]|0,Z=he&8191,se=he>>>13,F=c[6]|0,ne=F&8191,pe=F>>>13,Ee=c[7]|0,ve=Ee&8191,Se=Ee>>>13,Zt=c[8]|0,ee=Zt&8191,V=Zt>>>13,R=c[9]|0,H=R&8191,ie=R>>>13,ae=h[0]|0,ce=ae&8191,me=ae>>>13,et=h[1]|0,we=et&8191,be=et>>>13,rt=h[2]|0,Ae=rt&8191,Te=rt>>>13,an=h[3]|0,ke=an&8191,Ce=an>>>13,fn=h[4]|0,De=fn&8191,Oe=fn>>>13,cn=h[5]|0,Ie=cn&8191,Re=cn>>>13,un=h[6]|0,Ne=un&8191,Pe=un>>>13,ln=h[7]|0,Le=ln&8191,Be=ln>>>13,hn=h[8]|0,Ue=hn&8191,Fe=hn>>>13,dn=h[9]|0,$e=dn&8191,qe=dn>>>13;d.negative=u.negative^g.negative,d.length=19,w=Math.imul(y,ce),m=Math.imul(y,me),m=m+Math.imul(M,ce)|0,A=Math.imul(M,me);var qr=(E+w|0)+((m&8191)<<13)|0;E=(A+(m>>>13)|0)+(qr>>>26)|0,qr&=67108863,w=Math.imul(T,ce),m=Math.imul(T,me),m=m+Math.imul(K,ce)|0,A=Math.imul(K,me),w=w+Math.imul(y,we)|0,m=m+Math.imul(y,be)|0,m=m+Math.imul(M,we)|0,A=A+Math.imul(M,be)|0;var st=(E+w|0)+((m&8191)<<13)|0;E=(A+(m>>>13)|0)+(st>>>26)|0,st&=67108863,w=Math.imul(N,ce),m=Math.imul(N,me),m=m+Math.imul(P,ce)|0,A=Math.imul(P,me),w=w+Math.imul(T,we)|0,m=m+Math.imul(T,be)|0,m=m+Math.imul(K,we)|0,A=A+Math.imul(K,be)|0,w=w+Math.imul(y,Ae)|0,m=m+Math.imul(y,Te)|0,m=m+Math.imul(M,Ae)|0,A=A+Math.imul(M,Te)|0;var at=(E+w|0)+((m&8191)<<13)|0;E=(A+(m>>>13)|0)+(at>>>26)|0,at&=67108863,w=Math.imul(J,ce),m=Math.imul(J,me),m=m+Math.imul(Q,ce)|0,A=Math.imul(Q,me),w=w+Math.imul(N,we)|0,m=m+Math.imul(N,be)|0,m=m+Math.imul(P,we)|0,A=A+Math.imul(P,be)|0,w=w+Math.imul(T,Ae)|0,m=m+Math.imul(T,Te)|0,m=m+Math.imul(K,Ae)|0,A=A+Math.imul(K,Te)|0,w=w+Math.imul(y,ke)|0,m=m+Math.imul(y,Ce)|0,m=m+Math.imul(M,ke)|0,A=A+Math.imul(M,Ce)|0;var xr=(E+w|0)+((m&8191)<<13)|0;E=(A+(m>>>13)|0)+(xr>>>26)|0,xr&=67108863,w=Math.imul(oe,ce),m=Math.imul(oe,me),m=m+Math.imul(W,ce)|0,A=Math.imul(W,me),w=w+Math.imul(J,we)|0,m=m+Math.imul(J,be)|0,m=m+Math.imul(Q,we)|0,A=A+Math.imul(Q,be)|0,w=w+Math.imul(N,Ae)|0,m=m+Math.imul(N,Te)|0,m=m+Math.imul(P,Ae)|0,A=A+Math.imul(P,Te)|0,w=w+Math.imul(T,ke)|0,m=m+Math.imul(T,Ce)|0,m=m+Math.imul(K,ke)|0,A=A+Math.imul(K,Ce)|0,w=w+Math.imul(y,De)|0,m=m+Math.imul(y,Oe)|0,m=m+Math.imul(M,De)|0,A=A+Math.imul(M,Oe)|0;var wr=(E+w|0)+((m&8191)<<13)|0;E=(A+(m>>>13)|0)+(wr>>>26)|0,wr&=67108863,w=Math.imul(Z,ce),m=Math.imul(Z,me),m=m+Math.imul(se,ce)|0,A=Math.imul(se,me),w=w+Math.imul(oe,we)|0,m=m+Math.imul(oe,be)|0,m=m+Math.imul(W,we)|0,A=A+Math.imul(W,be)|0,w=w+Math.imul(J,Ae)|0,m=m+Math.imul(J,Te)|0,m=m+Math.imul(Q,Ae)|0,A=A+Math.imul(Q,Te)|0,w=w+Math.imul(N,ke)|0,m=m+Math.imul(N,Ce)|0,m=m+Math.imul(P,ke)|0,A=A+Math.imul(P,Ce)|0,w=w+Math.imul(T,De)|0,m=m+Math.imul(T,Oe)|0,m=m+Math.imul(K,De)|0,A=A+Math.imul(K,Oe)|0,w=w+Math.imul(y,Ie)|0,m=m+Math.imul(y,Re)|0,m=m+Math.imul(M,Ie)|0,A=A+Math.imul(M,Re)|0;var Er=(E+w|0)+((m&8191)<<13)|0;E=(A+(m>>>13)|0)+(Er>>>26)|0,Er&=67108863,w=Math.imul(ne,ce),m=Math.imul(ne,me),m=m+Math.imul(pe,ce)|0,A=Math.imul(pe,me),w=w+Math.imul(Z,we)|0,m=m+Math.imul(Z,be)|0,m=m+Math.imul(se,we)|0,A=A+Math.imul(se,be)|0,w=w+Math.imul(oe,Ae)|0,m=m+Math.imul(oe,Te)|0,m=m+Math.imul(W,Ae)|0,A=A+Math.imul(W,Te)|0,w=w+Math.imul(J,ke)|0,m=m+Math.imul(J,Ce)|0,m=m+Math.imul(Q,ke)|0,A=A+Math.imul(Q,Ce)|0,w=w+Math.imul(N,De)|0,m=m+Math.imul(N,Oe)|0,m=m+Math.imul(P,De)|0,A=A+Math.imul(P,Oe)|0,w=w+Math.imul(T,Ie)|0,m=m+Math.imul(T,Re)|0,m=m+Math.imul(K,Ie)|0,A=A+Math.imul(K,Re)|0,w=w+Math.imul(y,Ne)|0,m=m+Math.imul(y,Pe)|0,m=m+Math.imul(M,Ne)|0,A=A+Math.imul(M,Pe)|0;var _r=(E+w|0)+((m&8191)<<13)|0;E=(A+(m>>>13)|0)+(_r>>>26)|0,_r&=67108863,w=Math.imul(ve,ce),m=Math.imul(ve,me),m=m+Math.imul(Se,ce)|0,A=Math.imul(Se,me),w=w+Math.imul(ne,we)|0,m=m+Math.imul(ne,be)|0,m=m+Math.imul(pe,we)|0,A=A+Math.imul(pe,be)|0,w=w+Math.imul(Z,Ae)|0,m=m+Math.imul(Z,Te)|0,m=m+Math.imul(se,Ae)|0,A=A+Math.imul(se,Te)|0,w=w+Math.imul(oe,ke)|0,m=m+Math.imul(oe,Ce)|0,m=m+Math.imul(W,ke)|0,A=A+Math.imul(W,Ce)|0,w=w+Math.imul(J,De)|0,m=m+Math.imul(J,Oe)|0,m=m+Math.imul(Q,De)|0,A=A+Math.imul(Q,Oe)|0,w=w+Math.imul(N,Ie)|0,m=m+Math.imul(N,Re)|0,m=m+Math.imul(P,Ie)|0,A=A+Math.imul(P,Re)|0,w=w+Math.imul(T,Ne)|0,m=m+Math.imul(T,Pe)|0,m=m+Math.imul(K,Ne)|0,A=A+Math.imul(K,Pe)|0,w=w+Math.imul(y,Le)|0,m=m+Math.imul(y,Be)|0,m=m+Math.imul(M,Le)|0,A=A+Math.imul(M,Be)|0;var Ar=(E+w|0)+((m&8191)<<13)|0;E=(A+(m>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,w=Math.imul(ee,ce),m=Math.imul(ee,me),m=m+Math.imul(V,ce)|0,A=Math.imul(V,me),w=w+Math.imul(ve,we)|0,m=m+Math.imul(ve,be)|0,m=m+Math.imul(Se,we)|0,A=A+Math.imul(Se,be)|0,w=w+Math.imul(ne,Ae)|0,m=m+Math.imul(ne,Te)|0,m=m+Math.imul(pe,Ae)|0,A=A+Math.imul(pe,Te)|0,w=w+Math.imul(Z,ke)|0,m=m+Math.imul(Z,Ce)|0,m=m+Math.imul(se,ke)|0,A=A+Math.imul(se,Ce)|0,w=w+Math.imul(oe,De)|0,m=m+Math.imul(oe,Oe)|0,m=m+Math.imul(W,De)|0,A=A+Math.imul(W,Oe)|0,w=w+Math.imul(J,Ie)|0,m=m+Math.imul(J,Re)|0,m=m+Math.imul(Q,Ie)|0,A=A+Math.imul(Q,Re)|0,w=w+Math.imul(N,Ne)|0,m=m+Math.imul(N,Pe)|0,m=m+Math.imul(P,Ne)|0,A=A+Math.imul(P,Pe)|0,w=w+Math.imul(T,Le)|0,m=m+Math.imul(T,Be)|0,m=m+Math.imul(K,Le)|0,A=A+Math.imul(K,Be)|0,w=w+Math.imul(y,Ue)|0,m=m+Math.imul(y,Fe)|0,m=m+Math.imul(M,Ue)|0,A=A+Math.imul(M,Fe)|0;var qi=(E+w|0)+((m&8191)<<13)|0;E=(A+(m>>>13)|0)+(qi>>>26)|0,qi&=67108863,w=Math.imul(H,ce),m=Math.imul(H,me),m=m+Math.imul(ie,ce)|0,A=Math.imul(ie,me),w=w+Math.imul(ee,we)|0,m=m+Math.imul(ee,be)|0,m=m+Math.imul(V,we)|0,A=A+Math.imul(V,be)|0,w=w+Math.imul(ve,Ae)|0,m=m+Math.imul(ve,Te)|0,m=m+Math.imul(Se,Ae)|0,A=A+Math.imul(Se,Te)|0,w=w+Math.imul(ne,ke)|0,m=m+Math.imul(ne,Ce)|0,m=m+Math.imul(pe,ke)|0,A=A+Math.imul(pe,Ce)|0,w=w+Math.imul(Z,De)|0,m=m+Math.imul(Z,Oe)|0,m=m+Math.imul(se,De)|0,A=A+Math.imul(se,Oe)|0,w=w+Math.imul(oe,Ie)|0,m=m+Math.imul(oe,Re)|0,m=m+Math.imul(W,Ie)|0,A=A+Math.imul(W,Re)|0,w=w+Math.imul(J,Ne)|0,m=m+Math.imul(J,Pe)|0,m=m+Math.imul(Q,Ne)|0,A=A+Math.imul(Q,Pe)|0,w=w+Math.imul(N,Le)|0,m=m+Math.imul(N,Be)|0,m=m+Math.imul(P,Le)|0,A=A+Math.imul(P,Be)|0,w=w+Math.imul(T,Ue)|0,m=m+Math.imul(T,Fe)|0,m=m+Math.imul(K,Ue)|0,A=A+Math.imul(K,Fe)|0,w=w+Math.imul(y,$e)|0,m=m+Math.imul(y,qe)|0,m=m+Math.imul(M,$e)|0,A=A+Math.imul(M,qe)|0;var zi=(E+w|0)+((m&8191)<<13)|0;E=(A+(m>>>13)|0)+(zi>>>26)|0,zi&=67108863,w=Math.imul(H,we),m=Math.imul(H,be),m=m+Math.imul(ie,we)|0,A=Math.imul(ie,be),w=w+Math.imul(ee,Ae)|0,m=m+Math.imul(ee,Te)|0,m=m+Math.imul(V,Ae)|0,A=A+Math.imul(V,Te)|0,w=w+Math.imul(ve,ke)|0,m=m+Math.imul(ve,Ce)|0,m=m+Math.imul(Se,ke)|0,A=A+Math.imul(Se,Ce)|0,w=w+Math.imul(ne,De)|0,m=m+Math.imul(ne,Oe)|0,m=m+Math.imul(pe,De)|0,A=A+Math.imul(pe,Oe)|0,w=w+Math.imul(Z,Ie)|0,m=m+Math.imul(Z,Re)|0,m=m+Math.imul(se,Ie)|0,A=A+Math.imul(se,Re)|0,w=w+Math.imul(oe,Ne)|0,m=m+Math.imul(oe,Pe)|0,m=m+Math.imul(W,Ne)|0,A=A+Math.imul(W,Pe)|0,w=w+Math.imul(J,Le)|0,m=m+Math.imul(J,Be)|0,m=m+Math.imul(Q,Le)|0,A=A+Math.imul(Q,Be)|0,w=w+Math.imul(N,Ue)|0,m=m+Math.imul(N,Fe)|0,m=m+Math.imul(P,Ue)|0,A=A+Math.imul(P,Fe)|0,w=w+Math.imul(T,$e)|0,m=m+Math.imul(T,qe)|0,m=m+Math.imul(K,$e)|0,A=A+Math.imul(K,qe)|0;var Hi=(E+w|0)+((m&8191)<<13)|0;E=(A+(m>>>13)|0)+(Hi>>>26)|0,Hi&=67108863,w=Math.imul(H,Ae),m=Math.imul(H,Te),m=m+Math.imul(ie,Ae)|0,A=Math.imul(ie,Te),w=w+Math.imul(ee,ke)|0,m=m+Math.imul(ee,Ce)|0,m=m+Math.imul(V,ke)|0,A=A+Math.imul(V,Ce)|0,w=w+Math.imul(ve,De)|0,m=m+Math.imul(ve,Oe)|0,m=m+Math.imul(Se,De)|0,A=A+Math.imul(Se,Oe)|0,w=w+Math.imul(ne,Ie)|0,m=m+Math.imul(ne,Re)|0,m=m+Math.imul(pe,Ie)|0,A=A+Math.imul(pe,Re)|0,w=w+Math.imul(Z,Ne)|0,m=m+Math.imul(Z,Pe)|0,m=m+Math.imul(se,Ne)|0,A=A+Math.imul(se,Pe)|0,w=w+Math.imul(oe,Le)|0,m=m+Math.imul(oe,Be)|0,m=m+Math.imul(W,Le)|0,A=A+Math.imul(W,Be)|0,w=w+Math.imul(J,Ue)|0,m=m+Math.imul(J,Fe)|0,m=m+Math.imul(Q,Ue)|0,A=A+Math.imul(Q,Fe)|0,w=w+Math.imul(N,$e)|0,m=m+Math.imul(N,qe)|0,m=m+Math.imul(P,$e)|0,A=A+Math.imul(P,qe)|0;var Ki=(E+w|0)+((m&8191)<<13)|0;E=(A+(m>>>13)|0)+(Ki>>>26)|0,Ki&=67108863,w=Math.imul(H,ke),m=Math.imul(H,Ce),m=m+Math.imul(ie,ke)|0,A=Math.imul(ie,Ce),w=w+Math.imul(ee,De)|0,m=m+Math.imul(ee,Oe)|0,m=m+Math.imul(V,De)|0,A=A+Math.imul(V,Oe)|0,w=w+Math.imul(ve,Ie)|0,m=m+Math.imul(ve,Re)|0,m=m+Math.imul(Se,Ie)|0,A=A+Math.imul(Se,Re)|0,w=w+Math.imul(ne,Ne)|0,m=m+Math.imul(ne,Pe)|0,m=m+Math.imul(pe,Ne)|0,A=A+Math.imul(pe,Pe)|0,w=w+Math.imul(Z,Le)|0,m=m+Math.imul(Z,Be)|0,m=m+Math.imul(se,Le)|0,A=A+Math.imul(se,Be)|0,w=w+Math.imul(oe,Ue)|0,m=m+Math.imul(oe,Fe)|0,m=m+Math.imul(W,Ue)|0,A=A+Math.imul(W,Fe)|0,w=w+Math.imul(J,$e)|0,m=m+Math.imul(J,qe)|0,m=m+Math.imul(Q,$e)|0,A=A+Math.imul(Q,qe)|0;var ji=(E+w|0)+((m&8191)<<13)|0;E=(A+(m>>>13)|0)+(ji>>>26)|0,ji&=67108863,w=Math.imul(H,De),m=Math.imul(H,Oe),m=m+Math.imul(ie,De)|0,A=Math.imul(ie,Oe),w=w+Math.imul(ee,Ie)|0,m=m+Math.imul(ee,Re)|0,m=m+Math.imul(V,Ie)|0,A=A+Math.imul(V,Re)|0,w=w+Math.imul(ve,Ne)|0,m=m+Math.imul(ve,Pe)|0,m=m+Math.imul(Se,Ne)|0,A=A+Math.imul(Se,Pe)|0,w=w+Math.imul(ne,Le)|0,m=m+Math.imul(ne,Be)|0,m=m+Math.imul(pe,Le)|0,A=A+Math.imul(pe,Be)|0,w=w+Math.imul(Z,Ue)|0,m=m+Math.imul(Z,Fe)|0,m=m+Math.imul(se,Ue)|0,A=A+Math.imul(se,Fe)|0,w=w+Math.imul(oe,$e)|0,m=m+Math.imul(oe,qe)|0,m=m+Math.imul(W,$e)|0,A=A+Math.imul(W,qe)|0;var Gi=(E+w|0)+((m&8191)<<13)|0;E=(A+(m>>>13)|0)+(Gi>>>26)|0,Gi&=67108863,w=Math.imul(H,Ie),m=Math.imul(H,Re),m=m+Math.imul(ie,Ie)|0,A=Math.imul(ie,Re),w=w+Math.imul(ee,Ne)|0,m=m+Math.imul(ee,Pe)|0,m=m+Math.imul(V,Ne)|0,A=A+Math.imul(V,Pe)|0,w=w+Math.imul(ve,Le)|0,m=m+Math.imul(ve,Be)|0,m=m+Math.imul(Se,Le)|0,A=A+Math.imul(Se,Be)|0,w=w+Math.imul(ne,Ue)|0,m=m+Math.imul(ne,Fe)|0,m=m+Math.imul(pe,Ue)|0,A=A+Math.imul(pe,Fe)|0,w=w+Math.imul(Z,$e)|0,m=m+Math.imul(Z,qe)|0,m=m+Math.imul(se,$e)|0,A=A+Math.imul(se,qe)|0;var Ji=(E+w|0)+((m&8191)<<13)|0;E=(A+(m>>>13)|0)+(Ji>>>26)|0,Ji&=67108863,w=Math.imul(H,Ne),m=Math.imul(H,Pe),m=m+Math.imul(ie,Ne)|0,A=Math.imul(ie,Pe),w=w+Math.imul(ee,Le)|0,m=m+Math.imul(ee,Be)|0,m=m+Math.imul(V,Le)|0,A=A+Math.imul(V,Be)|0,w=w+Math.imul(ve,Ue)|0,m=m+Math.imul(ve,Fe)|0,m=m+Math.imul(Se,Ue)|0,A=A+Math.imul(Se,Fe)|0,w=w+Math.imul(ne,$e)|0,m=m+Math.imul(ne,qe)|0,m=m+Math.imul(pe,$e)|0,A=A+Math.imul(pe,qe)|0;var Vi=(E+w|0)+((m&8191)<<13)|0;E=(A+(m>>>13)|0)+(Vi>>>26)|0,Vi&=67108863,w=Math.imul(H,Le),m=Math.imul(H,Be),m=m+Math.imul(ie,Le)|0,A=Math.imul(ie,Be),w=w+Math.imul(ee,Ue)|0,m=m+Math.imul(ee,Fe)|0,m=m+Math.imul(V,Ue)|0,A=A+Math.imul(V,Fe)|0,w=w+Math.imul(ve,$e)|0,m=m+Math.imul(ve,qe)|0,m=m+Math.imul(Se,$e)|0,A=A+Math.imul(Se,qe)|0;var Wi=(E+w|0)+((m&8191)<<13)|0;E=(A+(m>>>13)|0)+(Wi>>>26)|0,Wi&=67108863,w=Math.imul(H,Ue),m=Math.imul(H,Fe),m=m+Math.imul(ie,Ue)|0,A=Math.imul(ie,Fe),w=w+Math.imul(ee,$e)|0,m=m+Math.imul(ee,qe)|0,m=m+Math.imul(V,$e)|0,A=A+Math.imul(V,qe)|0;var Yi=(E+w|0)+((m&8191)<<13)|0;E=(A+(m>>>13)|0)+(Yi>>>26)|0,Yi&=67108863,w=Math.imul(H,$e),m=Math.imul(H,qe),m=m+Math.imul(ie,$e)|0,A=Math.imul(ie,qe);var Xi=(E+w|0)+((m&8191)<<13)|0;return E=(A+(m>>>13)|0)+(Xi>>>26)|0,Xi&=67108863,x[0]=qr,x[1]=st,x[2]=at,x[3]=xr,x[4]=wr,x[5]=Er,x[6]=_r,x[7]=Ar,x[8]=qi,x[9]=zi,x[10]=Hi,x[11]=Ki,x[12]=ji,x[13]=Gi,x[14]=Ji,x[15]=Vi,x[16]=Wi,x[17]=Yi,x[18]=Xi,E!==0&&(x[19]=E,d.length++),d};Math.imul||(S=D);function k(_,u,g){g.negative=u.negative^_.negative,g.length=_.length+u.length;for(var d=0,c=0,h=0;h<g.length-1;h++){var x=c;c=0;for(var E=d&67108863,w=Math.min(h,u.length-1),m=Math.max(0,h-_.length+1);m<=w;m++){var A=h-m,I=_.words[A]|0,y=u.words[m]|0,M=I*y,re=M&67108863;x=x+(M/67108864|0)|0,re=re+E|0,E=re&67108863,x=x+(re>>>26)|0,c+=x>>>26,x&=67108863}g.words[h]=E,d=x,x=c}return d!==0?g.words[h]=d:g.length--,g.strip()}function $(_,u,g){var d=new O;return d.mulp(_,u,g)}o.prototype.mulTo=function(u,g){var d,c=this.length+u.length;return this.length===10&&u.length===10?d=S(this,u,g):c<63?d=D(this,u,g):c<1024?d=k(this,u,g):d=$(this,u,g),d};function O(_,u){this.x=_,this.y=u}O.prototype.makeRBT=function(u){for(var g=new Array(u),d=o.prototype._countBits(u)-1,c=0;c<u;c++)g[c]=this.revBin(c,d,u);return g},O.prototype.revBin=function(u,g,d){if(u===0||u===d-1)return u;for(var c=0,h=0;h<g;h++)c|=(u&1)<<g-h-1,u>>=1;return c},O.prototype.permute=function(u,g,d,c,h,x){for(var E=0;E<x;E++)c[E]=g[u[E]],h[E]=d[u[E]]},O.prototype.transform=function(u,g,d,c,h,x){this.permute(x,u,g,d,c,h);for(var E=1;E<h;E<<=1)for(var w=E<<1,m=Math.cos(2*Math.PI/w),A=Math.sin(2*Math.PI/w),I=0;I<h;I+=w)for(var y=m,M=A,re=0;re<E;re++){var T=d[I+re],K=c[I+re],Y=d[I+re+E],N=c[I+re+E],P=y*Y-M*N;N=y*N+M*Y,Y=P,d[I+re]=T+Y,c[I+re]=K+N,d[I+re+E]=T-Y,c[I+re+E]=K-N,re!==w&&(P=m*y-A*M,M=m*M+A*y,y=P)}},O.prototype.guessLen13b=function(u,g){var d=Math.max(g,u)|1,c=d&1,h=0;for(d=d/2|0;d;d=d>>>1)h++;return 1<<h+1+c},O.prototype.conjugate=function(u,g,d){if(!(d<=1))for(var c=0;c<d/2;c++){var h=u[c];u[c]=u[d-c-1],u[d-c-1]=h,h=g[c],g[c]=-g[d-c-1],g[d-c-1]=-h}},O.prototype.normalize13b=function(u,g){for(var d=0,c=0;c<g/2;c++){var h=Math.round(u[2*c+1]/g)*8192+Math.round(u[2*c]/g)+d;u[c]=h&67108863,h<67108864?d=0:d=h/67108864|0}return u},O.prototype.convert13b=function(u,g,d,c){for(var h=0,x=0;x<g;x++)h=h+(u[x]|0),d[2*x]=h&8191,h=h>>>13,d[2*x+1]=h&8191,h=h>>>13;for(x=2*g;x<c;++x)d[x]=0;r(h===0),r((h&-8192)===0)},O.prototype.stub=function(u){for(var g=new Array(u),d=0;d<u;d++)g[d]=0;return g},O.prototype.mulp=function(u,g,d){var c=2*this.guessLen13b(u.length,g.length),h=this.makeRBT(c),x=this.stub(c),E=new Array(c),w=new Array(c),m=new Array(c),A=new Array(c),I=new Array(c),y=new Array(c),M=d.words;M.length=c,this.convert13b(u.words,u.length,E,c),this.convert13b(g.words,g.length,A,c),this.transform(E,x,w,m,c,h),this.transform(A,x,I,y,c,h);for(var re=0;re<c;re++){var T=w[re]*I[re]-m[re]*y[re];m[re]=w[re]*y[re]+m[re]*I[re],w[re]=T}return this.conjugate(w,m,c),this.transform(w,m,M,x,c,h),this.conjugate(M,x,c),this.normalize13b(M,c),d.negative=u.negative^g.negative,d.length=u.length+g.length,d.strip()},o.prototype.mul=function(u){var g=new o(null);return g.words=new Array(this.length+u.length),this.mulTo(u,g)},o.prototype.mulf=function(u){var g=new o(null);return g.words=new Array(this.length+u.length),$(this,u,g)},o.prototype.imul=function(u){return this.clone().mulTo(u,this)},o.prototype.imuln=function(u){r(typeof u=="number"),r(u<67108864);for(var g=0,d=0;d<this.length;d++){var c=(this.words[d]|0)*u,h=(c&67108863)+(g&67108863);g>>=26,g+=c/67108864|0,g+=h>>>26,this.words[d]=h&67108863}return g!==0&&(this.words[d]=g,this.length++),this},o.prototype.muln=function(u){return this.clone().imuln(u)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(u){var g=C(u);if(g.length===0)return new o(1);for(var d=this,c=0;c<g.length&&g[c]===0;c++,d=d.sqr());if(++c<g.length)for(var h=d.sqr();c<g.length;c++,h=h.sqr())g[c]!==0&&(d=d.mul(h));return d},o.prototype.iushln=function(u){r(typeof u=="number"&&u>=0);var g=u%26,d=(u-g)/26,c=67108863>>>26-g<<26-g,h;if(g!==0){var x=0;for(h=0;h<this.length;h++){var E=this.words[h]&c,w=(this.words[h]|0)-E<<g;this.words[h]=w|x,x=E>>>26-g}x&&(this.words[h]=x,this.length++)}if(d!==0){for(h=this.length-1;h>=0;h--)this.words[h+d]=this.words[h];for(h=0;h<d;h++)this.words[h]=0;this.length+=d}return this.strip()},o.prototype.ishln=function(u){return r(this.negative===0),this.iushln(u)},o.prototype.iushrn=function(u,g,d){r(typeof u=="number"&&u>=0);var c;g?c=(g-g%26)/26:c=0;var h=u%26,x=Math.min((u-h)/26,this.length),E=67108863^67108863>>>h<<h,w=d;if(c-=x,c=Math.max(0,c),w){for(var m=0;m<x;m++)w.words[m]=this.words[m];w.length=x}if(x!==0)if(this.length>x)for(this.length-=x,m=0;m<this.length;m++)this.words[m]=this.words[m+x];else this.words[0]=0,this.length=1;var A=0;for(m=this.length-1;m>=0&&(A!==0||m>=c);m--){var I=this.words[m]|0;this.words[m]=A<<26-h|I>>>h,A=I&E}return w&&A!==0&&(w.words[w.length++]=A),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(u,g,d){return r(this.negative===0),this.iushrn(u,g,d)},o.prototype.shln=function(u){return this.clone().ishln(u)},o.prototype.ushln=function(u){return this.clone().iushln(u)},o.prototype.shrn=function(u){return this.clone().ishrn(u)},o.prototype.ushrn=function(u){return this.clone().iushrn(u)},o.prototype.testn=function(u){r(typeof u=="number"&&u>=0);var g=u%26,d=(u-g)/26,c=1<<g;if(this.length<=d)return!1;var h=this.words[d];return!!(h&c)},o.prototype.imaskn=function(u){r(typeof u=="number"&&u>=0);var g=u%26,d=(u-g)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=d)return this;if(g!==0&&d++,this.length=Math.min(d,this.length),g!==0){var c=67108863^67108863>>>g<<g;this.words[this.length-1]&=c}return this.strip()},o.prototype.maskn=function(u){return this.clone().imaskn(u)},o.prototype.iaddn=function(u){return r(typeof u=="number"),r(u<67108864),u<0?this.isubn(-u):this.negative!==0?this.length===1&&(this.words[0]|0)<u?(this.words[0]=u-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(u),this.negative=1,this):this._iaddn(u)},o.prototype._iaddn=function(u){this.words[0]+=u;for(var g=0;g<this.length&&this.words[g]>=67108864;g++)this.words[g]-=67108864,g===this.length-1?this.words[g+1]=1:this.words[g+1]++;return this.length=Math.max(this.length,g+1),this},o.prototype.isubn=function(u){if(r(typeof u=="number"),r(u<67108864),u<0)return this.iaddn(-u);if(this.negative!==0)return this.negative=0,this.iaddn(u),this.negative=1,this;if(this.words[0]-=u,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var g=0;g<this.length&&this.words[g]<0;g++)this.words[g]+=67108864,this.words[g+1]-=1;return this.strip()},o.prototype.addn=function(u){return this.clone().iaddn(u)},o.prototype.subn=function(u){return this.clone().isubn(u)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(u,g,d){var c=u.length+d,h;this._expand(c);var x,E=0;for(h=0;h<u.length;h++){x=(this.words[h+d]|0)+E;var w=(u.words[h]|0)*g;x-=w&67108863,E=(x>>26)-(w/67108864|0),this.words[h+d]=x&67108863}for(;h<this.length-d;h++)x=(this.words[h+d]|0)+E,E=x>>26,this.words[h+d]=x&67108863;if(E===0)return this.strip();for(r(E===-1),E=0,h=0;h<this.length;h++)x=-(this.words[h]|0)+E,E=x>>26,this.words[h]=x&67108863;return this.negative=1,this.strip()},o.prototype._wordDiv=function(u,g){var d=this.length-u.length,c=this.clone(),h=u,x=h.words[h.length-1]|0,E=this._countBits(x);d=26-E,d!==0&&(h=h.ushln(d),c.iushln(d),x=h.words[h.length-1]|0);var w=c.length-h.length,m;if(g!=="mod"){m=new o(null),m.length=w+1,m.words=new Array(m.length);for(var A=0;A<m.length;A++)m.words[A]=0}var I=c.clone()._ishlnsubmul(h,1,w);I.negative===0&&(c=I,m&&(m.words[w]=1));for(var y=w-1;y>=0;y--){var M=(c.words[h.length+y]|0)*67108864+(c.words[h.length+y-1]|0);for(M=Math.min(M/x|0,67108863),c._ishlnsubmul(h,M,y);c.negative!==0;)M--,c.negative=0,c._ishlnsubmul(h,1,y),c.isZero()||(c.negative^=1);m&&(m.words[y]=M)}return m&&m.strip(),c.strip(),g!=="div"&&d!==0&&c.iushrn(d),{div:m||null,mod:c}},o.prototype.divmod=function(u,g,d){if(r(!u.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var c,h,x;return this.negative!==0&&u.negative===0?(x=this.neg().divmod(u,g),g!=="mod"&&(c=x.div.neg()),g!=="div"&&(h=x.mod.neg(),d&&h.negative!==0&&h.iadd(u)),{div:c,mod:h}):this.negative===0&&u.negative!==0?(x=this.divmod(u.neg(),g),g!=="mod"&&(c=x.div.neg()),{div:c,mod:x.mod}):this.negative&u.negative?(x=this.neg().divmod(u.neg(),g),g!=="div"&&(h=x.mod.neg(),d&&h.negative!==0&&h.isub(u)),{div:x.div,mod:h}):u.length>this.length||this.cmp(u)<0?{div:new o(0),mod:this}:u.length===1?g==="div"?{div:this.divn(u.words[0]),mod:null}:g==="mod"?{div:null,mod:new o(this.modn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new o(this.modn(u.words[0]))}:this._wordDiv(u,g)},o.prototype.div=function(u){return this.divmod(u,"div",!1).div},o.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod},o.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod},o.prototype.divRound=function(u){var g=this.divmod(u);if(g.mod.isZero())return g.div;var d=g.div.negative!==0?g.mod.isub(u):g.mod,c=u.ushrn(1),h=u.andln(1),x=d.cmp(c);return x<0||h===1&&x===0?g.div:g.div.negative!==0?g.div.isubn(1):g.div.iaddn(1)},o.prototype.modn=function(u){r(u<=67108863);for(var g=(1<<26)%u,d=0,c=this.length-1;c>=0;c--)d=(g*d+(this.words[c]|0))%u;return d},o.prototype.idivn=function(u){r(u<=67108863);for(var g=0,d=this.length-1;d>=0;d--){var c=(this.words[d]|0)+g*67108864;this.words[d]=c/u|0,g=c%u}return this.strip()},o.prototype.divn=function(u){return this.clone().idivn(u)},o.prototype.egcd=function(u){r(u.negative===0),r(!u.isZero());var g=this,d=u.clone();g.negative!==0?g=g.umod(u):g=g.clone();for(var c=new o(1),h=new o(0),x=new o(0),E=new o(1),w=0;g.isEven()&&d.isEven();)g.iushrn(1),d.iushrn(1),++w;for(var m=d.clone(),A=g.clone();!g.isZero();){for(var I=0,y=1;!(g.words[0]&y)&&I<26;++I,y<<=1);if(I>0)for(g.iushrn(I);I-- >0;)(c.isOdd()||h.isOdd())&&(c.iadd(m),h.isub(A)),c.iushrn(1),h.iushrn(1);for(var M=0,re=1;!(d.words[0]&re)&&M<26;++M,re<<=1);if(M>0)for(d.iushrn(M);M-- >0;)(x.isOdd()||E.isOdd())&&(x.iadd(m),E.isub(A)),x.iushrn(1),E.iushrn(1);g.cmp(d)>=0?(g.isub(d),c.isub(x),h.isub(E)):(d.isub(g),x.isub(c),E.isub(h))}return{a:x,b:E,gcd:d.iushln(w)}},o.prototype._invmp=function(u){r(u.negative===0),r(!u.isZero());var g=this,d=u.clone();g.negative!==0?g=g.umod(u):g=g.clone();for(var c=new o(1),h=new o(0),x=d.clone();g.cmpn(1)>0&&d.cmpn(1)>0;){for(var E=0,w=1;!(g.words[0]&w)&&E<26;++E,w<<=1);if(E>0)for(g.iushrn(E);E-- >0;)c.isOdd()&&c.iadd(x),c.iushrn(1);for(var m=0,A=1;!(d.words[0]&A)&&m<26;++m,A<<=1);if(m>0)for(d.iushrn(m);m-- >0;)h.isOdd()&&h.iadd(x),h.iushrn(1);g.cmp(d)>=0?(g.isub(d),c.isub(h)):(d.isub(g),h.isub(c))}var I;return g.cmpn(1)===0?I=c:I=h,I.cmpn(0)<0&&I.iadd(u),I},o.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var g=this.clone(),d=u.clone();g.negative=0,d.negative=0;for(var c=0;g.isEven()&&d.isEven();c++)g.iushrn(1),d.iushrn(1);do{for(;g.isEven();)g.iushrn(1);for(;d.isEven();)d.iushrn(1);var h=g.cmp(d);if(h<0){var x=g;g=d,d=x}else if(h===0||d.cmpn(1)===0)break;g.isub(d)}while(!0);return d.iushln(c)},o.prototype.invm=function(u){return this.egcd(u).a.umod(u)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(u){return this.words[0]&u},o.prototype.bincn=function(u){r(typeof u=="number");var g=u%26,d=(u-g)/26,c=1<<g;if(this.length<=d)return this._expand(d+1),this.words[d]|=c,this;for(var h=c,x=d;h!==0&&x<this.length;x++){var E=this.words[x]|0;E+=h,h=E>>>26,E&=67108863,this.words[x]=E}return h!==0&&(this.words[x]=h,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(u){var g=u<0;if(this.negative!==0&&!g)return-1;if(this.negative===0&&g)return 1;this.strip();var d;if(this.length>1)d=1;else{g&&(u=-u),r(u<=67108863,"Number is too big");var c=this.words[0]|0;d=c===u?0:c<u?-1:1}return this.negative!==0?-d|0:d},o.prototype.cmp=function(u){if(this.negative!==0&&u.negative===0)return-1;if(this.negative===0&&u.negative!==0)return 1;var g=this.ucmp(u);return this.negative!==0?-g|0:g},o.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var g=0,d=this.length-1;d>=0;d--){var c=this.words[d]|0,h=u.words[d]|0;if(c!==h){c<h?g=-1:c>h&&(g=1);break}}return g},o.prototype.gtn=function(u){return this.cmpn(u)===1},o.prototype.gt=function(u){return this.cmp(u)===1},o.prototype.gten=function(u){return this.cmpn(u)>=0},o.prototype.gte=function(u){return this.cmp(u)>=0},o.prototype.ltn=function(u){return this.cmpn(u)===-1},o.prototype.lt=function(u){return this.cmp(u)===-1},o.prototype.lten=function(u){return this.cmpn(u)<=0},o.prototype.lte=function(u){return this.cmp(u)<=0},o.prototype.eqn=function(u){return this.cmpn(u)===0},o.prototype.eq=function(u){return this.cmp(u)===0},o.red=function(u){return new U(u)},o.prototype.toRed=function(u){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),u.convertTo(this)._forceRed(u)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(u){return this.red=u,this},o.prototype.forceRed=function(u){return r(!this.red,"Already a number in reduction context"),this._forceRed(u)},o.prototype.redAdd=function(u){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,u)},o.prototype.redIAdd=function(u){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,u)},o.prototype.redSub=function(u){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,u)},o.prototype.redISub=function(u){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,u)},o.prototype.redShl=function(u){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,u)},o.prototype.redMul=function(u){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.mul(this,u)},o.prototype.redIMul=function(u){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.imul(this,u)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(u){return r(this.red&&!u.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,u)};var q={k256:null,p224:null,p192:null,p25519:null};function j(_,u){this.name=_,this.p=new o(u,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}j.prototype._tmp=function(){var u=new o(null);return u.words=new Array(Math.ceil(this.n/13)),u},j.prototype.ireduce=function(u){var g=u,d;do this.split(g,this.tmp),g=this.imulK(g),g=g.iadd(this.tmp),d=g.bitLength();while(d>this.n);var c=d<this.n?-1:g.ucmp(this.p);return c===0?(g.words[0]=0,g.length=1):c>0?g.isub(this.p):g.strip!==void 0?g.strip():g._strip(),g},j.prototype.split=function(u,g){u.iushrn(this.n,0,g)},j.prototype.imulK=function(u){return u.imul(this.k)};function z(){j.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(z,j),z.prototype.split=function(u,g){for(var d=4194303,c=Math.min(u.length,9),h=0;h<c;h++)g.words[h]=u.words[h];if(g.length=c,u.length<=9){u.words[0]=0,u.length=1;return}var x=u.words[9];for(g.words[g.length++]=x&d,h=10;h<u.length;h++){var E=u.words[h]|0;u.words[h-10]=(E&d)<<4|x>>>22,x=E}x>>>=22,u.words[h-10]=x,x===0&&u.length>10?u.length-=10:u.length-=9},z.prototype.imulK=function(u){u.words[u.length]=0,u.words[u.length+1]=0,u.length+=2;for(var g=0,d=0;d<u.length;d++){var c=u.words[d]|0;g+=c*977,u.words[d]=g&67108863,g=c*64+(g/67108864|0)}return u.words[u.length-1]===0&&(u.length--,u.words[u.length-1]===0&&u.length--),u};function X(){j.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(X,j);function B(){j.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(B,j);function L(){j.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(L,j),L.prototype.imulK=function(u){for(var g=0,d=0;d<u.length;d++){var c=(u.words[d]|0)*19+g,h=c&67108863;c>>>=26,u.words[d]=h,g=c}return g!==0&&(u.words[u.length++]=g),u},o._prime=function(u){if(q[u])return q[u];var g;if(u==="k256")g=new z;else if(u==="p224")g=new X;else if(u==="p192")g=new B;else if(u==="p25519")g=new L;else throw new Error("Unknown prime "+u);return q[u]=g,g};function U(_){if(typeof _=="string"){var u=o._prime(_);this.m=u.p,this.prime=u}else r(_.gtn(1),"modulus must be greater than 1"),this.m=_,this.prime=null}U.prototype._verify1=function(u){r(u.negative===0,"red works only with positives"),r(u.red,"red works only with red numbers")},U.prototype._verify2=function(u,g){r((u.negative|g.negative)===0,"red works only with positives"),r(u.red&&u.red===g.red,"red works only with red numbers")},U.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):u.umod(this.m)._forceRed(this)},U.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)},U.prototype.add=function(u,g){this._verify2(u,g);var d=u.add(g);return d.cmp(this.m)>=0&&d.isub(this.m),d._forceRed(this)},U.prototype.iadd=function(u,g){this._verify2(u,g);var d=u.iadd(g);return d.cmp(this.m)>=0&&d.isub(this.m),d},U.prototype.sub=function(u,g){this._verify2(u,g);var d=u.sub(g);return d.cmpn(0)<0&&d.iadd(this.m),d._forceRed(this)},U.prototype.isub=function(u,g){this._verify2(u,g);var d=u.isub(g);return d.cmpn(0)<0&&d.iadd(this.m),d},U.prototype.shl=function(u,g){return this._verify1(u),this.imod(u.ushln(g))},U.prototype.imul=function(u,g){return this._verify2(u,g),this.imod(u.imul(g))},U.prototype.mul=function(u,g){return this._verify2(u,g),this.imod(u.mul(g))},U.prototype.isqr=function(u){return this.imul(u,u.clone())},U.prototype.sqr=function(u){return this.mul(u,u)},U.prototype.sqrt=function(u){if(u.isZero())return u.clone();var g=this.m.andln(3);if(r(g%2===1),g===3){var d=this.m.add(new o(1)).iushrn(2);return this.pow(u,d)}for(var c=this.m.subn(1),h=0;!c.isZero()&&c.andln(1)===0;)h++,c.iushrn(1);r(!c.isZero());var x=new o(1).toRed(this),E=x.redNeg(),w=this.m.subn(1).iushrn(1),m=this.m.bitLength();for(m=new o(2*m*m).toRed(this);this.pow(m,w).cmp(E)!==0;)m.redIAdd(E);for(var A=this.pow(m,c),I=this.pow(u,c.addn(1).iushrn(1)),y=this.pow(u,c),M=h;y.cmp(x)!==0;){for(var re=y,T=0;re.cmp(x)!==0;T++)re=re.redSqr();r(T<M);var K=this.pow(A,new o(1).iushln(M-T-1));I=I.redMul(K),A=K.redSqr(),y=y.redMul(A),M=T}return I},U.prototype.invm=function(u){var g=u._invmp(this.m);return g.negative!==0?(g.negative=0,this.imod(g).redNeg()):this.imod(g)},U.prototype.pow=function(u,g){if(g.isZero())return new o(1).toRed(this);if(g.cmpn(1)===0)return u.clone();var d=4,c=new Array(1<<d);c[0]=new o(1).toRed(this),c[1]=u;for(var h=2;h<c.length;h++)c[h]=this.mul(c[h-1],u);var x=c[0],E=0,w=0,m=g.bitLength()%26;for(m===0&&(m=26),h=g.length-1;h>=0;h--){for(var A=g.words[h],I=m-1;I>=0;I--){var y=A>>I&1;if(x!==c[0]&&(x=this.sqr(x)),y===0&&E===0){w=0;continue}E<<=1,E|=y,w++,!(w!==d&&(h!==0||I!==0))&&(x=this.mul(x,c[E]),w=0,E=0)}m=26}return x},U.prototype.convertTo=function(u){var g=u.umod(this.m);return g===u?g.clone():g},U.prototype.convertFrom=function(u){var g=u.clone();return g.red=null,g},o.mont=function(u){return new te(u)};function te(_){U.call(this,_),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(te,U),te.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))},te.prototype.convertFrom=function(u){var g=this.imod(u.mul(this.rinv));return g.red=null,g},te.prototype.imul=function(u,g){if(u.isZero()||g.isZero())return u.words[0]=0,u.length=1,u;var d=u.imul(g),c=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=d.isub(c).iushrn(this.shift),x=h;return h.cmp(this.m)>=0?x=h.isub(this.m):h.cmpn(0)<0&&(x=h.iadd(this.m)),x._forceRed(this)},te.prototype.mul=function(u,g){if(u.isZero()||g.isZero())return new o(0)._forceRed(this);var d=u.mul(g),c=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=d.isub(c).iushrn(this.shift),x=h;return h.cmp(this.m)>=0?x=h.isub(this.m):h.cmpn(0)<0&&(x=h.iadd(this.m)),x._forceRed(this)},te.prototype.invm=function(u){var g=this.imod(u._invmp(this.m).mul(this.r2));return g._forceRed(this)}})(typeof M0>"u"||M0,lv)});var T0=de(pv=>{"use strict";var Cu=pv;function yM(n,t){if(Array.isArray(n))return n.slice();if(!n)return[];var r=[];if(typeof n!="string"){for(var i=0;i<n.length;i++)r[i]=n[i]|0;return r}if(t==="hex"){n=n.replace(/[^a-z0-9]+/ig,""),n.length%2!==0&&(n="0"+n);for(var i=0;i<n.length;i+=2)r.push(parseInt(n[i]+n[i+1],16))}else for(var i=0;i<n.length;i++){var o=n.charCodeAt(i),s=o>>8,a=o&255;s?r.push(s,a):r.push(a)}return r}Cu.toArray=yM;function hv(n){return n.length===1?"0"+n:n}Cu.zero2=hv;function dv(n){for(var t="",r=0;r<n.length;r++)t+=hv(n[r].toString(16));return t}Cu.toHex=dv;Cu.encode=function(t,r){return r==="hex"?dv(t):t}});var yr=de(mv=>{"use strict";var sn=mv,vM=Dn(),xM=wi(),Du=T0();sn.assert=xM;sn.toArray=Du.toArray;sn.zero2=Du.zero2;sn.toHex=Du.toHex;sn.encode=Du.encode;function wM(n,t,r){var i=new Array(Math.max(n.bitLength(),r)+1);i.fill(0);for(var o=1<<t+1,s=n.clone(),a=0;a<i.length;a++){var f,l=s.andln(o-1);s.isOdd()?(l>(o>>1)-1?f=(o>>1)-l:f=l,s.isubn(f)):f=0,i[a]=f,s.iushrn(1)}return i}sn.getNAF=wM;function EM(n,t){var r=[[],[]];n=n.clone(),t=t.clone();for(var i=0,o=0,s;n.cmpn(-i)>0||t.cmpn(-o)>0;){var a=n.andln(3)+i&3,f=t.andln(3)+o&3;a===3&&(a=-1),f===3&&(f=-1);var l;a&1?(s=n.andln(7)+i&7,(s===3||s===5)&&f===2?l=-a:l=a):l=0,r[0].push(l);var p;f&1?(s=t.andln(7)+o&7,(s===3||s===5)&&a===2?p=-f:p=f):p=0,r[1].push(p),2*i===l+1&&(i=1-i),2*o===p+1&&(o=1-o),n.iushrn(1),t.iushrn(1)}return r}sn.getJSF=EM;function _M(n,t,r){var i="_"+t;n.prototype[t]=function(){return this[i]!==void 0?this[i]:this[i]=r.call(this)}}sn.cachedProperty=_M;function AM(n){return typeof n=="string"?sn.toArray(n,"hex"):n}sn.parseBytes=AM;function SM(n){return new vM(n,"hex","le")}sn.intFromLE=SM});var O0=de((xq,D0)=>{var k0;D0.exports=function(t){return k0||(k0=new ki(null)),k0.generate(t)};function ki(n){this.rand=n}D0.exports.Rand=ki;ki.prototype.generate=function(t){return this._rand(t)};ki.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var r=new Uint8Array(t),i=0;i<r.length;i++)r[i]=this.rand.getByte();return r};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?ki.prototype._rand=function(t){var r=new Uint8Array(t);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?ki.prototype._rand=function(t){var r=new Uint8Array(t);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(ki.prototype._rand=function(){throw new Error("Not implemented yet")});else try{if(C0=nd(),typeof C0.randomBytes!="function")throw new Error("Not supported");ki.prototype._rand=function(t){return C0.randomBytes(t)}}catch{}var C0});var sf=de((wq,bv)=>{"use strict";var Lo=Dn(),of=yr(),Ou=of.getNAF,MM=of.getJSF,Iu=of.assert;function Ci(n,t){this.type=n,this.p=new Lo(t.p,16),this.red=t.prime?Lo.red(t.prime):Lo.mont(this.p),this.zero=new Lo(0).toRed(this.red),this.one=new Lo(1).toRed(this.red),this.two=new Lo(2).toRed(this.red),this.n=t.n&&new Lo(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}bv.exports=Ci;Ci.prototype.point=function(){throw new Error("Not implemented")};Ci.prototype.validate=function(){throw new Error("Not implemented")};Ci.prototype._fixedNafMul=function(t,r){Iu(t.precomputed);var i=t._getDoubles(),o=Ou(r,1,this._bitLength),s=(1<<i.step+1)-(i.step%2===0?2:1);s/=3;var a=[],f,l;for(f=0;f<o.length;f+=i.step){l=0;for(var p=f+i.step-1;p>=f;p--)l=(l<<1)+o[p];a.push(l)}for(var b=this.jpoint(null,null,null),v=this.jpoint(null,null,null),C=s;C>0;C--){for(f=0;f<a.length;f++)l=a[f],l===C?v=v.mixedAdd(i.points[f]):l===-C&&(v=v.mixedAdd(i.points[f].neg()));b=b.add(v)}return b.toP()};Ci.prototype._wnafMul=function(t,r){var i=4,o=t._getNAFPoints(i);i=o.wnd;for(var s=o.points,a=Ou(r,i,this._bitLength),f=this.jpoint(null,null,null),l=a.length-1;l>=0;l--){for(var p=0;l>=0&&a[l]===0;l--)p++;if(l>=0&&p++,f=f.dblp(p),l<0)break;var b=a[l];Iu(b!==0),t.type==="affine"?b>0?f=f.mixedAdd(s[b-1>>1]):f=f.mixedAdd(s[-b-1>>1].neg()):b>0?f=f.add(s[b-1>>1]):f=f.add(s[-b-1>>1].neg())}return t.type==="affine"?f.toP():f};Ci.prototype._wnafMulAdd=function(t,r,i,o,s){var a=this._wnafT1,f=this._wnafT2,l=this._wnafT3,p=0,b,v,C;for(b=0;b<o;b++){C=r[b];var D=C._getNAFPoints(t);a[b]=D.wnd,f[b]=D.points}for(b=o-1;b>=1;b-=2){var S=b-1,k=b;if(a[S]!==1||a[k]!==1){l[S]=Ou(i[S],a[S],this._bitLength),l[k]=Ou(i[k],a[k],this._bitLength),p=Math.max(l[S].length,p),p=Math.max(l[k].length,p);continue}var $=[r[S],null,null,r[k]];r[S].y.cmp(r[k].y)===0?($[1]=r[S].add(r[k]),$[2]=r[S].toJ().mixedAdd(r[k].neg())):r[S].y.cmp(r[k].y.redNeg())===0?($[1]=r[S].toJ().mixedAdd(r[k]),$[2]=r[S].add(r[k].neg())):($[1]=r[S].toJ().mixedAdd(r[k]),$[2]=r[S].toJ().mixedAdd(r[k].neg()));var O=[-3,-1,-5,-7,0,7,5,1,3],q=MM(i[S],i[k]);for(p=Math.max(q[0].length,p),l[S]=new Array(p),l[k]=new Array(p),v=0;v<p;v++){var j=q[0][v]|0,z=q[1][v]|0;l[S][v]=O[(j+1)*3+(z+1)],l[k][v]=0,f[S]=$}}var X=this.jpoint(null,null,null),B=this._wnafT4;for(b=p;b>=0;b--){for(var L=0;b>=0;){var U=!0;for(v=0;v<o;v++)B[v]=l[v][b]|0,B[v]!==0&&(U=!1);if(!U)break;L++,b--}if(b>=0&&L++,X=X.dblp(L),b<0)break;for(v=0;v<o;v++){var te=B[v];te!==0&&(te>0?C=f[v][te-1>>1]:te<0&&(C=f[v][-te-1>>1].neg()),C.type==="affine"?X=X.mixedAdd(C):X=X.add(C))}}for(b=0;b<o;b++)f[b]=null;return s?X:X.toP()};function Br(n,t){this.curve=n,this.type=t,this.precomputed=null}Ci.BasePoint=Br;Br.prototype.eq=function(){throw new Error("Not implemented")};Br.prototype.validate=function(){return this.curve.validate(this)};Ci.prototype.decodePoint=function(t,r){t=of.toArray(t,r);var i=this.p.byteLength();if((t[0]===4||t[0]===6||t[0]===7)&&t.length-1===2*i){t[0]===6?Iu(t[t.length-1]%2===0):t[0]===7&&Iu(t[t.length-1]%2===1);var o=this.point(t.slice(1,1+i),t.slice(1+i,1+2*i));return o}else if((t[0]===2||t[0]===3)&&t.length-1===i)return this.pointFromX(t.slice(1,1+i),t[0]===3);throw new Error("Unknown point format")};Br.prototype.encodeCompressed=function(t){return this.encode(t,!0)};Br.prototype._encode=function(t){var r=this.curve.p.byteLength(),i=this.getX().toArray("be",r);return t?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",r))};Br.prototype.encode=function(t,r){return of.encode(this._encode(r),t)};Br.prototype.precompute=function(t){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,t),r.beta=this._getBeta(),this.precomputed=r,this};Br.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((t.bitLength()+1)/r.step):!1};Br.prototype._getDoubles=function(t,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],o=this,s=0;s<r;s+=t){for(var a=0;a<t;a++)o=o.dbl();i.push(o)}return{step:t,points:i}};Br.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],i=(1<<t)-1,o=i===1?null:this.dbl(),s=1;s<i;s++)r[s]=r[s-1].add(o);return{wnd:t,points:r}};Br.prototype._getBeta=function(){return null};Br.prototype.dblp=function(t){for(var r=this,i=0;i<t;i++)r=r.dbl();return r}});var yv=de((Eq,gv)=>{"use strict";var TM=yr(),vt=Dn(),I0=Ja(),Gs=sf(),kM=TM.assert;function Ur(n){Gs.call(this,"short",n),this.a=new vt(n.a,16).toRed(this.red),this.b=new vt(n.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(n),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}I0(Ur,Gs);gv.exports=Ur;Ur.prototype._getEndomorphism=function(t){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,i;if(t.beta)r=new vt(t.beta,16).toRed(this.red);else{var o=this._getEndoRoots(this.p);r=o[0].cmp(o[1])<0?o[0]:o[1],r=r.toRed(this.red)}if(t.lambda)i=new vt(t.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?i=s[0]:(i=s[1],kM(this.g.mul(i).x.cmp(this.g.x.redMul(r))===0))}var a;return t.basis?a=t.basis.map(function(f){return{a:new vt(f.a,16),b:new vt(f.b,16)}}):a=this._getEndoBasis(i),{beta:r,lambda:i,basis:a}}};Ur.prototype._getEndoRoots=function(t){var r=t===this.p?this.red:vt.mont(t),i=new vt(2).toRed(r).redInvm(),o=i.redNeg(),s=new vt(3).toRed(r).redNeg().redSqrt().redMul(i),a=o.redAdd(s).fromRed(),f=o.redSub(s).fromRed();return[a,f]};Ur.prototype._getEndoBasis=function(t){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=t,o=this.n.clone(),s=new vt(1),a=new vt(0),f=new vt(0),l=new vt(1),p,b,v,C,D,S,k,$=0,O,q;i.cmpn(0)!==0;){var j=o.div(i);O=o.sub(j.mul(i)),q=f.sub(j.mul(s));var z=l.sub(j.mul(a));if(!v&&O.cmp(r)<0)p=k.neg(),b=s,v=O.neg(),C=q;else if(v&&++$===2)break;k=O,o=i,i=O,f=s,s=q,l=a,a=z}D=O.neg(),S=q;var X=v.sqr().add(C.sqr()),B=D.sqr().add(S.sqr());return B.cmp(X)>=0&&(D=p,S=b),v.negative&&(v=v.neg(),C=C.neg()),D.negative&&(D=D.neg(),S=S.neg()),[{a:v,b:C},{a:D,b:S}]};Ur.prototype._endoSplit=function(t){var r=this.endo.basis,i=r[0],o=r[1],s=o.b.mul(t).divRound(this.n),a=i.b.neg().mul(t).divRound(this.n),f=s.mul(i.a),l=a.mul(o.a),p=s.mul(i.b),b=a.mul(o.b),v=t.sub(f).sub(l),C=p.add(b).neg();return{k1:v,k2:C}};Ur.prototype.pointFromX=function(t,r){t=new vt(t,16),t.red||(t=t.toRed(this.red));var i=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),o=i.redSqrt();if(o.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var s=o.fromRed().isOdd();return(r&&!s||!r&&s)&&(o=o.redNeg()),this.point(t,o)};Ur.prototype.validate=function(t){if(t.inf)return!0;var r=t.x,i=t.y,o=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(o).redIAdd(this.b);return i.redSqr().redISub(s).cmpn(0)===0};Ur.prototype._endoWnafMulAdd=function(t,r,i){for(var o=this._endoWnafT1,s=this._endoWnafT2,a=0;a<t.length;a++){var f=this._endoSplit(r[a]),l=t[a],p=l._getBeta();f.k1.negative&&(f.k1.ineg(),l=l.neg(!0)),f.k2.negative&&(f.k2.ineg(),p=p.neg(!0)),o[a*2]=l,o[a*2+1]=p,s[a*2]=f.k1,s[a*2+1]=f.k2}for(var b=this._wnafMulAdd(1,o,s,a*2,i),v=0;v<a*2;v++)o[v]=null,s[v]=null;return b};function Ct(n,t,r,i){Gs.BasePoint.call(this,n,"affine"),t===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new vt(t,16),this.y=new vt(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}I0(Ct,Gs.BasePoint);Ur.prototype.point=function(t,r,i){return new Ct(this,t,r,i)};Ur.prototype.pointFromJSON=function(t,r){return Ct.fromJSON(this,t,r)};Ct.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var i=this.curve,o=function(s){return i.point(s.x.redMul(i.endo.beta),s.y)};t.beta=r,r.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(o)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(o)}}}return r}};Ct.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Ct.fromJSON=function(t,r,i){typeof r=="string"&&(r=JSON.parse(r));var o=t.point(r[0],r[1],i);if(!r[2])return o;function s(f){return t.point(f[0],f[1],i)}var a=r[2];return o.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[o].concat(a.doubles.points.map(s))},naf:a.naf&&{wnd:a.naf.wnd,points:[o].concat(a.naf.points.map(s))}},o};Ct.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Ct.prototype.isInfinity=function(){return this.inf};Ct.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(this.x.cmp(t.x)===0)return this.curve.point(null,null);var r=this.y.redSub(t.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(t.x).redInvm()));var i=r.redSqr().redISub(this.x).redISub(t.x),o=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,o)};Ct.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(t.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,i=this.x.redSqr(),o=t.redInvm(),s=i.redAdd(i).redIAdd(i).redIAdd(r).redMul(o),a=s.redSqr().redISub(this.x.redAdd(this.x)),f=s.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,f)};Ct.prototype.getX=function(){return this.x.fromRed()};Ct.prototype.getY=function(){return this.y.fromRed()};Ct.prototype.mul=function(t){return t=new vt(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)};Ct.prototype.mulAdd=function(t,r,i){var o=[this,r],s=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(o,s):this.curve._wnafMulAdd(1,o,s,2)};Ct.prototype.jmulAdd=function(t,r,i){var o=[this,r],s=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(o,s,!0):this.curve._wnafMulAdd(1,o,s,2,!0)};Ct.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||this.x.cmp(t.x)===0&&this.y.cmp(t.y)===0)};Ct.prototype.neg=function(t){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var i=this.precomputed,o=function(s){return s.neg()};r.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(o)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(o)}}}return r};Ct.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var t=this.curve.jpoint(this.x,this.y,this.curve.one);return t};function $t(n,t,r,i){Gs.BasePoint.call(this,n,"jacobian"),t===null&&r===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new vt(0)):(this.x=new vt(t,16),this.y=new vt(r,16),this.z=new vt(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}I0($t,Gs.BasePoint);Ur.prototype.jpoint=function(t,r,i){return new $t(this,t,r,i)};$t.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),r=t.redSqr(),i=this.x.redMul(r),o=this.y.redMul(r).redMul(t);return this.curve.point(i,o)};$t.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};$t.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var r=t.z.redSqr(),i=this.z.redSqr(),o=this.x.redMul(r),s=t.x.redMul(i),a=this.y.redMul(r.redMul(t.z)),f=t.y.redMul(i.redMul(this.z)),l=o.redSub(s),p=a.redSub(f);if(l.cmpn(0)===0)return p.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var b=l.redSqr(),v=b.redMul(l),C=o.redMul(b),D=p.redSqr().redIAdd(v).redISub(C).redISub(C),S=p.redMul(C.redISub(D)).redISub(a.redMul(v)),k=this.z.redMul(t.z).redMul(l);return this.curve.jpoint(D,S,k)};$t.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var r=this.z.redSqr(),i=this.x,o=t.x.redMul(r),s=this.y,a=t.y.redMul(r).redMul(this.z),f=i.redSub(o),l=s.redSub(a);if(f.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var p=f.redSqr(),b=p.redMul(f),v=i.redMul(p),C=l.redSqr().redIAdd(b).redISub(v).redISub(v),D=l.redMul(v.redISub(C)).redISub(s.redMul(b)),S=this.z.redMul(f);return this.curve.jpoint(C,D,S)};$t.prototype.dblp=function(t){if(t===0)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var i=this;for(r=0;r<t;r++)i=i.dbl();return i}var o=this.curve.a,s=this.curve.tinv,a=this.x,f=this.y,l=this.z,p=l.redSqr().redSqr(),b=f.redAdd(f);for(r=0;r<t;r++){var v=a.redSqr(),C=b.redSqr(),D=C.redSqr(),S=v.redAdd(v).redIAdd(v).redIAdd(o.redMul(p)),k=a.redMul(C),$=S.redSqr().redISub(k.redAdd(k)),O=k.redISub($),q=S.redMul(O);q=q.redIAdd(q).redISub(D);var j=b.redMul(l);r+1<t&&(p=p.redMul(D)),a=$,l=j,b=q}return this.curve.jpoint(a,b.redMul(s),l)};$t.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};$t.prototype._zeroDbl=function(){var t,r,i;if(this.zOne){var o=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),f=this.x.redAdd(s).redSqr().redISub(o).redISub(a);f=f.redIAdd(f);var l=o.redAdd(o).redIAdd(o),p=l.redSqr().redISub(f).redISub(f),b=a.redIAdd(a);b=b.redIAdd(b),b=b.redIAdd(b),t=p,r=l.redMul(f.redISub(p)).redISub(b),i=this.y.redAdd(this.y)}else{var v=this.x.redSqr(),C=this.y.redSqr(),D=C.redSqr(),S=this.x.redAdd(C).redSqr().redISub(v).redISub(D);S=S.redIAdd(S);var k=v.redAdd(v).redIAdd(v),$=k.redSqr(),O=D.redIAdd(D);O=O.redIAdd(O),O=O.redIAdd(O),t=$.redISub(S).redISub(S),r=k.redMul(S.redISub(t)).redISub(O),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(t,r,i)};$t.prototype._threeDbl=function(){var t,r,i;if(this.zOne){var o=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),f=this.x.redAdd(s).redSqr().redISub(o).redISub(a);f=f.redIAdd(f);var l=o.redAdd(o).redIAdd(o).redIAdd(this.curve.a),p=l.redSqr().redISub(f).redISub(f);t=p;var b=a.redIAdd(a);b=b.redIAdd(b),b=b.redIAdd(b),r=l.redMul(f.redISub(p)).redISub(b),i=this.y.redAdd(this.y)}else{var v=this.z.redSqr(),C=this.y.redSqr(),D=this.x.redMul(C),S=this.x.redSub(v).redMul(this.x.redAdd(v));S=S.redAdd(S).redIAdd(S);var k=D.redIAdd(D);k=k.redIAdd(k);var $=k.redAdd(k);t=S.redSqr().redISub($),i=this.y.redAdd(this.z).redSqr().redISub(C).redISub(v);var O=C.redSqr();O=O.redIAdd(O),O=O.redIAdd(O),O=O.redIAdd(O),r=S.redMul(k.redISub(t)).redISub(O)}return this.curve.jpoint(t,r,i)};$t.prototype._dbl=function(){var t=this.curve.a,r=this.x,i=this.y,o=this.z,s=o.redSqr().redSqr(),a=r.redSqr(),f=i.redSqr(),l=a.redAdd(a).redIAdd(a).redIAdd(t.redMul(s)),p=r.redAdd(r);p=p.redIAdd(p);var b=p.redMul(f),v=l.redSqr().redISub(b.redAdd(b)),C=b.redISub(v),D=f.redSqr();D=D.redIAdd(D),D=D.redIAdd(D),D=D.redIAdd(D);var S=l.redMul(C).redISub(D),k=i.redAdd(i).redMul(o);return this.curve.jpoint(v,S,k)};$t.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr(),o=r.redSqr(),s=t.redAdd(t).redIAdd(t),a=s.redSqr(),f=this.x.redAdd(r).redSqr().redISub(t).redISub(o);f=f.redIAdd(f),f=f.redAdd(f).redIAdd(f),f=f.redISub(a);var l=f.redSqr(),p=o.redIAdd(o);p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p);var b=s.redIAdd(f).redSqr().redISub(a).redISub(l).redISub(p),v=r.redMul(b);v=v.redIAdd(v),v=v.redIAdd(v);var C=this.x.redMul(l).redISub(v);C=C.redIAdd(C),C=C.redIAdd(C);var D=this.y.redMul(b.redMul(p.redISub(b)).redISub(f.redMul(l)));D=D.redIAdd(D),D=D.redIAdd(D),D=D.redIAdd(D);var S=this.z.redAdd(f).redSqr().redISub(i).redISub(l);return this.curve.jpoint(C,D,S)};$t.prototype.mul=function(t,r){return t=new vt(t,r),this.curve._wnafMul(this,t)};$t.prototype.eq=function(t){if(t.type==="affine")return this.eq(t.toJ());if(this===t)return!0;var r=this.z.redSqr(),i=t.z.redSqr();if(this.x.redMul(i).redISub(t.x.redMul(r)).cmpn(0)!==0)return!1;var o=r.redMul(this.z),s=i.redMul(t.z);return this.y.redMul(s).redISub(t.y.redMul(o)).cmpn(0)===0};$t.prototype.eqXToP=function(t){var r=this.z.redSqr(),i=t.toRed(this.curve.red).redMul(r);if(this.x.cmp(i)===0)return!0;for(var o=t.clone(),s=this.curve.redN.redMul(r);;){if(o.iadd(this.curve.n),o.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(s),this.x.cmp(i)===0)return!0}};$t.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};$t.prototype.isInfinity=function(){return this.z.cmpn(0)===0}});var wv=de((_q,xv)=>{"use strict";var Js=Dn(),vv=Ja(),Ru=sf(),CM=yr();function Vs(n){Ru.call(this,"mont",n),this.a=new Js(n.a,16).toRed(this.red),this.b=new Js(n.b,16).toRed(this.red),this.i4=new Js(4).toRed(this.red).redInvm(),this.two=new Js(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}vv(Vs,Ru);xv.exports=Vs;Vs.prototype.validate=function(t){var r=t.normalize().x,i=r.redSqr(),o=i.redMul(r).redAdd(i.redMul(this.a)).redAdd(r),s=o.redSqrt();return s.redSqr().cmp(o)===0};function Dt(n,t,r){Ru.BasePoint.call(this,n,"projective"),t===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new Js(t,16),this.z=new Js(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}vv(Dt,Ru.BasePoint);Vs.prototype.decodePoint=function(t,r){return this.point(CM.toArray(t,r),1)};Vs.prototype.point=function(t,r){return new Dt(this,t,r)};Vs.prototype.pointFromJSON=function(t){return Dt.fromJSON(this,t)};Dt.prototype.precompute=function(){};Dt.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Dt.fromJSON=function(t,r){return new Dt(t,r[0],r[1]||t.one)};Dt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Dt.prototype.isInfinity=function(){return this.z.cmpn(0)===0};Dt.prototype.dbl=function(){var t=this.x.redAdd(this.z),r=t.redSqr(),i=this.x.redSub(this.z),o=i.redSqr(),s=r.redSub(o),a=r.redMul(o),f=s.redMul(o.redAdd(this.curve.a24.redMul(s)));return this.curve.point(a,f)};Dt.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};Dt.prototype.diffAdd=function(t,r){var i=this.x.redAdd(this.z),o=this.x.redSub(this.z),s=t.x.redAdd(t.z),a=t.x.redSub(t.z),f=a.redMul(i),l=s.redMul(o),p=r.z.redMul(f.redAdd(l).redSqr()),b=r.x.redMul(f.redISub(l).redSqr());return this.curve.point(p,b)};Dt.prototype.mul=function(t){for(var r=t.clone(),i=this,o=this.curve.point(null,null),s=this,a=[];r.cmpn(0)!==0;r.iushrn(1))a.push(r.andln(1));for(var f=a.length-1;f>=0;f--)a[f]===0?(i=i.diffAdd(o,s),o=o.dbl()):(o=i.diffAdd(o,s),i=i.dbl());return o};Dt.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};Dt.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};Dt.prototype.eq=function(t){return this.getX().cmp(t.getX())===0};Dt.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Dt.prototype.getX=function(){return this.normalize(),this.x.fromRed()}});var Av=de((Aq,_v)=>{"use strict";var DM=yr(),ei=Dn(),Ev=Ja(),Nu=sf(),OM=DM.assert;function On(n){this.twisted=(n.a|0)!==1,this.mOneA=this.twisted&&(n.a|0)===-1,this.extended=this.mOneA,Nu.call(this,"edwards",n),this.a=new ei(n.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new ei(n.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new ei(n.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),OM(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(n.c|0)===1}Ev(On,Nu);_v.exports=On;On.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)};On.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)};On.prototype.jpoint=function(t,r,i,o){return this.point(t,r,i,o)};On.prototype.pointFromX=function(t,r){t=new ei(t,16),t.red||(t=t.toRed(this.red));var i=t.redSqr(),o=this.c2.redSub(this.a.redMul(i)),s=this.one.redSub(this.c2.redMul(this.d).redMul(i)),a=o.redMul(s.redInvm()),f=a.redSqrt();if(f.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");var l=f.fromRed().isOdd();return(r&&!l||!r&&l)&&(f=f.redNeg()),this.point(t,f)};On.prototype.pointFromY=function(t,r){t=new ei(t,16),t.red||(t=t.toRed(this.red));var i=t.redSqr(),o=i.redSub(this.c2),s=i.redMul(this.d).redMul(this.c2).redSub(this.a),a=o.redMul(s.redInvm());if(a.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,t)}var f=a.redSqrt();if(f.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");return f.fromRed().isOdd()!==r&&(f=f.redNeg()),this.point(f,t)};On.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var r=t.x.redSqr(),i=t.y.redSqr(),o=r.redMul(this.a).redAdd(i),s=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(i)));return o.cmp(s)===0};function dt(n,t,r,i,o){Nu.BasePoint.call(this,n,"projective"),t===null&&r===null&&i===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new ei(t,16),this.y=new ei(r,16),this.z=i?new ei(i,16):this.curve.one,this.t=o&&new ei(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}Ev(dt,Nu.BasePoint);On.prototype.pointFromJSON=function(t){return dt.fromJSON(this,t)};On.prototype.point=function(t,r,i,o){return new dt(this,t,r,i,o)};dt.fromJSON=function(t,r){return new dt(t,r[0],r[1],r[2])};dt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};dt.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};dt.prototype._extDbl=function(){var t=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var o=this.curve._mulA(t),s=this.x.redAdd(this.y).redSqr().redISub(t).redISub(r),a=o.redAdd(r),f=a.redSub(i),l=o.redSub(r),p=s.redMul(f),b=a.redMul(l),v=s.redMul(l),C=f.redMul(a);return this.curve.point(p,b,C,v)};dt.prototype._projDbl=function(){var t=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),i=this.y.redSqr(),o,s,a,f,l,p;if(this.curve.twisted){f=this.curve._mulA(r);var b=f.redAdd(i);this.zOne?(o=t.redSub(r).redSub(i).redMul(b.redSub(this.curve.two)),s=b.redMul(f.redSub(i)),a=b.redSqr().redSub(b).redSub(b)):(l=this.z.redSqr(),p=b.redSub(l).redISub(l),o=t.redSub(r).redISub(i).redMul(p),s=b.redMul(f.redSub(i)),a=b.redMul(p))}else f=r.redAdd(i),l=this.curve._mulC(this.z).redSqr(),p=f.redSub(l).redSub(l),o=this.curve._mulC(t.redISub(f)).redMul(p),s=this.curve._mulC(f).redMul(r.redISub(i)),a=f.redMul(p);return this.curve.point(o,s,a)};dt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};dt.prototype._extAdd=function(t){var r=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),i=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),o=this.t.redMul(this.curve.dd).redMul(t.t),s=this.z.redMul(t.z.redAdd(t.z)),a=i.redSub(r),f=s.redSub(o),l=s.redAdd(o),p=i.redAdd(r),b=a.redMul(f),v=l.redMul(p),C=a.redMul(p),D=f.redMul(l);return this.curve.point(b,v,D,C)};dt.prototype._projAdd=function(t){var r=this.z.redMul(t.z),i=r.redSqr(),o=this.x.redMul(t.x),s=this.y.redMul(t.y),a=this.curve.d.redMul(o).redMul(s),f=i.redSub(a),l=i.redAdd(a),p=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(o).redISub(s),b=r.redMul(f).redMul(p),v,C;return this.curve.twisted?(v=r.redMul(l).redMul(s.redSub(this.curve._mulA(o))),C=f.redMul(l)):(v=r.redMul(l).redMul(s.redSub(o)),C=this.curve._mulC(f).redMul(l)),this.curve.point(b,v,C)};dt.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)};dt.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)};dt.prototype.mulAdd=function(t,r,i){return this.curve._wnafMulAdd(1,[this,r],[t,i],2,!1)};dt.prototype.jmulAdd=function(t,r,i){return this.curve._wnafMulAdd(1,[this,r],[t,i],2,!0)};dt.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this};dt.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};dt.prototype.getX=function(){return this.normalize(),this.x.fromRed()};dt.prototype.getY=function(){return this.normalize(),this.y.fromRed()};dt.prototype.eq=function(t){return this===t||this.getX().cmp(t.getX())===0&&this.getY().cmp(t.getY())===0};dt.prototype.eqXToP=function(t){var r=t.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var i=t.clone(),o=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(o),this.x.cmp(r)===0)return!0}};dt.prototype.toP=dt.prototype.normalize;dt.prototype.mixedAdd=dt.prototype.add});var R0=de(Sv=>{"use strict";var Pu=Sv;Pu.base=sf();Pu.short=yv();Pu.mont=wv();Pu.edwards=Av()});var Tv=de((Mq,Mv)=>{Mv.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}});var Lu=de(Dv=>{"use strict";var P0=Dv,Di=Ya(),N0=R0(),IM=yr(),kv=IM.assert;function Cv(n){n.type==="short"?this.curve=new N0.short(n):n.type==="edwards"?this.curve=new N0.edwards(n):this.curve=new N0.mont(n),this.g=this.curve.g,this.n=this.curve.n,this.hash=n.hash,kv(this.g.validate(),"Invalid curve"),kv(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}P0.PresetCurve=Cv;function Oi(n,t){Object.defineProperty(P0,n,{configurable:!0,enumerable:!0,get:function(){var r=new Cv(t);return Object.defineProperty(P0,n,{configurable:!0,enumerable:!0,value:r}),r}})}Oi("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Di.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});Oi("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Di.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});Oi("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Di.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});Oi("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Di.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});Oi("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Di.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});Oi("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Di.sha256,gRed:!1,g:["9"]});Oi("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Di.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var L0;try{L0=Tv()}catch{L0=void 0}Oi("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Di.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",L0]})});var Rv=de((kq,Iv)=>{"use strict";var RM=Ya(),Bo=T0(),Ov=wi();function Ii(n){if(!(this instanceof Ii))return new Ii(n);this.hash=n.hash,this.predResist=!!n.predResist,this.outLen=this.hash.outSize,this.minEntropy=n.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=Bo.toArray(n.entropy,n.entropyEnc||"hex"),r=Bo.toArray(n.nonce,n.nonceEnc||"hex"),i=Bo.toArray(n.pers,n.persEnc||"hex");Ov(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,i)}Iv.exports=Ii;Ii.prototype._init=function(t,r,i){var o=t.concat(r).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(o),this._reseed=1,this.reseedInterval=281474976710656};Ii.prototype._hmac=function(){return new RM.hmac(this.hash,this.K)};Ii.prototype._update=function(t){var r=this._hmac().update(this.V).update([0]);t&&(r=r.update(t)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())};Ii.prototype.reseed=function(t,r,i,o){typeof r!="string"&&(o=i,i=r,r=null),t=Bo.toArray(t,r),i=Bo.toArray(i,o),Ov(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(i||[])),this._reseed=1};Ii.prototype.generate=function(t,r,i,o){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(o=i,i=r,r=null),i&&(i=Bo.toArray(i,o||"hex"),this._update(i));for(var s=[];s.length<t;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var a=s.slice(0,t);return this._update(i),this._reseed++,Bo.encode(a,r)}});var Pv=de((Cq,Nv)=>{"use strict";var NM=Dn(),PM=yr(),B0=PM.assert;function Vt(n,t){this.ec=n,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}Nv.exports=Vt;Vt.fromPublic=function(t,r,i){return r instanceof Vt?r:new Vt(t,{pub:r,pubEnc:i})};Vt.fromPrivate=function(t,r,i){return r instanceof Vt?r:new Vt(t,{priv:r,privEnc:i})};Vt.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Vt.prototype.getPublic=function(t,r){return typeof t=="string"&&(r=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,t):this.pub};Vt.prototype.getPrivate=function(t){return t==="hex"?this.priv.toString(16,2):this.priv};Vt.prototype._importPrivate=function(t,r){this.priv=new NM(t,r||16),this.priv=this.priv.umod(this.ec.curve.n)};Vt.prototype._importPublic=function(t,r){if(t.x||t.y){this.ec.curve.type==="mont"?B0(t.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&B0(t.x&&t.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(t.x,t.y);return}this.pub=this.ec.curve.decodePoint(t,r)};Vt.prototype.derive=function(t){return t.validate()||B0(t.validate(),"public point not validated"),t.mul(this.priv).getX()};Vt.prototype.sign=function(t,r,i){return this.ec.sign(t,this,r,i)};Vt.prototype.verify=function(t,r){return this.ec.verify(t,r,this)};Vt.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}});var Uv=de((Dq,Bv)=>{"use strict";var Bu=Dn(),$0=yr(),LM=$0.assert;function Uu(n,t){if(n instanceof Uu)return n;this._importDER(n,t)||(LM(n.r&&n.s,"Signature without r or s"),this.r=new Bu(n.r,16),this.s=new Bu(n.s,16),n.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=n.recoveryParam)}Bv.exports=Uu;function BM(){this.place=0}function U0(n,t){var r=n[t.place++];if(!(r&128))return r;var i=r&15;if(i===0||i>4)return!1;for(var o=0,s=0,a=t.place;s<i;s++,a++)o<<=8,o|=n[a],o>>>=0;return o<=127?!1:(t.place=a,o)}function Lv(n){for(var t=0,r=n.length-1;!n[t]&&!(n[t+1]&128)&&t<r;)t++;return t===0?n:n.slice(t)}Uu.prototype._importDER=function(t,r){t=$0.toArray(t,r);var i=new BM;if(t[i.place++]!==48)return!1;var o=U0(t,i);if(o===!1||o+i.place!==t.length||t[i.place++]!==2)return!1;var s=U0(t,i);if(s===!1)return!1;var a=t.slice(i.place,s+i.place);if(i.place+=s,t[i.place++]!==2)return!1;var f=U0(t,i);if(f===!1||t.length!==f+i.place)return!1;var l=t.slice(i.place,f+i.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(l[0]===0)if(l[1]&128)l=l.slice(1);else return!1;return this.r=new Bu(a),this.s=new Bu(l),this.recoveryParam=null,!0};function F0(n,t){if(t<128){n.push(t);return}var r=1+(Math.log(t)/Math.LN2>>>3);for(n.push(r|128);--r;)n.push(t>>>(r<<3)&255);n.push(t)}Uu.prototype.toDER=function(t){var r=this.r.toArray(),i=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),i[0]&128&&(i=[0].concat(i)),r=Lv(r),i=Lv(i);!i[0]&&!(i[1]&128);)i=i.slice(1);var o=[2];F0(o,r.length),o=o.concat(r),o.push(2),F0(o,i.length);var s=o.concat(i),a=[48];return F0(a,s.length),a=a.concat(s),$0.encode(a,t)}});var zv=de((Oq,qv)=>{"use strict";var Uo=Dn(),Fv=Rv(),UM=yr(),q0=Lu(),FM=O0(),$v=UM.assert,z0=Pv(),Fu=Uv();function Fr(n){if(!(this instanceof Fr))return new Fr(n);typeof n=="string"&&($v(Object.prototype.hasOwnProperty.call(q0,n),"Unknown curve "+n),n=q0[n]),n instanceof q0.PresetCurve&&(n={curve:n}),this.curve=n.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=n.curve.g,this.g.precompute(n.curve.n.bitLength()+1),this.hash=n.hash||n.curve.hash}qv.exports=Fr;Fr.prototype.keyPair=function(t){return new z0(this,t)};Fr.prototype.keyFromPrivate=function(t,r){return z0.fromPrivate(this,t,r)};Fr.prototype.keyFromPublic=function(t,r){return z0.fromPublic(this,t,r)};Fr.prototype.genKeyPair=function(t){t||(t={});for(var r=new Fv({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||FM(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),o=this.n.sub(new Uo(2));;){var s=new Uo(r.generate(i));if(!(s.cmp(o)>0))return s.iaddn(1),this.keyFromPrivate(s)}};Fr.prototype._truncateToN=function(t,r){var i=t.byteLength()*8-this.n.bitLength();return i>0&&(t=t.ushrn(i)),!r&&t.cmp(this.n)>=0?t.sub(this.n):t};Fr.prototype.sign=function(t,r,i,o){typeof i=="object"&&(o=i,i=null),o||(o={}),r=this.keyFromPrivate(r,i),t=this._truncateToN(new Uo(t,16));for(var s=this.n.byteLength(),a=r.getPrivate().toArray("be",s),f=t.toArray("be",s),l=new Fv({hash:this.hash,entropy:a,nonce:f,pers:o.pers,persEnc:o.persEnc||"utf8"}),p=this.n.sub(new Uo(1)),b=0;;b++){var v=o.k?o.k(b):new Uo(l.generate(this.n.byteLength()));if(v=this._truncateToN(v,!0),!(v.cmpn(1)<=0||v.cmp(p)>=0)){var C=this.g.mul(v);if(!C.isInfinity()){var D=C.getX(),S=D.umod(this.n);if(S.cmpn(0)!==0){var k=v.invm(this.n).mul(S.mul(r.getPrivate()).iadd(t));if(k=k.umod(this.n),k.cmpn(0)!==0){var $=(C.getY().isOdd()?1:0)|(D.cmp(S)!==0?2:0);return o.canonical&&k.cmp(this.nh)>0&&(k=this.n.sub(k),$^=1),new Fu({r:S,s:k,recoveryParam:$})}}}}}};Fr.prototype.verify=function(t,r,i,o){t=this._truncateToN(new Uo(t,16)),i=this.keyFromPublic(i,o),r=new Fu(r,"hex");var s=r.r,a=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var f=a.invm(this.n),l=f.mul(t).umod(this.n),p=f.mul(s).umod(this.n),b;return this.curve._maxwellTrick?(b=this.g.jmulAdd(l,i.getPublic(),p),b.isInfinity()?!1:b.eqXToP(s)):(b=this.g.mulAdd(l,i.getPublic(),p),b.isInfinity()?!1:b.getX().umod(this.n).cmp(s)===0)};Fr.prototype.recoverPubKey=function(n,t,r,i){$v((3&r)===r,"The recovery param is more than two bits"),t=new Fu(t,i);var o=this.n,s=new Uo(n),a=t.r,f=t.s,l=r&1,p=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&p)throw new Error("Unable to find sencond key candinate");p?a=this.curve.pointFromX(a.add(this.curve.n),l):a=this.curve.pointFromX(a,l);var b=t.r.invm(o),v=o.sub(s).mul(b).umod(o),C=f.mul(b).umod(o);return this.g.mulAdd(v,a,C)};Fr.prototype.getKeyRecoveryParam=function(n,t,r,i){if(t=new Fu(t,i),t.recoveryParam!==null)return t.recoveryParam;for(var o=0;o<4;o++){var s;try{s=this.recoverPubKey(n,t,o)}catch{continue}if(s.eq(r))return o}throw new Error("Unable to find valid recovery factor")}});var Gv=de((Iq,jv)=>{"use strict";var af=yr(),Kv=af.assert,Hv=af.parseBytes,Ws=af.cachedProperty;function Ot(n,t){this.eddsa=n,this._secret=Hv(t.secret),n.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=Hv(t.pub)}Ot.fromPublic=function(t,r){return r instanceof Ot?r:new Ot(t,{pub:r})};Ot.fromSecret=function(t,r){return r instanceof Ot?r:new Ot(t,{secret:r})};Ot.prototype.secret=function(){return this._secret};Ws(Ot,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});Ws(Ot,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});Ws(Ot,"privBytes",function(){var t=this.eddsa,r=this.hash(),i=t.encodingLength-1,o=r.slice(0,t.encodingLength);return o[0]&=248,o[i]&=127,o[i]|=64,o});Ws(Ot,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});Ws(Ot,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});Ws(Ot,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});Ot.prototype.sign=function(t){return Kv(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)};Ot.prototype.verify=function(t,r){return this.eddsa.verify(t,r,this)};Ot.prototype.getSecret=function(t){return Kv(this._secret,"KeyPair is public only"),af.encode(this.secret(),t)};Ot.prototype.getPublic=function(t){return af.encode(this.pubBytes(),t)};jv.exports=Ot});var Vv=de((Rq,Jv)=>{"use strict";var $M=Dn(),$u=yr(),qM=$u.assert,qu=$u.cachedProperty,zM=$u.parseBytes;function Fo(n,t){this.eddsa=n,typeof t!="object"&&(t=zM(t)),Array.isArray(t)&&(t={R:t.slice(0,n.encodingLength),S:t.slice(n.encodingLength)}),qM(t.R&&t.S,"Signature without R or S"),n.isPoint(t.R)&&(this._R=t.R),t.S instanceof $M&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}qu(Fo,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});qu(Fo,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});qu(Fo,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});qu(Fo,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});Fo.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};Fo.prototype.toHex=function(){return $u.encode(this.toBytes(),"hex").toUpperCase()};Jv.exports=Fo});var Qv=de((Nq,Zv)=>{"use strict";var HM=Ya(),KM=Lu(),Ys=yr(),jM=Ys.assert,Yv=Ys.parseBytes,Xv=Gv(),Wv=Vv();function or(n){if(jM(n==="ed25519","only tested with ed25519 so far"),!(this instanceof or))return new or(n);n=KM[n].curve,this.curve=n,this.g=n.g,this.g.precompute(n.n.bitLength()+1),this.pointClass=n.point().constructor,this.encodingLength=Math.ceil(n.n.bitLength()/8),this.hash=HM.sha512}Zv.exports=or;or.prototype.sign=function(t,r){t=Yv(t);var i=this.keyFromSecret(r),o=this.hashInt(i.messagePrefix(),t),s=this.g.mul(o),a=this.encodePoint(s),f=this.hashInt(a,i.pubBytes(),t).mul(i.priv()),l=o.add(f).umod(this.curve.n);return this.makeSignature({R:s,S:l,Rencoded:a})};or.prototype.verify=function(t,r,i){t=Yv(t),r=this.makeSignature(r);var o=this.keyFromPublic(i),s=this.hashInt(r.Rencoded(),o.pubBytes(),t),a=this.g.mul(r.S()),f=r.R().add(o.pub().mul(s));return f.eq(a)};or.prototype.hashInt=function(){for(var t=this.hash(),r=0;r<arguments.length;r++)t.update(arguments[r]);return Ys.intFromLE(t.digest()).umod(this.curve.n)};or.prototype.keyFromPublic=function(t){return Xv.fromPublic(this,t)};or.prototype.keyFromSecret=function(t){return Xv.fromSecret(this,t)};or.prototype.makeSignature=function(t){return t instanceof Wv?t:new Wv(this,t)};or.prototype.encodePoint=function(t){var r=t.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=t.getX().isOdd()?128:0,r};or.prototype.decodePoint=function(t){t=Ys.parseBytes(t);var r=t.length-1,i=t.slice(0,r).concat(t[r]&-129),o=(t[r]&128)!==0,s=Ys.intFromLE(i);return this.curve.pointFromY(s,o)};or.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)};or.prototype.decodeInt=function(t){return Ys.intFromLE(t)};or.prototype.isPoint=function(t){return t instanceof this.pointClass}});var t6=de(e6=>{"use strict";var $o=e6;$o.version=uv().version;$o.utils=yr();$o.rand=O0();$o.curve=R0();$o.curves=Lu();$o.ec=zv();$o.eddsa=Qv()});var n6=de((Lq,r6)=>{"use strict";r6.exports=function n(t){return t===null||typeof t!="object"||t.toJSON!=null?JSON.stringify(t):Array.isArray(t)?"["+t.reduce((r,i,o)=>{let s=o===0?"":",",a=i===void 0||typeof i=="symbol"?null:i;return r+s+n(a)},"")+"]":"{"+Object.keys(t).sort().reduce((r,i,o)=>{if(t[i]===void 0||typeof t[i]=="symbol")return r;let s=r.length===0?"":",";return r+s+n(i)+":"+n(t[i])},"")+"}"}});var a6=de(Zs=>{"use strict";Object.defineProperty(Zs,"__esModule",{value:!0});Zs.bech32m=Zs.bech32=void 0;var zu="qpzry9x8gf2tvdw0s3jn54khce6mua7l",o6={};for(let n=0;n<zu.length;n++){let t=zu.charAt(n);o6[t]=n}function Xs(n){let t=n>>25;return(n&33554431)<<5^-(t>>0&1)&996825010^-(t>>1&1)&642813549^-(t>>2&1)&513874426^-(t>>3&1)&1027748829^-(t>>4&1)&705979059}function i6(n){let t=1;for(let r=0;r<n.length;++r){let i=n.charCodeAt(r);if(i<33||i>126)return"Invalid prefix ("+n+")";t=Xs(t)^i>>5}t=Xs(t);for(let r=0;r<n.length;++r){let i=n.charCodeAt(r);t=Xs(t)^i&31}return t}function H0(n,t,r,i){let o=0,s=0,a=(1<<r)-1,f=[];for(let l=0;l<n.length;++l)for(o=o<<t|n[l],s+=t;s>=r;)s-=r,f.push(o>>s&a);if(i)s>0&&f.push(o<<r-s&a);else{if(s>=t)return"Excess padding";if(o<<r-s&a)return"Non-zero padding"}return f}function GM(n){return H0(n,8,5,!0)}function JM(n){let t=H0(n,5,8,!1);if(Array.isArray(t))return t}function VM(n){let t=H0(n,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}function s6(n){let t;n==="bech32"?t=1:t=734539939;function r(a,f,l){if(l=l||90,a.length+7+f.length>l)throw new TypeError("Exceeds length limit");a=a.toLowerCase();let p=i6(a);if(typeof p=="string")throw new Error(p);let b=a+"1";for(let v=0;v<f.length;++v){let C=f[v];if(C>>5)throw new Error("Non 5-bit word");p=Xs(p)^C,b+=zu.charAt(C)}for(let v=0;v<6;++v)p=Xs(p);p^=t;for(let v=0;v<6;++v){let C=p>>(5-v)*5&31;b+=zu.charAt(C)}return b}function i(a,f){if(f=f||90,a.length<8)return a+" too short";if(a.length>f)return"Exceeds length limit";let l=a.toLowerCase(),p=a.toUpperCase();if(a!==l&&a!==p)return"Mixed-case string "+a;a=l;let b=a.lastIndexOf("1");if(b===-1)return"No separator character for "+a;if(b===0)return"Missing prefix for "+a;let v=a.slice(0,b),C=a.slice(b+1);if(C.length<6)return"Data too short";let D=i6(v);if(typeof D=="string")return D;let S=[];for(let k=0;k<C.length;++k){let $=C.charAt(k),O=o6[$];if(O===void 0)return"Unknown character "+$;D=Xs(D)^O,!(k+6>=C.length)&&S.push(O)}return D!==t?"Invalid checksum for "+a:{prefix:v,words:S}}function o(a,f){let l=i(a,f);if(typeof l=="object")return l}function s(a,f){let l=i(a,f);if(typeof l=="object")return l;throw new Error(l)}return{decodeUnsafe:o,decode:s,encode:r,toWords:GM,fromWordsUnsafe:JM,fromWords:VM}}Zs.bech32=s6("bech32");Zs.bech32m=s6("bech32m")});var l6=de(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.sharedKey=xt.generateKeyPair=xt.generateKeyPairFromSeed=xt.scalarMultBase=xt.scalarMult=xt.SHARED_KEY_LENGTH=xt.SECRET_KEY_LENGTH=xt.PUBLIC_KEY_LENGTH=void 0;var WM=Kn(),YM=Or();xt.PUBLIC_KEY_LENGTH=32;xt.SECRET_KEY_LENGTH=32;xt.SHARED_KEY_LENGTH=32;function In(n){let t=new Float64Array(16);if(n)for(let r=0;r<n.length;r++)t[r]=n[r];return t}var f6=new Uint8Array(32);f6[0]=9;var XM=In([56129,1]);function K0(n){let t=1;for(let r=0;r<16;r++){let i=n[r]+t+65535;t=Math.floor(i/65536),n[r]=i-t*65536}n[0]+=t-1+37*(t-1)}function ff(n,t,r){let i=~(r-1);for(let o=0;o<16;o++){let s=i&(n[o]^t[o]);n[o]^=s,t[o]^=s}}function ZM(n,t){let r=In(),i=In();for(let o=0;o<16;o++)i[o]=t[o];K0(i),K0(i),K0(i);for(let o=0;o<2;o++){r[0]=i[0]-65517;for(let a=1;a<15;a++)r[a]=i[a]-65535-(r[a-1]>>16&1),r[a-1]&=65535;r[15]=i[15]-32767-(r[14]>>16&1);let s=r[15]>>16&1;r[14]&=65535,ff(i,r,1-s)}for(let o=0;o<16;o++)n[2*o]=i[o]&255,n[2*o+1]=i[o]>>8}function QM(n,t){for(let r=0;r<16;r++)n[r]=t[2*r]+(t[2*r+1]<<8);n[15]&=32767}function Hu(n,t,r){for(let i=0;i<16;i++)n[i]=t[i]+r[i]}function Ku(n,t,r){for(let i=0;i<16;i++)n[i]=t[i]-r[i]}function ti(n,t,r){let i,o,s=0,a=0,f=0,l=0,p=0,b=0,v=0,C=0,D=0,S=0,k=0,$=0,O=0,q=0,j=0,z=0,X=0,B=0,L=0,U=0,te=0,_=0,u=0,g=0,d=0,c=0,h=0,x=0,E=0,w=0,m=0,A=r[0],I=r[1],y=r[2],M=r[3],re=r[4],T=r[5],K=r[6],Y=r[7],N=r[8],P=r[9],G=r[10],J=r[11],Q=r[12],le=r[13],oe=r[14],W=r[15];i=t[0],s+=i*A,a+=i*I,f+=i*y,l+=i*M,p+=i*re,b+=i*T,v+=i*K,C+=i*Y,D+=i*N,S+=i*P,k+=i*G,$+=i*J,O+=i*Q,q+=i*le,j+=i*oe,z+=i*W,i=t[1],a+=i*A,f+=i*I,l+=i*y,p+=i*M,b+=i*re,v+=i*T,C+=i*K,D+=i*Y,S+=i*N,k+=i*P,$+=i*G,O+=i*J,q+=i*Q,j+=i*le,z+=i*oe,X+=i*W,i=t[2],f+=i*A,l+=i*I,p+=i*y,b+=i*M,v+=i*re,C+=i*T,D+=i*K,S+=i*Y,k+=i*N,$+=i*P,O+=i*G,q+=i*J,j+=i*Q,z+=i*le,X+=i*oe,B+=i*W,i=t[3],l+=i*A,p+=i*I,b+=i*y,v+=i*M,C+=i*re,D+=i*T,S+=i*K,k+=i*Y,$+=i*N,O+=i*P,q+=i*G,j+=i*J,z+=i*Q,X+=i*le,B+=i*oe,L+=i*W,i=t[4],p+=i*A,b+=i*I,v+=i*y,C+=i*M,D+=i*re,S+=i*T,k+=i*K,$+=i*Y,O+=i*N,q+=i*P,j+=i*G,z+=i*J,X+=i*Q,B+=i*le,L+=i*oe,U+=i*W,i=t[5],b+=i*A,v+=i*I,C+=i*y,D+=i*M,S+=i*re,k+=i*T,$+=i*K,O+=i*Y,q+=i*N,j+=i*P,z+=i*G,X+=i*J,B+=i*Q,L+=i*le,U+=i*oe,te+=i*W,i=t[6],v+=i*A,C+=i*I,D+=i*y,S+=i*M,k+=i*re,$+=i*T,O+=i*K,q+=i*Y,j+=i*N,z+=i*P,X+=i*G,B+=i*J,L+=i*Q,U+=i*le,te+=i*oe,_+=i*W,i=t[7],C+=i*A,D+=i*I,S+=i*y,k+=i*M,$+=i*re,O+=i*T,q+=i*K,j+=i*Y,z+=i*N,X+=i*P,B+=i*G,L+=i*J,U+=i*Q,te+=i*le,_+=i*oe,u+=i*W,i=t[8],D+=i*A,S+=i*I,k+=i*y,$+=i*M,O+=i*re,q+=i*T,j+=i*K,z+=i*Y,X+=i*N,B+=i*P,L+=i*G,U+=i*J,te+=i*Q,_+=i*le,u+=i*oe,g+=i*W,i=t[9],S+=i*A,k+=i*I,$+=i*y,O+=i*M,q+=i*re,j+=i*T,z+=i*K,X+=i*Y,B+=i*N,L+=i*P,U+=i*G,te+=i*J,_+=i*Q,u+=i*le,g+=i*oe,d+=i*W,i=t[10],k+=i*A,$+=i*I,O+=i*y,q+=i*M,j+=i*re,z+=i*T,X+=i*K,B+=i*Y,L+=i*N,U+=i*P,te+=i*G,_+=i*J,u+=i*Q,g+=i*le,d+=i*oe,c+=i*W,i=t[11],$+=i*A,O+=i*I,q+=i*y,j+=i*M,z+=i*re,X+=i*T,B+=i*K,L+=i*Y,U+=i*N,te+=i*P,_+=i*G,u+=i*J,g+=i*Q,d+=i*le,c+=i*oe,h+=i*W,i=t[12],O+=i*A,q+=i*I,j+=i*y,z+=i*M,X+=i*re,B+=i*T,L+=i*K,U+=i*Y,te+=i*N,_+=i*P,u+=i*G,g+=i*J,d+=i*Q,c+=i*le,h+=i*oe,x+=i*W,i=t[13],q+=i*A,j+=i*I,z+=i*y,X+=i*M,B+=i*re,L+=i*T,U+=i*K,te+=i*Y,_+=i*N,u+=i*P,g+=i*G,d+=i*J,c+=i*Q,h+=i*le,x+=i*oe,E+=i*W,i=t[14],j+=i*A,z+=i*I,X+=i*y,B+=i*M,L+=i*re,U+=i*T,te+=i*K,_+=i*Y,u+=i*N,g+=i*P,d+=i*G,c+=i*J,h+=i*Q,x+=i*le,E+=i*oe,w+=i*W,i=t[15],z+=i*A,X+=i*I,B+=i*y,L+=i*M,U+=i*re,te+=i*T,_+=i*K,u+=i*Y,g+=i*N,d+=i*P,c+=i*G,h+=i*J,x+=i*Q,E+=i*le,w+=i*oe,m+=i*W,s+=38*X,a+=38*B,f+=38*L,l+=38*U,p+=38*te,b+=38*_,v+=38*u,C+=38*g,D+=38*d,S+=38*c,k+=38*h,$+=38*x,O+=38*E,q+=38*w,j+=38*m,o=1,i=s+o+65535,o=Math.floor(i/65536),s=i-o*65536,i=a+o+65535,o=Math.floor(i/65536),a=i-o*65536,i=f+o+65535,o=Math.floor(i/65536),f=i-o*65536,i=l+o+65535,o=Math.floor(i/65536),l=i-o*65536,i=p+o+65535,o=Math.floor(i/65536),p=i-o*65536,i=b+o+65535,o=Math.floor(i/65536),b=i-o*65536,i=v+o+65535,o=Math.floor(i/65536),v=i-o*65536,i=C+o+65535,o=Math.floor(i/65536),C=i-o*65536,i=D+o+65535,o=Math.floor(i/65536),D=i-o*65536,i=S+o+65535,o=Math.floor(i/65536),S=i-o*65536,i=k+o+65535,o=Math.floor(i/65536),k=i-o*65536,i=$+o+65535,o=Math.floor(i/65536),$=i-o*65536,i=O+o+65535,o=Math.floor(i/65536),O=i-o*65536,i=q+o+65535,o=Math.floor(i/65536),q=i-o*65536,i=j+o+65535,o=Math.floor(i/65536),j=i-o*65536,i=z+o+65535,o=Math.floor(i/65536),z=i-o*65536,s+=o-1+37*(o-1),o=1,i=s+o+65535,o=Math.floor(i/65536),s=i-o*65536,i=a+o+65535,o=Math.floor(i/65536),a=i-o*65536,i=f+o+65535,o=Math.floor(i/65536),f=i-o*65536,i=l+o+65535,o=Math.floor(i/65536),l=i-o*65536,i=p+o+65535,o=Math.floor(i/65536),p=i-o*65536,i=b+o+65535,o=Math.floor(i/65536),b=i-o*65536,i=v+o+65535,o=Math.floor(i/65536),v=i-o*65536,i=C+o+65535,o=Math.floor(i/65536),C=i-o*65536,i=D+o+65535,o=Math.floor(i/65536),D=i-o*65536,i=S+o+65535,o=Math.floor(i/65536),S=i-o*65536,i=k+o+65535,o=Math.floor(i/65536),k=i-o*65536,i=$+o+65535,o=Math.floor(i/65536),$=i-o*65536,i=O+o+65535,o=Math.floor(i/65536),O=i-o*65536,i=q+o+65535,o=Math.floor(i/65536),q=i-o*65536,i=j+o+65535,o=Math.floor(i/65536),j=i-o*65536,i=z+o+65535,o=Math.floor(i/65536),z=i-o*65536,s+=o-1+37*(o-1),n[0]=s,n[1]=a,n[2]=f,n[3]=l,n[4]=p,n[5]=b,n[6]=v,n[7]=C,n[8]=D,n[9]=S,n[10]=k,n[11]=$,n[12]=O,n[13]=q,n[14]=j,n[15]=z}function cf(n,t){ti(n,t,t)}function eT(n,t){let r=In();for(let i=0;i<16;i++)r[i]=t[i];for(let i=253;i>=0;i--)cf(r,r),i!==2&&i!==4&&ti(r,r,t);for(let i=0;i<16;i++)n[i]=r[i]}function j0(n,t){let r=new Uint8Array(32),i=new Float64Array(80),o=In(),s=In(),a=In(),f=In(),l=In(),p=In();for(let D=0;D<31;D++)r[D]=n[D];r[31]=n[31]&127|64,r[0]&=248,QM(i,t);for(let D=0;D<16;D++)s[D]=i[D];o[0]=f[0]=1;for(let D=254;D>=0;--D){let S=r[D>>>3]>>>(D&7)&1;ff(o,s,S),ff(a,f,S),Hu(l,o,a),Ku(o,o,a),Hu(a,s,f),Ku(s,s,f),cf(f,l),cf(p,o),ti(o,a,o),ti(a,s,l),Hu(l,o,a),Ku(o,o,a),cf(s,o),Ku(a,f,p),ti(o,a,XM),Hu(o,o,f),ti(a,a,o),ti(o,f,p),ti(f,s,i),cf(s,l),ff(o,s,S),ff(a,f,S)}for(let D=0;D<16;D++)i[D+16]=o[D],i[D+32]=a[D],i[D+48]=s[D],i[D+64]=f[D];let b=i.subarray(32),v=i.subarray(16);eT(b,b),ti(v,v,b);let C=new Uint8Array(32);return ZM(C,v),C}xt.scalarMult=j0;function c6(n){return j0(n,f6)}xt.scalarMultBase=c6;function u6(n){if(n.length!==xt.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${xt.SECRET_KEY_LENGTH} bytes`);let t=new Uint8Array(n);return{publicKey:c6(t),secretKey:t}}xt.generateKeyPairFromSeed=u6;function tT(n){let t=(0,WM.randomBytes)(32,n),r=u6(t);return(0,YM.wipe)(t),r}xt.generateKeyPair=tT;function rT(n,t,r=!1){if(n.length!==xt.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(t.length!==xt.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");let i=j0(n,t);if(r){let o=0;for(let s=0;s<i.length;s++)o|=i[s];if(o===0)throw new Error("X25519: invalid shared key")}return i}xt.sharedKey=rT});var J0=de(ju=>{"use strict";Object.defineProperty(ju,"__esModule",{value:!0});var Wt=vo(),G0=Or(),nT=20;function iT(n,t,r){for(var i=1634760805,o=857760878,s=2036477234,a=1797285236,f=r[3]<<24|r[2]<<16|r[1]<<8|r[0],l=r[7]<<24|r[6]<<16|r[5]<<8|r[4],p=r[11]<<24|r[10]<<16|r[9]<<8|r[8],b=r[15]<<24|r[14]<<16|r[13]<<8|r[12],v=r[19]<<24|r[18]<<16|r[17]<<8|r[16],C=r[23]<<24|r[22]<<16|r[21]<<8|r[20],D=r[27]<<24|r[26]<<16|r[25]<<8|r[24],S=r[31]<<24|r[30]<<16|r[29]<<8|r[28],k=t[3]<<24|t[2]<<16|t[1]<<8|t[0],$=t[7]<<24|t[6]<<16|t[5]<<8|t[4],O=t[11]<<24|t[10]<<16|t[9]<<8|t[8],q=t[15]<<24|t[14]<<16|t[13]<<8|t[12],j=i,z=o,X=s,B=a,L=f,U=l,te=p,_=b,u=v,g=C,d=D,c=S,h=k,x=$,E=O,w=q,m=0;m<nT;m+=2)j=j+L|0,h^=j,h=h>>>32-16|h<<16,u=u+h|0,L^=u,L=L>>>32-12|L<<12,z=z+U|0,x^=z,x=x>>>32-16|x<<16,g=g+x|0,U^=g,U=U>>>32-12|U<<12,X=X+te|0,E^=X,E=E>>>32-16|E<<16,d=d+E|0,te^=d,te=te>>>32-12|te<<12,B=B+_|0,w^=B,w=w>>>32-16|w<<16,c=c+w|0,_^=c,_=_>>>32-12|_<<12,X=X+te|0,E^=X,E=E>>>32-8|E<<8,d=d+E|0,te^=d,te=te>>>32-7|te<<7,B=B+_|0,w^=B,w=w>>>32-8|w<<8,c=c+w|0,_^=c,_=_>>>32-7|_<<7,z=z+U|0,x^=z,x=x>>>32-8|x<<8,g=g+x|0,U^=g,U=U>>>32-7|U<<7,j=j+L|0,h^=j,h=h>>>32-8|h<<8,u=u+h|0,L^=u,L=L>>>32-7|L<<7,j=j+U|0,w^=j,w=w>>>32-16|w<<16,d=d+w|0,U^=d,U=U>>>32-12|U<<12,z=z+te|0,h^=z,h=h>>>32-16|h<<16,c=c+h|0,te^=c,te=te>>>32-12|te<<12,X=X+_|0,x^=X,x=x>>>32-16|x<<16,u=u+x|0,_^=u,_=_>>>32-12|_<<12,B=B+L|0,E^=B,E=E>>>32-16|E<<16,g=g+E|0,L^=g,L=L>>>32-12|L<<12,X=X+_|0,x^=X,x=x>>>32-8|x<<8,u=u+x|0,_^=u,_=_>>>32-7|_<<7,B=B+L|0,E^=B,E=E>>>32-8|E<<8,g=g+E|0,L^=g,L=L>>>32-7|L<<7,z=z+te|0,h^=z,h=h>>>32-8|h<<8,c=c+h|0,te^=c,te=te>>>32-7|te<<7,j=j+U|0,w^=j,w=w>>>32-8|w<<8,d=d+w|0,U^=d,U=U>>>32-7|U<<7;Wt.writeUint32LE(j+i|0,n,0),Wt.writeUint32LE(z+o|0,n,4),Wt.writeUint32LE(X+s|0,n,8),Wt.writeUint32LE(B+a|0,n,12),Wt.writeUint32LE(L+f|0,n,16),Wt.writeUint32LE(U+l|0,n,20),Wt.writeUint32LE(te+p|0,n,24),Wt.writeUint32LE(_+b|0,n,28),Wt.writeUint32LE(u+v|0,n,32),Wt.writeUint32LE(g+C|0,n,36),Wt.writeUint32LE(d+D|0,n,40),Wt.writeUint32LE(c+S|0,n,44),Wt.writeUint32LE(h+k|0,n,48),Wt.writeUint32LE(x+$|0,n,52),Wt.writeUint32LE(E+O|0,n,56),Wt.writeUint32LE(w+q|0,n,60)}function h6(n,t,r,i,o){if(o===void 0&&(o=0),n.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(i.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,a;if(o===0){if(t.length!==8&&t.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),a=s.length-t.length,s.set(t,a)}else{if(t.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=t,a=o}for(var f=new Uint8Array(64),l=0;l<r.length;l+=64){iT(f,s,n);for(var p=l;p<l+64&&p<r.length;p++)i[p]=r[p]^f[p-l];sT(s,0,a)}return G0.wipe(f),o===0&&G0.wipe(s),i}ju.streamXOR=h6;function oT(n,t,r,i){return i===void 0&&(i=0),G0.wipe(r),h6(n,t,r,r,i)}ju.stream=oT;function sT(n,t,r){for(var i=1;r--;)i=i+(n[t]&255)|0,n[t]=i&255,i>>>=8,t++;if(i>0)throw new Error("ChaCha: counter overflow")}});var b6=de(uf=>{"use strict";Object.defineProperty(uf,"__esModule",{value:!0});var Ri=vo(),d6=Or(),aT=J0(),fT=20;function p6(n,t,r,i){if(t.length!==24)throw new Error("XChaCha20 nonce must be 24 bytes");var o=m6(n,t.subarray(0,16),new Uint8Array(32)),s=new Uint8Array(12);s.set(t.subarray(16),4);var a=aT.streamXOR(o,s,r,i);return d6.wipe(o),a}uf.streamXOR=p6;function cT(n,t,r){return d6.wipe(r),p6(n,t,r,r)}uf.stream=cT;function m6(n,t,r){for(var i=1634760805,o=857760878,s=2036477234,a=1797285236,f=n[3]<<24|n[2]<<16|n[1]<<8|n[0],l=n[7]<<24|n[6]<<16|n[5]<<8|n[4],p=n[11]<<24|n[10]<<16|n[9]<<8|n[8],b=n[15]<<24|n[14]<<16|n[13]<<8|n[12],v=n[19]<<24|n[18]<<16|n[17]<<8|n[16],C=n[23]<<24|n[22]<<16|n[21]<<8|n[20],D=n[27]<<24|n[26]<<16|n[25]<<8|n[24],S=n[31]<<24|n[30]<<16|n[29]<<8|n[28],k=t[3]<<24|t[2]<<16|t[1]<<8|t[0],$=t[7]<<24|t[6]<<16|t[5]<<8|t[4],O=t[11]<<24|t[10]<<16|t[9]<<8|t[8],q=t[15]<<24|t[14]<<16|t[13]<<8|t[12],j=i,z=o,X=s,B=a,L=f,U=l,te=p,_=b,u=v,g=C,d=D,c=S,h=k,x=$,E=O,w=q,m=0;m<fT;m+=2)j=j+L|0,h^=j,h=h>>>32-16|h<<16,u=u+h|0,L^=u,L=L>>>32-12|L<<12,z=z+U|0,x^=z,x=x>>>32-16|x<<16,g=g+x|0,U^=g,U=U>>>32-12|U<<12,X=X+te|0,E^=X,E=E>>>32-16|E<<16,d=d+E|0,te^=d,te=te>>>32-12|te<<12,B=B+_|0,w^=B,w=w>>>32-16|w<<16,c=c+w|0,_^=c,_=_>>>32-12|_<<12,X=X+te|0,E^=X,E=E>>>32-8|E<<8,d=d+E|0,te^=d,te=te>>>32-7|te<<7,B=B+_|0,w^=B,w=w>>>32-8|w<<8,c=c+w|0,_^=c,_=_>>>32-7|_<<7,z=z+U|0,x^=z,x=x>>>32-8|x<<8,g=g+x|0,U^=g,U=U>>>32-7|U<<7,j=j+L|0,h^=j,h=h>>>32-8|h<<8,u=u+h|0,L^=u,L=L>>>32-7|L<<7,j=j+U|0,w^=j,w=w>>>32-16|w<<16,d=d+w|0,U^=d,U=U>>>32-12|U<<12,z=z+te|0,h^=z,h=h>>>32-16|h<<16,c=c+h|0,te^=c,te=te>>>32-12|te<<12,X=X+_|0,x^=X,x=x>>>32-16|x<<16,u=u+x|0,_^=u,_=_>>>32-12|_<<12,B=B+L|0,E^=B,E=E>>>32-16|E<<16,g=g+E|0,L^=g,L=L>>>32-12|L<<12,X=X+_|0,x^=X,x=x>>>32-8|x<<8,u=u+x|0,_^=u,_=_>>>32-7|_<<7,B=B+L|0,E^=B,E=E>>>32-8|E<<8,g=g+E|0,L^=g,L=L>>>32-7|L<<7,z=z+te|0,h^=z,h=h>>>32-8|h<<8,c=c+h|0,te^=c,te=te>>>32-7|te<<7,j=j+U|0,w^=j,w=w>>>32-8|w<<8,d=d+w|0,U^=d,U=U>>>32-7|U<<7;return Ri.writeUint32LE(j,r,0),Ri.writeUint32LE(z,r,4),Ri.writeUint32LE(X,r,8),Ri.writeUint32LE(B,r,12),Ri.writeUint32LE(h,r,16),Ri.writeUint32LE(x,r,20),Ri.writeUint32LE(E,r,24),Ri.writeUint32LE(w,r,28),r}uf.hchacha=m6});var V0=de(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});function uT(n,t,r){return~(n-1)&t|n-1&r}Qs.select=uT;function lT(n,t){return(n|0)-(t|0)-1>>>31&1}Qs.lessOrEqual=lT;function g6(n,t){if(n.length!==t.length)return 0;for(var r=0,i=0;i<n.length;i++)r|=n[i]^t[i];return 1&r-1>>>8}Qs.compare=g6;function hT(n,t){return n.length===0||t.length===0?!1:g6(n,t)!==0}Qs.equal=hT});var v6=de(ri=>{"use strict";Object.defineProperty(ri,"__esModule",{value:!0});var dT=V0(),Gu=Or();ri.DIGEST_LENGTH=16;var y6=function(){function n(t){this.digestLength=ri.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var r=t[0]|t[1]<<8;this._r[0]=r&8191;var i=t[2]|t[3]<<8;this._r[1]=(r>>>13|i<<3)&8191;var o=t[4]|t[5]<<8;this._r[2]=(i>>>10|o<<6)&7939;var s=t[6]|t[7]<<8;this._r[3]=(o>>>7|s<<9)&8191;var a=t[8]|t[9]<<8;this._r[4]=(s>>>4|a<<12)&255,this._r[5]=a>>>1&8190;var f=t[10]|t[11]<<8;this._r[6]=(a>>>14|f<<2)&8191;var l=t[12]|t[13]<<8;this._r[7]=(f>>>11|l<<5)&8065;var p=t[14]|t[15]<<8;this._r[8]=(l>>>8|p<<8)&8191,this._r[9]=p>>>5&127,this._pad[0]=t[16]|t[17]<<8,this._pad[1]=t[18]|t[19]<<8,this._pad[2]=t[20]|t[21]<<8,this._pad[3]=t[22]|t[23]<<8,this._pad[4]=t[24]|t[25]<<8,this._pad[5]=t[26]|t[27]<<8,this._pad[6]=t[28]|t[29]<<8,this._pad[7]=t[30]|t[31]<<8}return n.prototype._blocks=function(t,r,i){for(var o=this._fin?0:2048,s=this._h[0],a=this._h[1],f=this._h[2],l=this._h[3],p=this._h[4],b=this._h[5],v=this._h[6],C=this._h[7],D=this._h[8],S=this._h[9],k=this._r[0],$=this._r[1],O=this._r[2],q=this._r[3],j=this._r[4],z=this._r[5],X=this._r[6],B=this._r[7],L=this._r[8],U=this._r[9];i>=16;){var te=t[r+0]|t[r+1]<<8;s+=te&8191;var _=t[r+2]|t[r+3]<<8;a+=(te>>>13|_<<3)&8191;var u=t[r+4]|t[r+5]<<8;f+=(_>>>10|u<<6)&8191;var g=t[r+6]|t[r+7]<<8;l+=(u>>>7|g<<9)&8191;var d=t[r+8]|t[r+9]<<8;p+=(g>>>4|d<<12)&8191,b+=d>>>1&8191;var c=t[r+10]|t[r+11]<<8;v+=(d>>>14|c<<2)&8191;var h=t[r+12]|t[r+13]<<8;C+=(c>>>11|h<<5)&8191;var x=t[r+14]|t[r+15]<<8;D+=(h>>>8|x<<8)&8191,S+=x>>>5|o;var E=0,w=E;w+=s*k,w+=a*(5*U),w+=f*(5*L),w+=l*(5*B),w+=p*(5*X),E=w>>>13,w&=8191,w+=b*(5*z),w+=v*(5*j),w+=C*(5*q),w+=D*(5*O),w+=S*(5*$),E+=w>>>13,w&=8191;var m=E;m+=s*$,m+=a*k,m+=f*(5*U),m+=l*(5*L),m+=p*(5*B),E=m>>>13,m&=8191,m+=b*(5*X),m+=v*(5*z),m+=C*(5*j),m+=D*(5*q),m+=S*(5*O),E+=m>>>13,m&=8191;var A=E;A+=s*O,A+=a*$,A+=f*k,A+=l*(5*U),A+=p*(5*L),E=A>>>13,A&=8191,A+=b*(5*B),A+=v*(5*X),A+=C*(5*z),A+=D*(5*j),A+=S*(5*q),E+=A>>>13,A&=8191;var I=E;I+=s*q,I+=a*O,I+=f*$,I+=l*k,I+=p*(5*U),E=I>>>13,I&=8191,I+=b*(5*L),I+=v*(5*B),I+=C*(5*X),I+=D*(5*z),I+=S*(5*j),E+=I>>>13,I&=8191;var y=E;y+=s*j,y+=a*q,y+=f*O,y+=l*$,y+=p*k,E=y>>>13,y&=8191,y+=b*(5*U),y+=v*(5*L),y+=C*(5*B),y+=D*(5*X),y+=S*(5*z),E+=y>>>13,y&=8191;var M=E;M+=s*z,M+=a*j,M+=f*q,M+=l*O,M+=p*$,E=M>>>13,M&=8191,M+=b*k,M+=v*(5*U),M+=C*(5*L),M+=D*(5*B),M+=S*(5*X),E+=M>>>13,M&=8191;var re=E;re+=s*X,re+=a*z,re+=f*j,re+=l*q,re+=p*O,E=re>>>13,re&=8191,re+=b*$,re+=v*k,re+=C*(5*U),re+=D*(5*L),re+=S*(5*B),E+=re>>>13,re&=8191;var T=E;T+=s*B,T+=a*X,T+=f*z,T+=l*j,T+=p*q,E=T>>>13,T&=8191,T+=b*O,T+=v*$,T+=C*k,T+=D*(5*U),T+=S*(5*L),E+=T>>>13,T&=8191;var K=E;K+=s*L,K+=a*B,K+=f*X,K+=l*z,K+=p*j,E=K>>>13,K&=8191,K+=b*q,K+=v*O,K+=C*$,K+=D*k,K+=S*(5*U),E+=K>>>13,K&=8191;var Y=E;Y+=s*U,Y+=a*L,Y+=f*B,Y+=l*X,Y+=p*z,E=Y>>>13,Y&=8191,Y+=b*j,Y+=v*q,Y+=C*O,Y+=D*$,Y+=S*k,E+=Y>>>13,Y&=8191,E=(E<<2)+E|0,E=E+w|0,w=E&8191,E=E>>>13,m+=E,s=w,a=m,f=A,l=I,p=y,b=M,v=re,C=T,D=K,S=Y,r+=16,i-=16}this._h[0]=s,this._h[1]=a,this._h[2]=f,this._h[3]=l,this._h[4]=p,this._h[5]=b,this._h[6]=v,this._h[7]=C,this._h[8]=D,this._h[9]=S},n.prototype.finish=function(t,r){r===void 0&&(r=0);var i=new Uint16Array(10),o,s,a,f;if(this._leftover){for(f=this._leftover,this._buffer[f++]=1;f<16;f++)this._buffer[f]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(o=this._h[1]>>>13,this._h[1]&=8191,f=2;f<10;f++)this._h[f]+=o,o=this._h[f]>>>13,this._h[f]&=8191;for(this._h[0]+=o*5,o=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=o,o=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=o,i[0]=this._h[0]+5,o=i[0]>>>13,i[0]&=8191,f=1;f<10;f++)i[f]=this._h[f]+o,o=i[f]>>>13,i[f]&=8191;for(i[9]-=1<<13,s=(o^1)-1,f=0;f<10;f++)i[f]&=s;for(s=~s,f=0;f<10;f++)this._h[f]=this._h[f]&s|i[f];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,a=this._h[0]+this._pad[0],this._h[0]=a&65535,f=1;f<8;f++)a=(this._h[f]+this._pad[f]|0)+(a>>>16)|0,this._h[f]=a&65535;return t[r+0]=this._h[0]>>>0,t[r+1]=this._h[0]>>>8,t[r+2]=this._h[1]>>>0,t[r+3]=this._h[1]>>>8,t[r+4]=this._h[2]>>>0,t[r+5]=this._h[2]>>>8,t[r+6]=this._h[3]>>>0,t[r+7]=this._h[3]>>>8,t[r+8]=this._h[4]>>>0,t[r+9]=this._h[4]>>>8,t[r+10]=this._h[5]>>>0,t[r+11]=this._h[5]>>>8,t[r+12]=this._h[6]>>>0,t[r+13]=this._h[6]>>>8,t[r+14]=this._h[7]>>>0,t[r+15]=this._h[7]>>>8,this._finished=!0,this},n.prototype.update=function(t){var r=0,i=t.length,o;if(this._leftover){o=16-this._leftover,o>i&&(o=i);for(var s=0;s<o;s++)this._buffer[this._leftover+s]=t[r+s];if(i-=o,r+=o,this._leftover+=o,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(i>=16&&(o=i-i%16,this._blocks(t,r,o),r+=o,i-=o),i){for(var s=0;s<i;s++)this._buffer[this._leftover+s]=t[r+s];this._leftover+=i}return this},n.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var t=new Uint8Array(16);return this.finish(t),t},n.prototype.clean=function(){return Gu.wipe(this._buffer),Gu.wipe(this._r),Gu.wipe(this._h),Gu.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},n}();ri.Poly1305=y6;function pT(n,t){var r=new y6(n);r.update(t);var i=r.digest();return r.clean(),i}ri.oneTimeAuth=pT;function mT(n,t){return n.length!==ri.DIGEST_LENGTH||t.length!==ri.DIGEST_LENGTH?!1:dT.equal(n,t)}ri.equal=mT});var E6=de(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});var Ju=J0(),bT=v6(),lf=Or(),x6=vo(),gT=V0();ni.KEY_LENGTH=32;ni.NONCE_LENGTH=12;ni.TAG_LENGTH=16;var w6=new Uint8Array(16),yT=function(){function n(t){if(this.nonceLength=ni.NONCE_LENGTH,this.tagLength=ni.TAG_LENGTH,t.length!==ni.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(t)}return n.prototype.seal=function(t,r,i,o){if(t.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var s=new Uint8Array(16);s.set(t,s.length-t.length);var a=new Uint8Array(32);Ju.stream(this._key,s,a,4);var f=r.length+this.tagLength,l;if(o){if(o.length!==f)throw new Error("ChaCha20Poly1305: incorrect destination length");l=o}else l=new Uint8Array(f);return Ju.streamXOR(this._key,s,r,l,4),this._authenticate(l.subarray(l.length-this.tagLength,l.length),a,l.subarray(0,l.length-this.tagLength),i),lf.wipe(s),l},n.prototype.open=function(t,r,i,o){if(t.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(r.length<this.tagLength)return null;var s=new Uint8Array(16);s.set(t,s.length-t.length);var a=new Uint8Array(32);Ju.stream(this._key,s,a,4);var f=new Uint8Array(this.tagLength);if(this._authenticate(f,a,r.subarray(0,r.length-this.tagLength),i),!gT.equal(f,r.subarray(r.length-this.tagLength,r.length)))return null;var l=r.length-this.tagLength,p;if(o){if(o.length!==l)throw new Error("ChaCha20Poly1305: incorrect destination length");p=o}else p=new Uint8Array(l);return Ju.streamXOR(this._key,s,r.subarray(0,r.length-this.tagLength),p,4),lf.wipe(s),p},n.prototype.clean=function(){return lf.wipe(this._key),this},n.prototype._authenticate=function(t,r,i,o){var s=new bT.Poly1305(r);o&&(s.update(o),o.length%16>0&&s.update(w6.subarray(o.length%16))),s.update(i),i.length%16>0&&s.update(w6.subarray(i.length%16));var a=new Uint8Array(8);o&&x6.writeUint64LE(o.length,a),s.update(a),x6.writeUint64LE(i.length,a),s.update(a);for(var f=s.digest(),l=0;l<f.length;l++)t[l]=f[l];s.clean(),lf.wipe(f),lf.wipe(a)},n}();ni.ChaCha20Poly1305=yT});var S6=de(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});var _6=b6(),A6=E6(),hf=Or();ii.KEY_LENGTH=32;ii.NONCE_LENGTH=24;ii.TAG_LENGTH=16;var vT=function(){function n(t){if(this.nonceLength=ii.NONCE_LENGTH,this.tagLength=ii.TAG_LENGTH,t.length!==ii.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(t)}return n.prototype.seal=function(t,r,i,o){if(t.length!==24)throw new Error("XChaCha20Poly1305: incorrect nonce length");var s=_6.hchacha(this._key,t.subarray(0,16),new Uint8Array(32)),a=new Uint8Array(12);a.set(t.subarray(16),4);var f=new A6.ChaCha20Poly1305(s),l=f.seal(a,r,i,o);return hf.wipe(s),hf.wipe(a),f.clean(),l},n.prototype.open=function(t,r,i,o){if(t.length!==24)throw new Error("XChaCha20Poly1305: incorrect nonce length");if(r.length<this.tagLength)return null;var s=_6.hchacha(this._key,t.subarray(0,16),new Uint8Array(32)),a=new Uint8Array(12);a.set(t.subarray(16),4);var f=new A6.ChaCha20Poly1305(s),l=f.open(a,r,i,o);return hf.wipe(s),hf.wipe(a),f.clean(),l},n.prototype.clean=function(){return hf.wipe(this._key),this},n}();ii.XChaCha20Poly1305=vT});var ix=de((Xq,nx)=>{"use strict";nx.exports=function(n,t){t||(t={}),typeof t=="function"&&(t={cmp:t});var r=typeof t.cycles=="boolean"?t.cycles:!1,i=t.cmp&&function(s){return function(a){return function(f,l){var p={key:f,value:a[f]},b={key:l,value:a[l]};return s(p,b)}}}(t.cmp),o=[];return function s(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a!==void 0){if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);var f,l;if(Array.isArray(a)){for(l="[",f=0;f<a.length;f++)f&&(l+=","),l+=s(a[f])||"null";return l+"]"}if(a===null)return"null";if(o.indexOf(a)!==-1){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var p=o.push(a)-1,b=Object.keys(a).sort(i&&i(a));for(l="",f=0;f<b.length;f++){var v=b[f],C=s(a[v]);C&&(l&&(l+=","),l+=JSON.stringify(v)+":"+C)}return o.splice(p,1),"{"+l+"}"}}(n)}});var yx=de((Ez,gx)=>{"use strict";function ok(n,t){for(let r=0;r<n.byteLength;r++){if(n[r]<t[r])return-1;if(n[r]>t[r])return 1}return n.byteLength>t.byteLength?1:n.byteLength<t.byteLength?-1:0}gx.exports=ok});var xx=de((_z,vx)=>{"use strict";function sk(n,t){t||(t=n.reduce((o,s)=>o+s.length,0));let r=new Uint8Array(t),i=0;for(let o of n)r.set(o,i),i+=o.length;return r}vx.exports=sk});var Ex=de((Az,wx)=>{"use strict";function ak(n,t){if(n===t)return!0;if(n.byteLength!==t.byteLength)return!1;for(let r=0;r<n.byteLength;r++)if(n[r]!==t[r])return!1;return!0}wx.exports=ak});var up=de((Sz,Mx)=>{"use strict";var{bases:_x}=(Vf(),aa(M1));function Sx(n,t,r,i){return{name:n,prefix:t,encoder:{name:n,prefix:t,encode:r},decoder:{decode:i}}}var Ax=Sx("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),cp=Sx("ascii","a",n=>{let t="a";for(let r=0;r<n.length;r++)t+=String.fromCharCode(n[r]);return t},n=>{n=n.substring(1);let t=new Uint8Array(n.length);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}),fk={utf8:Ax,"utf-8":Ax,hex:_x.base16,latin1:cp,ascii:cp,binary:cp,..._x};Mx.exports=fk});var kx=de((Mz,Tx)=>{"use strict";var ck=up();function uk(n,t="utf8"){let r=ck[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return r.decoder.decode(`${r.prefix}${n}`)}Tx.exports=uk});var Dx=de((Tz,Cx)=>{"use strict";var lk=up();function hk(n,t="utf8"){let r=lk[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return r.encoder.encode(n).substring(1)}Cx.exports=hk});var Ix=de((kz,Ox)=>{"use strict";function dk(n,t){if(n.length!==t.length)throw new Error("Inputs should have the same length");let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n[i]^t[i];return r}Ox.exports=dk});var Af=de((Cz,Rx)=>{"use strict";var pk=yx(),mk=xx(),bk=Ex(),gk=kx(),yk=Dx(),vk=Ix();Rx.exports={compare:pk,concat:mk,equals:bk,fromString:gk,toString:yk,xor:vk}});var x5=de((gH,v5)=>{v5.exports=typeof self=="object"?self.FormData:window.FormData});var eD={};Qe(eD,{CeramicClient:()=>js,DIDSession:()=>Nn,Document:()=>Pn,Orbis:()=>Kp,StreamUtils:()=>Xe,TileDocument:()=>Lr});Hr();Xo();var n1={tile:0,"caip10-link":1,model:2,MID:3,UNLOADABLE:4};function jw(n){let t=n1[n];if(typeof t<"u")return t;throw new Error(`No stream type registered for name ${n}`)}function Gw(n){let t=Object.entries(n1).find(([,r])=>r===n);if(t)return t[0];throw new Error(`No stream type registered for index ${n}`)}var sr=class{};sr.nameByCode=Gw;sr.codeByName=jw;var wh=Ve(ha(),1);Pl();ba();Qo();zf();da();function ar(n){let t,r,i;return typeof n=="object"?(t=n.hashFunction,r=n.expiring,i=n.tags):t=n,(o,s,a)=>{if(a.value!=null)a.value=O1(a.value,t,r,i);else if(a.get!=null)a.get=O1(a.get,t,r,i);else throw"Only put a Memoize() decorator on a method or get accessor."}}var Zl=new Map;function O1(n,t,r=0,i){let o=Symbol("__memoized_map__");return function(...s){let a;this.hasOwnProperty(o)||Object.defineProperty(this,o,{configurable:!1,enumerable:!1,writable:!1,value:new Map});let f=this[o];if(Array.isArray(i))for(let l of i)Zl.has(l)?Zl.get(l).push(f):Zl.set(l,[f]);if(t||s.length>0||r>0){let l;t===!0?l=s.map(v=>v.toString()).join("!"):t?l=t.apply(this,s):l=s[0];let p=`${l}__timestamp`,b=!1;if(r>0)if(!f.has(p))b=!0;else{let v=f.get(p);b=Date.now()-v>r}f.has(l)&&!b?a=f.get(l):(a=n.apply(this,s),f.set(l,a),r>0&&f.set(p,Date.now()))}else{let l=this;f.has(l)?a=f.get(l):(a=n.apply(this,s),f.set(l,a))}return a}}Hr();Wl();var Yf=({enumerable:n=!0,configurable:t=!1}={})=>({enumerable:n,configurable:t,writable:!1}),Ql=function*(n,t){if(n!=null&&!(n instanceof Uint8Array))for(let[r,i]of Object.entries(n)){let o=[...t,r];if(i!=null&&typeof i=="object")if(Array.isArray(i))for(let[s,a]of i.entries()){let f=[...o,s],l=Me.asCID(a);l?yield[f.join("/"),l]:typeof a=="object"&&(yield*Ql(a,f))}else{let s=Me.asCID(i);s?yield[o.join("/"),s]:yield*Ql(i,o)}}},eh=function*(n,t){if(n!=null)for(let[r,i]of Object.entries(n)){let o=[...t,r];if(yield o.join("/"),i!=null&&!(i instanceof Uint8Array)&&typeof i=="object"&&!Me.asCID(i))if(Array.isArray(i))for(let[s,a]of i.entries()){let f=[...o,s];yield f.join("/"),typeof a=="object"&&!Me.asCID(a)&&(yield*eh(a,f))}else yield*eh(i,o)}},L4=(n,t)=>{let r=n;for(let[i,o]of t.entries()){if(r=r[o],r==null)throw new Error(`Object has no property at ${t.slice(0,i+1).map(a=>`[${JSON.stringify(a)}]`).join("")}`);let s=Me.asCID(r);if(s)return{value:s,remaining:t.slice(i+1).join("/")}}return{value:r}},Xf=class{constructor({cid:t,bytes:r,value:i}){if(!t||!r||typeof i>"u")throw new Error("Missing required argument");this.cid=t,this.bytes=r,this.value=i,this.asBlock=this,Object.defineProperties(this,{cid:Yf(),bytes:Yf(),value:Yf(),asBlock:Yf()})}links(){return Ql(this.value,[])}tree(){return eh(this.value,[])}get(t="/"){return L4(this.value,t.split("/").filter(Boolean))}},oo=async({value:n,codec:t,hasher:r})=>{if(typeof n>"u")throw new Error('Missing required argument "value"');if(!t||!r)throw new Error("Missing required argument: codec or hasher");let i=t.encode(n),o=await r.digest(i),s=Me.create(1,t.code,o);return new Xf({value:n,bytes:i,cid:s})},I1=async({bytes:n,codec:t,hasher:r})=>{if(!n)throw new Error('Missing required argument "bytes"');if(!t||!r)throw new Error("Missing required argument: codec or hasher");let i=t.decode(n),o=await r.digest(n),s=Me.create(1,t.code,o);return new Xf({value:i,bytes:n,cid:s})};Xo();ma();var gh=Ve(ha(),1);var Vr={};Qe(Vr,{code:()=>ss,decode:()=>hh,encode:()=>ao,name:()=>y8});var B4=["string","number","bigint","symbol"],U4=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function R1(n){if(n===null)return"null";if(n===void 0)return"undefined";if(n===!0||n===!1)return"boolean";let t=typeof n;if(B4.includes(t))return t;if(t==="function")return"Function";if(Array.isArray(n))return"Array";if(F4(n))return"Buffer";let r=$4(n);return r||"Object"}function F4(n){return n&&n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer.call(null,n)}function $4(n){let t=Object.prototype.toString.call(n).slice(8,-1);if(U4.includes(t))return t}var ue=class{constructor(t,r,i){this.major=t,this.majorEncoded=t<<5,this.name=r,this.terminal=i}toString(){return`Type[${this.major}].${this.name}`}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}};ue.uint=new ue(0,"uint",!0);ue.negint=new ue(1,"negint",!0);ue.bytes=new ue(2,"bytes",!0);ue.string=new ue(3,"string",!0);ue.array=new ue(4,"array",!1);ue.map=new ue(5,"map",!1);ue.tag=new ue(6,"tag",!1);ue.float=new ue(7,"float",!0);ue.false=new ue(7,"false",!0);ue.true=new ue(7,"true",!0);ue.null=new ue(7,"null",!0);ue.undefined=new ue(7,"undefined",!0);ue.break=new ue(7,"break",!0);var xe=class{constructor(t,r,i){this.type=t,this.value=r,this.encodedLength=i,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};var es=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",q4=new TextDecoder,z4=new TextEncoder;function Zf(n){return es&&globalThis.Buffer.isBuffer(n)}function rh(n){return n instanceof Uint8Array?Zf(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n:Uint8Array.from(n)}var B1=es?(n,t,r)=>r-t>64?globalThis.Buffer.from(n.subarray(t,r)).toString("utf8"):P1(n,t,r):(n,t,r)=>r-t>64?q4.decode(n.subarray(t,r)):P1(n,t,r),U1=es?n=>n.length>64?globalThis.Buffer.from(n):N1(n):n=>n.length>64?z4.encode(n):N1(n),mn=n=>Uint8Array.from(n),ts=es?(n,t,r)=>Zf(n)?new Uint8Array(n.subarray(t,r)):n.slice(t,r):(n,t,r)=>n.slice(t,r),F1=es?(n,t)=>(n=n.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),rh(globalThis.Buffer.concat(n,t))):(n,t)=>{let r=new Uint8Array(t),i=0;for(let o of n)i+o.length>r.length&&(o=o.subarray(0,r.length-i)),r.set(o,i),i+=o.length;return r},$1=es?n=>globalThis.Buffer.allocUnsafe(n):n=>new Uint8Array(n);function q1(n,t){if(Zf(n)&&Zf(t))return n.compare(t);for(let r=0;r<n.length;r++)if(n[r]!==t[r])return n[r]<t[r]?-1:1;return 0}function N1(n,t=1/0){let r,i=n.length,o=null,s=[];for(let a=0;a<i;++a){if(r=n.charCodeAt(a),r>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}else if(a+1===i){(t-=3)>-1&&s.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),o=r;continue}r=(o-55296<<10|r-56320)+65536}else o&&(t-=3)>-1&&s.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function P1(n,t,r){let i=[];for(;t<r;){let o=n[t],s=null,a=o>239?4:o>223?3:o>191?2:1;if(t+a<=r){let f,l,p,b;switch(a){case 1:o<128&&(s=o);break;case 2:f=n[t+1],(f&192)===128&&(b=(o&31)<<6|f&63,b>127&&(s=b));break;case 3:f=n[t+1],l=n[t+2],(f&192)===128&&(l&192)===128&&(b=(o&15)<<12|(f&63)<<6|l&63,b>2047&&(b<55296||b>57343)&&(s=b));break;case 4:f=n[t+1],l=n[t+2],p=n[t+3],(f&192)===128&&(l&192)===128&&(p&192)===128&&(b=(o&15)<<18|(f&63)<<12|(l&63)<<6|p&63,b>65535&&b<1114112&&(s=b))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|s&1023),i.push(s),t+=a}return H4(i)}var L1=4096;function H4(n){let t=n.length;if(t<=L1)return String.fromCharCode.apply(String,n);let r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,n.slice(i,i+=L1));return r}var K4=256,ga=class{constructor(t=K4){this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(t){let r=this.chunks[this.chunks.length-1];if(this.cursor+t.length<=this.maxCursor+1){let o=r.length-(this.maxCursor-this.cursor)-1;r.set(t,o)}else{if(r){let o=r.length-(this.maxCursor-this.cursor)-1;o<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,o),this.maxCursor=this.cursor-1)}t.length<64&&t.length<this.chunkSize?(r=$1(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(t,0)):(this.chunks.push(t),this.maxCursor+=t.length)}this.cursor+=t.length}toBytes(t=!1){let r;if(this.chunks.length===1){let i=this.chunks[0];t&&this.cursor>i.length/2?(r=this.cursor===i.length?i:i.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=ts(i,0,this.cursor)}else r=F1(this.chunks,this.cursor);return t&&this.reset(),r}};var ze="CBOR decode error:",nh="CBOR encode error:",ya=[];ya[23]=1;ya[24]=2;ya[25]=3;ya[26]=5;ya[27]=9;function Bn(n,t,r){if(n.length-t<r)throw new Error(`${ze} not enough data for type`)}var At=[24,256,65536,4294967296,BigInt("18446744073709551616")];function fr(n,t,r){Bn(n,t,1);let i=n[t];if(r.strict===!0&&i<At[0])throw new Error(`${ze} integer encoded in more bytes than necessary (strict decode)`);return i}function cr(n,t,r){Bn(n,t,2);let i=n[t]<<8|n[t+1];if(r.strict===!0&&i<At[1])throw new Error(`${ze} integer encoded in more bytes than necessary (strict decode)`);return i}function ur(n,t,r){Bn(n,t,4);let i=n[t]*16777216+(n[t+1]<<16)+(n[t+2]<<8)+n[t+3];if(r.strict===!0&&i<At[2])throw new Error(`${ze} integer encoded in more bytes than necessary (strict decode)`);return i}function lr(n,t,r){Bn(n,t,8);let i=n[t]*16777216+(n[t+1]<<16)+(n[t+2]<<8)+n[t+3],o=n[t+4]*16777216+(n[t+5]<<16)+(n[t+6]<<8)+n[t+7],s=(BigInt(i)<<BigInt(32))+BigInt(o);if(r.strict===!0&&s<At[3])throw new Error(`${ze} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(r.allowBigInt===!0)return s;throw new Error(`${ze} integers outside of the safe integer range are not supported`)}function z1(n,t,r,i){return new xe(ue.uint,fr(n,t+1,i),2)}function H1(n,t,r,i){return new xe(ue.uint,cr(n,t+1,i),3)}function K1(n,t,r,i){return new xe(ue.uint,ur(n,t+1,i),5)}function j1(n,t,r,i){return new xe(ue.uint,lr(n,t+1,i),9)}function Tr(n,t){return Rt(n,0,t.value)}function Rt(n,t,r){if(r<At[0]){let i=Number(r);n.push([t|i])}else if(r<At[1]){let i=Number(r);n.push([t|24,i])}else if(r<At[2]){let i=Number(r);n.push([t|25,i>>>8,i&255])}else if(r<At[3]){let i=Number(r);n.push([t|26,i>>>24&255,i>>>16&255,i>>>8&255,i&255])}else{let i=BigInt(r);if(i<At[4]){let o=[t|27,0,0,0,0,0,0,0],s=Number(i&BigInt(4294967295)),a=Number(i>>BigInt(32)&BigInt(4294967295));o[8]=s&255,s=s>>8,o[7]=s&255,s=s>>8,o[6]=s&255,s=s>>8,o[5]=s&255,o[4]=a&255,a=a>>8,o[3]=a&255,a=a>>8,o[2]=a&255,a=a>>8,o[1]=a&255,n.push(o)}else throw new Error(`${ze} encountered BigInt larger than allowable range`)}}Tr.encodedSize=function(t){return Rt.encodedSize(t.value)};Rt.encodedSize=function(t){return t<At[0]?1:t<At[1]?2:t<At[2]?3:t<At[3]?5:9};Tr.compareTokens=function(t,r){return t.value<r.value?-1:t.value>r.value?1:0};function G1(n,t,r,i){return new xe(ue.negint,-1-fr(n,t+1,i),2)}function J1(n,t,r,i){return new xe(ue.negint,-1-cr(n,t+1,i),3)}function V1(n,t,r,i){return new xe(ue.negint,-1-ur(n,t+1,i),5)}var ih=BigInt(-1),W1=BigInt(1);function Y1(n,t,r,i){let o=lr(n,t+1,i);if(typeof o!="bigint"){let s=-1-o;if(s>=Number.MIN_SAFE_INTEGER)return new xe(ue.negint,s,9)}if(i.allowBigInt!==!0)throw new Error(`${ze} integers outside of the safe integer range are not supported`);return new xe(ue.negint,ih-BigInt(o),9)}function Qf(n,t){let r=t.value,i=typeof r=="bigint"?r*ih-W1:r*-1-1;Rt(n,t.type.majorEncoded,i)}Qf.encodedSize=function(t){let r=t.value,i=typeof r=="bigint"?r*ih-W1:r*-1-1;return i<At[0]?1:i<At[1]?2:i<At[2]?3:i<At[3]?5:9};Qf.compareTokens=function(t,r){return t.value<r.value?1:t.value>r.value?-1:0};function va(n,t,r,i){Bn(n,t,r+i);let o=ts(n,t+r,t+r+i);return new xe(ue.bytes,o,r+i)}function X1(n,t,r,i){return va(n,t,1,r)}function Z1(n,t,r,i){return va(n,t,2,fr(n,t+1,i))}function Q1(n,t,r,i){return va(n,t,3,cr(n,t+1,i))}function em(n,t,r,i){return va(n,t,5,ur(n,t+1,i))}function tm(n,t,r,i){let o=lr(n,t+1,i);if(typeof o=="bigint")throw new Error(`${ze} 64-bit integer bytes lengths not supported`);return va(n,t,9,o)}function ec(n){return n.encodedBytes===void 0&&(n.encodedBytes=n.type===ue.string?U1(n.value):n.value),n.encodedBytes}function rs(n,t){let r=ec(t);Rt(n,t.type.majorEncoded,r.length),n.push(r)}rs.encodedSize=function(t){let r=ec(t);return Rt.encodedSize(r.length)+r.length};rs.compareTokens=function(t,r){return G4(ec(t),ec(r))};function G4(n,t){return n.length<t.length?-1:n.length>t.length?1:q1(n,t)}function xa(n,t,r,i,o){let s=r+i;Bn(n,t,s);let a=new xe(ue.string,B1(n,t+r,t+s),s);return o.retainStringBytes===!0&&(a.byteValue=ts(n,t+r,t+s)),a}function rm(n,t,r,i){return xa(n,t,1,r,i)}function nm(n,t,r,i){return xa(n,t,2,fr(n,t+1,i),i)}function im(n,t,r,i){return xa(n,t,3,cr(n,t+1,i),i)}function om(n,t,r,i){return xa(n,t,5,ur(n,t+1,i),i)}function sm(n,t,r,i){let o=lr(n,t+1,i);if(typeof o=="bigint")throw new Error(`${ze} 64-bit integer string lengths not supported`);return xa(n,t,9,o,i)}var am=rs;function ns(n,t,r,i){return new xe(ue.array,i,r)}function fm(n,t,r,i){return ns(n,t,1,r)}function cm(n,t,r,i){return ns(n,t,2,fr(n,t+1,i))}function um(n,t,r,i){return ns(n,t,3,cr(n,t+1,i))}function lm(n,t,r,i){return ns(n,t,5,ur(n,t+1,i))}function hm(n,t,r,i){let o=lr(n,t+1,i);if(typeof o=="bigint")throw new Error(`${ze} 64-bit integer array lengths not supported`);return ns(n,t,9,o)}function dm(n,t,r,i){if(i.allowIndefinite===!1)throw new Error(`${ze} indefinite length items not allowed`);return ns(n,t,1,1/0)}function tc(n,t){Rt(n,ue.array.majorEncoded,t.value)}tc.compareTokens=Tr.compareTokens;tc.encodedSize=function(t){return Rt.encodedSize(t.value)};function is(n,t,r,i){return new xe(ue.map,i,r)}function pm(n,t,r,i){return is(n,t,1,r)}function mm(n,t,r,i){return is(n,t,2,fr(n,t+1,i))}function bm(n,t,r,i){return is(n,t,3,cr(n,t+1,i))}function gm(n,t,r,i){return is(n,t,5,ur(n,t+1,i))}function ym(n,t,r,i){let o=lr(n,t+1,i);if(typeof o=="bigint")throw new Error(`${ze} 64-bit integer map lengths not supported`);return is(n,t,9,o)}function vm(n,t,r,i){if(i.allowIndefinite===!1)throw new Error(`${ze} indefinite length items not allowed`);return is(n,t,1,1/0)}function rc(n,t){Rt(n,ue.map.majorEncoded,t.value)}rc.compareTokens=Tr.compareTokens;rc.encodedSize=function(t){return Rt.encodedSize(t.value)};function xm(n,t,r,i){return new xe(ue.tag,r,1)}function wm(n,t,r,i){return new xe(ue.tag,fr(n,t+1,i),2)}function Em(n,t,r,i){return new xe(ue.tag,cr(n,t+1,i),3)}function _m(n,t,r,i){return new xe(ue.tag,ur(n,t+1,i),5)}function Am(n,t,r,i){return new xe(ue.tag,lr(n,t+1,i),9)}function nc(n,t){Rt(n,ue.tag.majorEncoded,t.value)}nc.compareTokens=Tr.compareTokens;nc.encodedSize=function(t){return Rt.encodedSize(t.value)};var Z4=20,Q4=21,e8=22,t8=23;function Sm(n,t,r,i){if(i.allowUndefined===!1)throw new Error(`${ze} undefined values are not supported`);return i.coerceUndefinedToNull===!0?new xe(ue.null,null,1):new xe(ue.undefined,void 0,1)}function Mm(n,t,r,i){if(i.allowIndefinite===!1)throw new Error(`${ze} indefinite length items not allowed`);return new xe(ue.break,void 0,1)}function oh(n,t,r){if(r){if(r.allowNaN===!1&&Number.isNaN(n))throw new Error(`${ze} NaN values are not supported`);if(r.allowInfinity===!1&&(n===1/0||n===-1/0))throw new Error(`${ze} Infinity values are not supported`)}return new xe(ue.float,n,t)}function Tm(n,t,r,i){return oh(sh(n,t+1),3,i)}function km(n,t,r,i){return oh(ah(n,t+1),5,i)}function Cm(n,t,r,i){return oh(Rm(n,t+1),9,i)}function ic(n,t,r){let i=t.value;if(i===!1)n.push([ue.float.majorEncoded|Z4]);else if(i===!0)n.push([ue.float.majorEncoded|Q4]);else if(i===null)n.push([ue.float.majorEncoded|e8]);else if(i===void 0)n.push([ue.float.majorEncoded|t8]);else{let o,s=!1;(!r||r.float64!==!0)&&(Om(i),o=sh(Gr,1),i===o||Number.isNaN(i)?(Gr[0]=249,n.push(Gr.slice(0,3)),s=!0):(Im(i),o=ah(Gr,1),i===o&&(Gr[0]=250,n.push(Gr.slice(0,5)),s=!0))),s||(r8(i),o=Rm(Gr,1),Gr[0]=251,n.push(Gr.slice(0,9)))}}ic.encodedSize=function(t,r){let i=t.value;if(i===!1||i===!0||i===null||i===void 0)return 1;if(!r||r.float64!==!0){Om(i);let o=sh(Gr,1);if(i===o||Number.isNaN(i))return 3;if(Im(i),o=ah(Gr,1),i===o)return 5}return 9};var Dm=new ArrayBuffer(9),kr=new DataView(Dm,1),Gr=new Uint8Array(Dm,0);function Om(n){if(n===1/0)kr.setUint16(0,31744,!1);else if(n===-1/0)kr.setUint16(0,64512,!1);else if(Number.isNaN(n))kr.setUint16(0,32256,!1);else{kr.setFloat32(0,n);let t=kr.getUint32(0),r=(t&2139095040)>>23,i=t&8388607;if(r===255)kr.setUint16(0,31744,!1);else if(r===0)kr.setUint16(0,(n&2147483648)>>16|i>>13,!1);else{let o=r-127;o<-24?kr.setUint16(0,0):o<-14?kr.setUint16(0,(t&2147483648)>>16|1<<24+o,!1):kr.setUint16(0,(t&2147483648)>>16|o+15<<10|i>>13,!1)}}}function sh(n,t){if(n.length-t<2)throw new Error(`${ze} not enough data for float16`);let r=(n[t]<<8)+n[t+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let i=r>>10&31,o=r&1023,s;return i===0?s=o*2**-24:i!==31?s=(o+1024)*2**(i-25):s=o===0?1/0:NaN,r&32768?-s:s}function Im(n){kr.setFloat32(0,n,!1)}function ah(n,t){if(n.length-t<4)throw new Error(`${ze} not enough data for float32`);let r=(n.byteOffset||0)+t;return new DataView(n.buffer,r,4).getFloat32(0,!1)}function r8(n){kr.setFloat64(0,n,!1)}function Rm(n,t){if(n.length-t<8)throw new Error(`${ze} not enough data for float64`);let r=(n.byteOffset||0)+t;return new DataView(n.buffer,r,8).getFloat64(0,!1)}ic.compareTokens=Tr.compareTokens;function tt(n,t,r){throw new Error(`${ze} encountered invalid minor (${r}) for major ${n[t]>>>5}`)}function oc(n){return()=>{throw new Error(`${ze} ${n}`)}}var ge=[];for(let n=0;n<=23;n++)ge[n]=tt;ge[24]=z1;ge[25]=H1;ge[26]=K1;ge[27]=j1;ge[28]=tt;ge[29]=tt;ge[30]=tt;ge[31]=tt;for(let n=32;n<=55;n++)ge[n]=tt;ge[56]=G1;ge[57]=J1;ge[58]=V1;ge[59]=Y1;ge[60]=tt;ge[61]=tt;ge[62]=tt;ge[63]=tt;for(let n=64;n<=87;n++)ge[n]=X1;ge[88]=Z1;ge[89]=Q1;ge[90]=em;ge[91]=tm;ge[92]=tt;ge[93]=tt;ge[94]=tt;ge[95]=oc("indefinite length bytes/strings are not supported");for(let n=96;n<=119;n++)ge[n]=rm;ge[120]=nm;ge[121]=im;ge[122]=om;ge[123]=sm;ge[124]=tt;ge[125]=tt;ge[126]=tt;ge[127]=oc("indefinite length bytes/strings are not supported");for(let n=128;n<=151;n++)ge[n]=fm;ge[152]=cm;ge[153]=um;ge[154]=lm;ge[155]=hm;ge[156]=tt;ge[157]=tt;ge[158]=tt;ge[159]=dm;for(let n=160;n<=183;n++)ge[n]=pm;ge[184]=mm;ge[185]=bm;ge[186]=gm;ge[187]=ym;ge[188]=tt;ge[189]=tt;ge[190]=tt;ge[191]=vm;for(let n=192;n<=215;n++)ge[n]=xm;ge[216]=wm;ge[217]=Em;ge[218]=_m;ge[219]=Am;ge[220]=tt;ge[221]=tt;ge[222]=tt;ge[223]=tt;for(let n=224;n<=243;n++)ge[n]=oc("simple values are not supported");ge[244]=tt;ge[245]=tt;ge[246]=tt;ge[247]=Sm;ge[248]=oc("simple values are not supported");ge[249]=Tm;ge[250]=km;ge[251]=Cm;ge[252]=tt;ge[253]=tt;ge[254]=tt;ge[255]=Mm;var Jr=[];for(let n=0;n<24;n++)Jr[n]=new xe(ue.uint,n,1);for(let n=-1;n>=-24;n--)Jr[31-n]=new xe(ue.negint,n,1);Jr[64]=new xe(ue.bytes,new Uint8Array(0),1);Jr[96]=new xe(ue.string,"",1);Jr[128]=new xe(ue.array,0,1);Jr[160]=new xe(ue.map,0,1);Jr[244]=new xe(ue.false,!1,1);Jr[245]=new xe(ue.true,!0,1);Jr[246]=new xe(ue.null,null,1);function Nm(n){switch(n.type){case ue.false:return mn([244]);case ue.true:return mn([245]);case ue.null:return mn([246]);case ue.bytes:return n.value.length?void 0:mn([64]);case ue.string:return n.value===""?mn([96]):void 0;case ue.array:return n.value===0?mn([128]):void 0;case ue.map:return n.value===0?mn([160]):void 0;case ue.uint:return n.value<24?mn([Number(n.value)]):void 0;case ue.negint:if(n.value>=-24)return mn([31-Number(n.value)])}}var i8={float64:!1,mapSorter:a8,quickEncodeToken:Nm};function o8(){let n=[];return n[ue.uint.major]=Tr,n[ue.negint.major]=Qf,n[ue.bytes.major]=rs,n[ue.string.major]=am,n[ue.array.major]=tc,n[ue.map.major]=rc,n[ue.tag.major]=nc,n[ue.float.major]=ic,n}var Pm=o8(),fh=new ga,os=class{constructor(t,r){this.obj=t,this.parent=r}includes(t){let r=this;do if(r.obj===t)return!0;while(r=r.parent);return!1}static createCheck(t,r){if(t&&t.includes(r))throw new Error(`${nh} object contains circular references`);return new os(r,t)}},li={null:new xe(ue.null,null),undefined:new xe(ue.undefined,void 0),true:new xe(ue.true,!0),false:new xe(ue.false,!1),emptyArray:new xe(ue.array,0),emptyMap:new xe(ue.map,0)},hi={number(n,t,r,i){return!Number.isInteger(n)||!Number.isSafeInteger(n)?new xe(ue.float,n):n>=0?new xe(ue.uint,n):new xe(ue.negint,n)},bigint(n,t,r,i){return n>=BigInt(0)?new xe(ue.uint,n):new xe(ue.negint,n)},Uint8Array(n,t,r,i){return new xe(ue.bytes,n)},string(n,t,r,i){return new xe(ue.string,n)},boolean(n,t,r,i){return n?li.true:li.false},null(n,t,r,i){return li.null},undefined(n,t,r,i){return li.undefined},ArrayBuffer(n,t,r,i){return new xe(ue.bytes,new Uint8Array(n))},DataView(n,t,r,i){return new xe(ue.bytes,new Uint8Array(n.buffer,n.byteOffset,n.byteLength))},Array(n,t,r,i){if(!n.length)return r.addBreakTokens===!0?[li.emptyArray,new xe(ue.break)]:li.emptyArray;i=os.createCheck(i,n);let o=[],s=0;for(let a of n)o[s++]=sc(a,r,i);return r.addBreakTokens?[new xe(ue.array,n.length),o,new xe(ue.break)]:[new xe(ue.array,n.length),o]},Object(n,t,r,i){let o=t!=="Object",s=o?n.keys():Object.keys(n),a=o?n.size:s.length;if(!a)return r.addBreakTokens===!0?[li.emptyMap,new xe(ue.break)]:li.emptyMap;i=os.createCheck(i,n);let f=[],l=0;for(let p of s)f[l++]=[sc(p,r,i),sc(o?n.get(p):n[p],r,i)];return s8(f,r),r.addBreakTokens?[new xe(ue.map,a),f,new xe(ue.break)]:[new xe(ue.map,a),f]}};hi.Map=hi.Object;hi.Buffer=hi.Uint8Array;for(let n of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))hi[`${n}Array`]=hi.DataView;function sc(n,t={},r){let i=R1(n),o=t&&t.typeEncoders&&t.typeEncoders[i]||hi[i];if(typeof o=="function"){let a=o(n,i,t,r);if(a!=null)return a}let s=hi[i];if(!s)throw new Error(`${nh} unsupported type: ${i}`);return s(n,i,t,r)}function s8(n,t){t.mapSorter&&n.sort(t.mapSorter)}function a8(n,t){let r=Array.isArray(n[0])?n[0][0]:n[0],i=Array.isArray(t[0])?t[0][0]:t[0];if(r.type!==i.type)return r.type.compare(i.type);let o=r.type.major,s=Pm[o].compareTokens(r,i);return s===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),s}function Lm(n,t,r,i){if(Array.isArray(t))for(let o of t)Lm(n,o,r,i);else r[t.type.major](n,t,i)}function f8(n,t,r){let i=sc(n,r);if(!Array.isArray(i)&&r.quickEncodeToken){let o=r.quickEncodeToken(i);if(o)return o;let s=t[i.type.major];if(s.encodedSize){let a=s.encodedSize(i,r),f=new ga(a);if(s(f,i,r),f.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${i} was wrong`);return rh(f.chunks[0])}}return fh.reset(),Lm(fh,i,t,r),fh.toBytes(!0)}function ch(n,t){return t=Object.assign({},i8,t),f8(n,Pm,t)}var c8={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},uh=class{constructor(t,r={}){this.pos=0,this.data=t,this.options=r}done(){return this.pos>=this.data.length}next(){let t=this.data[this.pos],r=Jr[t];if(r===void 0){let i=ge[t];if(!i)throw new Error(`${ze} no decoder for major type ${t>>>5} (byte 0x${t.toString(16).padStart(2,"0")})`);let o=t&31;r=i(this.data,this.pos,o,this.options)}return this.pos+=r.encodedLength,r}},wa=Symbol.for("DONE"),ac=Symbol.for("BREAK");function u8(n,t,r){let i=[];for(let o=0;o<n.value;o++){let s=Ea(t,r);if(s===ac){if(n.value===1/0)break;throw new Error(`${ze} got unexpected break to lengthed array`)}if(s===wa)throw new Error(`${ze} found array but not enough entries (got ${o}, expected ${n.value})`);i[o]=s}return i}function l8(n,t,r){let i=r.useMaps===!0,o=i?void 0:{},s=i?new Map:void 0;for(let a=0;a<n.value;a++){let f=Ea(t,r);if(f===ac){if(n.value===1/0)break;throw new Error(`${ze} got unexpected break to lengthed map`)}if(f===wa)throw new Error(`${ze} found map but not enough entries (got ${a} [no key], expected ${n.value})`);if(i!==!0&&typeof f!="string")throw new Error(`${ze} non-string keys not supported (got ${typeof f})`);let l=Ea(t,r);if(l===wa)throw new Error(`${ze} found map but not enough entries (got ${a} [no value], expected ${n.value})`);i?s.set(f,l):o[f]=l}return i?s:o}function Ea(n,t){if(n.done())return wa;let r=n.next();if(r.type===ue.break)return ac;if(r.type.terminal)return r.value;if(r.type===ue.array)return u8(r,n,t);if(r.type===ue.map)return l8(r,n,t);if(r.type===ue.tag){if(t.tags&&typeof t.tags[r.value]=="function"){let i=Ea(n,t);return t.tags[r.value](i)}throw new Error(`${ze} tag not supported (${r.value})`)}throw new Error("unsupported")}function lh(n,t){if(!(n instanceof Uint8Array))throw new Error(`${ze} data to decode must be a Uint8Array`);t=Object.assign({},c8,t);let r=t.tokenizer||new uh(n,t),i=Ea(r,t);if(i===wa)throw new Error(`${ze} did not find any content to decode`);if(i===ac)throw new Error(`${ze} got unexpected break`);if(!r.done())throw new Error(`${ze} too many terminals, data makes no sense`);return i}Hr();var Bm=42;function d8(n){if(n.asCID!==n)return null;let t=Me.asCID(n);if(!t)return null;let r=new Uint8Array(t.bytes.byteLength+1);return r.set(t.bytes,1),[new xe(ue.tag,Bm),new xe(ue.bytes,r)]}function p8(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function m8(n){if(Number.isNaN(n))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(n===1/0||n===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var b8={float64:!0,typeEncoders:{Object:d8,undefined:p8,number:m8}};function g8(n){if(n[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return Me.decode(n.subarray(1))}var Um={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};Um.tags[Bm]=g8;var y8="dag-cbor",ss=113,ao=n=>ch(n,b8),hh=n=>lh(n,Um);function as(n){try{return n()}catch(t){return t}}Hr();var dh=Ve(ha(),1);ro();function fo(n){let t=dh.default.decode(n),r=dh.default.decode.bytes,i=n.subarray(r);return[t,i,r]}function v8(n){return n===0||n===1}function ph(n){let[t,r]=fo(n);if(!v8(t))throw new Error(`Unknown CID version ${t}`);let[i,o]=fo(r),[,s,a]=fo(o),[f,,l]=fo(s),p=o.subarray(0,a+l+f),b=o.subarray(a+l+f);return[Me.create(t,i,ua(p)),b]}Hr();Xo();function co(n,t="StreamRef"){let[r,i]=fo(n);if(r!==206)throw new Error(`Invalid ${t}, does not include streamid codec`);let[o,s]=fo(i),a=ph(s),[f,l]=a;if(l.length===0)return{kind:"stream-id",type:o,genesis:f};if(l.length===1&&l[0]===0)return{kind:"commit-id",type:o,genesis:f,commit:null};{let[p]=ph(l);return{kind:"commit-id",type:o,genesis:f,commit:p}}}var x8=/(ceramic:\/\/|\/ceramic\/)?([a-zA-Z0-9]+)(\?commit=([a-zA-Z0-9]+))?/;function fs(n,t="StreamRef"){let r=x8.exec(n)||[],i=r[2];if(!i)throw new Error(`Malformed ${t} string: ${n}`);let o=Kr.decode(i),s=co(o),a=r[4];return a?{kind:"commit-id",type:s.type,genesis:s.genesis,commit:mh(s.genesis,a)}:s}function w8(n){try{return typeof n=="string"?Me.parse(n):Me.asCID(n)}catch{return null}}function mh(n,t=null){if(!t||t==="0")return null;let r=w8(t);if(r)return n.equals(r)?null:r;throw new Error("Cannot specify commit as a number except to request commit 0 (the genesis commit)")}var _a=function(n,t,r,i){var o=arguments.length,s=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,t,r,i);else for(var f=n.length-1;f>=0;f--)(a=n[f])&&(s=(o<3?a(s):o>3?a(t,r,s):a(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},Cr=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},yh=class extends Error{constructor(t){super(`Invalid StreamID bytes ${Kr.encode(t)}: contains commit`)}},vh=class extends Error{constructor(t){super(`Invalid StreamID string ${t}: contains commit`)}};function qm(n){let t=co(n,"StreamID");if(t.kind==="stream-id")return new Ke(t.type,t.genesis);throw new yh(n)}function E8(n){return as(()=>qm(n))}function zm(n){let t=fs(n,"StreamID");if(t.kind==="stream-id")return new Ke(t.type,t.genesis);throw new vh(n)}function _8(n){return as(()=>zm(n))}var $m=Symbol.for("@ceramicnetwork/streamid/StreamID"),Ke=class{constructor(t,r){if(this._tag=$m,!(t||t===0))throw new Error("StreamID constructor: type required");if(!r)throw new Error("StreamID constructor: cid required");this._type=typeof t=="string"?sr.codeByName(t):t,this._cid=typeof r=="string"?Me.parse(r):r}static isInstance(t){return typeof t=="object"&&"_tag"in t&&t._tag===$m}static async fromGenesis(t,r){let i=await oo({value:r,codec:Vr,hasher:ui});return new Ke(t,i.cid)}get type(){return this._type}get typeName(){return sr.nameByCode(this._type)}get cid(){return this._cid}get bytes(){let t=gh.default.encode(206),r=gh.default.encode(this.type);return jr([t,r,this.cid.bytes])}get baseID(){return new Ke(this._type,this._cid)}equals(t){return Ke.isInstance(t)?this.type===t.type&&this.cid.equals(t.cid):!1}toString(){return Kr.encode(this.bytes)}toUrl(){return`ceramic://${this.toString()}`}[Symbol.for("nodejs.util.inspect.custom")](){return`StreamID(${this.toString()})`}[Symbol.toPrimitive](){return this.toString()}};Ke.fromBytes=qm;Ke.fromBytesNoThrow=E8;Ke.fromString=zm;Ke.fromStringNoThrow=_8;_a([ar(),Cr("design:type",String),Cr("design:paramtypes",[])],Ke.prototype,"typeName",null);_a([ar(),Cr("design:type",Uint8Array),Cr("design:paramtypes",[])],Ke.prototype,"bytes",null);_a([ar(),Cr("design:type",Ke),Cr("design:paramtypes",[])],Ke.prototype,"baseID",null);_a([ar(),Cr("design:type",Function),Cr("design:paramtypes",[]),Cr("design:returntype",String)],Ke.prototype,"toString",null);_a([ar(),Cr("design:type",Function),Cr("design:paramtypes",[]),Cr("design:returntype",String)],Ke.prototype,"toUrl",null);var us=function(n,t,r,i){var o=arguments.length,s=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,t,r,i);else for(var f=n.length-1;f>=0;f--)(a=n[f])&&(s=(o<3?a(s):o>3?a(t,r,s):a(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},rr=function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)},xh=function(n,t,r,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!o:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(n,r):o?o.value=r:t.set(n,r),r},Un=function(n,t,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(n):i?i.value:t.get(n)},cs,uo,Aa,Eh=class extends Error{constructor(t){super(`Error while parsing CommitID from bytes ${Kr.encode(t)}: no commit information provided`)}},_h=class extends Error{constructor(t){super(`Error while parsing CommitID from string ${t}: no commit information provided`)}};function Km(n){let t=co(n,"CommitID");if(t.kind==="commit-id")return new ut(t.type,t.genesis,t.commit);throw new Eh(n)}function A8(n){return as(()=>Km(n))}function jm(n){let t=fs(n,"CommitID");if(t.kind==="commit-id")return new ut(t.type,t.genesis,t.commit);throw new _h(n)}function S8(n){return as(()=>jm(n))}var Hm=Symbol.for("@ceramicnetwork/streamid/CommitID");function M8(n,t){return new ut(n.type,n.cid,t)}var ut=class{constructor(t,r,i=null){if(this._tag=Hm,cs.set(this,void 0),uo.set(this,void 0),Aa.set(this,void 0),!t&&t!==0)throw new Error("constructor: type required");if(!r)throw new Error("constructor: cid required");xh(this,cs,typeof t=="string"?sr.codeByName(t):t,"f"),xh(this,uo,typeof r=="string"?Me.parse(r):r,"f"),xh(this,Aa,mh(Un(this,uo,"f"),i),"f")}static isInstance(t){return typeof t=="object"&&"_tag"in t&&t._tag===Hm}get baseID(){return new Ke(Un(this,cs,"f"),Un(this,uo,"f"))}get type(){return Un(this,cs,"f")}get typeName(){return sr.nameByCode(Un(this,cs,"f"))}get cid(){return Un(this,uo,"f")}get commit(){return Un(this,Aa,"f")||Un(this,uo,"f")}get bytes(){let t=wh.default.encode(206),r=wh.default.encode(this.type),i=Un(this,Aa,"f")?.bytes||new Uint8Array([0]);return jr([t,r,this.cid.bytes,i])}equals(t){return this.type===t.type&&this.cid.equals(t.cid)&&this.commit.equals(t.commit)}toString(){return Kr.encode(this.bytes)}toUrl(){return`ceramic://${this.toString()}`}[(cs=new WeakMap,uo=new WeakMap,Aa=new WeakMap,Symbol.for("nodejs.util.inspect.custom"))](){return`CommitID(${this.toString()})`}[Symbol.toPrimitive](){return this.toString()}};ut.fromBytes=Km;ut.fromBytesNoThrow=A8;ut.fromString=jm;ut.fromStringNoThrow=S8;ut.make=M8;us([ar(),rr("design:type",Ke),rr("design:paramtypes",[])],ut.prototype,"baseID",null);us([ar(),rr("design:type",String),rr("design:paramtypes",[])],ut.prototype,"typeName",null);us([ar(),rr("design:type",Me),rr("design:paramtypes",[])],ut.prototype,"commit",null);us([ar(),rr("design:type",Uint8Array),rr("design:paramtypes",[])],ut.prototype,"bytes",null);us([ar(),rr("design:type",Function),rr("design:paramtypes",[]),rr("design:returntype",String)],ut.prototype,"toString",null);us([ar(),rr("design:type",Function),rr("design:paramtypes",[]),rr("design:returntype",String)],ut.prototype,"toUrl",null);Xo();var hr;(function(n){function t(o){let s=co(o);switch(s.kind){case"commit-id":return new ut(s.type,s.genesis,s.commit);case"stream-id":return new Ke(s.type,s.genesis);default:throw new Error(`Malformed StreamRef bytes: ${Kr.encode(o)}`)}}n.fromBytes=t;function r(o){let s=fs(o);switch(s.kind){case"commit-id":return new ut(s.type,s.genesis,s.commit);case"stream-id":return new Ke(s.type,s.genesis);default:throw new Error(`Malformed StreamRef string: ${o}`)}}n.fromString=r;function i(o){if(Ke.isInstance(o)||ut.isInstance(o))return o;if(o instanceof Uint8Array)return t(o);if(typeof o=="string")return r(o);throw new Error(`Can not build CommitID or StreamID from ${JSON.stringify(o)}`)}n.from=i})(hr||(hr={}));function Ah(n){return typeof n=="string"?Ke.fromString(n):n}function Gm(n,t){let r=new URL(n);for(let[i,o]of Object.entries(t))Ke.isInstance(o)?r.searchParams.set(i,o.toString()):typeof o=="object"?r.searchParams.set(i,JSON.stringify(o)):r.searchParams.set(i,o);return r}function Sh(n){let t={};for(let[r,i]of Object.entries(n))Ke.isInstance(i)?t[r]=i.toString():t[r]=i;return t}var Mh=function(n,t){return Mh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},Mh(n,t)};function qt(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Mh(n,t);function r(){this.constructor=n}n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function Jm(n,t,r,i){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function f(b){try{p(i.next(b))}catch(v){a(v)}}function l(b){try{p(i.throw(b))}catch(v){a(v)}}function p(b){b.done?s(b.value):o(b.value).then(f,l)}p((i=i.apply(n,t||[])).next())})}function fc(n,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,o,s,a;return a={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function f(p){return function(b){return l([p,b])}}function l(p){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,p[0]&&(r=0)),r;)try{if(i=1,o&&(s=p[0]&2?o.return:p[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,p[1])).done)return s;switch(o=0,s&&(p=[p[0]&2,s.value]),p[0]){case 0:case 1:s=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,o=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!s||p[1]>s[0]&&p[1]<s[3])){r.label=p[1];break}if(p[0]===6&&r.label<s[1]){r.label=s[1],s=p;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(p);break}s[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(n,r)}catch(b){p=[6,b],o=0}finally{i=s=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function Fn(n){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&n[t],i=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function dr(n,t){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var i=r.call(n),o,s=[],a;try{for(;(t===void 0||t-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(f){a={error:f}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return s}function Wr(n,t,r){if(r||arguments.length===2)for(var i=0,o=t.length,s;i<o;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))}function lo(n){return this instanceof lo?(this.v=n,this):new lo(n)}function Vm(n,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(n,t||[]),o,s=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(C){i[C]&&(o[C]=function(D){return new Promise(function(S,k){s.push([C,D,S,k])>1||f(C,D)})})}function f(C,D){try{l(i[C](D))}catch(S){v(s[0][3],S)}}function l(C){C.value instanceof lo?Promise.resolve(C.value.v).then(p,b):v(s[0][2],C)}function p(C){f("next",C)}function b(C){f("throw",C)}function v(C,D){C(D),s.shift(),s.length&&f(s[0][0],s[0][1])}}function Wm(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],r;return t?t.call(n):(n=typeof Fn=="function"?Fn(n):n[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(s){r[s]=n[s]&&function(a){return new Promise(function(f,l){a=n[s](a),o(f,l,a.done,a.value)})}}function o(s,a,f,l){Promise.resolve(l).then(function(p){s({value:p,done:f})},a)}}function Ge(n){return typeof n=="function"}function ls(n){var t=function(i){Error.call(i),i.stack=new Error().stack},r=n(t);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var cc=ls(function(n){return function(r){n(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(i,o){return o+1+") "+i.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function ho(n,t){if(n){var r=n.indexOf(t);0<=r&&n.splice(r,1)}}var di=function(){function n(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return n.prototype.unsubscribe=function(){var t,r,i,o,s;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var f=Fn(a),l=f.next();!l.done;l=f.next()){var p=l.value;p.remove(this)}}catch(k){t={error:k}}finally{try{l&&!l.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}else a.remove(this);var b=this.initialTeardown;if(Ge(b))try{b()}catch(k){s=k instanceof cc?k.errors:[k]}var v=this._finalizers;if(v){this._finalizers=null;try{for(var C=Fn(v),D=C.next();!D.done;D=C.next()){var S=D.value;try{Ym(S)}catch(k){s=s??[],k instanceof cc?s=Wr(Wr([],dr(s)),dr(k.errors)):s.push(k)}}}catch(k){i={error:k}}finally{try{D&&!D.done&&(o=C.return)&&o.call(C)}finally{if(i)throw i.error}}}if(s)throw new cc(s)}},n.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)Ym(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(t)}},n.prototype._hasParent=function(t){var r=this._parentage;return r===t||Array.isArray(r)&&r.includes(t)},n.prototype._addParent=function(t){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t},n.prototype._removeParent=function(t){var r=this._parentage;r===t?this._parentage=null:Array.isArray(r)&&ho(r,t)},n.prototype.remove=function(t){var r=this._finalizers;r&&ho(r,t),t instanceof n&&t._removeParent(this)},n.EMPTY=function(){var t=new n;return t.closed=!0,t}(),n}();var Th=di.EMPTY;function uc(n){return n instanceof di||n&&"closed"in n&&Ge(n.remove)&&Ge(n.add)&&Ge(n.unsubscribe)}function Ym(n){Ge(n)?n():n.unsubscribe()}var Yr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var hs={setTimeout:function(n,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=hs.delegate;return o?.setTimeout?o.setTimeout.apply(o,Wr([n,t],dr(r))):setTimeout.apply(void 0,Wr([n,t],dr(r)))},clearTimeout:function(n){var t=hs.delegate;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function lc(n){hs.setTimeout(function(){var t=Yr.onUnhandledError;if(t)t(n);else throw n})}function kh(){}var Xm=function(){return Ch("C",void 0,void 0)}();function Zm(n){return Ch("E",void 0,n)}function Qm(n){return Ch("N",n,void 0)}function Ch(n,t,r){return{kind:n,value:t,error:r}}var po=null;function ds(n){if(Yr.useDeprecatedSynchronousErrorHandling){var t=!po;if(t&&(po={errorThrown:!1,error:null}),n(),t){var r=po,i=r.errorThrown,o=r.error;if(po=null,i)throw o}}else n()}function eb(n){Yr.useDeprecatedSynchronousErrorHandling&&po&&(po.errorThrown=!0,po.error=n)}var Sa=function(n){qt(t,n);function t(r){var i=n.call(this)||this;return i.isStopped=!1,r?(i.destination=r,uc(r)&&r.add(i)):i.destination=D8,i}return t.create=function(r,i,o){return new dc(r,i,o)},t.prototype.next=function(r){this.isStopped?Oh(Qm(r),this):this._next(r)},t.prototype.error=function(r){this.isStopped?Oh(Zm(r),this):(this.isStopped=!0,this._error(r))},t.prototype.complete=function(){this.isStopped?Oh(Xm,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(r){this.destination.next(r)},t.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(di);var T8=Function.prototype.bind;function Dh(n,t){return T8.call(n,t)}var k8=function(){function n(t){this.partialObserver=t}return n.prototype.next=function(t){var r=this.partialObserver;if(r.next)try{r.next(t)}catch(i){hc(i)}},n.prototype.error=function(t){var r=this.partialObserver;if(r.error)try{r.error(t)}catch(i){hc(i)}else hc(t)},n.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(r){hc(r)}},n}(),dc=function(n){qt(t,n);function t(r,i,o){var s=n.call(this)||this,a;if(Ge(r)||!r)a={next:r??void 0,error:i??void 0,complete:o??void 0};else{var f;s&&Yr.useDeprecatedNextContext?(f=Object.create(r),f.unsubscribe=function(){return s.unsubscribe()},a={next:r.next&&Dh(r.next,f),error:r.error&&Dh(r.error,f),complete:r.complete&&Dh(r.complete,f)}):a=r}return s.destination=new k8(a),s}return t}(Sa);function hc(n){Yr.useDeprecatedSynchronousErrorHandling?eb(n):lc(n)}function C8(n){throw n}function Oh(n,t){var r=Yr.onStoppedNotification;r&&hs.setTimeout(function(){return r(n,t)})}var D8={closed:!0,next:kh,error:C8,complete:kh};var ps=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function ms(n){return n}function tb(n){return n.length===0?ms:n.length===1?n[0]:function(r){return n.reduce(function(i,o){return o(i)},r)}}var ft=function(){function n(t){t&&(this._subscribe=t)}return n.prototype.lift=function(t){var r=new n;return r.source=this,r.operator=t,r},n.prototype.subscribe=function(t,r,i){var o=this,s=I8(t)?t:new dc(t,r,i);return ds(function(){var a=o,f=a.operator,l=a.source;s.add(f?f.call(s,l):l?o._subscribe(s):o._trySubscribe(s))}),s},n.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){t.error(r)}},n.prototype.forEach=function(t,r){var i=this;return r=rb(r),new r(function(o,s){var a=new dc({next:function(f){try{t(f)}catch(l){s(l),a.unsubscribe()}},error:s,complete:o});i.subscribe(a)})},n.prototype._subscribe=function(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)},n.prototype[ps]=function(){return this},n.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return tb(t)(this)},n.prototype.toPromise=function(t){var r=this;return t=rb(t),new t(function(i,o){var s;r.subscribe(function(a){return s=a},function(a){return o(a)},function(){return i(s)})})},n.create=function(t){return new n(t)},n}();function rb(n){var t;return(t=n??Yr.Promise)!==null&&t!==void 0?t:Promise}function O8(n){return n&&Ge(n.next)&&Ge(n.error)&&Ge(n.complete)}function I8(n){return n&&n instanceof Sa||O8(n)&&uc(n)}function R8(n){return Ge(n?.lift)}function St(n){return function(t){if(R8(t))return t.lift(function(r){try{return n(r,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Mt(n,t,r,i,o){return new N8(n,t,r,i,o)}var N8=function(n){qt(t,n);function t(r,i,o,s,a,f){var l=n.call(this,r)||this;return l.onFinalize=a,l.shouldUnsubscribe=f,l._next=i?function(p){try{i(p)}catch(b){r.error(b)}}:n.prototype._next,l._error=s?function(p){try{s(p)}catch(b){r.error(b)}finally{this.unsubscribe()}}:n.prototype._error,l._complete=o?function(){try{o()}catch(p){r.error(p)}finally{this.unsubscribe()}}:n.prototype._complete,l}return t.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;n.prototype.unsubscribe.call(this),!i&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},t}(Sa);var nb=ls(function(n){return function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}});var Ih=function(n){qt(t,n);function t(){var r=n.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return t.prototype.lift=function(r){var i=new ib(this,this);return i.operator=r,i},t.prototype._throwIfClosed=function(){if(this.closed)throw new nb},t.prototype.next=function(r){var i=this;ds(function(){var o,s;if(i._throwIfClosed(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var a=Fn(i.currentObservers),f=a.next();!f.done;f=a.next()){var l=f.value;l.next(r)}}catch(p){o={error:p}}finally{try{f&&!f.done&&(s=a.return)&&s.call(a)}finally{if(o)throw o.error}}}})},t.prototype.error=function(r){var i=this;ds(function(){if(i._throwIfClosed(),!i.isStopped){i.hasError=i.isStopped=!0,i.thrownError=r;for(var o=i.observers;o.length;)o.shift().error(r)}})},t.prototype.complete=function(){var r=this;ds(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var i=r.observers;i.length;)i.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(r){return this._throwIfClosed(),n.prototype._trySubscribe.call(this,r)},t.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},t.prototype._innerSubscribe=function(r){var i=this,o=this,s=o.hasError,a=o.isStopped,f=o.observers;return s||a?Th:(this.currentObservers=null,f.push(r),new di(function(){i.currentObservers=null,ho(f,r)}))},t.prototype._checkFinalizedStatuses=function(r){var i=this,o=i.hasError,s=i.thrownError,a=i.isStopped;o?r.error(s):a&&r.complete()},t.prototype.asObservable=function(){var r=new ft;return r.source=this,r},t.create=function(r,i){return new ib(r,i)},t}(ft);var ib=function(n){qt(t,n);function t(r,i){var o=n.call(this)||this;return o.destination=r,o.source=i,o}return t.prototype.next=function(r){var i,o;(o=(i=this.destination)===null||i===void 0?void 0:i.next)===null||o===void 0||o.call(i,r)},t.prototype.error=function(r){var i,o;(o=(i=this.destination)===null||i===void 0?void 0:i.error)===null||o===void 0||o.call(i,r)},t.prototype.complete=function(){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||i===void 0||i.call(r)},t.prototype._subscribe=function(r){var i,o;return(o=(i=this.source)===null||i===void 0?void 0:i.subscribe(r))!==null&&o!==void 0?o:Th},t}(Ih);var Rh=function(n){qt(t,n);function t(r){var i=n.call(this)||this;return i._value=r,i}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(r){var i=n.prototype._subscribe.call(this,r);return!i.closed&&r.next(this._value),i},t.prototype.getValue=function(){var r=this,i=r.hasError,o=r.thrownError,s=r._value;if(i)throw o;return this._throwIfClosed(),s},t.prototype.next=function(r){n.prototype.next.call(this,this._value=r)},t}(Ih);var Nh={now:function(){return(Nh.delegate||Date).now()},delegate:void 0};var ob=function(n){qt(t,n);function t(r,i){return n.call(this)||this}return t.prototype.schedule=function(r,i){return i===void 0&&(i=0),this},t}(di);var Ma={setInterval:function(n,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=Ma.delegate;return o?.setInterval?o.setInterval.apply(o,Wr([n,t],dr(r))):setInterval.apply(void 0,Wr([n,t],dr(r)))},clearInterval:function(n){var t=Ma.delegate;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};var sb=function(n){qt(t,n);function t(r,i){var o=n.call(this,r,i)||this;return o.scheduler=r,o.work=i,o.pending=!1,o}return t.prototype.schedule=function(r,i){var o;if(i===void 0&&(i=0),this.closed)return this;this.state=r;var s=this.id,a=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(a,s,i)),this.pending=!0,this.delay=i,this.id=(o=this.id)!==null&&o!==void 0?o:this.requestAsyncId(a,this.id,i),this},t.prototype.requestAsyncId=function(r,i,o){return o===void 0&&(o=0),Ma.setInterval(r.flush.bind(r,this),o)},t.prototype.recycleAsyncId=function(r,i,o){if(o===void 0&&(o=0),o!=null&&this.delay===o&&this.pending===!1)return i;i!=null&&Ma.clearInterval(i)},t.prototype.execute=function(r,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var o=this._execute(r,i);if(o)return o;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(r,i){var o=!1,s;try{this.work(r)}catch(a){o=!0,s=a||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),s},t.prototype.unsubscribe=function(){if(!this.closed){var r=this,i=r.id,o=r.scheduler,s=o.actions;this.work=this.state=this.scheduler=null,this.pending=!1,ho(s,this),i!=null&&(this.id=this.recycleAsyncId(o,i,null)),this.delay=null,n.prototype.unsubscribe.call(this)}},t}(ob);var Ph=function(){function n(t,r){r===void 0&&(r=n.now),this.schedulerActionCtor=t,this.now=r}return n.prototype.schedule=function(t,r,i){return r===void 0&&(r=0),new this.schedulerActionCtor(this,t).schedule(i,r)},n.now=Nh.now,n}();var ab=function(n){qt(t,n);function t(r,i){i===void 0&&(i=Ph.now);var o=n.call(this,r,i)||this;return o.actions=[],o._active=!1,o}return t.prototype.flush=function(r){var i=this.actions;if(this._active){i.push(r);return}var o;this._active=!0;do if(o=r.execute(r.state,r.delay))break;while(r=i.shift());if(this._active=!1,o){for(;r=i.shift();)r.unsubscribe();throw o}},t}(Ph);var P8=new ab(sb),fb=P8;var pc=new ft(function(n){return n.complete()});function mc(n){return n&&Ge(n.schedule)}function cb(n){return n[n.length-1]}function ub(n){return mc(cb(n))?n.pop():void 0}function lb(n,t){return typeof cb(n)=="number"?n.pop():t}var bs=function(n){return n&&typeof n.length=="number"&&typeof n!="function"};function bc(n){return Ge(n?.then)}function gc(n){return Ge(n[ps])}function yc(n){return Symbol.asyncIterator&&Ge(n?.[Symbol.asyncIterator])}function vc(n){return new TypeError("You provided "+(n!==null&&typeof n=="object"?"an invalid object":"'"+n+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function L8(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var xc=L8();function wc(n){return Ge(n?.[xc])}function Ec(n){return Vm(this,arguments,function(){var r,i,o,s;return fc(this,function(a){switch(a.label){case 0:r=n.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,lo(r.read())];case 3:return i=a.sent(),o=i.value,s=i.done,s?[4,lo(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,lo(o)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function _c(n){return Ge(n?.getReader)}function zt(n){if(n instanceof ft)return n;if(n!=null){if(gc(n))return B8(n);if(bs(n))return U8(n);if(bc(n))return F8(n);if(yc(n))return hb(n);if(wc(n))return $8(n);if(_c(n))return q8(n)}throw vc(n)}function B8(n){return new ft(function(t){var r=n[ps]();if(Ge(r.subscribe))return r.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function U8(n){return new ft(function(t){for(var r=0;r<n.length&&!t.closed;r++)t.next(n[r]);t.complete()})}function F8(n){return new ft(function(t){n.then(function(r){t.closed||(t.next(r),t.complete())},function(r){return t.error(r)}).then(null,lc)})}function $8(n){return new ft(function(t){var r,i;try{for(var o=Fn(n),s=o.next();!s.done;s=o.next()){var a=s.value;if(t.next(a),t.closed)return}}catch(f){r={error:f}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}t.complete()})}function hb(n){return new ft(function(t){z8(n,t).catch(function(r){return t.error(r)})})}function q8(n){return hb(Ec(n))}function z8(n,t){var r,i,o,s;return Jm(this,void 0,void 0,function(){var a,f;return fc(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),r=Wm(n),l.label=1;case 1:return[4,r.next()];case 2:if(i=l.sent(),!!i.done)return[3,4];if(a=i.value,t.next(a),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return f=l.sent(),o={error:f},[3,11];case 6:return l.trys.push([6,,9,10]),i&&!i.done&&(s=r.return)?[4,s.call(r)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function Dr(n,t,r,i,o){i===void 0&&(i=0),o===void 0&&(o=!1);var s=t.schedule(function(){r(),o?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!o)return s}function Ac(n,t){return t===void 0&&(t=0),St(function(r,i){r.subscribe(Mt(i,function(o){return Dr(i,n,function(){return i.next(o)},t)},function(){return Dr(i,n,function(){return i.complete()},t)},function(o){return Dr(i,n,function(){return i.error(o)},t)}))})}function Sc(n,t){return t===void 0&&(t=0),St(function(r,i){i.add(n.schedule(function(){return r.subscribe(i)},t))})}function db(n,t){return zt(n).pipe(Sc(t),Ac(t))}function pb(n,t){return zt(n).pipe(Sc(t),Ac(t))}function mb(n,t){return new ft(function(r){var i=0;return t.schedule(function(){i===n.length?r.complete():(r.next(n[i++]),r.closed||this.schedule())})})}function bb(n,t){return new ft(function(r){var i;return Dr(r,t,function(){i=n[xc](),Dr(r,t,function(){var o,s,a;try{o=i.next(),s=o.value,a=o.done}catch(f){r.error(f);return}a?r.complete():r.next(s)},0,!0)}),function(){return Ge(i?.return)&&i.return()}})}function Mc(n,t){if(!n)throw new Error("Iterable cannot be null");return new ft(function(r){Dr(r,t,function(){var i=n[Symbol.asyncIterator]();Dr(r,t,function(){i.next().then(function(o){o.done?r.complete():r.next(o.value)})},0,!0)})})}function gb(n,t){return Mc(Ec(n),t)}function yb(n,t){if(n!=null){if(gc(n))return db(n,t);if(bs(n))return mb(n,t);if(bc(n))return pb(n,t);if(yc(n))return Mc(n,t);if(wc(n))return bb(n,t);if(_c(n))return gb(n,t)}throw vc(n)}function vb(n,t){return t?yb(n,t):zt(n)}var Tc=ls(function(n){return function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}});function xb(n){return n instanceof Date&&!isNaN(n)}function kc(n,t){return St(function(r,i){var o=0;r.subscribe(Mt(i,function(s){i.next(n.call(t,s,o++))}))})}var H8=Array.isArray;function K8(n,t){return H8(t)?n.apply(void 0,Wr([],dr(t))):n(t)}function wb(n){return kc(function(t){return K8(n,t)})}function Eb(n,t,r,i,o,s,a,f){var l=[],p=0,b=0,v=!1,C=function(){v&&!l.length&&!p&&t.complete()},D=function(k){return p<i?S(k):l.push(k)},S=function(k){s&&t.next(k),p++;var $=!1;zt(r(k,b++)).subscribe(Mt(t,function(O){o?.(O),s?D(O):t.next(O)},function(){$=!0},void 0,function(){if($)try{p--;for(var O=function(){var q=l.shift();a?Dr(t,a,function(){return S(q)}):S(q)};l.length&&p<i;)O();C()}catch(q){t.error(q)}}))};return n.subscribe(Mt(t,D,function(){v=!0,C()})),function(){f?.()}}function Ta(n,t,r){return r===void 0&&(r=1/0),Ge(t)?Ta(function(i,o){return kc(function(s,a){return t(i,s,o,a)})(zt(n(i,o)))},r):(typeof t=="number"&&(r=t),St(function(i,o){return Eb(i,o,n,r)}))}function _b(n){return n===void 0&&(n=1/0),Ta(ms,n)}var j8=["addListener","removeListener"],G8=["addEventListener","removeEventListener"],J8=["on","off"];function ka(n,t,r,i){if(Ge(r)&&(i=r,r=void 0),i)return ka(n,t,r).pipe(wb(i));var o=dr(Y8(n)?G8.map(function(f){return function(l){return n[f](t,l,r)}}):V8(n)?j8.map(Ab(n,t)):W8(n)?J8.map(Ab(n,t)):[],2),s=o[0],a=o[1];if(!s&&bs(n))return Ta(function(f){return ka(f,t,r)})(zt(n));if(!s)throw new TypeError("Invalid event target");return new ft(function(f){var l=function(){for(var p=[],b=0;b<arguments.length;b++)p[b]=arguments[b];return f.next(1<p.length?p:p[0])};return s(l),function(){return a(l)}})}function Ab(n,t){return function(r){return function(i){return n[r](t,i)}}}function V8(n){return Ge(n.addListener)&&Ge(n.removeListener)}function W8(n){return Ge(n.on)&&Ge(n.off)}function Y8(n){return Ge(n.addEventListener)&&Ge(n.removeEventListener)}function mo(n,t,r){n===void 0&&(n=0),r===void 0&&(r=fb);var i=-1;return t!=null&&(mc(t)?r=t:i=t),new ft(function(o){var s=xb(n)?+n-r.now():n;s<0&&(s=0);var a=0;return r.schedule(function(){o.closed||(o.next(a++),0<=i?this.schedule(void 0,i):o.complete())},s)})}function Lh(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var r=ub(n),i=lb(n,1/0),o=n;return o.length?o.length===1?zt(o[0]):_b(i)(vb(o,r)):pc}function Sb(n,t){return St(function(r,i){var o=0;r.subscribe(Mt(i,function(s){return n.call(t,s,o++)&&i.next(s)}))})}function Mb(n){return St(function(t,r){var i=!1;t.subscribe(Mt(r,function(o){i=!0,r.next(o)},function(){i||r.next(n),r.complete()}))})}function Tb(n){return n<=0?function(){return pc}:St(function(t,r){var i=0;t.subscribe(Mt(r,function(o){++i<=n&&(r.next(o),n<=i&&r.complete())}))})}function kb(n){return n===void 0&&(n=X8),St(function(t,r){var i=!1;t.subscribe(Mt(r,function(o){i=!0,r.next(o)},function(){return i?r.complete():r.error(n())}))})}function X8(){return new Tc}function Bh(n,t){var r=arguments.length>=2;return function(i){return i.pipe(n?Sb(function(o,s){return n(o,s,i)}):ms,Tb(1),r?Mb(t):kb(function(){return new Tc}))}}var Z8={leading:!0,trailing:!1};function Uh(n,t){return t===void 0&&(t=Z8),St(function(r,i){var o=t.leading,s=t.trailing,a=!1,f=null,l=null,p=!1,b=function(){l?.unsubscribe(),l=null,s&&(D(),p&&i.complete())},v=function(){l=null,p&&i.complete()},C=function(S){return l=zt(n(S)).subscribe(Mt(i,b,v))},D=function(){if(a){a=!1;var S=f;f=null,i.next(S),!p&&C(S)}};r.subscribe(Mt(i,function(S){a=!0,f=S,!(l&&!l.closed)&&(o?D():C(S))},function(){p=!0,!(s&&a&&l&&!l.closed)&&i.complete()}))})}var pt;(function(n){n[n.PREFER_CACHE=0]="PREFER_CACHE",n[n.SYNC_ALWAYS=1]="SYNC_ALWAYS",n[n.NEVER_SYNC=2]="NEVER_SYNC"})(pt||(pt={}));var Qh=Ve(Ia(),1);var b2;(function(n){n[n.GENESIS=0]="GENESIS",n[n.PARTIAL=1]="PARTIAL",n[n.SIGNED=2]="SIGNED"})(b2||(b2={}));var Ra;(function(n){n[n.NOT_REQUESTED=0]="NOT_REQUESTED",n[n.PENDING=1]="PENDING",n[n.PROCESSING=2]="PROCESSING",n[n.ANCHORED=3]="ANCHORED",n[n.FAILED=4]="FAILED"})(Ra||(Ra={}));var ed;(function(n){n[n.GENESIS=0]="GENESIS",n[n.SIGNED=1]="SIGNED",n[n.ANCHOR=2]="ANCHOR"})(ed||(ed={}));var bn=class extends ft{constructor(t,r){super(i=>{t.subscribe(i)}),this.state$=t,this._context=r}get id(){return new Ke(this.state$.value.type,this.state$.value.log[0].cid)}get api(){return this._context.api}get content(){let{next:t,content:r}=this.state$.value;return(0,Qh.default)(t?.content??r)}get tip(){return this.state$.value.log[this.state$.value.log.length-1].cid}get commitId(){return ut.make(this.id,this.tip)}get allCommitIds(){return this.state$.value.log.map(({cid:t})=>ut.make(this.id,t))}get anchorCommitIds(){return this.state$.value.log.filter(({type:t})=>t===ed.ANCHOR).map(({cid:t})=>ut.make(this.id,t))}get state(){return(0,Qh.default)(this.state$.value)}async sync(t={}){t={sync:pt.PREFER_CACHE,...t};let r=await this.api.loadStream(this.id,t);this.state$.next(r.state)}async requestAnchor(){return this.api.requestAnchor(this.id)}};function mi(){return n=>{}}var E2=Ve(v2(),1);function x2(n){let t=new AbortController;if(n.length===0)throw Error("Need abort signals to create a merged abort signal");return n.some(r=>r.aborted)?(t.abort(),t.signal):(Lh(...n.map(r=>ka(r,"abort"))).pipe(Bh()).subscribe(()=>{t.abort()}),t.signal)}var Uc=class{constructor(t){let r=new AbortController;if(this.signal=r.signal,t<=0){r.abort();return}this._subscription=mo(t).subscribe(()=>{r.abort()})}clear(){this._subscription?.unsubscribe()}};async function w2(n,t){let r=new AbortController,i=()=>{r.abort()};return n.addEventListener("abort",i),n.aborted&&r.abort(),t(r.signal).finally(()=>{n.removeEventListener("abort",i)})}var M9=60*1e3*3;async function Nt(n,t={}){t.body&&Object.assign(t,{body:JSON.stringify(t.body),headers:{...t.headers,"Content-Type":"application/json"}});let r=t.timeout||M9,i=new Uc(r),o=t.signal?x2([t.signal,i.signal]):i.signal,s=await w2(o,a=>(0,E2.default)(String(n),{...t,signal:a})).finally(()=>i.clear());if(!s.ok){let a=await s.text();throw new Error(`HTTP request to '${n}' failed with status '${s.statusText}': ${a}`)}return s.json()}var Na=Ve(Ia(),1);Hr();function Hn(n){let t=Me.asCID(n);if(t)return t;if(typeof n=="string")return Me.parse(n);if(n instanceof Uint8Array)return Me.decode(n);throw new Error(`${n} cannot be converted to a CID`)}var _2=0,Xe=class{static streamIdFromState(t){return new Ke(t.type,t.log[0].cid)}static serializeCommit(t){let r=(0,Na.default)(t);return Xe.isSignedCommitContainer(r)?(r.jws.link=r.jws.link.toString(),r.linkedBlock=Ye(r.linkedBlock,"base64"),r.cacaoBlock&&(r.cacaoBlock=Ye(r.cacaoBlock,"base64")),r):(Xe.isSignedCommit(t)&&(r.link=r.link.toString()),Xe.isAnchorCommit(t)&&(r.proof=r.proof.toString()),r.id&&(r.id=r.id.toString()),r.prev&&(r.prev=r.prev.toString()),t.header?.model&&(r.header.model=Ye(t.header.model,"base64")),r)}static deserializeCommit(t){let r=(0,Na.default)(t);return Xe.isSignedCommitContainer(r)?(r.jws.link=Hn(r.jws.link),r.linkedBlock=je(r.linkedBlock,"base64"),r.cacaoBlock&&(r.cacaoBlock=je(r.cacaoBlock,"base64")),r):(Xe.isSignedCommit(r)&&(r.link=Hn(r.link)),Xe.isAnchorCommit(r)&&(r.proof=Hn(r.proof)),r.id&&(r.id=Hn(r.id)),r.prev&&(r.prev=Hn(r.prev)),r.header?.model&&(r.header.model=je(r.header.model,"base64")),r)}static serializeState(t){let r=(0,Na.default)(t);return r.log=r.log.map(i=>({...i,cid:i.cid.toString()})),r.anchorStatus!=null&&(r.anchorStatus=Ra[r.anchorStatus]),r.anchorProof!=null&&(r.anchorProof.txHash=r.anchorProof.txHash.toString(),r.anchorProof.root=r.anchorProof.root.toString()),t.metadata?.model&&(r.metadata.model=t.metadata.model.toString()),t.next?.metadata?.model&&(r.next.metadata.model=t.next.metadata.model.toString()),t.metadata?.unique&&t.type!=_2&&(r.metadata.unique=Ye(r.metadata.unique,"base64")),r.doctype=sr.nameByCode(r.type),r}static deserializeState(t){if(!t)return null;let r=(0,Na.default)(t);return r.doctype&&(r.type=sr.codeByName(r.doctype),delete r.doctype),r.log=r.log.map(i=>({...i,cid:Hn(i.cid)})),r.anchorProof&&(r.anchorProof.txHash=Hn(r.anchorProof.txHash),r.anchorProof.root=Hn(r.anchorProof.root)),r.anchorStatus&&(r.anchorStatus=Ra[r.anchorStatus]),t.metadata?.model&&(r.metadata.model=Ke.fromString(t.metadata.model)),t.next?.metadata?.model&&(r.next.metadata.model=Ke.fromString(t.next.metadata.model)),t.metadata?.unique&&t.type!=_2&&(r.metadata.unique=je(t.metadata.unique,"base64")),r}static statesEqual(t,r){return JSON.stringify(Xe.serializeState(t))===JSON.stringify(Xe.serializeState(r))}static isStateSupersetOf(t,r){if(t.log.length<r.log.length)return!1;for(let i in r.log)if(!t.log[i].cid.equals(r.log[i].cid))return!1;return!(t.log.length===r.log.length&&t.anchorStatus!=r.anchorStatus)}static assertCommitLinksToState(t,r){let i=this.streamIdFromState(t);if(r.id&&!r.id.equals(t.log[0].cid))throw new Error(`Invalid genesis CID in commit for StreamID ${i.toString()}. Found: ${r.id}, expected ${t.log[0].cid}`);let o=t.log[t.log.length-1].cid;if(!r.prev.equals(o))throw new Error(`Commit doesn't properly point to previous commit in log. Expected ${o}, found 'prev' ${r.prev}`)}static async convertCommitToSignedCommitContainer(t,r){if(Xe.isSignedCommit(t)){let i=await r.block.get(t.link);return{jws:t,linkedBlock:i}}return t}static isSignedCommitContainer(t){return t&&t.jws!==void 0}static isSignedCommit(t){return t&&t.link!==void 0}static isAnchorCommit(t){return t&&t.proof!==void 0}static isSignedCommitData(t){return t&&t.envelope!==void 0}static isAnchorCommitData(t){return t&&t.proof!==void 0}static commitDataToLogEntry(t,r){let i={cid:t.cid,type:r};return t?.capability?.p?.exp&&(i.expirationTime=Math.floor(Date.parse(t.capability.p.exp)/1e3)),t.timestamp&&(i.timestamp=t.timestamp),i}static checkForCacaoExpiration(t){let r=Math.floor(Date.now()/1e3);for(let i of t.log){let o=i.timestamp??r;if(i.expirationTime&&i.expirationTime<o)throw new Error(`CACAO expired: Commit ${i.cid.toString()} of Stream ${Xe.streamIdFromState(t).toString()} has a CACAO that expired at ${i.expirationTime}. Loading the stream with 'sync: SyncOptions.ALWAYS_SYNC' will restore the stream to a usable state, by discarding the invalid commits (this means losing the data from those invalid writes!)`)}}};function ld(){return ld=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},ld.apply(this,arguments)}var hd={name:"chainId",regex:"[-:a-zA-Z0-9]{5,41}",parameters:{delimiter:":",values:{0:{name:"namespace",regex:"[-a-z0-9]{3,8}"},1:{name:"reference",regex:"[-a-zA-Z0-9]{1,32}"}}}},a7={name:"accountId",regex:"[-:a-zA-Z0-9]{7,106}",parameters:{delimiter:":",values:{0:{name:"namespace",regex:"[-a-z0-9]{3,8}"},1:{name:"reference",regex:"[-a-zA-Z0-9]{1,32}"},2:{name:"address",regex:"[a-zA-Z0-9]{1,64}"}}}},dd={name:"assetName",regex:"[-:a-zA-Z0-9]{5,73}",parameters:{delimiter:":",values:{0:{name:"namespace",regex:"[-a-z0-9]{3,8}"},1:{name:"reference",regex:"[-a-zA-Z0-9]{1,64}"}}}},f7={name:"assetType",regex:"[-:a-zA-Z0-9]{11,115}",parameters:{delimiter:"/",values:{0:hd,1:dd}}},c7={name:"assetId",regex:"[-:a-zA-Z0-9]{13,148}",parameters:{delimiter:"/",values:{0:hd,1:dd,2:{name:"tokenId",regex:"[-a-zA-Z0-9]{1,32}"}}}},Pa={2:hd,10:a7,19:{assetName:dd,assetType:f7,assetId:c7}};function B2(n,t){return n.split(t.parameters.delimiter)}function La(n,t){var r=B2(n,t),i={};return r.forEach(function(o,s){i[t.parameters.values[s].name]=o}),i}function Es(n,t){return Object.values(t.parameters.values).map(function(r){var i=n[r.name];return typeof i=="string"?i:Es(i,r)}).join(t.parameters.delimiter)}function Ba(n,t){if(!new RegExp(t.regex).test(n))return!1;var r=B2(n,t);if(r.length!==Object.keys(t.parameters.values).length)return!1;var i=r.map(function(o,s){return new RegExp(t.parameters.values[s].regex).test(o)}).filter(function(o){return!!o});return i.length===r.length}var bi=function(){function n(r){typeof r=="string"&&(r=n.parse(r)),this.namespace=r.namespace,this.reference=r.reference}n.parse=function(i){if(!Ba(i,this.spec))throw new Error("Invalid "+this.spec.name+" provided: "+i);return new n(La(i,this.spec)).toJSON()},n.format=function(i){return Es(i,this.spec)};var t=n.prototype;return t.toString=function(){return n.format(this.toJSON())},t.toJSON=function(){return{namespace:this.namespace,reference:this.reference}},n}();bi.spec=Pa[2];var gn=function(){function n(r){typeof r=="string"&&(r=n.parse(r)),this.chainId=new bi(r.chainId),this.address=r.address}n.parse=function(i){if(!Ba(i,this.spec))throw new Error("Invalid "+this.spec.name+" provided: "+i);var o=La(i,this.spec),s=o.namespace,a=o.reference,f=o.address,l=new bi({namespace:s,reference:a});return new n({chainId:l,address:f}).toJSON()},n.format=function(i){var o=new bi(i.chainId),s=ld({},o.toJSON(),{address:i.address});return Es(s,this.spec)};var t=n.prototype;return t.toString=function(){return n.format(this.toJSON())},t.toJSON=function(){return{chainId:this.chainId.toJSON(),address:this.address}},n}();gn.spec=Pa[10];var pd=function(){function n(r){typeof r=="string"&&(r=n.parse(r)),this.namespace=r.namespace,this.reference=r.reference}n.parse=function(i){if(!Ba(i,this.spec))throw new Error("Invalid "+this.spec.name+" provided: "+i);return new n(La(i,this.spec)).toJSON()},n.format=function(i){return Es(i,this.spec)};var t=n.prototype;return t.toString=function(){return n.format(this.toJSON())},t.toJSON=function(){return{namespace:this.namespace,reference:this.reference}},n}();pd.spec=Pa[19].assetName;var u7=function(){function n(r){typeof r=="string"&&(r=n.parse(r)),this.chainId=new bi(r.chainId),this.assetName=new pd(r.assetName)}n.parse=function(i){if(!Ba(i,this.spec))throw new Error("Invalid "+this.spec.name+" provided: "+i);return new n(La(i,this.spec)).toJSON()},n.format=function(i){return Es(i,this.spec)};var t=n.prototype;return t.toString=function(){return n.format(this.toJSON())},t.toJSON=function(){return{chainId:this.chainId.toJSON(),assetName:this.assetName}},n}();u7.spec=Pa[19].assetType;var l7=function(){function n(r){typeof r=="string"&&(r=n.parse(r)),this.chainId=new bi(r.chainId),this.assetName=new pd(r.assetName),this.tokenId=r.tokenId}n.parse=function(i){if(!Ba(i,this.spec))throw new Error("Invalid "+this.spec.name+" provided: "+i);return new n(La(i,this.spec)).toJSON()},n.format=function(i){return Es(i,this.spec)};var t=n.prototype;return t.toString=function(){return n.format(this.toJSON())},t.toJSON=function(){return{chainId:this.chainId.toJSON(),assetName:this.assetName.toJSON(),tokenId:this.tokenId}},n}();l7.spec=Pa[19].assetId;function U2(n){if(typeof n=="string"&&n.includes("@")){let[t,r]=n.split("@");if(!t||!r)throw new Error("Invalid accountId provided");return new gn({address:t,chainId:r})}return new gn(n)}var Dg=Ve(Cg(),1),jt=Ve(Eo(),1),D7=`
sign-in-with-ethereum =
    domain %s" wants you to sign in with your Ethereum account:" LF
    address LF
    LF
    [ statement LF ]
    LF
    %s"URI: " URI LF
    %s"Version: " version LF
    %s"Chain ID: " chain-id LF
    %s"Nonce: " nonce LF
    %s"Issued At: " issued-at
    [ LF %s"Expiration Time: " expiration-time ]
    [ LF %s"Not Before: " not-before ]
    [ LF %s"Request ID: " request-id ]
    [ LF %s"Resources:"
    resources ]

domain = dnsauthority

address = "0x" 40*40HEXDIG
    ; Must also conform to captilization
    ; checksum encoding specified in EIP-55
    ; where applicable (EOAs).

statement = *( reserved / unreserved / " " )
    ; The purpose is to exclude LF (line breaks).

version = "1"

nonce = 8*( ALPHA / DIGIT )

issued-at = date-time
expiration-time = date-time
not-before = date-time

request-id = *pchar

chain-id = 1*DIGIT
    ; See EIP-155 for valid CHAIN_IDs.

resources = *( LF resource )

resource = "- " URI

; ------------------------------------------------------------------------------
; RFC 3986

URI           = scheme ":" hier-part [ "?" query ] [ "#" fragment ]

hier-part     = "//" authority path-abempty
              / path-absolute
              / path-rootless
              / path-empty

scheme        = ALPHA *( ALPHA / DIGIT / "+" / "-" / "." )

authority     = [ userinfo "@" ] host [ ":" port ]
userinfo      = *( unreserved / pct-encoded / sub-delims / ":" )
host          = IP-literal / IPv4address / reg-name
port          = *DIGIT

IP-literal    = "[" ( IPv6address / IPvFuture  ) "]"

IPvFuture     = "v" 1*HEXDIG "." 1*( unreserved / sub-delims / ":" )

IPv6address   =                            6( h16 ":" ) ls32
              /                       "::" 5( h16 ":" ) ls32
              / [               h16 ] "::" 4( h16 ":" ) ls32
              / [ *1( h16 ":" ) h16 ] "::" 3( h16 ":" ) ls32
              / [ *2( h16 ":" ) h16 ] "::" 2( h16 ":" ) ls32
              / [ *3( h16 ":" ) h16 ] "::"    h16 ":"   ls32
              / [ *4( h16 ":" ) h16 ] "::"              ls32
              / [ *5( h16 ":" ) h16 ] "::"              h16
              / [ *6( h16 ":" ) h16 ] "::"

h16           = 1*4HEXDIG
ls32          = ( h16 ":" h16 ) / IPv4address
IPv4address   = dec-octet "." dec-octet "." dec-octet "." dec-octet
dec-octet     = DIGIT                 ; 0-9
                 / %x31-39 DIGIT         ; 10-99
                 / "1" 2DIGIT            ; 100-199
                 / "2" %x30-34 DIGIT     ; 200-249
                 / "25" %x30-35          ; 250-255

reg-name      = *( unreserved / pct-encoded / sub-delims )

path-abempty  = *( "/" segment )
path-absolute = "/" [ segment-nz *( "/" segment ) ]
path-rootless = segment-nz *( "/" segment )
path-empty    = 0pchar

segment       = *pchar
segment-nz    = 1*pchar

pchar         = unreserved / pct-encoded / sub-delims / ":" / "@"

query         = *( pchar / "/" / "?" )

fragment      = *( pchar / "/" / "?" )

pct-encoded   = "%" HEXDIG HEXDIG

unreserved    = ALPHA / DIGIT / "-" / "." / "_" / "~"
reserved      = gen-delims / sub-delims
gen-delims    = ":" / "/" / "?" / "#" / "[" / "]" / "@"
sub-delims    = "!" / "$" / "&" / "'" / "(" / ")"
              / "*" / "+" / "," / ";" / "="

; ------------------------------------------------------------------------------
; RFC 4501

dnsauthority    = host [ ":" port ]
                             ; See RFC 3986 for the
                             ; definition of "host" and "port".

; ------------------------------------------------------------------------------
; RFC 3339

date-fullyear   = 4DIGIT
date-month      = 2DIGIT  ; 01-12
date-mday       = 2DIGIT  ; 01-28, 01-29, 01-30, 01-31 based on
                          ; month/year
time-hour       = 2DIGIT  ; 00-23
time-minute     = 2DIGIT  ; 00-59
time-second     = 2DIGIT  ; 00-58, 00-59, 00-60 based on leap second
                          ; rules
time-secfrac    = "." 1*DIGIT
time-numoffset  = ("+" / "-") time-hour ":" time-minute
time-offset     = "Z" / time-numoffset

partial-time    = time-hour ":" time-minute ":" time-second
                  [time-secfrac]
full-date       = date-fullyear "-" date-month "-" date-mday
full-time       = partial-time time-offset

date-time       = full-date "T" full-time

; ------------------------------------------------------------------------------
; RFC 5234

ALPHA          =  %x41-5A / %x61-7A   ; A-Z / a-z
LF             =  %x0A
                  ; linefeed
DIGIT          =  %x30-39
                  ; 0-9
HEXDIG         =  DIGIT / "A" / "B" / "C" / "D" / "E" / "F"
`,Wc=class{constructor(t){let r=new Dg.default(D7);if(r.generate(),r.errors.length)throw console.error(r.errorsToAscii()),console.error(r.linesToAscii()),console.log(r.displayAttributeErrors()),new Error("ABNF grammar has errors");let i=r.toObject(),o=new jt.default.parser;o.ast=new jt.default.ast;let s=jt.default.ids,a=function(z,X,B,L,U){let te=s.SEM_OK;return z===s.SEM_PRE&&(U.domain=jt.default.utils.charsToString(X,B,L)),te};o.ast.callbacks.domain=a;let f=function(z,X,B,L,U){let te=s.SEM_OK;return z===s.SEM_PRE&&(U.address=jt.default.utils.charsToString(X,B,L)),te};o.ast.callbacks.address=f;let l=function(z,X,B,L,U){let te=s.SEM_OK;return z===s.SEM_PRE&&(U.statement=jt.default.utils.charsToString(X,B,L)),te};o.ast.callbacks.statement=l;let p=function(z,X,B,L,U){let te=s.SEM_OK;return z===s.SEM_PRE&&(U.uri||(U.uri=jt.default.utils.charsToString(X,B,L))),te};o.ast.callbacks.uri=p;let b=function(z,X,B,L,U){let te=s.SEM_OK;return z===s.SEM_PRE&&(U.version=jt.default.utils.charsToString(X,B,L)),te};o.ast.callbacks.version=b;let v=function(z,X,B,L,U){let te=s.SEM_OK;return z===s.SEM_PRE&&(U.chainId=jt.default.utils.charsToString(X,B,L)),te};o.ast.callbacks["chain-id"]=v;let C=function(z,X,B,L,U){let te=s.SEM_OK;return z===s.SEM_PRE&&(U.nonce=jt.default.utils.charsToString(X,B,L)),te};o.ast.callbacks.nonce=C;let D=function(z,X,B,L,U){let te=s.SEM_OK;return z===s.SEM_PRE&&(U.issuedAt=jt.default.utils.charsToString(X,B,L)),te};o.ast.callbacks["issued-at"]=D;let S=function(z,X,B,L,U){let te=s.SEM_OK;return z===s.SEM_PRE&&(U.expirationTime=jt.default.utils.charsToString(X,B,L)),te};o.ast.callbacks["expiration-time"]=S;let k=function(z,X,B,L,U){let te=s.SEM_OK;return z===s.SEM_PRE&&(U.notBefore=jt.default.utils.charsToString(X,B,L)),te};o.ast.callbacks["not-before"]=k;let $=function(z,X,B,L,U){let te=s.SEM_OK;return z===s.SEM_PRE&&(U.requestId=jt.default.utils.charsToString(X,B,L)),te};o.ast.callbacks["request-id"]=$;let O=function(z,X,B,L,U){let te=s.SEM_OK;return z===s.SEM_PRE&&(U.resources=jt.default.utils.charsToString(X,B,L).slice(3).split(`
- `)),te};o.ast.callbacks.resources=O;let q=o.parse(i,"sign-in-with-ethereum",t);if(!q.success)throw new Error(`Invalid message: ${JSON.stringify(q)}`);let j={};o.ast.translate(j);for(let[z,X]of Object.entries(j))this[z]=X}};var Og;(function(n){n.INVALID_SIGNATURE="Invalid signature.",n.EXPIRED_MESSAGE="Expired message.",n.MALFORMED_SESSION="Malformed session."})(Og||(Og={}));var za;(function(n){n.PERSONAL_SIGNATURE="Personal signature"})(za||(za={}));var Yc=class{static fromCacao(t){let r=gn.parse(t.p.iss.replace("did:pkh:","")),i=new this({domain:t.p.domain,address:r.address,uri:t.p.aud,version:t.p.version,chainId:new bi(r.chainId).reference});return t.p.statement&&(i.statement=t.p.statement),t.p.nonce&&(i.nonce=t.p.nonce),t.p.iat&&(i.issuedAt=t.p.iat),t.p.exp&&(i.expirationTime=t.p.exp),t.p.nbf&&(i.notBefore=t.p.nbf),t.p.requestId&&(i.requestId=t.p.requestId),t.p.resources&&(i.resources=t.p.resources),t.s&&(t.s.s&&(i.signature=t.s.s),t.s.t==="eip191"&&(i.type=za.PERSONAL_SIGNATURE)),i}toMessage(t){return O7(this,t)}constructor(t){if(this.statement=void 0,this.nonce=void 0,this.issuedAt=void 0,this.expirationTime=void 0,this.notBefore=void 0,this.requestId=void 0,this.resources=void 0,this.signature=void 0,typeof t=="string"){let r=new Wc(t);this.domain=r.domain,this.address=r.address,this.statement=r.statement,this.uri=r.uri,this.version=r.version,this.nonce=r.nonce,this.issuedAt=r.issuedAt,this.expirationTime=r.expirationTime,this.notBefore=r.notBefore,this.requestId=r.requestId,this.chainId=r.chainId,this.resources=r.resources}else Object.assign(this,t)}};function Ig(n,t){let r=`${n.domain} wants you to sign in with your ${t} account:`,i=`URI: ${n.uri}`,o=[r,n.address].join(`
`),s=`Version: ${n.version}`;n.nonce||(n.nonce=(Math.random()+1).toString(36).substring(4));let a=`Nonce: ${n.nonce}`,f=[i,s,a];if(n.issuedAt&&Date.parse(n.issuedAt),n.issuedAt=n.issuedAt?n.issuedAt:new Date().toISOString(),f.push(`Issued At: ${n.issuedAt}`),n.expirationTime){let p=`Expiration Time: ${n.expirationTime}`;f.push(p)}n.notBefore&&f.push(`Not Before: ${n.notBefore}`),n.requestId&&f.push(`Request ID: ${n.requestId}`),n.chainId&&f.push(`Chain ID: ${n.chainId}`),n.resources&&f.push(["Resources:",...n.resources.map(p=>`- ${p}`)].join(`
`));let l=f.join(`
`);return n.statement&&(o=[o,n.statement].join(`

`)),[o,l].join(`

`)}function O7(n,t){let r=`${n.domain} wants you to sign in with your ${t} account:`,i=`URI: ${n.uri}`,o=[r,n.address].join(`
`),s=`Version: ${n.version}`;n.nonce||(n.nonce=(Math.random()+1).toString(36).substring(4));let a=`Nonce: ${n.nonce}`,f=`Chain ID: ${n.chainId}`,l=[i,s,f,a];if(n.issuedAt&&Date.parse(n.issuedAt),n.issuedAt=n.issuedAt?n.issuedAt:new Date().toISOString(),l.push(`Issued At: ${n.issuedAt}`),n.expirationTime){let b=`Expiration Time: ${n.expirationTime}`;l.push(b)}n.notBefore&&l.push(`Not Before: ${n.notBefore}`),n.requestId&&l.push(`Request ID: ${n.requestId}`),n.resources&&n.resources.length>=1&&l.push(["Resources:",...n.resources.map(b=>`- ${b}`)].join(`
`));let p=l.join(`
`);return n.statement&&(o=[o,n.statement].join(`

`)),[o,p].join(`

`)}var _o=class extends Yc{toMessage(){return super.toMessage("Ethereum")}signMessage(){let t;switch(this.type){case za.PERSONAL_SIGNATURE:{t=this.toMessage();break}default:{t=this.toMessage();break}}return t}};ma();var I7=5*60,hU=new Date("2022-09-20").valueOf(),Ao;(function(n){function t(s){let a={h:{t:"eip4361"},p:{domain:s.domain,iat:s.issuedAt,iss:`did:pkh:eip155:${s.chainId}:${s.address}`,aud:s.uri,version:s.version,nonce:s.nonce}};return s.signature&&(a.s={t:"eip191",s:s.signature}),s.notBefore&&(a.p.nbf=s.notBefore),s.expirationTime&&(a.p.exp=s.expirationTime),s.statement&&(a.p.statement=s.statement),s.requestId&&(a.p.requestId=s.requestId),s.resources&&(a.p.resources=s.resources),a}n.fromSiweMessage=t;function r(s){let a={h:{t:"caip122"},p:{domain:s.domain,iat:s.issuedAt,iss:`did:pkh:solana:${s.chainId}:${s.address}`,aud:s.uri,version:s.version,nonce:s.nonce}};return s.signature&&(a.s={t:"solana:ed25519",s:s.signature}),s.notBefore&&(a.p.nbf=s.notBefore),s.expirationTime&&(a.p.exp=s.expirationTime),s.statement&&(a.p.statement=s.statement),s.requestId&&(a.p.requestId=s.requestId),s.resources&&(a.p.resources=s.resources),a}n.fromSiwsMessage=r;async function i(s){return(await I1({bytes:s,codec:Vr,hasher:ui})).value}n.fromBlockBytes=i;async function o(s,a={}){_d(s);let f=a.verifiers[s.s.t];if(!f)throw new Error("Unsupported CACAO signature type, register the needed verifier");return f(s,a)}n.verify=o})(Ao||(Ao={}));var Ha;(function(n){function t(r){return oo({value:r,codec:Vr,hasher:ui})}n.fromCacao=t})(Ha||(Ha={}));function _d(n){if(n.s===null||n.s===void 0)throw new Error("CACAO does not have a signature")}function Rg(n,t){let r=t.atTime?t.atTime.getTime():Date.now(),i=(t.clockSkewSecs??I7)*1e3;if(Date.parse(n.p.iat)>r+i||Date.parse(n.p.nbf)>r+i)throw new Error("CACAO is not valid yet");let o=t.revocationPhaseOutSecs?t.revocationPhaseOutSecs*1e3:0;if(!t.disableExpirationCheck&&Date.parse(n.p.exp)+o+i<r)throw new Error("CACAO has expired")}var Ng="logger/5.7.0";var Pg=!1,Lg=!1,Xc={debug:1,default:2,info:2,warning:3,error:4,off:5},Bg=Xc.default,Ad=null;function R7(){try{let n=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test".normalize(t)!=="test")throw new Error("bad normalize")}catch{n.push(t)}}),n.length)throw new Error("missing "+n.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(n){return n.message}return null}var Ug=R7(),Sd;(function(n){n.DEBUG="DEBUG",n.INFO="INFO",n.WARNING="WARNING",n.ERROR="ERROR",n.OFF="OFF"})(Sd||(Sd={}));var Zr;(function(n){n.UNKNOWN_ERROR="UNKNOWN_ERROR",n.NOT_IMPLEMENTED="NOT_IMPLEMENTED",n.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.TIMEOUT="TIMEOUT",n.BUFFER_OVERRUN="BUFFER_OVERRUN",n.NUMERIC_FAULT="NUMERIC_FAULT",n.MISSING_NEW="MISSING_NEW",n.INVALID_ARGUMENT="INVALID_ARGUMENT",n.MISSING_ARGUMENT="MISSING_ARGUMENT",n.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",n.CALL_EXCEPTION="CALL_EXCEPTION",n.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",n.NONCE_EXPIRED="NONCE_EXPIRED",n.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",n.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",n.TRANSACTION_REPLACED="TRANSACTION_REPLACED",n.ACTION_REJECTED="ACTION_REJECTED"})(Zr||(Zr={}));var Fg="0123456789abcdef",Je=class{constructor(t){Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}_log(t,r){let i=t.toLowerCase();Xc[i]==null&&this.throwArgumentError("invalid log level name","logLevel",t),!(Bg>Xc[i])&&console.log.apply(console,r)}debug(...t){this._log(Je.levels.DEBUG,t)}info(...t){this._log(Je.levels.INFO,t)}warn(...t){this._log(Je.levels.WARNING,t)}makeError(t,r,i){if(Lg)return this.makeError("censored error",r,{});r||(r=Je.errors.UNKNOWN_ERROR),i||(i={});let o=[];Object.keys(i).forEach(l=>{let p=i[l];try{if(p instanceof Uint8Array){let b="";for(let v=0;v<p.length;v++)b+=Fg[p[v]>>4],b+=Fg[p[v]&15];o.push(l+"=Uint8Array(0x"+b+")")}else o.push(l+"="+JSON.stringify(p))}catch{o.push(l+"="+JSON.stringify(i[l].toString()))}}),o.push(`code=${r}`),o.push(`version=${this.version}`);let s=t,a="";switch(r){case Zr.NUMERIC_FAULT:{a="NUMERIC_FAULT";let l=t;switch(l){case"overflow":case"underflow":case"division-by-zero":a+="-"+l;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result";break}break}case Zr.CALL_EXCEPTION:case Zr.INSUFFICIENT_FUNDS:case Zr.MISSING_NEW:case Zr.NONCE_EXPIRED:case Zr.REPLACEMENT_UNDERPRICED:case Zr.TRANSACTION_REPLACED:case Zr.UNPREDICTABLE_GAS_LIMIT:a=r;break}a&&(t+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),o.length&&(t+=" ("+o.join(", ")+")");let f=new Error(t);return f.reason=s,f.code=r,Object.keys(i).forEach(function(l){f[l]=i[l]}),f}throwError(t,r,i){throw this.makeError(t,r,i)}throwArgumentError(t,r,i){return this.throwError(t,Je.errors.INVALID_ARGUMENT,{argument:r,value:i})}assert(t,r,i,o){t||this.throwError(r,i,o)}assertArgument(t,r,i,o){t||this.throwArgumentError(r,i,o)}checkNormalize(t){t==null&&(t="platform missing String.prototype.normalize"),Ug&&this.throwError("platform missing String.prototype.normalize",Je.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Ug})}checkSafeUint53(t,r){typeof t=="number"&&(r==null&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,Je.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,Je.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}checkArgumentCount(t,r,i){i?i=": "+i:i="",t<r&&this.throwError("missing argument"+i,Je.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+i,Je.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}checkNew(t,r){(t===Object||t==null)&&this.throwError("missing new",Je.errors.MISSING_NEW,{name:r.name})}checkAbstract(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",Je.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):(t===Object||t==null)&&this.throwError("missing new",Je.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return Ad||(Ad=new Je(Ng)),Ad}static setCensorship(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",Je.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Pg){if(!t)return;this.globalLogger().throwError("error censorship permanent",Je.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Lg=!!t,Pg=!!r}static setLogLevel(t){let r=Xc[t.toLowerCase()];if(r==null){Je.globalLogger().warn("invalid log level - "+t);return}Bg=r}static from(t){return new Je(t)}};Je.errors=Zr;Je.levels=Sd;var $g="bytes/5.7.0";var wt=new Je($g);function zg(n){return!!n.toHexString}function Ts(n){return n.slice||(n.slice=function(){let t=Array.prototype.slice.call(arguments);return Ts(new Uint8Array(Array.prototype.slice.apply(n,t)))}),n}function Hg(n){return Qr(n)&&!(n.length%2)||Td(n)}function qg(n){return typeof n=="number"&&n==n&&n%1===0}function Td(n){if(n==null)return!1;if(n.constructor===Uint8Array)return!0;if(typeof n=="string"||!qg(n.length)||n.length<0)return!1;for(let t=0;t<n.length;t++){let r=n[t];if(!qg(r)||r<0||r>=256)return!1}return!0}function mt(n,t){if(t||(t={}),typeof n=="number"){wt.checkSafeUint53(n,"invalid arrayify value");let r=[];for(;n;)r.unshift(n&255),n=parseInt(String(n/256));return r.length===0&&r.push(0),Ts(new Uint8Array(r))}if(t.allowMissingPrefix&&typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),zg(n)&&(n=n.toHexString()),Qr(n)){let r=n.substring(2);r.length%2&&(t.hexPad==="left"?r="0"+r:t.hexPad==="right"?r+="0":wt.throwArgumentError("hex data is odd-length","value",n));let i=[];for(let o=0;o<r.length;o+=2)i.push(parseInt(r.substring(o,o+2),16));return Ts(new Uint8Array(i))}return Td(n)?Ts(new Uint8Array(n)):wt.throwArgumentError("invalid arrayify value","value",n)}function kd(n){let t=n.map(o=>mt(o)),r=t.reduce((o,s)=>o+s.length,0),i=new Uint8Array(r);return t.reduce((o,s)=>(i.set(s,o),o+s.length),0),Ts(i)}function N7(n,t){n=mt(n),n.length>t&&wt.throwArgumentError("value out of range","value",arguments[0]);let r=new Uint8Array(t);return r.set(n,t-n.length),Ts(r)}function Qr(n,t){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||t&&n.length!==2+2*t)}var Md="0123456789abcdef";function Gt(n,t){if(t||(t={}),typeof n=="number"){wt.checkSafeUint53(n,"invalid hexlify value");let r="";for(;n;)r=Md[n&15]+r,n=Math.floor(n/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof n=="bigint")return n=n.toString(16),n.length%2?"0x0"+n:"0x"+n;if(t.allowMissingPrefix&&typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),zg(n))return n.toHexString();if(Qr(n))return n.length%2&&(t.hexPad==="left"?n="0x0"+n.substring(2):t.hexPad==="right"?n+="0":wt.throwArgumentError("hex data is odd-length","value",n)),n.toLowerCase();if(Td(n)){let r="0x";for(let i=0;i<n.length;i++){let o=n[i];r+=Md[(o&240)>>4]+Md[o&15]}return r}return wt.throwArgumentError("invalid hexlify value","value",n)}function Zc(n){if(typeof n!="string")n=Gt(n);else if(!Qr(n)||n.length%2)return null;return(n.length-2)/2}function Qc(n,t,r){return typeof n!="string"?n=Gt(n):(!Qr(n)||n.length%2)&&wt.throwArgumentError("invalid hexData","value",n),t=2+2*t,r!=null?"0x"+n.substring(t,2+2*r):"0x"+n.substring(t)}function xi(n,t){for(typeof n!="string"?n=Gt(n):Qr(n)||wt.throwArgumentError("invalid hex string","value",n),n.length>2*t+2&&wt.throwArgumentError("value out of range","value",arguments[1]);n.length<2*t+2;)n="0x0"+n.substring(2);return n}function eu(n){let t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(Hg(n)){let r=mt(n);r.length===64?(t.v=27+(r[32]>>7),r[32]&=127,t.r=Gt(r.slice(0,32)),t.s=Gt(r.slice(32,64))):r.length===65?(t.r=Gt(r.slice(0,32)),t.s=Gt(r.slice(32,64)),t.v=r[64]):wt.throwArgumentError("invalid signature string","signature",n),t.v<27&&(t.v===0||t.v===1?t.v+=27:wt.throwArgumentError("signature invalid v byte","signature",n)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(r[32]|=128),t._vs=Gt(r.slice(32,64))}else{if(t.r=n.r,t.s=n.s,t.v=n.v,t.recoveryParam=n.recoveryParam,t._vs=n._vs,t._vs!=null){let o=N7(mt(t._vs),32);t._vs=Gt(o);let s=o[0]>=128?1:0;t.recoveryParam==null?t.recoveryParam=s:t.recoveryParam!==s&&wt.throwArgumentError("signature recoveryParam mismatch _vs","signature",n),o[0]&=127;let a=Gt(o);t.s==null?t.s=a:t.s!==a&&wt.throwArgumentError("signature v mismatch _vs","signature",n)}if(t.recoveryParam==null)t.v==null?wt.throwArgumentError("signature missing v and recoveryParam","signature",n):t.v===0||t.v===1?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(t.v==null)t.v=27+t.recoveryParam;else{let o=t.v===0||t.v===1?t.v:1-t.v%2;t.recoveryParam!==o&&wt.throwArgumentError("signature recoveryParam mismatch v","signature",n)}t.r==null||!Qr(t.r)?wt.throwArgumentError("signature missing or invalid r","signature",n):t.r=xi(t.r,32),t.s==null||!Qr(t.s)?wt.throwArgumentError("signature missing or invalid s","signature",n):t.s=xi(t.s,32);let r=mt(t.s);r[0]>=128&&wt.throwArgumentError("signature s out of range","signature",n),t.recoveryParam&&(r[0]|=128);let i=Gt(r);t._vs&&(Qr(t._vs)||wt.throwArgumentError("signature invalid _vs","signature",n),t._vs=xi(t._vs,32)),t._vs==null?t._vs=i:t._vs!==i&&wt.throwArgumentError("signature _vs mismatch v and s","signature",n)}return t.yParityAndS=t._vs,t.compact=t.r+t.yParityAndS.substring(2),t}var Gg=Ve(Od());var jg="bignumber/5.7.0";var P7=Gg.default.BN,MU=new Je(jg);function Id(n){return new P7(n,36).toString(16)}var Jg=Ve(Rd());function ks(n){return"0x"+Jg.default.keccak_256(mt(n))}var Vg="address/5.7.0";var Ka=new Je(Vg);function Wg(n){Qr(n,20)||Ka.throwArgumentError("invalid address","address",n),n=n.toLowerCase();let t=n.substring(2).split(""),r=new Uint8Array(40);for(let o=0;o<40;o++)r[o]=t[o].charCodeAt(0);let i=mt(ks(r));for(let o=0;o<40;o+=2)i[o>>1]>>4>=8&&(t[o]=t[o].toUpperCase()),(i[o>>1]&15)>=8&&(t[o+1]=t[o+1].toUpperCase());return"0x"+t.join("")}var U7=9007199254740991;function F7(n){return Math.log10?Math.log10(n):Math.log(n)/Math.LN10}var Nd={};for(let n=0;n<10;n++)Nd[String(n)]=String(n);for(let n=0;n<26;n++)Nd[String.fromCharCode(65+n)]=String(10+n);var Yg=Math.floor(F7(U7));function $7(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let t=n.split("").map(i=>Nd[i]).join("");for(;t.length>=Yg;){let i=t.substring(0,Yg);t=parseInt(i,10)%97+t.substring(i.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}function Xg(n){let t=null;if(typeof n!="string"&&Ka.throwArgumentError("invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/))n.substring(0,2)!=="0x"&&(n="0x"+n),t=Wg(n),n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==n&&Ka.throwArgumentError("bad address checksum","address",n);else if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(n.substring(2,4)!==$7(n)&&Ka.throwArgumentError("bad icap checksum","address",n),t=Id(n.substring(4));t.length<40;)t="0"+t;t=Wg("0x"+t)}else Ka.throwArgumentError("invalid address","address",n);return t}var Zg="properties/5.7.0";var KU=new Je(Zg);function Cs(n,t,r){Object.defineProperty(n,t,{enumerable:!0,value:r,writable:!1})}var Qg="strings/5.7.0";var e3=new Je(Qg),ja;(function(n){n.current="",n.NFC="NFC",n.NFD="NFD",n.NFKC="NFKC",n.NFKD="NFKD"})(ja||(ja={}));var So;(function(n){n.UNEXPECTED_CONTINUE="unexpected continuation byte",n.BAD_PREFIX="bad codepoint prefix",n.OVERRUN="string overrun",n.MISSING_CONTINUE="missing continuation byte",n.OUT_OF_RANGE="out of UTF-8 range",n.UTF16_SURROGATE="UTF-16 surrogate",n.OVERLONG="overlong representation"})(So||(So={}));function q7(n,t,r,i,o){return e3.throwArgumentError(`invalid codepoint at offset ${t}; ${n}`,"bytes",r)}function t3(n,t,r,i,o){if(n===So.BAD_PREFIX||n===So.UNEXPECTED_CONTINUE){let s=0;for(let a=t+1;a<r.length&&r[a]>>6===2;a++)s++;return s}return n===So.OVERRUN?r.length-t-1:0}function z7(n,t,r,i,o){return n===So.OVERLONG?(i.push(o),0):(i.push(65533),t3(n,t,r,i,o))}var H7=Object.freeze({error:q7,ignore:t3,replace:z7});function Ga(n,t=ja.current){t!=ja.current&&(e3.checkNormalize(),n=n.normalize(t));let r=[];for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);if(o<128)r.push(o);else if(o<2048)r.push(o>>6|192),r.push(o&63|128);else if((o&64512)==55296){i++;let s=n.charCodeAt(i);if(i>=n.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");let a=65536+((o&1023)<<10)+(s&1023);r.push(a>>18|240),r.push(a>>12&63|128),r.push(a>>6&63|128),r.push(a&63|128)}else r.push(o>>12|224),r.push(o>>6&63|128),r.push(o&63|128)}return mt(r)}var r3=`Ethereum Signed Message:
`;function Pd(n){return typeof n=="string"&&(n=Ga(n)),ks(kd([Ga(r3),Ga(String(n.length)),n]))}var He=Ve(Od()),Mn=Ve(Ya());function Ls(n,t,r){return r={path:t,exports:{},require:function(i,o){return hA(i,o??r.path)}},n(r,r.exports),r.exports}function hA(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Vd=F3;function F3(n,t){if(!n)throw new Error(t||"Assertion failed")}F3.equal=function(t,r,i){if(t!=r)throw new Error(i||"Assertion failed: "+t+" != "+r)};var nn=Ls(function(n,t){"use strict";var r=t;function i(a,f){if(Array.isArray(a))return a.slice();if(!a)return[];var l=[];if(typeof a!="string"){for(var p=0;p<a.length;p++)l[p]=a[p]|0;return l}if(f==="hex"){a=a.replace(/[^a-z0-9]+/ig,""),a.length%2!==0&&(a="0"+a);for(var p=0;p<a.length;p+=2)l.push(parseInt(a[p]+a[p+1],16))}else for(var p=0;p<a.length;p++){var b=a.charCodeAt(p),v=b>>8,C=b&255;v?l.push(v,C):l.push(C)}return l}r.toArray=i;function o(a){return a.length===1?"0"+a:a}r.zero2=o;function s(a){for(var f="",l=0;l<a.length;l++)f+=o(a[l].toString(16));return f}r.toHex=s,r.encode=function(f,l){return l==="hex"?s(f):f}}),br=Ls(function(n,t){"use strict";var r=t;r.assert=Vd,r.toArray=nn.toArray,r.zero2=nn.zero2,r.toHex=nn.toHex,r.encode=nn.encode;function i(l,p,b){var v=new Array(Math.max(l.bitLength(),b)+1);v.fill(0);for(var C=1<<p+1,D=l.clone(),S=0;S<v.length;S++){var k,$=D.andln(C-1);D.isOdd()?($>(C>>1)-1?k=(C>>1)-$:k=$,D.isubn(k)):k=0,v[S]=k,D.iushrn(1)}return v}r.getNAF=i;function o(l,p){var b=[[],[]];l=l.clone(),p=p.clone();for(var v=0,C=0,D;l.cmpn(-v)>0||p.cmpn(-C)>0;){var S=l.andln(3)+v&3,k=p.andln(3)+C&3;S===3&&(S=-1),k===3&&(k=-1);var $;S&1?(D=l.andln(7)+v&7,(D===3||D===5)&&k===2?$=-S:$=S):$=0,b[0].push($);var O;k&1?(D=p.andln(7)+C&7,(D===3||D===5)&&S===2?O=-k:O=k):O=0,b[1].push(O),2*v===$+1&&(v=1-v),2*C===O+1&&(C=1-C),l.iushrn(1),p.iushrn(1)}return b}r.getJSF=o;function s(l,p,b){var v="_"+p;l.prototype[p]=function(){return this[v]!==void 0?this[v]:this[v]=b.call(this)}}r.cachedProperty=s;function a(l){return typeof l=="string"?r.toArray(l,"hex"):l}r.parseBytes=a;function f(l){return new He.default(l,"hex","le")}r.intFromLE=f}),su=br.getNAF,dA=br.getJSF,au=br.assert;function Ai(n,t){this.type=n,this.p=new He.default(t.p,16),this.red=t.prime?He.default.red(t.prime):He.default.mont(this.p),this.zero=new He.default(0).toRed(this.red),this.one=new He.default(1).toRed(this.red),this.two=new He.default(2).toRed(this.red),this.n=t.n&&new He.default(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var To=Ai;Ai.prototype.point=function(){throw new Error("Not implemented")};Ai.prototype.validate=function(){throw new Error("Not implemented")};Ai.prototype._fixedNafMul=function(t,r){au(t.precomputed);var i=t._getDoubles(),o=su(r,1,this._bitLength),s=(1<<i.step+1)-(i.step%2===0?2:1);s/=3;var a=[],f,l;for(f=0;f<o.length;f+=i.step){l=0;for(var p=f+i.step-1;p>=f;p--)l=(l<<1)+o[p];a.push(l)}for(var b=this.jpoint(null,null,null),v=this.jpoint(null,null,null),C=s;C>0;C--){for(f=0;f<a.length;f++)l=a[f],l===C?v=v.mixedAdd(i.points[f]):l===-C&&(v=v.mixedAdd(i.points[f].neg()));b=b.add(v)}return b.toP()};Ai.prototype._wnafMul=function(t,r){var i=4,o=t._getNAFPoints(i);i=o.wnd;for(var s=o.points,a=su(r,i,this._bitLength),f=this.jpoint(null,null,null),l=a.length-1;l>=0;l--){for(var p=0;l>=0&&a[l]===0;l--)p++;if(l>=0&&p++,f=f.dblp(p),l<0)break;var b=a[l];au(b!==0),t.type==="affine"?b>0?f=f.mixedAdd(s[b-1>>1]):f=f.mixedAdd(s[-b-1>>1].neg()):b>0?f=f.add(s[b-1>>1]):f=f.add(s[-b-1>>1].neg())}return t.type==="affine"?f.toP():f};Ai.prototype._wnafMulAdd=function(t,r,i,o,s){var a=this._wnafT1,f=this._wnafT2,l=this._wnafT3,p=0,b,v,C;for(b=0;b<o;b++){C=r[b];var D=C._getNAFPoints(t);a[b]=D.wnd,f[b]=D.points}for(b=o-1;b>=1;b-=2){var S=b-1,k=b;if(a[S]!==1||a[k]!==1){l[S]=su(i[S],a[S],this._bitLength),l[k]=su(i[k],a[k],this._bitLength),p=Math.max(l[S].length,p),p=Math.max(l[k].length,p);continue}var $=[r[S],null,null,r[k]];r[S].y.cmp(r[k].y)===0?($[1]=r[S].add(r[k]),$[2]=r[S].toJ().mixedAdd(r[k].neg())):r[S].y.cmp(r[k].y.redNeg())===0?($[1]=r[S].toJ().mixedAdd(r[k]),$[2]=r[S].add(r[k].neg())):($[1]=r[S].toJ().mixedAdd(r[k]),$[2]=r[S].toJ().mixedAdd(r[k].neg()));var O=[-3,-1,-5,-7,0,7,5,1,3],q=dA(i[S],i[k]);for(p=Math.max(q[0].length,p),l[S]=new Array(p),l[k]=new Array(p),v=0;v<p;v++){var j=q[0][v]|0,z=q[1][v]|0;l[S][v]=O[(j+1)*3+(z+1)],l[k][v]=0,f[S]=$}}var X=this.jpoint(null,null,null),B=this._wnafT4;for(b=p;b>=0;b--){for(var L=0;b>=0;){var U=!0;for(v=0;v<o;v++)B[v]=l[v][b]|0,B[v]!==0&&(U=!1);if(!U)break;L++,b--}if(b>=0&&L++,X=X.dblp(L),b<0)break;for(v=0;v<o;v++){var te=B[v];te!==0&&(te>0?C=f[v][te-1>>1]:te<0&&(C=f[v][-te-1>>1].neg()),C.type==="affine"?X=X.mixedAdd(C):X=X.add(C))}}for(b=0;b<o;b++)f[b]=null;return s?X:X.toP()};function Nr(n,t){this.curve=n,this.type=t,this.precomputed=null}Ai.BasePoint=Nr;Nr.prototype.eq=function(){throw new Error("Not implemented")};Nr.prototype.validate=function(){return this.curve.validate(this)};Ai.prototype.decodePoint=function(t,r){t=br.toArray(t,r);var i=this.p.byteLength();if((t[0]===4||t[0]===6||t[0]===7)&&t.length-1===2*i){t[0]===6?au(t[t.length-1]%2===0):t[0]===7&&au(t[t.length-1]%2===1);var o=this.point(t.slice(1,1+i),t.slice(1+i,1+2*i));return o}else if((t[0]===2||t[0]===3)&&t.length-1===i)return this.pointFromX(t.slice(1,1+i),t[0]===3);throw new Error("Unknown point format")};Nr.prototype.encodeCompressed=function(t){return this.encode(t,!0)};Nr.prototype._encode=function(t){var r=this.curve.p.byteLength(),i=this.getX().toArray("be",r);return t?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",r))};Nr.prototype.encode=function(t,r){return br.encode(this._encode(r),t)};Nr.prototype.precompute=function(t){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,t),r.beta=this._getBeta(),this.precomputed=r,this};Nr.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((t.bitLength()+1)/r.step):!1};Nr.prototype._getDoubles=function(t,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],o=this,s=0;s<r;s+=t){for(var a=0;a<t;a++)o=o.dbl();i.push(o)}return{step:t,points:i}};Nr.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],i=(1<<t)-1,o=i===1?null:this.dbl(),s=1;s<i;s++)r[s]=r[s-1].add(o);return{wnd:t,points:r}};Nr.prototype._getBeta=function(){return null};Nr.prototype.dblp=function(t){for(var r=this,i=0;i<t;i++)r=r.dbl();return r};var Wd=Ls(function(n){typeof Object.create=="function"?n.exports=function(r,i){i&&(r.super_=i,r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:n.exports=function(r,i){if(i){r.super_=i;var o=function(){};o.prototype=i.prototype,r.prototype=new o,r.prototype.constructor=r}}}),pA=br.assert;function Pr(n){To.call(this,"short",n),this.a=new He.default(n.a,16).toRed(this.red),this.b=new He.default(n.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(n),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Wd(Pr,To);var mA=Pr;Pr.prototype._getEndomorphism=function(t){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,i;if(t.beta)r=new He.default(t.beta,16).toRed(this.red);else{var o=this._getEndoRoots(this.p);r=o[0].cmp(o[1])<0?o[0]:o[1],r=r.toRed(this.red)}if(t.lambda)i=new He.default(t.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?i=s[0]:(i=s[1],pA(this.g.mul(i).x.cmp(this.g.x.redMul(r))===0))}var a;return t.basis?a=t.basis.map(function(f){return{a:new He.default(f.a,16),b:new He.default(f.b,16)}}):a=this._getEndoBasis(i),{beta:r,lambda:i,basis:a}}};Pr.prototype._getEndoRoots=function(t){var r=t===this.p?this.red:He.default.mont(t),i=new He.default(2).toRed(r).redInvm(),o=i.redNeg(),s=new He.default(3).toRed(r).redNeg().redSqrt().redMul(i),a=o.redAdd(s).fromRed(),f=o.redSub(s).fromRed();return[a,f]};Pr.prototype._getEndoBasis=function(t){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=t,o=this.n.clone(),s=new He.default(1),a=new He.default(0),f=new He.default(0),l=new He.default(1),p,b,v,C,D,S,k,$=0,O,q;i.cmpn(0)!==0;){var j=o.div(i);O=o.sub(j.mul(i)),q=f.sub(j.mul(s));var z=l.sub(j.mul(a));if(!v&&O.cmp(r)<0)p=k.neg(),b=s,v=O.neg(),C=q;else if(v&&++$===2)break;k=O,o=i,i=O,f=s,s=q,l=a,a=z}D=O.neg(),S=q;var X=v.sqr().add(C.sqr()),B=D.sqr().add(S.sqr());return B.cmp(X)>=0&&(D=p,S=b),v.negative&&(v=v.neg(),C=C.neg()),D.negative&&(D=D.neg(),S=S.neg()),[{a:v,b:C},{a:D,b:S}]};Pr.prototype._endoSplit=function(t){var r=this.endo.basis,i=r[0],o=r[1],s=o.b.mul(t).divRound(this.n),a=i.b.neg().mul(t).divRound(this.n),f=s.mul(i.a),l=a.mul(o.a),p=s.mul(i.b),b=a.mul(o.b),v=t.sub(f).sub(l),C=p.add(b).neg();return{k1:v,k2:C}};Pr.prototype.pointFromX=function(t,r){t=new He.default(t,16),t.red||(t=t.toRed(this.red));var i=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),o=i.redSqrt();if(o.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var s=o.fromRed().isOdd();return(r&&!s||!r&&s)&&(o=o.redNeg()),this.point(t,o)};Pr.prototype.validate=function(t){if(t.inf)return!0;var r=t.x,i=t.y,o=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(o).redIAdd(this.b);return i.redSqr().redISub(s).cmpn(0)===0};Pr.prototype._endoWnafMulAdd=function(t,r,i){for(var o=this._endoWnafT1,s=this._endoWnafT2,a=0;a<t.length;a++){var f=this._endoSplit(r[a]),l=t[a],p=l._getBeta();f.k1.negative&&(f.k1.ineg(),l=l.neg(!0)),f.k2.negative&&(f.k2.ineg(),p=p.neg(!0)),o[a*2]=l,o[a*2+1]=p,s[a*2]=f.k1,s[a*2+1]=f.k2}for(var b=this._wnafMulAdd(1,o,s,a*2,i),v=0;v<a*2;v++)o[v]=null,s[v]=null;return b};function kt(n,t,r,i){To.BasePoint.call(this,n,"affine"),t===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new He.default(t,16),this.y=new He.default(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Wd(kt,To.BasePoint);Pr.prototype.point=function(t,r,i){return new kt(this,t,r,i)};Pr.prototype.pointFromJSON=function(t,r){return kt.fromJSON(this,t,r)};kt.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var i=this.curve,o=function(s){return i.point(s.x.redMul(i.endo.beta),s.y)};t.beta=r,r.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(o)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(o)}}}return r}};kt.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};kt.fromJSON=function(t,r,i){typeof r=="string"&&(r=JSON.parse(r));var o=t.point(r[0],r[1],i);if(!r[2])return o;function s(f){return t.point(f[0],f[1],i)}var a=r[2];return o.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[o].concat(a.doubles.points.map(s))},naf:a.naf&&{wnd:a.naf.wnd,points:[o].concat(a.naf.points.map(s))}},o};kt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};kt.prototype.isInfinity=function(){return this.inf};kt.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(this.x.cmp(t.x)===0)return this.curve.point(null,null);var r=this.y.redSub(t.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(t.x).redInvm()));var i=r.redSqr().redISub(this.x).redISub(t.x),o=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,o)};kt.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(t.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,i=this.x.redSqr(),o=t.redInvm(),s=i.redAdd(i).redIAdd(i).redIAdd(r).redMul(o),a=s.redSqr().redISub(this.x.redAdd(this.x)),f=s.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,f)};kt.prototype.getX=function(){return this.x.fromRed()};kt.prototype.getY=function(){return this.y.fromRed()};kt.prototype.mul=function(t){return t=new He.default(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)};kt.prototype.mulAdd=function(t,r,i){var o=[this,r],s=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(o,s):this.curve._wnafMulAdd(1,o,s,2)};kt.prototype.jmulAdd=function(t,r,i){var o=[this,r],s=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(o,s,!0):this.curve._wnafMulAdd(1,o,s,2,!0)};kt.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||this.x.cmp(t.x)===0&&this.y.cmp(t.y)===0)};kt.prototype.neg=function(t){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var i=this.precomputed,o=function(s){return s.neg()};r.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(o)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(o)}}}return r};kt.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var t=this.curve.jpoint(this.x,this.y,this.curve.one);return t};function Bt(n,t,r,i){To.BasePoint.call(this,n,"jacobian"),t===null&&r===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new He.default(0)):(this.x=new He.default(t,16),this.y=new He.default(r,16),this.z=new He.default(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Wd(Bt,To.BasePoint);Pr.prototype.jpoint=function(t,r,i){return new Bt(this,t,r,i)};Bt.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),r=t.redSqr(),i=this.x.redMul(r),o=this.y.redMul(r).redMul(t);return this.curve.point(i,o)};Bt.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Bt.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var r=t.z.redSqr(),i=this.z.redSqr(),o=this.x.redMul(r),s=t.x.redMul(i),a=this.y.redMul(r.redMul(t.z)),f=t.y.redMul(i.redMul(this.z)),l=o.redSub(s),p=a.redSub(f);if(l.cmpn(0)===0)return p.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var b=l.redSqr(),v=b.redMul(l),C=o.redMul(b),D=p.redSqr().redIAdd(v).redISub(C).redISub(C),S=p.redMul(C.redISub(D)).redISub(a.redMul(v)),k=this.z.redMul(t.z).redMul(l);return this.curve.jpoint(D,S,k)};Bt.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var r=this.z.redSqr(),i=this.x,o=t.x.redMul(r),s=this.y,a=t.y.redMul(r).redMul(this.z),f=i.redSub(o),l=s.redSub(a);if(f.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var p=f.redSqr(),b=p.redMul(f),v=i.redMul(p),C=l.redSqr().redIAdd(b).redISub(v).redISub(v),D=l.redMul(v.redISub(C)).redISub(s.redMul(b)),S=this.z.redMul(f);return this.curve.jpoint(C,D,S)};Bt.prototype.dblp=function(t){if(t===0)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var i=this;for(r=0;r<t;r++)i=i.dbl();return i}var o=this.curve.a,s=this.curve.tinv,a=this.x,f=this.y,l=this.z,p=l.redSqr().redSqr(),b=f.redAdd(f);for(r=0;r<t;r++){var v=a.redSqr(),C=b.redSqr(),D=C.redSqr(),S=v.redAdd(v).redIAdd(v).redIAdd(o.redMul(p)),k=a.redMul(C),$=S.redSqr().redISub(k.redAdd(k)),O=k.redISub($),q=S.redMul(O);q=q.redIAdd(q).redISub(D);var j=b.redMul(l);r+1<t&&(p=p.redMul(D)),a=$,l=j,b=q}return this.curve.jpoint(a,b.redMul(s),l)};Bt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Bt.prototype._zeroDbl=function(){var t,r,i;if(this.zOne){var o=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),f=this.x.redAdd(s).redSqr().redISub(o).redISub(a);f=f.redIAdd(f);var l=o.redAdd(o).redIAdd(o),p=l.redSqr().redISub(f).redISub(f),b=a.redIAdd(a);b=b.redIAdd(b),b=b.redIAdd(b),t=p,r=l.redMul(f.redISub(p)).redISub(b),i=this.y.redAdd(this.y)}else{var v=this.x.redSqr(),C=this.y.redSqr(),D=C.redSqr(),S=this.x.redAdd(C).redSqr().redISub(v).redISub(D);S=S.redIAdd(S);var k=v.redAdd(v).redIAdd(v),$=k.redSqr(),O=D.redIAdd(D);O=O.redIAdd(O),O=O.redIAdd(O),t=$.redISub(S).redISub(S),r=k.redMul(S.redISub(t)).redISub(O),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(t,r,i)};Bt.prototype._threeDbl=function(){var t,r,i;if(this.zOne){var o=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),f=this.x.redAdd(s).redSqr().redISub(o).redISub(a);f=f.redIAdd(f);var l=o.redAdd(o).redIAdd(o).redIAdd(this.curve.a),p=l.redSqr().redISub(f).redISub(f);t=p;var b=a.redIAdd(a);b=b.redIAdd(b),b=b.redIAdd(b),r=l.redMul(f.redISub(p)).redISub(b),i=this.y.redAdd(this.y)}else{var v=this.z.redSqr(),C=this.y.redSqr(),D=this.x.redMul(C),S=this.x.redSub(v).redMul(this.x.redAdd(v));S=S.redAdd(S).redIAdd(S);var k=D.redIAdd(D);k=k.redIAdd(k);var $=k.redAdd(k);t=S.redSqr().redISub($),i=this.y.redAdd(this.z).redSqr().redISub(C).redISub(v);var O=C.redSqr();O=O.redIAdd(O),O=O.redIAdd(O),O=O.redIAdd(O),r=S.redMul(k.redISub(t)).redISub(O)}return this.curve.jpoint(t,r,i)};Bt.prototype._dbl=function(){var t=this.curve.a,r=this.x,i=this.y,o=this.z,s=o.redSqr().redSqr(),a=r.redSqr(),f=i.redSqr(),l=a.redAdd(a).redIAdd(a).redIAdd(t.redMul(s)),p=r.redAdd(r);p=p.redIAdd(p);var b=p.redMul(f),v=l.redSqr().redISub(b.redAdd(b)),C=b.redISub(v),D=f.redSqr();D=D.redIAdd(D),D=D.redIAdd(D),D=D.redIAdd(D);var S=l.redMul(C).redISub(D),k=i.redAdd(i).redMul(o);return this.curve.jpoint(v,S,k)};Bt.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr(),o=r.redSqr(),s=t.redAdd(t).redIAdd(t),a=s.redSqr(),f=this.x.redAdd(r).redSqr().redISub(t).redISub(o);f=f.redIAdd(f),f=f.redAdd(f).redIAdd(f),f=f.redISub(a);var l=f.redSqr(),p=o.redIAdd(o);p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p);var b=s.redIAdd(f).redSqr().redISub(a).redISub(l).redISub(p),v=r.redMul(b);v=v.redIAdd(v),v=v.redIAdd(v);var C=this.x.redMul(l).redISub(v);C=C.redIAdd(C),C=C.redIAdd(C);var D=this.y.redMul(b.redMul(p.redISub(b)).redISub(f.redMul(l)));D=D.redIAdd(D),D=D.redIAdd(D),D=D.redIAdd(D);var S=this.z.redAdd(f).redSqr().redISub(i).redISub(l);return this.curve.jpoint(C,D,S)};Bt.prototype.mul=function(t,r){return t=new He.default(t,r),this.curve._wnafMul(this,t)};Bt.prototype.eq=function(t){if(t.type==="affine")return this.eq(t.toJ());if(this===t)return!0;var r=this.z.redSqr(),i=t.z.redSqr();if(this.x.redMul(i).redISub(t.x.redMul(r)).cmpn(0)!==0)return!1;var o=r.redMul(this.z),s=i.redMul(t.z);return this.y.redMul(s).redISub(t.y.redMul(o)).cmpn(0)===0};Bt.prototype.eqXToP=function(t){var r=this.z.redSqr(),i=t.toRed(this.curve.red).redMul(r);if(this.x.cmp(i)===0)return!0;for(var o=t.clone(),s=this.curve.redN.redMul(r);;){if(o.iadd(this.curve.n),o.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(s),this.x.cmp(i)===0)return!0}};Bt.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Bt.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var iu=Ls(function(n,t){"use strict";var r=t;r.base=To,r.short=mA,r.mont=null,r.edwards=null}),ou=Ls(function(n,t){"use strict";var r=t,i=br.assert;function o(f){f.type==="short"?this.curve=new iu.short(f):f.type==="edwards"?this.curve=new iu.edwards(f):this.curve=new iu.mont(f),this.g=this.curve.g,this.n=this.curve.n,this.hash=f.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=o;function s(f,l){Object.defineProperty(r,f,{configurable:!0,enumerable:!0,get:function(){var p=new o(l);return Object.defineProperty(r,f,{configurable:!0,enumerable:!0,value:p}),p}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Mn.default.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Mn.default.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Mn.default.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Mn.default.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Mn.default.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Mn.default.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Mn.default.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var a;try{a=null.crash()}catch{a=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Mn.default.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",a]})});function _i(n){if(!(this instanceof _i))return new _i(n);this.hash=n.hash,this.predResist=!!n.predResist,this.outLen=this.hash.outSize,this.minEntropy=n.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=nn.toArray(n.entropy,n.entropyEnc||"hex"),r=nn.toArray(n.nonce,n.nonceEnc||"hex"),i=nn.toArray(n.pers,n.persEnc||"hex");Vd(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,i)}var $3=_i;_i.prototype._init=function(t,r,i){var o=t.concat(r).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(o),this._reseed=1,this.reseedInterval=281474976710656};_i.prototype._hmac=function(){return new Mn.default.hmac(this.hash,this.K)};_i.prototype._update=function(t){var r=this._hmac().update(this.V).update([0]);t&&(r=r.update(t)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())};_i.prototype.reseed=function(t,r,i,o){typeof r!="string"&&(o=i,i=r,r=null),t=nn.toArray(t,r),i=nn.toArray(i,o),Vd(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(i||[])),this._reseed=1};_i.prototype.generate=function(t,r,i,o){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(o=i,i=r,r=null),i&&(i=nn.toArray(i,o||"hex"),this._update(i));for(var s=[];s.length<t;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var a=s.slice(0,t);return this._update(i),this._reseed++,nn.encode(a,r)};var Jd=br.assert;function Jt(n,t){this.ec=n,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var Yd=Jt;Jt.fromPublic=function(t,r,i){return r instanceof Jt?r:new Jt(t,{pub:r,pubEnc:i})};Jt.fromPrivate=function(t,r,i){return r instanceof Jt?r:new Jt(t,{priv:r,privEnc:i})};Jt.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Jt.prototype.getPublic=function(t,r){return typeof t=="string"&&(r=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,t):this.pub};Jt.prototype.getPrivate=function(t){return t==="hex"?this.priv.toString(16,2):this.priv};Jt.prototype._importPrivate=function(t,r){this.priv=new He.default(t,r||16),this.priv=this.priv.umod(this.ec.curve.n)};Jt.prototype._importPublic=function(t,r){if(t.x||t.y){this.ec.curve.type==="mont"?Jd(t.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Jd(t.x&&t.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(t.x,t.y);return}this.pub=this.ec.curve.decodePoint(t,r)};Jt.prototype.derive=function(t){return t.validate()||Jd(t.validate(),"public point not validated"),t.mul(this.priv).getX()};Jt.prototype.sign=function(t,r,i){return this.ec.sign(t,this,r,i)};Jt.prototype.verify=function(t,r){return this.ec.verify(t,r,this)};Jt.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var bA=br.assert;function fu(n,t){if(n instanceof fu)return n;this._importDER(n,t)||(bA(n.r&&n.s,"Signature without r or s"),this.r=new He.default(n.r,16),this.s=new He.default(n.s,16),n.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=n.recoveryParam)}var cu=fu;function gA(){this.place=0}function jd(n,t){var r=n[t.place++];if(!(r&128))return r;var i=r&15;if(i===0||i>4)return!1;for(var o=0,s=0,a=t.place;s<i;s++,a++)o<<=8,o|=n[a],o>>>=0;return o<=127?!1:(t.place=a,o)}function U3(n){for(var t=0,r=n.length-1;!n[t]&&!(n[t+1]&128)&&t<r;)t++;return t===0?n:n.slice(t)}fu.prototype._importDER=function(t,r){t=br.toArray(t,r);var i=new gA;if(t[i.place++]!==48)return!1;var o=jd(t,i);if(o===!1||o+i.place!==t.length||t[i.place++]!==2)return!1;var s=jd(t,i);if(s===!1)return!1;var a=t.slice(i.place,s+i.place);if(i.place+=s,t[i.place++]!==2)return!1;var f=jd(t,i);if(f===!1||t.length!==f+i.place)return!1;var l=t.slice(i.place,f+i.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(l[0]===0)if(l[1]&128)l=l.slice(1);else return!1;return this.r=new He.default(a),this.s=new He.default(l),this.recoveryParam=null,!0};function Gd(n,t){if(t<128){n.push(t);return}var r=1+(Math.log(t)/Math.LN2>>>3);for(n.push(r|128);--r;)n.push(t>>>(r<<3)&255);n.push(t)}fu.prototype.toDER=function(t){var r=this.r.toArray(),i=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),i[0]&128&&(i=[0].concat(i)),r=U3(r),i=U3(i);!i[0]&&!(i[1]&128);)i=i.slice(1);var o=[2];Gd(o,r.length),o=o.concat(r),o.push(2),Gd(o,i.length);var s=o.concat(i),a=[48];return Gd(a,s.length),a=a.concat(s),br.encode(a,t)};var yA=function(){throw new Error("unsupported")},q3=br.assert;function Rr(n){if(!(this instanceof Rr))return new Rr(n);typeof n=="string"&&(q3(Object.prototype.hasOwnProperty.call(ou,n),"Unknown curve "+n),n=ou[n]),n instanceof ou.PresetCurve&&(n={curve:n}),this.curve=n.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=n.curve.g,this.g.precompute(n.curve.n.bitLength()+1),this.hash=n.hash||n.curve.hash}var vA=Rr;Rr.prototype.keyPair=function(t){return new Yd(this,t)};Rr.prototype.keyFromPrivate=function(t,r){return Yd.fromPrivate(this,t,r)};Rr.prototype.keyFromPublic=function(t,r){return Yd.fromPublic(this,t,r)};Rr.prototype.genKeyPair=function(t){t||(t={});for(var r=new $3({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||yA(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),o=this.n.sub(new He.default(2));;){var s=new He.default(r.generate(i));if(!(s.cmp(o)>0))return s.iaddn(1),this.keyFromPrivate(s)}};Rr.prototype._truncateToN=function(t,r){var i=t.byteLength()*8-this.n.bitLength();return i>0&&(t=t.ushrn(i)),!r&&t.cmp(this.n)>=0?t.sub(this.n):t};Rr.prototype.sign=function(t,r,i,o){typeof i=="object"&&(o=i,i=null),o||(o={}),r=this.keyFromPrivate(r,i),t=this._truncateToN(new He.default(t,16));for(var s=this.n.byteLength(),a=r.getPrivate().toArray("be",s),f=t.toArray("be",s),l=new $3({hash:this.hash,entropy:a,nonce:f,pers:o.pers,persEnc:o.persEnc||"utf8"}),p=this.n.sub(new He.default(1)),b=0;;b++){var v=o.k?o.k(b):new He.default(l.generate(this.n.byteLength()));if(v=this._truncateToN(v,!0),!(v.cmpn(1)<=0||v.cmp(p)>=0)){var C=this.g.mul(v);if(!C.isInfinity()){var D=C.getX(),S=D.umod(this.n);if(S.cmpn(0)!==0){var k=v.invm(this.n).mul(S.mul(r.getPrivate()).iadd(t));if(k=k.umod(this.n),k.cmpn(0)!==0){var $=(C.getY().isOdd()?1:0)|(D.cmp(S)!==0?2:0);return o.canonical&&k.cmp(this.nh)>0&&(k=this.n.sub(k),$^=1),new cu({r:S,s:k,recoveryParam:$})}}}}}};Rr.prototype.verify=function(t,r,i,o){t=this._truncateToN(new He.default(t,16)),i=this.keyFromPublic(i,o),r=new cu(r,"hex");var s=r.r,a=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var f=a.invm(this.n),l=f.mul(t).umod(this.n),p=f.mul(s).umod(this.n),b;return this.curve._maxwellTrick?(b=this.g.jmulAdd(l,i.getPublic(),p),b.isInfinity()?!1:b.eqXToP(s)):(b=this.g.mulAdd(l,i.getPublic(),p),b.isInfinity()?!1:b.getX().umod(this.n).cmp(s)===0)};Rr.prototype.recoverPubKey=function(n,t,r,i){q3((3&r)===r,"The recovery param is more than two bits"),t=new cu(t,i);var o=this.n,s=new He.default(n),a=t.r,f=t.s,l=r&1,p=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&p)throw new Error("Unable to find sencond key candinate");p?a=this.curve.pointFromX(a.add(this.curve.n),l):a=this.curve.pointFromX(a,l);var b=t.r.invm(o),v=o.sub(s).mul(b).umod(o),C=f.mul(b).umod(o);return this.g.mulAdd(v,a,C)};Rr.prototype.getKeyRecoveryParam=function(n,t,r,i){if(t=new cu(t,i),t.recoveryParam!==null)return t.recoveryParam;for(var o=0;o<4;o++){var s;try{s=this.recoverPubKey(n,t,o)}catch{continue}if(s.eq(r))return o}throw new Error("Unable to find valid recovery factor")};var xA=Ls(function(n,t){"use strict";var r=t;r.version="6.5.4",r.utils=br,r.rand=function(){throw new Error("unsupported")},r.curve=iu,r.curves=ou,r.ec=vA,r.eddsa=null}),z3=xA.ec;var H3="signing-key/5.7.0";var Zd=new Je(H3),Xd=null;function Tn(){return Xd||(Xd=new z3("secp256k1")),Xd}var Qd=class{constructor(t){Cs(this,"curve","secp256k1"),Cs(this,"privateKey",Gt(t)),Zc(this.privateKey)!==32&&Zd.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");let r=Tn().keyFromPrivate(mt(this.privateKey));Cs(this,"publicKey","0x"+r.getPublic(!1,"hex")),Cs(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),Cs(this,"_isSigningKey",!0)}_addPoint(t){let r=Tn().keyFromPublic(mt(this.publicKey)),i=Tn().keyFromPublic(mt(t));return"0x"+r.pub.add(i.pub).encodeCompressed("hex")}signDigest(t){let r=Tn().keyFromPrivate(mt(this.privateKey)),i=mt(t);i.length!==32&&Zd.throwArgumentError("bad digest length","digest",t);let o=r.sign(i,{canonical:!0});return eu({recoveryParam:o.recoveryParam,r:xi("0x"+o.r.toString(16),32),s:xi("0x"+o.s.toString(16),32)})}computeSharedSecret(t){let r=Tn().keyFromPrivate(mt(this.privateKey)),i=Tn().keyFromPublic(mt(e0(t)));return xi("0x"+r.derive(i.getPublic()).toString(16),32)}static isSigningKey(t){return!!(t&&t._isSigningKey)}};function K3(n,t){let r=eu(t),i={r:mt(r.r),s:mt(r.s)};return"0x"+Tn().recoverPubKey(mt(n),i,r.recoveryParam).encode("hex",!1)}function e0(n,t){let r=mt(n);if(r.length===32){let i=new Qd(r);return t?"0x"+Tn().keyFromPrivate(r).getPublic(!0,"hex"):i.publicKey}else{if(r.length===33)return t?Gt(r):"0x"+Tn().keyFromPublic(r).getPublic(!1,"hex");if(r.length===65)return t?"0x"+Tn().keyFromPublic(r).getPublic(!0,"hex"):Gt(r)}return Zd.throwArgumentError("invalid public or private key","key","[REDACTED]")}var j3="transactions/5.7.0";var UF=new Je(j3),G3;(function(n){n[n.legacy=0]="legacy",n[n.eip2930=1]="eip2930",n[n.eip1559=2]="eip1559"})(G3||(G3={}));function J3(n){let t=e0(n);return Xg(Qc(ks(Qc(t,1)),12))}function V3(n,t){return J3(K3(mt(n),t))}var W3="wallet/5.7.0";var JF=new Je(W3);function t0(n,t){return V3(Pd(n),t)}var $s=class extends Rh{next(t){let r=this.value;Xe.statesEqual(r,t)||super.next(t)}};var Qt=class extends ft{constructor(t,r,i){super(o=>{this.state$.observers.length===0&&(this.periodicSubscription=mo(0,i).pipe(Uh(()=>this._syncState(this.id,{sync:pt.PREFER_CACHE}))).subscribe()),this.state$.subscribe(o).add(()=>{this.state$.observers.length===0&&this.periodicSubscription?.unsubscribe()})}),this.state$=new $s(t),this._apiUrl=new URL(r)}get value(){return this.state$.value}get state(){return this.state$.value}next(t){this.state$.next(t)}async _syncState(t,r){let i=await Qt._load(t,this._apiUrl,r);this.state$.next(Xe.deserializeState(i))}get id(){return new Ke(this.state$.value.type,this.state$.value.log[0].cid)}static async createFromGenesis(t,r,i,o,s){let a=new URL("./streams",t),{state:f}=await Nt(a,{method:"post",body:{type:r,genesis:Xe.serializeCommit(i),opts:o}});return new Qt(Xe.deserializeState(f),t,s)}static async applyCommit(t,r,i,o,s){let a=new URL("./commits",t),{state:f}=await Nt(a,{method:"post",body:{streamId:r.toString(),commit:Xe.serializeCommit(i),opts:o}});return new Qt(Xe.deserializeState(f),t,s)}static async _load(t,r,i){let o=Gm(new URL(`./streams/${t}`,r),i),{state:s}=await Nt(o);return s}static async load(t,r,i,o){let s=await Qt._load(t,r,o);return new Qt(Xe.deserializeState(s),r,i)}static async loadStreamCommits(t,r){let i=new URL(`./commits/${t}`,r),{commits:o}=await Nt(i);return o.map(s=>({cid:s.cid,value:Xe.deserializeCommit(s.value)}))}complete(){this.state$.complete()}};var u0={};Qe(u0,{JsonPatchError:()=>yt,_areEquals:()=>tf,applyOperation:()=>Oo,applyPatch:()=>gu,applyReducer:()=>FA,deepClone:()=>BA,getValueByPointer:()=>mu,validate:()=>dy,validator:()=>bu});var PA=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var s in o)o.hasOwnProperty(s)&&(i[s]=o[s])},n(t,r)};return function(t,r){n(t,r);function i(){this.constructor=t}t.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}(),LA=Object.prototype.hasOwnProperty;function hu(n,t){return LA.call(n,t)}function du(n){if(Array.isArray(n)){for(var t=new Array(n.length),r=0;r<t.length;r++)t[r]=""+r;return t}if(Object.keys)return Object.keys(n);var i=[];for(var o in n)hu(n,o)&&i.push(o);return i}function Ut(n){switch(typeof n){case"object":return JSON.parse(JSON.stringify(n));case"undefined":return null;default:return n}}function pu(n){for(var t=0,r=n.length,i;t<r;){if(i=n.charCodeAt(t),i>=48&&i<=57){t++;continue}return!1}return!0}function kn(n){return n.indexOf("/")===-1&&n.indexOf("~")===-1?n:n.replace(/~/g,"~0").replace(/\//g,"~1")}function Qa(n){return n.replace(/~1/g,"/").replace(/~0/g,"~")}function lu(n){if(n===void 0)return!0;if(n){if(Array.isArray(n)){for(var t=0,r=n.length;t<r;t++)if(lu(n[t]))return!0}else if(typeof n=="object"){for(var i=du(n),o=i.length,s=0;s<o;s++)if(lu(n[i[s]]))return!0}}return!1}function hy(n,t){var r=[n];for(var i in t){var o=typeof t[i]=="object"?JSON.stringify(t[i],null,2):t[i];typeof o<"u"&&r.push(i+": "+o)}return r.join(`
`)}var ef=function(n){PA(t,n);function t(r,i,o,s,a){var f=this.constructor,l=n.call(this,hy(r,{name:i,index:o,operation:s,tree:a}))||this;return l.name=i,l.index=o,l.operation=s,l.tree=a,Object.setPrototypeOf(l,f.prototype),l.message=hy(r,{name:i,index:o,operation:s,tree:a}),l}return t}(Error);var yt=ef,BA=Ut,qs={add:function(n,t,r){return n[t]=this.value,{newDocument:r}},remove:function(n,t,r){var i=n[t];return delete n[t],{newDocument:r,removed:i}},replace:function(n,t,r){var i=n[t];return n[t]=this.value,{newDocument:r,removed:i}},move:function(n,t,r){var i=mu(r,this.path);i&&(i=Ut(i));var o=Oo(r,{op:"remove",path:this.from}).removed;return Oo(r,{op:"add",path:this.path,value:o}),{newDocument:r,removed:i}},copy:function(n,t,r){var i=mu(r,this.from);return Oo(r,{op:"add",path:this.path,value:Ut(i)}),{newDocument:r}},test:function(n,t,r){return{newDocument:r,test:tf(n[t],this.value)}},_get:function(n,t,r){return this.value=n[t],{newDocument:r}}},UA={add:function(n,t,r){return pu(t)?n.splice(t,0,this.value):n[t]=this.value,{newDocument:r,index:t}},remove:function(n,t,r){var i=n.splice(t,1);return{newDocument:r,removed:i[0]}},replace:function(n,t,r){var i=n[t];return n[t]=this.value,{newDocument:r,removed:i}},move:qs.move,copy:qs.copy,test:qs.test,_get:qs._get};function mu(n,t){if(t=="")return n;var r={op:"_get",path:t};return Oo(n,r),r.value}function Oo(n,t,r,i,o,s){if(r===void 0&&(r=!1),i===void 0&&(i=!0),o===void 0&&(o=!0),s===void 0&&(s=0),r&&(typeof r=="function"?r(t,0,n,t.path):bu(t,0)),t.path===""){var a={newDocument:n};if(t.op==="add")return a.newDocument=t.value,a;if(t.op==="replace")return a.newDocument=t.value,a.removed=n,a;if(t.op==="move"||t.op==="copy")return a.newDocument=mu(n,t.from),t.op==="move"&&(a.removed=n),a;if(t.op==="test"){if(a.test=tf(n,t.value),a.test===!1)throw new yt("Test operation failed","TEST_OPERATION_FAILED",s,t,n);return a.newDocument=n,a}else{if(t.op==="remove")return a.removed=n,a.newDocument=null,a;if(t.op==="_get")return t.value=n,a;if(r)throw new yt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,n);return a}}else{i||(n=Ut(n));var f=t.path||"",l=f.split("/"),p=n,b=1,v=l.length,C=void 0,D=void 0,S=void 0;for(typeof r=="function"?S=r:S=bu;;){if(D=l[b],D&&D.indexOf("~")!=-1&&(D=Qa(D)),o&&(D=="__proto__"||D=="prototype"&&b>0&&l[b-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&C===void 0&&(p[D]===void 0?C=l.slice(0,b).join("/"):b==v-1&&(C=t.path),C!==void 0&&S(t,0,n,C)),b++,Array.isArray(p)){if(D==="-")D=p.length;else{if(r&&!pu(D))throw new yt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,n);pu(D)&&(D=~~D)}if(b>=v){if(r&&t.op==="add"&&D>p.length)throw new yt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,n);var a=UA[t.op].call(t,p,D,n);if(a.test===!1)throw new yt("Test operation failed","TEST_OPERATION_FAILED",s,t,n);return a}}else if(b>=v){var a=qs[t.op].call(t,p,D,n);if(a.test===!1)throw new yt("Test operation failed","TEST_OPERATION_FAILED",s,t,n);return a}if(p=p[D],r&&b<v&&(!p||typeof p!="object"))throw new yt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,n)}}}function gu(n,t,r,i,o){if(i===void 0&&(i=!0),o===void 0&&(o=!0),r&&!Array.isArray(t))throw new yt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(n=Ut(n));for(var s=new Array(t.length),a=0,f=t.length;a<f;a++)s[a]=Oo(n,t[a],r,!0,o,a),n=s[a].newDocument;return s.newDocument=n,s}function FA(n,t,r){var i=Oo(n,t);if(i.test===!1)throw new yt("Test operation failed","TEST_OPERATION_FAILED",r,t,n);return i.newDocument}function bu(n,t,r,i){if(typeof n!="object"||n===null||Array.isArray(n))throw new yt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,n,r);if(qs[n.op]){if(typeof n.path!="string")throw new yt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,n,r);if(n.path.indexOf("/")!==0&&n.path.length>0)throw new yt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,n,r);if((n.op==="move"||n.op==="copy")&&typeof n.from!="string")throw new yt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,n,r);if((n.op==="add"||n.op==="replace"||n.op==="test")&&n.value===void 0)throw new yt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,n,r);if((n.op==="add"||n.op==="replace"||n.op==="test")&&lu(n.value))throw new yt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,n,r);if(r){if(n.op=="add"){var o=n.path.split("/").length,s=i.split("/").length;if(o!==s+1&&o!==s)throw new yt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,n,r)}else if(n.op==="replace"||n.op==="remove"||n.op==="_get"){if(n.path!==i)throw new yt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,n,r)}else if(n.op==="move"||n.op==="copy"){var a={op:"_get",path:n.from,value:void 0},f=dy([a],r);if(f&&f.name==="OPERATION_PATH_UNRESOLVABLE")throw new yt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,n,r)}}}else throw new yt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,n,r)}function dy(n,t,r){try{if(!Array.isArray(n))throw new yt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)gu(Ut(t),Ut(n),r||!0);else{r=r||bu;for(var i=0;i<n.length;i++)r(n[i],i,t,void 0)}}catch(o){if(o instanceof yt)return o;throw o}}function tf(n,t){if(n===t)return!0;if(n&&t&&typeof n=="object"&&typeof t=="object"){var r=Array.isArray(n),i=Array.isArray(t),o,s,a;if(r&&i){if(s=n.length,s!=t.length)return!1;for(o=s;o--!==0;)if(!tf(n[o],t[o]))return!1;return!0}if(r!=i)return!1;var f=Object.keys(n);if(s=f.length,s!==Object.keys(t).length)return!1;for(o=s;o--!==0;)if(!t.hasOwnProperty(f[o]))return!1;for(o=s;o--!==0;)if(a=f[o],!tf(n[a],t[a]))return!1;return!0}return n!==n&&t!==t}var p0={};Qe(p0,{compare:()=>JA,generate:()=>l0,observe:()=>GA,unobserve:()=>jA});var h0=new WeakMap,$A=function(){function n(t){this.observers=new Map,this.obj=t}return n}(),qA=function(){function n(t,r){this.callback=t,this.observer=r}return n}();function zA(n){return h0.get(n)}function HA(n,t){return n.observers.get(t)}function KA(n,t){n.observers.delete(t.callback)}function jA(n,t){t.unobserve()}function GA(n,t){var r=[],i,o=zA(n);if(!o)o=new $A(n),h0.set(n,o);else{var s=HA(o,t);i=s&&s.observer}if(i)return i;if(i={},o.value=Ut(n),t){i.callback=t,i.next=null;var a=function(){l0(i)},f=function(){clearTimeout(i.next),i.next=setTimeout(a)};typeof window<"u"&&(window.addEventListener("mouseup",f),window.addEventListener("keyup",f),window.addEventListener("mousedown",f),window.addEventListener("keydown",f),window.addEventListener("change",f))}return i.patches=r,i.object=n,i.unobserve=function(){l0(i),clearTimeout(i.next),KA(o,i),typeof window<"u"&&(window.removeEventListener("mouseup",f),window.removeEventListener("keyup",f),window.removeEventListener("mousedown",f),window.removeEventListener("keydown",f),window.removeEventListener("change",f))},o.observers.set(t,new qA(t,i)),i}function l0(n,t){t===void 0&&(t=!1);var r=h0.get(n.object);d0(r.value,n.object,n.patches,"",t),n.patches.length&&gu(r.value,n.patches);var i=n.patches;return i.length>0&&(n.patches=[],n.callback&&n.callback(i)),i}function d0(n,t,r,i,o){if(t!==n){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=du(t),a=du(n),f=!1,l=!1,p=a.length-1;p>=0;p--){var b=a[p],v=n[b];if(hu(t,b)&&!(t[b]===void 0&&v!==void 0&&Array.isArray(t)===!1)){var C=t[b];typeof v=="object"&&v!=null&&typeof C=="object"&&C!=null&&Array.isArray(v)===Array.isArray(C)?d0(v,C,r,i+"/"+kn(b),o):v!==C&&(f=!0,o&&r.push({op:"test",path:i+"/"+kn(b),value:Ut(v)}),r.push({op:"replace",path:i+"/"+kn(b),value:Ut(C)}))}else Array.isArray(n)===Array.isArray(t)?(o&&r.push({op:"test",path:i+"/"+kn(b),value:Ut(v)}),r.push({op:"remove",path:i+"/"+kn(b)}),l=!0):(o&&r.push({op:"test",path:i,value:n}),r.push({op:"replace",path:i,value:t}),f=!0)}if(!(!l&&s.length==a.length))for(var p=0;p<s.length;p++){var b=s[p];!hu(n,b)&&t[b]!==void 0&&r.push({op:"add",path:i+"/"+kn(b),value:Ut(t[b])})}}}function JA(n,t,r){r===void 0&&(r=!1);var i=[];return d0(n,t,i,"",r),i}var yu=Object.assign({},u0,p0,{JsonPatchError:ef,deepClone:Ut,escapePathComponent:kn,unescapePathComponent:Qa});var by=Ve(Ia(),1);var gy=Ve(Kn(),1);var VA=function(n,t,r,i){var o=arguments.length,s=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,t,r,i);else for(var f=n.length-1;f>=0;f--)(a=n[f])&&(s=(o<3?a(s):o>3?a(t,r,s):a(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},gr,m0={anchor:!0,publish:!0,pin:!0,sync:pt.PREFER_CACHE},WA={sync:pt.PREFER_CACHE},py={anchor:!0,publish:!0,throwOnInvalidCommit:!0};function b0(n,t){if(typeof n?.schema=="string")try{ut.fromString(n.schema)}catch{throw new Error("Schema must be a CommitID")}let r={controllers:n?.controllers,family:n?.family,schema:n?.schema?.toString(),tags:n?.tags};if(t)n?.deterministic||(r.unique=Ye((0,gy.randomBytes)(12),"base64")),n?.forbidControllerChange&&(r.forbidControllerChange=!0);else{if(n?.deterministic!==void 0||n?.unique!==void 0)throw new Error("Cannot change 'deterministic' or 'unique' properties on existing Streams");if(n?.forbidControllerChange!==void 0)throw new Error("Cannot change 'forbidControllerChange' property on existing Streams")}return Object.keys(r).forEach(i=>r[i]===void 0&&delete r[i]),r}async function my(n){if(!n.did)throw new Error("No DID provided");return n.did.authenticated||(await n.did.authenticate(),n.loggerProvider&&n.loggerProvider.getDiagnosticsLogger().imp(`Now authenticated as DID ${n.did.id}`)),n.did}async function g0(){throw new Error("Historical stream commits cannot be modified. Load the stream without specifying a commit to make updates.")}var Lr=gr=class extends bn{constructor(){super(...arguments),this._isReadOnly=!1}get content(){return super.content}get metadata(){let{next:t,metadata:r}=this.state$.value;return(0,by.default)(t?.metadata??r)}get controllers(){return this.metadata.controllers}static async create(t,r,i,o={}){o={...m0,...o},!i?.deterministic&&o.syncTimeoutSeconds==null&&(o.syncTimeoutSeconds=0);let s=o.asDID?{did:o.asDID}:t,a=await gr.makeGenesis(s,r,i);return t.createStreamFromGenesis(gr.STREAM_TYPE_ID,a,o)}static async createFromGenesis(t,r,i={}){i={...m0,...i},r.header?.unique&&i.syncTimeoutSeconds==null&&(i.syncTimeoutSeconds=0);let o=r.data?await gr._signDagJWS(t,r):r;return t.createStreamFromGenesis(gr.STREAM_TYPE_ID,o,i)}static async deterministic(t,r,i={}){if(i={...m0,...i},r={...r,deterministic:!0},r.family==null&&r.tags==null)throw new Error("Family and/or tags are required when creating a deterministic tile document");let o=await gr.makeGenesis(t,null,r);return t.createStreamFromGenesis(gr.STREAM_TYPE_ID,o,i)}static async load(t,r,i={}){i={...WA,...i};let o=hr.from(r);if(o.type!=gr.STREAM_TYPE_ID)throw new Error(`StreamID ${o.toString()} does not refer to a '${gr.STREAM_TYPE_NAME}' stream, but to a ${o.typeName}`);return t.loadStream(o,i)}async update(t,r,i={}){i={...py,...i};let o=i.asDID?{did:i.asDID}:this.api,s=await this.makeCommit(o,t,r),a=await this.api.applyCommit(this.id,s,i);this.state$.next(a.state)}async patch(t,r={}){r={...py,...r};let o={header:b0(this.metadata,!1),data:t,prev:this.tip,id:this.id.cid},s=await gr._signDagJWS(this.api,o),a=await this.api.applyCommit(this.id,s,r);this.state$.next(a.state)}makeReadOnly(){this.update=g0,this.patch=g0,this.sync=g0,this._isReadOnly=!0}get isReadOnly(){return this._isReadOnly}async makeCommit(t,r,i){let o=await this._makeRawCommit(r,i);return gr._signDagJWS(t,o)}async _makeRawCommit(t,r){r||(r={});let i=b0(r,!1);if(t==null&&(t=this.content),i.controllers){if(i.controllers.length!==1)throw new Error("Exactly one controller must be specified");if(!i.controllers[0])throw new Error("Controller cannot be updated to an undefined value.")}let o=yu.compare(this.content,t),s=this.state.log[0];return{header:i,data:o,prev:this.tip,id:s.cid}}static async makeGenesis(t,r,i){if(i||(i={}),!i.controllers||i.controllers.length===0)if(t.did){let a=await my(t);i.controllers=[a.hasParent?a.parent:a.id]}else throw new Error("No controllers specified");if(i.controllers?.length!==1)throw new Error("Exactly one controller must be specified");let o=b0(i,!0);if(i?.deterministic&&r)throw new Error("Initial content must be null when creating a deterministic Tile document");if(r==null){let a={header:o};return ao(a),a}let s={data:r,header:o};return gr._signDagJWS(t,s)}static async _signDagJWS(t,r){return(await my(t)).createDagJWS(r)}};Lr.STREAM_TYPE_NAME="tile";Lr.STREAM_TYPE_ID=0;Lr=gr=VA([mi()],Lr);function YA(n,t){try{var r=n()}catch(i){return t(i)}return r&&r.then?r.then(void 0,t):r}function XA(){let n=new Map;return function(t,r){try{let o=function(a){if(i)return a;let f=n.get(t.didUrl);return f!==void 0?f:Promise.resolve(r()).then(function(l){var p;return((p=l.didResolutionMetadata)==null?void 0:p.error)!=="notFound"&&n.set(t.didUrl,l),l})},i,s=function(){if(t.params&&t.params["no-cache"]==="true")return Promise.resolve(r()).then(function(a){return i=1,a})}();return Promise.resolve(s&&s.then?s.then(o):o(s))}catch(i){return Promise.reject(i)}}}function ZA(n,t){return t()}var QA="(?:%[0-9a-fA-F]{2})",yy=`(?:[a-zA-Z0-9._-]|${QA})`,eS="([a-z0-9]+)",tS=`((?:${yy}*:)*(${yy}+))`,vy="[a-zA-Z0-9_.:%-]",rS=`;${vy}+=${vy}*`,nS=`((${rS})*)`,iS="(/[^#?]*)?",oS="([?][^#]*)?",sS="(#.*)?",aS=new RegExp(`^did:${eS}:${tS}${nS}${iS}${oS}${sS}$`);function y0(n){if(n===""||!n)return null;let t=n.match(aS);if(t){let r={did:`did:${t[1]}:${t[2]}`,method:t[1],id:t[2],didUrl:n};if(t[4]){let i=t[4].slice(1).split(";");r.params={};for(let o of i){let s=o.split("=");r.params[s[0]]=s[1]}}return t[6]&&(r.path=t[6]),t[7]&&(r.query=t[7].slice(1)),t[8]&&(r.fragment=t[8].slice(1)),r}return null}var vu={didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};function fS(n){return function(t,r,i){try{return Promise.resolve(YA(function(){return Promise.resolve(n(t,r,i)).then(function(o){return{...vu,didResolutionMetadata:{contentType:"application/did+ld+json"},didDocument:o}})},function(o){return{...vu,didResolutionMetadata:{error:"notFound",message:o.toString()}}}))}catch(o){return Promise.reject(o)}}}var xu=class{constructor(t={},r={}){this.registry=void 0,this.cache=void 0,this.registry=t,this.cache=r.cache===!0?XA():r.cache||ZA,r.legacyResolvers&&Object.keys(r.legacyResolvers).map(i=>{this.registry[i]||(this.registry[i]=fS(r.legacyResolvers[i]))})}resolve(t,r={}){try{let i=this,o=y0(t);if(o===null)return Promise.resolve({...vu,didResolutionMetadata:{error:"invalidDid"}});let s=i.registry[o.method];return s?Promise.resolve(i.cache(o,()=>s(o.did,o,i,r))):Promise.resolve({...vu,didResolutionMetadata:{error:"unsupportedDidMethod"}})}catch(i){return Promise.reject(i)}}};var wy=Ve(Ia(),1),cS=function(n,t,r,i){var o=arguments.length,s=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,t,r,i);else for(var f=n.length-1;f>=0;f--)(a=n[f])&&(s=(o<3?a(s):o>3?a(t,r,s):a(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},Io,v0=()=>{throw new Error("Historical stream commits cannot be modified. Load the stream without specifying a commit to make updates.")},xy={anchor:!1,publish:!0,pin:!0,sync:pt.PREFER_CACHE},x0={anchor:!0,publish:!0,throwOnInvalidCommit:!0},uS={sync:pt.PREFER_CACHE},Ro=Io=class extends bn{constructor(){super(...arguments),this._isReadOnly=!1}get did(){return this.content}get metadata(){let{next:t,metadata:r}=this.state$.value;return(0,wy.default)(t?.metadata??r)}get controllers(){return this.metadata.controllers}static async fromAccount(t,r,i={}){i={...xy,...i};let o=U2(r),s=Io.makeGenesis(o);return Io.fromGenesis(t,s,i)}static async fromGenesis(t,r,i={}){return i={...xy,...i},t.createStreamFromGenesis(Io.STREAM_TYPE_ID,r,i)}async setDid(t,r,i={}){i={...x0,...i};let o=typeof t=="string"?t.trim():t.id;if(y0(o)?.did!==o)throw new Error(`DID is not valid: '${o}'`);let a=await r.createLink(o);return this.setDidProof(a,i)}async setDidProof(t,r={}){r={...x0,...r};let i=this.makeCommit(t),o=await this.api.applyCommit(this.id,i,r);this.state$.next(o.state)}async clearDid(t,r={}){r={...x0,...r};let i=await t.createLink("");return this.setDidProof(i,r)}static async load(t,r,i={}){i={...uS,...i};let o=hr.from(r);if(o.type!=Io.STREAM_TYPE_ID)throw new Error(`StreamID ${o.toString()} does not refer to a '${Io.STREAM_TYPE_NAME}' stream, but to a ${o.typeName}`);return t.loadStream(o,i)}static makeGenesis(t){return t.chainId.namespace==="eip155"&&(t.address=t.address.toLowerCase()),{header:{controllers:[`${t.address}@${t.chainId.toString()}`],family:`caip10-${t.chainId.toString()}`}}}makeCommit(t){return{data:t,prev:this.tip,id:this.id.cid}}makeReadOnly(){this.setDidProof=v0,this.setDid=v0,this.sync=v0,this._isReadOnly=!0}get isReadOnly(){return this._isReadOnly}};Ro.STREAM_TYPE_NAME="caip10-link";Ro.STREAM_TYPE_ID=1;Ro=Io=cS([mi()],Ro);Hr();ro();var nv=Ve(tv(),1),nM=function(n,t,r,i){var o=arguments.length,s=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,t,r,i);else for(var f=n.length-1;f>=0;f--)(a=n[f])&&(s=(o<3?a(s):o>3?a(t,r,s):a(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},Cn,iM={sync:pt.PREFER_CACHE};async function rv(n){if(n.did==null)throw new Error("No DID provided");n.did.authenticated||(await n.did.authenticate(),n.loggerProvider&&n.loggerProvider.getDiagnosticsLogger().imp(`Now authenticated as DID ${n.did.id}`))}async function oM(){throw new Error("Historical stream commits cannot be modified. Load the stream without specifying a commit to make updates.")}var Mi=Cn=class extends bn{constructor(){super(...arguments),this._isReadOnly=!1}get content(){return super.content}get metadata(){return{controller:this.state$.value.metadata.controllers[0],model:Cn.MODEL}}static async create(t,r,i){Cn.assertComplete(r);let o={publish:!0,anchor:!0,pin:!0,sync:pt.NEVER_SYNC,throwOnInvalidCommit:!0},s=await Cn._makeGenesis(t,r,i);return await t.createStreamFromGenesis(Cn.STREAM_TYPE_ID,s,o)}static assertComplete(t,r){if(!t.name)throw r?new Error(`Model with StreamID ${r.toString()} is missing a 'name' field`):new Error("Model is missing a 'name' field");if(!t.schema)throw r?new Error(`Model ${t.name} (${r.toString()}) is missing a 'schema' field`):new Error(`Model ${t.name} is missing a 'schema' field`);if(!t.accountRelation)throw r?new Error(`Model ${t.name} (${r.toString()}) is missing a 'accountRelation' field`):new Error(`Model ${t.name} is missing a 'accountRelation' field`)}static async load(t,r,i={}){i={...iM,...i};let o=hr.from(r);if(o.type!=Cn.STREAM_TYPE_ID)throw new Error(`StreamID ${o.toString()} does not refer to a '${Cn.STREAM_TYPE_NAME}' stream, but to a ${o.typeName}`);return await t.loadStream(o,i)}static async _makeGenesis(t,r,i){let o=await this._makeRawGenesis(t,r,i);return Cn._signDagJWS(t,o)}static async _makeRawGenesis(t,r,i){if(r==null)throw new Error("Genesis content cannot be null");if(!i||!i.controller)if(t.did)await rv(t),i={controller:t.did.hasParent?t.did.parent:t.did.id};else throw new Error("No controller specified");let o={controllers:[i.controller],model:Cn.MODEL.bytes};return{data:r,header:o}}makeReadOnly(){this.sync=oM,this._isReadOnly=!0}get isReadOnly(){return this._isReadOnly}static async _signDagJWS(t,r){return await rv(t),t.did.createDagJWS(r)}};Mi.STREAM_TYPE_NAME="model";Mi.STREAM_TYPE_ID=2;Mi.MODEL=function(){let n=ao("model-v1"),t=nv.default.encode(n,"identity"),r=pn(ss,t),i=Me.createV1(ss,r);return new Ke("UNLOADABLE",i)}();Mi=Cn=nM([mi()],Mi);var sv=Ve(Kn(),1);var sM=function(n,t,r,i){var o=arguments.length,s=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,t,r,i);else for(var f=n.length-1;f>=0;f--)(a=n[f])&&(s=(o<3?a(s):o>3?a(t,r,s):a(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},on,aM={anchor:!0,publish:!0,pin:!0,sync:pt.NEVER_SYNC,syncTimeoutSeconds:0},fM={anchor:!1,publish:!1,pin:!0,sync:pt.PREFER_CACHE},cM={sync:pt.PREFER_CACHE},iv={anchor:!0,publish:!0,throwOnInvalidCommit:!0};async function ov(n){if(n.did==null)throw new Error("No DID provided");n.did.authenticated||(await n.did.authenticate(),n.loggerProvider&&n.loggerProvider.getDiagnosticsLogger().imp(`Now authenticated as DID ${n.did.id}`))}async function A0(){throw new Error("Historical stream commits cannot be modified. Load the stream without specifying a commit to make updates.")}var Po=on=class extends bn{constructor(){super(...arguments),this._isReadOnly=!1}get content(){return super.content}get metadata(){let t=this.state$.value.metadata;return{controller:t.controllers[0],model:t.model}}static async create(t,r,i,o={}){o={...aM,...o};let s=o.asDID?{did:o.asDID}:t,a=await on._makeGenesis(s,r,i);return t.createStreamFromGenesis(on.STREAM_TYPE_ID,a,o)}static async single(t,r,i={}){i={...fM,...i};let o=i.asDID?{did:i.asDID}:t;r={...r,deterministic:!0};let s=await on._makeGenesis(o,null,r);return t.createStreamFromGenesis(on.STREAM_TYPE_ID,s,i)}static async load(t,r,i={}){i={...cM,...i};let o=hr.from(r);if(o.type!=on.STREAM_TYPE_ID)throw new Error(`StreamID ${o.toString()} does not refer to a '${on.STREAM_TYPE_NAME}' stream, but to a ${o.typeName}`);return t.loadStream(o,i)}async replace(t,r={}){r={...iv,...r};let i=r.asDID?{did:r.asDID}:this.api,o=await this._makeCommit(i,t),s=await this.api.applyCommit(this.id,o,r);this.state$.next(s.state)}async patch(t,r={}){r={...iv,...r};let i={data:t,prev:this.tip,id:this.id.cid},o=await on._signDagJWS(this.api,i),s=await this.api.applyCommit(this.id,o,r);this.state$.next(s.state)}makeReadOnly(){this.replace=A0,this.patch=A0,this.sync=A0,this._isReadOnly=!0}get isReadOnly(){return this._isReadOnly}_makeCommit(t,r){let i=this._makeRawCommit(r);return on._signDagJWS(t,i)}_makeRawCommit(t){return{data:yu.compare(this.content,t||{}),prev:this.tip,id:this.state.log[0].cid}}static async _makeGenesis(t,r,i){let o=await this._makeRawGenesis(t,r,i);return i.deterministic?(ao(o),o):on._signDagJWS(t,o)}static async _makeRawGenesis(t,r,i){if(!i.model)throw new Error("Must specify a 'model' when creating a ModelInstanceDocument");let o=i.controller;if(!o)if(t.did)await ov(t),o=t.did.hasParent?t.did.parent:t.did.id;else throw new Error("No controller specified");let s={controllers:[o],model:i.model.bytes};return i.deterministic||(s.unique=(0,sv.randomBytes)(12)),{data:r,header:s}}static async _signDagJWS(t,r){return await ov(t),t.did.createDagJWS(r)}};Po.STREAM_TYPE_NAME="MID";Po.STREAM_TYPE_ID=3;Po=on=sM([mi()],Po);var Au=class{constructor(t){this._apiUrl=t}async add(t,r){let i={};r&&(i.force=!0);let o=new URL(`./pins/${t}`,this._apiUrl);await Nt(o,{method:"post",body:i})}async rm(t,r){let i=new URL(`./pins/${t}`,this._apiUrl);await Nt(i,{method:"delete",body:{opts:r}})}async ls(t){let r=new URL("./pins",this._apiUrl);t&&(r=new URL(`./pins/${t.toString()}`,this._apiUrl));let i=await Nt(r),{pinnedStreamIds:o}=i;return{[Symbol.asyncIterator](){let s=0;return{next(){return s===o.length?Promise.resolve({value:null,done:!0}):Promise.resolve({value:o[s++],done:!1})}}}}}};var Su=class{constructor(t){this._fetchJson=Nt,this._collectionURL=new URL("./collection",t),this._countURL=new URL("./collection/count",t)}async count(t){return(await this._fetchJson(this._countURL,{method:"POST",body:Sh(t)})).count}async query(t){let r=await this._fetchJson(this._collectionURL,{method:"POST",body:Sh(t)});return{edges:r.edges.map(o=>({cursor:o.cursor,node:Xe.deserializeState(o.node)})),pageInfo:r.pageInfo}}};var Mu=class{constructor(t,r){this._apiUrl=t,this._getDidFn=r,this._fetchJson=Nt,this.modelsPath="./admin/models",this.getCodePath="./admin/getCode"}getCodeUrl(){return new URL(this.getCodePath,this._apiUrl)}getModelsUrl(){return new URL(this.modelsPath,this._apiUrl)}async buildJWS(t,r,i){let o=i?{models:i.map(a=>a.toString())}:void 0,s=await t.createJWS({code:r,requestPath:this.getModelsUrl().pathname,requestBody:o});return`${s.signatures[0].protected}.${s.payload}.${s.signatures[0].signature}`}async generateCode(){return(await this._fetchJson(this.getCodeUrl())).code}async startIndexingModels(t){let r=await this.generateCode();await this._fetchJson(this.getModelsUrl(),{method:"post",body:{jws:await this.buildJWS(this._getDidFn(),r,t)}})}async getIndexedModels(){let t=await this.generateCode();return(await this._fetchJson(this.getModelsUrl(),{headers:{Authorization:`Basic ${await this.buildJWS(this._getDidFn(),t)}`}})).models.map(i=>Ke.fromString(i))}async stopIndexingModels(t){let r=await this.generateCode();await this._fetchJson(this.getModelsUrl(),{method:"delete",body:{jws:await this.buildJWS(this._getDidFn(),r,t)}})}};var uM="/api/v0/",lM="http://localhost:7007",hM={syncInterval:5e3},dM={anchor:!0,publish:!0,sync:pt.PREFER_CACHE},pM={anchor:!0,publish:!0,sync:pt.PREFER_CACHE},av={sync:pt.PREFER_CACHE},js=class{constructor(t=lM,r={}){this._config={...hM,...r},this._apiUrl=new URL(uM,t),this.context={api:this},this.pin=new Au(this._apiUrl),this.index=new Su(this._apiUrl);let i=(()=>this.did).bind(this);this.admin=new Mu(this._apiUrl,i),this._streamConstructors={[Ro.STREAM_TYPE_ID]:Ro,[Mi.STREAM_TYPE_ID]:Mi,[Po.STREAM_TYPE_ID]:Po,[Lr.STREAM_TYPE_ID]:Lr}}get did(){return this.context.did}set did(t){this.context.did=t}async createStreamFromGenesis(t,r,i={}){i={...pM,...i};let o=await Qt.createFromGenesis(this._apiUrl,t,r,i,this._config.syncInterval);return this.buildStreamFromDocument(o)}async loadStream(t,r={}){r={...av,...r};let i=hr.from(t),o=await Qt.load(i,this._apiUrl,this._config.syncInterval,r);return this.buildStreamFromDocument(o)}async multiQuery(t,r){let i=t.map(a=>({...a,streamId:typeof a.streamId=="string"?a.streamId:a.streamId.toString()})),o=new URL("./multiqueries",this._apiUrl),s=await Nt(o,{method:"post",body:{queries:i,timeout:r}});return Object.entries(s).reduce((a,f)=>{let[l,p]=f,b=Xe.deserializeState(p),v=new Qt(b,this._apiUrl,this._config.syncInterval);return a[l]=this.buildStreamFromDocument(v),a},{})}loadStreamCommits(t){let r=Ah(t);return Qt.loadStreamCommits(r,this._apiUrl)}async applyCommit(t,r,i={}){i={...dM,...i};let o=Ah(t),s=await Qt.applyCommit(this._apiUrl,o,r,i,this._config.syncInterval);return this.buildStreamFromDocument(s)}async requestAnchor(t,r={}){r={...av,...r};let{anchorStatus:i}=await Nt(`${this._apiUrl}/streams/${t.toString()}/anchor`,{method:"post",body:{opts:r}});return i}addStreamHandler(t){this._streamConstructors[t.name]=t.stream_constructor}buildStreamFromState(t){let r=new Qt(t,this._apiUrl,this._config.syncInterval);return this.buildStreamFromDocument(r)}buildStreamFromDocument(t){let r=t.state.type,i=this._streamConstructors[r];if(!i)throw new Error(`Failed to find constructor for stream ${r}`);return new i(t,this.context)}async setDID(t){this.context.did=t}async getSupportedChains(){if(this._supportedChains)return this._supportedChains;let{supportedChains:t}=await Nt(this._apiUrl+"/node/chains");return this._supportedChains=t,t}async close(){}};var el=Ve(uu(),1);Vf();var ep=Ve(cv(),1),U6=Ve(Rd(),1),ea=Ve(t6(),1),Wu=Ve(uu(),1),F6=Ve(n6(),1),X0=Ve(a6(),1),xf=Ve(l6(),1),tp=Ve(S6(),1),rp=Ve(Kn(),1);ba();function $r(n){return Ye(n,"base64url")}function Yt(n){let t=n.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return je(t,"base64url")}function np(n){return je(n,"base58btc")}function xT(n){return Ye(n,"base58btc")}function W0(n){let t=n.startsWith("0x")?n.substring(2):n;return je(t.toLowerCase(),"base16")}function Z0(n){return $r(je(n))}function $6(n){return Ye(Yt(n))}function oi(n){return Ye(n,"base16")}function q6(n){return je(n)}function z6({r:n,s:t,recoveryParam:r},i){let o=new Uint8Array(i?65:64);if(o.set(je(n,"base16"),0),o.set(je(t,"base16"),32),i){if(typeof r>"u")throw new Error("Signer did not return a recoveryParam");o[64]=r}return $r(o)}function wT(n){let t=Yt(n);if(t.length<64||t.length>65)throw new TypeError(`Wrong size for signature. Expected 64 or 65 bytes, but got ${t.length}`);let r=oi(t.slice(0,32)),i=oi(t.slice(32,64)),o=t.length===65?t[64]:void 0;return{r,s:i,recoveryParam:o}}function H6(n,t){return jr([Yt(n),Yt(t)])}function qo(n){let t=typeof n=="string"?je(n):n;return(0,ep.hash)(t)}function ET(n){return new Uint8Array(U6.default.keccak_256.arrayBuffer(n))}function K6(n){let t=je(n.slice(2),"base16");return`0x${Ye(ET(t).slice(-20),"base16")}`}function Q0(n,t=new Uint8Array(4)){let r=je(n.toString(),"base10");return t.set(r,4-r.length),t}var Y0=n=>jr([Q0(n.length),n]);function j6(n,t,r,i,o){if(t!==256)throw new Error(`Unsupported key length: ${t}`);let s=jr([Y0(je(r)),Y0(typeof i>"u"?new Uint8Array(0):i),Y0(typeof o>"u"?new Uint8Array(0):o),Q0(t)]);return(0,ep.hash)(jr([Q0(1),n,s]))}var Vq=new ea.default.ec("secp256k1");function G6(n){let t=n;if(t.length!==64)throw new Error(`bad_key: Invalid private key format. Expecting 64 bytes, but got ${t.length}`);return function(r){try{let i=typeof r=="string"?q6(r):r,o=(0,Wu.sign)(t,i);return Promise.resolve($r(o))}catch(i){return Promise.reject(i)}}}var Wq=new ea.default.ec("p256");function ip(n){return typeof n=="object"&&"r"in n&&"s"in n}function _T(){return function(t,r){try{return Promise.resolve(r(t)).then(function(i){return ip(i)?z6(i):i})}catch(i){return Promise.reject(i)}}}function M6(n){return function(r,i){try{return Promise.resolve(i(r)).then(function(o){if(ip(o))return z6(o,n);if(n&&typeof wT(o).recoveryParam>"u")throw new Error("not_supported: ES256K-R not supported when signer doesn't provide a recovery param");return o})}catch(o){return Promise.reject(o)}}}function T6(){return function(t,r){try{return Promise.resolve(r(t)).then(function(i){if(ip(i))throw new Error("invalid_config: expected a signer function that returns a string instead of signature object");return i})}catch(i){return Promise.reject(i)}}}var AT={ES256:_T(),ES256K:M6(),"ES256K-R":M6(!0),Ed25519:T6(),EdDSA:T6()};function ST(n){let t=AT[n];if(!t)throw new Error(`not_supported: Unsupported algorithm ${n}`);return t}var df=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],pf=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],mf=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],bf=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],gf=[0,1518500249,1859775393,2400959708,2840853838],yf=[1352829926,1548603684,1836072691,2053994217,0];function zo(n,t){return n<<t|n>>>32-t}function k6(n,t,r,i,o,s,a,f){return zo(n+(t^r^i)+s+a|0,f)+o|0}function C6(n,t,r,i,o,s,a,f){return zo(n+(t&r|~t&i)+s+a|0,f)+o|0}function D6(n,t,r,i,o,s,a,f){return zo(n+((t|~r)^i)+s+a|0,f)+o|0}function O6(n,t,r,i,o,s,a,f){return zo(n+(t&i|r&~i)+s+a|0,f)+o|0}function I6(n,t,r,i,o,s,a,f){return zo(n+(t^(r|~i))+s+a|0,f)+o|0}var Vu=class{constructor(t=64){this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this._blockOffset=0,this._block=void 0,this._blockSize=void 0,this._length=[0,0,0,0],this._finalized=void 0,this.update=r=>{if(this._finalized)throw new Error("Digest already called");let i=this._block,o=0;for(;this._blockOffset+r.length-o>=this._blockSize;){for(let s=this._blockOffset;s<this._blockSize;)i[s++]=r[o++];this._update(),this._blockOffset=0}for(;o<r.length;)i[this._blockOffset++]=r[o++];for(let s=0,a=r.length*8;a>0;++s)this._length[s]+=a,a=this._length[s]/4294967296|0,a>0&&(this._length[s]-=4294967296*a);return this},this.digest=()=>{if(this._finalized)throw new Error("Digest already called");this._finalized=!0;let r=this._digest();this._block.fill(0),this._blockOffset=0;for(let i=0;i<4;++i)this._length[i]=0;return r},this._update=()=>{let r=new Array(16),i=new DataView(this._block.buffer);for(let k=0;k<16;++k)r[k]=r[k]=i.getInt32(k*4,!0);let o=this._a|0,s=this._b|0,a=this._c|0,f=this._d|0,l=this._e|0,p=this._a|0,b=this._b|0,v=this._c|0,C=this._d|0,D=this._e|0;for(let k=0;k<80;k+=1){let $,O;k<16?($=k6(o,s,a,f,l,r[df[k]],gf[0],mf[k]),O=I6(p,b,v,C,D,r[pf[k]],yf[0],bf[k])):k<32?($=C6(o,s,a,f,l,r[df[k]],gf[1],mf[k]),O=O6(p,b,v,C,D,r[pf[k]],yf[1],bf[k])):k<48?($=D6(o,s,a,f,l,r[df[k]],gf[2],mf[k]),O=D6(p,b,v,C,D,r[pf[k]],yf[2],bf[k])):k<64?($=O6(o,s,a,f,l,r[df[k]],gf[3],mf[k]),O=C6(p,b,v,C,D,r[pf[k]],yf[3],bf[k])):($=I6(o,s,a,f,l,r[df[k]],gf[4],mf[k]),O=k6(p,b,v,C,D,r[pf[k]],yf[4],bf[k])),o=l,l=f,f=zo(a,10),a=s,s=$,p=D,D=C,C=zo(v,10),v=b,b=O}let S=this._b+a+C|0;this._b=this._c+f+D|0,this._c=this._d+l+p|0,this._d=this._e+o+b|0,this._e=this._a+s+v|0,this._a=S},this._digest=()=>{this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56);let r=new DataView(this._block.buffer);r.setUint32(56,this._length[0],!0),r.setUint32(60,this._length[1],!0),this._block=new Uint8Array(r.buffer),this._update();let i=new DataView(new Uint8Array(20).buffer);return i.setInt32(0,this._a,!0),i.setInt32(4,this._b,!0),i.setInt32(8,this._c,!0),i.setInt32(12,this._d,!0),i.setInt32(16,this._e,!0),new Uint8Array(i.buffer)},this._block=new Uint8Array(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}},MT=(n,t)=>{let r=Ye(np(t).slice(0,1),"hex"),i=je(n,"hex"),o=new Vu().update(qo(i)).digest(),s=r+Ye(o,"hex"),a=qo(je(s,"hex")),f=qo(a),l=Ye(f,"hex").substring(0,8),p=s+l;return xT(je(p,"hex"))},TT=ea.default.ec,kT=(n,t)=>{let i=new TT("secp256k1").keyFromPublic(n,"hex").getPublic().encode("hex",!0),o=je(i,"hex"),s=new Vu().update(qo(o)).digest(),a=X0.bech32.toWords(s);return X0.bech32.encode(t,a).replace(t,"")},CT=(n,t)=>{if(t){let r=t.split(":");switch(r[0]){case"bip122":r[r.length-1]=MT(n,r[r.length-1]);break;case"cosmos":r[r.length-1]=kT(n,r[1]);break;case"eip155":r[r.length-1]=K6(n);break;default:return!1}return r.join(":").toLowerCase()===t.toLowerCase()}return!1},op=new ea.default.ec("secp256k1"),J6=new ea.default.ec("p256");function vf(n,t=!1){let r=Yt(n);if(r.length!==(t?65:64))throw new Error("wrong signature length");let i=oi(r.slice(0,32)),o=oi(r.slice(32,64)),s={r:i,s:o};return t&&(s.recoveryParam=r[64]),s}function Yu(n){if(n.publicKeyBase58)return np(n.publicKeyBase58);if(n.publicKeyBase64)return Yt(n.publicKeyBase64);if(n.publicKeyHex)return W0(n.publicKeyHex);if(n.publicKeyJwk&&n.publicKeyJwk.crv==="secp256k1"&&n.publicKeyJwk.x&&n.publicKeyJwk.y)return W0(op.keyFromPublic({x:oi(Yt(n.publicKeyJwk.x)),y:oi(Yt(n.publicKeyJwk.y))}).getPublic("hex"));if(n.publicKeyJwk&&n.publicKeyJwk.crv==="P-256"&&n.publicKeyJwk.x&&n.publicKeyJwk.y)return W0(J6.keyFromPublic({x:oi(Yt(n.publicKeyJwk.x)),y:oi(Yt(n.publicKeyJwk.y))}).getPublic("hex"));if(n.publicKeyJwk&&n.publicKeyJwk.kty==="OKP"&&n.publicKeyJwk.crv==="Ed25519"&&n.publicKeyJwk.x)return Yt(n.publicKeyJwk.x);if(n.publicKeyMultibase){let{base16:t,base58btc:r,base64:i,base64url:o}=Zo;return t.decoder.or(r.decoder.or(i.decoder.or(o.decoder))).decode(n.publicKeyMultibase)}return new Uint8Array}function DT(n,t,r){let i=qo(n),o=vf(t),a=r.filter(({ethereumAddress:f,blockchainAccountId:l})=>typeof f>"u"&&typeof l>"u").find(f=>{try{let l=Yu(f);return J6.keyFromPublic(l).verify(i,o)}catch{return!1}});if(!a)throw new Error("invalid_signature: Signature invalid for JWT");return a}function OT(n,t,r){let i=qo(n),o=vf(t),s=r.filter(({ethereumAddress:l,blockchainAccountId:p})=>typeof l>"u"&&typeof p>"u"),a=r.filter(({ethereumAddress:l,blockchainAccountId:p})=>typeof l<"u"||typeof p<"u"),f=s.find(l=>{try{let p=Yu(l);return op.keyFromPublic(p).verify(i,o)}catch{return!1}});if(!f&&a.length>0&&(f=V6(n,t,a)),!f)throw new Error("invalid_signature: Signature invalid for JWT");return f}function V6(n,t,r){let i;if(t.length>86)i=[vf(t,!0)];else{let a=vf(t,!1);i=[{...a,recoveryParam:0},{...a,recoveryParam:1}]}let o=a=>{let f=qo(n),l=op.recoverPubKey(f,a,a.recoveryParam),p=l.encode("hex"),b=l.encode("hex",!0),v=K6(p).toLowerCase();return r.find(D=>{var S,k,$;let O=oi(Yu(D));return O===p||O===b||((S=D.ethereumAddress)==null?void 0:S.toLowerCase())===v||((k=D.blockchainAccountId)==null||($=k.split("@eip155"))==null?void 0:$[0].toLowerCase())===v||CT(p,D.blockchainAccountId)})},s=i.map(o).filter(a=>typeof a<"u");if(s.length===0)throw new Error("invalid_signature: Signature invalid for JWT");return s[0]}function R6(n,t,r){let i=q6(n),o=Yt(t),s=r.find(a=>(0,Wu.verify)(Yu(a),i,o));if(!s)throw new Error("invalid_signature: Signature invalid for JWT");return s}var IT={ES256:DT,ES256K:OT,"ES256K-R":V6,Ed25519:R6,EdDSA:R6};function W6(n){let t=IT[n];if(!t)throw new Error(`not_supported: Unsupported algorithm ${n}`);return t}W6.toSignatureObject=vf;var Y6=function(n,t,r={},i={}){try{r.alg||(r.alg=RT);let o=typeof n=="string"?n:N6(n,i.canonicalize),s=[N6(r,i.canonicalize),o].join("."),a=ST(r.alg);return Promise.resolve(a(s,t)).then(function(f){return[s,f].join(".")})}catch(o){return Promise.reject(o)}};var RT="ES256K";function N6(n,t=!1){return Z0(t?(0,F6.default)(n):JSON.stringify(n))}function NT(n){let t=n.match(/^([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)$/);if(t)return{header:JSON.parse($6(t[1])),payload:t[2],signature:t[3],data:`${t[1]}.${t[2]}`};throw new Error("invalid_argument: Incorrect format JWS")}function PT({header:n,data:t,signature:r},i){return Array.isArray(i)||(i=[i]),W6(n.alg)(t,r,i)}function X6(n,t){let r=NT(n);return PT(r,t)}var P6=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function _t(n,t,r){if(!n.s){if(r instanceof Ho)if(r.s)t&1&&(t=r.s),r=r.v;else{r.o=_t.bind(null,n,t);return}if(r&&r.then){r.then(_t.bind(null,n,t),_t.bind(null,n,2));return}n.s=t,n.v=r;let i=n.o;i&&i(n)}}var Ho=function(){function n(){}return n.prototype.then=function(t,r){let i=new n,o=this.s;if(o){let s=o&1?t:r;if(s){try{_t(i,1,s(this.v))}catch(a){_t(i,2,a)}return i}else return this}return this.o=function(s){try{let a=s.v;s.s&1?_t(i,1,t?t(a):a):r?_t(i,1,r(a)):_t(i,2,a)}catch(a){_t(i,2,a)}},i},n}();function Ni(n){return n instanceof Ho&&n.s&1}function LT(n,t,r){var i=-1,o,s;function a(f){try{for(;++i<n.length&&(!r||!r());)if(f=t(i),f&&f.then)if(Ni(f))f=f.v;else{f.then(a,s||(s=_t.bind(null,o=new Ho,2)));return}o?_t(o,1,f):o=f}catch(l){_t(o||(o=new Ho),2,l)}}return a(),o}function BT(n,t,r){if(typeof n[P6]=="function"){let b=function(v){try{for(;!(o=i.next()).done&&(!r||!r());)if(v=t(o.value),v&&v.then)if(Ni(v))v=v.v;else{v.then(b,a||(a=_t.bind(null,s=new Ho,2)));return}s?_t(s,1,v):s=v}catch(C){_t(s||(s=new Ho),2,C)}};var i=n[P6](),o,s,a;if(b(),i.return){var f=function(v){try{o.done||i.return()}catch{}return v};if(s&&s.then)return s.then(f,function(v){throw f(v)});f()}return s}if(!("length"in n))throw new TypeError("Object is not iterable");for(var l=[],p=0;p<n.length;p++)l.push(n[p]);return LT(l,function(b){return t(l[b])},r)}function UT(n,t,r){for(var i;;){var o=n();if(Ni(o)&&(o=o.v),!o)return s;if(o.then){i=0;break}var s=r();if(s&&s.then)if(Ni(s))s=s.s;else{i=1;break}if(t){var a=t();if(a&&a.then&&!Ni(a)){i=2;break}}}var f=new Ho,l=_t.bind(null,f,2);return(i===0?o.then(b):i===1?s.then(p):a.then(v)).then(void 0,l),f;function p(C){s=C;do{if(t&&(a=t(),a&&a.then&&!Ni(a))){a.then(v).then(void 0,l);return}if(o=n(),!o||Ni(o)&&!o.v){_t(f,1,s);return}if(o.then){o.then(b).then(void 0,l);return}s=r(),Ni(s)&&(s=s.v)}while(!s||!s.then);s.then(p).then(void 0,l)}function b(C){C?(s=r(),s&&s.then?s.then(p).then(void 0,l):p(s)):_t(f,1,s)}function v(){(o=n())?o.then?o.then(b).then(void 0,l):b(o):_t(f,1,s)}}function FT(n){if(!(n.protected&&n.iv&&n.ciphertext&&n.tag))throw new Error("bad_jwe: missing properties");n.recipients&&n.recipients.map(t=>{if(!(t.header&&t.encrypted_key))throw new Error("bad_jwe: malformed recipients")})}function L6({ciphertext:n,tag:t,iv:r,protectedHeader:i,recipient:o},s){let a={protected:i,iv:$r(r),ciphertext:$r(n),tag:$r(t)};return s&&(a.aad=$r(s)),o&&(a.recipients=[o]),a}var Z6=function(n,t){try{let i=function(p){if(f===null)throw new Error("failure: Failed to decrypt");return f},r;FT(n);let o=JSON.parse($6(n.protected));if(o.enc!==t.enc)throw new Error(`not_supported: Decrypter does not supported: '${o.enc}'`);let s=H6(n.ciphertext,n.tag),a=je(n.aad?`${n.protected}.${n.aad}`:n.protected),f=null,l=function(){return o.alg==="dir"&&t.alg==="dir"?Promise.resolve(t.decrypt(s,Yt(n.iv),a)).then(function(p){f=p}):function(){if(!n.recipients||n.recipients.length===0)throw new Error("bad_jwe: missing recipients");{let p=0;return UT(function(){return!f&&p<n.recipients.length},function(){return p++},function(){let b=n.recipients[p];Object.assign(b.header,o);let v=function(){if(b.header.alg===t.alg)return Promise.resolve(t.decrypt(s,Yt(n.iv),a,b)).then(function(C){f=C})}();if(v&&v.then)return v.then(function(){})})}}()}();return Promise.resolve(l&&l.then?l.then(i):i(l))}catch(r){return Promise.reject(r)}},Q6=function(n,t,r={},i){try{if(t[0].alg==="dir"){if(t.length>1)throw new Error('not_supported: Can only do "dir" encryption to one key.');return Promise.resolve(t[0].encrypt(n,r,i)).then(function(o){return L6(o,i)})}else{let o=t[0].enc;if(!t.reduce((l,p)=>l&&p.enc===o,!0))throw new Error("invalid_argument: Incompatible encrypters passed");let s,a,f=BT(t,function(l){let p=function(){return s?Promise.resolve(l.encryptCek==null?void 0:l.encryptCek(s)).then(function(b){if(b){var v,C;(v=a)==null||(C=v.recipients)==null||C.push(b)}}):Promise.resolve(l.encrypt(n,r,i)).then(function(b){s=b.cek,a=L6(b,i)})}();if(p&&p.then)return p.then(function(){})});return Promise.resolve(f&&f.then?f.then(function(){return a}):a)}}catch(o){return Promise.reject(o)}};var ex=function(n,t){try{let r=function(o,s=[]){try{return Promise.resolve(t.resolve(o)).then(function({didResolutionMetadata:a,didDocument:f}){function l(){var v,C;let D=(v=f.keyAgreement)==null||(C=v.map(k=>typeof k=="string"?[...f.publicKey||[],...f.verificationMethod||[]].find($=>$.id===k):k))==null?void 0:C.filter(k=>typeof k<"u"),S=D?.filter(k=>k.type==="X25519KeyAgreementKey2019"&&Boolean(k.publicKeyBase58))||[];if(!S.length&&!p.length)throw new Error(`no_suitable_keys: Could not find x25519 key for ${o}`);return S.map(k=>qT(np(k.publicKeyBase58),k.id)).concat(...p)}if(s.push(o),a!=null&&a.error||f==null)throw new Error(`resolver_error: Could not resolve ${o}: ${a.error}, ${a.message}`);let p=[];if(!f.controller&&!f.keyAgreement)throw new Error(`no_suitable_keys: Could not find x25519 key for ${o}`);let b=function(){if(f.controller){let v=Array.isArray(f.controller)?f.controller:[f.controller];v=v.filter(D=>!s.includes(D));let C=v.map(D=>r(D,s).catch(()=>[]));return Promise.resolve(Promise.all(C)).then(function(D){p=[].concat(...D)})}}();return b&&b.then?b.then(l):l(b)})}catch(a){return Promise.reject(a)}},i=n.map(o=>r(o));return Promise.resolve(Promise.all(i)).then(function(o){return[].concat(...o)})}catch(r){return Promise.reject(r)}};function tx(n){let t=new tp.XChaCha20Poly1305(n);return(r,i)=>{let o=(0,rp.randomBytes)(t.nonceLength),s=t.seal(o,r,i);return{ciphertext:s.subarray(0,s.length-t.tagLength),tag:s.subarray(s.length-t.tagLength),iv:o}}}function $T(n){let t=function(s,a={},f){try{let l=Z0(JSON.stringify(Object.assign({alg:o},a,{enc:i}))),p=je(f?`${l}.${$r(f)}`:l);return Promise.resolve({...r(s,p),protectedHeader:l})}catch(l){return Promise.reject(l)}},r=tx(n),i="XC20P",o="dir";return{alg:o,enc:i,encrypt:t}}function B6(n){let t=function(i,o,s){try{return Promise.resolve(r.open(o,i,s))}catch(a){return Promise.reject(a)}},r=new tp.XChaCha20Poly1305(n);return{alg:"dir",enc:"XC20P",decrypt:t}}function qT(n,t){let r=function(f,l={},p){try{Object.assign(l,{alg:void 0});let b=(0,rp.randomBytes)(32);return Promise.resolve($T(b).encrypt(f,l,p)).then(function(v){return Promise.resolve(i(b)).then(function(C){return{...v,recipient:C,cek:b}})})}catch(b){return Promise.reject(b)}},i=function(f){try{let l=(0,xf.generateKeyPair)(),p=(0,xf.sharedKey)(l.secretKey,n),b=j6(p,s,o),v=tx(b)(f),C={encrypted_key:$r(v.ciphertext),header:{alg:o,iv:$r(v.iv),tag:$r(v.tag),epk:{kty:"OKP",crv:a,x:$r(l.publicKey)}}};return t&&(C.header.kid=t),Promise.resolve(C)}catch(l){return Promise.reject(l)}},o="ECDH-ES+XC20PKW",a="X25519";return{alg:o,enc:"XC20P",encrypt:r,encryptCek:i}}function zT(n){if(!(n&&n.epk&&n.iv&&n.tag))throw new Error("bad_jwe: malformed header")}function rx(n){let t=function(s,a,f,l){try{let v=function(){let k=j6(D,i,r),$=H6(l.encrypted_key,l.header.tag);return Promise.resolve(B6(k).decrypt($,Yt(l.header.iv))).then(function(O){return O===null?null:B6(O).decrypt(s,a,f)})};var p,b;if(zT((p=l)==null?void 0:p.header),l=l,((b=l.header.epk)==null?void 0:b.crv)!==o||typeof l.header.epk.x>"u")return Promise.resolve(null);let C=Yt(l.header.epk.x),D,S=function(){if(n instanceof Uint8Array)D=(0,xf.sharedKey)(n,C);else return Promise.resolve(n(C)).then(function(k){D=k})}();return Promise.resolve(S&&S.then?S.then(v):v(S))}catch(v){return Promise.reject(v)}},r="ECDH-ES+XC20PKW",o="X25519";return{alg:r,enc:"XC20P",decrypt:t}}var mx=Ve(ix(),1);var ox=Symbol("abortable"),Xu=Symbol("aborted");function sx(n,t){if(t.aborted)return Promise.reject(Xu);let r,i=new Promise((o,s)=>{r=s});return t.addEventListener("abort",()=>{r(Xu)}),Promise.race([n,i])}var ax=(n=21)=>crypto.getRandomValues(new Uint8Array(n)).reduce((t,r)=>(r&=63,r<36?t+=r.toString(36):r<62?t+=(r-26).toString(36).toUpperCase():r>62?t+="-":t+="_",t),"");var Zu="utils_abort_request";var er;(function(n){n[n.PARSE_ERROR=-32700]="PARSE_ERROR",n[n.INVALID_REQUEST=-32600]="INVALID_REQUEST",n[n.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",n[n.INVALID_PARAMS=-32602]="INVALID_PARAMS",n[n.INTERNAL_ERROR=-32603]="INTERNAL_ERROR"})(er||(er={}));var fx={[er.PARSE_ERROR]:"Parse error",[er.INVALID_REQUEST]:"Invalid request",[er.METHOD_NOT_FOUND]:"Method not found",[er.INVALID_PARAMS]:"Invalid params",[er.INTERNAL_ERROR]:"Internal error"};function HT(n){return-32e3>=n&&n>=-32099}function Qu(n){return fx[n.toString()]??(HT(n)?"Server error":"Application error")}var vr=class extends Error{static fromObject(t){return new vr(t.code,t.message,t.data)}toObject(){return{code:this.code,data:this.data,message:this.message}}constructor(t,r,i){super(),Object.setPrototypeOf(this,vr.prototype),this.code=t,this.data=i,this.message=r??Qu(t)}};function wf(n){let t=fx[n];return function(i){return new vr(n,t,i)}}var KT=wf(er.PARSE_ERROR),iz=wf(er.INVALID_REQUEST),oz=wf(er.METHOD_NOT_FOUND),sz=wf(er.INVALID_PARAMS),az=wf(er.INTERNAL_ERROR);function jT(n,t){if(t.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function GT(n,t){return t.get?t.get.call(n):t.value}function JT(n,t,r){if(t.set)t.set.call(n,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}function cx(n,t,r){if(!t.has(n))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(n)}function sp(n,t){var r=cx(n,t,"get");return GT(n,r)}function VT(n,t,r){jT(n,t),t.set(n,r)}function WT(n,t,r){var i=cx(n,t,"set");return JT(n,i,r),r}var Ef=new WeakMap,_f=class{get connection(){return sp(this,Ef)}createID(){return ax()}request(t,r=void 0,i={}){let{signal:o}=i;if(o?.aborted)return Promise.reject(Xu);let s=this.createID(),a=sp(this,Ef).send({jsonrpc:"2.0",id:s,method:t,params:r}).then(f=>{if(f==null)throw new Error("Missing response");if(f.error!=null)throw vr.fromObject(f.error);return f.result});return o==null?a:(o.addEventListener("abort",()=>{this.notify(Zu,{id:s})}),sx(a,o))}async notify(t,r=void 0){await sp(this,Ef).send({jsonrpc:"2.0",method:t,params:r})}constructor(t){VT(this,Ef,{writable:!0,value:void 0}),WT(this,Ef,t)}};function ux(n,t){return{jsonrpc:"2.0",id:n,error:{code:t,message:Qu(t)}}}function YT(n,t,r){console.warn("Unhandled handler error",t,r)}function XT(n,t){console.warn("Unhandled invalid message",t)}function ZT(n,t){console.warn("Unhandled notification",t)}function lx(n,t={}){let r=t.onHandlerError??YT,i=t.onInvalidMessage??XT,o=t.onNotification??ZT,s={};function a(f,l){if(l.method===Zu){let p=l.params?.id;p!=null&&s[p]?.abort()}else o(f,l)}return async function(l,p){let b=p.id;if(p.jsonrpc!=="2.0"||p.method==null)return b==null?(i(l,p),null):ux(b,er.INVALID_REQUEST);let v=n[p.method];if(v==null)return b==null?(a(l,p),null):ux(b,er.METHOD_NOT_FOUND);try{let C;if(b!=null&&v[ox]){let S=new AbortController;s[b]=S,C=v(l,p.params,{signal:S.signal})}else C=v(l,p.params,{});let D=C==null?C:typeof C.then=="function"?await C:C;return b==null||s[b]?.signal.aborted?null:{jsonrpc:"2.0",id:b,result:D}}catch(C){if(b==null||s[b]?.signal.aborted)return r(l,p,C),null;let D;if(C instanceof vr)D=C.toObject();else{r(l,p,C);let S=C.code??-32e3;D={code:S,message:C.message||Qu(S)}}return{jsonrpc:"2.0",id:b,error:D}}finally{b!=null&&delete s[b]}}}var QT="base64pad";function hx(n){return JSON.parse((0,mx.default)(n))}function ek(n){let t=new Uint8Array(n.length+2);return t[0]=237,t[1]=1,t.set(n,2),`did:key:z${Ye(t,"base58btc")}`}function dx(n){let[t,r,i]=n.split(".");return{payload:r,signatures:[{protected:t,signature:i}]}}var px=async(n,t,r,i={})=>{let o=`${t}#${t.split(":")[2]}`,s=G6(r),a=hx(Object.assign(i,{kid:o,alg:"EdDSA"}));return Y6(typeof n=="string"?n:hx(n),s,a)},tk={did_authenticate:async({did:n,secretKey:t},r)=>{let i=await px({did:n,aud:r.aud,nonce:r.nonce,paths:r.paths,exp:Math.floor(Date.now()/1e3)+600},n,t);return dx(i)},did_createJWS:async({did:n,secretKey:t},r)=>{if(r.did.split("#")[0]!==n)throw new vr(4100,`Unknown DID: ${n}`);let o=await px(r.payload,n,t,r.protected);return{jws:dx(o)}},did_decryptJWE:async({secretKey:n},t)=>{let r=rx((0,el.convertSecretKeyToX25519)(n));try{let i=await Z6(t.jwe,r);return{cleartext:Ye(i,QT)}}catch(i){throw new vr(-32e3,i.message)}}},ta=class{constructor(t){let{secretKey:r,publicKey:i}=(0,el.generateKeyPairFromSeed)(t),o=ek(i),s=lx(tk);this._handle=async a=>await s({did:o,secretKey:r},a)}get isDidProvider(){return!0}async send(t){return await this._handle(t)}};var yp=Ve(ha(),1);Ff();var ap={};Qe(ap,{keyToDidDoc:()=>rk});function rk(n,t){let r=`did:key:${t}`,i=`${r}#${t}`;return{id:r,verificationMethod:[{id:i,type:"Secp256k1VerificationKey2018",controller:r,publicKeyBase58:Ye(n,"base58btc")}],authentication:[i],assertionMethod:[i],capabilityDelegation:[i],capabilityInvocation:[i]}}var fp={};Qe(fp,{keyToDidDoc:()=>ik});Qo();var bx=Ve(uu(),1);function nk(n){let t=new Uint8Array(n.length+2);return t[0]=236,t[1]=1,t.set(n,2),`z${Ye(t,"base58btc")}`}function ik(n,t){let r=`did:key:${t}`,i=`${r}#${t}`,o=(0,bx.convertPublicKeyToX25519)(n),s=`${r}#${nk(o)}`;return{id:r,verificationMethod:[{id:i,type:"Ed25519VerificationKey2018",controller:r,publicKeyBase58:Ye(n,"base58btc")}],authentication:[i],assertionMethod:[i],capabilityDelegation:[i],capabilityInvocation:[i],keyAgreement:[{id:s,type:"X25519KeyAgreementKey2019",controller:r,publicKeyBase58:Ye(o,"base58btc")}]}}var mp={};Qe(mp,{keyToDidDoc:()=>Ck,pubKeyBytesToXY:()=>Fx});var tl={};Qe(tl,{ECPointDecompress:()=>Mk});var Lx=Ve(Af(),1);function xk(n){return n>=0?n:-n}function wk(n,t){if(typeof n=="number"&&(n=BigInt(n)),typeof t=="number"&&(t=BigInt(t)),n<=0n||t<=0n)throw new RangeError("a and b MUST be > 0");let r=0n,i=1n,o=1n,s=0n;for(;n!==0n;){let a=t/n,f=t%n,l=r-o*a,p=i-s*a;t=n,n=f,r=o,i=s,o=l,s=p}return{g:t,x:r,y:i}}function lp(n,t){if(typeof n=="number"&&(n=BigInt(n)),typeof t=="number"&&(t=BigInt(t)),t<=0n)throw new RangeError("n must be > 0");let r=n%t;return r<0n?r+t:r}function Ek(n,t){let r=wk(lp(n,t),t);if(r.g!==1n)throw new RangeError(`${n.toString()} does not have inverse modulo ${t.toString()}`);return lp(r.x,t)}function Ko(n,t,r){if(typeof n=="number"&&(n=BigInt(n)),typeof t=="number"&&(t=BigInt(t)),typeof r=="number"&&(r=BigInt(r)),r<=0n)throw new RangeError("n must be > 0");if(r===1n)return 0n;if(n=lp(n,r),t<0n)return Ek(Ko(n,xk(t),r),r);let i=1n;for(;t>0;)t%2n===1n&&(i=i*n%r),t=t/2n,n=n**2n%r;return i}var Et={};Qe(Et,{pubKeyBytesToHex:()=>_k,publicKeyHexToUint8ArrayPointPair:()=>Nx,publicKeyIntToUint8ArrayPointPair:()=>Px,publicKeyIntToXY:()=>Sk,publicKeyToXY:()=>Ak,testHexString:()=>dp,testUint8Array:()=>Pi});var jo=Ve(Af(),1);Hf();function _k(n){if(!Pi(n))throw new TypeError("input must be a Uint8Array");return jo.toString(n,"base16")}function Ak(n){if(!dp(n))throw new TypeError("input must be string with characters 0-9,A-F,a-f");let t=Nx(n),r=io.encode(t.xOctet).slice(1),i=io.encode(t.yOctet).slice(1);return{xm:r,ym:i}}function Nx(n){if(!dp(n))throw new TypeError("input must be string with characters 0-9,A-F,a-f");let t=n.slice(0,n.length/2),r=n.slice(n.length/2,n.length),i=jo.fromString(t,"base16"),o=jo.fromString(r,"base16");return{xOctet:i,yOctet:o}}function dp(n){let t=/^[A-Fa-f0-9]+$/i;return!!(t.exec(n)!==null&&t.test(n)&&typeof n=="string")}function Pi(n){return n==null?!1:n.constructor===Uint8Array}function Sk(n){if(n==null)throw new TypeError("input cannot be null or undefined.");if(typeof n!="object")throw new TypeError("Input must be an object with properties x and y");if(!Object.prototype.hasOwnProperty.call(n,"x")||!Object.prototype.hasOwnProperty.call(n,"y"))throw new Error("Input must have properties x and y");if(typeof n.x!="bigint"&&typeof n.y!="bigint")throw new Error("Input coordinates must be BigInt");let t=Px(n),r=io.encode(t.xOctet).slice(1),i=io.encode(t.yOctet).slice(1);return{xm:r,ym:i}}function Px(n){if(n==null)throw new TypeError("input cannot be null or undefined.");if(typeof n!="object")throw new TypeError("Input must be an object with properties x and y");if(!Object.prototype.hasOwnProperty.call(n,"x")||!Object.prototype.hasOwnProperty.call(n,"y"))throw new Error("Input must have properties x and y");if(typeof n.x!="bigint"&&typeof n.y!="bigint")throw new Error("Input coordinates must be BigInt");let t=n.x.toString(),r=n.y.toString(),i=jo.fromString(t,"base10"),o=jo.fromString(r,"base10");return{xOctet:i,yOctet:o}}function Mk(n){if(!Pi(n))throw new TypeError("input must be a Uint8Array");let t=BigInt(2),r=t**256n-t**224n+t**192n+t**96n-1n,i=41058363725152142129326129780047268409114441015993725554835256314039467401291n,o=(r+1n)/4n,s=BigInt(n[0]-2),a=n.subarray(1),f=BigInt(Lx.toString(a,"base10")),l=f**3n-f*3n+i,p=Ko(l,o,r);return p%2n!==s&&(p=r-p),{x:f,y:p}}var rl={};Qe(rl,{ECPointDecompress:()=>Tk});var Bx=Ve(Af(),1);function Tk(n){if(!Pi(n))throw new TypeError("input must be a Uint8Array");let t=BigInt(2),r=t**384n-t**128n-t**96n+t**32n-1n,i=27580193559959705877849011840389048093056905856361568521428707301988689241309860865136260764883745107765439761230575n,o=(r+1n)/4n,s=BigInt(n[0]-2),a=n.subarray(1),f=BigInt(Bx.toString(a,"base10")),l=f**3n-f*3n+i,p=Ko(l,o,r);return p%2n!==s&&(p=r-p),{x:f,y:p}}var nl={};Qe(nl,{ECPointDecompress:()=>kk});var Ux=Ve(Af(),1);function kk(n){if(!Pi(n))throw new TypeError("input must be a Uint8Array");let r=BigInt(2)**521n-1n,i=1093849038073734274511112390766805569936207598951683748994586394495953116150735016013708737573759623248592132296706313309438452531591012912142327488478985984n,o=(r+1n)/4n,s=BigInt(n[0]-2),a=n.subarray(1),f=BigInt(Ux.toString(a,"base10")),l=f**3n-f*3n+i,p=Ko(l,o,r);return p%2n!==s&&(p=r-p),{x:f,y:p}}function Ck(n,t){let r=`did:key:${t}`,i=`${r}#${t}`,o=Fx(n);return{id:r,verificationMethod:[{id:i,type:"JsonWebKey2020",controller:r,publicKeyJwk:{kty:"EC",crv:"P-256",x:o.xm,y:o.ym}}],authentication:[i],assertionMethod:[i],capabilityDelegation:[i],capabilityInvocation:[i]}}function Fx(n){if(!Et.testUint8Array(n))throw new TypeError("input must be a Uint8Array");let t=Et.pubKeyBytesToHex(n),r=t.length/2;if(r==64)return Et.publicKeyToXY(t);if(r==65&&t.slice(0,2)=="04"){let i=t.slice(2);return Et.publicKeyToXY(i)}if(r==33&&(t.slice(0,2)=="03"||t.slice(0,2)=="02")){let i=je(t,"base16"),o=tl.ECPointDecompress(i);return Et.publicKeyIntToXY(o)}throw new Error("Unexpected pubKeyBytes")}var bp={};Qe(bp,{keyToDidDoc:()=>Dk,pubKeyBytesToXY:()=>$x});function Dk(n,t){let r=`did:key:${t}`,i=`${r}#${t}`,o=$x(n);return{id:r,verificationMethod:[{id:i,type:"JsonWebKey2020",controller:r,publicKeyJwk:{kty:"EC",crv:"P-384",x:o.xm,y:o.ym}}],authentication:[i],assertionMethod:[i],capabilityDelegation:[i],capabilityInvocation:[i]}}function $x(n){if(!Et.testUint8Array(n))throw new TypeError("input must be a Uint8Array");let t=Et.pubKeyBytesToHex(n),r=t.length/2;if(r==96)return Et.publicKeyToXY(t);if(r==97&&t.slice(0,2)=="04"){let i=t.slice(2);return Et.publicKeyToXY(i)}if(r==49&&(t.slice(0,2)=="03"||t.slice(0,2)=="02")){let i=je(t,"base16"),o=rl.ECPointDecompress(i);return Et.publicKeyIntToXY(o)}throw new Error("Unexpected pubKeyBytes")}var gp={};Qe(gp,{keyToDidDoc:()=>Ok,pubKeyBytesToXY:()=>qx});function Ok(n,t){let r=`did:key:${t}`,i=`${r}#${t}`,o=qx(n);return{id:r,verificationMethod:[{id:i,type:"JsonWebKey2020",controller:r,publicKeyJwk:{kty:"EC",crv:"P-521",x:o.xm,y:o.ym}}],authentication:[i],assertionMethod:[i],capabilityDelegation:[i],capabilityInvocation:[i]}}function qx(n){if(!Et.testUint8Array(n))throw new TypeError("input must be a Uint8Array");let t=Et.pubKeyBytesToHex(n);if(132<=t.length&&t.length<=134&&(t.slice(0,2)=="03"||t.slice(0,2)=="02")){let r=je(t,"base16"),i=nl.ECPointDecompress(r);return Et.publicKeyIntToXY(i)}throw new Error("Unexpected pubKeyBytes")}var Ik="application/did+ld+json",zx="application/did+json",Rk={231:ap,237:fp,4608:mp,4609:bp,4610:gp};function vp(){return{key:async(n,t,r,i)=>{let o=i.accept||zx,s={didResolutionMetadata:{contentType:o},didDocument:null,didDocumentMetadata:{}};try{let a=Mr.decode(t.id),f=yp.default.decode(a),l=a.slice(yp.default.decode.bytes),p=await Rk[f].keyToDidDoc(l,t.id);o===Ik?(p["@context"]="https://w3id.org/did/v1",s.didDocument=p):o===zx?s.didDocument=p:(delete s.didResolutionMetadata.contentType,s.didResolutionMetadata.error="representationNotSupported")}catch(a){s.didResolutionMetadata.error="invalidDid",s.didResolutionMetadata.message=a.toString()}return s}}}var Hx={getResolver:vp};var _p=Ve(Kn(),1);Hr();ma();Gl();Hf();var Nk=24;async function Kx(n){let t=await oo({value:n,codec:Vr,hasher:ui});return{cid:t.cid,linkedBlock:t.bytes}}function Pk(n,t=Nk){let r=(t-n.length%t)%t,i=new Uint8Array(n.length+r);return i.set(n,0),i}async function Lk(n){return(await oo({value:n,codec:Vr,hasher:Jf})).cid}function Bk(n){if(n=Me.asCID(n),n.code!==ss)throw new Error("CID codec must be dag-cbor");if(n.multihash.code!==Jf.code)throw new Error("CID must use identity multihash");return hh(n.multihash.digest)}async function jx(n,t){return Pk((await Lk(n)).bytes,t)}function Gx(n){return Bk(Me.decodeFirst(n)[0])}Hr();function Jx(){return{eip191:async(n,t)=>{Fk(n,t)}}}var Uk=new Date("2022-09-20").valueOf();function Fk(n,t){_d(n),Rg(n,t);let i=[t0(_o.fromCacao(n).toMessage(),n.s.s).toLowerCase()];if(Date.parse(n.p.iat)<=Uk){let s=t0(Ig(_o.fromCacao(n),"Ethereum"),n.s.s).toLowerCase();i.push(s)}let o=gn.parse(n.p.iss.replace("did:pkh:","")).address.toLowerCase();if(!i.includes(o))throw new Error("Signature does not belong to issuer")}Qo();ba();var Vx=Ve(Kn(),1);Qo();function Wx(){return Ye((0,Vx.randomBytes)(16),"base64")}var Yx="base64pad",Xx="base64url";function Zx(n){return Ye(n,Yx)}function Qx(n){return Ye(n,Xx)}function e5(n){return je(n,Yx)}function il(n){return JSON.parse(Ye(je(n,Xx)))}function t5(n){if(n.signatures.length>1)throw new Error("Cant convert to compact jws");return`${n.signatures[0].protected}.${n.payload}.${n.signatures[0].signature}`}function r5(n,t){if(t){let r=t.toISOString().split(".")[0]+"Z";return`${n}?versionTime=${r}`}else return n}function n5(n){return n?Array.isArray(n)?n:[n]:[]}var $k={...Jx()};function qk(n){return"registry"in n&&"cache"in n}var Li=class{get capability(){if(!this._capability)throw new Error("DID has no capability attached");return this._capability}get hasCapability(){return this._capability!=null}get parent(){if(!this._parentId)throw new Error("DID has no parent DID");return this._parentId}get hasParent(){return this._parentId!=null}get id(){if(this._id==null)throw new Error("DID is not authenticated");return this._id}get authenticated(){return this._id!=null}withCapability(t){return new Li({provider:this._client?.connection,resolver:this._resolver,capability:t,parent:this._parentId})}setProvider(t){if(this._client==null)this._client=new _f(t);else if(this._client.connection!==t)throw new Error("A different provider is already set, create a new DID instance to use another provider")}setResolver(t,r){this._resolver=qk(t)?t:new xu(t,r)}async authenticate({provider:t,paths:r=[],aud:i}={}){if(t!=null&&this.setProvider(t),this._client==null)throw new Error("No provider available");let o=Wx(),s=await this._client.request("did_authenticate",{nonce:o,aud:i,paths:r}),{kid:a}=await this.verifyJWS(s),f=il(s.payload);if(!a.includes(f.did))throw new Error("Invalid authencation response, kid mismatch");if(f.nonce!==o)throw new Error("Invalid authencation response, wrong nonce");if(f.aud!==i)throw new Error("Invalid authencation response, wrong aud");if(f.exp<Date.now()/1e3)throw new Error("Invalid authencation response, expired");return this._id=f.did,this._id}async createJWS(t,r={}){if(this._client==null)throw new Error("No provider available");if(this._id==null)throw new Error("DID is not authenticated");if(this._capability){let o=this._capability.p.exp;if(o&&Date.parse(o)<Date.now())throw new Error("Capability is expired, cannot create a valid signature");let s=await Ha.fromCacao(this._capability),a=Me.asCID(s.cid);if(!a)throw new Error("Capability CID of the JWS cannot be set to the capability payload cid as they are incompatible");r.protected=r.protected||{},r.protected.cap=`ipfs://${a?.toString()}`}let{jws:i}=await this._client.request("did_createJWS",{did:this._id,...r,payload:t});return i}async createDagJWS(t,r={}){let{cid:i,linkedBlock:o}=await Kx(t),s=Qx(i.bytes);Object.assign(r,{linkedBlock:Zx(o)});let a=await this.createJWS(s,r),f=Me.asCID(i);if(!f)throw new Error("CID of the JWS cannot be set to the encoded payload cid as they are incompatible");if(a.link=f,this._capability){let l=await Ha.fromCacao(this._capability);return{jws:a,linkedBlock:o,cacaoBlock:l.bytes}}return{jws:a,linkedBlock:o}}async verifyJWS(t,r={}){r=Object.assign({verifiers:$k},r),typeof t!="string"&&(t=t5(t));let i=il(t.split(".")[0]).kid;if(!i)throw new Error('No "kid" found in jws');let o=await this.resolve(i);if(!r.disableTimecheck){let p=o.didDocumentMetadata?.nextUpdate;if(p){let v=r.revocationPhaseOutSecs?r.revocationPhaseOutSecs*1e3:0,C=new Date(p).valueOf()+v;if(!(r.atTime&&r.atTime.getTime()<C))throw new Error(`invalid_jws: signature authored with a revoked DID version: ${i}`)}let b=o.didDocumentMetadata?.updated;if(b&&r.atTime&&r.atTime.getTime()<new Date(b).valueOf())throw new Error(`invalid_jws: signature authored before creation of DID version: ${i}`)}let a=o.didDocument?.id;if(r.issuer&&r.issuer===r.capability?.p.iss&&a===r.capability.p.aud){if(!r.verifiers)throw new Error("Registered verifiers needed for CACAO");await Ao.verify(r.capability,{disableExpirationCheck:r.disableTimecheck,atTime:r.atTime?r.atTime:void 0,revocationPhaseOutSecs:r.revocationPhaseOutSecs,verifiers:r.verifiers??{}})}else if(r.issuer&&r.issuer!==a){let p=r5(r.issuer,r.atTime),v=(await this.resolve(p)).didDocument?.controller,C=n5(v);if(r.capability?.s&&r.capability.p.aud===a&&C.includes(r.capability.p.iss))await Ao.verify(r.capability,{atTime:r.atTime?r.atTime:void 0,revocationPhaseOutSecs:r.revocationPhaseOutSecs,verifiers:r.verifiers??{}});else if(!(a?C.includes(a):!1))throw new Error(`invalid_jws: not a valid verificationMethod for issuer: ${i}`)}let f=o.didDocument?.verificationMethod||[];X6(t,f);let l;try{l=il(t.split(".")[1])}catch{}return{kid:i,payload:l,didResolutionResult:o}}async createJWE(t,r,i={}){let o=await ex(r,this._resolver);return Q6(t,o,i.protectedHeader,i.aad)}async createDagJWE(t,r,i={}){let o=await jx(t);return this.createJWE(o,r,i)}async decryptJWE(t,r={}){if(this._client==null)throw new Error("No provider available");if(this._id==null)throw new Error("DID is not authenticated");let{cleartext:i}=await this._client.request("did_decryptJWE",{did:this._id,...r,jwe:t});return e5(i)}async decryptDagJWE(t){let r=await this.decryptJWE(t);return Gx(r)}async resolve(t){let r=await this._resolver.resolve(t);if(r.didResolutionMetadata.error){let{error:i,message:o}=r.didResolutionMetadata,s=o?`, ${o}`:"";throw new Error(`Failed to resolve ${t}: ${i}${s}`)}return r}constructor({provider:t,resolver:r={},resolverOptions:i,capability:o,parent:s}={}){if(t!=null&&(this._client=new _f(t)),o){if(this._capability=o,this._parentId=this._capability.p.iss,s&&this._parentId!==s)throw new Error("Capability issuer and parent not equal")}else s&&(this._parentId=s);this.setResolver(r,i)}};function zk(n,t){if(t.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Hk(n,t){return t.get?t.get.call(n):t.value}function Kk(n,t,r){if(t.set)t.set.call(n,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}function o5(n,t,r){if(!t.has(n))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(n)}function Rn(n,t){var r=o5(n,t,"get");return Hk(n,r)}function xp(n,t,r){zk(n,t),t.set(n,r)}function wp(n,t,r){var i=o5(n,t,"set");return Kk(n,i,r),r}async function i5(n){let t=new ta(n||(0,_p.randomBytes)(32)),r=new Li({provider:t,resolver:Hx.getResolver()});return await r.authenticate(),r}async function jk(n,t){let r=n.withCapability(t);return await r.authenticate(),r}function Gk(n){return Ye(je(JSON.stringify(n)),"base64url")}function Jk(n){return JSON.parse(Ye(je(n,"base64url")))}function Vk(n){return Ye(n,"base64pad")}function Wk(n){return je(n,"base64pad")}var Sf=new WeakMap,Ep=new WeakMap,Bi=new WeakMap,Nn=class{static async authorize(t,r={}){if(!r.resources||r.resources.length===0)throw new Error("Required: resource argument option when authorizing");let i=r,o=(0,_p.randomBytes)(32),s=await i5(o);if(i.uri=s.id,r.expiresInSecs){let l=new Date(Date.now()+r.expiresInSecs*1e3);i.expirationTime=l.toISOString()}let a=await t(r),f=await jk(s,a);return new Nn({cacao:a,keySeed:o,did:f})}static async initDID(t,r){let i=t.withCapability(r);return await i.authenticate(),i}get did(){return Rn(this,Sf)}serialize(){let t={sessionKeySeed:Vk(Rn(this,Ep)),cacao:Rn(this,Bi)};return Gk(t)}static async fromSession(t){let{sessionKeySeed:r,cacao:i}=Jk(t),o=Wk(r),s=await i5(o),a=await Nn.initDID(s,i);return new Nn({cacao:i,keySeed:o,did:a})}get hasSession(){return!!Rn(this,Bi)&&!!Rn(this,Sf)}get isExpired(){let t=Rn(this,Bi).p.exp;return t?Date.parse(t)<Date.now():!1}get expireInSecs(){let t=Rn(this,Bi).p.exp;if(!t)throw new Error("Session does not expire");let r=Date.parse(t)-Date.now();return r<0?0:r/1e3}get authorizations(){return Rn(this,Bi)?.p.resources??[]}get cacao(){return Rn(this,Bi)}isAuthorized(t){return!this.hasSession||this.isExpired?!1:t?t.every(r=>this.authorizations.includes(r)):!0}get id(){return Rn(this,Sf).parent}constructor(t){xp(this,Sf,{writable:!0,value:void 0}),xp(this,Ep,{writable:!0,value:void 0}),xp(this,Bi,{writable:!0,value:void 0}),wp(this,Ep,t.keySeed),wp(this,Bi,t.cacao),wp(this,Sf,t.did)}};var a5=Ve(Kn(),1);function Ap(n,t,r){if(r==null&&(r=[]),n.request)return n.request({method:t,params:r}).then(i=>i,i=>{throw i});if(n.sendAsync||n.send){let i=(n.sendAsync?n.sendAsync:n.send).bind(n),o=Yk(t,r);return new Promise((s,a)=>{i(o,(f,l)=>{if(f&&a(f),l.error){let p=new Error(l.error.message);p.code=l.error.code,p.data=l.error.data,a(p)}s(l.result)})})}else throw new Error("Unsupported provider; provider must implement one of the following methods: send, sendAsync, request")}function Yk(n,t){return{jsonrpc:"2.0",id:1,method:n,params:t}}var Xk="1",Zk="eip155",Mf;(function(n){async function t(r,i){if(typeof window>"u")throw new Error("Web Auth method requires browser environment");let o=window.location.hostname;return async s=>(s.domain=o,f5(s,r,i))}n.getAuthMethod=t})(Mf||(Mf={}));var s5;(function(n){async function t(r,i,o){let s=o;return async a=>(a.domain=s,f5(a,r,i))}n.getAuthMethod=t})(s5||(s5={}));async function f5(n,t,r){let i=new Date,o=new Date(i.getTime()+7*24*60*60*1e3),s=new _o({domain:n.domain,address:r.address,statement:n.statement??"Give this application access to some of your data on Ceramic",uri:n.uri,version:Xk,nonce:n.nonce??(0,a5.randomString)(10),issuedAt:i.toISOString(),expirationTime:n.expirationTime??o.toISOString(),chainId:r.chainId.reference,resources:n.resources});console.log("siweMessage =>",s);let a={method:"personal_sign",params:[s.signMessage(),r.address]},f;return"rpcProvider"in t?f=await t.sendAsync(a):f=await Ap(t,"personal_sign",[s.signMessage(),r.address]),s.signature=f,Ao.fromSiweMessage(s)}async function Qk(n){let t={method:"eth_chainId",params:[]},r;return"rpcProvider"in n?r=await n.sendAsync(t):r=await Ap(n,"eth_chainId",[]),parseInt(r,16)}async function Sp(n,t){let r=await Qk(n),i=`${Zk}:${r}`;return new gn({address:t,chainId:i})}function Tf(n,t){return function(){return n.apply(t,arguments)}}var{toString:u5}=Object.prototype,{getPrototypeOf:Tp}=Object,kp=(n=>t=>{let r=u5.call(t);return n[r]||(n[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),si=n=>(n=n.toLowerCase(),t=>kp(t)===n),sl=n=>t=>typeof t===n,{isArray:ra}=Array,kf=sl("undefined");function eC(n){return n!==null&&!kf(n)&&n.constructor!==null&&!kf(n.constructor)&&Go(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}var l5=si("ArrayBuffer");function tC(n){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(n):t=n&&n.buffer&&l5(n.buffer),t}var rC=sl("string"),Go=sl("function"),h5=sl("number"),Cp=n=>n!==null&&typeof n=="object",nC=n=>n===!0||n===!1,ol=n=>{if(kp(n)!=="object")return!1;let t=Tp(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},iC=si("Date"),oC=si("File"),sC=si("Blob"),aC=si("FileList"),fC=n=>Cp(n)&&Go(n.pipe),cC=n=>{let t="[object FormData]";return n&&(typeof FormData=="function"&&n instanceof FormData||u5.call(n)===t||Go(n.toString)&&n.toString()===t)},uC=si("URLSearchParams"),lC=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Cf(n,t,{allOwnKeys:r=!1}={}){if(n===null||typeof n>"u")return;let i,o;if(typeof n!="object"&&(n=[n]),ra(n))for(i=0,o=n.length;i<o;i++)t.call(null,n[i],i,n);else{let s=r?Object.getOwnPropertyNames(n):Object.keys(n),a=s.length,f;for(i=0;i<a;i++)f=s[i],t.call(null,n[f],f,n)}}function d5(n,t){t=t.toLowerCase();let r=Object.keys(n),i=r.length,o;for(;i-- >0;)if(o=r[i],t===o.toLowerCase())return o;return null}var p5=typeof self>"u"?typeof global>"u"?void 0:global:self,m5=n=>!kf(n)&&n!==p5;function Mp(){let{caseless:n}=m5(this)&&this||{},t={},r=(i,o)=>{let s=n&&d5(t,o)||o;ol(t[s])&&ol(i)?t[s]=Mp(t[s],i):ol(i)?t[s]=Mp({},i):ra(i)?t[s]=i.slice():t[s]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Cf(arguments[i],r);return t}var hC=(n,t,r,{allOwnKeys:i}={})=>(Cf(t,(o,s)=>{r&&Go(o)?n[s]=Tf(o,r):n[s]=o},{allOwnKeys:i}),n),dC=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),pC=(n,t,r,i)=>{n.prototype=Object.create(t.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:t.prototype}),r&&Object.assign(n.prototype,r)},mC=(n,t,r,i)=>{let o,s,a,f={};if(t=t||{},n==null)return t;do{for(o=Object.getOwnPropertyNames(n),s=o.length;s-- >0;)a=o[s],(!i||i(a,n,t))&&!f[a]&&(t[a]=n[a],f[a]=!0);n=r!==!1&&Tp(n)}while(n&&(!r||r(n,t))&&n!==Object.prototype);return t},bC=(n,t,r)=>{n=String(n),(r===void 0||r>n.length)&&(r=n.length),r-=t.length;let i=n.indexOf(t,r);return i!==-1&&i===r},gC=n=>{if(!n)return null;if(ra(n))return n;let t=n.length;if(!h5(t))return null;let r=new Array(t);for(;t-- >0;)r[t]=n[t];return r},yC=(n=>t=>n&&t instanceof n)(typeof Uint8Array<"u"&&Tp(Uint8Array)),vC=(n,t)=>{let i=(n&&n[Symbol.iterator]).call(n),o;for(;(o=i.next())&&!o.done;){let s=o.value;t.call(n,s[0],s[1])}},xC=(n,t)=>{let r,i=[];for(;(r=n.exec(t))!==null;)i.push(r);return i},wC=si("HTMLFormElement"),EC=n=>n.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,function(r,i,o){return i.toUpperCase()+o}),c5=(({hasOwnProperty:n})=>(t,r)=>n.call(t,r))(Object.prototype),_C=si("RegExp"),b5=(n,t)=>{let r=Object.getOwnPropertyDescriptors(n),i={};Cf(r,(o,s)=>{t(o,s,n)!==!1&&(i[s]=o)}),Object.defineProperties(n,i)},AC=n=>{b5(n,(t,r)=>{if(Go(n)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;let i=n[r];if(Go(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},SC=(n,t)=>{let r={},i=o=>{o.forEach(s=>{r[s]=!0})};return ra(n)?i(n):i(String(n).split(t)),r},MC=()=>{},TC=(n,t)=>(n=+n,Number.isFinite(n)?n:t),kC=n=>{let t=new Array(10),r=(i,o)=>{if(Cp(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[o]=i;let s=ra(i)?[]:{};return Cf(i,(a,f)=>{let l=r(a,o+1);!kf(l)&&(s[f]=l)}),t[o]=void 0,s}}return i};return r(n,0)},fe={isArray:ra,isArrayBuffer:l5,isBuffer:eC,isFormData:cC,isArrayBufferView:tC,isString:rC,isNumber:h5,isBoolean:nC,isObject:Cp,isPlainObject:ol,isUndefined:kf,isDate:iC,isFile:oC,isBlob:sC,isRegExp:_C,isFunction:Go,isStream:fC,isURLSearchParams:uC,isTypedArray:yC,isFileList:aC,forEach:Cf,merge:Mp,extend:hC,trim:lC,stripBOM:dC,inherits:pC,toFlatObject:mC,kindOf:kp,kindOfTest:si,endsWith:bC,toArray:gC,forEachEntry:vC,matchAll:xC,isHTMLForm:wC,hasOwnProperty:c5,hasOwnProp:c5,reduceDescriptors:b5,freezeMethods:AC,toObjectSet:SC,toCamelCase:EC,noop:MC,toFiniteNumber:TC,findKey:d5,global:p5,isContextDefined:m5,toJSONObject:kC};function na(n,t,r,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),i&&(this.request=i),o&&(this.response=o)}fe.inherits(na,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:fe.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var g5=na.prototype,y5={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{y5[n]={value:n}});Object.defineProperties(na,y5);Object.defineProperty(g5,"isAxiosError",{value:!0});na.from=(n,t,r,i,o,s)=>{let a=Object.create(g5);return fe.toFlatObject(n,a,function(l){return l!==Error.prototype},f=>f!=="isAxiosError"),na.call(a,n.message,t,r,i,o),a.cause=n,a.name=n.name,s&&Object.assign(a,s),a};var Ze=na;var w5=Ve(x5(),1),E5=w5.default;function Dp(n){return fe.isPlainObject(n)||fe.isArray(n)}function A5(n){return fe.endsWith(n,"[]")?n.slice(0,-2):n}function _5(n,t,r){return n?n.concat(t).map(function(o,s){return o=A5(o),!r&&s?"["+o+"]":o}).join(r?".":""):t}function CC(n){return fe.isArray(n)&&!n.some(Dp)}var DC=fe.toFlatObject(fe,{},null,function(t){return/^is[A-Z]/.test(t)});function OC(n){return n&&fe.isFunction(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator]}function IC(n,t,r){if(!fe.isObject(n))throw new TypeError("target must be an object");t=t||new(E5||FormData),r=fe.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(k,$){return!fe.isUndefined($[k])});let i=r.metaTokens,o=r.visitor||b,s=r.dots,a=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&OC(t);if(!fe.isFunction(o))throw new TypeError("visitor must be a function");function p(S){if(S===null)return"";if(fe.isDate(S))return S.toISOString();if(!l&&fe.isBlob(S))throw new Ze("Blob is not supported. Use a Buffer instead.");return fe.isArrayBuffer(S)||fe.isTypedArray(S)?l&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function b(S,k,$){let O=S;if(S&&!$&&typeof S=="object"){if(fe.endsWith(k,"{}"))k=i?k:k.slice(0,-2),S=JSON.stringify(S);else if(fe.isArray(S)&&CC(S)||fe.isFileList(S)||fe.endsWith(k,"[]")&&(O=fe.toArray(S)))return k=A5(k),O.forEach(function(j,z){!(fe.isUndefined(j)||j===null)&&t.append(a===!0?_5([k],z,s):a===null?k:k+"[]",p(j))}),!1}return Dp(S)?!0:(t.append(_5($,k,s),p(S)),!1)}let v=[],C=Object.assign(DC,{defaultVisitor:b,convertValue:p,isVisitable:Dp});function D(S,k){if(!fe.isUndefined(S)){if(v.indexOf(S)!==-1)throw Error("Circular reference detected in "+k.join("."));v.push(S),fe.forEach(S,function(O,q){(!(fe.isUndefined(O)||O===null)&&o.call(t,O,fe.isString(q)?q.trim():q,k,C))===!0&&D(O,k?k.concat(q):[q])}),v.pop()}}if(!fe.isObject(n))throw new TypeError("data must be an object");return D(n),t}var Ui=IC;function S5(n){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function M5(n,t){this._pairs=[],n&&Ui(n,this,t)}var T5=M5.prototype;T5.append=function(t,r){this._pairs.push([t,r])};T5.toString=function(t){let r=t?function(i){return t.call(this,i,S5)}:S5;return this._pairs.map(function(o){return r(o[0])+"="+r(o[1])},"").join("&")};var al=M5;function RC(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Df(n,t,r){if(!t)return n;let i=r&&r.encode||RC,o=r&&r.serialize,s;if(o?s=o(t,r):s=fe.isURLSearchParams(t)?t.toString():new al(t,r).toString(i),s){let a=n.indexOf("#");a!==-1&&(n=n.slice(0,a)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}var Op=class{constructor(){this.handlers=[]}use(t,r,i){return this.handlers.push({fulfilled:t,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){fe.forEach(this.handlers,function(i){i!==null&&t(i)})}},Ip=Op;var fl={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var k5=typeof URLSearchParams<"u"?URLSearchParams:al;var C5=FormData;var NC=(()=>{let n;return typeof navigator<"u"&&((n=navigator.product)==="ReactNative"||n==="NativeScript"||n==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),PC=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Xt={isBrowser:!0,classes:{URLSearchParams:k5,FormData:C5,Blob},isStandardBrowserEnv:NC,isStandardBrowserWebWorkerEnv:PC,protocols:["http","https","file","blob","url","data"]};function Rp(n,t){return Ui(n,new Xt.classes.URLSearchParams,Object.assign({visitor:function(r,i,o,s){return Xt.isNode&&fe.isBuffer(r)?(this.append(i,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function LC(n){return fe.matchAll(/\w+|\[(\w*)]/g,n).map(t=>t[0]==="[]"?"":t[1]||t[0])}function BC(n){let t={},r=Object.keys(n),i,o=r.length,s;for(i=0;i<o;i++)s=r[i],t[s]=n[s];return t}function UC(n){function t(r,i,o,s){let a=r[s++],f=Number.isFinite(+a),l=s>=r.length;return a=!a&&fe.isArray(o)?o.length:a,l?(fe.hasOwnProp(o,a)?o[a]=[o[a],i]:o[a]=i,!f):((!o[a]||!fe.isObject(o[a]))&&(o[a]=[]),t(r,i,o[a],s)&&fe.isArray(o[a])&&(o[a]=BC(o[a])),!f)}if(fe.isFormData(n)&&fe.isFunction(n.entries)){let r={};return fe.forEachEntry(n,(i,o)=>{t(LC(i),o,r,0)}),r}return null}var cl=UC;var FC={"Content-Type":void 0};function $C(n,t,r){if(fe.isString(n))try{return(t||JSON.parse)(n),fe.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(r||JSON.stringify)(n)}var ul={transitional:fl,adapter:["xhr","http"],transformRequest:[function(t,r){let i=r.getContentType()||"",o=i.indexOf("application/json")>-1,s=fe.isObject(t);if(s&&fe.isHTMLForm(t)&&(t=new FormData(t)),fe.isFormData(t))return o&&o?JSON.stringify(cl(t)):t;if(fe.isArrayBuffer(t)||fe.isBuffer(t)||fe.isStream(t)||fe.isFile(t)||fe.isBlob(t))return t;if(fe.isArrayBufferView(t))return t.buffer;if(fe.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let f;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Rp(t,this.formSerializer).toString();if((f=fe.isFileList(t))||i.indexOf("multipart/form-data")>-1){let l=this.env&&this.env.FormData;return Ui(f?{"files[]":t}:t,l&&new l,this.formSerializer)}}return s||o?(r.setContentType("application/json",!1),$C(t)):t}],transformResponse:[function(t){let r=this.transitional||ul.transitional,i=r&&r.forcedJSONParsing,o=this.responseType==="json";if(t&&fe.isString(t)&&(i&&!this.responseType||o)){let a=!(r&&r.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(f){if(a)throw f.name==="SyntaxError"?Ze.from(f,Ze.ERR_BAD_RESPONSE,this,null,this.response):f}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Xt.classes.FormData,Blob:Xt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};fe.forEach(["delete","get","head"],function(t){ul.headers[t]={}});fe.forEach(["post","put","patch"],function(t){ul.headers[t]=fe.merge(FC)});var ia=ul;var qC=fe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),D5=n=>{let t={},r,i,o;return n&&n.split(`
`).forEach(function(a){o=a.indexOf(":"),r=a.substring(0,o).trim().toLowerCase(),i=a.substring(o+1).trim(),!(!r||t[r]&&qC[r])&&(r==="set-cookie"?t[r]?t[r].push(i):t[r]=[i]:t[r]=t[r]?t[r]+", "+i:i)}),t};var O5=Symbol("internals");function Of(n){return n&&String(n).trim().toLowerCase()}function ll(n){return n===!1||n==null?n:fe.isArray(n)?n.map(ll):String(n)}function zC(n){let t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,i;for(;i=r.exec(n);)t[i[1]]=i[2];return t}function HC(n){return/^[-_a-zA-Z]+$/.test(n.trim())}function I5(n,t,r,i){if(fe.isFunction(i))return i.call(this,t,r);if(fe.isString(t)){if(fe.isString(i))return t.indexOf(i)!==-1;if(fe.isRegExp(i))return i.test(t)}}function KC(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,i)=>r.toUpperCase()+i)}function jC(n,t){let r=fe.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+r,{value:function(o,s,a){return this[i].call(this,t,o,s,a)},configurable:!0})})}var oa=class{constructor(t){t&&this.set(t)}set(t,r,i){let o=this;function s(f,l,p){let b=Of(l);if(!b)throw new Error("header name must be a non-empty string");let v=fe.findKey(o,b);(!v||o[v]===void 0||p===!0||p===void 0&&o[v]!==!1)&&(o[v||l]=ll(f))}let a=(f,l)=>fe.forEach(f,(p,b)=>s(p,b,l));return fe.isPlainObject(t)||t instanceof this.constructor?a(t,r):fe.isString(t)&&(t=t.trim())&&!HC(t)?a(D5(t),r):t!=null&&s(r,t,i),this}get(t,r){if(t=Of(t),t){let i=fe.findKey(this,t);if(i){let o=this[i];if(!r)return o;if(r===!0)return zC(o);if(fe.isFunction(r))return r.call(this,o,i);if(fe.isRegExp(r))return r.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Of(t),t){let i=fe.findKey(this,t);return!!(i&&(!r||I5(this,this[i],i,r)))}return!1}delete(t,r){let i=this,o=!1;function s(a){if(a=Of(a),a){let f=fe.findKey(i,a);f&&(!r||I5(i,i[f],f,r))&&(delete i[f],o=!0)}}return fe.isArray(t)?t.forEach(s):s(t),o}clear(){return Object.keys(this).forEach(this.delete.bind(this))}normalize(t){let r=this,i={};return fe.forEach(this,(o,s)=>{let a=fe.findKey(i,s);if(a){r[a]=ll(o),delete r[s];return}let f=t?KC(s):String(s).trim();f!==s&&delete r[s],r[f]=ll(o),i[f]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){let r=Object.create(null);return fe.forEach(this,(i,o)=>{i!=null&&i!==!1&&(r[o]=t&&fe.isArray(i)?i.join(", "):i)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){let i=new this(t);return r.forEach(o=>i.set(o)),i}static accessor(t){let i=(this[O5]=this[O5]={accessors:{}}).accessors,o=this.prototype;function s(a){let f=Of(a);i[f]||(jC(o,a),i[f]=!0)}return fe.isArray(t)?t.forEach(s):s(t),this}};oa.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]);fe.freezeMethods(oa.prototype);fe.freezeMethods(oa);var tr=oa;function If(n,t){let r=this||ia,i=t||r,o=tr.from(i.headers),s=i.data;return fe.forEach(n,function(f){s=f.call(r,s,o.normalize(),t?t.status:void 0)}),o.normalize(),s}function Rf(n){return!!(n&&n.__CANCEL__)}function R5(n,t,r){Ze.call(this,n??"canceled",Ze.ERR_CANCELED,t,r),this.name="CanceledError"}fe.inherits(R5,Ze,{__CANCEL__:!0});var Fi=R5;var N5=null;function Np(n,t,r){let i=r.config.validateStatus;!r.status||!i||i(r.status)?n(r):t(new Ze("Request failed with status code "+r.status,[Ze.ERR_BAD_REQUEST,Ze.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}var P5=Xt.isStandardBrowserEnv?function(){return{write:function(r,i,o,s,a,f){let l=[];l.push(r+"="+encodeURIComponent(i)),fe.isNumber(o)&&l.push("expires="+new Date(o).toGMTString()),fe.isString(s)&&l.push("path="+s),fe.isString(a)&&l.push("domain="+a),f===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(r){let i=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Pp(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Lp(n,t){return t?n.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):n}function Nf(n,t){return n&&!Pp(t)?Lp(n,t):t}var L5=Xt.isStandardBrowserEnv?function(){let t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),i;function o(s){let a=s;return t&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return i=o(window.location.href),function(a){let f=fe.isString(a)?o(a):a;return f.protocol===i.protocol&&f.host===i.host}}():function(){return function(){return!0}}();function Bp(n){let t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return t&&t[1]||""}function GC(n,t){n=n||10;let r=new Array(n),i=new Array(n),o=0,s=0,a;return t=t!==void 0?t:1e3,function(l){let p=Date.now(),b=i[s];a||(a=p),r[o]=l,i[o]=p;let v=s,C=0;for(;v!==o;)C+=r[v++],v=v%n;if(o=(o+1)%n,o===s&&(s=(s+1)%n),p-a<t)return;let D=b&&p-b;return D?Math.round(C*1e3/D):void 0}}var B5=GC;function U5(n,t){let r=0,i=B5(50,250);return o=>{let s=o.loaded,a=o.lengthComputable?o.total:void 0,f=s-r,l=i(f),p=s<=a;r=s;let b={loaded:s,total:a,progress:a?s/a:void 0,bytes:f,rate:l||void 0,estimated:l&&a&&p?(a-s)/l:void 0,event:o};b[t?"download":"upload"]=!0,n(b)}}var JC=typeof XMLHttpRequest<"u",F5=JC&&function(n){return new Promise(function(r,i){let o=n.data,s=tr.from(n.headers).normalize(),a=n.responseType,f;function l(){n.cancelToken&&n.cancelToken.unsubscribe(f),n.signal&&n.signal.removeEventListener("abort",f)}fe.isFormData(o)&&(Xt.isStandardBrowserEnv||Xt.isStandardBrowserWebWorkerEnv)&&s.setContentType(!1);let p=new XMLHttpRequest;if(n.auth){let D=n.auth.username||"",S=n.auth.password?unescape(encodeURIComponent(n.auth.password)):"";s.set("Authorization","Basic "+btoa(D+":"+S))}let b=Nf(n.baseURL,n.url);p.open(n.method.toUpperCase(),Df(b,n.params,n.paramsSerializer),!0),p.timeout=n.timeout;function v(){if(!p)return;let D=tr.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),k={data:!a||a==="text"||a==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:D,config:n,request:p};Np(function(O){r(O),l()},function(O){i(O),l()},k),p=null}if("onloadend"in p?p.onloadend=v:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(v)},p.onabort=function(){p&&(i(new Ze("Request aborted",Ze.ECONNABORTED,n,p)),p=null)},p.onerror=function(){i(new Ze("Network Error",Ze.ERR_NETWORK,n,p)),p=null},p.ontimeout=function(){let S=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded",k=n.transitional||fl;n.timeoutErrorMessage&&(S=n.timeoutErrorMessage),i(new Ze(S,k.clarifyTimeoutError?Ze.ETIMEDOUT:Ze.ECONNABORTED,n,p)),p=null},Xt.isStandardBrowserEnv){let D=(n.withCredentials||L5(b))&&n.xsrfCookieName&&P5.read(n.xsrfCookieName);D&&s.set(n.xsrfHeaderName,D)}o===void 0&&s.setContentType(null),"setRequestHeader"in p&&fe.forEach(s.toJSON(),function(S,k){p.setRequestHeader(k,S)}),fe.isUndefined(n.withCredentials)||(p.withCredentials=!!n.withCredentials),a&&a!=="json"&&(p.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&p.addEventListener("progress",U5(n.onDownloadProgress,!0)),typeof n.onUploadProgress=="function"&&p.upload&&p.upload.addEventListener("progress",U5(n.onUploadProgress)),(n.cancelToken||n.signal)&&(f=D=>{p&&(i(!D||D.type?new Fi(null,n,p):D),p.abort(),p=null)},n.cancelToken&&n.cancelToken.subscribe(f),n.signal&&(n.signal.aborted?f():n.signal.addEventListener("abort",f)));let C=Bp(b);if(C&&Xt.protocols.indexOf(C)===-1){i(new Ze("Unsupported protocol "+C+":",Ze.ERR_BAD_REQUEST,n));return}p.send(o||null)})};var hl={http:N5,xhr:F5};fe.forEach(hl,(n,t)=>{if(n){try{Object.defineProperty(n,"name",{value:t})}catch{}Object.defineProperty(n,"adapterName",{value:t})}});var $5={getAdapter:n=>{n=fe.isArray(n)?n:[n];let{length:t}=n,r,i;for(let o=0;o<t&&(r=n[o],!(i=fe.isString(r)?hl[r.toLowerCase()]:r));o++);if(!i)throw i===!1?new Ze(`Adapter ${r} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(fe.hasOwnProp(hl,r)?`Adapter '${r}' is not available in the build`:`Unknown adapter '${r}'`);if(!fe.isFunction(i))throw new TypeError("adapter is not a function");return i},adapters:hl};function Up(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Fi(null,n)}function dl(n){return Up(n),n.headers=tr.from(n.headers),n.data=If.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),$5.getAdapter(n.adapter||ia.adapter)(n).then(function(i){return Up(n),i.data=If.call(n,n.transformResponse,i),i.headers=tr.from(i.headers),i},function(i){return Rf(i)||(Up(n),i&&i.response&&(i.response.data=If.call(n,n.transformResponse,i.response),i.response.headers=tr.from(i.response.headers))),Promise.reject(i)})}var q5=n=>n instanceof tr?n.toJSON():n;function ai(n,t){t=t||{};let r={};function i(p,b,v){return fe.isPlainObject(p)&&fe.isPlainObject(b)?fe.merge.call({caseless:v},p,b):fe.isPlainObject(b)?fe.merge({},b):fe.isArray(b)?b.slice():b}function o(p,b,v){if(fe.isUndefined(b)){if(!fe.isUndefined(p))return i(void 0,p,v)}else return i(p,b,v)}function s(p,b){if(!fe.isUndefined(b))return i(void 0,b)}function a(p,b){if(fe.isUndefined(b)){if(!fe.isUndefined(p))return i(void 0,p)}else return i(void 0,b)}function f(p,b,v){if(v in t)return i(p,b);if(v in n)return i(void 0,p)}let l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:f,headers:(p,b)=>o(q5(p),q5(b),!0)};return fe.forEach(Object.keys(n).concat(Object.keys(t)),function(b){let v=l[b]||o,C=v(n[b],t[b],b);fe.isUndefined(C)&&v!==f||(r[b]=C)}),r}var pl="1.2.1";var Fp={};["object","boolean","number","function","string","symbol"].forEach((n,t)=>{Fp[n]=function(i){return typeof i===n||"a"+(t<1?"n ":" ")+n}});var z5={};Fp.transitional=function(t,r,i){function o(s,a){return"[Axios v"+pl+"] Transitional option '"+s+"'"+a+(i?". "+i:"")}return(s,a,f)=>{if(t===!1)throw new Ze(o(a," has been removed"+(r?" in "+r:"")),Ze.ERR_DEPRECATED);return r&&!z5[a]&&(z5[a]=!0,console.warn(o(a," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(s,a,f):!0}};function VC(n,t,r){if(typeof n!="object")throw new Ze("options must be an object",Ze.ERR_BAD_OPTION_VALUE);let i=Object.keys(n),o=i.length;for(;o-- >0;){let s=i[o],a=t[s];if(a){let f=n[s],l=f===void 0||a(f,s,n);if(l!==!0)throw new Ze("option "+s+" must be "+l,Ze.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ze("Unknown option "+s,Ze.ERR_BAD_OPTION)}}var ml={assertOptions:VC,validators:Fp};var $i=ml.validators,sa=class{constructor(t){this.defaults=t,this.interceptors={request:new Ip,response:new Ip}}request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=ai(this.defaults,r);let{transitional:i,paramsSerializer:o,headers:s}=r;i!==void 0&&ml.assertOptions(i,{silentJSONParsing:$i.transitional($i.boolean),forcedJSONParsing:$i.transitional($i.boolean),clarifyTimeoutError:$i.transitional($i.boolean)},!1),o!==void 0&&ml.assertOptions(o,{encode:$i.function,serialize:$i.function},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a;a=s&&fe.merge(s.common,s[r.method]),a&&fe.forEach(["delete","get","head","post","put","patch","common"],S=>{delete s[S]}),r.headers=tr.concat(a,s);let f=[],l=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(r)===!1||(l=l&&k.synchronous,f.unshift(k.fulfilled,k.rejected))});let p=[];this.interceptors.response.forEach(function(k){p.push(k.fulfilled,k.rejected)});let b,v=0,C;if(!l){let S=[dl.bind(this),void 0];for(S.unshift.apply(S,f),S.push.apply(S,p),C=S.length,b=Promise.resolve(r);v<C;)b=b.then(S[v++],S[v++]);return b}C=f.length;let D=r;for(v=0;v<C;){let S=f[v++],k=f[v++];try{D=S(D)}catch($){k.call(this,$);break}}try{b=dl.call(this,D)}catch(S){return Promise.reject(S)}for(v=0,C=p.length;v<C;)b=b.then(p[v++],p[v++]);return b}getUri(t){t=ai(this.defaults,t);let r=Nf(t.baseURL,t.url);return Df(r,t.params,t.paramsSerializer)}};fe.forEach(["delete","get","head","options"],function(t){sa.prototype[t]=function(r,i){return this.request(ai(i||{},{method:t,url:r,data:(i||{}).data}))}});fe.forEach(["post","put","patch"],function(t){function r(i){return function(s,a,f){return this.request(ai(f||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}sa.prototype[t]=r(),sa.prototype[t+"Form"]=r(!0)});var Pf=sa;var Lf=class{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});let i=this;this.promise.then(o=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](o);i._listeners=null}),this.promise.then=o=>{let s,a=new Promise(f=>{i.subscribe(f),s=f}).then(o);return a.cancel=function(){i.unsubscribe(s)},a},t(function(s,a,f){i.reason||(i.reason=new Fi(s,a,f),r(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;let r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}static source(){let t;return{token:new Lf(function(o){t=o}),cancel:t}}},H5=Lf;function $p(n){return function(r){return n.apply(null,r)}}function qp(n){return fe.isObject(n)&&n.isAxiosError===!0}function K5(n){let t=new Pf(n),r=Tf(Pf.prototype.request,t);return fe.extend(r,Pf.prototype,t,{allOwnKeys:!0}),fe.extend(r,t,null,{allOwnKeys:!0}),r.create=function(o){return K5(ai(n,o))},r}var It=K5(ia);It.Axios=Pf;It.CanceledError=Fi;It.CancelToken=H5;It.isCancel=Rf;It.VERSION=pl;It.toFormData=Ui;It.AxiosError=Ze;It.Cancel=It.CanceledError;It.all=function(t){return Promise.all(t)};It.spread=$p;It.isAxiosError=qp;It.mergeConfig=ai;It.AxiosHeaders=tr;It.formToJSON=n=>cl(fe.isHTMLForm(n)?new FormData(n):n);It.default=It;var bl=It;var{Axios:Uj,AxiosError:Fj,CanceledError:$j,isCancel:qj,CancelToken:zj,VERSION:Hj,all:Kj,Cancel:jj,isAxiosError:Gj,spread:Jj,toFormData:Vj,AxiosHeaders:Wj,formToJSON:Yj,mergeConfig:Xj}=bl;var Pn=class extends ft{constructor(t,r,i){super(o=>{this.state$.observers.length===0&&(this.periodicSubscription=mo(0,i).pipe(throttle(()=>this._syncState(this.id,{sync:pt.PREFER_CACHE}))).subscribe()),this.state$.subscribe(o).add(()=>{this.state$.observers.length===0&&this.periodicSubscription?.unsubscribe()})}),this.state$=new $s(t),this._apiUrl=new URL(r)}get value(){return this.state$.value}get state(){return this.state$.value}next(t){this.state$.next(t)}async _syncState(t,r){let i=await Pn._load(t,this._apiUrl,r);this.state$.next(Xe.deserializeState(i))}get id(){return new StreamID(this.state$.value.type,this.state$.value.log[0].cid)}static async createFromGenesis(t,r,i,o,s){let a=new URL("./streams",t),{state:f}=await fetchJson(a,{method:"post",body:{type:r,genesis:Xe.serializeCommit(i),opts:o}});return new Pn(Xe.deserializeState(f),t,s)}static async applyCommit(t,r,i,o,s){let a=new URL("./commits",t),{state:f}=await fetchJson(a,{method:"post",body:{streamId:r.toString(),commit:Xe.serializeCommit(i),opts:o}});return new Pn(Xe.deserializeState(f),t,s)}static async _load(t,r,i){let o=serializeObjectToSearchParams(new URL(`./streams/${t}`,r),i),{state:s}=await fetchJson(o);return s}static async load(t,r,i,o){let s=await Pn._load(t,r,o);return new Pn(Xe.deserializeState(s),r,i)}static async loadStreamCommits(t,r){let i=new URL(`./commits/${t}`,r),{commits:o}=await fetchJson(i);return o.map(s=>({cid:s.cid,value:Xe.deserializeCommit(s.value)}))}complete(){this.state$.complete()}};var j5="https://node1.orbis.club/";var G5="https://orbis.mypinata.cloud/ipfs/",zp=null,Hp=null;var J5="k1dpgaqe3i64kjuyet4w0zyaqwamf9wrp1jim19y27veqkppo34yghivt2pag4wxp0fv2yl4hedynpfuynp2wvd8s7ctabea6lx732xrr8b0cgqauwlh0vwg6";var V5="k3y52l7qbv1fry2bramzfrq10z2vrywf96yk6n61d8ffsyzvs0k0wd68sanjjo16o";var W5="k1dpgaqe3i64kjsvqaacts7pw2j419foun3d53gbyiv90gguufsv529yaq55rh0gmo68o5nft4ja7xmrtq9x1is59hn1ibx16d1e5wzg4tdxtutmegh2hy1a6";var WC="k3y52l7qbv1frxhn39k40plvupdqqna03kdgorggo0274ojggr7z93ex979jyp14w";var YC="k3y52l7qbv1frxonm2thnyc45m0uhleofxo4ms07iq54h2g9xsg3475tc7q4iumm8";var XC="k3y52l7qbv1fryl9grzudl4xzm5v7izhj7eersc9m9nmhlfbdi5rzd9przztmejnk";var ZC="k3y52l7qbv1frxqj3rct6wya4d25131fuw65890fdk3y4xkdkpcxxa84nq56zy9kw";var QC="k3y52l7qbv1frybmd4exlop211b2ivzpjl89sqho2k1qf8otyj88h0rff301451c0";var Y5="k3y52l7qbv1fryfzw38e9ccib6qakyi97weer4rhcskd6cwb26sx7lgkw491a6z9c",Kp=class{ceramic;session;api;chain="ethereum";store;constructor(t){if(t&&t.ceramic)this.ceramic=t.ceramic;else if(t&&t.node)this.ceramic=new js(t.node),console.log("Ceramic: Connected to node: "+t.node);else try{this.ceramic=new js(j5),console.log("Ceramic: Connected to node: "+j5)}catch(r){console.log("Error creating Ceramic object: ",r)}t&&(t.PINATA_GATEWAY&&(G5=t.PINATA_GATEWAY),t.PINATA_API_KEY&&(zp=t.PINATA_API_KEY),t.PINATA_SECRET_API_KEY&&(Hp=t.PINATA_SECRET_API_KEY))}async connect_pkp(t,r=!0){if(!t)if(window.ethereum)console.log("Orbis SDK: You need to pass the provider as an argument in the `connect()` function. We will be using window.ethereum by default."),t=window.ethereum;else return alert("An ethereum provider is required to proceed with the connection to Ceramic."),!1;let i;try{i=await t.enable()}catch(O){return{status:300,error:O,result:"Error enabling Ethereum provider."}}let o,s="1",a=i[0].toLowerCase(),f=await Sp(t,a),{data:l,error:p}=await this.getDids(a);if(l&&l.length>0){let O=sortedDids[0].did.split(":");O[2]=="eip155"&&(s=O[3])}console.log("Default chain to use: ",s),f.chainId.reference=s.toString();try{o=await Mf.getAuthMethod(t,f)}catch(O){return{status:300,error:O,result:"Error creating Ethereum provider object for Ceramic."}}let b;try{this.session=await Nn.authorize(o,{resources:["ceramic://*"],expiresInSecs:7776e3}),b=this.session.did}catch(O){return{status:300,error:O,result:"Error creating a session for the DiD."}}try{let O=this.session.serialize();this.store.setItem("ceramic-session",O)}catch(O){console.log("Error creating sessionString: "+O)}this.ceramic.did=b;let{data:v,error:C,status:D}=await this.getProfile(this.session.id),S=!1;await this.store.getItem("lit-auth-signature")&&(S=!0);let $;return v?($=v.details,$.hasLit=S):$={did:this.session.id,hasLit:S,profile:null},{status:200,did:this.session.id,details:$,result:"Success connecting to the DiD."}}async getSession(t){if(!t)if(window.ethereum)console.log("Orbis SDK: You need to pass the provider as an argument in the `connect()` function. We will be using window.ethereum by default."),t=window.ethereum;else return alert("An ethereum provider is required to proceed with the connection to Ceramic."),!1;let r;try{r=await t.enable()}catch(S){return{status:300,error:S,result:"Error enabling Ethereum provider."}}let i,o="1",s=r[0].toLowerCase(),a=await Sp(t,s);console.log("Default chain to use: ",o),a.chainId.reference=o.toString();try{i=await Mf.getAuthMethod(t,a)}catch(S){return{status:300,error:S,result:"Error creating Ethereum provider object for Ceramic."}}let f;try{this.session=await Nn.authorize(i,{resources:["ceramic://*"],expiresInSecs:7776e3}),f=this.session.did}catch(S){return{status:300,error:S,result:"Error creating a session for the DiD."}}return{did:f,ceramicSession:this.session.serialize()}}async connectWithSeed(t){let r=new ta(t),i=new Li({provider:r,resolver:vp()});return await i.authenticate(),this.ceramic.did=i,this.session={did:i,id:i.id},{status:200,did:i.id,details:null,result:"Success connecting to the did:key."}}async updateProfile(t){return await this.createTileDocument(t,["orbis","profile"],WC)}async setNotificationsReadTime(t,r,i=null){let o;return i?o=await this.createTileDocument({last_notifications_read_time:r,context:i},["orbis","settings","notifications",t],Y5):o=await this.createTileDocument({last_notifications_read_time:r},["orbis","settings","notifications",t],Y5),o}async createPost(t,r=null){return!t||!t.body||t.body==""||t.body==null?{status:300,result:"You can't share an empty post."}:await this.createTileDocument(t,["orbis","post"],J5)}async editPost(t,r,i=null){return!r||!r.body||r.body==""||r.body==null?{status:300,result:"You can't share an empty post."}:await this.updateTileDocument(t,r,["orbis","post"],J5)}async deletePost(t){return await this.updateTileDocument(t,{is_deleted:!0,body:""},["orbis","post"])}async react(t,r){if(!t||t==null)return{status:300,result:"`post_id` is required when reacting to a post."};if(!r||r==null)return{status:300,result:"`type` is required when reacting to a post."};let i={type:r,post_id:t};return await this.createTileDocument(i,["orbis","reaction"],YC)}async createGroup(t){let r=await this.createTileDocument(t,["orbis","group"],V5);if(r.doc){let i=await this.setGroupMember(r.doc,!0);return r}else return console.log("Error creating the initial channel."),{status:200,group_id:r.doc,result:"Group created without first channel."}}async createChannel(t,r){return!t||t==null?{status:300,result:"`group_id` is required when creating a channel."}:await this.createTileDocument(r,["orbis","channel"],W5)}async updateChannel(t,r){return t?await this.updateTileDocument(t,r,["orbis","channel"],W5):(console.log("`channel_id` is required to update a channel."),{status:300,result:"`channel_id` is required to update a channel."})}async setGroupMember(t,r=!0){if(!t)return console.log("`group_id` is required to join/leave a group."),{status:300,result:"`group_id` is required to join/leave a group."};let i={active:r,group_id:t};return await this.createTileDocument(i,["orbis","group_member"],ZC)}async setFollow(t,r=!0){if(!t)return console.log("`did` is required to follow a user."),{status:300,result:"`did` is required to follow a user."};let i={active:r,did:t};return await this.createTileDocument(i,["orbis","follow"],XC)}async updateGroup(t,r){return t?await this.updateTileDocument(t,r,["orbis","group"],V5):(console.log("`stream_id` is required to update a group."),{status:300,result:"`stream_id` is required to update a group."})}async updatePost(t,r){}async createConversation(t){if(!t||!t.recipients||t.recipients.length==0)return{status:300,error:e,result:"You can't create a conversations without recipients."};let r={...t};return r.recipients.push(this.session.id),await this.createTileDocument(r,["orbis","conversation"],QC)}async sendMessage(t){if(!t||!t.body||t.body==null||t.body=="")return{status:300,result:"`body` is required when sending a new message."};if(!t||!t.conversation_id||t.conversation_id==null||t.conversation_id=="")return{status:300,result:"`conversation_id` is required when sending a new message."};let r;try{let{data:i,error:o}=await this.getConversation(t.conversation_id);if(o)return console.log("Error retrieving conversation details: ",o),{status:300,error:o,result:"Error retrieving conversation details."};r=i}catch(i){return{status:300,error:i,result:"Couldn't load recipients from this `content.conversation_id`"}}if(!r.recipients||r.recipients.length<=0)return{status:300,error:"Recipients array is empty or doesn't exist. Please retry or create a new conversation.",result:"Couldn't load recipients from this conversation id"}}async uploadMedia(t){if(console.log("Enter uploadMedia with: ",t),!zp)return console.log("You haven't setup your PINATA_API_KEY yet."),{status:300,error:e,result:"You haven't setup your PINATA_API_KEY yet."};if(!Hp)return console.log("You haven't setup your PINATA_SECRET_API_KEY yet."),{status:300,error:e,result:"You haven't setup your PINATA_SECRET_API_KEY yet."};try{let r=new FormData;r.append("file",t);let i=await bl({method:"post",url:"https://api.pinata.cloud/pinning/pinFileToIPFS",data:r,headers:{pinata_api_key:zp,pinata_secret_api_key:Hp,"Content-Type":"multipart/form-data"}});if(i.status==200)return{status:200,result:{url:"ipfs://"+i.data.IpfsHash,gateway:G5}}}catch(r){return console.log("Error uploading media: ",r),{status:300,error:r,result:"Error uploading media."}}}async createTileDocument(t,r,i,o="orbis"){let s;try{s={status:200,doc:(await Lr.create(this.ceramic,t,{family:o,controllers:[this.session.id],tags:r,schema:i})).id.toString(),result:"Success creating TileDocument."}}catch(a){console.log("Error creating TileDocument: ",a),s={status:300,error:a,result:"Error creating TileDocument."}}return s}async updateTileDocument(t,r,i,o,s="orbis"){let a,f;try{f=await Lr.load(this.ceramic,t),await f.update(r,{family:s,controllers:[this.session.id],tags:i,schema:o}),a={status:200,doc:t,result:"Success updating TileDocument."}}catch(l){a={status:300,error:l,result:"Error updating TileDocument."}}return a}async deterministicDocument(t,r,i,o="orbis"){let s;try{let a=await Lr.deterministic(this.ceramic,{family:o,controllers:[this.session.id],tags:r});await a.update(t,{family:o,controllers:[this.session.id],tags:r}),s={status:200,doc:a.id.toString(),result:"Success creating or updating deterministic TileDocument."}}catch(a){s={status:300,error:a,result:"Error creating or updating deterministic TileDocument."}}return s}async getDids(t){let{data:r,error:i,status:o}=await this.api.from("orbis_v_profiles").select().ilike("address",t);return{data:r,error:i,status:o}}async getPosts(t,r=0){let i;if(t?.algorithm)switch(t.algorithm){case"recommendations":i=this.api.rpc("orbis_recommendations",{user_did:this.session&&this.session?this.session.id:"none"}).range(r*50,(r+1)*50-1);break;case"all-posts":i=this.api.rpc("all_posts").range(r*50,(r+1)*50-1);break;case"all-master-posts":i=this.api.rpc("all_master_posts").range(r*50,(r+1)*50-1);break;case"all-did-master-posts":t&&t.context?i=this.api.rpc("all_did_master_posts_with_context",{post_did:t?.did,post_context:t.context}).range(r*50,(r+1)*50-1):i=this.api.rpc("all_did_master_posts",{post_did:t?.did}).range(r*50,(r+1)*50-1);break;case"all-context-master-posts":i=this.api.rpc("all_context_master_posts",{post_context:t?.context}).range(r*50,(r+1)*50-1);break;case"all-posts-non-filtered":i=this.api.rpc("all_posts_non_filtered").range(r*50,(r+1)*50-1);break;default:i=this.api.from("orbis_v_posts").select().range(r*50,(r+1)*50-1).order("timestamp",{ascending:!1});break}else i=this.api.rpc("default_posts_alpha",{q_did:t?.did?t.did:null,q_tag:t?.tag?t.tag:null,q_only_master:t?.only_master?t.only_master:!1,q_context:t?.context?t.context:null,q_master:t?.master?t.master:null}).range(r*50,(r+1)*50-1).order("timestamp",{ascending:!1});let{data:o,error:s,status:a}=await i;return{data:o,error:s,status:a}}async getPost(t){let{data:r,error:i,status:o}=await this.api.from("orbis_v_posts").select().eq("stream_id",t).single();return{data:r,error:i,status:o}}async getReaction(t,r){let{data:i,error:o,status:s}=await this.api.from("orbis_reactions").select("type").eq("post_id",t).eq("creator",r),a=null;return i&&i.length>0&&(a=i[0]),{data:a,error:o,status:s}}async getGroups(){let{data:t,error:r,status:i}=await this.api.from("orbis_v_groups").select().order("last_activity_timestamp",{ascending:!1});return{data:t,error:r,status:i}}async getGroup(t){let{data:r,error:i,status:o}=await this.api.from("orbis_v_groups").select().eq("stream_id",t).single();return{data:r,error:i,status:o}}async getGroupMembers(t){let{data:r,error:i,status:o}=await this.api.from("orbis_v_members").select().match({group_id:t,active:"true"});return{data:r,error:i,status:o}}async getIsGroupMember(t,r){let i=!1,{data:o,error:s,status:a}=await this.api.from("orbis_group_members").select("stream_id").match({group_id:t,did:r,active:"true"});return o&&o.length>0&&(i=!0),{data:i,error:s,status:a}}async getChannel(t){let{data:r,error:i,status:o}=await this.api.from("orbis_channels").select().eq("stream_id",t).single();return{data:r,error:i,status:o}}async getProfile(t){let{data:r,error:i,status:o}=await this.api.from("orbis_v_profiles").select().eq("did",t).single();return{data:r,error:i,status:o}}async getCredentials(t){let{data:r,error:i,status:o}=await this.api.from("verified_credentials").select().ilike("subject_id",t);return{data:r,error:i,status:o}}async getProfilesByUsername(t){let{data:r,error:i,status:o}=await this.api.from("orbis_v_profiles").select().ilike("username",t+"%").range(0,10).order("timestamp",{ascending:!1});return{data:r,error:i,status:o}}async getProfileGroups(t){let{data:r,error:i,status:o}=await this.api.from("orbis_user_groups").select().match({did:t,active:"true"}).not("group_id","is",null);return{data:r,error:i,status:o}}async getProfileFollowers(t){let{data:r,error:i,status:o}=await this.api.from("orbis_v_followers").select("details:did_following_details").match({did_followed:t,active:"true"});return{data:r,error:i,status:o}}async getProfileFollowing(t){let{data:r,error:i,status:o}=await this.api.from("orbis_v_followers").select("details:did_followed_details").match({did_following:t,active:"true"});return{data:r,error:i,status:o}}async getIsFollowing(t,r){let i=!1,{data:o,error:s,status:a}=await this.api.from("orbis_v_followers").select().match({did_following:t,did_followed:r,active:"true"});return o&&o.length>0&&(i=!0),{data:i,error:s,status:a}}async getNotifications(t){let r;if(!t||!t.type)return{data:null,error:"Query missing type.",status:s};if(!this.session||!this.session.id)return{data:null,error:"User must be connected to retrieve notifications.",status:s};switch(t.type){case"social":r=this.api.rpc("orbis_f_notifications",{user_did:this.session&&this.session?this.session.id:"none",notif_type:"social"});break;case"social_in_context":r=this.api.rpc("orbis_f_notifications_context",{user_did:this.session&&this.session?this.session.id:"none",notif_type:"social",context_id:t.context});break;case"messages":r=this.api.rpc("orbis_f_notifications",{user_did:this.session&&this.session?this.session.id:"none",notif_type:"messages"});break;default:}let{data:i,error:o,status:s}=await r;return{data:i,error:o,status:s}}async getNotificationsCount(t){if(!t||!t.type)return{data:null,error:"Query missing type."};if(!this.session||!this.session.id)return{data:null,error:"User must be connected to retrieve notifications."};let{data:r,error:i,status:o}=await this.api.rpc("orbis_f_count_notifications",{user_did:this.session.id,notif_type:t.type}).single();return{data:r,error:i,status:o}}async getConversations(t){let r;if(t?.context&&t?.did)r=this.api.from("orbis_v_conversations").select().eq("context",t.context).filter("recipients","cs",'["'+t.did+'"]').order("last_message_timestamp",{ascending:!1});else if(t?.context)r=this.api.from("orbis_v_conversations").select().eq("context",t.context).order("last_message_timestamp",{ascending:!1});else if(t?.did)r=this.api.from("orbis_v_conversations").select().filter("recipients","cs",'["'+t.did+'"]').order("last_message_timestamp",{ascending:!1});else return{data:[],error:"The `did` is required when retrieving conversations.",status:300};let{data:i,error:o,status:s}=await r;return{data:i,error:o,status:s}}async getConversation(t){let{data:r,error:i,status:o}=await this.api.from("orbis_v_conversations").select().eq("stream_id",t).single();return{data:r,error:i,status:o}}async getMessages(t,r=0){let{data:i,error:o,status:s}=await this.api.from("orbis_v_messages").select().eq("conversation_id",t).range(r*50,(r+1)*50-1);return{data:i,error:o,status:s}}};return aa(eD);})();
