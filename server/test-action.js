var test=(()=>{var Nx=Object.create;var wf=Object.defineProperty;var Px=Object.getOwnPropertyDescriptor;var Bx=Object.getOwnPropertyNames;var Lx=Object.getPrototypeOf,Ux=Object.prototype.hasOwnProperty;var op=(r=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(r,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):r)(function(r){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+r+'" is not supported')});var rt=(r,e)=>()=>(r&&(e=r(r=0)),e);var de=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Ze=(r,e)=>{for(var t in e)wf(r,t,{get:e[t],enumerable:!0})},sp=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Bx(e))!Ux.call(r,i)&&i!==t&&wf(r,i,{get:()=>e[i],enumerable:!(n=Px(e,i))||n.enumerable});return r};var Je=(r,e,t)=>(t=r!=null?Nx(Lx(r)):{},sp(e||!r||!r.__esModule?wf(t,"default",{value:r,enumerable:!0}):t,r)),ta=r=>sp(wf({},"__esModule",{value:!0}),r);function cp(r,e,t){e=e||[],t=t||0;for(var n=t;r>=Hx;)e[t++]=r&255|ap,r/=128;for(;r&qx;)e[t++]=r&255|ap,r>>>=7;return e[t]=r|0,cp.bytes=t-n+1,e}function Xu(r,n){var t=0,n=n||0,i=0,s=n,a,u=r.length;do{if(s>=u)throw Xu.bytes=0,new RangeError("Could not decode varint");a=r[s++],t+=i<28?(a&fp)<<i:(a&fp)*Math.pow(2,i),i+=7}while(a>=Kx);return Xu.bytes=s-n,t}var $x,ap,Fx,qx,Hx,zx,Kx,fp,jx,Gx,Jx,Vx,Wx,Yx,Xx,Zx,Qx,e4,t4,r4,ra,up=rt(()=>{$x=cp,ap=128,Fx=127,qx=~Fx,Hx=Math.pow(2,31);zx=Xu,Kx=128,fp=127;jx=Math.pow(2,7),Gx=Math.pow(2,14),Jx=Math.pow(2,21),Vx=Math.pow(2,28),Wx=Math.pow(2,35),Yx=Math.pow(2,42),Xx=Math.pow(2,49),Zx=Math.pow(2,56),Qx=Math.pow(2,63),e4=function(r){return r<jx?1:r<Gx?2:r<Jx?3:r<Vx?4:r<Wx?5:r<Yx?6:r<Xx?7:r<Zx?8:r<Qx?9:10},t4={encode:$x,decode:zx,encodingLength:e4},r4=t4,ra=r4});var Vo={};Ze(Vo,{decode:()=>Jo,encodeTo:()=>Zi,encodingLength:()=>Qi});var Jo,Zi,Qi,Ef=rt(()=>{up();Jo=(r,e=0)=>[ra.decode(r,e),ra.decode.bytes],Zi=(r,e,t=0)=>(ra.encode(r,e,t),e),Qi=r=>ra.encodingLength(r)});var na={};Ze(na,{coerce:()=>Nr,empty:()=>hp,equals:()=>Zu,fromHex:()=>i4,fromString:()=>Qu,isBinary:()=>o4,toHex:()=>n4,toString:()=>eh});var hp,n4,i4,Zu,Nr,o4,Qu,eh,bi=rt(()=>{hp=new Uint8Array(0),n4=r=>r.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),""),i4=r=>{let e=r.match(/../g);return e?new Uint8Array(e.map(t=>parseInt(t,16))):hp},Zu=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},Nr=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},o4=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),Qu=r=>new TextEncoder().encode(r),eh=r=>new TextDecoder().decode(r)});var ro={};Ze(ro,{Digest:()=>eo,create:()=>_n,decode:()=>to,equals:()=>th});var _n,to,th,eo,vi=rt(()=>{bi();Ef();_n=(r,e)=>{let t=e.byteLength,n=Qi(r),i=n+Qi(t),s=new Uint8Array(i+t);return Zi(r,s,0),Zi(t,s,n),s.set(e,i),new eo(r,t,e,s)},to=r=>{let e=Nr(r),[t,n]=Jo(e),[i,s]=Jo(e.subarray(n)),a=e.subarray(n+s);if(a.byteLength!==i)throw new Error("Incorrect length");return new eo(t,i,a,e)},th=(r,e)=>r===e?!0:r.code===e.code&&r.size===e.size&&Zu(r.bytes,e.bytes),eo=class{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}}});function s4(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var s=r.charAt(i),a=s.charCodeAt(0);if(t[a]!==255)throw new TypeError(s+" is ambiguous");t[a]=i}var u=r.length,v=r.charAt(0),w=Math.log(u)/Math.log(256),E=Math.log(256)/Math.log(u);function M(T){if(T instanceof Uint8Array||(ArrayBuffer.isView(T)?T=new Uint8Array(T.buffer,T.byteOffset,T.byteLength):Array.isArray(T)&&(T=Uint8Array.from(T))),!(T instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(T.length===0)return"";for(var C=0,z=0,I=0,q=T.length;I!==q&&T[I]===0;)I++,C++;for(var Y=(q-I)*E+1>>>0,H=new Uint8Array(Y);I!==q;){for(var X=T[I],B=0,P=Y-1;(X!==0||B<z)&&P!==-1;P--,B++)X+=256*H[P]>>>0,H[P]=X%u>>>0,X=X/u>>>0;if(X!==0)throw new Error("Non-zero carry");z=B,I++}for(var L=Y-z;L!==Y&&H[L]===0;)L++;for(var te=v.repeat(C);L<Y;++L)te+=r.charAt(H[L]);return te}function k(T){if(typeof T!="string")throw new TypeError("Expected String");if(T.length===0)return new Uint8Array;var C=0;if(T[C]!==" "){for(var z=0,I=0;T[C]===v;)z++,C++;for(var q=(T.length-C)*w+1>>>0,Y=new Uint8Array(q);T[C];){var H=t[T.charCodeAt(C)];if(H===255)return;for(var X=0,B=q-1;(H!==0||X<I)&&B!==-1;B--,X++)H+=u*Y[B]>>>0,Y[B]=H%256>>>0,H=H/256>>>0;if(H!==0)throw new Error("Non-zero carry");I=X,C++}if(T[C]!==" "){for(var P=q-I;P!==q&&Y[P]===0;)P++;for(var L=new Uint8Array(z+(q-P)),te=z;P!==q;)L[te++]=Y[P++];return L}}}function D(T){var C=k(T);if(C)return C;throw new Error(`Non-${e} character`)}return{encode:M,decodeUnsafe:k,decode:D}}var a4,f4,lp,dp=rt(()=>{a4=s4,f4=a4,lp=f4});var rh,nh,ih,pp,oh,Wo,gi,c4,u4,mt,fn=rt(()=>{dp();bi();rh=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},nh=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return pp(this,e)}},ih=class{constructor(e){this.decoders=e}or(e){return pp(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},pp=(r,e)=>new ih({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}}),oh=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new rh(e,t,n),this.decoder=new nh(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Wo=({name:r,prefix:e,encode:t,decode:n})=>new oh(r,e,t,n),gi=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:i}=lp(t,e);return Wo({prefix:r,name:e,encode:n,decode:s=>Nr(i(s))})},c4=(r,e,t,n)=>{let i={};for(let E=0;E<e.length;++E)i[e[E]]=E;let s=r.length;for(;r[s-1]==="=";)--s;let a=new Uint8Array(s*t/8|0),u=0,v=0,w=0;for(let E=0;E<s;++E){let M=i[r[E]];if(M===void 0)throw new SyntaxError(`Non-${n} character`);v=v<<t|M,u+=t,u>=8&&(u-=8,a[w++]=255&v>>u)}if(u>=t||255&v<<8-u)throw new SyntaxError("Unexpected end of data");return a},u4=(r,e,t)=>{let n=e[e.length-1]==="=",i=(1<<t)-1,s="",a=0,u=0;for(let v=0;v<r.length;++v)for(u=u<<8|r[v],a+=8;a>t;)a-=t,s+=e[i&u>>a];if(a&&(s+=e[i&u<<t-a]),n)for(;s.length*t&7;)s+="=";return s},mt=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>Wo({prefix:e,name:r,encode(i){return u4(i,n,t)},decode(i){return c4(i,n,t,r)}})});var sh={};Ze(sh,{base58btc:()=>Pr,base58flickr:()=>h4});var Pr,h4,_f=rt(()=>{fn();Pr=gi({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),h4=gi({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var ah={};Ze(ah,{base32:()=>Yo,base32hex:()=>m4,base32hexpad:()=>v4,base32hexpadupper:()=>g4,base32hexupper:()=>b4,base32pad:()=>d4,base32padupper:()=>p4,base32upper:()=>l4,base32z:()=>y4});var Yo,l4,d4,p4,m4,b4,v4,g4,y4,fh=rt(()=>{fn();Yo=mt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),l4=mt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),d4=mt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),p4=mt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),m4=mt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),b4=mt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),v4=mt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),g4=mt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),y4=mt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var Le,x4,w4,E4,ia,_4,mp,bp,Mf,Sf,M4,S4,A4,rr=rt(()=>{Ef();vi();_f();fh();bi();Le=class{constructor(e,t,n,i){this.code=t,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Sf,byteLength:Sf,code:Mf,version:Mf,multihash:Mf,bytes:Mf,_baseCache:Sf,asCID:Sf})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:t}=this;if(e!==ia)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==_4)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Le.createV0(t)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=_n(e,t);return Le.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&th(this.multihash,e.multihash)}toString(e){let{bytes:t,version:n,_baseCache:i}=this;switch(n){case 0:return w4(t,i,e||Pr.encoder);default:return E4(t,i,e||Yo.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return S4(/^0\.0/,A4),!!(e&&(e[bp]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof Le)return e;if(e!=null&&e.asCID===e){let{version:t,code:n,multihash:i,bytes:s}=e;return new Le(t,n,i,s||mp(t,n,i.bytes))}else if(e!=null&&e[bp]===!0){let{version:t,multihash:n,code:i}=e,s=to(n);return Le.create(t,i,s)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==ia)throw new Error(`Version 0 CID must use dag-pb (code: ${ia}) block encoding`);return new Le(e,t,n,n.bytes)}case 1:{let i=mp(e,t,n.bytes);return new Le(e,t,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return Le.create(0,ia,e)}static createV1(e,t){return Le.create(1,e,t)}static decode(e){let[t,n]=Le.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=Le.inspectBytes(e),n=t.size-t.multihashSize,i=Nr(e.subarray(n,n+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");let s=i.subarray(t.multihashSize-t.digestSize),a=new eo(t.multihashCode,t.digestSize,s,i);return[t.version===0?Le.createV0(a):Le.createV1(t.codec,a),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[M,k]=Jo(e.subarray(t));return t+=k,M},i=n(),s=ia;if(i===18?(i=0,t=0):i===1&&(s=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let a=t,u=n(),v=n(),w=t+v,E=w-a;return{version:i,codec:s,multihashCode:u,digestSize:v,multihashSize:E,size:w}}static parse(e,t){let[n,i]=x4(e,t),s=Le.decode(i);return s._baseCache.set(n,e),s}},x4=(r,e)=>{switch(r[0]){case"Q":{let t=e||Pr;return[Pr.prefix,t.decode(`${Pr.prefix}${r}`)]}case Pr.prefix:{let t=e||Pr;return[Pr.prefix,t.decode(r)]}case Yo.prefix:{let t=e||Yo;return[Yo.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},w4=(r,e,t)=>{let{prefix:n}=t;if(n!==Pr.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let i=e.get(n);if(i==null){let s=t.encode(r).slice(1);return e.set(n,s),s}else return i},E4=(r,e,t)=>{let{prefix:n}=t,i=e.get(n);if(i==null){let s=t.encode(r);return e.set(n,s),s}else return i},ia=112,_4=18,mp=(r,e,t)=>{let n=Qi(r),i=n+Qi(e),s=new Uint8Array(i+t.byteLength);return Zi(r,s,0),Zi(e,s,n),s.set(t,i),s},bp=Symbol.for("@ipld/js-cid/CID"),Mf={writable:!1,configurable:!1,enumerable:!0},Sf={writable:!1,enumerable:!1,configurable:!1},M4="0.0.0-dev",S4=(r,e)=>{if(r.test(M4))console.warn(e);else throw new Error(e)},A4=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var ch={};Ze(ch,{base36:()=>jt,base36upper:()=>T4});var jt,T4,yi=rt(()=>{fn();jt=gi({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),T4=gi({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var xp=de((ck,yp)=>{yp.exports=uh;var gp=128,D4=127,I4=~D4,O4=Math.pow(2,31);function uh(r,e,t){if(Number.MAX_SAFE_INTEGER&&r>Number.MAX_SAFE_INTEGER)throw uh.bytes=0,new RangeError("Could not encode varint");e=e||[],t=t||0;for(var n=t;r>=O4;)e[t++]=r&255|gp,r/=128;for(;r&I4;)e[t++]=r&255|gp,r>>>=7;return e[t]=r|0,uh.bytes=t-n+1,e}});var _p=de((uk,Ep)=>{Ep.exports=hh;var R4=128,wp=127;function hh(r,n){var t=0,n=n||0,i=0,s=n,a,u=r.length;do{if(s>=u||i>49)throw hh.bytes=0,new RangeError("Could not decode varint");a=r[s++],t+=i<28?(a&wp)<<i:(a&wp)*Math.pow(2,i),i+=7}while(a>=R4);return hh.bytes=s-n,t}});var Sp=de((hk,Mp)=>{var N4=Math.pow(2,7),P4=Math.pow(2,14),B4=Math.pow(2,21),L4=Math.pow(2,28),U4=Math.pow(2,35),$4=Math.pow(2,42),F4=Math.pow(2,49),q4=Math.pow(2,56),H4=Math.pow(2,63);Mp.exports=function(r){return r<N4?1:r<P4?2:r<B4?3:r<L4?4:r<U4?5:r<$4?6:r<F4?7:r<q4?8:r<H4?9:10}});var no=de((lk,Ap)=>{Ap.exports={encode:xp(),decode:_p(),encodingLength:Sp()}});function io(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}var oa=rt(()=>{});function sa(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?io(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}var Af=rt(()=>{oa()});var Tp={};Ze(Tp,{concat:()=>yr});function yr(r,e){e||(e=r.reduce((i,s)=>i+s.length,0));let t=sa(e),n=0;for(let i of r)t.set(i,n),n+=i.length;return io(t)}var lh=rt(()=>{Af();oa()});var dh={};Ze(dh,{identity:()=>z4});var z4,kp=rt(()=>{fn();bi();z4=Wo({prefix:"\0",name:"identity",encode:r=>eh(r),decode:r=>Qu(r)})});var ph={};Ze(ph,{base2:()=>K4});var K4,Cp=rt(()=>{fn();K4=mt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var mh={};Ze(mh,{base8:()=>j4});var j4,Dp=rt(()=>{fn();j4=mt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var bh={};Ze(bh,{base10:()=>G4});var G4,Ip=rt(()=>{fn();G4=gi({prefix:"9",name:"base10",alphabet:"0123456789"})});var vh={};Ze(vh,{base16:()=>J4,base16upper:()=>V4});var J4,V4,Op=rt(()=>{fn();J4=mt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),V4=mt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var gh={};Ze(gh,{base64:()=>W4,base64pad:()=>Y4,base64url:()=>oo,base64urlpad:()=>X4});var W4,Y4,oo,X4,Tf=rt(()=>{fn();W4=mt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Y4=mt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),oo=mt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),X4=mt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});var yh={};Ze(yh,{base256emoji:()=>rw});function ew(r){return r.reduce((e,t)=>(e+=Z4[t],e),"")}function tw(r){let e=[];for(let t of r){let n=Q4[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}var Rp,Z4,Q4,rw,Np=rt(()=>{fn();Rp=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Z4=Rp.reduce((r,e,t)=>(r[t]=e,r),[]),Q4=Rp.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);rw=Wo({prefix:"\u{1F680}",name:"base256emoji",encode:ew,decode:tw})});var Df={};Ze(Df,{Hasher:()=>kf,from:()=>Cf});var Cf,kf,xh=rt(()=>{vi();Cf=({name:r,code:e,encode:t})=>new kf(r,e,t),kf=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?_n(this.code,t):t.then(n=>_n(this.code,n))}else throw Error("Unknown type, must be binary type")}}});var wh={};Ze(wh,{sha256:()=>Mn,sha512:()=>nw});var Pp,Mn,nw,Xo=rt(()=>{xh();Pp=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),Mn=Cf({name:"sha2-256",code:18,encode:Pp("SHA-256")}),nw=Cf({name:"sha2-512",code:19,encode:Pp("SHA-512")})});var Eh={};Ze(Eh,{identity:()=>If});var Bp,iw,Lp,ow,If,_h=rt(()=>{bi();vi();Bp=0,iw="identity",Lp=Nr,ow=r=>_n(Bp,Lp(r)),If={code:Bp,name:iw,encode:Lp,digest:ow}});var Mh={};Ze(Mh,{code:()=>aw,decode:()=>cw,encode:()=>fw,name:()=>sw});var sw,aw,fw,cw,Up=rt(()=>{bi();sw="raw",aw=85,fw=r=>Nr(r),cw=r=>Nr(r)});var Sh={};Ze(Sh,{code:()=>dw,decode:()=>mw,encode:()=>pw,name:()=>lw});var uw,hw,lw,dw,pw,mw,$p=rt(()=>{uw=new TextEncoder,hw=new TextDecoder,lw="json",dw=512,pw=r=>uw.encode(JSON.stringify(r)),mw=r=>JSON.parse(hw.decode(r))});var Ah=rt(()=>{rr();Ef();bi();xh();vi()});var Fp={};Ze(Fp,{CID:()=>Le,bases:()=>Zo,bytes:()=>na,codecs:()=>vw,digest:()=>ro,hasher:()=>Df,hashes:()=>bw,varint:()=>Vo});var Zo,bw,vw,Of=rt(()=>{kp();Cp();Dp();Ip();Op();fh();yi();_f();Tf();Np();Xo();_h();Up();$p();Ah();Zo={...dh,...ph,...mh,...bh,...vh,...ah,...ch,...sh,...gh,...yh},bw={...wh,...Eh},vw={raw:Mh,json:Sh}});function Hp(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var qp,Th,gw,Rf,kh=rt(()=>{Of();Af();qp=Hp("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Th=Hp("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=sa(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),gw={utf8:qp,"utf-8":qp,hex:Zo.base16,latin1:Th,ascii:Th,binary:Th,...Zo},Rf=gw});var zp={};Ze(zp,{fromString:()=>He});function He(r,e="utf8"){let t=Rf[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?io(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}var aa=rt(()=>{kh();oa()});var Kp={};Ze(Kp,{toString:()=>Ge});function Ge(r,e="utf8"){let t=Rf[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}var Qo=rt(()=>{kh()});var yo=de((wa,vs)=>{var U5=200,nb="__lodash_hash_undefined__",ib=9007199254740991,xl="[object Arguments]",$5="[object Array]",ob="[object Boolean]",sb="[object Date]",F5="[object Error]",wl="[object Function]",ab="[object GeneratorFunction]",pc="[object Map]",fb="[object Number]",El="[object Object]",Gm="[object Promise]",cb="[object RegExp]",mc="[object Set]",ub="[object String]",hb="[object Symbol]",pl="[object WeakMap]",lb="[object ArrayBuffer]",bc="[object DataView]",db="[object Float32Array]",pb="[object Float64Array]",mb="[object Int8Array]",bb="[object Int16Array]",vb="[object Int32Array]",gb="[object Uint8Array]",yb="[object Uint8ClampedArray]",xb="[object Uint16Array]",wb="[object Uint32Array]",q5=/[\\^$.*+?()[\]{}|]/g,H5=/\w*$/,z5=/^\[object .+?Constructor\]$/,K5=/^(?:0|[1-9]\d*)$/,ct={};ct[xl]=ct[$5]=ct[lb]=ct[bc]=ct[ob]=ct[sb]=ct[db]=ct[pb]=ct[mb]=ct[bb]=ct[vb]=ct[pc]=ct[fb]=ct[El]=ct[cb]=ct[mc]=ct[ub]=ct[hb]=ct[gb]=ct[yb]=ct[xb]=ct[wb]=!0;ct[F5]=ct[wl]=ct[pl]=!1;var j5=typeof global=="object"&&global&&global.Object===Object&&global,G5=typeof self=="object"&&self&&self.Object===Object&&self,Wn=j5||G5||Function("return this")(),Eb=typeof wa=="object"&&wa&&!wa.nodeType&&wa,Jm=Eb&&typeof vs=="object"&&vs&&!vs.nodeType&&vs,J5=Jm&&Jm.exports===Eb;function V5(r,e){return r.set(e[0],e[1]),r}function W5(r,e){return r.add(e),r}function Y5(r,e){for(var t=-1,n=r?r.length:0;++t<n&&e(r[t],t,r)!==!1;);return r}function X5(r,e){for(var t=-1,n=e.length,i=r.length;++t<n;)r[i+t]=e[t];return r}function _b(r,e,t,n){var i=-1,s=r?r.length:0;for(n&&s&&(t=r[++i]);++i<s;)t=e(t,r[i],i,r);return t}function Z5(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}function Q5(r,e){return r?.[e]}function Mb(r){var e=!1;if(r!=null&&typeof r.toString!="function")try{e=!!(r+"")}catch{}return e}function Vm(r){var e=-1,t=Array(r.size);return r.forEach(function(n,i){t[++e]=[i,n]}),t}function _l(r,e){return function(t){return r(e(t))}}function Wm(r){var e=-1,t=Array(r.size);return r.forEach(function(n){t[++e]=n}),t}var e8=Array.prototype,t8=Function.prototype,vc=Object.prototype,dl=Wn["__core-js_shared__"],Ym=function(){var r=/[^.]+$/.exec(dl&&dl.keys&&dl.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),Sb=t8.toString,_i=vc.hasOwnProperty,gc=vc.toString,r8=RegExp("^"+Sb.call(_i).replace(q5,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xm=J5?Wn.Buffer:void 0,Zm=Wn.Symbol,Qm=Wn.Uint8Array,n8=_l(Object.getPrototypeOf,Object),i8=Object.create,o8=vc.propertyIsEnumerable,s8=e8.splice,eb=Object.getOwnPropertySymbols,a8=Xm?Xm.isBuffer:void 0,f8=_l(Object.keys,Object),ml=xs(Wn,"DataView"),Ea=xs(Wn,"Map"),bl=xs(Wn,"Promise"),vl=xs(Wn,"Set"),gl=xs(Wn,"WeakMap"),_a=xs(Object,"create"),c8=go(ml),u8=go(Ea),h8=go(bl),l8=go(vl),d8=go(gl),tb=Zm?Zm.prototype:void 0,rb=tb?tb.valueOf:void 0;function vo(r){var e=-1,t=r?r.length:0;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}function p8(){this.__data__=_a?_a(null):{}}function m8(r){return this.has(r)&&delete this.__data__[r]}function b8(r){var e=this.__data__;if(_a){var t=e[r];return t===nb?void 0:t}return _i.call(e,r)?e[r]:void 0}function v8(r){var e=this.__data__;return _a?e[r]!==void 0:_i.call(e,r)}function g8(r,e){var t=this.__data__;return t[r]=_a&&e===void 0?nb:e,this}vo.prototype.clear=p8;vo.prototype.delete=m8;vo.prototype.get=b8;vo.prototype.has=v8;vo.prototype.set=g8;function Yn(r){var e=-1,t=r?r.length:0;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}function y8(){this.__data__=[]}function x8(r){var e=this.__data__,t=yc(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():s8.call(e,t,1),!0}function w8(r){var e=this.__data__,t=yc(e,r);return t<0?void 0:e[t][1]}function E8(r){return yc(this.__data__,r)>-1}function _8(r,e){var t=this.__data__,n=yc(t,r);return n<0?t.push([r,e]):t[n][1]=e,this}Yn.prototype.clear=y8;Yn.prototype.delete=x8;Yn.prototype.get=w8;Yn.prototype.has=E8;Yn.prototype.set=_8;function gs(r){var e=-1,t=r?r.length:0;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}function M8(){this.__data__={hash:new vo,map:new(Ea||Yn),string:new vo}}function S8(r){return xc(this,r).delete(r)}function A8(r){return xc(this,r).get(r)}function T8(r){return xc(this,r).has(r)}function k8(r,e){return xc(this,r).set(r,e),this}gs.prototype.clear=M8;gs.prototype.delete=S8;gs.prototype.get=A8;gs.prototype.has=T8;gs.prototype.set=k8;function ys(r){this.__data__=new Yn(r)}function C8(){this.__data__=new Yn}function D8(r){return this.__data__.delete(r)}function I8(r){return this.__data__.get(r)}function O8(r){return this.__data__.has(r)}function R8(r,e){var t=this.__data__;if(t instanceof Yn){var n=t.__data__;if(!Ea||n.length<U5-1)return n.push([r,e]),this;t=this.__data__=new gs(n)}return t.set(r,e),this}ys.prototype.clear=C8;ys.prototype.delete=D8;ys.prototype.get=I8;ys.prototype.has=O8;ys.prototype.set=R8;function N8(r,e){var t=Sl(r)||i9(r)?Z5(r.length,String):[],n=t.length,i=!!n;for(var s in r)(e||_i.call(r,s))&&!(i&&(s=="length"||e9(s,n)))&&t.push(s);return t}function Ab(r,e,t){var n=r[e];(!(_i.call(r,e)&&Db(n,t))||t===void 0&&!(e in r))&&(r[e]=t)}function yc(r,e){for(var t=r.length;t--;)if(Db(r[t][0],e))return t;return-1}function P8(r,e){return r&&Tb(e,Al(e),r)}function yl(r,e,t,n,i,s,a){var u;if(n&&(u=s?n(r,i,s,a):n(r)),u!==void 0)return u;if(!wc(r))return r;var v=Sl(r);if(v){if(u=X8(r),!e)return V8(r,u)}else{var w=bo(r),E=w==wl||w==ab;if(s9(r))return q8(r,e);if(w==El||w==xl||E&&!s){if(Mb(r))return s?r:{};if(u=Z8(E?{}:r),!e)return W8(r,P8(u,r))}else{if(!ct[w])return s?r:{};u=Q8(r,w,yl,e)}}a||(a=new ys);var M=a.get(r);if(M)return M;if(a.set(r,u),!v)var k=t?Y8(r):Al(r);return Y5(k||r,function(D,T){k&&(T=D,D=r[T]),Ab(u,T,yl(D,e,t,n,T,r,a))}),u}function B8(r){return wc(r)?i8(r):{}}function L8(r,e,t){var n=e(r);return Sl(r)?n:X5(n,t(r))}function U8(r){return gc.call(r)}function $8(r){if(!wc(r)||r9(r))return!1;var e=Ob(r)||Mb(r)?r8:z5;return e.test(go(r))}function F8(r){if(!Cb(r))return f8(r);var e=[];for(var t in Object(r))_i.call(r,t)&&t!="constructor"&&e.push(t);return e}function q8(r,e){if(e)return r.slice();var t=new r.constructor(r.length);return r.copy(t),t}function Ml(r){var e=new r.constructor(r.byteLength);return new Qm(e).set(new Qm(r)),e}function H8(r,e){var t=e?Ml(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.byteLength)}function z8(r,e,t){var n=e?t(Vm(r),!0):Vm(r);return _b(n,V5,new r.constructor)}function K8(r){var e=new r.constructor(r.source,H5.exec(r));return e.lastIndex=r.lastIndex,e}function j8(r,e,t){var n=e?t(Wm(r),!0):Wm(r);return _b(n,W5,new r.constructor)}function G8(r){return rb?Object(rb.call(r)):{}}function J8(r,e){var t=e?Ml(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.length)}function V8(r,e){var t=-1,n=r.length;for(e||(e=Array(n));++t<n;)e[t]=r[t];return e}function Tb(r,e,t,n){t||(t={});for(var i=-1,s=e.length;++i<s;){var a=e[i],u=n?n(t[a],r[a],a,t,r):void 0;Ab(t,a,u===void 0?r[a]:u)}return t}function W8(r,e){return Tb(r,kb(r),e)}function Y8(r){return L8(r,Al,kb)}function xc(r,e){var t=r.__data__;return t9(e)?t[typeof e=="string"?"string":"hash"]:t.map}function xs(r,e){var t=Q5(r,e);return $8(t)?t:void 0}var kb=eb?_l(eb,Object):c9,bo=U8;(ml&&bo(new ml(new ArrayBuffer(1)))!=bc||Ea&&bo(new Ea)!=pc||bl&&bo(bl.resolve())!=Gm||vl&&bo(new vl)!=mc||gl&&bo(new gl)!=pl)&&(bo=function(r){var e=gc.call(r),t=e==El?r.constructor:void 0,n=t?go(t):void 0;if(n)switch(n){case c8:return bc;case u8:return pc;case h8:return Gm;case l8:return mc;case d8:return pl}return e});function X8(r){var e=r.length,t=r.constructor(e);return e&&typeof r[0]=="string"&&_i.call(r,"index")&&(t.index=r.index,t.input=r.input),t}function Z8(r){return typeof r.constructor=="function"&&!Cb(r)?B8(n8(r)):{}}function Q8(r,e,t,n){var i=r.constructor;switch(e){case lb:return Ml(r);case ob:case sb:return new i(+r);case bc:return H8(r,n);case db:case pb:case mb:case bb:case vb:case gb:case yb:case xb:case wb:return J8(r,n);case pc:return z8(r,n,t);case fb:case ub:return new i(r);case cb:return K8(r);case mc:return j8(r,n,t);case hb:return G8(r)}}function e9(r,e){return e=e??ib,!!e&&(typeof r=="number"||K5.test(r))&&r>-1&&r%1==0&&r<e}function t9(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}function r9(r){return!!Ym&&Ym in r}function Cb(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||vc;return r===t}function go(r){if(r!=null){try{return Sb.call(r)}catch{}try{return r+""}catch{}}return""}function n9(r){return yl(r,!0,!0)}function Db(r,e){return r===e||r!==r&&e!==e}function i9(r){return o9(r)&&_i.call(r,"callee")&&(!o8.call(r,"callee")||gc.call(r)==xl)}var Sl=Array.isArray;function Ib(r){return r!=null&&a9(r.length)&&!Ob(r)}function o9(r){return f9(r)&&Ib(r)}var s9=a8||u9;function Ob(r){var e=wc(r)?gc.call(r):"";return e==wl||e==ab}function a9(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=ib}function wc(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function f9(r){return!!r&&typeof r=="object"}function Al(r){return Ib(r)?N8(r):F8(r)}function c9(){return[]}function u9(){return!1}vs.exports=n9});var Bb=de((Xn,Pb)=>{var Nb=typeof self<"u"?self:Xn,Ec=function(){function r(){this.fetch=!1,this.DOMException=Nb.DOMException}return r.prototype=Nb,new r}();(function(r){var e=function(t){var n={searchParams:"URLSearchParams"in r,iterable:"Symbol"in r&&"iterator"in Symbol,blob:"FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in r,arrayBuffer:"ArrayBuffer"in r};function i(S){return S&&DataView.prototype.isPrototypeOf(S)}if(n.arrayBuffer)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=ArrayBuffer.isView||function(S){return S&&s.indexOf(Object.prototype.toString.call(S))>-1};function u(S){if(typeof S!="string"&&(S=String(S)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(S))throw new TypeError("Invalid character in header field name");return S.toLowerCase()}function v(S){return typeof S!="string"&&(S=String(S)),S}function w(S){var d={next:function(){var y=S.shift();return{done:y===void 0,value:y}}};return n.iterable&&(d[Symbol.iterator]=function(){return d}),d}function E(S){this.map={},S instanceof E?S.forEach(function(d,y){this.append(y,d)},this):Array.isArray(S)?S.forEach(function(d){this.append(d[0],d[1])},this):S&&Object.getOwnPropertyNames(S).forEach(function(d){this.append(d,S[d])},this)}E.prototype.append=function(S,d){S=u(S),d=v(d);var y=this.map[S];this.map[S]=y?y+", "+d:d},E.prototype.delete=function(S){delete this.map[u(S)]},E.prototype.get=function(S){return S=u(S),this.has(S)?this.map[S]:null},E.prototype.has=function(S){return this.map.hasOwnProperty(u(S))},E.prototype.set=function(S,d){this.map[u(S)]=v(d)},E.prototype.forEach=function(S,d){for(var y in this.map)this.map.hasOwnProperty(y)&&S.call(d,this.map[y],y,this)},E.prototype.keys=function(){var S=[];return this.forEach(function(d,y){S.push(y)}),w(S)},E.prototype.values=function(){var S=[];return this.forEach(function(d){S.push(d)}),w(S)},E.prototype.entries=function(){var S=[];return this.forEach(function(d,y){S.push([y,d])}),w(S)},n.iterable&&(E.prototype[Symbol.iterator]=E.prototype.entries);function M(S){if(S.bodyUsed)return Promise.reject(new TypeError("Already read"));S.bodyUsed=!0}function k(S){return new Promise(function(d,y){S.onload=function(){d(S.result)},S.onerror=function(){y(S.error)}})}function D(S){var d=new FileReader,y=k(d);return d.readAsArrayBuffer(S),y}function T(S){var d=new FileReader,y=k(d);return d.readAsText(S),y}function C(S){for(var d=new Uint8Array(S),y=new Array(d.length),h=0;h<d.length;h++)y[h]=String.fromCharCode(d[h]);return y.join("")}function z(S){if(S.slice)return S.slice(0);var d=new Uint8Array(S.byteLength);return d.set(new Uint8Array(S)),d.buffer}function I(){return this.bodyUsed=!1,this._initBody=function(S){this._bodyInit=S,S?typeof S=="string"?this._bodyText=S:n.blob&&Blob.prototype.isPrototypeOf(S)?this._bodyBlob=S:n.formData&&FormData.prototype.isPrototypeOf(S)?this._bodyFormData=S:n.searchParams&&URLSearchParams.prototype.isPrototypeOf(S)?this._bodyText=S.toString():n.arrayBuffer&&n.blob&&i(S)?(this._bodyArrayBuffer=z(S.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):n.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(S)||a(S))?this._bodyArrayBuffer=z(S):this._bodyText=S=Object.prototype.toString.call(S):this._bodyText="",this.headers.get("content-type")||(typeof S=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n.searchParams&&URLSearchParams.prototype.isPrototypeOf(S)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n.blob&&(this.blob=function(){var S=M(this);if(S)return S;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?M(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(D)}),this.text=function(){var S=M(this);if(S)return S;if(this._bodyBlob)return T(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(C(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(X)}),this.json=function(){return this.text().then(JSON.parse)},this}var q=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Y(S){var d=S.toUpperCase();return q.indexOf(d)>-1?d:S}function H(S,d){d=d||{};var y=d.body;if(S instanceof H){if(S.bodyUsed)throw new TypeError("Already read");this.url=S.url,this.credentials=S.credentials,d.headers||(this.headers=new E(S.headers)),this.method=S.method,this.mode=S.mode,this.signal=S.signal,!y&&S._bodyInit!=null&&(y=S._bodyInit,S.bodyUsed=!0)}else this.url=String(S);if(this.credentials=d.credentials||this.credentials||"same-origin",(d.headers||!this.headers)&&(this.headers=new E(d.headers)),this.method=Y(d.method||this.method||"GET"),this.mode=d.mode||this.mode||null,this.signal=d.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&y)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(y)}H.prototype.clone=function(){return new H(this,{body:this._bodyInit})};function X(S){var d=new FormData;return S.trim().split("&").forEach(function(y){if(y){var h=y.split("="),o=h.shift().replace(/\+/g," "),f=h.join("=").replace(/\+/g," ");d.append(decodeURIComponent(o),decodeURIComponent(f))}}),d}function B(S){var d=new E,y=S.replace(/\r?\n[\t ]+/g," ");return y.split(/\r?\n/).forEach(function(h){var o=h.split(":"),f=o.shift().trim();if(f){var l=o.join(":").trim();d.append(f,l)}}),d}I.call(H.prototype);function P(S,d){d||(d={}),this.type="default",this.status=d.status===void 0?200:d.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in d?d.statusText:"OK",this.headers=new E(d.headers),this.url=d.url||"",this._initBody(S)}I.call(P.prototype),P.prototype.clone=function(){return new P(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new E(this.headers),url:this.url})},P.error=function(){var S=new P(null,{status:0,statusText:""});return S.type="error",S};var L=[301,302,303,307,308];P.redirect=function(S,d){if(L.indexOf(d)===-1)throw new RangeError("Invalid status code");return new P(null,{status:d,headers:{location:S}})},t.DOMException=r.DOMException;try{new t.DOMException}catch{t.DOMException=function(d,y){this.message=d,this.name=y;var h=Error(d);this.stack=h.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function te(S,d){return new Promise(function(y,h){var o=new H(S,d);if(o.signal&&o.signal.aborted)return h(new t.DOMException("Aborted","AbortError"));var f=new XMLHttpRequest;function l(){f.abort()}f.onload=function(){var m={status:f.status,statusText:f.statusText,headers:B(f.getAllResponseHeaders()||"")};m.url="responseURL"in f?f.responseURL:m.headers.get("X-Request-URL");var b="response"in f?f.response:f.responseText;y(new P(b,m))},f.onerror=function(){h(new TypeError("Network request failed"))},f.ontimeout=function(){h(new TypeError("Network request failed"))},f.onabort=function(){h(new t.DOMException("Aborted","AbortError"))},f.open(o.method,o.url,!0),o.credentials==="include"?f.withCredentials=!0:o.credentials==="omit"&&(f.withCredentials=!1),"responseType"in f&&n.blob&&(f.responseType="blob"),o.headers.forEach(function(m,b){f.setRequestHeader(b,m)}),o.signal&&(o.signal.addEventListener("abort",l),f.onreadystatechange=function(){f.readyState===4&&o.signal.removeEventListener("abort",l)}),f.send(typeof o._bodyInit>"u"?null:o._bodyInit)})}return te.polyfill=!0,r.fetch||(r.fetch=te,r.Headers=E,r.Request=H,r.Response=P),t.Headers=E,t.Request=H,t.Response=P,t.fetch=te,Object.defineProperty(t,"__esModule",{value:!0}),t}({})})(Ec);Ec.fetch.ponyfill=!0;delete Ec.fetch.polyfill;var ws=Ec;Xn=ws.fetch;Xn.default=ws.fetch;Xn.fetch=ws.fetch;Xn.Headers=ws.Headers;Xn.Request=ws.Request;Xn.Response=ws.Response;Pb.exports=Xn});var Hb=de(Mc=>{"use strict";Object.defineProperty(Mc,"__esModule",{value:!0});Mc.BrowserRandomSource=void 0;var qb=65536,Cl=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;let e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");let t=new Uint8Array(e);for(let n=0;n<t.length;n+=qb)this._crypto.getRandomValues(t.subarray(n,n+Math.min(t.length-n,qb)));return t}};Mc.BrowserRandomSource=Cl});var Fr=de(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});function l9(r){for(var e=0;e<r.length;e++)r[e]=0;return r}Dl.wipe=l9});var Il=de(()=>{});var zb=de(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});Sc.NodeRandomSource=void 0;var d9=Fr(),Ol=class{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof op<"u"){let e=Il();e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");let n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=t[i];return(0,d9.wipe)(t),n}};Sc.NodeRandomSource=Ol});var Kb=de(Ac=>{"use strict";Object.defineProperty(Ac,"__esModule",{value:!0});Ac.SystemRandomSource=void 0;var p9=Hb(),m9=zb(),Rl=class{constructor(){if(this.isAvailable=!1,this.name="",this._source=new p9.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new m9.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}};Ac.SystemRandomSource=Rl});var jb=de(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});function b9(r,e){var t=r>>>16&65535,n=r&65535,i=e>>>16&65535,s=e&65535;return n*s+(t*s+n*i<<16>>>0)|0}kr.mul=Math.imul||b9;function v9(r,e){return r+e|0}kr.add=v9;function g9(r,e){return r-e|0}kr.sub=g9;function y9(r,e){return r<<e|r>>>32-e}kr.rotl=y9;function x9(r,e){return r<<32-e|r>>>e}kr.rotr=x9;function w9(r){return typeof r=="number"&&isFinite(r)&&Math.floor(r)===r}kr.isInteger=Number.isInteger||w9;kr.MAX_SAFE_INTEGER=9007199254740991;kr.isSafeInteger=function(r){return kr.isInteger(r)&&r>=-kr.MAX_SAFE_INTEGER&&r<=kr.MAX_SAFE_INTEGER}});var xo=de(Ye=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0});var Gb=jb();function E9(r,e){return e===void 0&&(e=0),(r[e+0]<<8|r[e+1])<<16>>16}Ye.readInt16BE=E9;function _9(r,e){return e===void 0&&(e=0),(r[e+0]<<8|r[e+1])>>>0}Ye.readUint16BE=_9;function M9(r,e){return e===void 0&&(e=0),(r[e+1]<<8|r[e])<<16>>16}Ye.readInt16LE=M9;function S9(r,e){return e===void 0&&(e=0),(r[e+1]<<8|r[e])>>>0}Ye.readUint16LE=S9;function Jb(r,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=r>>>8,e[t+1]=r>>>0,e}Ye.writeUint16BE=Jb;Ye.writeInt16BE=Jb;function Vb(r,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=r>>>0,e[t+1]=r>>>8,e}Ye.writeUint16LE=Vb;Ye.writeInt16LE=Vb;function Nl(r,e){return e===void 0&&(e=0),r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]}Ye.readInt32BE=Nl;function Pl(r,e){return e===void 0&&(e=0),(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}Ye.readUint32BE=Pl;function Bl(r,e){return e===void 0&&(e=0),r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e]}Ye.readInt32LE=Bl;function Ll(r,e){return e===void 0&&(e=0),(r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e])>>>0}Ye.readUint32LE=Ll;function Tc(r,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=r>>>24,e[t+1]=r>>>16,e[t+2]=r>>>8,e[t+3]=r>>>0,e}Ye.writeUint32BE=Tc;Ye.writeInt32BE=Tc;function kc(r,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=r>>>0,e[t+1]=r>>>8,e[t+2]=r>>>16,e[t+3]=r>>>24,e}Ye.writeUint32LE=kc;Ye.writeInt32LE=kc;function A9(r,e){e===void 0&&(e=0);var t=Nl(r,e),n=Nl(r,e+4);return t*4294967296+n-(n>>31)*4294967296}Ye.readInt64BE=A9;function T9(r,e){e===void 0&&(e=0);var t=Pl(r,e),n=Pl(r,e+4);return t*4294967296+n}Ye.readUint64BE=T9;function k9(r,e){e===void 0&&(e=0);var t=Bl(r,e),n=Bl(r,e+4);return n*4294967296+t-(t>>31)*4294967296}Ye.readInt64LE=k9;function C9(r,e){e===void 0&&(e=0);var t=Ll(r,e),n=Ll(r,e+4);return n*4294967296+t}Ye.readUint64LE=C9;function Wb(r,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Tc(r/4294967296>>>0,e,t),Tc(r>>>0,e,t+4),e}Ye.writeUint64BE=Wb;Ye.writeInt64BE=Wb;function Yb(r,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),kc(r>>>0,e,t),kc(r/4294967296>>>0,e,t+4),e}Ye.writeUint64LE=Yb;Ye.writeInt64LE=Yb;function D9(r,e,t){if(t===void 0&&(t=0),r%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(r/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=r/8+t-1;s>=t;s--)n+=e[s]*i,i*=256;return n}Ye.readUintBE=D9;function I9(r,e,t){if(t===void 0&&(t=0),r%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(r/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=t;s<t+r/8;s++)n+=e[s]*i,i*=256;return n}Ye.readUintLE=I9;function O9(r,e,t,n){if(t===void 0&&(t=new Uint8Array(r/8)),n===void 0&&(n=0),r%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Gb.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=r/8+n-1;s>=n;s--)t[s]=e/i&255,i*=256;return t}Ye.writeUintBE=O9;function R9(r,e,t,n){if(t===void 0&&(t=new Uint8Array(r/8)),n===void 0&&(n=0),r%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Gb.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+r/8;s++)t[s]=e/i&255,i*=256;return t}Ye.writeUintLE=R9;function N9(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat32(e)}Ye.readFloat32BE=N9;function P9(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat32(e,!0)}Ye.readFloat32LE=P9;function B9(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat64(e)}Ye.readFloat64BE=B9;function L9(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat64(e,!0)}Ye.readFloat64LE=L9;function U9(r,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(t,r),e}Ye.writeFloat32BE=U9;function $9(r,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(t,r,!0),e}Ye.writeFloat32LE=$9;function F9(r,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(t,r),e}Ye.writeFloat64BE=F9;function q9(r,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(t,r,!0),e}Ye.writeFloat64LE=q9});var Si=de(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.randomStringForEntropy=Vt.randomString=Vt.randomUint32=Vt.randomBytes=Vt.defaultRandomSource=void 0;var H9=Kb(),z9=xo(),Xb=Fr();Vt.defaultRandomSource=new H9.SystemRandomSource;function Ul(r,e=Vt.defaultRandomSource){return e.randomBytes(r)}Vt.randomBytes=Ul;function K9(r=Vt.defaultRandomSource){let e=Ul(4,r),t=(0,z9.readUint32LE)(e);return(0,Xb.wipe)(e),t}Vt.randomUint32=K9;var Zb="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function Qb(r,e=Zb,t=Vt.defaultRandomSource){if(e.length<2)throw new Error("randomString charset is too short");if(e.length>256)throw new Error("randomString charset is too long");let n="",i=e.length,s=256-256%i;for(;r>0;){let a=Ul(Math.ceil(r*256/s),t);for(let u=0;u<a.length&&r>0;u++){let v=a[u];v<s&&(n+=e.charAt(v%i),r--)}(0,Xb.wipe)(a)}return n}Vt.randomString=Qb;function j9(r,e=Zb,t=Vt.defaultRandomSource){let n=Math.ceil(r/(Math.log(e.length)/Math.LN2));return Qb(n,e,t)}Vt.randomStringForEntropy=j9});var dn=de((BP,r2)=>{r2.exports={ALT:1,CAT:2,REP:3,RNM:4,TRG:5,TBS:6,TLS:7,UDT:11,AND:12,NOT:13,BKR:14,BKA:15,BKN:16,ABG:17,AEN:18,ACTIVE:100,MATCH:101,EMPTY:102,NOMATCH:103,SEM_PRE:200,SEM_POST:201,SEM_OK:300,SEM_SKIP:301,ATTR_N:400,ATTR_R:401,ATTR_MR:402,LOOKAROUND_NONE:500,LOOKAROUND_AHEAD:501,LOOKAROUND_BEHIND:502,BKR_MODE_UM:601,BKR_MODE_PM:602,BKR_MODE_CS:603,BKR_MODE_CI:604}});var Ca=de((LP,n2)=>{n2.exports={CLASS_MONOSPACE:"apg-mono",CLASS_ACTIVE:"apg-active",CLASS_EMPTY:"apg-empty",CLASS_MATCH:"apg-match",CLASS_NOMATCH:"apg-nomatch",CLASS_LOOKAHEAD:"apg-lh-match",CLASS_LOOKBEHIND:"apg-lb-match",CLASS_REMAINDER:"apg-remainder",CLASS_CTRLCHAR:"apg-ctrl-char",CLASS_LINEEND:"apg-line-end",CLASS_ERROR:"apg-error",CLASS_PHRASE:"apg-phrase",CLASS_EMPTYPHRASE:"apg-empty-phrase",CLASS_STATE:"apg-state",CLASS_STATS:"apg-stats",CLASS_TRACE:"apg-trace",CLASS_GRAMMAR:"apg-grammar",CLASS_RULES:"apg-rules",CLASS_RULESLINK:"apg-rules-link",CLASS_ATTRIBUTES:"apg-attrs"}});var s2=de(Nt=>{var i2=Nt,Cc=4294967292,Dc=4294967293,zl=4294967294,o2=4294967295,ye=[0,1,3,7,15,31,63,127,255,511,1023],ki=["00","01","02","03","04","05","06","07","08","09","0A","0B","0C","0D","0E","0F","10","11","12","13","14","15","16","17","18","19","1A","1B","1C","1D","1E","1F","20","21","22","23","24","25","26","27","28","29","2A","2B","2C","2D","2E","2F","30","31","32","33","34","35","36","37","38","39","3A","3B","3C","3D","3E","3F","40","41","42","43","44","45","46","47","48","49","4A","4B","4C","4D","4E","4F","50","51","52","53","54","55","56","57","58","59","5A","5B","5C","5D","5E","5F","60","61","62","63","64","65","66","67","68","69","6A","6B","6C","6D","6E","6F","70","71","72","73","74","75","76","77","78","79","7A","7B","7C","7D","7E","7F","80","81","82","83","84","85","86","87","88","89","8A","8B","8C","8D","8E","8F","90","91","92","93","94","95","96","97","98","99","9A","9B","9C","9D","9E","9F","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","AA","AB","AC","AD","AE","AF","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","BA","BB","BC","BD","BE","BF","C0","C1","C2","C3","C4","C5","C6","C7","C8","C9","CA","CB","CC","CD","CE","CF","D0","D1","D2","D3","D4","D5","D6","D7","D8","D9","DA","DB","DC","DD","DE","DF","E0","E1","E2","E3","E4","E5","E6","E7","E8","E9","EA","EB","EC","ED","EE","EF","F0","F1","F2","F3","F4","F5","F6","F7","F8","F9","FA","FB","FC","FD","FE","FF"],X9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),Cr=[];X9.forEach(r=>{Cr.push(r.charCodeAt(0))});Nt.utf8={encode(r){let e=[];return r.forEach(t=>{if(t>=0&&t<=127)e.push(t);else if(t<=2047)e.push(192+(t>>6&ye[5])),e.push(128+(t&ye[6]));else if(t<55296||t>57343&&t<=65535)e.push(224+(t>>12&ye[4])),e.push(128+(t>>6&ye[6])),e.push(128+(t&ye[6]));else if(t>=65536&&t<=1114111){let n=t>>16&ye[5];e.push(240+(n>>2)),e.push(128+((n&ye[2])<<4)+(t>>12&ye[4])),e.push(128+(t>>6&ye[6])),e.push(128+(t&ye[6]))}else throw new RangeError(`utf8.encode: character out of range: char: ${t}`)}),Buffer.from(e)},decode(r,e){function t(T,C){if((C&192)!==128)return Dc;let z=((T&ye[5])<<6)+(C&ye[6]);return z<128?Cc:z}function n(T,C,z){if((z&192)!==128||(C&192)!==128)return Dc;let I=((T&ye[4])<<12)+((C&ye[6])<<6)+(z&ye[6]);return I<2048?Cc:I>=55296&&I<=57343?zl:I}function i(T,C,z,I){if((I&192)!==128||(z&192)!==128||(C&192)!==128)return Dc;let q=(((T&ye[3])<<2)+(C>>4&ye[2])<<16)+((C&ye[4])<<12)+((z&ye[6])<<6)+(I&ye[6]);return q<65536?Cc:q>1114111?zl:q}let s,a,u,v,w,E,M=r.length,k=e?3:0,D=[];for(;k<M;){a=r[k],s=o2;let T=!0;for(;T;){if(a>=0&&a<=127){s=a,E=1;break}if(u=k+1,u<M&&a>=194&&a<=223){s=t(a,r[u]),E=2;break}if(v=k+2,v<M&&a>=224&&a<=239){s=n(a,r[u],r[v]),E=3;break}if(w=k+3,w<M&&a>=240&&a<=244){s=i(a,r[u],r[v],r[w]),E=4;break}break}if(s>1114111){let C=`byte[${k}]`;throw s===o2?new RangeError(`utf8.decode: ill-formed UTF8 byte sequence found at: ${C}`):s===Dc?new RangeError(`utf8.decode: illegal trailing byte found at: ${C}`):s===zl?new RangeError(`utf8.decode: code point out of range found at: ${C}`):s===Cc?new RangeError(`utf8.decode: non-shortest form found at: ${C}`):new RangeError(`utf8.decode: unrecognized error found at: ${C}`)}D.push(s),k+=E}return D}};Nt.utf16be={encode(r){let e=[],t,n,i;for(let s=0;s<r.length;s+=1)if(t=r[s],t>=0&&t<=55295||t>=57344&&t<=65535)e.push(t>>8&ye[8]),e.push(t&ye[8]);else if(t>=65536&&t<=1114111)i=t-65536,n=55296+(i>>10),i=56320+(i&ye[10]),e.push(n>>8&ye[8]),e.push(n&ye[8]),e.push(i>>8&ye[8]),e.push(i&ye[8]);else throw new RangeError(`utf16be.encode: UTF16BE value out of range: char[${s}]: ${t}`);return Buffer.from(e)},decode(r,e){if(r.length%2>0)throw new RangeError(`utf16be.decode: data length must be even multiple of 2: length: ${r.length}`);let t=[],n=r.length,i=e?2:0,s=0,a,u,v,w,E,M;for(;i<n;){for(;;){if(v=i+1,v<n){if(E=(r[i]<<8)+r[v],E<55296||E>57343){a=E,u=2;break}if(w=i+3,w<n&&(M=(r[i+2]<<8)+r[w],E<=56319&&M>=56320&&M<=57343)){a=65536+(E-55296<<10)+(M-56320),u=4;break}}throw new RangeError(`utf16be.decode: ill-formed UTF16BE byte sequence found: byte[${i}]`)}t[s++]=a,i+=u}return t}};Nt.utf16le={encode(r){let e=[],t,n,i;for(let s=0;s<r.length;s+=1)if(t=r[s],t>=0&&t<=55295||t>=57344&&t<=65535)e.push(t&ye[8]),e.push(t>>8&ye[8]);else if(t>=65536&&t<=1114111)i=t-65536,n=55296+(i>>10),i=56320+(i&ye[10]),e.push(n&ye[8]),e.push(n>>8&ye[8]),e.push(i&ye[8]),e.push(i>>8&ye[8]);else throw new RangeError(`utf16le.encode: UTF16LE value out of range: char[${s}]: ${t}`);return Buffer.from(e)},decode(r,e){if(r.length%2>0)throw new RangeError(`utf16le.decode: data length must be even multiple of 2: length: ${r.length}`);let t=[],n=r.length,i=e?2:0,s=0,a,u,v,w,E,M;for(;i<n;){for(;;){if(v=i+1,v<n){if(E=(r[v]<<8)+r[i],E<55296||E>57343){a=E,u=2;break}if(w=i+3,w<n&&(M=(r[w]<<8)+r[i+2],E<=56319&&M>=56320&&M<=57343)){a=65536+(E-55296<<10)+(M-56320),u=4;break}}throw new RangeError(`utf16le.decode: ill-formed UTF16LE byte sequence found: byte[${i}]`)}t[s++]=a,i+=u}return t}};Nt.utf32be={encode(r){let e=Buffer.alloc(r.length*4),t=0;return r.forEach(n=>{if(n>=55296&&n<=57343||n>1114111)throw new RangeError(`utf32be.encode: UTF32BE character code out of range: char[${t/4}]: ${n}`);e[t++]=n>>24&ye[8],e[t++]=n>>16&ye[8],e[t++]=n>>8&ye[8],e[t++]=n&ye[8]}),e},decode(r,e){if(r.length%4>0)throw new RangeError(`utf32be.decode: UTF32BE byte length must be even multiple of 4: length: ${r.length}`);let t=[],n=e?4:0;for(;n<r.length;n+=4){let i=(r[n]<<24)+(r[n+1]<<16)+(r[n+2]<<8)+r[n+3];if(i>=55296&&i<=57343||i>1114111)throw new RangeError(`utf32be.decode: UTF32BE character code out of range: char[${n/4}]: ${i}`);t.push(i)}return t}};Nt.utf32le={encode(r){let e=Buffer.alloc(r.length*4),t=0;return r.forEach(n=>{if(n>=55296&&n<=57343||n>1114111)throw new RangeError(`utf32le.encode: UTF32LE character code out of range: char[${t/4}]: ${n}`);e[t++]=n&ye[8],e[t++]=n>>8&ye[8],e[t++]=n>>16&ye[8],e[t++]=n>>24&ye[8]}),e},decode(r,e){if(r.length%4>0)throw new RangeError(`utf32be.decode: UTF32LE byte length must be even multiple of 4: length: ${r.length}`);let t=[],n=e?4:0;for(;n<r.length;n+=4){let i=(r[n+3]<<24)+(r[n+2]<<16)+(r[n+1]<<8)+r[n];if(i>=55296&&i<=57343||i>1114111)throw new RangeError(`utf32le.encode: UTF32LE character code out of range: char[${n/4}]: ${i}`);t.push(i)}return t}};Nt.uint7={encode(r){let e=Buffer.alloc(r.length);for(let t=0;t<r.length;t+=1){if(r[t]>127)throw new RangeError(`uint7.encode: UINT7 character code out of range: char[${t}]: ${r[t]}`);e[t]=r[t]}return e},decode(r){let e=[];for(let t=0;t<r.length;t+=1){if(r[t]>127)throw new RangeError(`uint7.decode: UINT7 character code out of range: byte[${t}]: ${r[t]}`);e[t]=r[t]}return e}};Nt.uint8={encode(r){let e=Buffer.alloc(r.length);for(let t=0;t<r.length;t+=1){if(r[t]>255)throw new RangeError(`uint8.encode: UINT8 character code out of range: char[${t}]: ${r[t]}`);e[t]=r[t]}return e},decode(r){let e=[];for(let t=0;t<r.length;t+=1)e[t]=r[t];return e}};Nt.uint16be={encode(r){let e=Buffer.alloc(r.length*2),t=0;return r.forEach(n=>{if(n>65535)throw new RangeError(`uint16be.encode: UINT16BE character code out of range: char[${t/2}]: ${n}`);e[t++]=n>>8&ye[8],e[t++]=n&ye[8]}),e},decode(r){if(r.length%2>0)throw new RangeError(`uint16be.decode: UINT16BE byte length must be even multiple of 2: length: ${r.length}`);let e=[];for(let t=0;t<r.length;t+=2)e.push((r[t]<<8)+r[t+1]);return e}};Nt.uint16le={encode(r){let e=Buffer.alloc(r.length*2),t=0;return r.forEach(n=>{if(n>65535)throw new RangeError(`uint16le.encode: UINT16LE character code out of range: char[${t/2}]: ${n}`);e[t++]=n&ye[8],e[t++]=n>>8&ye[8]}),e},decode(r){if(r.length%2>0)throw new RangeError(`uint16le.decode: UINT16LE byte length must be even multiple of 2: length: ${r.length}`);let e=[];for(let t=0;t<r.length;t+=2)e.push((r[t+1]<<8)+r[t]);return e}};Nt.uint32be={encode(r){let e=Buffer.alloc(r.length*4),t=0;return r.forEach(n=>{e[t++]=n>>24&ye[8],e[t++]=n>>16&ye[8],e[t++]=n>>8&ye[8],e[t++]=n&ye[8]}),e},decode(r){if(r.length%4>0)throw new RangeError(`uint32be.decode: UINT32BE byte length must be even multiple of 4: length: ${r.length}`);let e=[];for(let t=0;t<r.length;t+=4)e.push((r[t]<<24)+(r[t+1]<<16)+(r[t+2]<<8)+r[t+3]);return e}};Nt.uint32le={encode(r){let e=Buffer.alloc(r.length*4),t=0;return r.forEach(n=>{e[t++]=n&ye[8],e[t++]=n>>8&ye[8],e[t++]=n>>16&ye[8],e[t++]=n>>24&ye[8]}),e},decode(r){if(r.length%4>0)throw new RangeError(`uint32le.decode: UINT32LE byte length must be even multiple of 4: length: ${r.length}`);let e=[];for(let t=0;t<r.length;t+=4)e.push((r[t+3]<<24)+(r[t+2]<<16)+(r[t+1]<<8)+r[t]);return e}};Nt.string={encode(r){return i2.utf16le.encode(r).toString("utf16le")},decode(r){return i2.utf16le.decode(Buffer.from(r,"utf16le"),0)}};Nt.escaped={encode(r){let e=[];for(let t=0;t<r.length;t+=1){let n=r[t];if(n===96)e.push(n),e.push(n);else if(n===10)e.push(n);else if(n>=32&&n<=126)e.push(n);else{let i="";if(n>=0&&n<=31)i+=`\`x${ki[n]}`;else if(n>=127&&n<=255)i+=`\`x${ki[n]}`;else if(n>=256&&n<=65535)i+=`\`u${ki[n>>8&ye[8]]}${ki[n&ye[8]]}`;else if(n>=65536&&n<=4294967295){i+="`u{";let a=n>>24&ye[8];a>0&&(i+=ki[a]),i+=`${ki[n>>16&ye[8]]+ki[n>>8&ye[8]]+ki[n&ye[8]]}}`}else throw new Error("escape.encode(char): char > 0xffffffff not allowed");Buffer.from(i).forEach(a=>{e.push(a)})}}return Buffer.from(e)},decode(r){function e(M){return M>=48&&M<=57||M>=65&&M<=70||M>=97&&M<=102}function t(M,k,D){let T={char:null,nexti:M+2,error:!0};if(M+1<k&&e(D[M])&&e(D[M+1])){let C=String.fromCodePoint(D[M],D[M+1]);T.char=parseInt(C,16),Number.isNaN(T.char)||(T.error=!1)}return T}function n(M,k,D){let T={char:null,nexti:M+4,error:!0};if(M+3<k&&e(D[M])&&e(D[M+1])&&e(D[M+2])&&e(D[M+3])){let C=String.fromCodePoint(D[M],D[M+1],D[M+2],D[M+3]);T.char=parseInt(C,16),Number.isNaN(T.char)||(T.error=!1)}return T}function i(M,k,D){let T={char:null,nexti:M+4,error:!0},C="";for(;M<k&&e(D[M]);)C+=String.fromCodePoint(D[M]),M+=1;return T.char=parseInt(C,16),D[M]===125&&!Number.isNaN(T.char)&&(T.error=!1),T.nexti=M+1,T}let s=[],a=r.length,u,v,w,E=0;for(;E<a;){for(;;){if(w=!0,r[E]!==96){s.push(r[E]),E+=1,w=!1;break}if(u=E+1,u>=a)break;if(r[u]===96){s.push(96),E+=2,w=!1;break}if(r[u]===120){if(v=t(u+1,a,r),v.error)break;s.push(v.char),E=v.nexti,w=!1;break}if(r[u]===117){if(r[u+1]===123){if(v=i(u+2,a,r),v.error)break;s.push(v.char),E=v.nexti,w=!1;break}if(v=n(u+1,a,r),v.error)break;s.push(v.char),E=v.nexti,w=!1;break}break}if(w)throw new Error(`escaped.decode: ill-formed escape sequence at buf[${E}]`)}return s}};var Da=13,qr=10;Nt.lineEnds={crlf(r){let e=[],t=0;for(;t<r.length;)switch(r[t]){case Da:t+1<r.length&&r[t+1]===qr?t+=2:t+=1,e.push(Da),e.push(qr);break;case qr:e.push(Da),e.push(qr),t+=1;break;default:e.push(r[t]),t+=1;break}return e.length>0&&e[e.length-1]!==qr&&(e.push(Da),e.push(qr)),e},lf(r){let e=[],t=0;for(;t<r.length;)switch(r[t]){case Da:t+1<r.length&&r[t+1]===qr?t+=2:t+=1,e.push(qr);break;case qr:e.push(qr),t+=1;break;default:e.push(r[t]),t+=1;break}return e.length>0&&e[e.length-1]!==qr&&e.push(qr),e}};Nt.base64={encode(r){if(r.length===0)return Buffer.alloc(0);let e,t,n,i=r.length%3;i=i>0?3-i:0;let s=(r.length+i)/3,a=Buffer.alloc(s*4);i>0&&(s-=1),e=0,t=0;for(let u=0;u<s;u+=1)n=r[e++]<<16,n+=r[e++]<<8,n+=r[e++],a[t++]=Cr[n>>18&ye[6]],a[t++]=Cr[n>>12&ye[6]],a[t++]=Cr[n>>6&ye[6]],a[t++]=Cr[n&ye[6]];if(i===0)return a;if(i===1)return n=r[e++]<<16,n+=r[e]<<8,a[t++]=Cr[n>>18&ye[6]],a[t++]=Cr[n>>12&ye[6]],a[t++]=Cr[n>>6&ye[6]],a[t]=Cr[64],a;if(i===2)return n=r[e]<<16,a[t++]=Cr[n>>18&ye[6]],a[t++]=Cr[n>>12&ye[6]],a[t++]=Cr[64],a[t]=Cr[64],a},decode(r){function e(E){let M=[],k=0;for(let D=0;D<E.length;D+=1){let T=E[D],C=!0;for(;C&&!(T===32||T===9||T===10||T===13);){if(T>=65&&T<=90){M.push(T-65);break}if(T>=97&&T<=122){M.push(T-71);break}if(T>=48&&T<=57){M.push(T+4);break}if(T===43){M.push(62);break}if(T===47){M.push(63);break}if(T===61){M.push(64),k+=1;break}throw new RangeError(`base64.decode: invalid character buf[${D}]: ${T}`)}}if(M.length%4>0)throw new RangeError(`base64.decode: string length not integral multiple of 4: ${M.length}`);switch(k){case 0:break;case 1:if(M[M.length-1]!==64)throw new RangeError("base64.decode: one tail character found: not last character");break;case 2:if(M[M.length-1]!==64||M[M.length-2]!==64)throw new RangeError("base64.decode: two tail characters found: not last characters");break;default:throw new RangeError(`base64.decode: more than two tail characters found: ${k}`)}return{tail:k,buf:Buffer.from(M)}}if(r.length===0)return Buffer.alloc(0);let t=e(r),{tail:n}=t,i=t.buf,s,a,u,v=i.length/4,w=Buffer.alloc(v*3-n);n>0&&(v-=1),a=0,s=0;for(let E=0;E<v;E+=1)u=i[s++]<<18,u+=i[s++]<<12,u+=i[s++]<<6,u+=i[s++],w[a++]=u>>16&ye[8],w[a++]=u>>8&ye[8],w[a++]=u&ye[8];return n===1&&(u=i[s++]<<18,u+=i[s++]<<12,u+=i[s]<<6,w[a++]=u>>16&ye[8],w[a]=u>>8&ye[8]),n===2&&(u=i[s++]<<18,u+=i[s++]<<12,w[a]=u>>16&ye[8]),w},toString(r){if(r.length%4>0)throw new RangeError(`base64.toString: input buffer length not multiple of 4: ${r.length}`);let e="",t=0;function n(s,a,u,v){switch(t){case 76:e+=`\r
${s}${a}${u}${v}`,t=4;break;case 75:e+=`${s}\r
${a}${u}${v}`,t=3;break;case 74:e+=`${s+a}\r
${u}${v}`,t=2;break;case 73:e+=`${s+a+u}\r
${v}`,t=1;break;default:e+=s+a+u+v,t+=4;break}}function i(s){return s>=65&&s<=90||s>=97&&s<=122||s>=48&&s<=57||s===43||s===47||s===61}for(let s=0;s<r.length;s+=4){for(let a=s;a<s+4;a+=1)if(!i(r[a]))throw new RangeError(`base64.toString: buf[${a}]: ${r[a]} : not valid base64 character code`);n(String.fromCharCode(r[s]),String.fromCharCode(r[s+1]),String.fromCharCode(r[s+2]),String.fromCharCode(r[s+3]))}return e}}});var Jl=de(Oa=>{var a2=Oa,tt=s2(),Ia="UTF8",jl="UTF16",kn="UTF16BE",Qn="UTF16LE",Gl="UTF32",Cn="UTF32BE",ei="UTF32LE",_s="UINT7",f2="ASCII",c2="BINARY",Ms="UINT8",u2="UINT16",Ic="UINT16LE",Ss="UINT16BE",h2="UINT32",Oc="UINT32LE",As="UINT32BE",Rc="ESCAPED",Ci="STRING",Z9=function(e){e.type=Ia;let t=e.data;e.bom=0,t.length>=3&&t[0]===239&&t[1]===187&&t[2]===191&&(e.bom=3)},Q9=function(e){let t=e.data;switch(e.bom=0,e.type){case jl:e.type=kn,t.length>=2&&(t[0]===254&&t[1]===255?e.bom=2:t[0]===255&&t[1]===254&&(e.type=Qn,e.bom=2));break;case kn:if(e.type=kn,t.length>=2){if(t[0]===254&&t[1]===255)e.bom=2;else if(t[0]===255&&t[1]===254)throw new TypeError(`src type: "${kn}" specified but BOM is for "${Qn}"`)}break;case Qn:if(e.type=Qn,t.length>=0){if(t[0]===254&&t[1]===255)throw new TypeError(`src type: "${Qn}" specified but BOM is for "${kn}"`);t[0]===255&&t[1]===254&&(e.bom=2)}break;default:throw new TypeError(`UTF16 BOM: src type "${e.type}" unrecognized`)}},e7=function(e){let t=e.data;switch(e.bom=0,e.type){case Gl:e.type=Cn,t.length>=4&&(t[0]===0&&t[1]===0&&t[2]===254&&t[3]===255&&(e.bom=4),t[0]===255&&t[1]===254&&t[2]===0&&t[3]===0&&(e.type=ei,e.bom=4));break;case Cn:if(e.type=Cn,t.length>=4&&(t[0]===0&&t[1]===0&&t[2]===254&&t[3]===255&&(e.bom=4),t[0]===255&&t[1]===254&&t[2]===0&&t[3]===0))throw new TypeError(`src type: ${Cn} specified but BOM is for ${ei}"`);break;case ei:if(e.type=ei,t.length>=4){if(t[0]===0&&t[1]===0&&t[2]===254&&t[3]===255)throw new TypeError(`src type: "${ei}" specified but BOM is for "${Cn}"`);t[0]===255&&t[1]===254&&t[2]===0&&t[3]===0&&(e.bom=4)}break;default:throw new TypeError(`UTF32 BOM: src type "${e.type}" unrecognized`)}},t7=function(e,t){function n(s){let a={type:"",base64:!1},v=/^(base64:)?([a-zA-Z0-9]+)$/i.exec(s);return v&&(v[2]&&(a.type=v[2].toUpperCase()),v[1]&&(a.base64=!0)),a}if(typeof e!="string"||e==="")throw new TypeError(`type: "${e}" not recognized`);let i=n(e.toUpperCase());if(i.base64){if(i.type===Ci)throw new TypeError(`type: "${e} "BASE64:" prefix not allowed with type ${Ci}`);if(Buffer.isBuffer(t))i.data=tt.base64.decode(t);else if(typeof t=="string"){let s=Buffer.from(t,"ascii");i.data=tt.base64.decode(s)}else throw new TypeError(`type: "${e} unrecognized data type: typeof(data): ${typeof t}`)}else i.data=t;switch(i.type){case Ia:Z9(i);break;case jl:case kn:case Qn:Q9(i);break;case Gl:case Cn:case ei:e7(i);break;case u2:i.type=Ss;break;case h2:i.type=As;break;case f2:i.type=_s;break;case c2:i.type=Ms;break;case _s:case Ms:case Ic:case Ss:case Oc:case As:case Ci:case Rc:break;default:throw new TypeError(`type: "${e}" not recognized`)}if(i.type===Ci){if(typeof i.data!="string")throw new TypeError(`type: "${e}" but data is not a string`)}else if(!Buffer.isBuffer(i.data))throw new TypeError(`type: "${e}" but data is not a Buffer`);return i},r7=function(e,t){function n(s){let a,u,v={crlf:!1,lf:!1,base64:!1,type:""},w=!0;for(;w;){if(u=s,a=s.slice(0,5),a==="CRLF:"){v.crlf=!0,u=s.slice(5);break}if(a=s.slice(0,3),a==="LF:"){v.lf=!0,u=s.slice(3);break}break}return a=u.split(":"),a.length===1?v.type=a[0]:a.length===2&&a[1]==="BASE64"&&(v.base64=!0,v.type=a[0]),v}if(!Array.isArray(t))throw new TypeError(`dst chars: not array: "${typeof t}`);if(typeof e!="string")throw new TypeError(`dst type: not string: "${typeof e}`);let i=n(e.toUpperCase());switch(i.type){case Ia:case kn:case Qn:case Cn:case ei:case _s:case Ms:case Ic:case Ss:case Oc:case As:case Rc:break;case Ci:if(i.base64)throw new TypeError(`":BASE64" suffix not allowed with type ${Ci}`);break;case f2:i.type=_s;break;case c2:i.type=Ms;break;case jl:i.type=kn;break;case Gl:i.type=Cn;break;case u2:i.type=Ss;break;case h2:i.type=As;break;default:throw new TypeError(`dst type unrecognized: "${e}" : must have form [crlf:|lf:]type[:base64]`)}return i},Kl=function(e,t){switch(e){case Ia:return tt.utf8.encode(t);case kn:return tt.utf16be.encode(t);case Qn:return tt.utf16le.encode(t);case Cn:return tt.utf32be.encode(t);case ei:return tt.utf32le.encode(t);case _s:return tt.uint7.encode(t);case Ms:return tt.uint8.encode(t);case Ss:return tt.uint16be.encode(t);case Ic:return tt.uint16le.encode(t);case As:return tt.uint32be.encode(t);case Oc:return tt.uint32le.encode(t);case Ci:return tt.string.encode(t);case Rc:return tt.escaped.encode(t);default:throw new TypeError(`encode type "${e}" not recognized`)}},n7=function(e){switch(e.type){case Ia:return tt.utf8.decode(e.data,e.bom);case Qn:return tt.utf16le.decode(e.data,e.bom);case kn:return tt.utf16be.decode(e.data,e.bom);case Cn:return tt.utf32be.decode(e.data,e.bom);case ei:return tt.utf32le.decode(e.data,e.bom);case _s:return tt.uint7.decode(e.data);case Ms:return tt.uint8.decode(e.data);case Ss:return tt.uint16be.decode(e.data);case Ic:return tt.uint16le.decode(e.data);case As:return tt.uint32be.decode(e.data);case Oc:return tt.uint32le.decode(e.data);case Ci:return tt.string.decode(e.data);case Rc:return tt.escaped.decode(e.data);default:throw new TypeError(`decode type "${e.type}" not recognized`)}};Oa.decode=function(e,t){let n=t7(e,t);return n7(n)};Oa.encode=function(e,t){let n,i,s=r7(e,t);return s.crlf?(n=tt.lineEnds.crlf(t),i=Kl(s.type,n)):s.lf?(n=tt.lineEnds.lf(t),i=Kl(s.type,n)):i=Kl(s.type,t),s.base64&&(i=tt.base64.encode(i)),i};Oa.convert=function(e,t,n){return a2.encode(n,a2.decode(e,t))}});var Vl=de((FP,l2)=>{l2.exports=function(){return`/* This file automatically generated by jsonToless() and LESS. */
.apg-mono {
  font-family: monospace;
}
.apg-active {
  font-weight: bold;
  color: #000000;
}
.apg-match {
  font-weight: bold;
  color: #264BFF;
}
.apg-empty {
  font-weight: bold;
  color: #0fbd0f;
}
.apg-nomatch {
  font-weight: bold;
  color: #FF4000;
}
.apg-lh-match {
  font-weight: bold;
  color: #1A97BA;
}
.apg-lb-match {
  font-weight: bold;
  color: #5F1687;
}
.apg-remainder {
  font-weight: bold;
  color: #999999;
}
.apg-ctrl-char {
  font-weight: bolder;
  font-style: italic;
  font-size: 0.6em;
}
.apg-line-end {
  font-weight: bold;
  color: #000000;
}
.apg-error {
  font-weight: bold;
  color: #FF4000;
}
.apg-phrase {
  color: #000000;
  background-color: #8caae6;
}
.apg-empty-phrase {
  color: #0fbd0f;
}
table.apg-state {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: left;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-state th,
table.apg-state td {
  text-align: left;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-state th:nth-last-child(2),
table.apg-state td:nth-last-child(2) {
  text-align: right;
}
table.apg-state caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-stats {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-stats th,
table.apg-stats td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-stats caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-trace {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-trace caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-trace th,
table.apg-trace td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-trace th:last-child,
table.apg-trace th:nth-last-child(2),
table.apg-trace td:last-child,
table.apg-trace td:nth-last-child(2) {
  text-align: left;
}
table.apg-grammar {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-grammar caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-grammar th,
table.apg-grammar td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-grammar th:last-child,
table.apg-grammar td:last-child {
  text-align: left;
}
table.apg-rules {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-rules caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-rules th,
table.apg-rules td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-rules a {
  color: #003399 !important;
}
table.apg-rules a:hover {
  color: #8caae6 !important;
}
table.apg-attrs {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: center;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-attrs caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-attrs th,
table.apg-attrs td {
  text-align: center;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-attrs th:nth-child(1),
table.apg-attrs th:nth-child(2),
table.apg-attrs th:nth-child(3) {
  text-align: right;
}
table.apg-attrs td:nth-child(1),
table.apg-attrs td:nth-child(2),
table.apg-attrs td:nth-child(3) {
  text-align: right;
}
table.apg-attrs a {
  color: #003399 !important;
}
table.apg-attrs a:hover {
  color: #8caae6 !important;
}
`}});var Eo=de(Tt=>{var fr=Ca(),Wl=Jl(),i7=Vl(),bt=dn(),Di="utilities.js: ",ti=Tt,wo=function(r,e,t){let n,i=e,s=!0;for(;s;){if(r<=0){i=0,n=0;break}if(typeof i!="number"){i=0,n=r;break}if(i>=r){i=r,n=r;break}if(typeof t!="number"){n=r;break}if(n=i+t,n>r){n=r;break}break}return{beg:i,end:n}};Tt.htmlToPage=function(r,e){let t;if(typeof r!="string")throw new Error(`${Di}htmlToPage: input HTML is not a string`);typeof e!="string"?t="htmlToPage":t=e;let n="";return n+=`<!DOCTYPE html>
`,n+=`<html lang="en">
`,n+=`<head>
`,n+=`<meta charset="utf-8">
`,n+=`<title>${t}</title>
`,n+=`<style>
`,n+=i7(),n+=`</style>
`,n+=`</head>
<body>
`,n+=`<p>${new Date}</p>
`,n+=r,n+=`</body>
</html>
`,n};Tt.parserResultToHtml=function(r,e){let t=null;typeof e=="string"&&e!==""&&(t=e);let n,i;r.success===!0?n=`<span class="${fr.CLASS_MATCH}">true</span>`:n=`<span class="${fr.CLASS_NOMATCH}">false</span>`,r.state===bt.EMPTY?i=`<span class="${fr.CLASS_EMPTY}">EMPTY</span>`:r.state===bt.MATCH?i=`<span class="${fr.CLASS_MATCH}">MATCH</span>`:r.state===bt.NOMATCH?i=`<span class="${fr.CLASS_NOMATCH}">NOMATCH</span>`:i=`<span class="${fr.CLASS_NOMATCH}">unrecognized</span>`;let s="";return s+=`<table class="${fr.CLASS_STATE}">
`,t&&(s+=`<caption>${t}</caption>
`),s+=`<tr><th>state item</th><th>value</th><th>description</th></tr>
`,s+=`<tr><td>parser success</td><td>${n}</td>
`,s+=`<td><span class="${fr.CLASS_MATCH}">true</span> if the parse succeeded,
`,s+=` <span class="${fr.CLASS_NOMATCH}">false</span> otherwise`,s+=`<br><i>NOTE: for success, entire string must be matched</i></td></tr>
`,s+=`<tr><td>parser state</td><td>${i}</td>
`,s+=`<td><span class="${fr.CLASS_EMPTY}">EMPTY</span>, `,s+=`<span class="${fr.CLASS_MATCH}">MATCH</span> or 
`,s+=`<span class="${fr.CLASS_NOMATCH}">NOMATCH</span></td></tr>
`,s+=`<tr><td>string length</td><td>${r.length}</td><td>length of the input (sub)string</td></tr>
`,s+=`<tr><td>matched length</td><td>${r.matched}</td><td>number of input string characters matched</td></tr>
`,s+=`<tr><td>max matched</td><td>${r.maxMatched}</td><td>maximum number of input string characters matched</td></tr>
`,s+=`<tr><td>max tree depth</td><td>${r.maxTreeDepth}</td><td>maximum depth of the parse tree reached</td></tr>
`,s+=`<tr><td>node hits</td><td>${r.nodeHits}</td><td>number of parse tree node hits (opcode function calls)</td></tr>
`,s+=`<tr><td>input length</td><td>${r.inputLength}</td><td>length of full input string</td></tr>
`,s+=`<tr><td>sub-string begin</td><td>${r.subBegin}</td><td>sub-string first character index</td></tr>
`,s+=`<tr><td>sub-string end</td><td>${r.subEnd}</td><td>sub-string end-of-string index</td></tr>
`,s+=`<tr><td>sub-string length</td><td>${r.subLength}</td><td>sub-string length</td></tr>
`,s+=`</table>
`,s};Tt.charsToString=function(r,e,t){let n,i;if(typeof e=="number"){if(e>=r.length)return"";n=e<0?0:e}else n=0;if(typeof t=="number"){if(t<=0)return"";i=t>r.length-n?r.length:n+t}else i=r.length;return n<i?Wl.encode("UTF16LE",r.slice(n,i)).toString("utf16le"):""};Tt.stringToChars=function(r){return Wl.decode("STRING",r)};Tt.opcodeToString=function(r){let e="unknown";switch(r){case bt.ALT:e="ALT";break;case bt.CAT:e="CAT";break;case bt.RNM:e="RNM";break;case bt.UDT:e="UDT";break;case bt.AND:e="AND";break;case bt.NOT:e="NOT";break;case bt.REP:e="REP";break;case bt.TRG:e="TRG";break;case bt.TBS:e="TBS";break;case bt.TLS:e="TLS";break;case bt.BKR:e="BKR";break;case bt.BKA:e="BKA";break;case bt.BKN:e="BKN";break;case bt.ABG:e="ABG";break;case bt.AEN:e="AEN";break;default:throw new Error("unrecognized opcode")}return e};Tt.stateToString=function(r){let e="unknown";switch(r){case bt.ACTIVE:e="ACTIVE";break;case bt.MATCH:e="MATCH";break;case bt.EMPTY:e="EMPTY";break;case bt.NOMATCH:e="NOMATCH";break;default:throw new Error("unrecognized state")}return e};Tt.asciiChars=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","TAB","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","&nbsp;","!","&#34;","#","$","%","&#38;","&#39;","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","&#60;","=","&#62;","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","&#92;","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL"];Tt.charToHex=function(r){let e=r.toString(16).toUpperCase();switch(e.length){case 1:case 3:case 7:e=`0${e}`;break;case 2:case 6:e=`00${e}`;break;case 4:break;case 5:e=`000${e}`;break;default:throw new Error("unrecognized option")}return e};Tt.charsToDec=function(r,e,t){let n="";if(!Array.isArray(r))throw new Error(`${Di}charsToDec: input must be an array of integers`);let i=wo(r.length,e,t);if(i.end>i.beg){n+=r[i.beg];for(let s=i.beg+1;s<i.end;s+=1)n+=`,${r[s]}`}return n};Tt.charsToHex=function(r,e,t){let n="";if(!Array.isArray(r))throw new Error(`${Di}charsToHex: input must be an array of integers`);let i=wo(r.length,e,t);if(i.end>i.beg){n+=`\\x${ti.charToHex(r[i.beg])}`;for(let s=i.beg+1;s<i.end;s+=1)n+=`,\\x${ti.charToHex(r[s])}`}return n};Tt.charsToHtmlEntities=function(r,e,t){let n="";if(!Array.isArray(r))throw new Error(`${Di}charsToHex: input must be an array of integers`);let i=wo(r.length,e,t);if(i.end>i.beg)for(let s=i.beg;s<i.end;s+=1)n+=`&#x${r[s].toString(16)};`;return n};function o7(r){return!(r>=55296&&r<=57343||r>1114111)}Tt.charsToUnicode=function(r,e,t){let n="";if(!Array.isArray(r))throw new Error(`${Di}charsToUnicode: input must be an array of integers`);let i=wo(r.length,e,t);if(i.end>i.beg)for(let s=i.beg;s<i.end;s+=1)o7(r[s])?n+=`&#${r[s]};`:n+=` U+${ti.charToHex(r[s])}`;return n};Tt.charsToJsUnicode=function(r,e,t){let n="";if(!Array.isArray(r))throw new Error(`${Di}charsToJsUnicode: input must be an array of integers`);let i=wo(r.length,e,t);if(i.end>i.beg){n+=`\\u${ti.charToHex(r[i.beg])}`;for(let s=i.beg+1;s<i.end;s+=1)n+=`,\\u${ti.charToHex(r[s])}`}return n};Tt.charsToAscii=function(r,e,t){let n="";if(!Array.isArray(r))throw new Error(`${Di}charsToAscii: input must be an array of integers`);let i=wo(r.length,e,t);for(let s=i.beg;s<i.end;s+=1){let a=r[s];a>=32&&a<=126?n+=String.fromCharCode(a):n+=`\\x${ti.charToHex(a)}`}return n};Tt.charsToAsciiHtml=function(r,e,t){if(!Array.isArray(r))throw new Error(`${Di}charsToAsciiHtml: input must be an array of integers`);let n="",i,s=wo(r.length,e,t);for(let a=s.beg;a<s.end;a+=1)i=r[a],i<32||i===127?n+=`<span class="${fr.CLASS_CTRLCHAR}">${ti.asciiChars[i]}</span>`:i>127?n+=`<span class="${fr.CLASS_CTRLCHAR}">U+${ti.charToHex(i)}</span>`:n+=ti.asciiChars[i];return n};Tt.stringToAsciiHtml=function(r){let e=Wl.decode("STRING",r);return this.charsToAsciiHtml(e)}});var p2=de((HP,d2)=>{d2.exports=function(){let e=dn(),t=Eo(),n="ast.js: ",i=this,s=null,a=null,u=null,v=0,w=[],E=[],M=[],k=[];this.callbacks=[],this.astObject="astObject",this.init=function(C,z,I){M.length=0,k.length=0,w.length=0,v=0,s=C,a=z,u=I;let q,Y=[];for(q=0;q<s.length;q+=1)Y.push(s[q].lower);for(q=0;q<a.length;q+=1)Y.push(a[q].lower);for(v=s.length+a.length,q=0;q<v;q+=1)w[q]=!1,E[q]=null;for(let H in i.callbacks){let X=H.toLowerCase();if(q=Y.indexOf(X),q<0)throw new Error(`${n}init: node '${H}' not a rule or udt name`);typeof i.callbacks[H]=="function"&&(w[q]=!0,E[q]=i.callbacks[H]),i.callbacks[H]===!0&&(w[q]=!0)}},this.ruleDefined=function(C){return w[C]!==!1},this.udtDefined=function(C){return w[s.length+C]!==!1},this.down=function(C,z){let I=k.length;return M.push(I),k.push({name:z,thisIndex:I,thatIndex:null,state:e.SEM_PRE,callbackIndex:C,phraseIndex:null,phraseLength:null,stack:M.length}),I},this.up=function(C,z,I,q){let Y=k.length,H=M.pop();return k.push({name:z,thisIndex:Y,thatIndex:H,state:e.SEM_POST,callbackIndex:C,phraseIndex:I,phraseLength:q,stack:M.length}),k[H].thatIndex=Y,k[H].phraseIndex=I,k[H].phraseLength=q,Y},this.translate=function(C){let z,I,q;for(let Y=0;Y<k.length;Y+=1)q=k[Y],I=E[q.callbackIndex],q.state===e.SEM_PRE?I!==null&&(z=I(e.SEM_PRE,u,q.phraseIndex,q.phraseLength,C),z===e.SEM_SKIP&&(Y=q.thatIndex)):I!==null&&I(e.SEM_POST,u,q.phraseIndex,q.phraseLength,C)},this.setLength=function(C){k.length=C,C>0?M.length=k[C-1].stack:M.length=0},this.getLength=function(){return k.length};function D(T){let C="";for(let z=0;z<T;z+=1)C+=" ";return C}this.toXml=function(C){let z=t.charsToDec,I="decimal integer character codes";if(typeof C=="string"&&C.length>=3){let H=C.slice(0,3).toLowerCase();H==="asc"?(z=t.charsToAscii,I="ASCII for printing characters, hex for non-printing"):H==="hex"?(z=t.charsToHex,I="hexadecimal integer character codes"):H==="uni"&&(z=t.charsToUnicode,I="Unicode UTF-32 integer character codes")}let q="",Y=0;return q+=`<?xml version="1.0" encoding="utf-8"?>
`,q+=`<root nodes="${k.length/2}" characters="${u.length}">
`,q+=`<!-- input string, ${I} -->
`,q+=D(Y+2),q+=z(u),q+=`
`,k.forEach(H=>{H.state===e.SEM_PRE?(Y+=1,q+=D(Y),q+=`<node name="${H.name}" index="${H.phraseIndex}" length="${H.phraseLength}">
`,q+=D(Y+2),q+=z(u,H.phraseIndex,H.phraseLength),q+=`
`):(q+=D(Y),q+=`</node><!-- name="${H.name}" -->
`,Y-=1)}),q+=`</root>
`,q},this.phrases=function(){let C={},z,I;for(z=0;z<k.length;z+=1)I=k[z],I.state===e.SEM_PRE&&(Array.isArray(C[I.name])||(C[I.name]=[]),C[I.name].push({index:I.phraseIndex,length:I.phraseLength}));return C}}});var Yl=de((zP,m2)=>{m2.exports=function(){let e="circular-buffer.js: ",t=-1,n=0;this.init=function(s){if(typeof s!="number"||s<=0)throw new Error(`${e}init: circular buffer size must an integer > 0`);n=Math.ceil(s),t=-1},this.increment=function(){return t+=1,(t+n)%n},this.maxSize=function(){return n},this.items=function(){return t+1},this.getListIndex=function(s){return t===-1||s<0||s>t||t-s>=n?-1:(s+n)%n},this.forEach=function(s){if(t!==-1){if(t<n){for(let a=0;a<=t;a+=1)s(a,a);return}for(let a=t-n+1;a<=t;a+=1){let u=(a+n)%n;s(u,a)}}}}});var v2=de((KP,b2)=>{b2.exports=function(){let e=dn(),t=Eo(),n="parser.js: ",i=this,s;this.ast=null,this.stats=null,this.trace=null,this.callbacks=[];let a=null,u=null,v,w,E,M,k=0,D=0,T=0,C=null,z=null,I=null,q=null,Y=null,H=0,X=1/0,B=1/0,P=function(V,N,F){let ne=`${n}evaluateRule(): `;if(V>=I.length)throw new Error(`${ne}rule index: ${V} out of range`);if(N>=E)throw new Error(`${ne}phrase index: ${N} out of range`);let{length:ae}=a;a.push({type:e.RNM,index:V}),s(ae,N,F),a.pop()},L=function(ee,V,N){let F=`${n}evaluateUdt(): `;if(ee>=q.length)throw new Error(`${F}udt index: ${ee} out of range`);if(V>=E)throw new Error(`${F}phrase index: ${V} out of range`);let{length:ne}=a;a.push({type:e.UDT,empty:q[ee].empty,index:ee}),s(ne,V,N),a.pop()},te=function(){k=0,D=0,T=0,H=0,M=[{lookAround:e.LOOKAROUND_NONE,anchor:0,charsEnd:0,charsLength:0}],I=null,q=null,u=null,v=0,w=0,E=0,C=null,z=null,Y=null,a=null},S=function(){let ee=[],V=function(){let F={};I.forEach(ne=>{ne.isBkr&&(F[ne.lower]=null)}),q.length>0&&q.forEach(ne=>{ne.isBkr&&(F[ne.lower]=null)}),ee.push(F)},N=function(){let F=ee[ee.length-1],ne={};for(let ae in F)ne[ae]=F[ae];return ne};this.push=function(){ee.push(N())},this.pop=function(ne){let ae=ne;if(ae||(ae=ee.length-1),ae<1||ae>ee.length)throw new Error(`${n}backRef.pop(): bad length: ${ae}`);return ee.length=ae,ee[ee.length-1]},this.length=function(){return ee.length},this.savePhrase=function(ne,ae,se){ee[ee.length-1][ne]={phraseIndex:ae,phraseLength:se}},this.getPhrase=function(F){return ee[ee.length-1][F]},V()},d=function(){let V=this;this.state=e.ACTIVE,this.phraseLength=0,this.ruleIndex=0,this.udtIndex=0,this.lookAround=M[M.length-1],this.uFrame=new S,this.pFrame=new S,this.evaluateRule=P,this.evaluateUdt=L,this.refresh=function(){V.state=e.ACTIVE,V.phraseLength=0,V.lookAround=M[M.length-1]}},y=function(){return M[M.length-1]},h=function(){return M.length>1},o=function(){return M[M.length-1].lookAround===e.LOOKAROUND_BEHIND},f=function(){let ee=`${n}initializeAst(): `,V=!0;for(;V;){if(i.ast===void 0){i.ast=null;break}if(i.ast===null)break;if(i.ast.astObject!=="astObject")throw new Error(`${ee}ast object not recognized`);break}i.ast!==null&&i.ast.init(I,q,u)},l=function(){let ee=`${n}initializeTrace(): `,V=!0;for(;V;){if(i.trace===void 0){i.trace=null;break}if(i.trace===null)break;if(i.trace.traceObject!=="traceObject")throw new Error(`${ee}trace object not recognized`);break}i.trace!==null&&i.trace.init(I,q,u)},m=function(){let ee=`${n}initializeStats(): `,V=!0;for(;V;){if(i.stats===void 0){i.stats=null;break}if(i.stats===null)break;if(i.stats.statsObject!=="statsObject")throw new Error(`${ee}stats object not recognized`);break}i.stats!==null&&i.stats.init(I,q)},b=function(ee){let V=`${n}initializeGrammar(): `;if(!ee)throw new Error(`${V}grammar object undefined`);if(ee.grammarObject!=="grammarObject")throw new Error(`${V}bad grammar object`);I=ee.rules,q=ee.udts},p=function(ee){let V=`${n}initializeStartRule(): `,N=null;if(typeof ee=="number"){if(ee>=I.length)throw new Error(`${V}start rule index too large: max: ${I.length}: index: ${ee}`);N=ee}else if(typeof ee=="string"){let F=ee.toLowerCase();for(let ne=0;ne<I.length;ne+=1)if(F===I[ne].lower){N=I[ne].index;break}if(N===null)throw new Error(`${V}start rule name '${ee}' not recognized`)}else throw new Error(`${V}type of start rule '${typeof ee}' not recognized`);return N},x=function(V,N,F){let ne=`${n}initializeInputChars(): `,ae=V,se=N,ue=F;if(ae===void 0)throw new Error(`${ne}input string is undefined`);if(ae===null)throw new Error(`${ne}input string is null`);if(typeof ae=="string")ae=t.stringToChars(ae);else if(!Array.isArray(ae))throw new Error(`${ne}input string is not a string or array`);if(ae.length>0&&typeof ae[0]!="number")throw new Error(`${ne}input string not an array of integers`);if(typeof se!="number")se=0;else if(se=Math.floor(se),se<0||se>ae.length)throw new Error(`${ne}input beginning index out of range: ${se}`);if(typeof ue!="number")ue=ae.length-se;else if(ue=Math.floor(ue),ue<0||ue>ae.length-se)throw new Error(`${ne}input length out of range: ${ue}`);u=ae,v=se,w=ue,E=v+w},_=function(){let ee=`${n}initializeCallbacks(): `,V;for(C=[],z=[],V=0;V<I.length;V+=1)C[V]=null;for(V=0;V<q.length;V+=1)z[V]=null;let N,F=[];for(V=0;V<I.length;V+=1)F.push(I[V].lower);for(V=0;V<q.length;V+=1)F.push(q[V].lower);for(let ne in i.callbacks){if(V=F.indexOf(ne.toLowerCase()),V<0)throw new Error(`${ee}syntax callback '${ne}' not a rule or udt name`);if(N=i.callbacks[ne],N||(N=null),typeof N=="function"||N===null)V<I.length?C[V]=N:z[V-I.length]=N;else throw new Error(`${ee}syntax callback[${ne}] must be function reference or 'false' (false/null/undefined/etc.)`)}for(V=0;V<q.length;V+=1)if(z[V]===null)throw new Error(`${ee}all UDT callbacks must be defined. UDT callback[${q[V].lower}] not a function reference`)};this.setMaxTreeDepth=function(ee){if(typeof ee!="number")throw new Error(`parser: max tree depth must be integer > 0: ${ee}`);if(X=Math.floor(ee),X<=0)throw new Error(`parser: max tree depth must be integer > 0: ${ee}`)},this.setMaxNodeHits=function(ee){if(typeof ee!="number")throw new Error(`parser: max node hits must be integer > 0: ${ee}`);if(B=Math.floor(ee),B<=0)throw new Error(`parser: max node hits must be integer > 0: ${ee}`)};let c=function(ee,V,N){let F,ne=`${n}parse(): `;b(ee);let ae=p(V);_(),l(),m(),f();let se=new d;switch(N!=null&&(Y=N),a=[{type:e.RNM,index:ae}],s(0,v,se),a=null,se.state){case e.ACTIVE:throw new Error(`${ne}final state should never be 'ACTIVE'`);case e.NOMATCH:F=!1;break;case e.EMPTY:case e.MATCH:se.phraseLength===w?F=!0:F=!1;break;default:throw new Error("unrecognized state")}return{success:F,state:se.state,length:w,matched:se.phraseLength,maxMatched:H,maxTreeDepth:D,nodeHits:T,inputLength:u.length,subBegin:v,subEnd:E,subLength:w}};this.parseSubstring=function(V,N,F,ne,ae,se){return te(),x(F,ne,ae),c(V,N,se)},this.parse=function(V,N,F,ne){return te(),x(F,0,F.length),c(V,N,ne)};let g=function(ee,V,N){let F=a[ee];for(let ne=0;ne<F.children.length&&(s(F.children[ne],V,N),N.state===e.NOMATCH);ne+=1);},G=function(ee,V,N){let F,ne,ae,se,ue=a[ee],Xe=N.uFrame.length(),be=N.pFrame.length();i.ast&&(ne=i.ast.getLength()),F=!0,ae=V,se=0;for(let pe=0;pe<ue.children.length;pe+=1)if(s(ue.children[pe],ae,N),N.state===e.NOMATCH){F=!1;break}else ae+=N.phraseLength,se+=N.phraseLength;F?(N.state=se===0?e.EMPTY:e.MATCH,N.phraseLength=se):(N.state=e.NOMATCH,N.phraseLength=0,N.uFrame.pop(Xe),N.pFrame.pop(be),i.ast&&i.ast.setLength(ne))},A=function(ee,V,N){let F,ne,ae,se,ue=a[ee];ne=V,ae=0,se=0;let Xe=N.uFrame.length(),be=N.pFrame.length();i.ast&&(F=i.ast.getLength());let pe=!0;for(;pe&&!(ne>=E||(s(ee+1,ne,N),N.state===e.NOMATCH)||N.state===e.EMPTY||(se+=1,ae+=N.phraseLength,ne+=N.phraseLength,se===ue.max)););N.state===e.EMPTY||se>=ue.min?(N.state=ae===0?e.EMPTY:e.MATCH,N.phraseLength=ae):(N.state=e.NOMATCH,N.phraseLength=0,N.uFrame.pop(Xe),N.pFrame.pop(be),i.ast&&i.ast.setLength(F))},U=function(ee,V,N,F){if(V.phraseLength>N){let ne=`${n}opRNM(${ee.name}): callback function error: `;throw ne+=`sysData.phraseLength: ${V.phraseLength}`,ne+=` must be <= remaining chars: ${N}`,new Error(ne)}switch(V.state){case e.ACTIVE:if(F!==!0)throw new Error(`${n}opRNM(${ee.name}): callback function return error. ACTIVE state not allowed.`);break;case e.EMPTY:V.phraseLength=0;break;case e.MATCH:V.phraseLength===0&&(V.state=e.EMPTY);break;case e.NOMATCH:V.phraseLength=0;break;default:throw new Error(`${n}opRNM(${ee.name}): callback function return error. Unrecognized return state: ${V.state}`)}},K=function(ee,V,N){let F,ne,ae,se,ue,Xe,be=a[ee],pe=I[be.index],Qe=C[pe.index],ge=!h();if(ge&&(ne=i.ast&&i.ast.ruleDefined(be.index),ne&&(F=i.ast.getLength(),i.ast.down(be.index,I[be.index].name)),se=N.uFrame.length(),ue=N.pFrame.length(),N.uFrame.push(),N.pFrame.push(),Xe=N.pFrame,N.pFrame=new S),Qe===null)ae=a,a=pe.opcodes,s(0,V,N),a=ae;else{let we=E-V;N.ruleIndex=pe.index,Qe(N,u,V,Y),U(pe,N,we,!0),N.state===e.ACTIVE&&(ae=a,a=pe.opcodes,s(0,V,N),a=ae,N.ruleIndex=pe.index,Qe(N,u,V,Y),U(pe,N,we,!1))}ge&&(ne&&(N.state===e.NOMATCH?i.ast.setLength(F):i.ast.up(be.index,pe.name,V,N.phraseLength)),N.pFrame=Xe,N.state===e.NOMATCH?(N.uFrame.pop(se),N.pFrame.pop(ue)):pe.isBkr&&(N.pFrame.savePhrase(pe.lower,V,N.phraseLength),N.uFrame.savePhrase(pe.lower,V,N.phraseLength)))},O=function(ee,V,N){if(V.phraseLength>N){let F=`${n}opUDT(${ee.name}): callback function error: `;throw F+=`sysData.phraseLength: ${V.phraseLength}`,F+=` must be <= remaining chars: ${N}`,new Error(F)}switch(V.state){case e.ACTIVE:throw new Error(`${n}opUDT(${ee.name}): callback function return error. ACTIVE state not allowed.`);case e.EMPTY:if(ee.empty===!1)throw new Error(`${n}opUDT(${ee.name}): callback function return error. May not return EMPTY.`);V.phraseLength=0;break;case e.MATCH:if(V.phraseLength===0){if(ee.empty===!1)throw new Error(`${n}opUDT(${ee.name}): callback function return error. May not return EMPTY.`);V.state=e.EMPTY}break;case e.NOMATCH:V.phraseLength=0;break;default:throw new Error(`${n}opUDT(${ee.name}): callback function return error. Unrecognized return state: ${V.state}`)}},R=function(ee,V,N){let F,ne,ae,se,ue,Xe,be=a[ee],pe=q[be.index];N.UdtIndex=pe.index;let Qe=!h();Qe&&(ae=i.ast&&i.ast.udtDefined(be.index),ae&&(ne=I.length+be.index,F=i.ast.getLength(),i.ast.down(ne,pe.name)),se=N.uFrame.length(),ue=N.pFrame.length(),N.uFrame.push(),N.pFrame.push(),Xe=N.pFrame,N.pFrame=new S);let ge=E-V;z[be.index](N,u,V,Y),O(pe,N,ge),Qe&&(ae&&(N.state===e.NOMATCH?i.ast.setLength(F):i.ast.up(ne,pe.name,V,N.phraseLength)),N.pFrame=Xe,N.state===e.NOMATCH?(N.uFrame.pop(se),N.pFrame.pop(ue)):pe.isBkr&&(N.pFrame.savePhrase(pe.lower,V,N.phraseLength),N.uFrame.savePhrase(pe.lower,V,N.phraseLength)))},J=function(ee,V,N){M.push({lookAround:e.LOOKAROUND_AHEAD,anchor:V,charsEnd:E,charsLength:w}),E=u.length,w=u.length-v,s(ee+1,V,N);let F=M.pop();switch(E=F.charsEnd,w=F.charsLength,N.phraseLength=0,N.state){case e.EMPTY:N.state=e.EMPTY;break;case e.MATCH:N.state=e.EMPTY;break;case e.NOMATCH:N.state=e.NOMATCH;break;default:throw new Error(`opAND: invalid state ${N.state}`)}},j=function(ee,V,N){M.push({lookAround:e.LOOKAROUND_AHEAD,anchor:V,charsEnd:E,charsLength:w}),E=u.length,w=u.length-v,s(ee+1,V,N);let F=M.pop();switch(E=F.charsEnd,w=F.charsLength,N.phraseLength=0,N.state){case e.EMPTY:case e.MATCH:N.state=e.NOMATCH;break;case e.NOMATCH:N.state=e.EMPTY;break;default:throw new Error(`opNOT: invalid state ${N.state}`)}},Q=function(ee,V,N){let F=a[ee];N.state=e.NOMATCH,V<E&&F.min<=u[V]&&u[V]<=F.max&&(N.state=e.MATCH,N.phraseLength=1)},he=function(ee,V,N){let F,ne=a[ee],ae=ne.string.length;if(N.state=e.NOMATCH,V+ae<=E){for(F=0;F<ae;F+=1)if(u[V+F]!==ne.string[F])return;N.state=e.MATCH,N.phraseLength=ae}},ie=function(ee,V,N){let F,ne,ae=a[ee];N.state=e.NOMATCH;let se=ae.string.length;if(se===0){N.state=e.EMPTY;return}if(V+se<=E){for(F=0;F<se;F+=1)if(ne=u[V+F],ne>=65&&ne<=90&&(ne+=32),ne!==ae.string[F])return;N.state=e.MATCH,N.phraseLength=se}},W=function(ee,V,N){N.state=e.NOMATCH,N.phraseLength=0,N.state=V===0?e.EMPTY:e.NOMATCH},le=function(ee,V,N){N.state=e.NOMATCH,N.phraseLength=0,N.state=V===u.length?e.EMPTY:e.NOMATCH},Z=function(ee,V,N){let F,ne,ae,se,ue=a[ee];N.state=e.NOMATCH,ue.index<I.length?se=I[ue.index].lower:se=q[ue.index-I.length].lower;let Xe=ue.bkrMode===e.BKR_MODE_PM?N.pFrame.getPhrase(se):N.uFrame.getPhrase(se),be=ue.bkrCase===e.BKR_MODE_CI;if(Xe===null)return;let pe=Xe.phraseIndex,Qe=Xe.phraseLength;if(Qe===0){N.state=e.EMPTY;return}if(V+Qe<=E){if(be){for(F=0;F<Qe;F+=1)if(ne=u[V+F],ae=u[pe+F],ne>=65&&ne<=90&&(ne+=32),ae>=65&&ae<=90&&(ae+=32),ne!==ae)return;N.state=e.MATCH,N.phraseLength=Qe}else for(F=0;F<Qe;F+=1)if(ne=u[V+F],ae=u[pe+F],ne!==ae)return;N.state=e.MATCH,N.phraseLength=Qe}},oe=function(ee,V,N){switch(M.push({lookAround:e.LOOKAROUND_BEHIND,anchor:V}),s(ee+1,V,N),M.pop(),N.phraseLength=0,N.state){case e.EMPTY:N.state=e.EMPTY;break;case e.MATCH:N.state=e.EMPTY;break;case e.NOMATCH:N.state=e.NOMATCH;break;default:throw new Error(`opBKA: invalid state ${N.state}`)}},$=function(ee,V,N){switch(M.push({lookAround:e.LOOKAROUND_BEHIND,anchor:V}),s(ee+1,V,N),M.pop(),N.phraseLength=0,N.state){case e.EMPTY:case e.MATCH:N.state=e.NOMATCH;break;case e.NOMATCH:N.state=e.EMPTY;break;default:throw new Error(`opBKN: invalid state ${N.state}`)}},re=function(ee,V,N){let F,ne,ae,se,ue=a[ee],Xe=N.uFrame.length(),be=N.pFrame.length();i.ast&&(ne=i.ast.getLength()),F=!0,ae=V,se=0;for(let pe=ue.children.length-1;pe>=0;pe-=1)if(s(ue.children[pe],ae,N),ae-=N.phraseLength,se+=N.phraseLength,N.state===e.NOMATCH){F=!1;break}F?(N.state=se===0?e.EMPTY:e.MATCH,N.phraseLength=se):(N.state=e.NOMATCH,N.phraseLength=0,N.uFrame.pop(Xe),N.pFrame.pop(be),i.ast&&i.ast.setLength(ne))},ce=function(ee,V,N){let F,ne,ae,se,ue=a[ee];ne=V,ae=0,se=0;let Xe=N.uFrame.length(),be=N.pFrame.length();i.ast&&(F=i.ast.getLength());let pe=!0;for(;pe&&!(ne<=0||(s(ee+1,ne,N),N.state===e.NOMATCH)||N.state===e.EMPTY||(se+=1,ae+=N.phraseLength,ne-=N.phraseLength,se===ue.max)););N.state===e.EMPTY||se>=ue.min?(N.state=ae===0?e.EMPTY:e.MATCH,N.phraseLength=ae):(N.state=e.NOMATCH,N.phraseLength=0,N.uFrame.pop(Xe),N.pFrame.pop(be),i.ast&&i.ast.setLength(F))},Ue=function(ee,V,N){let F=a[ee];if(N.state=e.NOMATCH,N.phraseLength=0,V>0){let ne=u[V-1];F.min<=ne&&ne<=F.max&&(N.state=e.MATCH,N.phraseLength=1)}},me=function(ee,V,N){let F,ne=a[ee];N.state=e.NOMATCH;let ae=ne.string.length,se=V-ae;if(se>=0){for(F=0;F<ae;F+=1)if(u[se+F]!==ne.string[F])return;N.state=e.MATCH,N.phraseLength=ae}},xe=function(ee,V,N){let F,ne=a[ee];N.state=e.NOMATCH;let ae=ne.string.length;if(ae===0){N.state=e.EMPTY;return}let se=V-ae;if(se>=0){for(let ue=0;ue<ae;ue+=1)if(F=u[se+ue],F>=65&&F<=90&&(F+=32),F!==ne.string[ue])return;N.state=e.MATCH,N.phraseLength=ae}},_t=function(ee,V,N){let F,ne,ae,se,ue=a[ee];N.state=e.NOMATCH,N.phraseLength=0,ue.index<I.length?se=I[ue.index].lower:se=q[ue.index-I.length].lower;let Xe=ue.bkrMode===e.BKR_MODE_PM?N.pFrame.getPhrase(se):N.uFrame.getPhrase(se),be=ue.bkrCase===e.BKR_MODE_CI;if(Xe===null)return;let pe=Xe.phraseIndex,Qe=Xe.phraseLength;if(Qe===0){N.state=e.EMPTY,N.phraseLength=0;return}let ge=V-Qe;if(ge>=0){if(be){for(F=0;F<Qe;F+=1)if(ne=u[ge+F],ae=u[pe+F],ne>=65&&ne<=90&&(ne+=32),ae>=65&&ae<=90&&(ae+=32),ne!==ae)return;N.state=e.MATCH,N.phraseLength=Qe}else for(F=0;F<Qe;F+=1)if(ne=u[ge+F],ae=u[pe+F],ne!==ae)return;N.state=e.MATCH,N.phraseLength=Qe}};s=function(V,N,F){let ne=!0,ae=a[V];if(T+=1,T>B)throw new Error(`parser: maximum number of node hits exceeded: ${B}`);if(k+=1,k>D&&(D=k,D>X))throw new Error(`parser: maximum parse tree depth exceeded: ${X}`);if(F.refresh(),i.trace!==null){let se=y();i.trace.down(ae,F.state,N,F.phraseLength,se.anchor,se.lookAround)}if(o())switch(ae.type){case e.ALT:g(V,N,F);break;case e.CAT:re(V,N,F);break;case e.REP:ce(V,N,F);break;case e.RNM:K(V,N,F);break;case e.UDT:R(V,N,F);break;case e.AND:J(V,N,F);break;case e.NOT:j(V,N,F);break;case e.TRG:Ue(V,N,F);break;case e.TBS:me(V,N,F);break;case e.TLS:xe(V,N,F);break;case e.BKR:_t(V,N,F);break;case e.BKA:oe(V,N,F);break;case e.BKN:$(V,N,F);break;case e.ABG:W(V,N,F);break;case e.AEN:le(V,N,F);break;default:ne=!1;break}else switch(ae.type){case e.ALT:g(V,N,F);break;case e.CAT:G(V,N,F);break;case e.REP:A(V,N,F);break;case e.RNM:K(V,N,F);break;case e.UDT:R(V,N,F);break;case e.AND:J(V,N,F);break;case e.NOT:j(V,N,F);break;case e.TRG:Q(V,N,F);break;case e.TBS:he(V,N,F);break;case e.TLS:ie(V,N,F);break;case e.BKR:Z(V,N,F);break;case e.BKA:oe(V,N,F);break;case e.BKN:$(V,N,F);break;case e.ABG:W(V,N,F);break;case e.AEN:le(V,N,F);break;default:ne=!1;break}if(!h()&&N+F.phraseLength>H&&(H=N+F.phraseLength),i.stats!==null&&i.stats.collect(ae,F),i.trace!==null){let se=y();i.trace.up(ae,F.state,N,F.phraseLength,se.anchor,se.lookAround)}return k-=1,ne}}});var y2=de((jP,g2)=>{g2.exports=function(){let e=dn(),t=Eo(),n=Ca(),i="stats.js: ",s=[],a=[],u=[],v,w=[],E=[];this.statsObject="statsObject";let M="stats",k=function(B,P){return B.lower<P.lower?-1:B.lower>P.lower?1:0},D=function(B,P){return B.total<P.total?1:B.total>P.total?-1:k(B,P)},T=function(B,P){return B.index<P.index?-1:B.index>P.index?1:0},C=function(){this.empty=0,this.match=0,this.nomatch=0,this.total=0},z=function(){u.length=0,v=new C,u[e.ALT]=new C,u[e.CAT]=new C,u[e.REP]=new C,u[e.RNM]=new C,u[e.TRG]=new C,u[e.TBS]=new C,u[e.TLS]=new C,u[e.UDT]=new C,u[e.AND]=new C,u[e.NOT]=new C,u[e.BKR]=new C,u[e.BKA]=new C,u[e.BKN]=new C,u[e.ABG]=new C,u[e.AEN]=new C,w.length=0;for(let B=0;B<s.length;B+=1)w.push({empty:0,match:0,nomatch:0,total:0,name:s[B].name,lower:s[B].lower,index:s[B].index});if(a.length>0){E.length=0;for(let B=0;B<a.length;B+=1)E.push({empty:0,match:0,nomatch:0,total:0,name:a[B].name,lower:a[B].lower,index:a[B].index})}},I=function(B,P){switch(B.total+=1,P){case e.EMPTY:B.empty+=1;break;case e.MATCH:B.match+=1;break;case e.NOMATCH:B.nomatch+=1;break;default:throw new Error(`${i}collect(): incStat(): unrecognized state: ${P}`)}},q=function(B,P){let L="";return L+="<tr>",L+=`<td class="${n.CLASS_ACTIVE}">${B}</td>`,L+=`<td class="${n.CLASS_EMPTY}">${P.empty}</td>`,L+=`<td class="${n.CLASS_MATCH}">${P.match}</td>`,L+=`<td class="${n.CLASS_NOMATCH}">${P.nomatch}</td>`,L+=`<td class="${n.CLASS_ACTIVE}">${P.total}</td>`,L+=`</tr>
`,L},Y=function(){let B="";return B+=q("ALT",u[e.ALT]),B+=q("CAT",u[e.CAT]),B+=q("REP",u[e.REP]),B+=q("RNM",u[e.RNM]),B+=q("TRG",u[e.TRG]),B+=q("TBS",u[e.TBS]),B+=q("TLS",u[e.TLS]),B+=q("UDT",u[e.UDT]),B+=q("AND",u[e.AND]),B+=q("NOT",u[e.NOT]),B+=q("BKR",u[e.BKR]),B+=q("BKA",u[e.BKA]),B+=q("BKN",u[e.BKN]),B+=q("ABG",u[e.ABG]),B+=q("AEN",u[e.AEN]),B+=q("totals",v),B},H=function(){let B="";B+=`<tr><th></th><th></th><th></th><th></th><th></th></tr>
`,B+=`<tr><th>rules</th><th></th><th></th><th></th><th></th></tr>
`;for(let P=0;P<s.length;P+=1)w[P].total>0&&(B+="<tr>",B+=`<td class="${n.CLASS_ACTIVE}">${w[P].name}</td>`,B+=`<td class="${n.CLASS_EMPTY}">${w[P].empty}</td>`,B+=`<td class="${n.CLASS_MATCH}">${w[P].match}</td>`,B+=`<td class="${n.CLASS_NOMATCH}">${w[P].nomatch}</td>`,B+=`<td class="${n.CLASS_ACTIVE}">${w[P].total}</td>`,B+=`</tr>
`);if(a.length>0){B+=`<tr><th></th><th></th><th></th><th></th><th></th></tr>
`,B+=`<tr><th>udts</th><th></th><th></th><th></th><th></th></tr>
`;for(let P=0;P<a.length;P+=1)E[P].total>0&&(B+="<tr>",B+=`<td class="${n.CLASS_ACTIVE}">${E[P].name}</td>`,B+=`<td class="${n.CLASS_EMPTY}">${E[P].empty}</td>`,B+=`<td class="${n.CLASS_MATCH}">${E[P].match}</td>`,B+=`<td class="${n.CLASS_NOMATCH}">${E[P].nomatch}</td>`,B+=`<td class="${n.CLASS_ACTIVE}">${E[P].total}</td>`,B+=`</tr>
`)}return B};this.validate=function(B){let P=!1;return typeof B=="string"&&M===B&&(P=!0),P},this.init=function(B,P){s=B,a=P,z()},this.collect=function(B,P){I(v,P.state,P.phraseLength),I(u[B.type],P.state,P.phraseLength),B.type===e.RNM&&I(w[B.index],P.state,P.phraseLength),B.type===e.UDT&&I(E[B.index],P.state,P.phraseLength)},this.toHtml=function(B,P){let L="";L+=`<table class="${n.CLASS_STATS}">
`,typeof P=="string"&&(L+=`<caption>${P}</caption>
`),L+=`<tr><th class="${n.CLASS_ACTIVE}">ops</th>
`,L+=`<th class="${n.CLASS_EMPTY}">EMPTY</th>
`,L+=`<th class="${n.CLASS_MATCH}">MATCH</th>
`,L+=`<th class="${n.CLASS_NOMATCH}">NOMATCH</th>
`,L+=`<th class="${n.CLASS_ACTIVE}">totals</th></tr>
`;let te=!0;for(;te;){if(B===void 0){L+=Y();break}if(B===null){L+=Y();break}if(B==="ops"){L+=Y();break}if(B==="index"){w.sort(T),E.length>0&&E.sort(T),L+=Y(),L+=H();break}if(B==="hits"){w.sort(D),E.length>0&&E.sort(T),L+=Y(),L+=H();break}if(B==="alpha"){w.sort(k),E.length>0&&E.sort(k),L+=Y(),L+=H();break}break}return L+=`</table>
`,L},this.toHtmlPage=function(B,P,L){return t.htmlToPage(this.toHtml(B,P),L)}}});var w2=de((GP,x2)=>{x2.exports=function(){let e=Eo(),t=Ca(),n=new(Yl()),i=dn(),s="trace.js: ",a=this,u=16,v=10,w=8,E=32,M=80,k=5,D=[],T=5e3,C=-1,z=0,I=0,q=[],Y=null,H=null,X=null,B=[],P=[],L=`<span class="${t.CLASS_LINEEND}">&bull;</span>`,te=`<span class="${t.CLASS_LINEEND}">&hellip;</span>`,S=`<span class="${t.CLASS_EMPTY}">&#120634;</span>`,d=function(){let O=function(J){B[i.ALT]=J,B[i.CAT]=J,B[i.REP]=J,B[i.TLS]=J,B[i.TBS]=J,B[i.TRG]=J,B[i.AND]=J,B[i.NOT]=J,B[i.BKR]=J,B[i.BKA]=J,B[i.BKN]=J,B[i.ABG]=J,B[i.AEN]=J},R=0;for(let J in a.filter.operators)R+=1;if(R===0){O(!1);return}for(let J in a.filter.operators){let j=J.toUpperCase();if(j==="<ALL>"){O(!0);return}if(j==="<NONE>"){O(!1);return}}O(!1);for(let J in a.filter.operators){let j=J.toUpperCase();if(j==="ALT")B[i.ALT]=a.filter.operators[J]===!0;else if(j==="CAT")B[i.CAT]=a.filter.operators[J]===!0;else if(j==="REP")B[i.REP]=a.filter.operators[J]===!0;else if(j==="AND")B[i.AND]=a.filter.operators[J]===!0;else if(j==="NOT")B[i.NOT]=a.filter.operators[J]===!0;else if(j==="TLS")B[i.TLS]=a.filter.operators[J]===!0;else if(j==="TBS")B[i.TBS]=a.filter.operators[J]===!0;else if(j==="TRG")B[i.TRG]=a.filter.operators[J]===!0;else if(j==="BKR")B[i.BKR]=a.filter.operators[J]===!0;else if(j==="BKA")B[i.BKA]=a.filter.operators[J]===!0;else if(j==="BKN")B[i.BKN]=a.filter.operators[J]===!0;else if(j==="ABG")B[i.ABG]=a.filter.operators[J]===!0;else if(j==="AEN")B[i.AEN]=a.filter.operators[J]===!0;else throw new Error(`${s}initOpratorFilter: '${J}' not a valid operator name. Must be <all>, <none>, alt, cat, rep, tls, tbs, trg, and, not, bkr, bka or bkn`)}},y=function(){let O=function(Q){B[i.RNM]=Q,B[i.UDT]=Q;let he=H.length+X.length;P.length=0;for(let ie=0;ie<he;ie+=1)P.push(Q)},R,J,j=[];for(J=0;J<H.length;J+=1)j.push(H[J].lower);for(J=0;J<X.length;J+=1)j.push(X[J].lower);P.length=0,R=0;for(let Q in a.filter.rules)R+=1;if(R===0){O(!0);return}for(let Q in a.filter.rules){let he=Q.toLowerCase();if(he==="<all>"){O(!0);return}if(he==="<none>"){O(!1);return}}O(!1),B[i.RNM]=!0,B[i.UDT]=!0;for(let Q in a.filter.rules){let he=Q.toLowerCase();if(J=j.indexOf(he),J<0)throw new Error(`${s}initRuleFilter: '${Q}' not a valid rule or udt name`);P[J]=a.filter.rules[Q]===!0}};this.traceObject="traceObject",this.filter={operators:[],rules:[]},this.setMaxRecords=function(O,R){if(C=-1,typeof O=="number"&&O>0)T=Math.ceil(O);else{T=0;return}typeof R=="number"&&(C=Math.floor(R),C<0&&(C=-1))},this.getMaxRecords=function(){return T},this.getLastRecord=function(){return C},this.init=function(O,R,J){D.length=0,q.length=0,z=0,I=0,Y=J,H=O,X=R,d(),y(),n.init(T)};let h=function(O){let R=!1;return O.type===i.RNM?B[O.type]&&P[O.index]?R=!0:R=!1:O.type===i.UDT?B[O.type]&&P[H.length+O.index]?R=!0:R=!1:R=B[O.type],R},o=function(O){return C===-1||O<=C};this.down=function(O,R,J,j,Q,he){o(z)&&h(O)&&(q.push(z),D[n.increment()]={dirUp:!1,depth:I,thisLine:z,thatLine:void 0,opcode:O,state:R,phraseIndex:J,phraseLength:j,lookAnchor:Q,lookAround:he},z+=1,I+=1)},this.up=function(O,R,J,j,Q,he){if(o(z)&&h(O)){let ie=z,W=q.pop(),le=n.getListIndex(W);le!==-1&&(D[le].thatLine=ie),I-=1,D[n.increment()]={dirUp:!0,depth:I,thisLine:ie,thatLine:W,opcode:O,state:R,phraseIndex:J,phraseLength:j,lookAnchor:Q,lookAround:he},z+=1}};let f=function(){function O(N,F){let ne,ae,se;if(F)switch(N.op={id:F.type,name:e.opcodeToString(F.type)},N.opData=void 0,F.type){case i.RNM:N.opData=H[F.index].name;break;case i.UDT:N.opData=X[F.index].name;break;case i.BKR:F.index<H.length?ne=H[F.index].name:ne=X[F.index-H.length].name,ae=F.bkrCase===i.BKR_MODE_CI?"%i":"%s",se=F.bkrMode===i.BKR_MODE_UM?"%u":"%p",N.opData=`\\\\${ae}${se}${ne}`;break;case i.TLS:N.opData=[];for(let ue=0;ue<F.string.length;ue+=1)N.opData.push(F.string[ue]);break;case i.TBS:N.opData=[];for(let ue=0;ue<F.string.length;ue+=1)N.opData.push(F.string[ue]);break;case i.TRG:N.opData=[F.min,F.max];break;case i.REP:N.opData=[F.min,F.max];break;default:throw new Error("unrecognized opcode")}else N.op={id:void 0,name:void 0},N.opData=void 0}function R(N,F,ne){return N===i.MATCH?{index:F,length:ne}:N===i.NOMATCH?{index:F,length:0}:N===i.EMPTY?{index:F,length:0}:null}let J=-1;function j(N,F,ne){let ae={id:J++,branch:-1,parent:N,up:!1,down:!1,depth:ne,children:[]};return F?(ae.down=!0,ae.state={id:F.state,name:e.stateToString(F.state)},ae.phrase=null,O(ae,F.opcode)):(ae.state={id:void 0,name:void 0},ae.phrase=R(),O(ae,void 0)),ae}function Q(N,F){F&&(N.up=!0,N.state={id:F.state,name:e.stateToString(F.state)},N.phrase=R(F.state,F.phraseIndex,F.phraseLength),N.down||O(N,F.opcode))}let he=0,ie=-1,W=1;function le(N){if(ie+=1,N.branch=W,ie>I&&(I=ie),N.children.length===0)he+=1;else for(let F=0;F<N.children.length;F+=1)F>0&&(W+=1),N.children[F].leftMost=!1,N.children[F].rightMost=!1,N.leftMost&&(N.children[F].leftMost=F===0),N.rightMost&&(N.children[F].rightMost=F===N.children.length-1),le(N.children[F]);ie-=1}function Z(N,F){let ne,ae={};if(ae.id=N.id,ae.branch=N.branch,ae.leftMost=N.leftMost,ae.rightMost=N.rightMost,ne=N.state.name?N.state.name:"ACTIVE",ae.state={id:N.state.id,name:ne},ne=N.op.name?N.op.name:"?",ae.op={id:N.op.id,name:ne},typeof N.opData=="string")ae.opData=N.opData;else if(Array.isArray(N.opData)){ae.opData=[];for(let se=0;se<N.opData.length;se+=1)ae.opData[se]=N.opData[se]}else ae.opData=void 0;N.phrase?ae.phrase={index:N.phrase.index,length:N.phrase.length}:ae.phrase=null,ae.depth=N.depth,ae.children=[];for(let se=0;se<N.children.length;se+=1){let ue=se!==N.children.length-1;ae.children[se]=Z(N.children[se],F,ue)}return ae}let oe=[],$,re,ce,Ue,me=!0,xe=j(null,null,-1);for(oe.push(xe),re=xe,n.forEach(N=>{if(Ue=D[N],me&&(me=!1,Ue.depth>0)){let F=Ue.dirUp?Ue.depth+1:Ue.depth;for(let ne=0;ne<F;ne+=1)ce=re,re=j(re,null,ne),oe.push(re),ce.children.push(re)}Ue.dirUp?(re=oe.pop(),Q(re,Ue),re=oe[oe.length-1]):(ce=re,re=j(re,Ue,Ue.depth),oe.push(re),ce.children.push(re))});oe.length>1;)re=oe.pop(),Q(re,null);if(xe.children.length===0)throw new Error("trace.toTree(): parse tree has no nodes");if(oe.length===0)throw new Error("trace.toTree(): integrity check: dummy root node disappeared?");$=xe.children[0];let _t=$;for(;$&&!$.down&&!$.up;)_t=$,$=$.children[0];$=_t,$.leftMost=!0,$.rightMost=!0,le($),$.branch=0;let ee={};ee.string=[];for(let N=0;N<Y.length;N+=1)ee.string[N]=Y[N];ee.rules=[];for(let N=0;N<H.length;N+=1)ee.rules[N]=H[N].name;ee.udts=[];for(let N=0;N<X.length;N+=1)ee.udts[N]=X[N].name;ee.id={},ee.id.ALT={id:i.ALT,name:"ALT"},ee.id.CAT={id:i.CAT,name:"CAT"},ee.id.REP={id:i.REP,name:"REP"},ee.id.RNM={id:i.RNM,name:"RNM"},ee.id.TLS={id:i.TLS,name:"TLS"},ee.id.TBS={id:i.TBS,name:"TBS"},ee.id.TRG={id:i.TRG,name:"TRG"},ee.id.UDT={id:i.UDT,name:"UDT"},ee.id.AND={id:i.AND,name:"AND"},ee.id.NOT={id:i.NOT,name:"NOT"},ee.id.BKR={id:i.BKR,name:"BKR"},ee.id.BKA={id:i.BKA,name:"BKA"},ee.id.BKN={id:i.BKN,name:"BKN"},ee.id.ABG={id:i.ABG,name:"ABG"},ee.id.AEN={id:i.AEN,name:"AEN"},ee.id.ACTIVE={id:i.ACTIVE,name:"ACTIVE"},ee.id.MATCH={id:i.MATCH,name:"MATCH"},ee.id.EMPTY={id:i.EMPTY,name:"EMPTY"},ee.id.NOMATCH={id:i.NOMATCH,name:"NOMATCH"},ee.treeDepth=I,ee.leafNodes=he;let V;return $.down?$.up?V="none":V="right":$.up?V="left":V="both",ee.branchesIncomplete=V,ee.tree=Z($,$.depth,!1),ee};this.toTree=function(O){let R=f();return O?JSON.stringify(R):R},this.toHtmlPage=function(O,R,J){return e.htmlToPage(this.toHtml(O,R),J)};let l=function(O,R){let J;switch(O){case u:J="hexadecimal";break;case v:J="decimal";break;case w:J="ASCII";break;case E:J="UNICODE";break;default:throw new Error(`${s}htmlHeader: unrecognized mode: ${O}`)}let j="";return j+=`<p>display mode: ${J}</p>
`,j+=`<table class="${t.CLASS_TRACE}">
`,typeof R=="string"&&(j+=`<caption>${R}</caption>`),j},m=function(){let O="";return O+=`</table>
`,O+=`<p class="${t.CLASS_MONOSPACE}">legend:<br>
`,O+=`(a)&nbsp;-&nbsp;line number<br>
`,O+=`(b)&nbsp;-&nbsp;matching line number<br>
`,O+=`(c)&nbsp;-&nbsp;phrase offset<br>
`,O+=`(d)&nbsp;-&nbsp;phrase length<br>
`,O+=`(e)&nbsp;-&nbsp;tree depth<br>
`,O+=`(f)&nbsp;-&nbsp;operator state<br>
`,O+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_ACTIVE}">&darr;</span>&nbsp;&nbsp;phrase opened<br>
`,O+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_MATCH}">&uarr;M</span> phrase matched<br>
`,O+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_EMPTY}">&uarr;E</span> empty phrase matched<br>
`,O+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_NOMATCH}">&uarr;N</span> phrase not matched<br>
`,O+=`operator&nbsp;-&nbsp;ALT, CAT, REP, RNM, TRG, TLS, TBS<sup>&dagger;</sup>, UDT, AND, NOT, BKA, BKN, BKR, ABG, AEN<sup>&Dagger;</sup><br>
`,O+=`phrase&nbsp;&nbsp;&nbsp;-&nbsp;up to ${M} characters of the phrase being matched<br>
`,O+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_MATCH}">matched characters</span><br>
`,O+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_LOOKAHEAD}">matched characters in look ahead mode</span><br>
`,O+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_LOOKBEHIND}">matched characters in look behind mode</span><br>
`,O+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_REMAINDER}">remainder characters(not yet examined by parser)</span><br>
`,O+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_CTRLCHAR}">control characters, TAB, LF, CR, etc. (ASCII mode only)</span><br>
`,O+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${S} empty string<br>
`,O+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${L} end of input string<br>
`,O+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${te} input string display truncated<br>
`,O+=`</p>
`,O+=`<p class="${t.CLASS_MONOSPACE}">
`,O+=`<sup>&dagger;</sup>original ABNF operators:<br>
`,O+=`ALT - alternation<br>
`,O+=`CAT - concatenation<br>
`,O+=`REP - repetition<br>
`,O+=`RNM - rule name<br>
`,O+=`TRG - terminal range<br>
`,O+=`TLS - terminal literal string (case insensitive)<br>
`,O+=`TBS - terminal binary string (case sensitive)<br>
`,O+=`<br>
`,O+=`<sup>&Dagger;</sup>super set SABNF operators:<br>
`,O+=`UDT - user-defined terminal<br>
`,O+=`AND - positive look ahead<br>
`,O+=`NOT - negative look ahead<br>
`,O+=`BKA - positive look behind<br>
`,O+=`BKN - negative look behind<br>
`,O+=`BKR - back reference<br>
`,O+=`ABG - anchor - begin of input string<br>
`,O+=`AEN - anchor - end of input string<br>
`,O+=`</p>
`,O};this.indent=function(O){let R="";for(let J=0;J<O;J+=1)R+=".";return R};let b=function(O,R){let J="";if(R.type===i.TRG)if(O===u||O===E){let j=R.min.toString(16).toUpperCase();j.length%2!==0&&(j=`0${j}`),J+=O===u?"%x":"U+",J+=j,j=R.max.toString(16).toUpperCase(),j.length%2!==0&&(j=`0${j}`),J+=`&ndash;${j}`}else J=`%d${R.min.toString(10)}&ndash;${R.max.toString(10)}`;return J},p=function(O,R){let J="";if(R.type===i.REP)if(O===u){let j=R.min.toString(16).toUpperCase();j.length%2!==0&&(j=`0${j}`),J=`x${j}`,R.max<1/0?(j=R.max.toString(16).toUpperCase(),j.length%2!==0&&(j=`0${j}`)):j="inf",J+=`&ndash;${j}`}else R.max<1/0?J=`${R.min.toString(10)}&ndash;${R.max.toString(10)}`:J=`${R.min.toString(10)}&ndash;inf`;return J},x=function(O,R){let J="";if(R.type===i.TBS){let j=Math.min(R.string.length,k*2);if(O===u||O===E){J+=O===u?"%x":"U+";for(let Q=0;Q<j;Q+=1){let he;Q>0&&(J+="."),he=R.string[Q].toString(16).toUpperCase(),he.length%2!==0&&(he=`0${he}`),J+=he}}else{J="%d";for(let Q=0;Q<j;Q+=1)Q>0&&(J+="."),J+=R.string[Q].toString(10)}j<R.string.length&&(J+=te)}return J},_=function(O,R){let J="";if(R.type===i.TLS){let j=Math.min(R.string.length,k);if(O===u||O===v){let Q,he,ie;O===u?(J="%x",ie=16):(J="%d",ie=10);for(let W=0;W<j;W+=1)W>0&&(J+="."),he=R.string[W],he>=97&&he<=122?(Q=he-32,J+=`${Q.toString(ie)}/${he.toString(ie)}`.toUpperCase()):he>=65&&he<=90?(Q=he,he+=32,J+=`${Q.toString(ie)}/${he.toString(ie)}`.toUpperCase()):J+=he.toString(ie).toUpperCase();j<R.string.length&&(J+=te)}else{J='"';for(let Q=0;Q<j;Q+=1)J+=e.asciiChars[R.string[Q]];j<R.string.length&&(J+=te),J+='"'}}return J},c=function(O,R,J,j,Q){if(j===0)return"";let he="",ie=Q?",":"";switch(O){case u:he=ie+e.charsToHex(R,J,j);break;case v:if(Q)return`,${e.charsToDec(R,J,j)}`;he=ie+e.charsToDec(R,J,j);break;case E:he=e.charsToUnicode(R,J,j);break;case w:default:he=e.charsToAsciiHtml(R,J,j);break}return he},g=function(O,R,J,j,Q,he){let ie="",W,le,Z,oe,$=L,re=`<span class="${t.CLASS_LOOKBEHIND}">`,ce=`<span class="${t.CLASS_REMAINDER}">`,Ue="</span>",me=!1;switch(J){case i.EMPTY:ie+=S;case i.NOMATCH:case i.MATCH:case i.ACTIVE:W=j-Q,le=he-W,Z=he,oe=R.length-Z;break;default:throw new Error("unrecognized state")}return $=L,le>M?(le=M,$=te,oe=0):le+oe>M&&($=te,oe=M-le),le>0&&(ie+=re,ie+=c(O,R,W,le,me),ie+=Ue,me=!0),oe>0&&(ie+=ce,ie+=c(O,R,Z,oe,me),ie+=Ue),ie+$},G=function(O,R,J,j,Q,he){let ie="",W,le,Z,oe,$=L,re=`<span class="${t.CLASS_REMAINDER}">`,ce="</span>",Ue=!1;switch(J){case i.EMPTY:ie+=S;case i.NOMATCH:case i.ACTIVE:W=j,le=0,Z=j,oe=R.length-Z;break;case i.MATCH:W=j,le=Q,Z=j+le,oe=R.length-Z;break;default:throw new Error("unrecognized state")}return $=L,le>M?(le=M,$=te,oe=0):le+oe>M&&($=te,oe=M-le),le>0&&(ie+=he,ie+=c(O,R,W,le,Ue),ie+=ce,Ue=!0),oe>0&&(ie+=re,ie+=c(O,R,Z,oe,Ue),ie+=ce),ie+$},A=function(O,R,J,j,Q){let he=`<span class="${t.CLASS_LOOKAHEAD}">`;return G(O,R,J,j,Q,he)},U=function(O,R,J,j,Q){let he=`<span class="${t.CLASS_MATCH}">`;return G(O,R,J,j,Q,he)},K=function(O){if(H===null)return"";let R="",J,j,Q,he,ie,W;return R+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th>",R+=`<th>operator</th><th>phrase</th></tr>
`,n.forEach(le=>{let Z=D[le];switch(J=Z.thisLine,j=Z.thatLine!==void 0?Z.thatLine:"--",Q=!1,he=!1,ie=!1,Z.lookAround===i.LOOKAROUND_AHEAD&&(Q=!0,ie=!0,W=Z.lookAnchor),(Z.opcode.type===i.AND||Z.opcode.type===i.NOT)&&(Q=!0,ie=!0,W=Z.phraseIndex),Z.lookAround===i.LOOKAROUND_BEHIND&&(he=!0,ie=!0,W=Z.lookAnchor),(Z.opcode.type===i.BKA||Z.opcode.type===i.BKN)&&(he=!0,ie=!0,W=Z.phraseIndex),R+="<tr>",R+=`<td>${J}</td><td>${j}</td>`,R+=`<td>${Z.phraseIndex}</td>`,R+=`<td>${Z.phraseLength}</td>`,R+=`<td>${Z.depth}</td>`,R+="<td>",Z.state){case i.ACTIVE:R+=`<span class="${t.CLASS_ACTIVE}">&darr;&nbsp;</span>`;break;case i.MATCH:R+=`<span class="${t.CLASS_MATCH}">&uarr;M</span>`;break;case i.NOMATCH:R+=`<span class="${t.CLASS_NOMATCH}">&uarr;N</span>`;break;case i.EMPTY:R+=`<span class="${t.CLASS_EMPTY}">&uarr;E</span>`;break;default:R+=`<span class="${t.CLASS_ACTIVE}">--</span>`;break}if(R+="</td>",R+="<td>",R+=a.indent(Z.depth),Q?R+=`<span class="${t.CLASS_LOOKAHEAD}">`:he&&(R+=`<span class="${t.CLASS_LOOKBEHIND}">`),R+=e.opcodeToString(Z.opcode.type),Z.opcode.type===i.RNM&&(R+=`(${H[Z.opcode.index].name}) `),Z.opcode.type===i.BKR){let oe=Z.opcode.bkrCase===i.BKR_MODE_CI?"%i":"%s",$=Z.opcode.bkrMode===i.BKR_MODE_UM?"%u":"%p";R+=`(\\${oe}${$}${H[Z.opcode.index].name}) `}Z.opcode.type===i.UDT&&(R+=`(${X[Z.opcode.index].name}) `),Z.opcode.type===i.TRG&&(R+=`(${b(O,Z.opcode)}) `),Z.opcode.type===i.TBS&&(R+=`(${x(O,Z.opcode)}) `),Z.opcode.type===i.TLS&&(R+=`(${_(O,Z.opcode)}) `),Z.opcode.type===i.REP&&(R+=`(${p(O,Z.opcode)}) `),ie&&(R+="</span>"),R+="</td>",R+="<td>",he?R+=g(O,Y,Z.state,Z.phraseIndex,Z.phraseLength,W):Q?R+=A(O,Y,Z.state,Z.phraseIndex,Z.phraseLength):R+=U(O,Y,Z.state,Z.phraseIndex,Z.phraseLength),R+=`</td></tr>
`}),R+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th>",R+=`<th>operator</th><th>phrase</th></tr>
`,R+=`</table>
`,R};this.toHtml=function(O,R){let J=w;if(typeof O=="string"&&O.length>=3){let Q=O.toLowerCase().slice(0,3);Q==="hex"?J=u:Q==="dec"?J=v:Q==="uni"&&(J=E)}let j="";return j+=l(J,R),j+=K(J),j+=m(),j}}});var _o=de((JP,E2)=>{E2.exports={ast:p2(),circular:Yl(),ids:dn(),parser:v2(),stats:y2(),trace:w2(),utils:Eo(),emitcss:Vl(),style:Ca()}});var M2=de((VP,_2)=>{_2.exports=function(){this.grammarObject="grammarObject",this.rules=[],this.rules[0]={name:"file",lower:"file",index:0,isBkr:!1},this.rules[1]={name:"line",lower:"line",index:1,isBkr:!1},this.rules[2]={name:"line-text",lower:"line-text",index:2,isBkr:!1},this.rules[3]={name:"last-line",lower:"last-line",index:3,isBkr:!1},this.rules[4]={name:"valid",lower:"valid",index:4,isBkr:!1},this.rules[5]={name:"invalid",lower:"invalid",index:5,isBkr:!1},this.rules[6]={name:"end",lower:"end",index:6,isBkr:!1},this.rules[7]={name:"CRLF",lower:"crlf",index:7,isBkr:!1},this.rules[8]={name:"LF",lower:"lf",index:8,isBkr:!1},this.rules[9]={name:"CR",lower:"cr",index:9,isBkr:!1},this.udts=[],this.rules[0].opcodes=[],this.rules[0].opcodes[0]={type:2,children:[1,3]},this.rules[0].opcodes[1]={type:3,min:0,max:1/0},this.rules[0].opcodes[2]={type:4,index:1},this.rules[0].opcodes[3]={type:3,min:0,max:1},this.rules[0].opcodes[4]={type:4,index:3},this.rules[1].opcodes=[],this.rules[1].opcodes[0]={type:2,children:[1,2]},this.rules[1].opcodes[1]={type:4,index:2},this.rules[1].opcodes[2]={type:4,index:6},this.rules[2].opcodes=[],this.rules[2].opcodes[0]={type:3,min:0,max:1/0},this.rules[2].opcodes[1]={type:1,children:[2,3]},this.rules[2].opcodes[2]={type:4,index:4},this.rules[2].opcodes[3]={type:4,index:5},this.rules[3].opcodes=[],this.rules[3].opcodes[0]={type:3,min:1,max:1/0},this.rules[3].opcodes[1]={type:1,children:[2,3]},this.rules[3].opcodes[2]={type:4,index:4},this.rules[3].opcodes[3]={type:4,index:5},this.rules[4].opcodes=[],this.rules[4].opcodes[0]={type:1,children:[1,2]},this.rules[4].opcodes[1]={type:5,min:32,max:126},this.rules[4].opcodes[2]={type:6,string:[9]},this.rules[5].opcodes=[],this.rules[5].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[5].opcodes[1]={type:5,min:0,max:8},this.rules[5].opcodes[2]={type:5,min:11,max:12},this.rules[5].opcodes[3]={type:5,min:14,max:31},this.rules[5].opcodes[4]={type:5,min:127,max:4294967295},this.rules[6].opcodes=[],this.rules[6].opcodes[0]={type:1,children:[1,2,3]},this.rules[6].opcodes[1]={type:4,index:7},this.rules[6].opcodes[2]={type:4,index:8},this.rules[6].opcodes[3]={type:4,index:9},this.rules[7].opcodes=[],this.rules[7].opcodes[0]={type:6,string:[13,10]},this.rules[8].opcodes=[],this.rules[8].opcodes[0]={type:6,string:[10]},this.rules[9].opcodes=[],this.rules[9].opcodes[0]={type:6,string:[13]},this.toString=function(){let t="";return t+=`file = *line [last-line]
`,t+=`line = line-text end
`,t+=`line-text = *(valid/invalid)
`,t+=`last-line = 1*(valid/invalid)
`,t+=`valid = %d32-126 / %d9
`,t+=`invalid = %d0-8 / %d11-12 /%d14-31 / %x7f-ffffffff
`,t+=`end = CRLF / LF / CR
`,t+=`CRLF = %d13.10
`,t+=`LF = %d10
`,t+=`CR = %d13
`,t}}});var A2=de(S2=>{var Wt=dn(),s7=Eo();function a7(r,e,t,n,i){return r===Wt.SEM_PRE?(i.endLength=0,i.textLength=0,i.invalidCount=0):i.lines.push({lineNo:i.lines.length,beginChar:t,length:n,textLength:i.textLength,endType:i.endType,invalidChars:i.invalidCount}),Wt.SEM_OK}function f7(r,e,t,n,i){return r===Wt.SEM_PRE&&(i.textLength=n),Wt.SEM_OK}function c7(r,e,t,n,i){return r===Wt.SEM_PRE?(i.endLength=0,i.textLength=0,i.invalidCount=0):i.strict?(i.lines.push({lineNo:i.lines.length,beginChar:t,length:n,textLength:n,endType:"none",invalidChars:i.invalidCount}),i.errors.push({line:i.lineNo,char:t+n,msg:"no line end on last line - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})):(e.push(10),i.lines.push({lineNo:i.lines.length,beginChar:t,length:n+1,textLength:n,endType:"LF",invalidChars:i.invalidCount})),Wt.SEM_OK}function u7(r,e,t,n,i){return r===Wt.SEM_PRE&&i.errors.push({line:i.lineNo,char:t,msg:`invalid character found '\\x${s7.charToHex(e[t])}'`}),Wt.SEM_OK}function h7(r,e,t,n,i){return r===Wt.SEM_POST&&(i.lineNo+=1),Wt.SEM_OK}function l7(r,e,t,n,i){return r===Wt.SEM_PRE&&(i.endType="LF",i.strict&&i.errors.push({line:i.lineNo,char:t,msg:"line end character LF(\\n, \\x0A) - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})),Wt.SEM_OK}function d7(r,e,t,n,i){return r===Wt.SEM_PRE&&(i.endType="CR",i.strict&&i.errors.push({line:i.lineNo,char:t,msg:"line end character CR(\\r, \\x0D) - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})),Wt.SEM_OK}function p7(r,e,t,n,i){return r===Wt.SEM_PRE&&(i.endType="CRLF"),Wt.SEM_OK}var ri=[];ri.line=a7;ri["line-text"]=f7;ri["last-line"]=c7;ri.invalid=u7;ri.end=h7;ri.lf=l7;ri.cr=d7;ri.crlf=p7;S2.callbacks=ri});var k2=de((YP,T2)=>{T2.exports=function(e,t,n,i){let s="scanner.js: ",a=_o(),u=new(M2()),{callbacks:v}=A2(),w=[],E=new a.parser;if(E.ast=new a.ast,E.ast.callbacks=v,i){if(i.traceObject!=="traceObject")throw new TypeError(`${s}trace argument is not a trace object`);E.trace=i}if(E.parse(u,"file",e).success!==!0){t.push({line:0,char:0,msg:"syntax analysis error analyzing input SABNF grammar"});return}let k={lines:w,lineNo:0,errors:t,strict:!!n};return E.ast.translate(k),w}});var D2=de((XP,C2)=>{C2.exports=function(){let e="syntax-callbacks.js: ",t=_o(),n=t.ids,i,s=function(_,c,g,G){switch(_.state){case n.ACTIVE:G.altStack=[],G.repCount=0;break;case n.EMPTY:G.errors.push({line:0,char:0,msg:"grammar file is empty"});break;case n.MATCH:G.ruleCount===0&&G.errors.push({line:0,char:0,msg:"no rules defined"});break;case n.NOMATCH:throw new Error(`${e}synFile: grammar file NOMATCH: design error: should never happen.`);default:throw new Error(`${e}synFile: unrecognized case.`)}},a=function(x,_,c,g){switch(x.state){case n.ACTIVE:g.altStack.length=0,i={groupOpen:null,groupError:!1,optionOpen:null,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},g.altStack.push(i);break;case n.EMPTY:throw new Error(`${e}synRule: EMPTY: rule cannot be empty`);case n.NOMATCH:break;case n.MATCH:g.ruleCount+=1;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},u=function(x,_,c,g){switch(x.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:g.errors.push({line:g.findLine(g.lines,c,g.charsLength),char:c,msg:"Unrecognized SABNF line. Invalid rule, comment or blank line."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},v=function(x,_,c,g){switch(x.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:g.errors.push({line:g.findLine(g.lines,c,g.charsLength),char:c,msg:"Rule names must be alphanum and begin with alphabetic character."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},w=function(x,_,c,g){switch(x.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:g.errors.push({line:g.findLine(g.lines,c,g.charsLength),char:c,msg:"Expected '=' or '=/'. Not found."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},E=function(x,_,c,g){switch(x.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:g.strict&&g.errors.push({line:g.findLine(g.lines,c,g.charsLength),char:c,msg:"AND operator(&) found - strict ABNF specified."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},M=function(x,_,c,g){switch(x.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:g.strict&&g.errors.push({line:g.findLine(g.lines,c,g.charsLength),char:c,msg:"NOT operator(!) found - strict ABNF specified."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},k=function(x,_,c,g){switch(x.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:g.strict&&g.errors.push({line:g.findLine(g.lines,c,g.charsLength),char:c,msg:"Positive look-behind operator(&&) found - strict ABNF specified."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},D=function(x,_,c,g){switch(x.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:g.strict&&g.errors.push({line:g.findLine(g.lines,c,g.charsLength),char:c,msg:"Negative look-behind operator(!!) found - strict ABNF specified."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},T=function(x,_,c,g){switch(x.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:g.strict&&g.errors.push({line:g.findLine(g.lines,c,g.charsLength),char:c,msg:"Beginning of string anchor(%^) found - strict ABNF specified."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},C=function(x,_,c,g){switch(x.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:g.strict&&g.errors.push({line:g.findLine(g.lines,c,g.charsLength),char:c,msg:"End of string anchor(%$) found - strict ABNF specified."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},z=function(x,_,c,g){switch(x.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:if(g.strict){let G=t.utils.charsToString(_,c,x.phraseLength);g.errors.push({line:g.findLine(g.lines,c,g.charsLength),char:c,msg:`Back reference operator(${G}) found - strict ABNF specified.`})}break;default:throw new Error(`${e}synFile: unrecognized case.`)}},I=function(x,_,c,g){switch(x.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:if(g.strict){let G=t.utils.charsToString(_,c,x.phraseLength);g.errors.push({line:g.findLine(g.lines,c,g.charsLength),char:c,msg:`UDT operator found(${G}) - strict ABNF specified.`})}break;default:throw new Error(`${e}synFile: unrecognized case.`)}},q=function(x,_,c){switch(x.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:i.tlsOpen=c;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},Y=function(x,_,c,g){switch(x.state){case n.ACTIVE:g.stringTabChar=!1;break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:g.stringTabChar!==!1&&g.errors.push({line:g.findLine(g.lines,g.stringTabChar),char:g.stringTabChar,msg:"Tab character (\\t, x09) not allowed in literal string (see 'quoted-string' definition, RFC 7405.)"});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},H=function(x,_,c,g){switch(x.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:g.stringTabChar=c;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},X=function(x,_,c,g){switch(x.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:g.errors.push({line:g.findLine(g.lines,i.tlsOpen),char:i.tlsOpen,msg:'Case-insensitive literal string("...") opened but not closed.'}),i.basicError=!0,i.tlsOpen=null;break;case n.MATCH:i.tlsOpen=null;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},B=function(x,_,c){switch(x.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:i.clsOpen=c;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},P=function(x,_,c,g){switch(x.state){case n.ACTIVE:g.stringTabChar=!1;break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:g.stringTabChar!==!1&&g.errors.push({line:g.findLine(g.lines,g.stringTabChar),char:g.stringTabChar,msg:"Tab character (\\t, x09) not allowed in literal string."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},L=function(x,_,c,g){switch(x.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:g.errors.push({line:g.findLine(g.lines,i.clsOpen),char:i.clsOpen,msg:"Case-sensitive literal string('...') opened but not closed."}),i.clsOpen=null,i.basicError=!0;break;case n.MATCH:g.strict&&g.errors.push({line:g.findLine(g.lines,i.clsOpen),char:i.clsOpen,msg:"Case-sensitive string operator('...') found - strict ABNF specified."}),i.clsOpen=null;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},te=function(x,_,c){switch(x.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:i.prosValOpen=c;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},S=function(x,_,c,g){switch(x.state){case n.ACTIVE:g.stringTabChar=!1;break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:g.stringTabChar!==!1&&g.errors.push({line:g.findLine(g.lines,g.stringTabChar),char:g.stringTabChar,msg:"Tab character (\\t, x09) not allowed in prose value string."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},d=function(x,_,c,g){switch(x.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:g.errors.push({line:g.findLine(g.lines,i.prosValOpen),char:i.prosValOpen,msg:"Prose value operator(<...>) opened but not closed."}),i.basicError=!0,i.prosValOpen=null;break;case n.MATCH:g.errors.push({line:g.findLine(g.lines,i.prosValOpen),char:i.prosValOpen,msg:"Prose value operator(<...>) found. The ABNF syntax is valid, but a parser cannot be generated from this grammar."}),i.prosValOpen=null;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},y=function(x,_,c,g){switch(x.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:i={groupOpen:c,groupError:!1,optionOpen:null,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},g.altStack.push(i);break;default:throw new Error(`${e}synFile: unrecognized case.`)}},h=function(x,_,c,g){switch(x.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:g.errors.push({line:g.findLine(g.lines,i.groupOpen),char:i.groupOpen,msg:'Group "(...)" opened but not closed.'}),i=g.altStack.pop(),i.groupError=!0;break;case n.MATCH:i=g.altStack.pop();break;default:throw new Error(`${e}synFile: unrecognized case.`)}},o=function(x,_,c,g){switch(x.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:i={groupOpen:null,groupError:!1,optionOpen:c,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},g.altStack.push(i);break;default:throw new Error(`${e}synFile: unrecognized case.`)}},f=function(x,_,c,g){switch(x.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:g.errors.push({line:g.findLine(g.lines,i.optionOpen),char:i.optionOpen,msg:'Option "[...]" opened but not closed.'}),i=g.altStack.pop(),i.optionError=!0;break;case n.MATCH:i=g.altStack.pop();break;default:throw new Error(`${e}synFile: unrecognized case.`)}},l=function(x,_,c,g){switch(x.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:i.basicError===!1&&g.errors.push({line:g.findLine(g.lines,c,g.charsLength),char:c,msg:"Unrecognized SABNF element."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},m=function(x,_,c,g){switch(x.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:if(x.phraseLength===1&&g.strict){let G=_[c]===13?"CR":"LF";g.errors.push({line:g.findLine(g.lines,c,g.charsLength),char:c,msg:`Line end '${G}' found - strict ABNF specified, only CRLF allowed.`})}break;default:throw new Error(`${e}synFile: unrecognized case.`)}},b=function(x,_,c,g){switch(x.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:g.errors.push({line:g.findLine(g.lines,c,g.charsLength),char:c,msg:"Unrecognized grammar element or characters."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},p=function(x,_,c,g){switch(x.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:g.repCount+=1;break;case n.MATCH:g.repCount+=1;break;default:throw new Error(`${e}synFile: unrecognized case.`)}};this.callbacks=[],this.callbacks.andop=E,this.callbacks.basicelementerr=l,this.callbacks.clsclose=L,this.callbacks.clsopen=B,this.callbacks.clsstring=P,this.callbacks.definedaserror=w,this.callbacks.file=s,this.callbacks.groupclose=h,this.callbacks.groupopen=y,this.callbacks.lineenderror=b,this.callbacks.lineend=m,this.callbacks.notop=M,this.callbacks.optionclose=f,this.callbacks.optionopen=o,this.callbacks.prosvalclose=d,this.callbacks.prosvalopen=te,this.callbacks.prosvalstring=S,this.callbacks.repetition=p,this.callbacks.rule=a,this.callbacks.ruleerror=u,this.callbacks.rulenameerror=v,this.callbacks.stringtab=H,this.callbacks.tlsclose=X,this.callbacks.tlsopen=q,this.callbacks.tlsstring=Y,this.callbacks.udtop=I,this.callbacks.bkaop=k,this.callbacks.bknop=D,this.callbacks.bkrop=z,this.callbacks.abgop=T,this.callbacks.aenop=C}});var O2=de((ZP,I2)=>{I2.exports=function(){let e=_o(),t=e.ids,n=function(){this.names=[],this.add=function(Z){let oe=-1;return this.get(Z)===-1&&(oe={name:Z,lower:Z.toLowerCase(),index:this.names.length},this.names.push(oe)),oe},this.get=function(Z){let oe=-1,$=Z.toLowerCase();for(let re=0;re<this.names.length;re+=1)if(this.names[re].lower===$){oe=this.names[re];break}return oe}},i=function(le,Z,oe){let $=0;for(let re=Z;re<Z+oe;re+=1)$=10*$+le[re]-48;return $},s=function(le,Z,oe){let $=0;for(let re=Z;re<Z+oe;re+=1)$=2*$+le[re]-48;return $},a=function(le,Z,oe){let $=0;for(let re=Z;re<Z+oe;re+=1){let ce=le[re];if(ce>=48&&ce<=57)ce-=48;else if(ce>=65&&ce<=70)ce-=55;else if(ce>=97&&ce<=102)ce-=87;else throw new Error("hexnum out of range");$=16*$+ce}return $};function u(W,le,Z,oe,$){let re=t.SEM_OK;if(W===t.SEM_PRE)$.ruleNames=new n,$.udtNames=new n,$.rules=[],$.udts=[],$.rulesLineMap=[],$.opcodes=[],$.altStack=[],$.topStack=null,$.topRule=null;else if(W===t.SEM_POST){let ce;$.rules.forEach(Ue=>{Ue.isBkr=!1,Ue.opcodes.forEach(me=>{me.type===t.RNM&&(ce=$.ruleNames.get(me.index.name),ce===-1?($.errors.push({line:$.findLine($.lines,me.index.phraseIndex,$.charsLength),char:me.index.phraseIndex,msg:`Rule name '${me.index.name}' used but not defined.`}),me.index=-1):me.index=ce.index)})}),$.udts.forEach(Ue=>{Ue.isBkr=!1}),$.rules.forEach(Ue=>{Ue.opcodes.forEach(me=>{me.type===t.BKR&&(Ue.hasBkr=!0,ce=$.ruleNames.get(me.index.name),ce!==-1?($.rules[ce.index].isBkr=!0,me.index=ce.index):(ce=$.udtNames.get(me.index.name),ce!==-1?($.udts[ce.index].isBkr=!0,me.index=$.rules.length+ce.index):($.errors.push({line:$.findLine($.lines,me.index.phraseIndex,$.charsLength),char:me.index.phraseIndex,msg:`Back reference name '${me.index.name}' refers to undefined rule or unamed UDT.`}),me.index=-1)))})})}return re}function v(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_PRE&&($.altStack.length=0,$.topStack=null,$.rulesLineMap.push({line:$.findLine($.lines,Z,$.charsLength),char:Z})),re}function w(W,le,Z,oe,$){let re=t.SEM_OK;if(W===t.SEM_PRE)$.ruleName="",$.definedas="";else if(W===t.SEM_POST){let ce;$.definedas==="="?(ce=$.ruleNames.add($.ruleName),ce===-1?($.definedas=null,$.errors.push({line:$.findLine($.lines,Z,$.charsLength),char:Z,msg:`Rule name '${$.ruleName}' previously defined.`})):($.topRule={name:ce.name,lower:ce.lower,opcodes:[],index:ce.index},$.rules.push($.topRule),$.opcodes=$.topRule.opcodes)):(ce=$.ruleNames.get($.ruleName),ce===-1?($.definedas=null,$.errors.push({line:$.findLine($.lines,Z,$.charsLength),char:Z,msg:`Rule name '${$.ruleName}' for incremental alternate not previously defined.`})):($.topRule=$.rules[ce.index],$.opcodes=$.topRule.opcodes))}return re}function E(W,le,Z,oe,$){let re=t.SEM_OK;if(W===t.SEM_PRE)for(;;){if($.definedas===null){re=t.SEM_SKIP;break}if($.topStack===null){if($.definedas==="="){$.topStack={alt:{type:t.ALT,children:[]},cat:null},$.altStack.push($.topStack),$.opcodes.push($.topStack.alt);break}$.topStack={alt:$.opcodes[0],cat:null},$.altStack.push($.topStack);break}$.topStack={alt:{type:t.ALT,children:[]},cat:null},$.altStack.push($.topStack),$.opcodes.push($.topStack.alt);break}else W===t.SEM_POST&&($.altStack.pop(),$.altStack.length>0?$.topStack=$.altStack[$.altStack.length-1]:$.topStack=null);return re}function M(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_PRE?($.topStack.alt.children.push($.opcodes.length),$.topStack.cat={type:t.CAT,children:[]},$.opcodes.push($.topStack.cat)):W===t.SEM_POST&&($.topStack.cat=null),re}function k(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_PRE&&$.topStack.cat.children.push($.opcodes.length),re}function D(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_POST&&$.opcodes.push({type:t.REP,min:0,max:1,char:Z}),re}function T(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_PRE&&($.ruleName=e.utils.charsToString(le,Z,oe)),re}function C(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_POST&&($.definedas="="),re}function z(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_POST&&($.definedas="=/"),re}function I(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_PRE?($.min=0,$.max=1/0,$.topRep={type:t.REP,min:0,max:1/0},$.opcodes.push($.topRep)):W===t.SEM_POST&&($.min>$.max&&$.errors.push({line:$.findLine($.lines,Z,$.charsLength),char:Z,msg:`repetition min cannot be greater than max: min: ${$.min}: max: ${$.max}`}),$.topRep.min=$.min,$.topRep.max=$.max),re}function q(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_POST&&($.min=i(le,Z,oe)),re}function Y(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_POST&&($.max=i(le,Z,oe)),re}function H(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_POST&&($.max=i(le,Z,oe),$.min=$.max),re}function X(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_POST&&$.opcodes.push({type:t.AND}),re}function B(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_POST&&$.opcodes.push({type:t.NOT}),re}function P(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_POST&&$.opcodes.push({type:t.RNM,index:{phraseIndex:Z,name:e.utils.charsToString(le,Z,oe)}}),re}function L(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_POST&&$.opcodes.push({type:t.ABG}),re}function te(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_POST&&$.opcodes.push({type:t.AEN}),re}function S(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_POST&&$.opcodes.push({type:t.BKA}),re}function d(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_POST&&$.opcodes.push({type:t.BKN}),re}function y(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_PRE?($.ci=!0,$.cs=!1,$.um=!0,$.pm=!1):W===t.SEM_POST&&$.opcodes.push({type:t.BKR,bkrCase:$.cs===!0?t.BKR_MODE_CS:t.BKR_MODE_CI,bkrMode:$.pm===!0?t.BKR_MODE_PM:t.BKR_MODE_UM,index:{phraseIndex:$.bkrname.phraseIndex,name:e.utils.charsToString(le,$.bkrname.phraseIndex,$.bkrname.phraseLength)}}),re}function h(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_POST&&($.ci=!0),re}function o(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_POST&&($.cs=!0),re}function f(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_POST&&($.um=!0),re}function l(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_POST&&($.pm=!0),re}function m(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_POST&&($.bkrname={phraseIndex:Z,phraseLength:oe}),re}function b(W,le,Z,oe,$){let re=t.SEM_OK;if(W===t.SEM_POST){let ce=e.utils.charsToString(le,Z,oe),Ue=$.udtNames.add(ce);if(Ue===-1){if(Ue=$.udtNames.get(ce),Ue===-1)throw new Error("semUdtEmpty: name look up error")}else $.udts.push({name:Ue.name,lower:Ue.lower,index:Ue.index,empty:!0});$.opcodes.push({type:t.UDT,empty:!0,index:Ue.index})}return re}function p(W,le,Z,oe,$){let re=t.SEM_OK;if(W===t.SEM_POST){let ce=e.utils.charsToString(le,Z,oe),Ue=$.udtNames.add(ce);if(Ue===-1){if(Ue=$.udtNames.get(ce),Ue===-1)throw new Error("semUdtNonEmpty: name look up error")}else $.udts.push({name:Ue.name,lower:Ue.lower,index:Ue.index,empty:!1});$.opcodes.push({type:t.UDT,empty:!1,index:Ue.index,syntax:null,semantic:null})}return re}function x(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_PRE&&($.tlscase=!0),re}function _(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_POST&&oe>0&&(le[Z+1]===83||le[Z+1]===115)&&($.tlscase=!1),re}function c(W,le,Z,oe,$){let re=t.SEM_OK;if(W===t.SEM_POST)if($.tlscase){let ce=le.slice(Z,Z+oe);for(let Ue=0;Ue<ce.length;Ue+=1)ce[Ue]>=65&&ce[Ue]<=90&&(ce[Ue]+=32);$.opcodes.push({type:t.TLS,string:ce})}else $.opcodes.push({type:t.TBS,string:le.slice(Z,Z+oe)});return re}function g(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_POST&&(oe<=2?$.opcodes.push({type:t.TLS,string:[]}):$.opcodes.push({type:t.TBS,string:le.slice(Z+1,Z+oe-1)})),re}function G(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_PRE?$.tbsstr=[]:W===t.SEM_POST&&$.opcodes.push({type:t.TBS,string:$.tbsstr}),re}function A(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_PRE?($.min=0,$.max=0):W===t.SEM_POST&&($.min>$.max&&$.errors.push({line:$.findLine($.lines,Z,$.charsLength),char:Z,msg:`TRG, (%dmin-max), min cannot be greater than max: min: ${$.min}: max: ${$.max}`}),$.opcodes.push({type:t.TRG,min:$.min,max:$.max})),re}function U(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_POST&&($.min=i(le,Z,oe)),re}function K(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_POST&&($.max=i(le,Z,oe)),re}function O(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_POST&&($.min=s(le,Z,oe)),re}function R(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_POST&&($.max=s(le,Z,oe)),re}function J(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_POST&&($.min=a(le,Z,oe)),re}function j(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_POST&&($.max=a(le,Z,oe)),re}function Q(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_POST&&$.tbsstr.push(i(le,Z,oe)),re}function he(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_POST&&$.tbsstr.push(s(le,Z,oe)),re}function ie(W,le,Z,oe,$){let re=t.SEM_OK;return W===t.SEM_POST&&$.tbsstr.push(a(le,Z,oe)),re}this.callbacks=[],this.callbacks.abgop=L,this.callbacks.aenop=te,this.callbacks.alternation=E,this.callbacks.andop=X,this.callbacks.bmax=R,this.callbacks.bmin=O,this.callbacks.bkaop=S,this.callbacks.bknop=d,this.callbacks.bkrop=y,this.callbacks["bkr-name"]=m,this.callbacks.bstring=he,this.callbacks.clsop=g,this.callbacks.ci=h,this.callbacks.cs=o,this.callbacks.um=f,this.callbacks.pm=l,this.callbacks.concatenation=M,this.callbacks.defined=C,this.callbacks.dmax=K,this.callbacks.dmin=U,this.callbacks.dstring=Q,this.callbacks.file=u,this.callbacks.incalt=z,this.callbacks.notop=B,this.callbacks.optionopen=D,this.callbacks["rep-max"]=Y,this.callbacks["rep-min"]=q,this.callbacks["rep-min-max"]=H,this.callbacks.repetition=k,this.callbacks.repop=I,this.callbacks.rnmop=P,this.callbacks.rule=v,this.callbacks.rulelookup=w,this.callbacks.rulename=T,this.callbacks.tbsop=G,this.callbacks.tlscase=_,this.callbacks.tlsstring=c,this.callbacks.tlsop=x,this.callbacks.trgop=A,this.callbacks["udt-empty"]=b,this.callbacks["udt-non-empty"]=p,this.callbacks.xmax=j,this.callbacks.xmin=J,this.callbacks.xstring=ie}});var N2=de((QP,R2)=>{R2.exports=function(){this.grammarObject="grammarObject",this.rules=[],this.rules[0]={name:"File",lower:"file",index:0,isBkr:!1},this.rules[1]={name:"BlankLine",lower:"blankline",index:1,isBkr:!1},this.rules[2]={name:"Rule",lower:"rule",index:2,isBkr:!1},this.rules[3]={name:"RuleLookup",lower:"rulelookup",index:3,isBkr:!1},this.rules[4]={name:"RuleNameTest",lower:"rulenametest",index:4,isBkr:!1},this.rules[5]={name:"RuleName",lower:"rulename",index:5,isBkr:!1},this.rules[6]={name:"RuleNameError",lower:"rulenameerror",index:6,isBkr:!1},this.rules[7]={name:"DefinedAsTest",lower:"definedastest",index:7,isBkr:!1},this.rules[8]={name:"DefinedAsError",lower:"definedaserror",index:8,isBkr:!1},this.rules[9]={name:"DefinedAs",lower:"definedas",index:9,isBkr:!1},this.rules[10]={name:"Defined",lower:"defined",index:10,isBkr:!1},this.rules[11]={name:"IncAlt",lower:"incalt",index:11,isBkr:!1},this.rules[12]={name:"RuleError",lower:"ruleerror",index:12,isBkr:!1},this.rules[13]={name:"LineEndError",lower:"lineenderror",index:13,isBkr:!1},this.rules[14]={name:"Alternation",lower:"alternation",index:14,isBkr:!1},this.rules[15]={name:"Concatenation",lower:"concatenation",index:15,isBkr:!1},this.rules[16]={name:"Repetition",lower:"repetition",index:16,isBkr:!1},this.rules[17]={name:"Modifier",lower:"modifier",index:17,isBkr:!1},this.rules[18]={name:"Predicate",lower:"predicate",index:18,isBkr:!1},this.rules[19]={name:"BasicElement",lower:"basicelement",index:19,isBkr:!1},this.rules[20]={name:"BasicElementErr",lower:"basicelementerr",index:20,isBkr:!1},this.rules[21]={name:"Group",lower:"group",index:21,isBkr:!1},this.rules[22]={name:"GroupError",lower:"grouperror",index:22,isBkr:!1},this.rules[23]={name:"GroupOpen",lower:"groupopen",index:23,isBkr:!1},this.rules[24]={name:"GroupClose",lower:"groupclose",index:24,isBkr:!1},this.rules[25]={name:"Option",lower:"option",index:25,isBkr:!1},this.rules[26]={name:"OptionError",lower:"optionerror",index:26,isBkr:!1},this.rules[27]={name:"OptionOpen",lower:"optionopen",index:27,isBkr:!1},this.rules[28]={name:"OptionClose",lower:"optionclose",index:28,isBkr:!1},this.rules[29]={name:"RnmOp",lower:"rnmop",index:29,isBkr:!1},this.rules[30]={name:"BkrOp",lower:"bkrop",index:30,isBkr:!1},this.rules[31]={name:"bkrModifier",lower:"bkrmodifier",index:31,isBkr:!1},this.rules[32]={name:"cs",lower:"cs",index:32,isBkr:!1},this.rules[33]={name:"ci",lower:"ci",index:33,isBkr:!1},this.rules[34]={name:"um",lower:"um",index:34,isBkr:!1},this.rules[35]={name:"pm",lower:"pm",index:35,isBkr:!1},this.rules[36]={name:"bkr-name",lower:"bkr-name",index:36,isBkr:!1},this.rules[37]={name:"rname",lower:"rname",index:37,isBkr:!1},this.rules[38]={name:"uname",lower:"uname",index:38,isBkr:!1},this.rules[39]={name:"ename",lower:"ename",index:39,isBkr:!1},this.rules[40]={name:"UdtOp",lower:"udtop",index:40,isBkr:!1},this.rules[41]={name:"udt-non-empty",lower:"udt-non-empty",index:41,isBkr:!1},this.rules[42]={name:"udt-empty",lower:"udt-empty",index:42,isBkr:!1},this.rules[43]={name:"RepOp",lower:"repop",index:43,isBkr:!1},this.rules[44]={name:"AltOp",lower:"altop",index:44,isBkr:!1},this.rules[45]={name:"CatOp",lower:"catop",index:45,isBkr:!1},this.rules[46]={name:"StarOp",lower:"starop",index:46,isBkr:!1},this.rules[47]={name:"AndOp",lower:"andop",index:47,isBkr:!1},this.rules[48]={name:"NotOp",lower:"notop",index:48,isBkr:!1},this.rules[49]={name:"BkaOp",lower:"bkaop",index:49,isBkr:!1},this.rules[50]={name:"BknOp",lower:"bknop",index:50,isBkr:!1},this.rules[51]={name:"AbgOp",lower:"abgop",index:51,isBkr:!1},this.rules[52]={name:"AenOp",lower:"aenop",index:52,isBkr:!1},this.rules[53]={name:"TrgOp",lower:"trgop",index:53,isBkr:!1},this.rules[54]={name:"TbsOp",lower:"tbsop",index:54,isBkr:!1},this.rules[55]={name:"TlsOp",lower:"tlsop",index:55,isBkr:!1},this.rules[56]={name:"TlsCase",lower:"tlscase",index:56,isBkr:!1},this.rules[57]={name:"TlsOpen",lower:"tlsopen",index:57,isBkr:!1},this.rules[58]={name:"TlsClose",lower:"tlsclose",index:58,isBkr:!1},this.rules[59]={name:"TlsString",lower:"tlsstring",index:59,isBkr:!1},this.rules[60]={name:"StringTab",lower:"stringtab",index:60,isBkr:!1},this.rules[61]={name:"ClsOp",lower:"clsop",index:61,isBkr:!1},this.rules[62]={name:"ClsOpen",lower:"clsopen",index:62,isBkr:!1},this.rules[63]={name:"ClsClose",lower:"clsclose",index:63,isBkr:!1},this.rules[64]={name:"ClsString",lower:"clsstring",index:64,isBkr:!1},this.rules[65]={name:"ProsVal",lower:"prosval",index:65,isBkr:!1},this.rules[66]={name:"ProsValOpen",lower:"prosvalopen",index:66,isBkr:!1},this.rules[67]={name:"ProsValString",lower:"prosvalstring",index:67,isBkr:!1},this.rules[68]={name:"ProsValClose",lower:"prosvalclose",index:68,isBkr:!1},this.rules[69]={name:"rep-min",lower:"rep-min",index:69,isBkr:!1},this.rules[70]={name:"rep-min-max",lower:"rep-min-max",index:70,isBkr:!1},this.rules[71]={name:"rep-max",lower:"rep-max",index:71,isBkr:!1},this.rules[72]={name:"rep-num",lower:"rep-num",index:72,isBkr:!1},this.rules[73]={name:"dString",lower:"dstring",index:73,isBkr:!1},this.rules[74]={name:"xString",lower:"xstring",index:74,isBkr:!1},this.rules[75]={name:"bString",lower:"bstring",index:75,isBkr:!1},this.rules[76]={name:"Dec",lower:"dec",index:76,isBkr:!1},this.rules[77]={name:"Hex",lower:"hex",index:77,isBkr:!1},this.rules[78]={name:"Bin",lower:"bin",index:78,isBkr:!1},this.rules[79]={name:"dmin",lower:"dmin",index:79,isBkr:!1},this.rules[80]={name:"dmax",lower:"dmax",index:80,isBkr:!1},this.rules[81]={name:"bmin",lower:"bmin",index:81,isBkr:!1},this.rules[82]={name:"bmax",lower:"bmax",index:82,isBkr:!1},this.rules[83]={name:"xmin",lower:"xmin",index:83,isBkr:!1},this.rules[84]={name:"xmax",lower:"xmax",index:84,isBkr:!1},this.rules[85]={name:"dnum",lower:"dnum",index:85,isBkr:!1},this.rules[86]={name:"bnum",lower:"bnum",index:86,isBkr:!1},this.rules[87]={name:"xnum",lower:"xnum",index:87,isBkr:!1},this.rules[88]={name:"alphanum",lower:"alphanum",index:88,isBkr:!1},this.rules[89]={name:"owsp",lower:"owsp",index:89,isBkr:!1},this.rules[90]={name:"wsp",lower:"wsp",index:90,isBkr:!1},this.rules[91]={name:"space",lower:"space",index:91,isBkr:!1},this.rules[92]={name:"comment",lower:"comment",index:92,isBkr:!1},this.rules[93]={name:"LineEnd",lower:"lineend",index:93,isBkr:!1},this.rules[94]={name:"LineContinue",lower:"linecontinue",index:94,isBkr:!1},this.udts=[],this.rules[0].opcodes=[],this.rules[0].opcodes[0]={type:3,min:0,max:1/0},this.rules[0].opcodes[1]={type:1,children:[2,3,4]},this.rules[0].opcodes[2]={type:4,index:1},this.rules[0].opcodes[3]={type:4,index:2},this.rules[0].opcodes[4]={type:4,index:12},this.rules[1].opcodes=[],this.rules[1].opcodes[0]={type:2,children:[1,5,7]},this.rules[1].opcodes[1]={type:3,min:0,max:1/0},this.rules[1].opcodes[2]={type:1,children:[3,4]},this.rules[1].opcodes[3]={type:6,string:[32]},this.rules[1].opcodes[4]={type:6,string:[9]},this.rules[1].opcodes[5]={type:3,min:0,max:1},this.rules[1].opcodes[6]={type:4,index:92},this.rules[1].opcodes[7]={type:4,index:93},this.rules[2].opcodes=[],this.rules[2].opcodes[0]={type:2,children:[1,2,3,4]},this.rules[2].opcodes[1]={type:4,index:3},this.rules[2].opcodes[2]={type:4,index:89},this.rules[2].opcodes[3]={type:4,index:14},this.rules[2].opcodes[4]={type:1,children:[5,8]},this.rules[2].opcodes[5]={type:2,children:[6,7]},this.rules[2].opcodes[6]={type:4,index:89},this.rules[2].opcodes[7]={type:4,index:93},this.rules[2].opcodes[8]={type:2,children:[9,10]},this.rules[2].opcodes[9]={type:4,index:13},this.rules[2].opcodes[10]={type:4,index:93},this.rules[3].opcodes=[],this.rules[3].opcodes[0]={type:2,children:[1,2,3]},this.rules[3].opcodes[1]={type:4,index:4},this.rules[3].opcodes[2]={type:4,index:89},this.rules[3].opcodes[3]={type:4,index:7},this.rules[4].opcodes=[],this.rules[4].opcodes[0]={type:1,children:[1,2]},this.rules[4].opcodes[1]={type:4,index:5},this.rules[4].opcodes[2]={type:4,index:6},this.rules[5].opcodes=[],this.rules[5].opcodes[0]={type:4,index:88},this.rules[6].opcodes=[],this.rules[6].opcodes[0]={type:3,min:1,max:1/0},this.rules[6].opcodes[1]={type:1,children:[2,3]},this.rules[6].opcodes[2]={type:5,min:33,max:60},this.rules[6].opcodes[3]={type:5,min:62,max:126},this.rules[7].opcodes=[],this.rules[7].opcodes[0]={type:1,children:[1,2]},this.rules[7].opcodes[1]={type:4,index:9},this.rules[7].opcodes[2]={type:4,index:8},this.rules[8].opcodes=[],this.rules[8].opcodes[0]={type:3,min:1,max:2},this.rules[8].opcodes[1]={type:5,min:33,max:126},this.rules[9].opcodes=[],this.rules[9].opcodes[0]={type:1,children:[1,2]},this.rules[9].opcodes[1]={type:4,index:11},this.rules[9].opcodes[2]={type:4,index:10},this.rules[10].opcodes=[],this.rules[10].opcodes[0]={type:6,string:[61]},this.rules[11].opcodes=[],this.rules[11].opcodes[0]={type:6,string:[61,47]},this.rules[12].opcodes=[],this.rules[12].opcodes[0]={type:2,children:[1,6]},this.rules[12].opcodes[1]={type:3,min:1,max:1/0},this.rules[12].opcodes[2]={type:1,children:[3,4,5]},this.rules[12].opcodes[3]={type:5,min:32,max:126},this.rules[12].opcodes[4]={type:6,string:[9]},this.rules[12].opcodes[5]={type:4,index:94},this.rules[12].opcodes[6]={type:4,index:93},this.rules[13].opcodes=[],this.rules[13].opcodes[0]={type:3,min:1,max:1/0},this.rules[13].opcodes[1]={type:1,children:[2,3,4]},this.rules[13].opcodes[2]={type:5,min:32,max:126},this.rules[13].opcodes[3]={type:6,string:[9]},this.rules[13].opcodes[4]={type:4,index:94},this.rules[14].opcodes=[],this.rules[14].opcodes[0]={type:2,children:[1,2]},this.rules[14].opcodes[1]={type:4,index:15},this.rules[14].opcodes[2]={type:3,min:0,max:1/0},this.rules[14].opcodes[3]={type:2,children:[4,5,6]},this.rules[14].opcodes[4]={type:4,index:89},this.rules[14].opcodes[5]={type:4,index:44},this.rules[14].opcodes[6]={type:4,index:15},this.rules[15].opcodes=[],this.rules[15].opcodes[0]={type:2,children:[1,2]},this.rules[15].opcodes[1]={type:4,index:16},this.rules[15].opcodes[2]={type:3,min:0,max:1/0},this.rules[15].opcodes[3]={type:2,children:[4,5]},this.rules[15].opcodes[4]={type:4,index:45},this.rules[15].opcodes[5]={type:4,index:16},this.rules[16].opcodes=[],this.rules[16].opcodes[0]={type:2,children:[1,3]},this.rules[16].opcodes[1]={type:3,min:0,max:1},this.rules[16].opcodes[2]={type:4,index:17},this.rules[16].opcodes[3]={type:1,children:[4,5,6,7]},this.rules[16].opcodes[4]={type:4,index:21},this.rules[16].opcodes[5]={type:4,index:25},this.rules[16].opcodes[6]={type:4,index:19},this.rules[16].opcodes[7]={type:4,index:20},this.rules[17].opcodes=[],this.rules[17].opcodes[0]={type:1,children:[1,5]},this.rules[17].opcodes[1]={type:2,children:[2,3]},this.rules[17].opcodes[2]={type:4,index:18},this.rules[17].opcodes[3]={type:3,min:0,max:1},this.rules[17].opcodes[4]={type:4,index:43},this.rules[17].opcodes[5]={type:4,index:43},this.rules[18].opcodes=[],this.rules[18].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[18].opcodes[1]={type:4,index:49},this.rules[18].opcodes[2]={type:4,index:50},this.rules[18].opcodes[3]={type:4,index:47},this.rules[18].opcodes[4]={type:4,index:48},this.rules[19].opcodes=[],this.rules[19].opcodes[0]={type:1,children:[1,2,3,4,5,6,7,8,9,10]},this.rules[19].opcodes[1]={type:4,index:40},this.rules[19].opcodes[2]={type:4,index:29},this.rules[19].opcodes[3]={type:4,index:53},this.rules[19].opcodes[4]={type:4,index:54},this.rules[19].opcodes[5]={type:4,index:55},this.rules[19].opcodes[6]={type:4,index:61},this.rules[19].opcodes[7]={type:4,index:30},this.rules[19].opcodes[8]={type:4,index:51},this.rules[19].opcodes[9]={type:4,index:52},this.rules[19].opcodes[10]={type:4,index:65},this.rules[20].opcodes=[],this.rules[20].opcodes[0]={type:3,min:1,max:1/0},this.rules[20].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[20].opcodes[2]={type:5,min:33,max:40},this.rules[20].opcodes[3]={type:5,min:42,max:46},this.rules[20].opcodes[4]={type:5,min:48,max:92},this.rules[20].opcodes[5]={type:5,min:94,max:126},this.rules[21].opcodes=[],this.rules[21].opcodes[0]={type:2,children:[1,2,3]},this.rules[21].opcodes[1]={type:4,index:23},this.rules[21].opcodes[2]={type:4,index:14},this.rules[21].opcodes[3]={type:1,children:[4,5]},this.rules[21].opcodes[4]={type:4,index:24},this.rules[21].opcodes[5]={type:4,index:22},this.rules[22].opcodes=[],this.rules[22].opcodes[0]={type:3,min:1,max:1/0},this.rules[22].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[22].opcodes[2]={type:5,min:33,max:40},this.rules[22].opcodes[3]={type:5,min:42,max:46},this.rules[22].opcodes[4]={type:5,min:48,max:92},this.rules[22].opcodes[5]={type:5,min:94,max:126},this.rules[23].opcodes=[],this.rules[23].opcodes[0]={type:2,children:[1,2]},this.rules[23].opcodes[1]={type:6,string:[40]},this.rules[23].opcodes[2]={type:4,index:89},this.rules[24].opcodes=[],this.rules[24].opcodes[0]={type:2,children:[1,2]},this.rules[24].opcodes[1]={type:4,index:89},this.rules[24].opcodes[2]={type:6,string:[41]},this.rules[25].opcodes=[],this.rules[25].opcodes[0]={type:2,children:[1,2,3]},this.rules[25].opcodes[1]={type:4,index:27},this.rules[25].opcodes[2]={type:4,index:14},this.rules[25].opcodes[3]={type:1,children:[4,5]},this.rules[25].opcodes[4]={type:4,index:28},this.rules[25].opcodes[5]={type:4,index:26},this.rules[26].opcodes=[],this.rules[26].opcodes[0]={type:3,min:1,max:1/0},this.rules[26].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[26].opcodes[2]={type:5,min:33,max:40},this.rules[26].opcodes[3]={type:5,min:42,max:46},this.rules[26].opcodes[4]={type:5,min:48,max:92},this.rules[26].opcodes[5]={type:5,min:94,max:126},this.rules[27].opcodes=[],this.rules[27].opcodes[0]={type:2,children:[1,2]},this.rules[27].opcodes[1]={type:6,string:[91]},this.rules[27].opcodes[2]={type:4,index:89},this.rules[28].opcodes=[],this.rules[28].opcodes[0]={type:2,children:[1,2]},this.rules[28].opcodes[1]={type:4,index:89},this.rules[28].opcodes[2]={type:6,string:[93]},this.rules[29].opcodes=[],this.rules[29].opcodes[0]={type:4,index:88},this.rules[30].opcodes=[],this.rules[30].opcodes[0]={type:2,children:[1,2,4]},this.rules[30].opcodes[1]={type:6,string:[92]},this.rules[30].opcodes[2]={type:3,min:0,max:1},this.rules[30].opcodes[3]={type:4,index:31},this.rules[30].opcodes[4]={type:4,index:36},this.rules[31].opcodes=[],this.rules[31].opcodes[0]={type:1,children:[1,7,13,19]},this.rules[31].opcodes[1]={type:2,children:[2,3]},this.rules[31].opcodes[2]={type:4,index:32},this.rules[31].opcodes[3]={type:3,min:0,max:1},this.rules[31].opcodes[4]={type:1,children:[5,6]},this.rules[31].opcodes[5]={type:4,index:34},this.rules[31].opcodes[6]={type:4,index:35},this.rules[31].opcodes[7]={type:2,children:[8,9]},this.rules[31].opcodes[8]={type:4,index:33},this.rules[31].opcodes[9]={type:3,min:0,max:1},this.rules[31].opcodes[10]={type:1,children:[11,12]},this.rules[31].opcodes[11]={type:4,index:34},this.rules[31].opcodes[12]={type:4,index:35},this.rules[31].opcodes[13]={type:2,children:[14,15]},this.rules[31].opcodes[14]={type:4,index:34},this.rules[31].opcodes[15]={type:3,min:0,max:1},this.rules[31].opcodes[16]={type:1,children:[17,18]},this.rules[31].opcodes[17]={type:4,index:32},this.rules[31].opcodes[18]={type:4,index:33},this.rules[31].opcodes[19]={type:2,children:[20,21]},this.rules[31].opcodes[20]={type:4,index:35},this.rules[31].opcodes[21]={type:3,min:0,max:1},this.rules[31].opcodes[22]={type:1,children:[23,24]},this.rules[31].opcodes[23]={type:4,index:32},this.rules[31].opcodes[24]={type:4,index:33},this.rules[32].opcodes=[],this.rules[32].opcodes[0]={type:6,string:[37,115]},this.rules[33].opcodes=[],this.rules[33].opcodes[0]={type:6,string:[37,105]},this.rules[34].opcodes=[],this.rules[34].opcodes[0]={type:6,string:[37,117]},this.rules[35].opcodes=[],this.rules[35].opcodes[0]={type:6,string:[37,112]},this.rules[36].opcodes=[],this.rules[36].opcodes[0]={type:1,children:[1,2,3]},this.rules[36].opcodes[1]={type:4,index:38},this.rules[36].opcodes[2]={type:4,index:39},this.rules[36].opcodes[3]={type:4,index:37},this.rules[37].opcodes=[],this.rules[37].opcodes[0]={type:4,index:88},this.rules[38].opcodes=[],this.rules[38].opcodes[0]={type:2,children:[1,2]},this.rules[38].opcodes[1]={type:6,string:[117,95]},this.rules[38].opcodes[2]={type:4,index:88},this.rules[39].opcodes=[],this.rules[39].opcodes[0]={type:2,children:[1,2]},this.rules[39].opcodes[1]={type:6,string:[101,95]},this.rules[39].opcodes[2]={type:4,index:88},this.rules[40].opcodes=[],this.rules[40].opcodes[0]={type:1,children:[1,2]},this.rules[40].opcodes[1]={type:4,index:42},this.rules[40].opcodes[2]={type:4,index:41},this.rules[41].opcodes=[],this.rules[41].opcodes[0]={type:2,children:[1,2]},this.rules[41].opcodes[1]={type:6,string:[117,95]},this.rules[41].opcodes[2]={type:4,index:88},this.rules[42].opcodes=[],this.rules[42].opcodes[0]={type:2,children:[1,2]},this.rules[42].opcodes[1]={type:6,string:[101,95]},this.rules[42].opcodes[2]={type:4,index:88},this.rules[43].opcodes=[],this.rules[43].opcodes[0]={type:1,children:[1,5,8,11,12]},this.rules[43].opcodes[1]={type:2,children:[2,3,4]},this.rules[43].opcodes[2]={type:4,index:69},this.rules[43].opcodes[3]={type:4,index:46},this.rules[43].opcodes[4]={type:4,index:71},this.rules[43].opcodes[5]={type:2,children:[6,7]},this.rules[43].opcodes[6]={type:4,index:69},this.rules[43].opcodes[7]={type:4,index:46},this.rules[43].opcodes[8]={type:2,children:[9,10]},this.rules[43].opcodes[9]={type:4,index:46},this.rules[43].opcodes[10]={type:4,index:71},this.rules[43].opcodes[11]={type:4,index:46},this.rules[43].opcodes[12]={type:4,index:70},this.rules[44].opcodes=[],this.rules[44].opcodes[0]={type:2,children:[1,2]},this.rules[44].opcodes[1]={type:6,string:[47]},this.rules[44].opcodes[2]={type:4,index:89},this.rules[45].opcodes=[],this.rules[45].opcodes[0]={type:4,index:90},this.rules[46].opcodes=[],this.rules[46].opcodes[0]={type:6,string:[42]},this.rules[47].opcodes=[],this.rules[47].opcodes[0]={type:6,string:[38]},this.rules[48].opcodes=[],this.rules[48].opcodes[0]={type:6,string:[33]},this.rules[49].opcodes=[],this.rules[49].opcodes[0]={type:6,string:[38,38]},this.rules[50].opcodes=[],this.rules[50].opcodes[0]={type:6,string:[33,33]},this.rules[51].opcodes=[],this.rules[51].opcodes[0]={type:6,string:[37,94]},this.rules[52].opcodes=[],this.rules[52].opcodes[0]={type:6,string:[37,36]},this.rules[53].opcodes=[],this.rules[53].opcodes[0]={type:2,children:[1,2]},this.rules[53].opcodes[1]={type:6,string:[37]},this.rules[53].opcodes[2]={type:1,children:[3,8,13]},this.rules[53].opcodes[3]={type:2,children:[4,5,6,7]},this.rules[53].opcodes[4]={type:4,index:76},this.rules[53].opcodes[5]={type:4,index:79},this.rules[53].opcodes[6]={type:6,string:[45]},this.rules[53].opcodes[7]={type:4,index:80},this.rules[53].opcodes[8]={type:2,children:[9,10,11,12]},this.rules[53].opcodes[9]={type:4,index:77},this.rules[53].opcodes[10]={type:4,index:83},this.rules[53].opcodes[11]={type:6,string:[45]},this.rules[53].opcodes[12]={type:4,index:84},this.rules[53].opcodes[13]={type:2,children:[14,15,16,17]},this.rules[53].opcodes[14]={type:4,index:78},this.rules[53].opcodes[15]={type:4,index:81},this.rules[53].opcodes[16]={type:6,string:[45]},this.rules[53].opcodes[17]={type:4,index:82},this.rules[54].opcodes=[],this.rules[54].opcodes[0]={type:2,children:[1,2]},this.rules[54].opcodes[1]={type:6,string:[37]},this.rules[54].opcodes[2]={type:1,children:[3,10,17]},this.rules[54].opcodes[3]={type:2,children:[4,5,6]},this.rules[54].opcodes[4]={type:4,index:76},this.rules[54].opcodes[5]={type:4,index:73},this.rules[54].opcodes[6]={type:3,min:0,max:1/0},this.rules[54].opcodes[7]={type:2,children:[8,9]},this.rules[54].opcodes[8]={type:6,string:[46]},this.rules[54].opcodes[9]={type:4,index:73},this.rules[54].opcodes[10]={type:2,children:[11,12,13]},this.rules[54].opcodes[11]={type:4,index:77},this.rules[54].opcodes[12]={type:4,index:74},this.rules[54].opcodes[13]={type:3,min:0,max:1/0},this.rules[54].opcodes[14]={type:2,children:[15,16]},this.rules[54].opcodes[15]={type:6,string:[46]},this.rules[54].opcodes[16]={type:4,index:74},this.rules[54].opcodes[17]={type:2,children:[18,19,20]},this.rules[54].opcodes[18]={type:4,index:78},this.rules[54].opcodes[19]={type:4,index:75},this.rules[54].opcodes[20]={type:3,min:0,max:1/0},this.rules[54].opcodes[21]={type:2,children:[22,23]},this.rules[54].opcodes[22]={type:6,string:[46]},this.rules[54].opcodes[23]={type:4,index:75},this.rules[55].opcodes=[],this.rules[55].opcodes[0]={type:2,children:[1,2,3,4]},this.rules[55].opcodes[1]={type:4,index:56},this.rules[55].opcodes[2]={type:4,index:57},this.rules[55].opcodes[3]={type:4,index:59},this.rules[55].opcodes[4]={type:4,index:58},this.rules[56].opcodes=[],this.rules[56].opcodes[0]={type:3,min:0,max:1},this.rules[56].opcodes[1]={type:1,children:[2,3]},this.rules[56].opcodes[2]={type:7,string:[37,105]},this.rules[56].opcodes[3]={type:7,string:[37,115]},this.rules[57].opcodes=[],this.rules[57].opcodes[0]={type:6,string:[34]},this.rules[58].opcodes=[],this.rules[58].opcodes[0]={type:6,string:[34]},this.rules[59].opcodes=[],this.rules[59].opcodes[0]={type:3,min:0,max:1/0},this.rules[59].opcodes[1]={type:1,children:[2,3,4]},this.rules[59].opcodes[2]={type:5,min:32,max:33},this.rules[59].opcodes[3]={type:5,min:35,max:126},this.rules[59].opcodes[4]={type:4,index:60},this.rules[60].opcodes=[],this.rules[60].opcodes[0]={type:6,string:[9]},this.rules[61].opcodes=[],this.rules[61].opcodes[0]={type:2,children:[1,2,3]},this.rules[61].opcodes[1]={type:4,index:62},this.rules[61].opcodes[2]={type:4,index:64},this.rules[61].opcodes[3]={type:4,index:63},this.rules[62].opcodes=[],this.rules[62].opcodes[0]={type:6,string:[39]},this.rules[63].opcodes=[],this.rules[63].opcodes[0]={type:6,string:[39]},this.rules[64].opcodes=[],this.rules[64].opcodes[0]={type:3,min:0,max:1/0},this.rules[64].opcodes[1]={type:1,children:[2,3,4]},this.rules[64].opcodes[2]={type:5,min:32,max:38},this.rules[64].opcodes[3]={type:5,min:40,max:126},this.rules[64].opcodes[4]={type:4,index:60},this.rules[65].opcodes=[],this.rules[65].opcodes[0]={type:2,children:[1,2,3]},this.rules[65].opcodes[1]={type:4,index:66},this.rules[65].opcodes[2]={type:4,index:67},this.rules[65].opcodes[3]={type:4,index:68},this.rules[66].opcodes=[],this.rules[66].opcodes[0]={type:6,string:[60]},this.rules[67].opcodes=[],this.rules[67].opcodes[0]={type:3,min:0,max:1/0},this.rules[67].opcodes[1]={type:1,children:[2,3,4]},this.rules[67].opcodes[2]={type:5,min:32,max:61},this.rules[67].opcodes[3]={type:5,min:63,max:126},this.rules[67].opcodes[4]={type:4,index:60},this.rules[68].opcodes=[],this.rules[68].opcodes[0]={type:6,string:[62]},this.rules[69].opcodes=[],this.rules[69].opcodes[0]={type:4,index:72},this.rules[70].opcodes=[],this.rules[70].opcodes[0]={type:4,index:72},this.rules[71].opcodes=[],this.rules[71].opcodes[0]={type:4,index:72},this.rules[72].opcodes=[],this.rules[72].opcodes[0]={type:3,min:1,max:1/0},this.rules[72].opcodes[1]={type:5,min:48,max:57},this.rules[73].opcodes=[],this.rules[73].opcodes[0]={type:4,index:85},this.rules[74].opcodes=[],this.rules[74].opcodes[0]={type:4,index:87},this.rules[75].opcodes=[],this.rules[75].opcodes[0]={type:4,index:86},this.rules[76].opcodes=[],this.rules[76].opcodes[0]={type:1,children:[1,2]},this.rules[76].opcodes[1]={type:6,string:[68]},this.rules[76].opcodes[2]={type:6,string:[100]},this.rules[77].opcodes=[],this.rules[77].opcodes[0]={type:1,children:[1,2]},this.rules[77].opcodes[1]={type:6,string:[88]},this.rules[77].opcodes[2]={type:6,string:[120]},this.rules[78].opcodes=[],this.rules[78].opcodes[0]={type:1,children:[1,2]},this.rules[78].opcodes[1]={type:6,string:[66]},this.rules[78].opcodes[2]={type:6,string:[98]},this.rules[79].opcodes=[],this.rules[79].opcodes[0]={type:4,index:85},this.rules[80].opcodes=[],this.rules[80].opcodes[0]={type:4,index:85},this.rules[81].opcodes=[],this.rules[81].opcodes[0]={type:4,index:86},this.rules[82].opcodes=[],this.rules[82].opcodes[0]={type:4,index:86},this.rules[83].opcodes=[],this.rules[83].opcodes[0]={type:4,index:87},this.rules[84].opcodes=[],this.rules[84].opcodes[0]={type:4,index:87},this.rules[85].opcodes=[],this.rules[85].opcodes[0]={type:3,min:1,max:1/0},this.rules[85].opcodes[1]={type:5,min:48,max:57},this.rules[86].opcodes=[],this.rules[86].opcodes[0]={type:3,min:1,max:1/0},this.rules[86].opcodes[1]={type:5,min:48,max:49},this.rules[87].opcodes=[],this.rules[87].opcodes[0]={type:3,min:1,max:1/0},this.rules[87].opcodes[1]={type:1,children:[2,3,4]},this.rules[87].opcodes[2]={type:5,min:48,max:57},this.rules[87].opcodes[3]={type:5,min:65,max:70},this.rules[87].opcodes[4]={type:5,min:97,max:102},this.rules[88].opcodes=[],this.rules[88].opcodes[0]={type:2,children:[1,4]},this.rules[88].opcodes[1]={type:1,children:[2,3]},this.rules[88].opcodes[2]={type:5,min:97,max:122},this.rules[88].opcodes[3]={type:5,min:65,max:90},this.rules[88].opcodes[4]={type:3,min:0,max:1/0},this.rules[88].opcodes[5]={type:1,children:[6,7,8,9]},this.rules[88].opcodes[6]={type:5,min:97,max:122},this.rules[88].opcodes[7]={type:5,min:65,max:90},this.rules[88].opcodes[8]={type:5,min:48,max:57},this.rules[88].opcodes[9]={type:6,string:[45]},this.rules[89].opcodes=[],this.rules[89].opcodes[0]={type:3,min:0,max:1/0},this.rules[89].opcodes[1]={type:4,index:91},this.rules[90].opcodes=[],this.rules[90].opcodes[0]={type:3,min:1,max:1/0},this.rules[90].opcodes[1]={type:4,index:91},this.rules[91].opcodes=[],this.rules[91].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[91].opcodes[1]={type:6,string:[32]},this.rules[91].opcodes[2]={type:6,string:[9]},this.rules[91].opcodes[3]={type:4,index:92},this.rules[91].opcodes[4]={type:4,index:94},this.rules[92].opcodes=[],this.rules[92].opcodes[0]={type:2,children:[1,2]},this.rules[92].opcodes[1]={type:6,string:[59]},this.rules[92].opcodes[2]={type:3,min:0,max:1/0},this.rules[92].opcodes[3]={type:1,children:[4,5]},this.rules[92].opcodes[4]={type:5,min:32,max:126},this.rules[92].opcodes[5]={type:6,string:[9]},this.rules[93].opcodes=[],this.rules[93].opcodes[0]={type:1,children:[1,2,3]},this.rules[93].opcodes[1]={type:6,string:[13,10]},this.rules[93].opcodes[2]={type:6,string:[10]},this.rules[93].opcodes[3]={type:6,string:[13]},this.rules[94].opcodes=[],this.rules[94].opcodes[0]={type:2,children:[1,5]},this.rules[94].opcodes[1]={type:1,children:[2,3,4]},this.rules[94].opcodes[2]={type:6,string:[13,10]},this.rules[94].opcodes[3]={type:6,string:[10]},this.rules[94].opcodes[4]={type:6,string:[13]},this.rules[94].opcodes[5]={type:1,children:[6,7]},this.rules[94].opcodes[6]={type:6,string:[32]},this.rules[94].opcodes[7]={type:6,string:[9]},this.toString=function(){let t="";return t+=`;
`,t+=`; ABNF for JavaScript APG 2.0 SABNF
`,t+=`; RFC 5234 with some restrictions and additions.
`,t+=`; Updated 11/24/2015 for RFC 7405 case-sensitive literal string notation
`,t+=`;  - accepts %s"string" as a case-sensitive string
`,t+=`;  - accepts %i"string" as a case-insensitive string
`,t+=`;  - accepts "string" as a case-insensitive string
`,t+=`;
`,t+=`; Some restrictions:
`,t+=`;   1. Rules must begin at first character of each line.
`,t+=`;      Indentations on first rule and rules thereafter are not allowed.
`,t+=`;   2. Relaxed line endings. CRLF, LF or CR are accepted as valid line ending.
`,t+=`;   3. Prose values, i.e. <prose value>, are accepted as valid grammar syntax.
`,t+=`;      However, a working parser cannot be generated from them.
`,t+=`;
`,t+=`; Super set (SABNF) additions:
`,t+=`;   1. Look-ahead (syntactic predicate) operators are accepted as element prefixes.
`,t+=`;      & is the positive look-ahead operator, succeeds and backtracks if the look-ahead phrase is found
`,t+=`;      ! is the negative look-ahead operator, succeeds and backtracks if the look-ahead phrase is NOT found
`,t+=`;      e.g. &%d13 or &rule or !(A / B)
`,t+=`;   2. User-Defined Terminals (UDT) of the form, u_name and e_name are accepted.
`,t+=`;      'name' is alpha followed by alpha/num/hyphen just like a rule name.
`,t+=`;      u_name may be used as an element but no rule definition is given.
`,t+=`;      e.g. rule = A / u_myUdt
`,t+=`;           A = "a"
`,t+=`;      would be a valid grammar.
`,t+=`;   3. Case-sensitive, single-quoted strings are accepted.
`,t+=`;      e.g. 'abc' would be equivalent to %d97.98.99
`,t+=`;      (kept for backward compatibility, but superseded by %s"abc")  
`,t+=`; New 12/26/2015
`,t+=`;   4. Look-behind operators are accepted as element prefixes.
`,t+=`;      && is the positive look-behind operator, succeeds and backtracks if the look-behind phrase is found
`,t+=`;      !! is the negative look-behind operator, succeeds and backtracks if the look-behind phrase is NOT found
`,t+=`;      e.g. &&%d13 or &&rule or !!(A / B)
`,t+=`;   5. Back reference operators, i.e. \\rulename, are accepted.
`,t+=`;      A back reference operator acts like a TLS or TBS terminal except that the phrase it attempts
`,t+=`;      to match is a phrase previously matched by the rule 'rulename'.
`,t+=`;      There are two modes of previous phrase matching - the parent-frame mode and the universal mode.
`,t+=`;      In universal mode, \\rulename matches the last match to 'rulename' regardless of where it was found.
`,t+=`;      In parent-frame mode, \\rulename matches only the last match found on the parent's frame or parse tree level.
`,t+=`;      Back reference modifiers can be used to specify case and mode.
`,t+=`;      \\A defaults to case-insensitive and universal mode, e.g. \\A === \\%i%uA
`,t+=`;      Modifiers %i and %s determine case-insensitive and case-sensitive mode, respectively.
`,t+=`;      Modifiers %u and %p determine universal mode and parent frame mode, respectively.
`,t+=`;      Case and mode modifiers can appear in any order, e.g. \\%s%pA === \\%p%sA. 
`,t+=`;   7. String begin anchor, ABG(%^) matches the beginning of the input string location.
`,t+=`;      Returns EMPTY or NOMATCH. Never consumes any characters.
`,t+=`;   8. String end anchor, AEN(%$) matches the end of the input string location.
`,t+=`;      Returns EMPTY or NOMATCH. Never consumes any characters.
`,t+=`;
`,t+=`File            = *(BlankLine / Rule / RuleError)
`,t+=`BlankLine       = *(%d32/%d9) [comment] LineEnd
`,t+=`Rule            = RuleLookup owsp Alternation ((owsp LineEnd)
`,t+=`                / (LineEndError LineEnd))
`,t+=`RuleLookup      = RuleNameTest owsp DefinedAsTest
`,t+=`RuleNameTest    = RuleName/RuleNameError
`,t+=`RuleName        = alphanum
`,t+=`RuleNameError   = 1*(%d33-60/%d62-126)
`,t+=`DefinedAsTest   = DefinedAs / DefinedAsError
`,t+=`DefinedAsError  = 1*2%d33-126
`,t+=`DefinedAs       = IncAlt / Defined
`,t+=`Defined         = %d61
`,t+=`IncAlt          = %d61.47
`,t+=`RuleError       = 1*(%d32-126 / %d9  / LineContinue) LineEnd
`,t+=`LineEndError    = 1*(%d32-126 / %d9  / LineContinue)
`,t+=`Alternation     = Concatenation *(owsp AltOp Concatenation)
`,t+=`Concatenation   = Repetition *(CatOp Repetition)
`,t+=`Repetition      = [Modifier] (Group / Option / BasicElement / BasicElementErr)
`,t+=`Modifier        = (Predicate [RepOp])
`,t+=`                / RepOp
`,t+=`Predicate       = BkaOp
`,t+=`                / BknOp
`,t+=`                / AndOp
`,t+=`                / NotOp
`,t+=`BasicElement    = UdtOp
`,t+=`                / RnmOp
`,t+=`                / TrgOp
`,t+=`                / TbsOp
`,t+=`                / TlsOp
`,t+=`                / ClsOp
`,t+=`                / BkrOp
`,t+=`                / AbgOp
`,t+=`                / AenOp
`,t+=`                / ProsVal
`,t+=`BasicElementErr = 1*(%d33-40/%d42-46/%d48-92/%d94-126)
`,t+=`Group           = GroupOpen  Alternation (GroupClose / GroupError)
`,t+=`GroupError      = 1*(%d33-40/%d42-46/%d48-92/%d94-126) ; same as BasicElementErr
`,t+=`GroupOpen       = %d40 owsp
`,t+=`GroupClose      = owsp %d41
`,t+=`Option          = OptionOpen Alternation (OptionClose / OptionError)
`,t+=`OptionError     = 1*(%d33-40/%d42-46/%d48-92/%d94-126) ; same as BasicElementErr
`,t+=`OptionOpen      = %d91 owsp
`,t+=`OptionClose     = owsp %d93
`,t+=`RnmOp           = alphanum
`,t+=`BkrOp           = %d92 [bkrModifier] bkr-name
`,t+=`bkrModifier     = (cs [um / pm]) / (ci [um / pm]) / (um [cs /ci]) / (pm [cs / ci])
`,t+=`cs              = '%s'
`,t+=`ci              = '%i'
`,t+=`um              = '%u'
`,t+=`pm              = '%p'
`,t+=`bkr-name        = uname / ename / rname
`,t+=`rname           = alphanum
`,t+=`uname           = %d117.95 alphanum
`,t+=`ename           = %d101.95 alphanum
`,t+=`UdtOp           = udt-empty
`,t+=`                / udt-non-empty
`,t+=`udt-non-empty   = %d117.95 alphanum
`,t+=`udt-empty       = %d101.95 alphanum
`,t+=`RepOp           = (rep-min StarOp rep-max)
`,t+=`                / (rep-min StarOp)
`,t+=`                / (StarOp rep-max)
`,t+=`                / StarOp
`,t+=`                / rep-min-max
`,t+=`AltOp           = %d47 owsp
`,t+=`CatOp           = wsp
`,t+=`StarOp          = %d42
`,t+=`AndOp           = %d38
`,t+=`NotOp           = %d33
`,t+=`BkaOp           = %d38.38
`,t+=`BknOp           = %d33.33
`,t+=`AbgOp           = %d37.94
`,t+=`AenOp           = %d37.36
`,t+=`TrgOp           = %d37 ((Dec dmin %d45 dmax) / (Hex xmin %d45 xmax) / (Bin bmin %d45 bmax))
`,t+=`TbsOp           = %d37 ((Dec dString *(%d46 dString)) / (Hex xString *(%d46 xString)) / (Bin bString *(%d46 bString)))
`,t+=`TlsOp           = TlsCase TlsOpen TlsString TlsClose
`,t+=`TlsCase         = ["%i" / "%s"]
`,t+=`TlsOpen         = %d34
`,t+=`TlsClose        = %d34
`,t+=`TlsString       = *(%d32-33/%d35-126/StringTab)
`,t+=`StringTab       = %d9
`,t+=`ClsOp           = ClsOpen ClsString ClsClose
`,t+=`ClsOpen         = %d39
`,t+=`ClsClose        = %d39
`,t+=`ClsString       = *(%d32-38/%d40-126/StringTab)
`,t+=`ProsVal         = ProsValOpen ProsValString ProsValClose
`,t+=`ProsValOpen     = %d60
`,t+=`ProsValString   = *(%d32-61/%d63-126/StringTab)
`,t+=`ProsValClose    = %d62
`,t+=`rep-min         = rep-num
`,t+=`rep-min-max     = rep-num
`,t+=`rep-max         = rep-num
`,t+=`rep-num         = 1*(%d48-57)
`,t+=`dString         = dnum
`,t+=`xString         = xnum
`,t+=`bString         = bnum
`,t+=`Dec             = (%d68/%d100)
`,t+=`Hex             = (%d88/%d120)
`,t+=`Bin             = (%d66/%d98)
`,t+=`dmin            = dnum
`,t+=`dmax            = dnum
`,t+=`bmin            = bnum
`,t+=`bmax            = bnum
`,t+=`xmin            = xnum
`,t+=`xmax            = xnum
`,t+=`dnum            = 1*(%d48-57)
`,t+=`bnum            = 1*%d48-49
`,t+=`xnum            = 1*(%d48-57 / %d65-70 / %d97-102)
`,t+=`;
`,t+=`; Basics
`,t+=`alphanum        = (%d97-122/%d65-90) *(%d97-122/%d65-90/%d48-57/%d45)
`,t+=`owsp            = *space
`,t+=`wsp             = 1*space
`,t+=`space           = %d32
`,t+=`                / %d9
`,t+=`                / comment
`,t+=`                / LineContinue
`,t+=`comment         = %d59 *(%d32-126 / %d9)
`,t+=`LineEnd         = %d13.10
`,t+=`                / %d10
`,t+=`                / %d13
`,t+=`LineContinue    = (%d13.10 / %d10 / %d13) (%d32 / %d9)
`,t}}});var B2=de((eB,P2)=>{P2.exports=function(){let e="parser: ",t=_o(),n=t.ids,i=new(D2()),s=new(O2()),a=new(N2()),u=new t.parser;u.ast=new t.ast,u.callbacks=i.callbacks,u.ast.callbacks=s.callbacks;let v=function(k,D,T){if(D<0||D>=T)return-1;for(let C=0;C<k.length;C+=1)if(D>=k[C].beginChar&&D<k[C].beginChar+k[C].length)return C;return-1},w=function(k,D){let T=-1;if(D<k.length){for(let C=D;C<k.length;C+=1)if(k[C]!==null){T=k[C];break}}return T},E=function(k){k.forEach(D=>{let T=[],C=[],z=0;D.opcodes.forEach(I=>{I.type===n.ALT&&I.children.length===1||I.type===n.CAT&&I.children.length===1||I.type===n.REP&&I.min===1&&I.max===1?C.push(null):(C.push(z),T.push(I),z+=1)}),C.push(z),T.forEach(I=>{if(I.type===n.ALT||I.type===n.CAT)for(let q=0;q<I.children.length;q+=1)I.children[q]=w(C,I.children[q])}),D.opcodes=T})};this.syntax=function(k,D,T,C,z){if(z){if(z.traceObject!=="traceObject")throw new TypeError(`${e}trace argument is not a trace object`);u.trace=z}let I={};I.errors=T,I.strict=!!C,I.lines=D,I.findLine=v,I.charsLength=k.length,I.ruleCount=0,u.parse(a,"file",k,I).success||T.push({line:0,char:0,msg:"syntax analysis of input grammar failed"})},this.semantic=function(k,D,T){let C={};return C.errors=T,C.lines=D,C.findLine=v,C.charsLength=k.length,u.ast.translate(C),T.length?null:(E(C.rules),{rules:C.rules,udts:C.udts,lineMap:C.rulesLineMap})},this.generateSource=function(k,D,T,C,z){let I="",q,Y,H,X=0,B=1/0,P=0,L=[],te=[],S=0,d=0,y=0,h=0,o=0,f=0,l=0,m=0,b=0,p=0,x=0,_=0,c=0,g=0,G=0;T.forEach(K=>{L.push(K.lower),X+=K.opcodes.length,K.opcodes.forEach(O=>{switch(O.type){case n.ALT:S+=1;break;case n.CAT:d+=1;break;case n.RNM:y+=1;break;case n.UDT:h+=1;break;case n.REP:o+=1;break;case n.AND:f+=1;break;case n.NOT:l+=1;break;case n.BKA:_+=1;break;case n.BKN:c+=1;break;case n.BKR:x+=1;break;case n.ABG:g+=1;break;case n.AEN:G+=1;break;case n.TLS:for(m+=1,q=0;q<O.string.length;q+=1)O.string[q]<B&&(B=O.string[q]),O.string[q]>P&&(P=O.string[q]);break;case n.TBS:for(b+=1,q=0;q<O.string.length;q+=1)O.string[q]<B&&(B=O.string[q]),O.string[q]>P&&(P=O.string[q]);break;case n.TRG:p+=1,O.min<B&&(B=O.min),O.max>P&&(P=O.max);break;default:throw new Error("generateSource: unrecognized opcode")}})}),L.sort(),C.length>0&&(C.forEach(K=>{te.push(K.lower)}),te.sort());let A="module.exports";z&&typeof z=="string"&&(A=`let ${z}`),I+=`// copyright: Copyright (c) 2021 Lowell D. Thomas, all rights reserved<br>
`,I+=`//   license: BSD-2-Clause (https://opensource.org/licenses/BSD-2-Clause)<br>
`,I+=`//
`,I+=`// Generated by apg-js, Version 4.0.0 [apg-js](https://github.com/ldthomas/apg-js)
`,I+=`${A} = function grammar(){
`,I+="  // ```\n",I+=`  // SUMMARY
`,I+=`  //      rules = ${T.length}
`,I+=`  //       udts = ${C.length}
`,I+=`  //    opcodes = ${X}
`,I+=`  //        ---   ABNF original opcodes
`,I+=`  //        ALT = ${S}
`,I+=`  //        CAT = ${d}
`,I+=`  //        REP = ${o}
`,I+=`  //        RNM = ${y}
`,I+=`  //        TLS = ${m}
`,I+=`  //        TBS = ${b}
`,I+=`  //        TRG = ${p}
`,I+=`  //        ---   SABNF superset opcodes
`,I+=`  //        UDT = ${h}
`,I+=`  //        AND = ${f}
`,I+=`  //        NOT = ${l}
`,I+=`  //        BKA = ${_}
`,I+=`  //        BKN = ${c}
`,I+=`  //        BKR = ${x}
`,I+=`  //        ABG = ${g}
`,I+=`  //        AEN = ${G}
`,I+="  // characters = [",m+b+p===0?I+=" none defined ]":I+=`${B} - ${P}]`,h>0&&(I+=" + user defined"),I+=`
`,I+="  // ```\n",I+=`  /* OBJECT IDENTIFIER (for internal parser use) */
`,I+=`  this.grammarObject = 'grammarObject';
`,I+=`
`,I+=`  /* RULES */
`,I+=`  this.rules = [];
`,T.forEach((K,O)=>{let R="  this.rules[";R+=O,R+="] = {name: '",R+=K.name,R+="', lower: '",R+=K.lower,R+="', index: ",R+=K.index,R+=", isBkr: ",R+=K.isBkr,R+=`};
`,I+=R}),I+=`
`,I+=`  /* UDTS */
`,I+=`  this.udts = [];
`,C.length>0&&C.forEach((K,O)=>{let R="  this.udts[";R+=O,R+="] = {name: '",R+=K.name,R+="', lower: '",R+=K.lower,R+="', index: ",R+=K.index,R+=", empty: ",R+=K.empty,R+=", isBkr: ",R+=K.isBkr,R+=`};
`,I+=R}),I+=`
`,I+=`  /* OPCODES */
`,T.forEach((K,O)=>{O>0&&(I+=`
`),I+=`  /* ${K.name} */
`,I+=`  this.rules[${O}].opcodes = [];
`,K.opcodes.forEach((R,J)=>{let j;switch(R.type){case n.ALT:I+=`  this.rules[${O}].opcodes[${J}] = {type: ${R.type}, children: [${R.children.toString()}]};// ALT
`;break;case n.CAT:I+=`  this.rules[${O}].opcodes[${J}] = {type: ${R.type}, children: [${R.children.toString()}]};// CAT
`;break;case n.RNM:I+=`  this.rules[${O}].opcodes[${J}] = {type: ${R.type}, index: ${R.index}};// RNM(${T[R.index].name})
`;break;case n.BKR:R.index>=T.length?(Y=C[R.index-T.length].name,H=C[R.index-T.length].lower):(Y=T[R.index].name,H=T[R.index].lower),j="%i",R.bkrCase===n.BKR_MODE_CS&&(j="%s"),R.bkrMode===n.BKR_MODE_UM?j+="%u":j+="%p",Y=j+Y,I+=`  this.rules[${O}].opcodes[${J}] = {type: ${R.type}, index: ${R.index}, lower: '${H}', bkrCase: ${R.bkrCase}, bkrMode: ${R.bkrMode}};// BKR(\\${Y})
`;break;case n.UDT:I+=`  this.rules[${O}].opcodes[${J}] = {type: ${R.type}, empty: ${R.empty}, index: ${R.index}};// UDT(${C[R.index].name})
`;break;case n.REP:I+=`  this.rules[${O}].opcodes[${J}] = {type: ${R.type}, min: ${R.min}, max: ${R.max}};// REP
`;break;case n.AND:I+=`  this.rules[${O}].opcodes[${J}] = {type: ${R.type}};// AND
`;break;case n.NOT:I+=`  this.rules[${O}].opcodes[${J}] = {type: ${R.type}};// NOT
`;break;case n.ABG:I+=`  this.rules[${O}].opcodes[${J}] = {type: ${R.type}};// ABG(%^)
`;break;case n.AEN:I+=`  this.rules[${O}].opcodes[${J}] = {type: ${R.type}};// AEN(%$)
`;break;case n.BKA:I+=`  this.rules[${O}].opcodes[${J}] = {type: ${R.type}};// BKA
`;break;case n.BKN:I+=`  this.rules[${O}].opcodes[${J}] = {type: ${R.type}};// BKN
`;break;case n.TLS:I+=`  this.rules[${O}].opcodes[${J}] = {type: ${R.type}, string: [${R.string.toString()}]};// TLS
`;break;case n.TBS:I+=`  this.rules[${O}].opcodes[${J}] = {type: ${R.type}, string: [${R.string.toString()}]};// TBS
`;break;case n.TRG:I+=`  this.rules[${O}].opcodes[${J}] = {type: ${R.type}, min: ${R.min}, max: ${R.max}};// TRG
`;break;default:throw new Error("parser.js: ~143: unrecognized opcode")}})}),I+=`
`,I+="  // The `toString()` function will display the original grammar file(s) that produced these opcodes.\n",I+=`  this.toString = function toString(){
`,I+=`    let str = "";
`;let U;return D.forEach(K=>{let O=K.beginChar+K.length;U="",I+='    str += "';for(let R=K.beginChar;R<O;R+=1){switch(k[R]){case 9:U=" ";break;case 10:U="\\n";break;case 13:U="\\r";break;case 34:U='\\"';break;case 92:U="\\\\";break;default:U=String.fromCharCode(k[R]);break}I+=U}I+=`";
`}),I+=`    return str;
`,I+=`  }
`,I+=`}
`,I},this.generateObject=function(k,D,T){let C={},z=[],I=[],q=k.slice(0);return C.grammarObject="grammarObject",D.forEach(Y=>{z.push(Y.lower)}),z.sort(),T.length>0&&(T.forEach(Y=>{I.push(Y.lower)}),I.sort()),C.callbacks=[],z.forEach(Y=>{C.callbacks[Y]=!1}),T.length>0&&I.forEach(Y=>{C.callbacks[Y]=!1}),C.rules=D,C.udts=T,C.toString=function(){return q},C}}});var U2=de((tB,L2)=>{L2.exports=function(){let e=dn(),t="rule-attributes.js",n=null;function i(S){return S.left||S.nested||S.right||S.cyclic?!1:S.empty}function s(S){return!!(S.left||S.nested||S.right||S.cyclic)}function a(S,d){let y=0,h=0,o=0;for(y=0;y<d;y+=1)if(S[y].nested)return!0;for(y=0;y<d;y+=1)if(S[y].right&&!S[y].leaf){for(h=y+1;h<d;h+=1)if(!i(S[h]))return!0}for(y=d-1;y>=0;y-=1)if(S[y].left&&!S[y].leaf){for(h=y-1;h>=0;h-=1)if(!i(S[h]))return!0}for(y=0;y<d;y+=1)if(!S[y].empty&&!s(S[y])){for(h=y+1;h<d;h+=1)if(s(S[h])){for(o=h+1;o<d;o+=1)if(!S[o].empty&&!s(S[o]))return!0}}return!1}function u(S,d){for(let y=0;y<d;y+=1)if(!S[y].cyclic)return!1;return!0}function v(S,d){for(let y=0;y<d;y+=1){if(S[y].left)return!0;if(!S[y].empty)return!1}return!1}function w(S,d){for(let y=d-1;y>=0;y-=1){if(S[y].right)return!0;if(!S[y].empty)return!1}return!1}function E(S,d){for(let y=0;y<d;y+=1)if(!S[y].empty)return!1;return!0}function M(S,d){for(let y=0;y<d;y+=1)if(!S[y].finite)return!1;return!0}function k(S,d,y,h){let o=0,f=d[y],l=f.children.length,m=[];for(o=0;o<l;o+=1)m.push(S.attrGen());for(o=0;o<l;o+=1)C(S,d,f.children[o],m[o]);h.left=v(m,l),h.right=w(m,l),h.nested=a(m,l),h.empty=E(m,l),h.finite=M(m,l),h.cyclic=u(m,l)}function D(S,d,y,h){let o=0,f=d[y],l=f.children.length,m=[];for(o=0;o<l;o+=1)m.push(S.attrGen());for(o=0;o<l;o+=1)C(S,d,f.children[o],m[o]);for(h.left=!1,h.right=!1,h.nested=!1,h.empty=!1,h.finite=!1,h.cyclic=!1,o=0;o<l;o+=1)m[o].left&&(h.left=!0),m[o].nested&&(h.nested=!0),m[o].right&&(h.right=!0),m[o].empty&&(h.empty=!0),m[o].finite&&(h.finite=!0),m[o].cyclic&&(h.cyclic=!0)}function T(S,d,y,h){let o=d[y];o.index>=S.ruleCount?(h.empty=S.udts[o.index-S.ruleCount].empty,h.finite=!0):(z(S,o.index,h),h.left=!1,h.nested=!1,h.right=!1,h.cyclic=!1)}function C(S,d,y,h){S.attrInit(h);let o=d[y];switch(o.type){case e.ALT:D(S,d,y,h);break;case e.CAT:k(S,d,y,h);break;case e.REP:C(S,d,y+1,h),o.min===0&&(h.empty=!0,h.finite=!0);break;case e.RNM:z(S,d[y].index,h);break;case e.BKR:T(S,d,y,h);break;case e.AND:case e.NOT:case e.BKA:case e.BKN:C(S,d,y+1,h),h.empty=!0;break;case e.TLS:h.empty=!d[y].string.length,h.finite=!0,h.cyclic=!1;break;case e.TBS:case e.TRG:h.empty=!1,h.finite=!0,h.cyclic=!1;break;case e.UDT:h.empty=o.empty,h.finite=!0,h.cyclic=!1;break;case e.ABG:case e.AEN:h.empty=!0,h.finite=!0,h.cyclic=!1;break;default:throw new Error(`unknown opcode type: ${o}`)}}function z(S,d,y){let h=S.attrsWorking[d];h.isComplete?S.attrCopy(y,h):h.isOpen?d===S.startRule?d===S.startRule&&(y.left=!0,y.right=!0,y.cyclic=!0,y.leaf=!0):y.finite=!0:(h.isOpen=!0,C(S,h.rule.opcodes,0,y),h.left=y.left,h.right=y.right,h.nested=y.nested,h.empty=y.empty,h.finite=y.finite,h.cyclic=y.cyclic,h.leaf=!1,h.isOpen=!1,h.isComplete=!0)}let I=S=>{n=S;let d=0,y=0,h=n.attrGen();for(d=0;d<n.ruleCount;d+=1){for(y=0;y<n.ruleCount;y+=1)n.attrInit(n.attrsWorking[y]);n.startRule=d,z(n,d,h),n.attrCopy(n.attrs[d],n.attrsWorking[d])}n.attributesComplete=!0;let o=null;for(d=0;d<n.ruleCount;d+=1)if(o=n.attrs[d],o.left||!o.finite||o.cyclic){let f=n.attrGen(o.rule);n.attrCopy(f,o),n.attrsErrors.push(f),n.attrsErrorCount+=1}},q=S=>S?"t":"f",Y=S=>S?"e":"f",H=S=>S?"t":"e",X=(S,d,y,h)=>{let o=`${S}:${d}:`;return o+=`${Y(y.left)} `,o+=`${q(y.nested)} `,o+=`${q(y.right)} `,o+=`${Y(y.cyclic)} `,o+=`${H(y.finite)} `,o+=`${q(y.empty)}:`,o+=`${n.typeToString(h.recursiveType)}:`,o+=h.recursiveType===e.ATTR_MR?h.groupNumber:"-",o+=`:${y.rule.name}
`,o},B=()=>{let S=`LEGEND - t=true, f=false, e=error
`;return S+=`sequence:rule index:left nested right cyclic finite empty:type:group number:rule name
`,S},P=()=>{let S=null,d=null,y="";if(y+=`RULE ATTRIBUTES WITH ERRORS
`,y+=B(),n.attrsErrorCount)for(let h=0;h<n.attrsErrorCount;h+=1)S=n.attrsErrors[h],d=n.ruleDeps[S.rule.index],y+=X(h,S.rule.index,S,d);else y+=`<none>
`;return y},L=S=>{let d=0,y=0,h=null,o=null,f="",{ruleIndexes:l}=n;for(S===97?l=n.ruleAlphaIndexes:S===116&&(l=n.ruleTypeIndexes),d=0;d<n.ruleCount;d+=1)y=l[d],h=n.attrs[y],o=n.ruleDeps[y],f+=X(d,y,h,o);return f};return{ruleAttributes:I,showAttributes:(S="index")=>{if(!n.attributesComplete)throw new Error(`${t}:showAttributes: attributes not available`);let d="",y=`RULE ATTRIBUTES
`;return S.charCodeAt(0)===97?(d+=`alphabetical by rule name
`,d+=y,d+=B(),d+=L(97)):S.charCodeAt(0)===116?(d+=`ordered by rule type
`,d+=y,d+=B(),d+=L(116)):(d+=`ordered by rule index
`,d+=y,d+=B(),d+=L()),d},showAttributeErrors:P}}()});var F2=de((rB,$2)=>{$2.exports=(()=>{let r=dn(),e=null,t=(a,u,v,w)=>{let E=0,M=0,k=u[v];w[v]=!0;let D=k.rule.opcodes;for(E=0;E<D.length;E+=1){let T=D[E];if(T.type===r.RNM)for(k.refersTo[T.index]=!0,w[T.index]||t(a,u,T.index,w),M=0;M<a;M+=1)u[T.index].refersTo[M]&&(k.refersTo[M]=!0);else T.type===r.UDT?k.refersToUdt[T.index]=!0:T.type===r.BKR&&(T.index<a?(k.refersTo[T.index]=!0,w[T.index]||t(a,u,T.index,w)):k.refersToUdt[a-T.index]=!0)}},n=a=>{e=a;let u=0,v=0,w=0,E=null,M=null,k=!1;e.dependenciesComplete=!1;let D=e.falseArray(e.ruleCount);for(u=0;u<e.ruleCount;u+=1)e.falsifyArray(D),t(e.ruleCount,e.ruleDeps,u,D);for(u=0;u<e.ruleCount;u+=1)for(v=0;v<e.ruleCount;v+=1)u!==v&&e.ruleDeps[v].refersTo[u]&&(e.ruleDeps[u].referencedBy[v]=!0);for(u=0;u<e.ruleCount;u+=1)e.ruleDeps[u].recursiveType=r.ATTR_N,e.ruleDeps[u].refersTo[u]&&(e.ruleDeps[u].recursiveType=r.ATTR_R);for(w=-1,u=0;u<e.ruleCount;u+=1)if(E=e.ruleDeps[u],E.recursiveType===r.ATTR_R)for(k=!0,v=0;v<e.ruleCount;v+=1)u!==v&&(M=e.ruleDeps[v],M.recursiveType===r.ATTR_R&&E.refersTo[v]&&M.refersTo[u]&&(k&&(w+=1,E.recursiveType=r.ATTR_MR,E.groupNumber=w,k=!1),M.recursiveType=r.ATTR_MR,M.groupNumber=w));e.isMutuallyRecursive=w>-1,e.ruleAlphaIndexes.sort(e.compRulesAlpha),e.ruleTypeIndexes.sort(e.compRulesAlpha),e.ruleTypeIndexes.sort(e.compRulesType),e.isMutuallyRecursive&&e.ruleTypeIndexes.sort(e.compRulesGroup),e.udtCount&&e.udtAlphaIndexes.sort(e.compUdtsAlpha),e.dependenciesComplete=!0},i=(a=null)=>{let u=0,v=0,w=0,E=0,M=e.ruleCount-1,k=e.udtCount-1,D=100,T="",C="",z="=> ",I="<= ",q=!1,Y=null,{ruleIndexes:H}=e,{udtIndexes:X}=e;for(a===97?(H=e.ruleAlphaIndexes,X=e.udtAlphaIndexes):a===116&&(H=e.ruleTypeIndexes,X=e.udtAlphaIndexes),u=0;u<e.ruleCount;u+=1){for(Y=e.ruleDeps[H[u]],C=`${H[u]}:${e.typeToString(Y.recursiveType)}:`,e.isMutuallyRecursive&&(C+=Y.groupNumber>-1?Y.groupNumber:"-",C+=":"),C+=" ",T+=`${C+e.rules[H[u]].name}
`,q=!0,w=0,E=T.length,T+=C,v=0;v<e.ruleCount;v+=1)Y.refersTo[H[v]]&&(q?(T+=z,q=!1,T+=e.ruleDeps[H[v]].rule.name):T+=`, ${e.ruleDeps[H[v]].rule.name}`,w+=1),T.length-E>D&&v!==M&&(T+=`
${C}${z}`,E=T.length);if(e.udtCount)for(v=0;v<e.udtCount;v+=1)Y.refersToUdt[X[v]]&&(q?(T+=z,q=!1,T+=e.udts[X[v]].name):T+=`, ${e.udts[X[v]].name}`,w+=1),T.length-E>D&&v!==k&&(T+=`
${C}${z}`,E=T.length);for(w===0&&(T+=`=> <none>
`),q===!1&&(T+=`
`),q=!0,w=0,E=T.length,T+=C,v=0;v<e.ruleCount;v+=1)Y.referencedBy[H[v]]&&(q?(T+=I,q=!1,T+=e.ruleDeps[H[v]].rule.name):T+=`, ${e.ruleDeps[H[v]].rule.name}`,w+=1),T.length-E>D&&v!==M&&(T+=`
${C}${z}`,E=T.length);w===0&&(T+=`<= <none>
`),q===!1&&(T+=`
`),T+=`
`}return T};return{ruleDependencies:n,showRuleDependencies:(a="index")=>{let u=`RULE DEPENDENCIES(index:type:[group number:])
`;return u+=`=> refers to rule names
`,u+=`<= referenced by rule names
`,e.dependenciesComplete&&(a.charCodeAt(0)===97?(u+=`alphabetical by rule name
`,u+=i(97)):a.charCodeAt(0)===116?(u+=`ordered by rule type
`,u+=i(116)):(u+=`ordered by rule index
`,u+=i(null))),u}}})()});var H2=de((nB,q2)=>{q2.exports=function(){let e=dn(),{ruleAttributes:t,showAttributes:n,showAttributeErrors:i}=U2(),{ruleDependencies:s,showRuleDependencies:a}=F2();class u{constructor(E,M){this.rules=E,this.udts=M,this.ruleCount=E.length,this.udtCount=M.length,this.startRule=0,this.dependenciesComplete=!1,this.attributesComplete=!1,this.isMutuallyRecursive=!1,this.ruleIndexes=this.indexArray(this.ruleCount),this.ruleAlphaIndexes=this.indexArray(this.ruleCount),this.ruleTypeIndexes=this.indexArray(this.ruleCount),this.udtIndexes=this.indexArray(this.udtCount),this.udtAlphaIndexes=this.indexArray(this.udtCount),this.attrsErrorCount=0,this.attrs=[],this.attrsErrors=[],this.attrsWorking=[],this.ruleDeps=[];for(let k=0;k<this.ruleCount;k+=1)this.attrs.push(this.attrGen(this.rules[k])),this.attrsWorking.push(this.attrGen(this.rules[k])),this.ruleDeps.push(this.rdGen(E[k],this.ruleCount,this.udtCount));this.compRulesAlpha=this.compRulesAlpha.bind(this),this.compUdtsAlpha=this.compUdtsAlpha.bind(this),this.compRulesType=this.compRulesType.bind(this),this.compRulesGroup=this.compRulesGroup.bind(this)}attrGen(E){return{left:!1,nested:!1,right:!1,empty:!1,finite:!1,cyclic:!1,leaf:!1,isOpen:!1,isComplete:!1,rule:E}}attrInit(E){E.left=!1,E.nested=!1,E.right=!1,E.empty=!1,E.finite=!1,E.cyclic=!1,E.leaf=!1,E.isOpen=!1,E.isComplete=!1}attrCopy(E,M){E.left=M.left,E.nested=M.nested,E.right=M.right,E.empty=M.empty,E.finite=M.finite,E.cyclic=M.cyclic,E.leaf=M.leaf,E.isOpen=M.isOpen,E.isComplete=M.isComplete,E.rule=M.rule}rdGen(E,M,k){return{rule:E,recursiveType:e.ATTR_N,groupNumber:-1,refersTo:this.falseArray(M),refersToUdt:this.falseArray(k),referencedBy:this.falseArray(M)}}typeToString(E){switch(E){case e.ATTR_N:return" N";case e.ATTR_R:return" R";case e.ATTR_MR:return"MR";default:return"UNKNOWN"}}falseArray(E){let M=[];if(E>0)for(let k=0;k<E;k+=1)M.push(!1);return M}falsifyArray(E){for(let M=0;M<E.length;M+=1)E[M]=!1}indexArray(E){let M=[];if(E>0)for(let k=0;k<E;k+=1)M.push(k);return M}compRulesAlpha(E,M){return this.rules[E].lower<this.rules[M].lower?-1:this.rules[E].lower>this.rules[M].lower?1:0}compUdtsAlpha(E,M){return this.udts[E].lower<this.udts[M].lower?-1:this.udts[E].lower>this.udts[M].lower?1:0}compRulesType(E,M){return this.ruleDeps[E].recursiveType<this.ruleDeps[M].recursiveType?-1:this.ruleDeps[E].recursiveType>this.ruleDeps[M].recursiveType?1:0}compRulesGroup(E,M){if(this.ruleDeps[E].recursiveType===e.ATTR_MR&&this.ruleDeps[M].recursiveType===e.ATTR_MR){if(this.ruleDeps[E].groupNumber<this.ruleDeps[M].groupNumber)return-1;if(this.ruleDeps[E].groupNumber>this.ruleDeps[M].groupNumber)return 1}return 0}}return{attributes:function(E=[],M=[],k=[],D=[]){let T=new u(E,M);return s(T),t(T),T.attrsErrorCount&&D.push({line:0,char:0,msg:`${T.attrsErrorCount} attribute errors`}),T.attrsErrorCount},showAttributes:n,showAttributeErrors:i,showRuleDependencies:a}}()});var K2=de((iB,z2)=>{z2.exports=function(){let e="show-rules.js";return function(i=[],s=[],a="index"){let u="showRules",v=[],w=[],E=[],M=[],k=i,D=s,T=i.length,C=s.length,z="RULE/UDT NAMES",I;function q(H,X){return k[H].lower<k[X].lower?-1:k[H].lower>k[X].lower?1:0}function Y(H,X){return D[H].lower<D[X].lower?-1:D[H].lower>D[X].lower?1:0}if(!(Array.isArray(i)&&i.length))throw new Error(`${e}:${u}: rules arg must be array with length > 0`);if(!Array.isArray(s))throw new Error(`${e}:${u}: udts arg must be array`);for(I=0;I<T;I+=1)E.push(I);if(v=E.slice(0),v.sort(q),C){for(I=0;I<C;I+=1)M.push(I);w=M.slice(0),w.sort(Y)}if(a.charCodeAt(0)===97){for(z+=` - alphabetical by rule/UDT name
`,I=0;I<T;I+=1)z+=`${I}: ${v[I]}: ${k[v[I]].name}
`;if(C)for(I=0;I<C;I+=1)z+=`${I}: ${w[I]}: ${D[w[I]].name}
`}else{for(z+=` - ordered by rule/UDT index
`,I=0;I<T;I+=1)z+=`${I}: ${k[I].name}
`;if(C)for(I=0;I<C;I+=1)z+=`${I}: ${D[I].name}
`}return z}}()});var G2=de((oB,j2)=>{j2.exports=function(e){let t="api.js: ",n=this,i=_o(),s=Jl(),a=k2(),u=new(B2()),{attributes:v,showAttributes:w,showAttributeErrors:E,showRuleDependencies:M}=H2(),k=K2(),D=function(S,d,y){let l=`<span class="${i.style.CLASS_CTRLCHAR}">`,m="</span>",b=`<span class="${i.style.CLASS_NOMATCH}">`,p="</span>",x,_="",c=!0;for(;c&&!(!Array.isArray(S)||S.length===0);){if(typeof d!="number")throw new Error("abnfToHtml: beg must be type number");if(d>=S.length)break;typeof y!="number"||d+y>=S.length?x=S.length:x=d+y;let g=0;for(let G=d;G<x;G+=1){let A=S[G];if(A>=32&&A<=126)switch(g===1?(_+=m,g=0):g===2&&(_+=p,g=0),A){case 32:_+="&nbsp;";break;case 60:_+="&lt;";break;case 62:_+="&gt;";break;case 38:_+="&amp;";break;case 34:_+="&quot;";break;case 39:_+="&#039;";break;case 92:_+="&#092;";break;default:_+=String.fromCharCode(A);break}else A===9||A===10||A===13?(g===0?(_+=l,g=1):g===2&&(_+=p+l,g=1),A===9&&(_+="TAB"),A===10&&(_+="LF"),A===13&&(_+="CR")):(g===0?(_+=b,g=2):g===1&&(_+=m+b,g=2),_+=`\\x${i.utils.charToHex(A)}`)}g===2&&(_+=p),g===1&&(_+=m);break}return _},T=function(S,d,y){let h="";for(let o=d;o<d+y;o+=1){let f=S[o];if(f>=32&&f<=126)h+=String.fromCharCode(f);else switch(f){case 9:h+="\\t";break;case 10:h+="\\n";break;case 13:h+="\\r";break;default:h+="\\unknown";break}}return h},C=function(S){let d="Annotated Input Grammar";return S.forEach(y=>{d+=`
`,d+=`line no: ${y.lineNo}`,d+=` : char index: ${y.beginChar}`,d+=` : length: ${y.length}`,d+=` : abnf: ${T(n.chars,y.beginChar,y.length)}`}),d+=`
`,d},z=function(S){let d="";return d+=`<table class="${i.style.CLASS_GRAMMAR}">
`,d+=`<caption>Annotated Input Grammar</caption>
`,d+="<tr>",d+="<th>line<br>no.</th><th>first<br>char</th><th><br>length</th><th><br>text</th>",d+=`</tr>
`,S.forEach(h=>{d+="<tr>",d+=`<td>${h.lineNo}`,d+=`</td><td>${h.beginChar}`,d+=`</td><td>${h.length}`,d+=`</td><td>${D(n.chars,h.beginChar,h.length)}`,d+="</td>",d+=`</tr>
`}),d+=`</table>
`,d},I=function(S,d,y,h){let[o]=i,f="",l=`<span class="${o.CLASS_NOMATCH}">&raquo;</span>`;return f+=`<p><table class="${o.CLASS_GRAMMAR}">
`,h&&typeof h=="string"&&(f+=`<caption>${h}</caption>
`),f+=`<tr><th>line<br>no.</th><th>line<br>offset</th><th>error<br>offset</th><th><br>text</th></tr>
`,S.forEach(m=>{let b,p,x,_,c,g="",G="";d.length===0?(c=l,p=0):(b=d[m.line],x=b.beginChar,m.char>x&&(g=D(y,x,m.char-x)),x=m.char,_=b.beginChar+b.length,x<_&&(G=D(y,x,_-x)),c=g+l+G,p=m.char-b.beginChar,f+="<tr>",f+=`<td>${m.line}</td><td>${b.beginChar}</td><td>${p}</td><td>${c}</td>`,f+=`</tr>
`,f+="<tr>",f+=`<td colspan="3"></td><td>&uarr;:&nbsp;${i.utils.stringToAsciiHtml(m.msg)}</td>`,f+=`</tr>
`)}),f+=`</table></p>
`,f},q=function(S,d,y){let h,o,f,l;return h="",S.forEach(m=>{o=d[m.line],h+=`${o.lineNo}: `,h+=`${o.beginChar}: `,h+=`${m.char-o.beginChar}: `,f=o.beginChar,l=m.char-o.beginChar,h+=T(y,f,l),h+=" >> ",f=m.char,l=o.beginChar+o.length-m.char,h+=T(y,f,l),h+=`
`,h+=`${o.lineNo}: `,h+=`${o.beginChar}: `,h+=`${m.char-o.beginChar}: `,h+="error: ",h+=m.msg,h+=`
`}),h},Y=!1,H=!1,X=!1,B=!1,P=0,L;if(this.errors=[],Buffer.isBuffer(e))this.chars=s.decode("BINARY",e);else if(Array.isArray(e))this.chars=e.slice();else if(typeof e=="string")this.chars=s.decode("STRING",e);else throw new Error(`${t}input source is not a string, byte Buffer or character array`);this.sabnf=s.encode("STRING",this.chars),this.scan=function(S,d){this.lines=a(this.chars,this.errors,S,d),Y=!0},this.parse=function(S,d){if(!Y)throw new Error(`${t}grammar not scanned`);u.syntax(this.chars,this.lines,this.errors,S,d),H=!0},this.translate=function(){if(!H)throw new Error(`${t}grammar not scanned and parsed`);let S=u.semantic(this.chars,this.lines,this.errors);this.errors.length===0&&(this.rules=S.rules,this.udts=S.udts,L=S.lineMap,X=!0)},this.attributes=function(){if(!X)throw new Error(`${t}grammar not scanned, parsed and translated`);return P=v(this.rules,this.udts,L,this.errors),B=!0,P},this.generate=function(S){if(this.lines=a(this.chars,this.errors,S),this.errors.length||(u.syntax(this.chars,this.lines,this.errors,S),this.errors.length))return;let d=u.semantic(this.chars,this.lines,this.errors);this.errors.length||(this.rules=d.rules,this.udts=d.udts,L=d.lineMap,P=v(this.rules,this.udts,L,this.errors),B=!0)},this.displayRules=function(S="index"){if(!X)throw new Error(`${t}grammar not scanned, parsed and translated`);return k(this.rules,this.udts,S)},this.displayRuleDependencies=function(S="index"){if(!B)throw new Error(`${t}no attributes - must be preceeded by call to attributes()`);return M(S)},this.displayAttributes=function(S="index"){if(!B)throw new Error(`${t}no attributes - must be preceeded by call to attributes()`);return P&&E(S),w(S)},this.displayAttributeErrors=function(){if(!B)throw new Error(`${t}no attributes - must be preceeded by call to attributes()`);return E()},this.toSource=function(S){if(!B)throw new Error(`${t}can't generate parser source - must be preceeded by call to attributes()`);if(P)throw new Error(`${t}can't generate parser source - attributes have ${P} errors`);return u.generateSource(this.chars,this.lines,this.rules,this.udts,S)},this.toObject=function(){if(!B)throw new Error(`${t}can't generate parser source - must be preceeded by call to attributes()`);if(P)throw new Error(`${t}can't generate parser source - attributes have ${P} errors`);return u.generateObject(this.sabnf,this.rules,this.udts)},this.errorsToAscii=function(){return q(this.errors,this.lines,this.chars)},this.errorsToHtml=function(S){return I(this.errors,this.lines,this.chars,S)},this.linesToAscii=function(){return C(this.lines)},this.linesToHtml=function(){return z(this.lines)}}});var Fc=de(()=>{});var fv=de((av,n0)=>{(function(r,e){"use strict";function t(h,o){if(!h)throw new Error(o||"Assertion failed")}function n(h,o){h.super_=o;var f=function(){};f.prototype=o.prototype,h.prototype=new f,h.prototype.constructor=h}function i(h,o,f){if(i.isBN(h))return h;this.negative=0,this.words=null,this.length=0,this.red=null,h!==null&&((o==="le"||o==="be")&&(f=o,o=10),this._init(h||0,o||10,f||"be"))}typeof r=="object"?r.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var s;try{typeof window<"u"&&typeof window.Buffer<"u"?s=window.Buffer:s=Fc().Buffer}catch{}i.isBN=function(o){return o instanceof i?!0:o!==null&&typeof o=="object"&&o.constructor.wordSize===i.wordSize&&Array.isArray(o.words)},i.max=function(o,f){return o.cmp(f)>0?o:f},i.min=function(o,f){return o.cmp(f)<0?o:f},i.prototype._init=function(o,f,l){if(typeof o=="number")return this._initNumber(o,f,l);if(typeof o=="object")return this._initArray(o,f,l);f==="hex"&&(f=16),t(f===(f|0)&&f>=2&&f<=36),o=o.toString().replace(/\s+/g,"");var m=0;o[0]==="-"&&(m++,this.negative=1),m<o.length&&(f===16?this._parseHex(o,m,l):(this._parseBase(o,f,m),l==="le"&&this._initArray(this.toArray(),f,l)))},i.prototype._initNumber=function(o,f,l){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[o&67108863],this.length=1):o<4503599627370496?(this.words=[o&67108863,o/67108864&67108863],this.length=2):(t(o<9007199254740992),this.words=[o&67108863,o/67108864&67108863,1],this.length=3),l==="le"&&this._initArray(this.toArray(),f,l)},i.prototype._initArray=function(o,f,l){if(t(typeof o.length=="number"),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var b,p,x=0;if(l==="be")for(m=o.length-1,b=0;m>=0;m-=3)p=o[m]|o[m-1]<<8|o[m-2]<<16,this.words[b]|=p<<x&67108863,this.words[b+1]=p>>>26-x&67108863,x+=24,x>=26&&(x-=26,b++);else if(l==="le")for(m=0,b=0;m<o.length;m+=3)p=o[m]|o[m+1]<<8|o[m+2]<<16,this.words[b]|=p<<x&67108863,this.words[b+1]=p>>>26-x&67108863,x+=24,x>=26&&(x-=26,b++);return this._strip()};function a(h,o){var f=h.charCodeAt(o);if(f>=48&&f<=57)return f-48;if(f>=65&&f<=70)return f-55;if(f>=97&&f<=102)return f-87;t(!1,"Invalid character in "+h)}function u(h,o,f){var l=a(h,f);return f-1>=o&&(l|=a(h,f-1)<<4),l}i.prototype._parseHex=function(o,f,l){this.length=Math.ceil((o.length-f)/6),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var b=0,p=0,x;if(l==="be")for(m=o.length-1;m>=f;m-=2)x=u(o,f,m)<<b,this.words[p]|=x&67108863,b>=18?(b-=18,p+=1,this.words[p]|=x>>>26):b+=8;else{var _=o.length-f;for(m=_%2===0?f+1:f;m<o.length;m+=2)x=u(o,f,m)<<b,this.words[p]|=x&67108863,b>=18?(b-=18,p+=1,this.words[p]|=x>>>26):b+=8}this._strip()};function v(h,o,f,l){for(var m=0,b=0,p=Math.min(h.length,f),x=o;x<p;x++){var _=h.charCodeAt(x)-48;m*=l,_>=49?b=_-49+10:_>=17?b=_-17+10:b=_,t(_>=0&&b<l,"Invalid character"),m+=b}return m}i.prototype._parseBase=function(o,f,l){this.words=[0],this.length=1;for(var m=0,b=1;b<=67108863;b*=f)m++;m--,b=b/f|0;for(var p=o.length-l,x=p%m,_=Math.min(p,p-x)+l,c=0,g=l;g<_;g+=m)c=v(o,g,g+m,f),this.imuln(b),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(x!==0){var G=1;for(c=v(o,g,o.length,f),g=0;g<x;g++)G*=f;this.imuln(G),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},i.prototype.copy=function(o){o.words=new Array(this.length);for(var f=0;f<this.length;f++)o.words[f]=this.words[f];o.length=this.length,o.negative=this.negative,o.red=this.red};function w(h,o){h.words=o.words,h.length=o.length,h.negative=o.negative,h.red=o.red}if(i.prototype._move=function(o){w(o,this)},i.prototype.clone=function(){var o=new i(null);return this.copy(o),o},i.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=E}catch{i.prototype.inspect=E}else i.prototype.inspect=E;function E(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var M=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],k=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],D=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(o,f){o=o||10,f=f|0||1;var l;if(o===16||o==="hex"){l="";for(var m=0,b=0,p=0;p<this.length;p++){var x=this.words[p],_=((x<<m|b)&16777215).toString(16);b=x>>>24-m&16777215,m+=2,m>=26&&(m-=26,p--),b!==0||p!==this.length-1?l=M[6-_.length]+_+l:l=_+l}for(b!==0&&(l=b.toString(16)+l);l.length%f!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}if(o===(o|0)&&o>=2&&o<=36){var c=k[o],g=D[o];l="";var G=this.clone();for(G.negative=0;!G.isZero();){var A=G.modrn(g).toString(o);G=G.idivn(g),G.isZero()?l=A+l:l=M[c-A.length]+A+l}for(this.isZero()&&(l="0"+l);l.length%f!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}t(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var o=this.words[0];return this.length===2?o+=this.words[1]*67108864:this.length===3&&this.words[2]===1?o+=4503599627370496+this.words[1]*67108864:this.length>2&&t(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-o:o},i.prototype.toJSON=function(){return this.toString(16,2)},s&&(i.prototype.toBuffer=function(o,f){return this.toArrayLike(s,o,f)}),i.prototype.toArray=function(o,f){return this.toArrayLike(Array,o,f)};var T=function(o,f){return o.allocUnsafe?o.allocUnsafe(f):new o(f)};i.prototype.toArrayLike=function(o,f,l){this._strip();var m=this.byteLength(),b=l||Math.max(1,m);t(m<=b,"byte array longer than desired length"),t(b>0,"Requested array length <= 0");var p=T(o,b),x=f==="le"?"LE":"BE";return this["_toArrayLike"+x](p,m),p},i.prototype._toArrayLikeLE=function(o,f){for(var l=0,m=0,b=0,p=0;b<this.length;b++){var x=this.words[b]<<p|m;o[l++]=x&255,l<o.length&&(o[l++]=x>>8&255),l<o.length&&(o[l++]=x>>16&255),p===6?(l<o.length&&(o[l++]=x>>24&255),m=0,p=0):(m=x>>>24,p+=2)}if(l<o.length)for(o[l++]=m;l<o.length;)o[l++]=0},i.prototype._toArrayLikeBE=function(o,f){for(var l=o.length-1,m=0,b=0,p=0;b<this.length;b++){var x=this.words[b]<<p|m;o[l--]=x&255,l>=0&&(o[l--]=x>>8&255),l>=0&&(o[l--]=x>>16&255),p===6?(l>=0&&(o[l--]=x>>24&255),m=0,p=0):(m=x>>>24,p+=2)}if(l>=0)for(o[l--]=m;l>=0;)o[l--]=0},Math.clz32?i.prototype._countBits=function(o){return 32-Math.clz32(o)}:i.prototype._countBits=function(o){var f=o,l=0;return f>=4096&&(l+=13,f>>>=13),f>=64&&(l+=7,f>>>=7),f>=8&&(l+=4,f>>>=4),f>=2&&(l+=2,f>>>=2),l+f},i.prototype._zeroBits=function(o){if(o===0)return 26;var f=o,l=0;return f&8191||(l+=13,f>>>=13),f&127||(l+=7,f>>>=7),f&15||(l+=4,f>>>=4),f&3||(l+=2,f>>>=2),f&1||l++,l},i.prototype.bitLength=function(){var o=this.words[this.length-1],f=this._countBits(o);return(this.length-1)*26+f};function C(h){for(var o=new Array(h.bitLength()),f=0;f<o.length;f++){var l=f/26|0,m=f%26;o[f]=h.words[l]>>>m&1}return o}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,f=0;f<this.length;f++){var l=this._zeroBits(this.words[f]);if(o+=l,l!==26)break}return o},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(o){return this.negative!==0?this.abs().inotn(o).iaddn(1):this.clone()},i.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var f=0;f<o.length;f++)this.words[f]=this.words[f]|o.words[f];return this._strip()},i.prototype.ior=function(o){return t((this.negative|o.negative)===0),this.iuor(o)},i.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},i.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},i.prototype.iuand=function(o){var f;this.length>o.length?f=o:f=this;for(var l=0;l<f.length;l++)this.words[l]=this.words[l]&o.words[l];return this.length=f.length,this._strip()},i.prototype.iand=function(o){return t((this.negative|o.negative)===0),this.iuand(o)},i.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},i.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},i.prototype.iuxor=function(o){var f,l;this.length>o.length?(f=this,l=o):(f=o,l=this);for(var m=0;m<l.length;m++)this.words[m]=f.words[m]^l.words[m];if(this!==f)for(;m<f.length;m++)this.words[m]=f.words[m];return this.length=f.length,this._strip()},i.prototype.ixor=function(o){return t((this.negative|o.negative)===0),this.iuxor(o)},i.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},i.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},i.prototype.inotn=function(o){t(typeof o=="number"&&o>=0);var f=Math.ceil(o/26)|0,l=o%26;this._expand(f),l>0&&f--;for(var m=0;m<f;m++)this.words[m]=~this.words[m]&67108863;return l>0&&(this.words[m]=~this.words[m]&67108863>>26-l),this._strip()},i.prototype.notn=function(o){return this.clone().inotn(o)},i.prototype.setn=function(o,f){t(typeof o=="number"&&o>=0);var l=o/26|0,m=o%26;return this._expand(l+1),f?this.words[l]=this.words[l]|1<<m:this.words[l]=this.words[l]&~(1<<m),this._strip()},i.prototype.iadd=function(o){var f;if(this.negative!==0&&o.negative===0)return this.negative=0,f=this.isub(o),this.negative^=1,this._normSign();if(this.negative===0&&o.negative!==0)return o.negative=0,f=this.isub(o),o.negative=1,f._normSign();var l,m;this.length>o.length?(l=this,m=o):(l=o,m=this);for(var b=0,p=0;p<m.length;p++)f=(l.words[p]|0)+(m.words[p]|0)+b,this.words[p]=f&67108863,b=f>>>26;for(;b!==0&&p<l.length;p++)f=(l.words[p]|0)+b,this.words[p]=f&67108863,b=f>>>26;if(this.length=l.length,b!==0)this.words[this.length]=b,this.length++;else if(l!==this)for(;p<l.length;p++)this.words[p]=l.words[p];return this},i.prototype.add=function(o){var f;return o.negative!==0&&this.negative===0?(o.negative=0,f=this.sub(o),o.negative^=1,f):o.negative===0&&this.negative!==0?(this.negative=0,f=o.sub(this),this.negative=1,f):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},i.prototype.isub=function(o){if(o.negative!==0){o.negative=0;var f=this.iadd(o);return o.negative=1,f._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var l=this.cmp(o);if(l===0)return this.negative=0,this.length=1,this.words[0]=0,this;var m,b;l>0?(m=this,b=o):(m=o,b=this);for(var p=0,x=0;x<b.length;x++)f=(m.words[x]|0)-(b.words[x]|0)+p,p=f>>26,this.words[x]=f&67108863;for(;p!==0&&x<m.length;x++)f=(m.words[x]|0)+p,p=f>>26,this.words[x]=f&67108863;if(p===0&&x<m.length&&m!==this)for(;x<m.length;x++)this.words[x]=m.words[x];return this.length=Math.max(this.length,x),m!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(o){return this.clone().isub(o)};function z(h,o,f){f.negative=o.negative^h.negative;var l=h.length+o.length|0;f.length=l,l=l-1|0;var m=h.words[0]|0,b=o.words[0]|0,p=m*b,x=p&67108863,_=p/67108864|0;f.words[0]=x;for(var c=1;c<l;c++){for(var g=_>>>26,G=_&67108863,A=Math.min(c,o.length-1),U=Math.max(0,c-h.length+1);U<=A;U++){var K=c-U|0;m=h.words[K]|0,b=o.words[U]|0,p=m*b+G,g+=p/67108864|0,G=p&67108863}f.words[c]=G|0,_=g|0}return _!==0?f.words[c]=_|0:f.length--,f._strip()}var I=function(o,f,l){var m=o.words,b=f.words,p=l.words,x=0,_,c,g,G=m[0]|0,A=G&8191,U=G>>>13,K=m[1]|0,O=K&8191,R=K>>>13,J=m[2]|0,j=J&8191,Q=J>>>13,he=m[3]|0,ie=he&8191,W=he>>>13,le=m[4]|0,Z=le&8191,oe=le>>>13,$=m[5]|0,re=$&8191,ce=$>>>13,Ue=m[6]|0,me=Ue&8191,xe=Ue>>>13,_t=m[7]|0,ee=_t&8191,V=_t>>>13,N=m[8]|0,F=N&8191,ne=N>>>13,ae=m[9]|0,se=ae&8191,ue=ae>>>13,Xe=b[0]|0,be=Xe&8191,pe=Xe>>>13,Qe=b[1]|0,ge=Qe&8191,we=Qe>>>13,hr=b[2]|0,_e=hr&8191,Me=hr>>>13,lr=b[3]|0,Se=lr&8191,Ae=lr>>>13,dr=b[4]|0,Te=dr&8191,ke=dr>>>13,pr=b[5]|0,Ce=pr&8191,De=pr>>>13,mr=b[6]|0,Ie=mr&8191,Oe=mr>>>13,br=b[7]|0,Re=br&8191,Ne=br>>>13,vr=b[8]|0,Pe=vr&8191,Be=vr>>>13,or=b[9]|0,Fe=or&8191,qe=or>>>13;l.negative=o.negative^f.negative,l.length=19,_=Math.imul(A,be),c=Math.imul(A,pe),c=c+Math.imul(U,be)|0,g=Math.imul(U,pe);var Ft=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,_=Math.imul(O,be),c=Math.imul(O,pe),c=c+Math.imul(R,be)|0,g=Math.imul(R,pe),_=_+Math.imul(A,ge)|0,c=c+Math.imul(A,we)|0,c=c+Math.imul(U,ge)|0,g=g+Math.imul(U,we)|0;var qt=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(qt>>>26)|0,qt&=67108863,_=Math.imul(j,be),c=Math.imul(j,pe),c=c+Math.imul(Q,be)|0,g=Math.imul(Q,pe),_=_+Math.imul(O,ge)|0,c=c+Math.imul(O,we)|0,c=c+Math.imul(R,ge)|0,g=g+Math.imul(R,we)|0,_=_+Math.imul(A,_e)|0,c=c+Math.imul(A,Me)|0,c=c+Math.imul(U,_e)|0,g=g+Math.imul(U,Me)|0;var Ht=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,_=Math.imul(ie,be),c=Math.imul(ie,pe),c=c+Math.imul(W,be)|0,g=Math.imul(W,pe),_=_+Math.imul(j,ge)|0,c=c+Math.imul(j,we)|0,c=c+Math.imul(Q,ge)|0,g=g+Math.imul(Q,we)|0,_=_+Math.imul(O,_e)|0,c=c+Math.imul(O,Me)|0,c=c+Math.imul(R,_e)|0,g=g+Math.imul(R,Me)|0,_=_+Math.imul(A,Se)|0,c=c+Math.imul(A,Ae)|0,c=c+Math.imul(U,Se)|0,g=g+Math.imul(U,Ae)|0;var zt=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(zt>>>26)|0,zt&=67108863,_=Math.imul(Z,be),c=Math.imul(Z,pe),c=c+Math.imul(oe,be)|0,g=Math.imul(oe,pe),_=_+Math.imul(ie,ge)|0,c=c+Math.imul(ie,we)|0,c=c+Math.imul(W,ge)|0,g=g+Math.imul(W,we)|0,_=_+Math.imul(j,_e)|0,c=c+Math.imul(j,Me)|0,c=c+Math.imul(Q,_e)|0,g=g+Math.imul(Q,Me)|0,_=_+Math.imul(O,Se)|0,c=c+Math.imul(O,Ae)|0,c=c+Math.imul(R,Se)|0,g=g+Math.imul(R,Ae)|0,_=_+Math.imul(A,Te)|0,c=c+Math.imul(A,ke)|0,c=c+Math.imul(U,Te)|0,g=g+Math.imul(U,ke)|0;var Kt=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,_=Math.imul(re,be),c=Math.imul(re,pe),c=c+Math.imul(ce,be)|0,g=Math.imul(ce,pe),_=_+Math.imul(Z,ge)|0,c=c+Math.imul(Z,we)|0,c=c+Math.imul(oe,ge)|0,g=g+Math.imul(oe,we)|0,_=_+Math.imul(ie,_e)|0,c=c+Math.imul(ie,Me)|0,c=c+Math.imul(W,_e)|0,g=g+Math.imul(W,Me)|0,_=_+Math.imul(j,Se)|0,c=c+Math.imul(j,Ae)|0,c=c+Math.imul(Q,Se)|0,g=g+Math.imul(Q,Ae)|0,_=_+Math.imul(O,Te)|0,c=c+Math.imul(O,ke)|0,c=c+Math.imul(R,Te)|0,g=g+Math.imul(R,ke)|0,_=_+Math.imul(A,Ce)|0,c=c+Math.imul(A,De)|0,c=c+Math.imul(U,Ce)|0,g=g+Math.imul(U,De)|0;var Yr=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,_=Math.imul(me,be),c=Math.imul(me,pe),c=c+Math.imul(xe,be)|0,g=Math.imul(xe,pe),_=_+Math.imul(re,ge)|0,c=c+Math.imul(re,we)|0,c=c+Math.imul(ce,ge)|0,g=g+Math.imul(ce,we)|0,_=_+Math.imul(Z,_e)|0,c=c+Math.imul(Z,Me)|0,c=c+Math.imul(oe,_e)|0,g=g+Math.imul(oe,Me)|0,_=_+Math.imul(ie,Se)|0,c=c+Math.imul(ie,Ae)|0,c=c+Math.imul(W,Se)|0,g=g+Math.imul(W,Ae)|0,_=_+Math.imul(j,Te)|0,c=c+Math.imul(j,ke)|0,c=c+Math.imul(Q,Te)|0,g=g+Math.imul(Q,ke)|0,_=_+Math.imul(O,Ce)|0,c=c+Math.imul(O,De)|0,c=c+Math.imul(R,Ce)|0,g=g+Math.imul(R,De)|0,_=_+Math.imul(A,Ie)|0,c=c+Math.imul(A,Oe)|0,c=c+Math.imul(U,Ie)|0,g=g+Math.imul(U,Oe)|0;var Xr=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,_=Math.imul(ee,be),c=Math.imul(ee,pe),c=c+Math.imul(V,be)|0,g=Math.imul(V,pe),_=_+Math.imul(me,ge)|0,c=c+Math.imul(me,we)|0,c=c+Math.imul(xe,ge)|0,g=g+Math.imul(xe,we)|0,_=_+Math.imul(re,_e)|0,c=c+Math.imul(re,Me)|0,c=c+Math.imul(ce,_e)|0,g=g+Math.imul(ce,Me)|0,_=_+Math.imul(Z,Se)|0,c=c+Math.imul(Z,Ae)|0,c=c+Math.imul(oe,Se)|0,g=g+Math.imul(oe,Ae)|0,_=_+Math.imul(ie,Te)|0,c=c+Math.imul(ie,ke)|0,c=c+Math.imul(W,Te)|0,g=g+Math.imul(W,ke)|0,_=_+Math.imul(j,Ce)|0,c=c+Math.imul(j,De)|0,c=c+Math.imul(Q,Ce)|0,g=g+Math.imul(Q,De)|0,_=_+Math.imul(O,Ie)|0,c=c+Math.imul(O,Oe)|0,c=c+Math.imul(R,Ie)|0,g=g+Math.imul(R,Oe)|0,_=_+Math.imul(A,Re)|0,c=c+Math.imul(A,Ne)|0,c=c+Math.imul(U,Re)|0,g=g+Math.imul(U,Ne)|0;var Zr=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,_=Math.imul(F,be),c=Math.imul(F,pe),c=c+Math.imul(ne,be)|0,g=Math.imul(ne,pe),_=_+Math.imul(ee,ge)|0,c=c+Math.imul(ee,we)|0,c=c+Math.imul(V,ge)|0,g=g+Math.imul(V,we)|0,_=_+Math.imul(me,_e)|0,c=c+Math.imul(me,Me)|0,c=c+Math.imul(xe,_e)|0,g=g+Math.imul(xe,Me)|0,_=_+Math.imul(re,Se)|0,c=c+Math.imul(re,Ae)|0,c=c+Math.imul(ce,Se)|0,g=g+Math.imul(ce,Ae)|0,_=_+Math.imul(Z,Te)|0,c=c+Math.imul(Z,ke)|0,c=c+Math.imul(oe,Te)|0,g=g+Math.imul(oe,ke)|0,_=_+Math.imul(ie,Ce)|0,c=c+Math.imul(ie,De)|0,c=c+Math.imul(W,Ce)|0,g=g+Math.imul(W,De)|0,_=_+Math.imul(j,Ie)|0,c=c+Math.imul(j,Oe)|0,c=c+Math.imul(Q,Ie)|0,g=g+Math.imul(Q,Oe)|0,_=_+Math.imul(O,Re)|0,c=c+Math.imul(O,Ne)|0,c=c+Math.imul(R,Re)|0,g=g+Math.imul(R,Ne)|0,_=_+Math.imul(A,Pe)|0,c=c+Math.imul(A,Be)|0,c=c+Math.imul(U,Pe)|0,g=g+Math.imul(U,Be)|0;var Qr=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,_=Math.imul(se,be),c=Math.imul(se,pe),c=c+Math.imul(ue,be)|0,g=Math.imul(ue,pe),_=_+Math.imul(F,ge)|0,c=c+Math.imul(F,we)|0,c=c+Math.imul(ne,ge)|0,g=g+Math.imul(ne,we)|0,_=_+Math.imul(ee,_e)|0,c=c+Math.imul(ee,Me)|0,c=c+Math.imul(V,_e)|0,g=g+Math.imul(V,Me)|0,_=_+Math.imul(me,Se)|0,c=c+Math.imul(me,Ae)|0,c=c+Math.imul(xe,Se)|0,g=g+Math.imul(xe,Ae)|0,_=_+Math.imul(re,Te)|0,c=c+Math.imul(re,ke)|0,c=c+Math.imul(ce,Te)|0,g=g+Math.imul(ce,ke)|0,_=_+Math.imul(Z,Ce)|0,c=c+Math.imul(Z,De)|0,c=c+Math.imul(oe,Ce)|0,g=g+Math.imul(oe,De)|0,_=_+Math.imul(ie,Ie)|0,c=c+Math.imul(ie,Oe)|0,c=c+Math.imul(W,Ie)|0,g=g+Math.imul(W,Oe)|0,_=_+Math.imul(j,Re)|0,c=c+Math.imul(j,Ne)|0,c=c+Math.imul(Q,Re)|0,g=g+Math.imul(Q,Ne)|0,_=_+Math.imul(O,Pe)|0,c=c+Math.imul(O,Be)|0,c=c+Math.imul(R,Pe)|0,g=g+Math.imul(R,Be)|0,_=_+Math.imul(A,Fe)|0,c=c+Math.imul(A,qe)|0,c=c+Math.imul(U,Fe)|0,g=g+Math.imul(U,qe)|0;var en=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(en>>>26)|0,en&=67108863,_=Math.imul(se,ge),c=Math.imul(se,we),c=c+Math.imul(ue,ge)|0,g=Math.imul(ue,we),_=_+Math.imul(F,_e)|0,c=c+Math.imul(F,Me)|0,c=c+Math.imul(ne,_e)|0,g=g+Math.imul(ne,Me)|0,_=_+Math.imul(ee,Se)|0,c=c+Math.imul(ee,Ae)|0,c=c+Math.imul(V,Se)|0,g=g+Math.imul(V,Ae)|0,_=_+Math.imul(me,Te)|0,c=c+Math.imul(me,ke)|0,c=c+Math.imul(xe,Te)|0,g=g+Math.imul(xe,ke)|0,_=_+Math.imul(re,Ce)|0,c=c+Math.imul(re,De)|0,c=c+Math.imul(ce,Ce)|0,g=g+Math.imul(ce,De)|0,_=_+Math.imul(Z,Ie)|0,c=c+Math.imul(Z,Oe)|0,c=c+Math.imul(oe,Ie)|0,g=g+Math.imul(oe,Oe)|0,_=_+Math.imul(ie,Re)|0,c=c+Math.imul(ie,Ne)|0,c=c+Math.imul(W,Re)|0,g=g+Math.imul(W,Ne)|0,_=_+Math.imul(j,Pe)|0,c=c+Math.imul(j,Be)|0,c=c+Math.imul(Q,Pe)|0,g=g+Math.imul(Q,Be)|0,_=_+Math.imul(O,Fe)|0,c=c+Math.imul(O,qe)|0,c=c+Math.imul(R,Fe)|0,g=g+Math.imul(R,qe)|0;var tn=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(tn>>>26)|0,tn&=67108863,_=Math.imul(se,_e),c=Math.imul(se,Me),c=c+Math.imul(ue,_e)|0,g=Math.imul(ue,Me),_=_+Math.imul(F,Se)|0,c=c+Math.imul(F,Ae)|0,c=c+Math.imul(ne,Se)|0,g=g+Math.imul(ne,Ae)|0,_=_+Math.imul(ee,Te)|0,c=c+Math.imul(ee,ke)|0,c=c+Math.imul(V,Te)|0,g=g+Math.imul(V,ke)|0,_=_+Math.imul(me,Ce)|0,c=c+Math.imul(me,De)|0,c=c+Math.imul(xe,Ce)|0,g=g+Math.imul(xe,De)|0,_=_+Math.imul(re,Ie)|0,c=c+Math.imul(re,Oe)|0,c=c+Math.imul(ce,Ie)|0,g=g+Math.imul(ce,Oe)|0,_=_+Math.imul(Z,Re)|0,c=c+Math.imul(Z,Ne)|0,c=c+Math.imul(oe,Re)|0,g=g+Math.imul(oe,Ne)|0,_=_+Math.imul(ie,Pe)|0,c=c+Math.imul(ie,Be)|0,c=c+Math.imul(W,Pe)|0,g=g+Math.imul(W,Be)|0,_=_+Math.imul(j,Fe)|0,c=c+Math.imul(j,qe)|0,c=c+Math.imul(Q,Fe)|0,g=g+Math.imul(Q,qe)|0;var rn=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(rn>>>26)|0,rn&=67108863,_=Math.imul(se,Se),c=Math.imul(se,Ae),c=c+Math.imul(ue,Se)|0,g=Math.imul(ue,Ae),_=_+Math.imul(F,Te)|0,c=c+Math.imul(F,ke)|0,c=c+Math.imul(ne,Te)|0,g=g+Math.imul(ne,ke)|0,_=_+Math.imul(ee,Ce)|0,c=c+Math.imul(ee,De)|0,c=c+Math.imul(V,Ce)|0,g=g+Math.imul(V,De)|0,_=_+Math.imul(me,Ie)|0,c=c+Math.imul(me,Oe)|0,c=c+Math.imul(xe,Ie)|0,g=g+Math.imul(xe,Oe)|0,_=_+Math.imul(re,Re)|0,c=c+Math.imul(re,Ne)|0,c=c+Math.imul(ce,Re)|0,g=g+Math.imul(ce,Ne)|0,_=_+Math.imul(Z,Pe)|0,c=c+Math.imul(Z,Be)|0,c=c+Math.imul(oe,Pe)|0,g=g+Math.imul(oe,Be)|0,_=_+Math.imul(ie,Fe)|0,c=c+Math.imul(ie,qe)|0,c=c+Math.imul(W,Fe)|0,g=g+Math.imul(W,qe)|0;var nn=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(nn>>>26)|0,nn&=67108863,_=Math.imul(se,Te),c=Math.imul(se,ke),c=c+Math.imul(ue,Te)|0,g=Math.imul(ue,ke),_=_+Math.imul(F,Ce)|0,c=c+Math.imul(F,De)|0,c=c+Math.imul(ne,Ce)|0,g=g+Math.imul(ne,De)|0,_=_+Math.imul(ee,Ie)|0,c=c+Math.imul(ee,Oe)|0,c=c+Math.imul(V,Ie)|0,g=g+Math.imul(V,Oe)|0,_=_+Math.imul(me,Re)|0,c=c+Math.imul(me,Ne)|0,c=c+Math.imul(xe,Re)|0,g=g+Math.imul(xe,Ne)|0,_=_+Math.imul(re,Pe)|0,c=c+Math.imul(re,Be)|0,c=c+Math.imul(ce,Pe)|0,g=g+Math.imul(ce,Be)|0,_=_+Math.imul(Z,Fe)|0,c=c+Math.imul(Z,qe)|0,c=c+Math.imul(oe,Fe)|0,g=g+Math.imul(oe,qe)|0;var on=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(on>>>26)|0,on&=67108863,_=Math.imul(se,Ce),c=Math.imul(se,De),c=c+Math.imul(ue,Ce)|0,g=Math.imul(ue,De),_=_+Math.imul(F,Ie)|0,c=c+Math.imul(F,Oe)|0,c=c+Math.imul(ne,Ie)|0,g=g+Math.imul(ne,Oe)|0,_=_+Math.imul(ee,Re)|0,c=c+Math.imul(ee,Ne)|0,c=c+Math.imul(V,Re)|0,g=g+Math.imul(V,Ne)|0,_=_+Math.imul(me,Pe)|0,c=c+Math.imul(me,Be)|0,c=c+Math.imul(xe,Pe)|0,g=g+Math.imul(xe,Be)|0,_=_+Math.imul(re,Fe)|0,c=c+Math.imul(re,qe)|0,c=c+Math.imul(ce,Fe)|0,g=g+Math.imul(ce,qe)|0;var sn=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(sn>>>26)|0,sn&=67108863,_=Math.imul(se,Ie),c=Math.imul(se,Oe),c=c+Math.imul(ue,Ie)|0,g=Math.imul(ue,Oe),_=_+Math.imul(F,Re)|0,c=c+Math.imul(F,Ne)|0,c=c+Math.imul(ne,Re)|0,g=g+Math.imul(ne,Ne)|0,_=_+Math.imul(ee,Pe)|0,c=c+Math.imul(ee,Be)|0,c=c+Math.imul(V,Pe)|0,g=g+Math.imul(V,Be)|0,_=_+Math.imul(me,Fe)|0,c=c+Math.imul(me,qe)|0,c=c+Math.imul(xe,Fe)|0,g=g+Math.imul(xe,qe)|0;var an=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(an>>>26)|0,an&=67108863,_=Math.imul(se,Re),c=Math.imul(se,Ne),c=c+Math.imul(ue,Re)|0,g=Math.imul(ue,Ne),_=_+Math.imul(F,Pe)|0,c=c+Math.imul(F,Be)|0,c=c+Math.imul(ne,Pe)|0,g=g+Math.imul(ne,Be)|0,_=_+Math.imul(ee,Fe)|0,c=c+Math.imul(ee,qe)|0,c=c+Math.imul(V,Fe)|0,g=g+Math.imul(V,qe)|0;var Wi=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(Wi>>>26)|0,Wi&=67108863,_=Math.imul(se,Pe),c=Math.imul(se,Be),c=c+Math.imul(ue,Pe)|0,g=Math.imul(ue,Be),_=_+Math.imul(F,Fe)|0,c=c+Math.imul(F,qe)|0,c=c+Math.imul(ne,Fe)|0,g=g+Math.imul(ne,qe)|0;var Yi=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(Yi>>>26)|0,Yi&=67108863,_=Math.imul(se,Fe),c=Math.imul(se,qe),c=c+Math.imul(ue,Fe)|0,g=Math.imul(ue,qe);var Xi=(x+_|0)+((c&8191)<<13)|0;return x=(g+(c>>>13)|0)+(Xi>>>26)|0,Xi&=67108863,p[0]=Ft,p[1]=qt,p[2]=Ht,p[3]=zt,p[4]=Kt,p[5]=Yr,p[6]=Xr,p[7]=Zr,p[8]=Qr,p[9]=en,p[10]=tn,p[11]=rn,p[12]=nn,p[13]=on,p[14]=sn,p[15]=an,p[16]=Wi,p[17]=Yi,p[18]=Xi,x!==0&&(p[19]=x,l.length++),l};Math.imul||(I=z);function q(h,o,f){f.negative=o.negative^h.negative,f.length=h.length+o.length;for(var l=0,m=0,b=0;b<f.length-1;b++){var p=m;m=0;for(var x=l&67108863,_=Math.min(b,o.length-1),c=Math.max(0,b-h.length+1);c<=_;c++){var g=b-c,G=h.words[g]|0,A=o.words[c]|0,U=G*A,K=U&67108863;p=p+(U/67108864|0)|0,K=K+x|0,x=K&67108863,p=p+(K>>>26)|0,m+=p>>>26,p&=67108863}f.words[b]=x,l=p,p=m}return l!==0?f.words[b]=l:f.length--,f._strip()}function Y(h,o,f){return q(h,o,f)}i.prototype.mulTo=function(o,f){var l,m=this.length+o.length;return this.length===10&&o.length===10?l=I(this,o,f):m<63?l=z(this,o,f):m<1024?l=q(this,o,f):l=Y(this,o,f),l};function H(h,o){this.x=h,this.y=o}H.prototype.makeRBT=function(o){for(var f=new Array(o),l=i.prototype._countBits(o)-1,m=0;m<o;m++)f[m]=this.revBin(m,l,o);return f},H.prototype.revBin=function(o,f,l){if(o===0||o===l-1)return o;for(var m=0,b=0;b<f;b++)m|=(o&1)<<f-b-1,o>>=1;return m},H.prototype.permute=function(o,f,l,m,b,p){for(var x=0;x<p;x++)m[x]=f[o[x]],b[x]=l[o[x]]},H.prototype.transform=function(o,f,l,m,b,p){this.permute(p,o,f,l,m,b);for(var x=1;x<b;x<<=1)for(var _=x<<1,c=Math.cos(2*Math.PI/_),g=Math.sin(2*Math.PI/_),G=0;G<b;G+=_)for(var A=c,U=g,K=0;K<x;K++){var O=l[G+K],R=m[G+K],J=l[G+K+x],j=m[G+K+x],Q=A*J-U*j;j=A*j+U*J,J=Q,l[G+K]=O+J,m[G+K]=R+j,l[G+K+x]=O-J,m[G+K+x]=R-j,K!==_&&(Q=c*A-g*U,U=c*U+g*A,A=Q)}},H.prototype.guessLen13b=function(o,f){var l=Math.max(f,o)|1,m=l&1,b=0;for(l=l/2|0;l;l=l>>>1)b++;return 1<<b+1+m},H.prototype.conjugate=function(o,f,l){if(!(l<=1))for(var m=0;m<l/2;m++){var b=o[m];o[m]=o[l-m-1],o[l-m-1]=b,b=f[m],f[m]=-f[l-m-1],f[l-m-1]=-b}},H.prototype.normalize13b=function(o,f){for(var l=0,m=0;m<f/2;m++){var b=Math.round(o[2*m+1]/f)*8192+Math.round(o[2*m]/f)+l;o[m]=b&67108863,b<67108864?l=0:l=b/67108864|0}return o},H.prototype.convert13b=function(o,f,l,m){for(var b=0,p=0;p<f;p++)b=b+(o[p]|0),l[2*p]=b&8191,b=b>>>13,l[2*p+1]=b&8191,b=b>>>13;for(p=2*f;p<m;++p)l[p]=0;t(b===0),t((b&-8192)===0)},H.prototype.stub=function(o){for(var f=new Array(o),l=0;l<o;l++)f[l]=0;return f},H.prototype.mulp=function(o,f,l){var m=2*this.guessLen13b(o.length,f.length),b=this.makeRBT(m),p=this.stub(m),x=new Array(m),_=new Array(m),c=new Array(m),g=new Array(m),G=new Array(m),A=new Array(m),U=l.words;U.length=m,this.convert13b(o.words,o.length,x,m),this.convert13b(f.words,f.length,g,m),this.transform(x,p,_,c,m,b),this.transform(g,p,G,A,m,b);for(var K=0;K<m;K++){var O=_[K]*G[K]-c[K]*A[K];c[K]=_[K]*A[K]+c[K]*G[K],_[K]=O}return this.conjugate(_,c,m),this.transform(_,c,U,p,m,b),this.conjugate(U,p,m),this.normalize13b(U,m),l.negative=o.negative^f.negative,l.length=o.length+f.length,l._strip()},i.prototype.mul=function(o){var f=new i(null);return f.words=new Array(this.length+o.length),this.mulTo(o,f)},i.prototype.mulf=function(o){var f=new i(null);return f.words=new Array(this.length+o.length),Y(this,o,f)},i.prototype.imul=function(o){return this.clone().mulTo(o,this)},i.prototype.imuln=function(o){var f=o<0;f&&(o=-o),t(typeof o=="number"),t(o<67108864);for(var l=0,m=0;m<this.length;m++){var b=(this.words[m]|0)*o,p=(b&67108863)+(l&67108863);l>>=26,l+=b/67108864|0,l+=p>>>26,this.words[m]=p&67108863}return l!==0&&(this.words[m]=l,this.length++),f?this.ineg():this},i.prototype.muln=function(o){return this.clone().imuln(o)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(o){var f=C(o);if(f.length===0)return new i(1);for(var l=this,m=0;m<f.length&&f[m]===0;m++,l=l.sqr());if(++m<f.length)for(var b=l.sqr();m<f.length;m++,b=b.sqr())f[m]!==0&&(l=l.mul(b));return l},i.prototype.iushln=function(o){t(typeof o=="number"&&o>=0);var f=o%26,l=(o-f)/26,m=67108863>>>26-f<<26-f,b;if(f!==0){var p=0;for(b=0;b<this.length;b++){var x=this.words[b]&m,_=(this.words[b]|0)-x<<f;this.words[b]=_|p,p=x>>>26-f}p&&(this.words[b]=p,this.length++)}if(l!==0){for(b=this.length-1;b>=0;b--)this.words[b+l]=this.words[b];for(b=0;b<l;b++)this.words[b]=0;this.length+=l}return this._strip()},i.prototype.ishln=function(o){return t(this.negative===0),this.iushln(o)},i.prototype.iushrn=function(o,f,l){t(typeof o=="number"&&o>=0);var m;f?m=(f-f%26)/26:m=0;var b=o%26,p=Math.min((o-b)/26,this.length),x=67108863^67108863>>>b<<b,_=l;if(m-=p,m=Math.max(0,m),_){for(var c=0;c<p;c++)_.words[c]=this.words[c];_.length=p}if(p!==0)if(this.length>p)for(this.length-=p,c=0;c<this.length;c++)this.words[c]=this.words[c+p];else this.words[0]=0,this.length=1;var g=0;for(c=this.length-1;c>=0&&(g!==0||c>=m);c--){var G=this.words[c]|0;this.words[c]=g<<26-b|G>>>b,g=G&x}return _&&g!==0&&(_.words[_.length++]=g),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(o,f,l){return t(this.negative===0),this.iushrn(o,f,l)},i.prototype.shln=function(o){return this.clone().ishln(o)},i.prototype.ushln=function(o){return this.clone().iushln(o)},i.prototype.shrn=function(o){return this.clone().ishrn(o)},i.prototype.ushrn=function(o){return this.clone().iushrn(o)},i.prototype.testn=function(o){t(typeof o=="number"&&o>=0);var f=o%26,l=(o-f)/26,m=1<<f;if(this.length<=l)return!1;var b=this.words[l];return!!(b&m)},i.prototype.imaskn=function(o){t(typeof o=="number"&&o>=0);var f=o%26,l=(o-f)/26;if(t(this.negative===0,"imaskn works only with positive numbers"),this.length<=l)return this;if(f!==0&&l++,this.length=Math.min(l,this.length),f!==0){var m=67108863^67108863>>>f<<f;this.words[this.length-1]&=m}return this._strip()},i.prototype.maskn=function(o){return this.clone().imaskn(o)},i.prototype.iaddn=function(o){return t(typeof o=="number"),t(o<67108864),o<0?this.isubn(-o):this.negative!==0?this.length===1&&(this.words[0]|0)<=o?(this.words[0]=o-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},i.prototype._iaddn=function(o){this.words[0]+=o;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},i.prototype.isubn=function(o){if(t(typeof o=="number"),t(o<67108864),o<0)return this.iaddn(-o);if(this.negative!==0)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this._strip()},i.prototype.addn=function(o){return this.clone().iaddn(o)},i.prototype.subn=function(o){return this.clone().isubn(o)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(o,f,l){var m=o.length+l,b;this._expand(m);var p,x=0;for(b=0;b<o.length;b++){p=(this.words[b+l]|0)+x;var _=(o.words[b]|0)*f;p-=_&67108863,x=(p>>26)-(_/67108864|0),this.words[b+l]=p&67108863}for(;b<this.length-l;b++)p=(this.words[b+l]|0)+x,x=p>>26,this.words[b+l]=p&67108863;if(x===0)return this._strip();for(t(x===-1),x=0,b=0;b<this.length;b++)p=-(this.words[b]|0)+x,x=p>>26,this.words[b]=p&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(o,f){var l=this.length-o.length,m=this.clone(),b=o,p=b.words[b.length-1]|0,x=this._countBits(p);l=26-x,l!==0&&(b=b.ushln(l),m.iushln(l),p=b.words[b.length-1]|0);var _=m.length-b.length,c;if(f!=="mod"){c=new i(null),c.length=_+1,c.words=new Array(c.length);for(var g=0;g<c.length;g++)c.words[g]=0}var G=m.clone()._ishlnsubmul(b,1,_);G.negative===0&&(m=G,c&&(c.words[_]=1));for(var A=_-1;A>=0;A--){var U=(m.words[b.length+A]|0)*67108864+(m.words[b.length+A-1]|0);for(U=Math.min(U/p|0,67108863),m._ishlnsubmul(b,U,A);m.negative!==0;)U--,m.negative=0,m._ishlnsubmul(b,1,A),m.isZero()||(m.negative^=1);c&&(c.words[A]=U)}return c&&c._strip(),m._strip(),f!=="div"&&l!==0&&m.iushrn(l),{div:c||null,mod:m}},i.prototype.divmod=function(o,f,l){if(t(!o.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var m,b,p;return this.negative!==0&&o.negative===0?(p=this.neg().divmod(o,f),f!=="mod"&&(m=p.div.neg()),f!=="div"&&(b=p.mod.neg(),l&&b.negative!==0&&b.iadd(o)),{div:m,mod:b}):this.negative===0&&o.negative!==0?(p=this.divmod(o.neg(),f),f!=="mod"&&(m=p.div.neg()),{div:m,mod:p.mod}):this.negative&o.negative?(p=this.neg().divmod(o.neg(),f),f!=="div"&&(b=p.mod.neg(),l&&b.negative!==0&&b.isub(o)),{div:p.div,mod:b}):o.length>this.length||this.cmp(o)<0?{div:new i(0),mod:this}:o.length===1?f==="div"?{div:this.divn(o.words[0]),mod:null}:f==="mod"?{div:null,mod:new i(this.modrn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new i(this.modrn(o.words[0]))}:this._wordDiv(o,f)},i.prototype.div=function(o){return this.divmod(o,"div",!1).div},i.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},i.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},i.prototype.divRound=function(o){var f=this.divmod(o);if(f.mod.isZero())return f.div;var l=f.div.negative!==0?f.mod.isub(o):f.mod,m=o.ushrn(1),b=o.andln(1),p=l.cmp(m);return p<0||b===1&&p===0?f.div:f.div.negative!==0?f.div.isubn(1):f.div.iaddn(1)},i.prototype.modrn=function(o){var f=o<0;f&&(o=-o),t(o<=67108863);for(var l=(1<<26)%o,m=0,b=this.length-1;b>=0;b--)m=(l*m+(this.words[b]|0))%o;return f?-m:m},i.prototype.modn=function(o){return this.modrn(o)},i.prototype.idivn=function(o){var f=o<0;f&&(o=-o),t(o<=67108863);for(var l=0,m=this.length-1;m>=0;m--){var b=(this.words[m]|0)+l*67108864;this.words[m]=b/o|0,l=b%o}return this._strip(),f?this.ineg():this},i.prototype.divn=function(o){return this.clone().idivn(o)},i.prototype.egcd=function(o){t(o.negative===0),t(!o.isZero());var f=this,l=o.clone();f.negative!==0?f=f.umod(o):f=f.clone();for(var m=new i(1),b=new i(0),p=new i(0),x=new i(1),_=0;f.isEven()&&l.isEven();)f.iushrn(1),l.iushrn(1),++_;for(var c=l.clone(),g=f.clone();!f.isZero();){for(var G=0,A=1;!(f.words[0]&A)&&G<26;++G,A<<=1);if(G>0)for(f.iushrn(G);G-- >0;)(m.isOdd()||b.isOdd())&&(m.iadd(c),b.isub(g)),m.iushrn(1),b.iushrn(1);for(var U=0,K=1;!(l.words[0]&K)&&U<26;++U,K<<=1);if(U>0)for(l.iushrn(U);U-- >0;)(p.isOdd()||x.isOdd())&&(p.iadd(c),x.isub(g)),p.iushrn(1),x.iushrn(1);f.cmp(l)>=0?(f.isub(l),m.isub(p),b.isub(x)):(l.isub(f),p.isub(m),x.isub(b))}return{a:p,b:x,gcd:l.iushln(_)}},i.prototype._invmp=function(o){t(o.negative===0),t(!o.isZero());var f=this,l=o.clone();f.negative!==0?f=f.umod(o):f=f.clone();for(var m=new i(1),b=new i(0),p=l.clone();f.cmpn(1)>0&&l.cmpn(1)>0;){for(var x=0,_=1;!(f.words[0]&_)&&x<26;++x,_<<=1);if(x>0)for(f.iushrn(x);x-- >0;)m.isOdd()&&m.iadd(p),m.iushrn(1);for(var c=0,g=1;!(l.words[0]&g)&&c<26;++c,g<<=1);if(c>0)for(l.iushrn(c);c-- >0;)b.isOdd()&&b.iadd(p),b.iushrn(1);f.cmp(l)>=0?(f.isub(l),m.isub(b)):(l.isub(f),b.isub(m))}var G;return f.cmpn(1)===0?G=m:G=b,G.cmpn(0)<0&&G.iadd(o),G},i.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var f=this.clone(),l=o.clone();f.negative=0,l.negative=0;for(var m=0;f.isEven()&&l.isEven();m++)f.iushrn(1),l.iushrn(1);do{for(;f.isEven();)f.iushrn(1);for(;l.isEven();)l.iushrn(1);var b=f.cmp(l);if(b<0){var p=f;f=l,l=p}else if(b===0||l.cmpn(1)===0)break;f.isub(l)}while(!0);return l.iushln(m)},i.prototype.invm=function(o){return this.egcd(o).a.umod(o)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(o){return this.words[0]&o},i.prototype.bincn=function(o){t(typeof o=="number");var f=o%26,l=(o-f)/26,m=1<<f;if(this.length<=l)return this._expand(l+1),this.words[l]|=m,this;for(var b=m,p=l;b!==0&&p<this.length;p++){var x=this.words[p]|0;x+=b,b=x>>>26,x&=67108863,this.words[p]=x}return b!==0&&(this.words[p]=b,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(o){var f=o<0;if(this.negative!==0&&!f)return-1;if(this.negative===0&&f)return 1;this._strip();var l;if(this.length>1)l=1;else{f&&(o=-o),t(o<=67108863,"Number is too big");var m=this.words[0]|0;l=m===o?0:m<o?-1:1}return this.negative!==0?-l|0:l},i.prototype.cmp=function(o){if(this.negative!==0&&o.negative===0)return-1;if(this.negative===0&&o.negative!==0)return 1;var f=this.ucmp(o);return this.negative!==0?-f|0:f},i.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var f=0,l=this.length-1;l>=0;l--){var m=this.words[l]|0,b=o.words[l]|0;if(m!==b){m<b?f=-1:m>b&&(f=1);break}}return f},i.prototype.gtn=function(o){return this.cmpn(o)===1},i.prototype.gt=function(o){return this.cmp(o)===1},i.prototype.gten=function(o){return this.cmpn(o)>=0},i.prototype.gte=function(o){return this.cmp(o)>=0},i.prototype.ltn=function(o){return this.cmpn(o)===-1},i.prototype.lt=function(o){return this.cmp(o)===-1},i.prototype.lten=function(o){return this.cmpn(o)<=0},i.prototype.lte=function(o){return this.cmp(o)<=0},i.prototype.eqn=function(o){return this.cmpn(o)===0},i.prototype.eq=function(o){return this.cmp(o)===0},i.red=function(o){return new d(o)},i.prototype.toRed=function(o){return t(!this.red,"Already a number in reduction context"),t(this.negative===0,"red works only with positives"),o.convertTo(this)._forceRed(o)},i.prototype.fromRed=function(){return t(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(o){return this.red=o,this},i.prototype.forceRed=function(o){return t(!this.red,"Already a number in reduction context"),this._forceRed(o)},i.prototype.redAdd=function(o){return t(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},i.prototype.redIAdd=function(o){return t(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},i.prototype.redSub=function(o){return t(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},i.prototype.redISub=function(o){return t(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},i.prototype.redShl=function(o){return t(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},i.prototype.redMul=function(o){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},i.prototype.redIMul=function(o){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},i.prototype.redSqr=function(){return t(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return t(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return t(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return t(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return t(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(o){return t(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var X={k256:null,p224:null,p192:null,p25519:null};function B(h,o){this.name=h,this.p=new i(o,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}B.prototype._tmp=function(){var o=new i(null);return o.words=new Array(Math.ceil(this.n/13)),o},B.prototype.ireduce=function(o){var f=o,l;do this.split(f,this.tmp),f=this.imulK(f),f=f.iadd(this.tmp),l=f.bitLength();while(l>this.n);var m=l<this.n?-1:f.ucmp(this.p);return m===0?(f.words[0]=0,f.length=1):m>0?f.isub(this.p):f.strip!==void 0?f.strip():f._strip(),f},B.prototype.split=function(o,f){o.iushrn(this.n,0,f)},B.prototype.imulK=function(o){return o.imul(this.k)};function P(){B.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(P,B),P.prototype.split=function(o,f){for(var l=4194303,m=Math.min(o.length,9),b=0;b<m;b++)f.words[b]=o.words[b];if(f.length=m,o.length<=9){o.words[0]=0,o.length=1;return}var p=o.words[9];for(f.words[f.length++]=p&l,b=10;b<o.length;b++){var x=o.words[b]|0;o.words[b-10]=(x&l)<<4|p>>>22,p=x}p>>>=22,o.words[b-10]=p,p===0&&o.length>10?o.length-=10:o.length-=9},P.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var f=0,l=0;l<o.length;l++){var m=o.words[l]|0;f+=m*977,o.words[l]=f&67108863,f=m*64+(f/67108864|0)}return o.words[o.length-1]===0&&(o.length--,o.words[o.length-1]===0&&o.length--),o};function L(){B.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(L,B);function te(){B.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(te,B);function S(){B.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(S,B),S.prototype.imulK=function(o){for(var f=0,l=0;l<o.length;l++){var m=(o.words[l]|0)*19+f,b=m&67108863;m>>>=26,o.words[l]=b,f=m}return f!==0&&(o.words[o.length++]=f),o},i._prime=function(o){if(X[o])return X[o];var f;if(o==="k256")f=new P;else if(o==="p224")f=new L;else if(o==="p192")f=new te;else if(o==="p25519")f=new S;else throw new Error("Unknown prime "+o);return X[o]=f,f};function d(h){if(typeof h=="string"){var o=i._prime(h);this.m=o.p,this.prime=o}else t(h.gtn(1),"modulus must be greater than 1"),this.m=h,this.prime=null}d.prototype._verify1=function(o){t(o.negative===0,"red works only with positives"),t(o.red,"red works only with red numbers")},d.prototype._verify2=function(o,f){t((o.negative|f.negative)===0,"red works only with positives"),t(o.red&&o.red===f.red,"red works only with red numbers")},d.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):(w(o,o.umod(this.m)._forceRed(this)),o)},d.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},d.prototype.add=function(o,f){this._verify2(o,f);var l=o.add(f);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},d.prototype.iadd=function(o,f){this._verify2(o,f);var l=o.iadd(f);return l.cmp(this.m)>=0&&l.isub(this.m),l},d.prototype.sub=function(o,f){this._verify2(o,f);var l=o.sub(f);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},d.prototype.isub=function(o,f){this._verify2(o,f);var l=o.isub(f);return l.cmpn(0)<0&&l.iadd(this.m),l},d.prototype.shl=function(o,f){return this._verify1(o),this.imod(o.ushln(f))},d.prototype.imul=function(o,f){return this._verify2(o,f),this.imod(o.imul(f))},d.prototype.mul=function(o,f){return this._verify2(o,f),this.imod(o.mul(f))},d.prototype.isqr=function(o){return this.imul(o,o.clone())},d.prototype.sqr=function(o){return this.mul(o,o)},d.prototype.sqrt=function(o){if(o.isZero())return o.clone();var f=this.m.andln(3);if(t(f%2===1),f===3){var l=this.m.add(new i(1)).iushrn(2);return this.pow(o,l)}for(var m=this.m.subn(1),b=0;!m.isZero()&&m.andln(1)===0;)b++,m.iushrn(1);t(!m.isZero());var p=new i(1).toRed(this),x=p.redNeg(),_=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new i(2*c*c).toRed(this);this.pow(c,_).cmp(x)!==0;)c.redIAdd(x);for(var g=this.pow(c,m),G=this.pow(o,m.addn(1).iushrn(1)),A=this.pow(o,m),U=b;A.cmp(p)!==0;){for(var K=A,O=0;K.cmp(p)!==0;O++)K=K.redSqr();t(O<U);var R=this.pow(g,new i(1).iushln(U-O-1));G=G.redMul(R),g=R.redSqr(),A=A.redMul(g),U=O}return G},d.prototype.invm=function(o){var f=o._invmp(this.m);return f.negative!==0?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},d.prototype.pow=function(o,f){if(f.isZero())return new i(1).toRed(this);if(f.cmpn(1)===0)return o.clone();var l=4,m=new Array(1<<l);m[0]=new i(1).toRed(this),m[1]=o;for(var b=2;b<m.length;b++)m[b]=this.mul(m[b-1],o);var p=m[0],x=0,_=0,c=f.bitLength()%26;for(c===0&&(c=26),b=f.length-1;b>=0;b--){for(var g=f.words[b],G=c-1;G>=0;G--){var A=g>>G&1;if(p!==m[0]&&(p=this.sqr(p)),A===0&&x===0){_=0;continue}x<<=1,x|=A,_++,!(_!==l&&(b!==0||G!==0))&&(p=this.mul(p,m[x]),_=0,x=0)}c=26}return p},d.prototype.convertTo=function(o){var f=o.umod(this.m);return f===o?f.clone():f},d.prototype.convertFrom=function(o){var f=o.clone();return f.red=null,f},i.mont=function(o){return new y(o)};function y(h){d.call(this,h),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(y,d),y.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},y.prototype.convertFrom=function(o){var f=this.imod(o.mul(this.rinv));return f.red=null,f},y.prototype.imul=function(o,f){if(o.isZero()||f.isZero())return o.words[0]=0,o.length=1,o;var l=o.imul(f),m=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=l.isub(m).iushrn(this.shift),p=b;return b.cmp(this.m)>=0?p=b.isub(this.m):b.cmpn(0)<0&&(p=b.iadd(this.m)),p._forceRed(this)},y.prototype.mul=function(o,f){if(o.isZero()||f.isZero())return new i(0)._forceRed(this);var l=o.mul(f),m=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=l.isub(m).iushrn(this.shift),p=b;return b.cmp(this.m)>=0?p=b.isub(this.m):b.cmpn(0)<0&&(p=b.iadd(this.m)),p._forceRed(this)},y.prototype.invm=function(o){var f=this.imod(o._invmp(this.m).mul(this.r2));return f._forceRed(this)}})(typeof n0>"u"||n0,av)});var o0=de((IB,qc)=>{(function(){"use strict";var r="input is invalid type",e="finalize already called",t=typeof window=="object",n=t?window:{};n.JS_SHA3_NO_WINDOW&&(t=!1);var i=!t&&typeof self=="object",s=!n.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;s?n=global:i&&(n=self);var a=!n.JS_SHA3_NO_COMMON_JS&&typeof qc=="object"&&qc.exports,u=typeof define=="function"&&define.amd,v=!n.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",w="0123456789abcdef".split(""),E=[31,7936,2031616,520093696],M=[4,1024,262144,67108864],k=[1,256,65536,16777216],D=[6,1536,393216,100663296],T=[0,8,16,24],C=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],z=[224,256,384,512],I=[128,256],q=["hex","buffer","arrayBuffer","array","digest"],Y={128:168,256:136};(n.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(A){return Object.prototype.toString.call(A)==="[object Array]"}),v&&(n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(A){return typeof A=="object"&&A.buffer&&A.buffer.constructor===ArrayBuffer});for(var H=function(A,U,K){return function(O){return new c(A,U,A).update(O)[K]()}},X=function(A,U,K){return function(O,R){return new c(A,U,R).update(O)[K]()}},B=function(A,U,K){return function(O,R,J,j){return o["cshake"+A].update(O,R,J,j)[K]()}},P=function(A,U,K){return function(O,R,J,j){return o["kmac"+A].update(O,R,J,j)[K]()}},L=function(A,U,K,O){for(var R=0;R<q.length;++R){var J=q[R];A[J]=U(K,O,J)}return A},te=function(A,U){var K=H(A,U,"hex");return K.create=function(){return new c(A,U,A)},K.update=function(O){return K.create().update(O)},L(K,H,A,U)},S=function(A,U){var K=X(A,U,"hex");return K.create=function(O){return new c(A,U,O)},K.update=function(O,R){return K.create(R).update(O)},L(K,X,A,U)},d=function(A,U){var K=Y[A],O=B(A,U,"hex");return O.create=function(R,J,j){return!J&&!j?o["shake"+A].create(R):new c(A,U,R).bytepad([J,j],K)},O.update=function(R,J,j,Q){return O.create(J,j,Q).update(R)},L(O,B,A,U)},y=function(A,U){var K=Y[A],O=P(A,U,"hex");return O.create=function(R,J,j){return new g(A,U,J).bytepad(["KMAC",j],K).bytepad([R],K)},O.update=function(R,J,j,Q){return O.create(R,j,Q).update(J)},L(O,P,A,U)},h=[{name:"keccak",padding:k,bits:z,createMethod:te},{name:"sha3",padding:D,bits:z,createMethod:te},{name:"shake",padding:E,bits:I,createMethod:S},{name:"cshake",padding:M,bits:I,createMethod:d},{name:"kmac",padding:M,bits:I,createMethod:y}],o={},f=[],l=0;l<h.length;++l)for(var m=h[l],b=m.bits,p=0;p<b.length;++p){var x=m.name+"_"+b[p];if(f.push(x),o[x]=m.createMethod(b[p],m.padding),m.name!=="sha3"){var _=m.name+b[p];f.push(_),o[_]=o[x]}}function c(A,U,K){this.blocks=[],this.s=[],this.padding=U,this.outputBits=K,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(A<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=K>>5,this.extraBytes=(K&31)>>3;for(var O=0;O<50;++O)this.s[O]=0}c.prototype.update=function(A){if(this.finalized)throw new Error(e);var U,K=typeof A;if(K!=="string"){if(K==="object"){if(A===null)throw new Error(r);if(v&&A.constructor===ArrayBuffer)A=new Uint8Array(A);else if(!Array.isArray(A)&&(!v||!ArrayBuffer.isView(A)))throw new Error(r)}else throw new Error(r);U=!0}for(var O=this.blocks,R=this.byteCount,J=A.length,j=this.blockCount,Q=0,he=this.s,ie,W;Q<J;){if(this.reset)for(this.reset=!1,O[0]=this.block,ie=1;ie<j+1;++ie)O[ie]=0;if(U)for(ie=this.start;Q<J&&ie<R;++Q)O[ie>>2]|=A[Q]<<T[ie++&3];else for(ie=this.start;Q<J&&ie<R;++Q)W=A.charCodeAt(Q),W<128?O[ie>>2]|=W<<T[ie++&3]:W<2048?(O[ie>>2]|=(192|W>>6)<<T[ie++&3],O[ie>>2]|=(128|W&63)<<T[ie++&3]):W<55296||W>=57344?(O[ie>>2]|=(224|W>>12)<<T[ie++&3],O[ie>>2]|=(128|W>>6&63)<<T[ie++&3],O[ie>>2]|=(128|W&63)<<T[ie++&3]):(W=65536+((W&1023)<<10|A.charCodeAt(++Q)&1023),O[ie>>2]|=(240|W>>18)<<T[ie++&3],O[ie>>2]|=(128|W>>12&63)<<T[ie++&3],O[ie>>2]|=(128|W>>6&63)<<T[ie++&3],O[ie>>2]|=(128|W&63)<<T[ie++&3]);if(this.lastByteIndex=ie,ie>=R){for(this.start=ie-R,this.block=O[j],ie=0;ie<j;++ie)he[ie]^=O[ie];G(he),this.reset=!0}else this.start=ie}return this},c.prototype.encode=function(A,U){var K=A&255,O=1,R=[K];for(A=A>>8,K=A&255;K>0;)R.unshift(K),A=A>>8,K=A&255,++O;return U?R.push(O):R.unshift(O),this.update(R),R.length},c.prototype.encodeString=function(A){var U,K=typeof A;if(K!=="string"){if(K==="object"){if(A===null)throw new Error(r);if(v&&A.constructor===ArrayBuffer)A=new Uint8Array(A);else if(!Array.isArray(A)&&(!v||!ArrayBuffer.isView(A)))throw new Error(r)}else throw new Error(r);U=!0}var O=0,R=A.length;if(U)O=R;else for(var J=0;J<A.length;++J){var j=A.charCodeAt(J);j<128?O+=1:j<2048?O+=2:j<55296||j>=57344?O+=3:(j=65536+((j&1023)<<10|A.charCodeAt(++J)&1023),O+=4)}return O+=this.encode(O*8),this.update(A),O},c.prototype.bytepad=function(A,U){for(var K=this.encode(U),O=0;O<A.length;++O)K+=this.encodeString(A[O]);var R=U-K%U,J=[];return J.length=R,this.update(J),this},c.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var A=this.blocks,U=this.lastByteIndex,K=this.blockCount,O=this.s;if(A[U>>2]|=this.padding[U&3],this.lastByteIndex===this.byteCount)for(A[0]=A[K],U=1;U<K+1;++U)A[U]=0;for(A[K-1]|=2147483648,U=0;U<K;++U)O[U]^=A[U];G(O)}},c.prototype.toString=c.prototype.hex=function(){this.finalize();for(var A=this.blockCount,U=this.s,K=this.outputBlocks,O=this.extraBytes,R=0,J=0,j="",Q;J<K;){for(R=0;R<A&&J<K;++R,++J)Q=U[R],j+=w[Q>>4&15]+w[Q&15]+w[Q>>12&15]+w[Q>>8&15]+w[Q>>20&15]+w[Q>>16&15]+w[Q>>28&15]+w[Q>>24&15];J%A===0&&(G(U),R=0)}return O&&(Q=U[R],j+=w[Q>>4&15]+w[Q&15],O>1&&(j+=w[Q>>12&15]+w[Q>>8&15]),O>2&&(j+=w[Q>>20&15]+w[Q>>16&15])),j},c.prototype.arrayBuffer=function(){this.finalize();var A=this.blockCount,U=this.s,K=this.outputBlocks,O=this.extraBytes,R=0,J=0,j=this.outputBits>>3,Q;O?Q=new ArrayBuffer(K+1<<2):Q=new ArrayBuffer(j);for(var he=new Uint32Array(Q);J<K;){for(R=0;R<A&&J<K;++R,++J)he[J]=U[R];J%A===0&&G(U)}return O&&(he[R]=U[R],Q=Q.slice(0,j)),Q},c.prototype.buffer=c.prototype.arrayBuffer,c.prototype.digest=c.prototype.array=function(){this.finalize();for(var A=this.blockCount,U=this.s,K=this.outputBlocks,O=this.extraBytes,R=0,J=0,j=[],Q,he;J<K;){for(R=0;R<A&&J<K;++R,++J)Q=J<<2,he=U[R],j[Q]=he&255,j[Q+1]=he>>8&255,j[Q+2]=he>>16&255,j[Q+3]=he>>24&255;J%A===0&&G(U)}return O&&(Q=J<<2,he=U[R],j[Q]=he&255,O>1&&(j[Q+1]=he>>8&255),O>2&&(j[Q+2]=he>>16&255)),j};function g(A,U,K){c.call(this,A,U,K)}g.prototype=new c,g.prototype.finalize=function(){return this.encode(this.outputBits,!0),c.prototype.finalize.call(this)};var G=function(A){var U,K,O,R,J,j,Q,he,ie,W,le,Z,oe,$,re,ce,Ue,me,xe,_t,ee,V,N,F,ne,ae,se,ue,Xe,be,pe,Qe,ge,we,hr,_e,Me,lr,Se,Ae,dr,Te,ke,pr,Ce,De,mr,Ie,Oe,br,Re,Ne,vr,Pe,Be,or,Fe,qe,Ft,qt,Ht,zt,Kt;for(O=0;O<48;O+=2)R=A[0]^A[10]^A[20]^A[30]^A[40],J=A[1]^A[11]^A[21]^A[31]^A[41],j=A[2]^A[12]^A[22]^A[32]^A[42],Q=A[3]^A[13]^A[23]^A[33]^A[43],he=A[4]^A[14]^A[24]^A[34]^A[44],ie=A[5]^A[15]^A[25]^A[35]^A[45],W=A[6]^A[16]^A[26]^A[36]^A[46],le=A[7]^A[17]^A[27]^A[37]^A[47],Z=A[8]^A[18]^A[28]^A[38]^A[48],oe=A[9]^A[19]^A[29]^A[39]^A[49],U=Z^(j<<1|Q>>>31),K=oe^(Q<<1|j>>>31),A[0]^=U,A[1]^=K,A[10]^=U,A[11]^=K,A[20]^=U,A[21]^=K,A[30]^=U,A[31]^=K,A[40]^=U,A[41]^=K,U=R^(he<<1|ie>>>31),K=J^(ie<<1|he>>>31),A[2]^=U,A[3]^=K,A[12]^=U,A[13]^=K,A[22]^=U,A[23]^=K,A[32]^=U,A[33]^=K,A[42]^=U,A[43]^=K,U=j^(W<<1|le>>>31),K=Q^(le<<1|W>>>31),A[4]^=U,A[5]^=K,A[14]^=U,A[15]^=K,A[24]^=U,A[25]^=K,A[34]^=U,A[35]^=K,A[44]^=U,A[45]^=K,U=he^(Z<<1|oe>>>31),K=ie^(oe<<1|Z>>>31),A[6]^=U,A[7]^=K,A[16]^=U,A[17]^=K,A[26]^=U,A[27]^=K,A[36]^=U,A[37]^=K,A[46]^=U,A[47]^=K,U=W^(R<<1|J>>>31),K=le^(J<<1|R>>>31),A[8]^=U,A[9]^=K,A[18]^=U,A[19]^=K,A[28]^=U,A[29]^=K,A[38]^=U,A[39]^=K,A[48]^=U,A[49]^=K,$=A[0],re=A[1],De=A[11]<<4|A[10]>>>28,mr=A[10]<<4|A[11]>>>28,ue=A[20]<<3|A[21]>>>29,Xe=A[21]<<3|A[20]>>>29,qt=A[31]<<9|A[30]>>>23,Ht=A[30]<<9|A[31]>>>23,Te=A[40]<<18|A[41]>>>14,ke=A[41]<<18|A[40]>>>14,we=A[2]<<1|A[3]>>>31,hr=A[3]<<1|A[2]>>>31,ce=A[13]<<12|A[12]>>>20,Ue=A[12]<<12|A[13]>>>20,Ie=A[22]<<10|A[23]>>>22,Oe=A[23]<<10|A[22]>>>22,be=A[33]<<13|A[32]>>>19,pe=A[32]<<13|A[33]>>>19,zt=A[42]<<2|A[43]>>>30,Kt=A[43]<<2|A[42]>>>30,Pe=A[5]<<30|A[4]>>>2,Be=A[4]<<30|A[5]>>>2,_e=A[14]<<6|A[15]>>>26,Me=A[15]<<6|A[14]>>>26,me=A[25]<<11|A[24]>>>21,xe=A[24]<<11|A[25]>>>21,br=A[34]<<15|A[35]>>>17,Re=A[35]<<15|A[34]>>>17,Qe=A[45]<<29|A[44]>>>3,ge=A[44]<<29|A[45]>>>3,F=A[6]<<28|A[7]>>>4,ne=A[7]<<28|A[6]>>>4,or=A[17]<<23|A[16]>>>9,Fe=A[16]<<23|A[17]>>>9,lr=A[26]<<25|A[27]>>>7,Se=A[27]<<25|A[26]>>>7,_t=A[36]<<21|A[37]>>>11,ee=A[37]<<21|A[36]>>>11,Ne=A[47]<<24|A[46]>>>8,vr=A[46]<<24|A[47]>>>8,pr=A[8]<<27|A[9]>>>5,Ce=A[9]<<27|A[8]>>>5,ae=A[18]<<20|A[19]>>>12,se=A[19]<<20|A[18]>>>12,qe=A[29]<<7|A[28]>>>25,Ft=A[28]<<7|A[29]>>>25,Ae=A[38]<<8|A[39]>>>24,dr=A[39]<<8|A[38]>>>24,V=A[48]<<14|A[49]>>>18,N=A[49]<<14|A[48]>>>18,A[0]=$^~ce&me,A[1]=re^~Ue&xe,A[10]=F^~ae&ue,A[11]=ne^~se&Xe,A[20]=we^~_e&lr,A[21]=hr^~Me&Se,A[30]=pr^~De&Ie,A[31]=Ce^~mr&Oe,A[40]=Pe^~or&qe,A[41]=Be^~Fe&Ft,A[2]=ce^~me&_t,A[3]=Ue^~xe&ee,A[12]=ae^~ue&be,A[13]=se^~Xe&pe,A[22]=_e^~lr&Ae,A[23]=Me^~Se&dr,A[32]=De^~Ie&br,A[33]=mr^~Oe&Re,A[42]=or^~qe&qt,A[43]=Fe^~Ft&Ht,A[4]=me^~_t&V,A[5]=xe^~ee&N,A[14]=ue^~be&Qe,A[15]=Xe^~pe&ge,A[24]=lr^~Ae&Te,A[25]=Se^~dr&ke,A[34]=Ie^~br&Ne,A[35]=Oe^~Re&vr,A[44]=qe^~qt&zt,A[45]=Ft^~Ht&Kt,A[6]=_t^~V&$,A[7]=ee^~N&re,A[16]=be^~Qe&F,A[17]=pe^~ge&ne,A[26]=Ae^~Te&we,A[27]=dr^~ke&hr,A[36]=br^~Ne&pr,A[37]=Re^~vr&Ce,A[46]=qt^~zt&Pe,A[47]=Ht^~Kt&Be,A[8]=V^~$&ce,A[9]=N^~re&Ue,A[18]=Qe^~F&ae,A[19]=ge^~ne&se,A[28]=Te^~we&_e,A[29]=ke^~hr&Me,A[38]=Ne^~pr&De,A[39]=vr^~Ce&mr,A[48]=zt^~Pe&or,A[49]=Kt^~Be&Fe,A[0]^=C[O],A[1]^=C[O+1]};if(a)qc.exports=o;else{for(l=0;l<f.length;++l)n[f[l]]=o[f[l]];u&&define(function(){return o})}})()});var Oi=de((cL,Ev)=>{Ev.exports=wv;function wv(r,e){if(!r)throw new Error(e||"Assertion failed")}wv.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)}});var $a=de((uL,f0)=>{typeof Object.create=="function"?f0.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:f0.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}});var bn=de(ft=>{"use strict";var C7=Oi(),D7=$a();ft.inherits=D7;function I7(r,e){return(r.charCodeAt(e)&64512)!==55296||e<0||e+1>=r.length?!1:(r.charCodeAt(e+1)&64512)===56320}function O7(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if(typeof r=="string")if(e){if(e==="hex")for(r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r),i=0;i<r.length;i+=2)t.push(parseInt(r[i]+r[i+1],16))}else for(var n=0,i=0;i<r.length;i++){var s=r.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):I7(r,i)?(s=65536+((s&1023)<<10)+(r.charCodeAt(++i)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}else for(i=0;i<r.length;i++)t[i]=r[i]|0;return t}ft.toArray=O7;function R7(r){for(var e="",t=0;t<r.length;t++)e+=Mv(r[t].toString(16));return e}ft.toHex=R7;function _v(r){var e=r>>>24|r>>>8&65280|r<<8&16711680|(r&255)<<24;return e>>>0}ft.htonl=_v;function N7(r,e){for(var t="",n=0;n<r.length;n++){var i=r[n];e==="little"&&(i=_v(i)),t+=Sv(i.toString(16))}return t}ft.toHex32=N7;function Mv(r){return r.length===1?"0"+r:r}ft.zero2=Mv;function Sv(r){return r.length===7?"0"+r:r.length===6?"00"+r:r.length===5?"000"+r:r.length===4?"0000"+r:r.length===3?"00000"+r:r.length===2?"000000"+r:r.length===1?"0000000"+r:r}ft.zero8=Sv;function P7(r,e,t,n){var i=t-e;C7(i%4===0);for(var s=new Array(i/4),a=0,u=e;a<s.length;a++,u+=4){var v;n==="big"?v=r[u]<<24|r[u+1]<<16|r[u+2]<<8|r[u+3]:v=r[u+3]<<24|r[u+2]<<16|r[u+1]<<8|r[u],s[a]=v>>>0}return s}ft.join32=P7;function B7(r,e){for(var t=new Array(r.length*4),n=0,i=0;n<r.length;n++,i+=4){var s=r[n];e==="big"?(t[i]=s>>>24,t[i+1]=s>>>16&255,t[i+2]=s>>>8&255,t[i+3]=s&255):(t[i+3]=s>>>24,t[i+2]=s>>>16&255,t[i+1]=s>>>8&255,t[i]=s&255)}return t}ft.split32=B7;function L7(r,e){return r>>>e|r<<32-e}ft.rotr32=L7;function U7(r,e){return r<<e|r>>>32-e}ft.rotl32=U7;function $7(r,e){return r+e>>>0}ft.sum32=$7;function F7(r,e,t){return r+e+t>>>0}ft.sum32_3=F7;function q7(r,e,t,n){return r+e+t+n>>>0}ft.sum32_4=q7;function H7(r,e,t,n,i){return r+e+t+n+i>>>0}ft.sum32_5=H7;function z7(r,e,t,n){var i=r[e],s=r[e+1],a=n+s>>>0,u=(a<n?1:0)+t+i;r[e]=u>>>0,r[e+1]=a}ft.sum64=z7;function K7(r,e,t,n){var i=e+n>>>0,s=(i<e?1:0)+r+t;return s>>>0}ft.sum64_hi=K7;function j7(r,e,t,n){var i=e+n;return i>>>0}ft.sum64_lo=j7;function G7(r,e,t,n,i,s,a,u){var v=0,w=e;w=w+n>>>0,v+=w<e?1:0,w=w+s>>>0,v+=w<s?1:0,w=w+u>>>0,v+=w<u?1:0;var E=r+t+i+a+v;return E>>>0}ft.sum64_4_hi=G7;function J7(r,e,t,n,i,s,a,u){var v=e+n+s+u;return v>>>0}ft.sum64_4_lo=J7;function V7(r,e,t,n,i,s,a,u,v,w){var E=0,M=e;M=M+n>>>0,E+=M<e?1:0,M=M+s>>>0,E+=M<s?1:0,M=M+u>>>0,E+=M<u?1:0,M=M+w>>>0,E+=M<w?1:0;var k=r+t+i+a+v+E;return k>>>0}ft.sum64_5_hi=V7;function W7(r,e,t,n,i,s,a,u,v,w){var E=e+n+s+u+w;return E>>>0}ft.sum64_5_lo=W7;function Y7(r,e,t){var n=e<<32-t|r>>>t;return n>>>0}ft.rotr64_hi=Y7;function X7(r,e,t){var n=r<<32-t|e>>>t;return n>>>0}ft.rotr64_lo=X7;function Z7(r,e,t){return r>>>t}ft.shr64_hi=Z7;function Q7(r,e,t){var n=r<<32-t|e>>>t;return n>>>0}ft.shr64_lo=Q7});var Ds=de(Tv=>{"use strict";var Av=bn(),eE=Oi();function Hc(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Tv.BlockHash=Hc;Hc.prototype.update=function(e,t){if(e=Av.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=Av.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};Hc.prototype.digest=function(e){return this.update(this._pad()),eE(this.pending===null),this._digest(e)};Hc.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,n=t-(e+this.padLength)%t,i=new Array(n+this.padLength);i[0]=128;for(var s=1;s<n;s++)i[s]=0;if(e<<=3,this.endian==="big"){for(var a=8;a<this.padLength;a++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=e&255}else for(i[s++]=e&255,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,a=8;a<this.padLength;a++)i[s++]=0;return i}});var c0=de(ni=>{"use strict";var tE=bn(),Dn=tE.rotr32;function rE(r,e,t,n){if(r===0)return kv(e,t,n);if(r===1||r===3)return Dv(e,t,n);if(r===2)return Cv(e,t,n)}ni.ft_1=rE;function kv(r,e,t){return r&e^~r&t}ni.ch32=kv;function Cv(r,e,t){return r&e^r&t^e&t}ni.maj32=Cv;function Dv(r,e,t){return r^e^t}ni.p32=Dv;function nE(r){return Dn(r,2)^Dn(r,13)^Dn(r,22)}ni.s0_256=nE;function iE(r){return Dn(r,6)^Dn(r,11)^Dn(r,25)}ni.s1_256=iE;function oE(r){return Dn(r,7)^Dn(r,18)^r>>>3}ni.g0_256=oE;function sE(r){return Dn(r,17)^Dn(r,19)^r>>>10}ni.g1_256=sE});var Rv=de((pL,Ov)=>{"use strict";var Is=bn(),aE=Ds(),fE=c0(),u0=Is.rotl32,Fa=Is.sum32,cE=Is.sum32_5,uE=fE.ft_1,Iv=aE.BlockHash,hE=[1518500249,1859775393,2400959708,3395469782];function In(){if(!(this instanceof In))return new In;Iv.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Is.inherits(In,Iv);Ov.exports=In;In.blockSize=512;In.outSize=160;In.hmacStrength=80;In.padLength=64;In.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=u0(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var s=this.h[0],a=this.h[1],u=this.h[2],v=this.h[3],w=this.h[4];for(i=0;i<n.length;i++){var E=~~(i/20),M=cE(u0(s,5),uE(E,a,u,v),w,n[i],hE[E]);w=v,v=u,u=u0(a,30),a=s,s=M}this.h[0]=Fa(this.h[0],s),this.h[1]=Fa(this.h[1],a),this.h[2]=Fa(this.h[2],u),this.h[3]=Fa(this.h[3],v),this.h[4]=Fa(this.h[4],w)};In.prototype._digest=function(e){return e==="hex"?Is.toHex32(this.h,"big"):Is.split32(this.h,"big")}});var h0=de((mL,Pv)=>{"use strict";var Os=bn(),lE=Ds(),Rs=c0(),dE=Oi(),vn=Os.sum32,pE=Os.sum32_4,mE=Os.sum32_5,bE=Rs.ch32,vE=Rs.maj32,gE=Rs.s0_256,yE=Rs.s1_256,xE=Rs.g0_256,wE=Rs.g1_256,Nv=lE.BlockHash,EE=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function On(){if(!(this instanceof On))return new On;Nv.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=EE,this.W=new Array(64)}Os.inherits(On,Nv);Pv.exports=On;On.blockSize=512;On.outSize=256;On.hmacStrength=192;On.padLength=64;On.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=pE(wE(n[i-2]),n[i-7],xE(n[i-15]),n[i-16]);var s=this.h[0],a=this.h[1],u=this.h[2],v=this.h[3],w=this.h[4],E=this.h[5],M=this.h[6],k=this.h[7];for(dE(this.k.length===n.length),i=0;i<n.length;i++){var D=mE(k,yE(w),bE(w,E,M),this.k[i],n[i]),T=vn(gE(s),vE(s,a,u));k=M,M=E,E=w,w=vn(v,D),v=u,u=a,a=s,s=vn(D,T)}this.h[0]=vn(this.h[0],s),this.h[1]=vn(this.h[1],a),this.h[2]=vn(this.h[2],u),this.h[3]=vn(this.h[3],v),this.h[4]=vn(this.h[4],w),this.h[5]=vn(this.h[5],E),this.h[6]=vn(this.h[6],M),this.h[7]=vn(this.h[7],k)};On.prototype._digest=function(e){return e==="hex"?Os.toHex32(this.h,"big"):Os.split32(this.h,"big")}});var Uv=de((bL,Lv)=>{"use strict";var l0=bn(),Bv=h0();function ii(){if(!(this instanceof ii))return new ii;Bv.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}l0.inherits(ii,Bv);Lv.exports=ii;ii.blockSize=512;ii.outSize=224;ii.hmacStrength=192;ii.padLength=64;ii.prototype._digest=function(e){return e==="hex"?l0.toHex32(this.h.slice(0,7),"big"):l0.split32(this.h.slice(0,7),"big")}});var m0=de((vL,Hv)=>{"use strict";var cr=bn(),_E=Ds(),ME=Oi(),Rn=cr.rotr64_hi,Nn=cr.rotr64_lo,$v=cr.shr64_hi,Fv=cr.shr64_lo,Ri=cr.sum64,d0=cr.sum64_hi,p0=cr.sum64_lo,SE=cr.sum64_4_hi,AE=cr.sum64_4_lo,TE=cr.sum64_5_hi,kE=cr.sum64_5_lo,qv=_E.BlockHash,CE=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function gn(){if(!(this instanceof gn))return new gn;qv.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=CE,this.W=new Array(160)}cr.inherits(gn,qv);Hv.exports=gn;gn.blockSize=1024;gn.outSize=512;gn.hmacStrength=192;gn.padLength=128;gn.prototype._prepareBlock=function(e,t){for(var n=this.W,i=0;i<32;i++)n[i]=e[t+i];for(;i<n.length;i+=2){var s=FE(n[i-4],n[i-3]),a=qE(n[i-4],n[i-3]),u=n[i-14],v=n[i-13],w=UE(n[i-30],n[i-29]),E=$E(n[i-30],n[i-29]),M=n[i-32],k=n[i-31];n[i]=SE(s,a,u,v,w,E,M,k),n[i+1]=AE(s,a,u,v,w,E,M,k)}};gn.prototype._update=function(e,t){this._prepareBlock(e,t);var n=this.W,i=this.h[0],s=this.h[1],a=this.h[2],u=this.h[3],v=this.h[4],w=this.h[5],E=this.h[6],M=this.h[7],k=this.h[8],D=this.h[9],T=this.h[10],C=this.h[11],z=this.h[12],I=this.h[13],q=this.h[14],Y=this.h[15];ME(this.k.length===n.length);for(var H=0;H<n.length;H+=2){var X=q,B=Y,P=BE(k,D),L=LE(k,D),te=DE(k,D,T,C,z,I),S=IE(k,D,T,C,z,I),d=this.k[H],y=this.k[H+1],h=n[H],o=n[H+1],f=TE(X,B,P,L,te,S,d,y,h,o),l=kE(X,B,P,L,te,S,d,y,h,o);X=NE(i,s),B=PE(i,s),P=OE(i,s,a,u,v,w),L=RE(i,s,a,u,v,w);var m=d0(X,B,P,L),b=p0(X,B,P,L);q=z,Y=I,z=T,I=C,T=k,C=D,k=d0(E,M,f,l),D=p0(M,M,f,l),E=v,M=w,v=a,w=u,a=i,u=s,i=d0(f,l,m,b),s=p0(f,l,m,b)}Ri(this.h,0,i,s),Ri(this.h,2,a,u),Ri(this.h,4,v,w),Ri(this.h,6,E,M),Ri(this.h,8,k,D),Ri(this.h,10,T,C),Ri(this.h,12,z,I),Ri(this.h,14,q,Y)};gn.prototype._digest=function(e){return e==="hex"?cr.toHex32(this.h,"big"):cr.split32(this.h,"big")};function DE(r,e,t,n,i){var s=r&t^~r&i;return s<0&&(s+=4294967296),s}function IE(r,e,t,n,i,s){var a=e&n^~e&s;return a<0&&(a+=4294967296),a}function OE(r,e,t,n,i){var s=r&t^r&i^t&i;return s<0&&(s+=4294967296),s}function RE(r,e,t,n,i,s){var a=e&n^e&s^n&s;return a<0&&(a+=4294967296),a}function NE(r,e){var t=Rn(r,e,28),n=Rn(e,r,2),i=Rn(e,r,7),s=t^n^i;return s<0&&(s+=4294967296),s}function PE(r,e){var t=Nn(r,e,28),n=Nn(e,r,2),i=Nn(e,r,7),s=t^n^i;return s<0&&(s+=4294967296),s}function BE(r,e){var t=Rn(r,e,14),n=Rn(r,e,18),i=Rn(e,r,9),s=t^n^i;return s<0&&(s+=4294967296),s}function LE(r,e){var t=Nn(r,e,14),n=Nn(r,e,18),i=Nn(e,r,9),s=t^n^i;return s<0&&(s+=4294967296),s}function UE(r,e){var t=Rn(r,e,1),n=Rn(r,e,8),i=$v(r,e,7),s=t^n^i;return s<0&&(s+=4294967296),s}function $E(r,e){var t=Nn(r,e,1),n=Nn(r,e,8),i=Fv(r,e,7),s=t^n^i;return s<0&&(s+=4294967296),s}function FE(r,e){var t=Rn(r,e,19),n=Rn(e,r,29),i=$v(r,e,6),s=t^n^i;return s<0&&(s+=4294967296),s}function qE(r,e){var t=Nn(r,e,19),n=Nn(e,r,29),i=Fv(r,e,6),s=t^n^i;return s<0&&(s+=4294967296),s}});var jv=de((gL,Kv)=>{"use strict";var b0=bn(),zv=m0();function oi(){if(!(this instanceof oi))return new oi;zv.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}b0.inherits(oi,zv);Kv.exports=oi;oi.blockSize=1024;oi.outSize=384;oi.hmacStrength=192;oi.padLength=128;oi.prototype._digest=function(e){return e==="hex"?b0.toHex32(this.h.slice(0,12),"big"):b0.split32(this.h.slice(0,12),"big")}});var Gv=de(Ns=>{"use strict";Ns.sha1=Rv();Ns.sha224=Uv();Ns.sha256=h0();Ns.sha384=jv();Ns.sha512=m0()});var Zv=de(Xv=>{"use strict";var Ao=bn(),HE=Ds(),zc=Ao.rotl32,Jv=Ao.sum32,qa=Ao.sum32_3,Vv=Ao.sum32_4,Yv=HE.BlockHash;function Pn(){if(!(this instanceof Pn))return new Pn;Yv.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Ao.inherits(Pn,Yv);Xv.ripemd160=Pn;Pn.blockSize=512;Pn.outSize=160;Pn.hmacStrength=192;Pn.padLength=64;Pn.prototype._update=function(e,t){for(var n=this.h[0],i=this.h[1],s=this.h[2],a=this.h[3],u=this.h[4],v=n,w=i,E=s,M=a,k=u,D=0;D<80;D++){var T=Jv(zc(Vv(n,Wv(D,i,s,a),e[jE[D]+t],zE(D)),JE[D]),u);n=u,u=a,a=zc(s,10),s=i,i=T,T=Jv(zc(Vv(v,Wv(79-D,w,E,M),e[GE[D]+t],KE(D)),VE[D]),k),v=k,k=M,M=zc(E,10),E=w,w=T}T=qa(this.h[1],s,M),this.h[1]=qa(this.h[2],a,k),this.h[2]=qa(this.h[3],u,v),this.h[3]=qa(this.h[4],n,w),this.h[4]=qa(this.h[0],i,E),this.h[0]=T};Pn.prototype._digest=function(e){return e==="hex"?Ao.toHex32(this.h,"little"):Ao.split32(this.h,"little")};function Wv(r,e,t,n){return r<=15?e^t^n:r<=31?e&t|~e&n:r<=47?(e|~t)^n:r<=63?e&n|t&~n:e^(t|~n)}function zE(r){return r<=15?0:r<=31?1518500249:r<=47?1859775393:r<=63?2400959708:2840853838}function KE(r){return r<=15?1352829926:r<=31?1548603684:r<=47?1836072691:r<=63?2053994217:0}var jE=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],GE=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],JE=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],VE=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]});var eg=de((wL,Qv)=>{"use strict";var WE=bn(),YE=Oi();function Ps(r,e,t){if(!(this instanceof Ps))return new Ps(r,e,t);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init(WE.toArray(e,t))}Qv.exports=Ps;Ps.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),YE(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)};Ps.prototype.update=function(e,t){return this.inner.update(e,t),this};Ps.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}});var Ha=de(tg=>{var Pt=tg;Pt.utils=bn();Pt.common=Ds();Pt.sha=Gv();Pt.ripemd=Zv();Pt.hmac=eg();Pt.sha1=Pt.sha.sha1;Pt.sha256=Pt.sha.sha256;Pt.sha224=Pt.sha.sha224;Pt.sha384=Pt.sha.sha384;Pt.sha512=Pt.sha.sha512;Pt.ripemd160=Pt.ripemd.ripemd160});var ng=de((rg,v0)=>{(function(r,e){"use strict";function t(h,o){if(!h)throw new Error(o||"Assertion failed")}function n(h,o){h.super_=o;var f=function(){};f.prototype=o.prototype,h.prototype=new f,h.prototype.constructor=h}function i(h,o,f){if(i.isBN(h))return h;this.negative=0,this.words=null,this.length=0,this.red=null,h!==null&&((o==="le"||o==="be")&&(f=o,o=10),this._init(h||0,o||10,f||"be"))}typeof r=="object"?r.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var s;try{typeof window<"u"&&typeof window.Buffer<"u"?s=window.Buffer:s=Fc().Buffer}catch{}i.isBN=function(o){return o instanceof i?!0:o!==null&&typeof o=="object"&&o.constructor.wordSize===i.wordSize&&Array.isArray(o.words)},i.max=function(o,f){return o.cmp(f)>0?o:f},i.min=function(o,f){return o.cmp(f)<0?o:f},i.prototype._init=function(o,f,l){if(typeof o=="number")return this._initNumber(o,f,l);if(typeof o=="object")return this._initArray(o,f,l);f==="hex"&&(f=16),t(f===(f|0)&&f>=2&&f<=36),o=o.toString().replace(/\s+/g,"");var m=0;o[0]==="-"&&(m++,this.negative=1),m<o.length&&(f===16?this._parseHex(o,m,l):(this._parseBase(o,f,m),l==="le"&&this._initArray(this.toArray(),f,l)))},i.prototype._initNumber=function(o,f,l){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[o&67108863],this.length=1):o<4503599627370496?(this.words=[o&67108863,o/67108864&67108863],this.length=2):(t(o<9007199254740992),this.words=[o&67108863,o/67108864&67108863,1],this.length=3),l==="le"&&this._initArray(this.toArray(),f,l)},i.prototype._initArray=function(o,f,l){if(t(typeof o.length=="number"),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var b,p,x=0;if(l==="be")for(m=o.length-1,b=0;m>=0;m-=3)p=o[m]|o[m-1]<<8|o[m-2]<<16,this.words[b]|=p<<x&67108863,this.words[b+1]=p>>>26-x&67108863,x+=24,x>=26&&(x-=26,b++);else if(l==="le")for(m=0,b=0;m<o.length;m+=3)p=o[m]|o[m+1]<<8|o[m+2]<<16,this.words[b]|=p<<x&67108863,this.words[b+1]=p>>>26-x&67108863,x+=24,x>=26&&(x-=26,b++);return this._strip()};function a(h,o){var f=h.charCodeAt(o);if(f>=48&&f<=57)return f-48;if(f>=65&&f<=70)return f-55;if(f>=97&&f<=102)return f-87;t(!1,"Invalid character in "+h)}function u(h,o,f){var l=a(h,f);return f-1>=o&&(l|=a(h,f-1)<<4),l}i.prototype._parseHex=function(o,f,l){this.length=Math.ceil((o.length-f)/6),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var b=0,p=0,x;if(l==="be")for(m=o.length-1;m>=f;m-=2)x=u(o,f,m)<<b,this.words[p]|=x&67108863,b>=18?(b-=18,p+=1,this.words[p]|=x>>>26):b+=8;else{var _=o.length-f;for(m=_%2===0?f+1:f;m<o.length;m+=2)x=u(o,f,m)<<b,this.words[p]|=x&67108863,b>=18?(b-=18,p+=1,this.words[p]|=x>>>26):b+=8}this._strip()};function v(h,o,f,l){for(var m=0,b=0,p=Math.min(h.length,f),x=o;x<p;x++){var _=h.charCodeAt(x)-48;m*=l,_>=49?b=_-49+10:_>=17?b=_-17+10:b=_,t(_>=0&&b<l,"Invalid character"),m+=b}return m}i.prototype._parseBase=function(o,f,l){this.words=[0],this.length=1;for(var m=0,b=1;b<=67108863;b*=f)m++;m--,b=b/f|0;for(var p=o.length-l,x=p%m,_=Math.min(p,p-x)+l,c=0,g=l;g<_;g+=m)c=v(o,g,g+m,f),this.imuln(b),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(x!==0){var G=1;for(c=v(o,g,o.length,f),g=0;g<x;g++)G*=f;this.imuln(G),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},i.prototype.copy=function(o){o.words=new Array(this.length);for(var f=0;f<this.length;f++)o.words[f]=this.words[f];o.length=this.length,o.negative=this.negative,o.red=this.red};function w(h,o){h.words=o.words,h.length=o.length,h.negative=o.negative,h.red=o.red}if(i.prototype._move=function(o){w(o,this)},i.prototype.clone=function(){var o=new i(null);return this.copy(o),o},i.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=E}catch{i.prototype.inspect=E}else i.prototype.inspect=E;function E(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var M=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],k=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],D=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(o,f){o=o||10,f=f|0||1;var l;if(o===16||o==="hex"){l="";for(var m=0,b=0,p=0;p<this.length;p++){var x=this.words[p],_=((x<<m|b)&16777215).toString(16);b=x>>>24-m&16777215,m+=2,m>=26&&(m-=26,p--),b!==0||p!==this.length-1?l=M[6-_.length]+_+l:l=_+l}for(b!==0&&(l=b.toString(16)+l);l.length%f!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}if(o===(o|0)&&o>=2&&o<=36){var c=k[o],g=D[o];l="";var G=this.clone();for(G.negative=0;!G.isZero();){var A=G.modrn(g).toString(o);G=G.idivn(g),G.isZero()?l=A+l:l=M[c-A.length]+A+l}for(this.isZero()&&(l="0"+l);l.length%f!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}t(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var o=this.words[0];return this.length===2?o+=this.words[1]*67108864:this.length===3&&this.words[2]===1?o+=4503599627370496+this.words[1]*67108864:this.length>2&&t(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-o:o},i.prototype.toJSON=function(){return this.toString(16,2)},s&&(i.prototype.toBuffer=function(o,f){return this.toArrayLike(s,o,f)}),i.prototype.toArray=function(o,f){return this.toArrayLike(Array,o,f)};var T=function(o,f){return o.allocUnsafe?o.allocUnsafe(f):new o(f)};i.prototype.toArrayLike=function(o,f,l){this._strip();var m=this.byteLength(),b=l||Math.max(1,m);t(m<=b,"byte array longer than desired length"),t(b>0,"Requested array length <= 0");var p=T(o,b),x=f==="le"?"LE":"BE";return this["_toArrayLike"+x](p,m),p},i.prototype._toArrayLikeLE=function(o,f){for(var l=0,m=0,b=0,p=0;b<this.length;b++){var x=this.words[b]<<p|m;o[l++]=x&255,l<o.length&&(o[l++]=x>>8&255),l<o.length&&(o[l++]=x>>16&255),p===6?(l<o.length&&(o[l++]=x>>24&255),m=0,p=0):(m=x>>>24,p+=2)}if(l<o.length)for(o[l++]=m;l<o.length;)o[l++]=0},i.prototype._toArrayLikeBE=function(o,f){for(var l=o.length-1,m=0,b=0,p=0;b<this.length;b++){var x=this.words[b]<<p|m;o[l--]=x&255,l>=0&&(o[l--]=x>>8&255),l>=0&&(o[l--]=x>>16&255),p===6?(l>=0&&(o[l--]=x>>24&255),m=0,p=0):(m=x>>>24,p+=2)}if(l>=0)for(o[l--]=m;l>=0;)o[l--]=0},Math.clz32?i.prototype._countBits=function(o){return 32-Math.clz32(o)}:i.prototype._countBits=function(o){var f=o,l=0;return f>=4096&&(l+=13,f>>>=13),f>=64&&(l+=7,f>>>=7),f>=8&&(l+=4,f>>>=4),f>=2&&(l+=2,f>>>=2),l+f},i.prototype._zeroBits=function(o){if(o===0)return 26;var f=o,l=0;return f&8191||(l+=13,f>>>=13),f&127||(l+=7,f>>>=7),f&15||(l+=4,f>>>=4),f&3||(l+=2,f>>>=2),f&1||l++,l},i.prototype.bitLength=function(){var o=this.words[this.length-1],f=this._countBits(o);return(this.length-1)*26+f};function C(h){for(var o=new Array(h.bitLength()),f=0;f<o.length;f++){var l=f/26|0,m=f%26;o[f]=h.words[l]>>>m&1}return o}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,f=0;f<this.length;f++){var l=this._zeroBits(this.words[f]);if(o+=l,l!==26)break}return o},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(o){return this.negative!==0?this.abs().inotn(o).iaddn(1):this.clone()},i.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var f=0;f<o.length;f++)this.words[f]=this.words[f]|o.words[f];return this._strip()},i.prototype.ior=function(o){return t((this.negative|o.negative)===0),this.iuor(o)},i.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},i.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},i.prototype.iuand=function(o){var f;this.length>o.length?f=o:f=this;for(var l=0;l<f.length;l++)this.words[l]=this.words[l]&o.words[l];return this.length=f.length,this._strip()},i.prototype.iand=function(o){return t((this.negative|o.negative)===0),this.iuand(o)},i.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},i.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},i.prototype.iuxor=function(o){var f,l;this.length>o.length?(f=this,l=o):(f=o,l=this);for(var m=0;m<l.length;m++)this.words[m]=f.words[m]^l.words[m];if(this!==f)for(;m<f.length;m++)this.words[m]=f.words[m];return this.length=f.length,this._strip()},i.prototype.ixor=function(o){return t((this.negative|o.negative)===0),this.iuxor(o)},i.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},i.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},i.prototype.inotn=function(o){t(typeof o=="number"&&o>=0);var f=Math.ceil(o/26)|0,l=o%26;this._expand(f),l>0&&f--;for(var m=0;m<f;m++)this.words[m]=~this.words[m]&67108863;return l>0&&(this.words[m]=~this.words[m]&67108863>>26-l),this._strip()},i.prototype.notn=function(o){return this.clone().inotn(o)},i.prototype.setn=function(o,f){t(typeof o=="number"&&o>=0);var l=o/26|0,m=o%26;return this._expand(l+1),f?this.words[l]=this.words[l]|1<<m:this.words[l]=this.words[l]&~(1<<m),this._strip()},i.prototype.iadd=function(o){var f;if(this.negative!==0&&o.negative===0)return this.negative=0,f=this.isub(o),this.negative^=1,this._normSign();if(this.negative===0&&o.negative!==0)return o.negative=0,f=this.isub(o),o.negative=1,f._normSign();var l,m;this.length>o.length?(l=this,m=o):(l=o,m=this);for(var b=0,p=0;p<m.length;p++)f=(l.words[p]|0)+(m.words[p]|0)+b,this.words[p]=f&67108863,b=f>>>26;for(;b!==0&&p<l.length;p++)f=(l.words[p]|0)+b,this.words[p]=f&67108863,b=f>>>26;if(this.length=l.length,b!==0)this.words[this.length]=b,this.length++;else if(l!==this)for(;p<l.length;p++)this.words[p]=l.words[p];return this},i.prototype.add=function(o){var f;return o.negative!==0&&this.negative===0?(o.negative=0,f=this.sub(o),o.negative^=1,f):o.negative===0&&this.negative!==0?(this.negative=0,f=o.sub(this),this.negative=1,f):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},i.prototype.isub=function(o){if(o.negative!==0){o.negative=0;var f=this.iadd(o);return o.negative=1,f._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var l=this.cmp(o);if(l===0)return this.negative=0,this.length=1,this.words[0]=0,this;var m,b;l>0?(m=this,b=o):(m=o,b=this);for(var p=0,x=0;x<b.length;x++)f=(m.words[x]|0)-(b.words[x]|0)+p,p=f>>26,this.words[x]=f&67108863;for(;p!==0&&x<m.length;x++)f=(m.words[x]|0)+p,p=f>>26,this.words[x]=f&67108863;if(p===0&&x<m.length&&m!==this)for(;x<m.length;x++)this.words[x]=m.words[x];return this.length=Math.max(this.length,x),m!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(o){return this.clone().isub(o)};function z(h,o,f){f.negative=o.negative^h.negative;var l=h.length+o.length|0;f.length=l,l=l-1|0;var m=h.words[0]|0,b=o.words[0]|0,p=m*b,x=p&67108863,_=p/67108864|0;f.words[0]=x;for(var c=1;c<l;c++){for(var g=_>>>26,G=_&67108863,A=Math.min(c,o.length-1),U=Math.max(0,c-h.length+1);U<=A;U++){var K=c-U|0;m=h.words[K]|0,b=o.words[U]|0,p=m*b+G,g+=p/67108864|0,G=p&67108863}f.words[c]=G|0,_=g|0}return _!==0?f.words[c]=_|0:f.length--,f._strip()}var I=function(o,f,l){var m=o.words,b=f.words,p=l.words,x=0,_,c,g,G=m[0]|0,A=G&8191,U=G>>>13,K=m[1]|0,O=K&8191,R=K>>>13,J=m[2]|0,j=J&8191,Q=J>>>13,he=m[3]|0,ie=he&8191,W=he>>>13,le=m[4]|0,Z=le&8191,oe=le>>>13,$=m[5]|0,re=$&8191,ce=$>>>13,Ue=m[6]|0,me=Ue&8191,xe=Ue>>>13,_t=m[7]|0,ee=_t&8191,V=_t>>>13,N=m[8]|0,F=N&8191,ne=N>>>13,ae=m[9]|0,se=ae&8191,ue=ae>>>13,Xe=b[0]|0,be=Xe&8191,pe=Xe>>>13,Qe=b[1]|0,ge=Qe&8191,we=Qe>>>13,hr=b[2]|0,_e=hr&8191,Me=hr>>>13,lr=b[3]|0,Se=lr&8191,Ae=lr>>>13,dr=b[4]|0,Te=dr&8191,ke=dr>>>13,pr=b[5]|0,Ce=pr&8191,De=pr>>>13,mr=b[6]|0,Ie=mr&8191,Oe=mr>>>13,br=b[7]|0,Re=br&8191,Ne=br>>>13,vr=b[8]|0,Pe=vr&8191,Be=vr>>>13,or=b[9]|0,Fe=or&8191,qe=or>>>13;l.negative=o.negative^f.negative,l.length=19,_=Math.imul(A,be),c=Math.imul(A,pe),c=c+Math.imul(U,be)|0,g=Math.imul(U,pe);var Ft=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,_=Math.imul(O,be),c=Math.imul(O,pe),c=c+Math.imul(R,be)|0,g=Math.imul(R,pe),_=_+Math.imul(A,ge)|0,c=c+Math.imul(A,we)|0,c=c+Math.imul(U,ge)|0,g=g+Math.imul(U,we)|0;var qt=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(qt>>>26)|0,qt&=67108863,_=Math.imul(j,be),c=Math.imul(j,pe),c=c+Math.imul(Q,be)|0,g=Math.imul(Q,pe),_=_+Math.imul(O,ge)|0,c=c+Math.imul(O,we)|0,c=c+Math.imul(R,ge)|0,g=g+Math.imul(R,we)|0,_=_+Math.imul(A,_e)|0,c=c+Math.imul(A,Me)|0,c=c+Math.imul(U,_e)|0,g=g+Math.imul(U,Me)|0;var Ht=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,_=Math.imul(ie,be),c=Math.imul(ie,pe),c=c+Math.imul(W,be)|0,g=Math.imul(W,pe),_=_+Math.imul(j,ge)|0,c=c+Math.imul(j,we)|0,c=c+Math.imul(Q,ge)|0,g=g+Math.imul(Q,we)|0,_=_+Math.imul(O,_e)|0,c=c+Math.imul(O,Me)|0,c=c+Math.imul(R,_e)|0,g=g+Math.imul(R,Me)|0,_=_+Math.imul(A,Se)|0,c=c+Math.imul(A,Ae)|0,c=c+Math.imul(U,Se)|0,g=g+Math.imul(U,Ae)|0;var zt=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(zt>>>26)|0,zt&=67108863,_=Math.imul(Z,be),c=Math.imul(Z,pe),c=c+Math.imul(oe,be)|0,g=Math.imul(oe,pe),_=_+Math.imul(ie,ge)|0,c=c+Math.imul(ie,we)|0,c=c+Math.imul(W,ge)|0,g=g+Math.imul(W,we)|0,_=_+Math.imul(j,_e)|0,c=c+Math.imul(j,Me)|0,c=c+Math.imul(Q,_e)|0,g=g+Math.imul(Q,Me)|0,_=_+Math.imul(O,Se)|0,c=c+Math.imul(O,Ae)|0,c=c+Math.imul(R,Se)|0,g=g+Math.imul(R,Ae)|0,_=_+Math.imul(A,Te)|0,c=c+Math.imul(A,ke)|0,c=c+Math.imul(U,Te)|0,g=g+Math.imul(U,ke)|0;var Kt=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,_=Math.imul(re,be),c=Math.imul(re,pe),c=c+Math.imul(ce,be)|0,g=Math.imul(ce,pe),_=_+Math.imul(Z,ge)|0,c=c+Math.imul(Z,we)|0,c=c+Math.imul(oe,ge)|0,g=g+Math.imul(oe,we)|0,_=_+Math.imul(ie,_e)|0,c=c+Math.imul(ie,Me)|0,c=c+Math.imul(W,_e)|0,g=g+Math.imul(W,Me)|0,_=_+Math.imul(j,Se)|0,c=c+Math.imul(j,Ae)|0,c=c+Math.imul(Q,Se)|0,g=g+Math.imul(Q,Ae)|0,_=_+Math.imul(O,Te)|0,c=c+Math.imul(O,ke)|0,c=c+Math.imul(R,Te)|0,g=g+Math.imul(R,ke)|0,_=_+Math.imul(A,Ce)|0,c=c+Math.imul(A,De)|0,c=c+Math.imul(U,Ce)|0,g=g+Math.imul(U,De)|0;var Yr=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,_=Math.imul(me,be),c=Math.imul(me,pe),c=c+Math.imul(xe,be)|0,g=Math.imul(xe,pe),_=_+Math.imul(re,ge)|0,c=c+Math.imul(re,we)|0,c=c+Math.imul(ce,ge)|0,g=g+Math.imul(ce,we)|0,_=_+Math.imul(Z,_e)|0,c=c+Math.imul(Z,Me)|0,c=c+Math.imul(oe,_e)|0,g=g+Math.imul(oe,Me)|0,_=_+Math.imul(ie,Se)|0,c=c+Math.imul(ie,Ae)|0,c=c+Math.imul(W,Se)|0,g=g+Math.imul(W,Ae)|0,_=_+Math.imul(j,Te)|0,c=c+Math.imul(j,ke)|0,c=c+Math.imul(Q,Te)|0,g=g+Math.imul(Q,ke)|0,_=_+Math.imul(O,Ce)|0,c=c+Math.imul(O,De)|0,c=c+Math.imul(R,Ce)|0,g=g+Math.imul(R,De)|0,_=_+Math.imul(A,Ie)|0,c=c+Math.imul(A,Oe)|0,c=c+Math.imul(U,Ie)|0,g=g+Math.imul(U,Oe)|0;var Xr=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,_=Math.imul(ee,be),c=Math.imul(ee,pe),c=c+Math.imul(V,be)|0,g=Math.imul(V,pe),_=_+Math.imul(me,ge)|0,c=c+Math.imul(me,we)|0,c=c+Math.imul(xe,ge)|0,g=g+Math.imul(xe,we)|0,_=_+Math.imul(re,_e)|0,c=c+Math.imul(re,Me)|0,c=c+Math.imul(ce,_e)|0,g=g+Math.imul(ce,Me)|0,_=_+Math.imul(Z,Se)|0,c=c+Math.imul(Z,Ae)|0,c=c+Math.imul(oe,Se)|0,g=g+Math.imul(oe,Ae)|0,_=_+Math.imul(ie,Te)|0,c=c+Math.imul(ie,ke)|0,c=c+Math.imul(W,Te)|0,g=g+Math.imul(W,ke)|0,_=_+Math.imul(j,Ce)|0,c=c+Math.imul(j,De)|0,c=c+Math.imul(Q,Ce)|0,g=g+Math.imul(Q,De)|0,_=_+Math.imul(O,Ie)|0,c=c+Math.imul(O,Oe)|0,c=c+Math.imul(R,Ie)|0,g=g+Math.imul(R,Oe)|0,_=_+Math.imul(A,Re)|0,c=c+Math.imul(A,Ne)|0,c=c+Math.imul(U,Re)|0,g=g+Math.imul(U,Ne)|0;var Zr=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,_=Math.imul(F,be),c=Math.imul(F,pe),c=c+Math.imul(ne,be)|0,g=Math.imul(ne,pe),_=_+Math.imul(ee,ge)|0,c=c+Math.imul(ee,we)|0,c=c+Math.imul(V,ge)|0,g=g+Math.imul(V,we)|0,_=_+Math.imul(me,_e)|0,c=c+Math.imul(me,Me)|0,c=c+Math.imul(xe,_e)|0,g=g+Math.imul(xe,Me)|0,_=_+Math.imul(re,Se)|0,c=c+Math.imul(re,Ae)|0,c=c+Math.imul(ce,Se)|0,g=g+Math.imul(ce,Ae)|0,_=_+Math.imul(Z,Te)|0,c=c+Math.imul(Z,ke)|0,c=c+Math.imul(oe,Te)|0,g=g+Math.imul(oe,ke)|0,_=_+Math.imul(ie,Ce)|0,c=c+Math.imul(ie,De)|0,c=c+Math.imul(W,Ce)|0,g=g+Math.imul(W,De)|0,_=_+Math.imul(j,Ie)|0,c=c+Math.imul(j,Oe)|0,c=c+Math.imul(Q,Ie)|0,g=g+Math.imul(Q,Oe)|0,_=_+Math.imul(O,Re)|0,c=c+Math.imul(O,Ne)|0,c=c+Math.imul(R,Re)|0,g=g+Math.imul(R,Ne)|0,_=_+Math.imul(A,Pe)|0,c=c+Math.imul(A,Be)|0,c=c+Math.imul(U,Pe)|0,g=g+Math.imul(U,Be)|0;var Qr=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,_=Math.imul(se,be),c=Math.imul(se,pe),c=c+Math.imul(ue,be)|0,g=Math.imul(ue,pe),_=_+Math.imul(F,ge)|0,c=c+Math.imul(F,we)|0,c=c+Math.imul(ne,ge)|0,g=g+Math.imul(ne,we)|0,_=_+Math.imul(ee,_e)|0,c=c+Math.imul(ee,Me)|0,c=c+Math.imul(V,_e)|0,g=g+Math.imul(V,Me)|0,_=_+Math.imul(me,Se)|0,c=c+Math.imul(me,Ae)|0,c=c+Math.imul(xe,Se)|0,g=g+Math.imul(xe,Ae)|0,_=_+Math.imul(re,Te)|0,c=c+Math.imul(re,ke)|0,c=c+Math.imul(ce,Te)|0,g=g+Math.imul(ce,ke)|0,_=_+Math.imul(Z,Ce)|0,c=c+Math.imul(Z,De)|0,c=c+Math.imul(oe,Ce)|0,g=g+Math.imul(oe,De)|0,_=_+Math.imul(ie,Ie)|0,c=c+Math.imul(ie,Oe)|0,c=c+Math.imul(W,Ie)|0,g=g+Math.imul(W,Oe)|0,_=_+Math.imul(j,Re)|0,c=c+Math.imul(j,Ne)|0,c=c+Math.imul(Q,Re)|0,g=g+Math.imul(Q,Ne)|0,_=_+Math.imul(O,Pe)|0,c=c+Math.imul(O,Be)|0,c=c+Math.imul(R,Pe)|0,g=g+Math.imul(R,Be)|0,_=_+Math.imul(A,Fe)|0,c=c+Math.imul(A,qe)|0,c=c+Math.imul(U,Fe)|0,g=g+Math.imul(U,qe)|0;var en=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(en>>>26)|0,en&=67108863,_=Math.imul(se,ge),c=Math.imul(se,we),c=c+Math.imul(ue,ge)|0,g=Math.imul(ue,we),_=_+Math.imul(F,_e)|0,c=c+Math.imul(F,Me)|0,c=c+Math.imul(ne,_e)|0,g=g+Math.imul(ne,Me)|0,_=_+Math.imul(ee,Se)|0,c=c+Math.imul(ee,Ae)|0,c=c+Math.imul(V,Se)|0,g=g+Math.imul(V,Ae)|0,_=_+Math.imul(me,Te)|0,c=c+Math.imul(me,ke)|0,c=c+Math.imul(xe,Te)|0,g=g+Math.imul(xe,ke)|0,_=_+Math.imul(re,Ce)|0,c=c+Math.imul(re,De)|0,c=c+Math.imul(ce,Ce)|0,g=g+Math.imul(ce,De)|0,_=_+Math.imul(Z,Ie)|0,c=c+Math.imul(Z,Oe)|0,c=c+Math.imul(oe,Ie)|0,g=g+Math.imul(oe,Oe)|0,_=_+Math.imul(ie,Re)|0,c=c+Math.imul(ie,Ne)|0,c=c+Math.imul(W,Re)|0,g=g+Math.imul(W,Ne)|0,_=_+Math.imul(j,Pe)|0,c=c+Math.imul(j,Be)|0,c=c+Math.imul(Q,Pe)|0,g=g+Math.imul(Q,Be)|0,_=_+Math.imul(O,Fe)|0,c=c+Math.imul(O,qe)|0,c=c+Math.imul(R,Fe)|0,g=g+Math.imul(R,qe)|0;var tn=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(tn>>>26)|0,tn&=67108863,_=Math.imul(se,_e),c=Math.imul(se,Me),c=c+Math.imul(ue,_e)|0,g=Math.imul(ue,Me),_=_+Math.imul(F,Se)|0,c=c+Math.imul(F,Ae)|0,c=c+Math.imul(ne,Se)|0,g=g+Math.imul(ne,Ae)|0,_=_+Math.imul(ee,Te)|0,c=c+Math.imul(ee,ke)|0,c=c+Math.imul(V,Te)|0,g=g+Math.imul(V,ke)|0,_=_+Math.imul(me,Ce)|0,c=c+Math.imul(me,De)|0,c=c+Math.imul(xe,Ce)|0,g=g+Math.imul(xe,De)|0,_=_+Math.imul(re,Ie)|0,c=c+Math.imul(re,Oe)|0,c=c+Math.imul(ce,Ie)|0,g=g+Math.imul(ce,Oe)|0,_=_+Math.imul(Z,Re)|0,c=c+Math.imul(Z,Ne)|0,c=c+Math.imul(oe,Re)|0,g=g+Math.imul(oe,Ne)|0,_=_+Math.imul(ie,Pe)|0,c=c+Math.imul(ie,Be)|0,c=c+Math.imul(W,Pe)|0,g=g+Math.imul(W,Be)|0,_=_+Math.imul(j,Fe)|0,c=c+Math.imul(j,qe)|0,c=c+Math.imul(Q,Fe)|0,g=g+Math.imul(Q,qe)|0;var rn=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(rn>>>26)|0,rn&=67108863,_=Math.imul(se,Se),c=Math.imul(se,Ae),c=c+Math.imul(ue,Se)|0,g=Math.imul(ue,Ae),_=_+Math.imul(F,Te)|0,c=c+Math.imul(F,ke)|0,c=c+Math.imul(ne,Te)|0,g=g+Math.imul(ne,ke)|0,_=_+Math.imul(ee,Ce)|0,c=c+Math.imul(ee,De)|0,c=c+Math.imul(V,Ce)|0,g=g+Math.imul(V,De)|0,_=_+Math.imul(me,Ie)|0,c=c+Math.imul(me,Oe)|0,c=c+Math.imul(xe,Ie)|0,g=g+Math.imul(xe,Oe)|0,_=_+Math.imul(re,Re)|0,c=c+Math.imul(re,Ne)|0,c=c+Math.imul(ce,Re)|0,g=g+Math.imul(ce,Ne)|0,_=_+Math.imul(Z,Pe)|0,c=c+Math.imul(Z,Be)|0,c=c+Math.imul(oe,Pe)|0,g=g+Math.imul(oe,Be)|0,_=_+Math.imul(ie,Fe)|0,c=c+Math.imul(ie,qe)|0,c=c+Math.imul(W,Fe)|0,g=g+Math.imul(W,qe)|0;var nn=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(nn>>>26)|0,nn&=67108863,_=Math.imul(se,Te),c=Math.imul(se,ke),c=c+Math.imul(ue,Te)|0,g=Math.imul(ue,ke),_=_+Math.imul(F,Ce)|0,c=c+Math.imul(F,De)|0,c=c+Math.imul(ne,Ce)|0,g=g+Math.imul(ne,De)|0,_=_+Math.imul(ee,Ie)|0,c=c+Math.imul(ee,Oe)|0,c=c+Math.imul(V,Ie)|0,g=g+Math.imul(V,Oe)|0,_=_+Math.imul(me,Re)|0,c=c+Math.imul(me,Ne)|0,c=c+Math.imul(xe,Re)|0,g=g+Math.imul(xe,Ne)|0,_=_+Math.imul(re,Pe)|0,c=c+Math.imul(re,Be)|0,c=c+Math.imul(ce,Pe)|0,g=g+Math.imul(ce,Be)|0,_=_+Math.imul(Z,Fe)|0,c=c+Math.imul(Z,qe)|0,c=c+Math.imul(oe,Fe)|0,g=g+Math.imul(oe,qe)|0;var on=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(on>>>26)|0,on&=67108863,_=Math.imul(se,Ce),c=Math.imul(se,De),c=c+Math.imul(ue,Ce)|0,g=Math.imul(ue,De),_=_+Math.imul(F,Ie)|0,c=c+Math.imul(F,Oe)|0,c=c+Math.imul(ne,Ie)|0,g=g+Math.imul(ne,Oe)|0,_=_+Math.imul(ee,Re)|0,c=c+Math.imul(ee,Ne)|0,c=c+Math.imul(V,Re)|0,g=g+Math.imul(V,Ne)|0,_=_+Math.imul(me,Pe)|0,c=c+Math.imul(me,Be)|0,c=c+Math.imul(xe,Pe)|0,g=g+Math.imul(xe,Be)|0,_=_+Math.imul(re,Fe)|0,c=c+Math.imul(re,qe)|0,c=c+Math.imul(ce,Fe)|0,g=g+Math.imul(ce,qe)|0;var sn=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(sn>>>26)|0,sn&=67108863,_=Math.imul(se,Ie),c=Math.imul(se,Oe),c=c+Math.imul(ue,Ie)|0,g=Math.imul(ue,Oe),_=_+Math.imul(F,Re)|0,c=c+Math.imul(F,Ne)|0,c=c+Math.imul(ne,Re)|0,g=g+Math.imul(ne,Ne)|0,_=_+Math.imul(ee,Pe)|0,c=c+Math.imul(ee,Be)|0,c=c+Math.imul(V,Pe)|0,g=g+Math.imul(V,Be)|0,_=_+Math.imul(me,Fe)|0,c=c+Math.imul(me,qe)|0,c=c+Math.imul(xe,Fe)|0,g=g+Math.imul(xe,qe)|0;var an=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(an>>>26)|0,an&=67108863,_=Math.imul(se,Re),c=Math.imul(se,Ne),c=c+Math.imul(ue,Re)|0,g=Math.imul(ue,Ne),_=_+Math.imul(F,Pe)|0,c=c+Math.imul(F,Be)|0,c=c+Math.imul(ne,Pe)|0,g=g+Math.imul(ne,Be)|0,_=_+Math.imul(ee,Fe)|0,c=c+Math.imul(ee,qe)|0,c=c+Math.imul(V,Fe)|0,g=g+Math.imul(V,qe)|0;var Wi=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(Wi>>>26)|0,Wi&=67108863,_=Math.imul(se,Pe),c=Math.imul(se,Be),c=c+Math.imul(ue,Pe)|0,g=Math.imul(ue,Be),_=_+Math.imul(F,Fe)|0,c=c+Math.imul(F,qe)|0,c=c+Math.imul(ne,Fe)|0,g=g+Math.imul(ne,qe)|0;var Yi=(x+_|0)+((c&8191)<<13)|0;x=(g+(c>>>13)|0)+(Yi>>>26)|0,Yi&=67108863,_=Math.imul(se,Fe),c=Math.imul(se,qe),c=c+Math.imul(ue,Fe)|0,g=Math.imul(ue,qe);var Xi=(x+_|0)+((c&8191)<<13)|0;return x=(g+(c>>>13)|0)+(Xi>>>26)|0,Xi&=67108863,p[0]=Ft,p[1]=qt,p[2]=Ht,p[3]=zt,p[4]=Kt,p[5]=Yr,p[6]=Xr,p[7]=Zr,p[8]=Qr,p[9]=en,p[10]=tn,p[11]=rn,p[12]=nn,p[13]=on,p[14]=sn,p[15]=an,p[16]=Wi,p[17]=Yi,p[18]=Xi,x!==0&&(p[19]=x,l.length++),l};Math.imul||(I=z);function q(h,o,f){f.negative=o.negative^h.negative,f.length=h.length+o.length;for(var l=0,m=0,b=0;b<f.length-1;b++){var p=m;m=0;for(var x=l&67108863,_=Math.min(b,o.length-1),c=Math.max(0,b-h.length+1);c<=_;c++){var g=b-c,G=h.words[g]|0,A=o.words[c]|0,U=G*A,K=U&67108863;p=p+(U/67108864|0)|0,K=K+x|0,x=K&67108863,p=p+(K>>>26)|0,m+=p>>>26,p&=67108863}f.words[b]=x,l=p,p=m}return l!==0?f.words[b]=l:f.length--,f._strip()}function Y(h,o,f){return q(h,o,f)}i.prototype.mulTo=function(o,f){var l,m=this.length+o.length;return this.length===10&&o.length===10?l=I(this,o,f):m<63?l=z(this,o,f):m<1024?l=q(this,o,f):l=Y(this,o,f),l};function H(h,o){this.x=h,this.y=o}H.prototype.makeRBT=function(o){for(var f=new Array(o),l=i.prototype._countBits(o)-1,m=0;m<o;m++)f[m]=this.revBin(m,l,o);return f},H.prototype.revBin=function(o,f,l){if(o===0||o===l-1)return o;for(var m=0,b=0;b<f;b++)m|=(o&1)<<f-b-1,o>>=1;return m},H.prototype.permute=function(o,f,l,m,b,p){for(var x=0;x<p;x++)m[x]=f[o[x]],b[x]=l[o[x]]},H.prototype.transform=function(o,f,l,m,b,p){this.permute(p,o,f,l,m,b);for(var x=1;x<b;x<<=1)for(var _=x<<1,c=Math.cos(2*Math.PI/_),g=Math.sin(2*Math.PI/_),G=0;G<b;G+=_)for(var A=c,U=g,K=0;K<x;K++){var O=l[G+K],R=m[G+K],J=l[G+K+x],j=m[G+K+x],Q=A*J-U*j;j=A*j+U*J,J=Q,l[G+K]=O+J,m[G+K]=R+j,l[G+K+x]=O-J,m[G+K+x]=R-j,K!==_&&(Q=c*A-g*U,U=c*U+g*A,A=Q)}},H.prototype.guessLen13b=function(o,f){var l=Math.max(f,o)|1,m=l&1,b=0;for(l=l/2|0;l;l=l>>>1)b++;return 1<<b+1+m},H.prototype.conjugate=function(o,f,l){if(!(l<=1))for(var m=0;m<l/2;m++){var b=o[m];o[m]=o[l-m-1],o[l-m-1]=b,b=f[m],f[m]=-f[l-m-1],f[l-m-1]=-b}},H.prototype.normalize13b=function(o,f){for(var l=0,m=0;m<f/2;m++){var b=Math.round(o[2*m+1]/f)*8192+Math.round(o[2*m]/f)+l;o[m]=b&67108863,b<67108864?l=0:l=b/67108864|0}return o},H.prototype.convert13b=function(o,f,l,m){for(var b=0,p=0;p<f;p++)b=b+(o[p]|0),l[2*p]=b&8191,b=b>>>13,l[2*p+1]=b&8191,b=b>>>13;for(p=2*f;p<m;++p)l[p]=0;t(b===0),t((b&-8192)===0)},H.prototype.stub=function(o){for(var f=new Array(o),l=0;l<o;l++)f[l]=0;return f},H.prototype.mulp=function(o,f,l){var m=2*this.guessLen13b(o.length,f.length),b=this.makeRBT(m),p=this.stub(m),x=new Array(m),_=new Array(m),c=new Array(m),g=new Array(m),G=new Array(m),A=new Array(m),U=l.words;U.length=m,this.convert13b(o.words,o.length,x,m),this.convert13b(f.words,f.length,g,m),this.transform(x,p,_,c,m,b),this.transform(g,p,G,A,m,b);for(var K=0;K<m;K++){var O=_[K]*G[K]-c[K]*A[K];c[K]=_[K]*A[K]+c[K]*G[K],_[K]=O}return this.conjugate(_,c,m),this.transform(_,c,U,p,m,b),this.conjugate(U,p,m),this.normalize13b(U,m),l.negative=o.negative^f.negative,l.length=o.length+f.length,l._strip()},i.prototype.mul=function(o){var f=new i(null);return f.words=new Array(this.length+o.length),this.mulTo(o,f)},i.prototype.mulf=function(o){var f=new i(null);return f.words=new Array(this.length+o.length),Y(this,o,f)},i.prototype.imul=function(o){return this.clone().mulTo(o,this)},i.prototype.imuln=function(o){var f=o<0;f&&(o=-o),t(typeof o=="number"),t(o<67108864);for(var l=0,m=0;m<this.length;m++){var b=(this.words[m]|0)*o,p=(b&67108863)+(l&67108863);l>>=26,l+=b/67108864|0,l+=p>>>26,this.words[m]=p&67108863}return l!==0&&(this.words[m]=l,this.length++),f?this.ineg():this},i.prototype.muln=function(o){return this.clone().imuln(o)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(o){var f=C(o);if(f.length===0)return new i(1);for(var l=this,m=0;m<f.length&&f[m]===0;m++,l=l.sqr());if(++m<f.length)for(var b=l.sqr();m<f.length;m++,b=b.sqr())f[m]!==0&&(l=l.mul(b));return l},i.prototype.iushln=function(o){t(typeof o=="number"&&o>=0);var f=o%26,l=(o-f)/26,m=67108863>>>26-f<<26-f,b;if(f!==0){var p=0;for(b=0;b<this.length;b++){var x=this.words[b]&m,_=(this.words[b]|0)-x<<f;this.words[b]=_|p,p=x>>>26-f}p&&(this.words[b]=p,this.length++)}if(l!==0){for(b=this.length-1;b>=0;b--)this.words[b+l]=this.words[b];for(b=0;b<l;b++)this.words[b]=0;this.length+=l}return this._strip()},i.prototype.ishln=function(o){return t(this.negative===0),this.iushln(o)},i.prototype.iushrn=function(o,f,l){t(typeof o=="number"&&o>=0);var m;f?m=(f-f%26)/26:m=0;var b=o%26,p=Math.min((o-b)/26,this.length),x=67108863^67108863>>>b<<b,_=l;if(m-=p,m=Math.max(0,m),_){for(var c=0;c<p;c++)_.words[c]=this.words[c];_.length=p}if(p!==0)if(this.length>p)for(this.length-=p,c=0;c<this.length;c++)this.words[c]=this.words[c+p];else this.words[0]=0,this.length=1;var g=0;for(c=this.length-1;c>=0&&(g!==0||c>=m);c--){var G=this.words[c]|0;this.words[c]=g<<26-b|G>>>b,g=G&x}return _&&g!==0&&(_.words[_.length++]=g),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(o,f,l){return t(this.negative===0),this.iushrn(o,f,l)},i.prototype.shln=function(o){return this.clone().ishln(o)},i.prototype.ushln=function(o){return this.clone().iushln(o)},i.prototype.shrn=function(o){return this.clone().ishrn(o)},i.prototype.ushrn=function(o){return this.clone().iushrn(o)},i.prototype.testn=function(o){t(typeof o=="number"&&o>=0);var f=o%26,l=(o-f)/26,m=1<<f;if(this.length<=l)return!1;var b=this.words[l];return!!(b&m)},i.prototype.imaskn=function(o){t(typeof o=="number"&&o>=0);var f=o%26,l=(o-f)/26;if(t(this.negative===0,"imaskn works only with positive numbers"),this.length<=l)return this;if(f!==0&&l++,this.length=Math.min(l,this.length),f!==0){var m=67108863^67108863>>>f<<f;this.words[this.length-1]&=m}return this._strip()},i.prototype.maskn=function(o){return this.clone().imaskn(o)},i.prototype.iaddn=function(o){return t(typeof o=="number"),t(o<67108864),o<0?this.isubn(-o):this.negative!==0?this.length===1&&(this.words[0]|0)<=o?(this.words[0]=o-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},i.prototype._iaddn=function(o){this.words[0]+=o;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},i.prototype.isubn=function(o){if(t(typeof o=="number"),t(o<67108864),o<0)return this.iaddn(-o);if(this.negative!==0)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this._strip()},i.prototype.addn=function(o){return this.clone().iaddn(o)},i.prototype.subn=function(o){return this.clone().isubn(o)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(o,f,l){var m=o.length+l,b;this._expand(m);var p,x=0;for(b=0;b<o.length;b++){p=(this.words[b+l]|0)+x;var _=(o.words[b]|0)*f;p-=_&67108863,x=(p>>26)-(_/67108864|0),this.words[b+l]=p&67108863}for(;b<this.length-l;b++)p=(this.words[b+l]|0)+x,x=p>>26,this.words[b+l]=p&67108863;if(x===0)return this._strip();for(t(x===-1),x=0,b=0;b<this.length;b++)p=-(this.words[b]|0)+x,x=p>>26,this.words[b]=p&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(o,f){var l=this.length-o.length,m=this.clone(),b=o,p=b.words[b.length-1]|0,x=this._countBits(p);l=26-x,l!==0&&(b=b.ushln(l),m.iushln(l),p=b.words[b.length-1]|0);var _=m.length-b.length,c;if(f!=="mod"){c=new i(null),c.length=_+1,c.words=new Array(c.length);for(var g=0;g<c.length;g++)c.words[g]=0}var G=m.clone()._ishlnsubmul(b,1,_);G.negative===0&&(m=G,c&&(c.words[_]=1));for(var A=_-1;A>=0;A--){var U=(m.words[b.length+A]|0)*67108864+(m.words[b.length+A-1]|0);for(U=Math.min(U/p|0,67108863),m._ishlnsubmul(b,U,A);m.negative!==0;)U--,m.negative=0,m._ishlnsubmul(b,1,A),m.isZero()||(m.negative^=1);c&&(c.words[A]=U)}return c&&c._strip(),m._strip(),f!=="div"&&l!==0&&m.iushrn(l),{div:c||null,mod:m}},i.prototype.divmod=function(o,f,l){if(t(!o.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var m,b,p;return this.negative!==0&&o.negative===0?(p=this.neg().divmod(o,f),f!=="mod"&&(m=p.div.neg()),f!=="div"&&(b=p.mod.neg(),l&&b.negative!==0&&b.iadd(o)),{div:m,mod:b}):this.negative===0&&o.negative!==0?(p=this.divmod(o.neg(),f),f!=="mod"&&(m=p.div.neg()),{div:m,mod:p.mod}):this.negative&o.negative?(p=this.neg().divmod(o.neg(),f),f!=="div"&&(b=p.mod.neg(),l&&b.negative!==0&&b.isub(o)),{div:p.div,mod:b}):o.length>this.length||this.cmp(o)<0?{div:new i(0),mod:this}:o.length===1?f==="div"?{div:this.divn(o.words[0]),mod:null}:f==="mod"?{div:null,mod:new i(this.modrn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new i(this.modrn(o.words[0]))}:this._wordDiv(o,f)},i.prototype.div=function(o){return this.divmod(o,"div",!1).div},i.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},i.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},i.prototype.divRound=function(o){var f=this.divmod(o);if(f.mod.isZero())return f.div;var l=f.div.negative!==0?f.mod.isub(o):f.mod,m=o.ushrn(1),b=o.andln(1),p=l.cmp(m);return p<0||b===1&&p===0?f.div:f.div.negative!==0?f.div.isubn(1):f.div.iaddn(1)},i.prototype.modrn=function(o){var f=o<0;f&&(o=-o),t(o<=67108863);for(var l=(1<<26)%o,m=0,b=this.length-1;b>=0;b--)m=(l*m+(this.words[b]|0))%o;return f?-m:m},i.prototype.modn=function(o){return this.modrn(o)},i.prototype.idivn=function(o){var f=o<0;f&&(o=-o),t(o<=67108863);for(var l=0,m=this.length-1;m>=0;m--){var b=(this.words[m]|0)+l*67108864;this.words[m]=b/o|0,l=b%o}return this._strip(),f?this.ineg():this},i.prototype.divn=function(o){return this.clone().idivn(o)},i.prototype.egcd=function(o){t(o.negative===0),t(!o.isZero());var f=this,l=o.clone();f.negative!==0?f=f.umod(o):f=f.clone();for(var m=new i(1),b=new i(0),p=new i(0),x=new i(1),_=0;f.isEven()&&l.isEven();)f.iushrn(1),l.iushrn(1),++_;for(var c=l.clone(),g=f.clone();!f.isZero();){for(var G=0,A=1;!(f.words[0]&A)&&G<26;++G,A<<=1);if(G>0)for(f.iushrn(G);G-- >0;)(m.isOdd()||b.isOdd())&&(m.iadd(c),b.isub(g)),m.iushrn(1),b.iushrn(1);for(var U=0,K=1;!(l.words[0]&K)&&U<26;++U,K<<=1);if(U>0)for(l.iushrn(U);U-- >0;)(p.isOdd()||x.isOdd())&&(p.iadd(c),x.isub(g)),p.iushrn(1),x.iushrn(1);f.cmp(l)>=0?(f.isub(l),m.isub(p),b.isub(x)):(l.isub(f),p.isub(m),x.isub(b))}return{a:p,b:x,gcd:l.iushln(_)}},i.prototype._invmp=function(o){t(o.negative===0),t(!o.isZero());var f=this,l=o.clone();f.negative!==0?f=f.umod(o):f=f.clone();for(var m=new i(1),b=new i(0),p=l.clone();f.cmpn(1)>0&&l.cmpn(1)>0;){for(var x=0,_=1;!(f.words[0]&_)&&x<26;++x,_<<=1);if(x>0)for(f.iushrn(x);x-- >0;)m.isOdd()&&m.iadd(p),m.iushrn(1);for(var c=0,g=1;!(l.words[0]&g)&&c<26;++c,g<<=1);if(c>0)for(l.iushrn(c);c-- >0;)b.isOdd()&&b.iadd(p),b.iushrn(1);f.cmp(l)>=0?(f.isub(l),m.isub(b)):(l.isub(f),b.isub(m))}var G;return f.cmpn(1)===0?G=m:G=b,G.cmpn(0)<0&&G.iadd(o),G},i.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var f=this.clone(),l=o.clone();f.negative=0,l.negative=0;for(var m=0;f.isEven()&&l.isEven();m++)f.iushrn(1),l.iushrn(1);do{for(;f.isEven();)f.iushrn(1);for(;l.isEven();)l.iushrn(1);var b=f.cmp(l);if(b<0){var p=f;f=l,l=p}else if(b===0||l.cmpn(1)===0)break;f.isub(l)}while(!0);return l.iushln(m)},i.prototype.invm=function(o){return this.egcd(o).a.umod(o)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(o){return this.words[0]&o},i.prototype.bincn=function(o){t(typeof o=="number");var f=o%26,l=(o-f)/26,m=1<<f;if(this.length<=l)return this._expand(l+1),this.words[l]|=m,this;for(var b=m,p=l;b!==0&&p<this.length;p++){var x=this.words[p]|0;x+=b,b=x>>>26,x&=67108863,this.words[p]=x}return b!==0&&(this.words[p]=b,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(o){var f=o<0;if(this.negative!==0&&!f)return-1;if(this.negative===0&&f)return 1;this._strip();var l;if(this.length>1)l=1;else{f&&(o=-o),t(o<=67108863,"Number is too big");var m=this.words[0]|0;l=m===o?0:m<o?-1:1}return this.negative!==0?-l|0:l},i.prototype.cmp=function(o){if(this.negative!==0&&o.negative===0)return-1;if(this.negative===0&&o.negative!==0)return 1;var f=this.ucmp(o);return this.negative!==0?-f|0:f},i.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var f=0,l=this.length-1;l>=0;l--){var m=this.words[l]|0,b=o.words[l]|0;if(m!==b){m<b?f=-1:m>b&&(f=1);break}}return f},i.prototype.gtn=function(o){return this.cmpn(o)===1},i.prototype.gt=function(o){return this.cmp(o)===1},i.prototype.gten=function(o){return this.cmpn(o)>=0},i.prototype.gte=function(o){return this.cmp(o)>=0},i.prototype.ltn=function(o){return this.cmpn(o)===-1},i.prototype.lt=function(o){return this.cmp(o)===-1},i.prototype.lten=function(o){return this.cmpn(o)<=0},i.prototype.lte=function(o){return this.cmp(o)<=0},i.prototype.eqn=function(o){return this.cmpn(o)===0},i.prototype.eq=function(o){return this.cmp(o)===0},i.red=function(o){return new d(o)},i.prototype.toRed=function(o){return t(!this.red,"Already a number in reduction context"),t(this.negative===0,"red works only with positives"),o.convertTo(this)._forceRed(o)},i.prototype.fromRed=function(){return t(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(o){return this.red=o,this},i.prototype.forceRed=function(o){return t(!this.red,"Already a number in reduction context"),this._forceRed(o)},i.prototype.redAdd=function(o){return t(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},i.prototype.redIAdd=function(o){return t(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},i.prototype.redSub=function(o){return t(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},i.prototype.redISub=function(o){return t(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},i.prototype.redShl=function(o){return t(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},i.prototype.redMul=function(o){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},i.prototype.redIMul=function(o){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},i.prototype.redSqr=function(){return t(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return t(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return t(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return t(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return t(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(o){return t(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var X={k256:null,p224:null,p192:null,p25519:null};function B(h,o){this.name=h,this.p=new i(o,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}B.prototype._tmp=function(){var o=new i(null);return o.words=new Array(Math.ceil(this.n/13)),o},B.prototype.ireduce=function(o){var f=o,l;do this.split(f,this.tmp),f=this.imulK(f),f=f.iadd(this.tmp),l=f.bitLength();while(l>this.n);var m=l<this.n?-1:f.ucmp(this.p);return m===0?(f.words[0]=0,f.length=1):m>0?f.isub(this.p):f.strip!==void 0?f.strip():f._strip(),f},B.prototype.split=function(o,f){o.iushrn(this.n,0,f)},B.prototype.imulK=function(o){return o.imul(this.k)};function P(){B.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(P,B),P.prototype.split=function(o,f){for(var l=4194303,m=Math.min(o.length,9),b=0;b<m;b++)f.words[b]=o.words[b];if(f.length=m,o.length<=9){o.words[0]=0,o.length=1;return}var p=o.words[9];for(f.words[f.length++]=p&l,b=10;b<o.length;b++){var x=o.words[b]|0;o.words[b-10]=(x&l)<<4|p>>>22,p=x}p>>>=22,o.words[b-10]=p,p===0&&o.length>10?o.length-=10:o.length-=9},P.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var f=0,l=0;l<o.length;l++){var m=o.words[l]|0;f+=m*977,o.words[l]=f&67108863,f=m*64+(f/67108864|0)}return o.words[o.length-1]===0&&(o.length--,o.words[o.length-1]===0&&o.length--),o};function L(){B.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(L,B);function te(){B.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(te,B);function S(){B.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(S,B),S.prototype.imulK=function(o){for(var f=0,l=0;l<o.length;l++){var m=(o.words[l]|0)*19+f,b=m&67108863;m>>>=26,o.words[l]=b,f=m}return f!==0&&(o.words[o.length++]=f),o},i._prime=function(o){if(X[o])return X[o];var f;if(o==="k256")f=new P;else if(o==="p224")f=new L;else if(o==="p192")f=new te;else if(o==="p25519")f=new S;else throw new Error("Unknown prime "+o);return X[o]=f,f};function d(h){if(typeof h=="string"){var o=i._prime(h);this.m=o.p,this.prime=o}else t(h.gtn(1),"modulus must be greater than 1"),this.m=h,this.prime=null}d.prototype._verify1=function(o){t(o.negative===0,"red works only with positives"),t(o.red,"red works only with red numbers")},d.prototype._verify2=function(o,f){t((o.negative|f.negative)===0,"red works only with positives"),t(o.red&&o.red===f.red,"red works only with red numbers")},d.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):(w(o,o.umod(this.m)._forceRed(this)),o)},d.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},d.prototype.add=function(o,f){this._verify2(o,f);var l=o.add(f);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},d.prototype.iadd=function(o,f){this._verify2(o,f);var l=o.iadd(f);return l.cmp(this.m)>=0&&l.isub(this.m),l},d.prototype.sub=function(o,f){this._verify2(o,f);var l=o.sub(f);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},d.prototype.isub=function(o,f){this._verify2(o,f);var l=o.isub(f);return l.cmpn(0)<0&&l.iadd(this.m),l},d.prototype.shl=function(o,f){return this._verify1(o),this.imod(o.ushln(f))},d.prototype.imul=function(o,f){return this._verify2(o,f),this.imod(o.imul(f))},d.prototype.mul=function(o,f){return this._verify2(o,f),this.imod(o.mul(f))},d.prototype.isqr=function(o){return this.imul(o,o.clone())},d.prototype.sqr=function(o){return this.mul(o,o)},d.prototype.sqrt=function(o){if(o.isZero())return o.clone();var f=this.m.andln(3);if(t(f%2===1),f===3){var l=this.m.add(new i(1)).iushrn(2);return this.pow(o,l)}for(var m=this.m.subn(1),b=0;!m.isZero()&&m.andln(1)===0;)b++,m.iushrn(1);t(!m.isZero());var p=new i(1).toRed(this),x=p.redNeg(),_=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new i(2*c*c).toRed(this);this.pow(c,_).cmp(x)!==0;)c.redIAdd(x);for(var g=this.pow(c,m),G=this.pow(o,m.addn(1).iushrn(1)),A=this.pow(o,m),U=b;A.cmp(p)!==0;){for(var K=A,O=0;K.cmp(p)!==0;O++)K=K.redSqr();t(O<U);var R=this.pow(g,new i(1).iushln(U-O-1));G=G.redMul(R),g=R.redSqr(),A=A.redMul(g),U=O}return G},d.prototype.invm=function(o){var f=o._invmp(this.m);return f.negative!==0?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},d.prototype.pow=function(o,f){if(f.isZero())return new i(1).toRed(this);if(f.cmpn(1)===0)return o.clone();var l=4,m=new Array(1<<l);m[0]=new i(1).toRed(this),m[1]=o;for(var b=2;b<m.length;b++)m[b]=this.mul(m[b-1],o);var p=m[0],x=0,_=0,c=f.bitLength()%26;for(c===0&&(c=26),b=f.length-1;b>=0;b--){for(var g=f.words[b],G=c-1;G>=0;G--){var A=g>>G&1;if(p!==m[0]&&(p=this.sqr(p)),A===0&&x===0){_=0;continue}x<<=1,x|=A,_++,!(_!==l&&(b!==0||G!==0))&&(p=this.mul(p,m[x]),_=0,x=0)}c=26}return p},d.prototype.convertTo=function(o){var f=o.umod(this.m);return f===o?f.clone():f},d.prototype.convertFrom=function(o){var f=o.clone();return f.red=null,f},i.mont=function(o){return new y(o)};function y(h){d.call(this,h),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(y,d),y.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},y.prototype.convertFrom=function(o){var f=this.imod(o.mul(this.rinv));return f.red=null,f},y.prototype.imul=function(o,f){if(o.isZero()||f.isZero())return o.words[0]=0,o.length=1,o;var l=o.imul(f),m=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=l.isub(m).iushrn(this.shift),p=b;return b.cmp(this.m)>=0?p=b.isub(this.m):b.cmpn(0)<0&&(p=b.iadd(this.m)),p._forceRed(this)},y.prototype.mul=function(o,f){if(o.isZero()||f.isZero())return new i(0)._forceRed(this);var l=o.mul(f),m=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=l.isub(m).iushrn(this.shift),p=b;return b.cmp(this.m)>=0?p=b.isub(this.m):b.cmpn(0)<0&&(p=b.iadd(this.m)),p._forceRed(this)},y.prototype.invm=function(o){var f=this.imod(o._invmp(this.m).mul(this.r2));return f._forceRed(this)}})(typeof v0>"u"||v0,rg)});var gg=de(si=>{"use strict";Object.defineProperty(si,"__esModule",{value:!0});var Us=xo(),Ls=Fr();si.DIGEST_LENGTH=64;si.BLOCK_SIZE=128;var vg=function(){function r(){this.digestLength=si.DIGEST_LENGTH,this.blockSize=si.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return r.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},r.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},r.prototype.clean=function(){Ls.wipe(this._buffer),Ls.wipe(this._tempHi),Ls.wipe(this._tempLo),this.reset()},r.prototype.update=function(e,t){if(t===void 0&&(t=e.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var n=0;if(this._bytesHashed+=t,this._bufferLength>0){for(;this._bufferLength<si.BLOCK_SIZE&&t>0;)this._buffer[this._bufferLength++]=e[n++],t--;this._bufferLength===this.blockSize&&(C0(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(t>=this.blockSize&&(n=C0(this._tempHi,this._tempLo,this._stateHi,this._stateLo,e,n,t),t%=this.blockSize);t>0;)this._buffer[this._bufferLength++]=e[n++],t--;return this},r.prototype.finish=function(e){if(!this._finished){var t=this._bytesHashed,n=this._bufferLength,i=t/536870912|0,s=t<<3,a=t%128<112?128:256;this._buffer[n]=128;for(var u=n+1;u<a-8;u++)this._buffer[u]=0;Us.writeUint32BE(i,this._buffer,a-8),Us.writeUint32BE(s,this._buffer,a-4),C0(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,a),this._finished=!0}for(var u=0;u<this.digestLength/8;u++)Us.writeUint32BE(this._stateHi[u],e,u*8),Us.writeUint32BE(this._stateLo[u],e,u*8+4);return this},r.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},r.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},r.prototype.restoreState=function(e){return this._stateHi.set(e.stateHi),this._stateLo.set(e.stateLo),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},r.prototype.cleanSavedState=function(e){Ls.wipe(e.stateHi),Ls.wipe(e.stateLo),e.buffer&&Ls.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},r}();si.SHA512=vg;var bg=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function C0(r,e,t,n,i,s,a){for(var u=t[0],v=t[1],w=t[2],E=t[3],M=t[4],k=t[5],D=t[6],T=t[7],C=n[0],z=n[1],I=n[2],q=n[3],Y=n[4],H=n[5],X=n[6],B=n[7],P,L,te,S,d,y,h,o;a>=128;){for(var f=0;f<16;f++){var l=8*f+s;r[f]=Us.readUint32BE(i,l),e[f]=Us.readUint32BE(i,l+4)}for(var f=0;f<80;f++){var m=u,b=v,p=w,x=E,_=M,c=k,g=D,G=T,A=C,U=z,K=I,O=q,R=Y,J=H,j=X,Q=B;if(P=T,L=B,d=L&65535,y=L>>>16,h=P&65535,o=P>>>16,P=(M>>>14|Y<<32-14)^(M>>>18|Y<<32-18)^(Y>>>41-32|M<<32-(41-32)),L=(Y>>>14|M<<32-14)^(Y>>>18|M<<32-18)^(M>>>41-32|Y<<32-(41-32)),d+=L&65535,y+=L>>>16,h+=P&65535,o+=P>>>16,P=M&k^~M&D,L=Y&H^~Y&X,d+=L&65535,y+=L>>>16,h+=P&65535,o+=P>>>16,P=bg[f*2],L=bg[f*2+1],d+=L&65535,y+=L>>>16,h+=P&65535,o+=P>>>16,P=r[f%16],L=e[f%16],d+=L&65535,y+=L>>>16,h+=P&65535,o+=P>>>16,y+=d>>>16,h+=y>>>16,o+=h>>>16,te=h&65535|o<<16,S=d&65535|y<<16,P=te,L=S,d=L&65535,y=L>>>16,h=P&65535,o=P>>>16,P=(u>>>28|C<<32-28)^(C>>>34-32|u<<32-(34-32))^(C>>>39-32|u<<32-(39-32)),L=(C>>>28|u<<32-28)^(u>>>34-32|C<<32-(34-32))^(u>>>39-32|C<<32-(39-32)),d+=L&65535,y+=L>>>16,h+=P&65535,o+=P>>>16,P=u&v^u&w^v&w,L=C&z^C&I^z&I,d+=L&65535,y+=L>>>16,h+=P&65535,o+=P>>>16,y+=d>>>16,h+=y>>>16,o+=h>>>16,G=h&65535|o<<16,Q=d&65535|y<<16,P=x,L=O,d=L&65535,y=L>>>16,h=P&65535,o=P>>>16,P=te,L=S,d+=L&65535,y+=L>>>16,h+=P&65535,o+=P>>>16,y+=d>>>16,h+=y>>>16,o+=h>>>16,x=h&65535|o<<16,O=d&65535|y<<16,v=m,w=b,E=p,M=x,k=_,D=c,T=g,u=G,z=A,I=U,q=K,Y=O,H=R,X=J,B=j,C=Q,f%16===15)for(var l=0;l<16;l++)P=r[l],L=e[l],d=L&65535,y=L>>>16,h=P&65535,o=P>>>16,P=r[(l+9)%16],L=e[(l+9)%16],d+=L&65535,y+=L>>>16,h+=P&65535,o+=P>>>16,te=r[(l+1)%16],S=e[(l+1)%16],P=(te>>>1|S<<32-1)^(te>>>8|S<<32-8)^te>>>7,L=(S>>>1|te<<32-1)^(S>>>8|te<<32-8)^(S>>>7|te<<32-7),d+=L&65535,y+=L>>>16,h+=P&65535,o+=P>>>16,te=r[(l+14)%16],S=e[(l+14)%16],P=(te>>>19|S<<32-19)^(S>>>61-32|te<<32-(61-32))^te>>>6,L=(S>>>19|te<<32-19)^(te>>>61-32|S<<32-(61-32))^(S>>>6|te<<32-6),d+=L&65535,y+=L>>>16,h+=P&65535,o+=P>>>16,y+=d>>>16,h+=y>>>16,o+=h>>>16,r[l]=h&65535|o<<16,e[l]=d&65535|y<<16}P=u,L=C,d=L&65535,y=L>>>16,h=P&65535,o=P>>>16,P=t[0],L=n[0],d+=L&65535,y+=L>>>16,h+=P&65535,o+=P>>>16,y+=d>>>16,h+=y>>>16,o+=h>>>16,t[0]=u=h&65535|o<<16,n[0]=C=d&65535|y<<16,P=v,L=z,d=L&65535,y=L>>>16,h=P&65535,o=P>>>16,P=t[1],L=n[1],d+=L&65535,y+=L>>>16,h+=P&65535,o+=P>>>16,y+=d>>>16,h+=y>>>16,o+=h>>>16,t[1]=v=h&65535|o<<16,n[1]=z=d&65535|y<<16,P=w,L=I,d=L&65535,y=L>>>16,h=P&65535,o=P>>>16,P=t[2],L=n[2],d+=L&65535,y+=L>>>16,h+=P&65535,o+=P>>>16,y+=d>>>16,h+=y>>>16,o+=h>>>16,t[2]=w=h&65535|o<<16,n[2]=I=d&65535|y<<16,P=E,L=q,d=L&65535,y=L>>>16,h=P&65535,o=P>>>16,P=t[3],L=n[3],d+=L&65535,y+=L>>>16,h+=P&65535,o+=P>>>16,y+=d>>>16,h+=y>>>16,o+=h>>>16,t[3]=E=h&65535|o<<16,n[3]=q=d&65535|y<<16,P=M,L=Y,d=L&65535,y=L>>>16,h=P&65535,o=P>>>16,P=t[4],L=n[4],d+=L&65535,y+=L>>>16,h+=P&65535,o+=P>>>16,y+=d>>>16,h+=y>>>16,o+=h>>>16,t[4]=M=h&65535|o<<16,n[4]=Y=d&65535|y<<16,P=k,L=H,d=L&65535,y=L>>>16,h=P&65535,o=P>>>16,P=t[5],L=n[5],d+=L&65535,y+=L>>>16,h+=P&65535,o+=P>>>16,y+=d>>>16,h+=y>>>16,o+=h>>>16,t[5]=k=h&65535|o<<16,n[5]=H=d&65535|y<<16,P=D,L=X,d=L&65535,y=L>>>16,h=P&65535,o=P>>>16,P=t[6],L=n[6],d+=L&65535,y+=L>>>16,h+=P&65535,o+=P>>>16,y+=d>>>16,h+=y>>>16,o+=h>>>16,t[6]=D=h&65535|o<<16,n[6]=X=d&65535|y<<16,P=T,L=B,d=L&65535,y=L>>>16,h=P&65535,o=P>>>16,P=t[7],L=n[7],d+=L&65535,y+=L>>>16,h+=P&65535,o+=P>>>16,y+=d>>>16,h+=y>>>16,o+=h>>>16,t[7]=T=h&65535|o<<16,n[7]=B=d&65535|y<<16,s+=128,a-=128}return s}function s_(r){var e=new vg;e.update(r);var t=e.digest();return e.clean(),t}si.hash=s_});var Yc=de(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.convertSecretKeyToX25519=nt.convertPublicKeyToX25519=nt.verify=nt.sign=nt.extractPublicKeyFromSecretKey=nt.generateKeyPair=nt.generateKeyPairFromSeed=nt.SEED_LENGTH=nt.SECRET_KEY_LENGTH=nt.PUBLIC_KEY_LENGTH=nt.SIGNATURE_LENGTH=void 0;var a_=Si(),za=gg(),_g=Fr();nt.SIGNATURE_LENGTH=64;nt.PUBLIC_KEY_LENGTH=32;nt.SECRET_KEY_LENGTH=64;nt.SEED_LENGTH=32;function $e(r){let e=new Float64Array(16);if(r)for(let t=0;t<r.length;t++)e[t]=r[t];return e}var f_=new Uint8Array(32);f_[0]=9;var O0=$e(),$s=$e([1]),c_=$e([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u_=$e([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),yg=$e([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),xg=$e([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),h_=$e([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Bi(r,e){for(let t=0;t<16;t++)r[t]=e[t]|0}function D0(r){let e=1;for(let t=0;t<16;t++){let n=r[t]+e+65535;e=Math.floor(n/65536),r[t]=n-e*65536}r[0]+=e-1+37*(e-1)}function Mg(r,e,t){let n=~(t-1);for(let i=0;i<16;i++){let s=n&(r[i]^e[i]);r[i]^=s,e[i]^=s}}function Ka(r,e){let t=$e(),n=$e();for(let i=0;i<16;i++)n[i]=e[i];D0(n),D0(n),D0(n);for(let i=0;i<2;i++){t[0]=n[0]-65517;for(let a=1;a<15;a++)t[a]=n[a]-65535-(t[a-1]>>16&1),t[a-1]&=65535;t[15]=n[15]-32767-(t[14]>>16&1);let s=t[15]>>16&1;t[14]&=65535,Mg(n,t,1-s)}for(let i=0;i<16;i++)r[2*i]=n[i]&255,r[2*i+1]=n[i]>>8}function Sg(r,e){let t=0;for(let n=0;n<32;n++)t|=r[n]^e[n];return(1&t-1>>>8)-1}function wg(r,e){let t=new Uint8Array(32),n=new Uint8Array(32);return Ka(t,r),Ka(n,e),Sg(t,n)}function Ag(r){let e=new Uint8Array(32);return Ka(e,r),e[0]&1}function l_(r,e){for(let t=0;t<16;t++)r[t]=e[2*t]+(e[2*t+1]<<8);r[15]&=32767}function ko(r,e,t){for(let n=0;n<16;n++)r[n]=e[n]+t[n]}function Do(r,e,t){for(let n=0;n<16;n++)r[n]=e[n]-t[n]}function st(r,e,t){let n,i,s=0,a=0,u=0,v=0,w=0,E=0,M=0,k=0,D=0,T=0,C=0,z=0,I=0,q=0,Y=0,H=0,X=0,B=0,P=0,L=0,te=0,S=0,d=0,y=0,h=0,o=0,f=0,l=0,m=0,b=0,p=0,x=t[0],_=t[1],c=t[2],g=t[3],G=t[4],A=t[5],U=t[6],K=t[7],O=t[8],R=t[9],J=t[10],j=t[11],Q=t[12],he=t[13],ie=t[14],W=t[15];n=e[0],s+=n*x,a+=n*_,u+=n*c,v+=n*g,w+=n*G,E+=n*A,M+=n*U,k+=n*K,D+=n*O,T+=n*R,C+=n*J,z+=n*j,I+=n*Q,q+=n*he,Y+=n*ie,H+=n*W,n=e[1],a+=n*x,u+=n*_,v+=n*c,w+=n*g,E+=n*G,M+=n*A,k+=n*U,D+=n*K,T+=n*O,C+=n*R,z+=n*J,I+=n*j,q+=n*Q,Y+=n*he,H+=n*ie,X+=n*W,n=e[2],u+=n*x,v+=n*_,w+=n*c,E+=n*g,M+=n*G,k+=n*A,D+=n*U,T+=n*K,C+=n*O,z+=n*R,I+=n*J,q+=n*j,Y+=n*Q,H+=n*he,X+=n*ie,B+=n*W,n=e[3],v+=n*x,w+=n*_,E+=n*c,M+=n*g,k+=n*G,D+=n*A,T+=n*U,C+=n*K,z+=n*O,I+=n*R,q+=n*J,Y+=n*j,H+=n*Q,X+=n*he,B+=n*ie,P+=n*W,n=e[4],w+=n*x,E+=n*_,M+=n*c,k+=n*g,D+=n*G,T+=n*A,C+=n*U,z+=n*K,I+=n*O,q+=n*R,Y+=n*J,H+=n*j,X+=n*Q,B+=n*he,P+=n*ie,L+=n*W,n=e[5],E+=n*x,M+=n*_,k+=n*c,D+=n*g,T+=n*G,C+=n*A,z+=n*U,I+=n*K,q+=n*O,Y+=n*R,H+=n*J,X+=n*j,B+=n*Q,P+=n*he,L+=n*ie,te+=n*W,n=e[6],M+=n*x,k+=n*_,D+=n*c,T+=n*g,C+=n*G,z+=n*A,I+=n*U,q+=n*K,Y+=n*O,H+=n*R,X+=n*J,B+=n*j,P+=n*Q,L+=n*he,te+=n*ie,S+=n*W,n=e[7],k+=n*x,D+=n*_,T+=n*c,C+=n*g,z+=n*G,I+=n*A,q+=n*U,Y+=n*K,H+=n*O,X+=n*R,B+=n*J,P+=n*j,L+=n*Q,te+=n*he,S+=n*ie,d+=n*W,n=e[8],D+=n*x,T+=n*_,C+=n*c,z+=n*g,I+=n*G,q+=n*A,Y+=n*U,H+=n*K,X+=n*O,B+=n*R,P+=n*J,L+=n*j,te+=n*Q,S+=n*he,d+=n*ie,y+=n*W,n=e[9],T+=n*x,C+=n*_,z+=n*c,I+=n*g,q+=n*G,Y+=n*A,H+=n*U,X+=n*K,B+=n*O,P+=n*R,L+=n*J,te+=n*j,S+=n*Q,d+=n*he,y+=n*ie,h+=n*W,n=e[10],C+=n*x,z+=n*_,I+=n*c,q+=n*g,Y+=n*G,H+=n*A,X+=n*U,B+=n*K,P+=n*O,L+=n*R,te+=n*J,S+=n*j,d+=n*Q,y+=n*he,h+=n*ie,o+=n*W,n=e[11],z+=n*x,I+=n*_,q+=n*c,Y+=n*g,H+=n*G,X+=n*A,B+=n*U,P+=n*K,L+=n*O,te+=n*R,S+=n*J,d+=n*j,y+=n*Q,h+=n*he,o+=n*ie,f+=n*W,n=e[12],I+=n*x,q+=n*_,Y+=n*c,H+=n*g,X+=n*G,B+=n*A,P+=n*U,L+=n*K,te+=n*O,S+=n*R,d+=n*J,y+=n*j,h+=n*Q,o+=n*he,f+=n*ie,l+=n*W,n=e[13],q+=n*x,Y+=n*_,H+=n*c,X+=n*g,B+=n*G,P+=n*A,L+=n*U,te+=n*K,S+=n*O,d+=n*R,y+=n*J,h+=n*j,o+=n*Q,f+=n*he,l+=n*ie,m+=n*W,n=e[14],Y+=n*x,H+=n*_,X+=n*c,B+=n*g,P+=n*G,L+=n*A,te+=n*U,S+=n*K,d+=n*O,y+=n*R,h+=n*J,o+=n*j,f+=n*Q,l+=n*he,m+=n*ie,b+=n*W,n=e[15],H+=n*x,X+=n*_,B+=n*c,P+=n*g,L+=n*G,te+=n*A,S+=n*U,d+=n*K,y+=n*O,h+=n*R,o+=n*J,f+=n*j,l+=n*Q,m+=n*he,b+=n*ie,p+=n*W,s+=38*X,a+=38*B,u+=38*P,v+=38*L,w+=38*te,E+=38*S,M+=38*d,k+=38*y,D+=38*h,T+=38*o,C+=38*f,z+=38*l,I+=38*m,q+=38*b,Y+=38*p,i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=M+i+65535,i=Math.floor(n/65536),M=n-i*65536,n=k+i+65535,i=Math.floor(n/65536),k=n-i*65536,n=D+i+65535,i=Math.floor(n/65536),D=n-i*65536,n=T+i+65535,i=Math.floor(n/65536),T=n-i*65536,n=C+i+65535,i=Math.floor(n/65536),C=n-i*65536,n=z+i+65535,i=Math.floor(n/65536),z=n-i*65536,n=I+i+65535,i=Math.floor(n/65536),I=n-i*65536,n=q+i+65535,i=Math.floor(n/65536),q=n-i*65536,n=Y+i+65535,i=Math.floor(n/65536),Y=n-i*65536,n=H+i+65535,i=Math.floor(n/65536),H=n-i*65536,s+=i-1+37*(i-1),i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=M+i+65535,i=Math.floor(n/65536),M=n-i*65536,n=k+i+65535,i=Math.floor(n/65536),k=n-i*65536,n=D+i+65535,i=Math.floor(n/65536),D=n-i*65536,n=T+i+65535,i=Math.floor(n/65536),T=n-i*65536,n=C+i+65535,i=Math.floor(n/65536),C=n-i*65536,n=z+i+65535,i=Math.floor(n/65536),z=n-i*65536,n=I+i+65535,i=Math.floor(n/65536),I=n-i*65536,n=q+i+65535,i=Math.floor(n/65536),q=n-i*65536,n=Y+i+65535,i=Math.floor(n/65536),Y=n-i*65536,n=H+i+65535,i=Math.floor(n/65536),H=n-i*65536,s+=i-1+37*(i-1),r[0]=s,r[1]=a,r[2]=u,r[3]=v,r[4]=w,r[5]=E,r[6]=M,r[7]=k,r[8]=D,r[9]=T,r[10]=C,r[11]=z,r[12]=I,r[13]=q,r[14]=Y,r[15]=H}function Co(r,e){st(r,e,e)}function Tg(r,e){let t=$e(),n;for(n=0;n<16;n++)t[n]=e[n];for(n=253;n>=0;n--)Co(t,t),n!==2&&n!==4&&st(t,t,e);for(n=0;n<16;n++)r[n]=t[n]}function d_(r,e){let t=$e(),n;for(n=0;n<16;n++)t[n]=e[n];for(n=250;n>=0;n--)Co(t,t),n!==1&&st(t,t,e);for(n=0;n<16;n++)r[n]=t[n]}function R0(r,e){let t=$e(),n=$e(),i=$e(),s=$e(),a=$e(),u=$e(),v=$e(),w=$e(),E=$e();Do(t,r[1],r[0]),Do(E,e[1],e[0]),st(t,t,E),ko(n,r[0],r[1]),ko(E,e[0],e[1]),st(n,n,E),st(i,r[3],e[3]),st(i,i,u_),st(s,r[2],e[2]),ko(s,s,s),Do(a,n,t),Do(u,s,i),ko(v,s,i),ko(w,n,t),st(r[0],a,u),st(r[1],w,v),st(r[2],v,u),st(r[3],a,w)}function Eg(r,e,t){for(let n=0;n<4;n++)Mg(r[n],e[n],t)}function P0(r,e){let t=$e(),n=$e(),i=$e();Tg(i,e[2]),st(t,e[0],i),st(n,e[1],i),Ka(r,n),r[31]^=Ag(t)<<7}function kg(r,e,t){Bi(r[0],O0),Bi(r[1],$s),Bi(r[2],$s),Bi(r[3],O0);for(let n=255;n>=0;--n){let i=t[n/8|0]>>(n&7)&1;Eg(r,e,i),R0(e,r),R0(r,r),Eg(r,e,i)}}function B0(r,e){let t=[$e(),$e(),$e(),$e()];Bi(t[0],yg),Bi(t[1],xg),Bi(t[2],$s),st(t[3],yg,xg),kg(r,t,e)}function Cg(r){if(r.length!==nt.SEED_LENGTH)throw new Error(`ed25519: seed must be ${nt.SEED_LENGTH} bytes`);let e=(0,za.hash)(r);e[0]&=248,e[31]&=127,e[31]|=64;let t=new Uint8Array(32),n=[$e(),$e(),$e(),$e()];B0(n,e),P0(t,n);let i=new Uint8Array(64);return i.set(r),i.set(t,32),{publicKey:t,secretKey:i}}nt.generateKeyPairFromSeed=Cg;function p_(r){let e=(0,a_.randomBytes)(32,r),t=Cg(e);return(0,_g.wipe)(e),t}nt.generateKeyPair=p_;function m_(r){if(r.length!==nt.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${nt.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(r.subarray(32))}nt.extractPublicKeyFromSecretKey=m_;var I0=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Dg(r,e){let t,n,i,s;for(n=63;n>=32;--n){for(t=0,i=n-32,s=n-12;i<s;++i)e[i]+=t-16*e[n]*I0[i-(n-32)],t=Math.floor((e[i]+128)/256),e[i]-=t*256;e[i]+=t,e[n]=0}for(t=0,i=0;i<32;i++)e[i]+=t-(e[31]>>4)*I0[i],t=e[i]>>8,e[i]&=255;for(i=0;i<32;i++)e[i]-=t*I0[i];for(n=0;n<32;n++)e[n+1]+=e[n]>>8,r[n]=e[n]&255}function N0(r){let e=new Float64Array(64);for(let t=0;t<64;t++)e[t]=r[t];for(let t=0;t<64;t++)r[t]=0;Dg(r,e)}function b_(r,e){let t=new Float64Array(64),n=[$e(),$e(),$e(),$e()],i=(0,za.hash)(r.subarray(0,32));i[0]&=248,i[31]&=127,i[31]|=64;let s=new Uint8Array(64);s.set(i.subarray(32),32);let a=new za.SHA512;a.update(s.subarray(32)),a.update(e);let u=a.digest();a.clean(),N0(u),B0(n,u),P0(s,n),a.reset(),a.update(s.subarray(0,32)),a.update(r.subarray(32)),a.update(e);let v=a.digest();N0(v);for(let w=0;w<32;w++)t[w]=u[w];for(let w=0;w<32;w++)for(let E=0;E<32;E++)t[w+E]+=v[w]*i[E];return Dg(s.subarray(32),t),s}nt.sign=b_;function Ig(r,e){let t=$e(),n=$e(),i=$e(),s=$e(),a=$e(),u=$e(),v=$e();return Bi(r[2],$s),l_(r[1],e),Co(i,r[1]),st(s,i,c_),Do(i,i,r[2]),ko(s,r[2],s),Co(a,s),Co(u,a),st(v,u,a),st(t,v,i),st(t,t,s),d_(t,t),st(t,t,i),st(t,t,s),st(t,t,s),st(r[0],t,s),Co(n,r[0]),st(n,n,s),wg(n,i)&&st(r[0],r[0],h_),Co(n,r[0]),st(n,n,s),wg(n,i)?-1:(Ag(r[0])===e[31]>>7&&Do(r[0],O0,r[0]),st(r[3],r[0],r[1]),0)}function v_(r,e,t){let n=new Uint8Array(32),i=[$e(),$e(),$e(),$e()],s=[$e(),$e(),$e(),$e()];if(t.length!==nt.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${nt.SIGNATURE_LENGTH} bytes`);if(Ig(s,r))return!1;let a=new za.SHA512;a.update(t.subarray(0,32)),a.update(r),a.update(e);let u=a.digest();return N0(u),kg(i,s,u),B0(s,t.subarray(32)),R0(i,s),P0(n,i),!Sg(t,n)}nt.verify=v_;function g_(r){let e=[$e(),$e(),$e(),$e()];if(Ig(e,r))throw new Error("Ed25519: invalid public key");let t=$e(),n=$e(),i=e[1];ko(t,$s,i),Do(n,$s,i),Tg(n,n),st(t,t,n);let s=new Uint8Array(32);return Ka(s,t),s}nt.convertPublicKeyToX25519=g_;function y_(r){let e=(0,za.hash)(r.subarray(0,32));e[0]&=248,e[31]&=127,e[31]|=64;let t=new Uint8Array(e.subarray(0,32));return(0,_g.wipe)(e),t}nt.convertSecretKeyToX25519=y_});var zg=de((CU,Hg)=>{"use strict";function Y_(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var n=0;n<r.length;n++){var i=r.charAt(n),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=n}var a=r.length,u=r.charAt(0),v=Math.log(a)/Math.log(256),w=Math.log(256)/Math.log(a);function E(D){if(D instanceof Uint8Array||(ArrayBuffer.isView(D)?D=new Uint8Array(D.buffer,D.byteOffset,D.byteLength):Array.isArray(D)&&(D=Uint8Array.from(D))),!(D instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(D.length===0)return"";for(var T=0,C=0,z=0,I=D.length;z!==I&&D[z]===0;)z++,T++;for(var q=(I-z)*w+1>>>0,Y=new Uint8Array(q);z!==I;){for(var H=D[z],X=0,B=q-1;(H!==0||X<C)&&B!==-1;B--,X++)H+=256*Y[B]>>>0,Y[B]=H%a>>>0,H=H/a>>>0;if(H!==0)throw new Error("Non-zero carry");C=X,z++}for(var P=q-C;P!==q&&Y[P]===0;)P++;for(var L=u.repeat(T);P<q;++P)L+=r.charAt(Y[P]);return L}function M(D){if(typeof D!="string")throw new TypeError("Expected String");if(D.length===0)return new Uint8Array;var T=0;if(D[T]!==" "){for(var C=0,z=0;D[T]===u;)C++,T++;for(var I=(D.length-T)*v+1>>>0,q=new Uint8Array(I);D[T];){var Y=e[D.charCodeAt(T)];if(Y===255)return;for(var H=0,X=I-1;(Y!==0||H<z)&&X!==-1;X--,H++)Y+=a*q[X]>>>0,q[X]=Y%256>>>0,Y=Y/256>>>0;if(Y!==0)throw new Error("Non-zero carry");z=H,T++}if(D[T]!==" "){for(var B=I-z;B!==I&&q[B]===0;)B++;for(var P=new Uint8Array(C+(I-B)),L=C;B!==I;)P[L++]=q[B++];return P}}}function k(D){var T=M(D);if(T)return T;throw new Error("Non-base"+a+" character")}return{encode:E,decodeUnsafe:M,decode:k}}Hg.exports=Y_});var fu=de((DU,Kg)=>{"use strict";var X_=new TextDecoder,Z_=r=>X_.decode(r),Q_=new TextEncoder,eM=r=>Q_.encode(r);function tM(r,e){let t=new Uint8Array(e),n=0;for(let i of r)t.set(i,n),n+=i.length;return t}Kg.exports={decodeText:Z_,encodeText:eM,concat:tM}});var Gg=de((IU,jg)=>{"use strict";var{encodeText:rM}=fu(),V0=class{constructor(e,t,n,i){this.name=e,this.code=t,this.codeBuf=rM(this.code),this.alphabet=i,this.codec=n(i)}encode(e){return this.codec.encode(e)}decode(e){for(let t of e)if(this.alphabet&&this.alphabet.indexOf(t)<0)throw new Error(`invalid character '${t}' in '${e}'`);return this.codec.decode(e)}};jg.exports=V0});var Vg=de((OU,Jg)=>{"use strict";var nM=(r,e,t)=>{let n={};for(let w=0;w<e.length;++w)n[e[w]]=w;let i=r.length;for(;r[i-1]==="=";)--i;let s=new Uint8Array(i*t/8|0),a=0,u=0,v=0;for(let w=0;w<i;++w){let E=n[r[w]];if(E===void 0)throw new SyntaxError("Invalid character "+r[w]);u=u<<t|E,a+=t,a>=8&&(a-=8,s[v++]=255&u>>a)}if(a>=t||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return s},iM=(r,e,t)=>{let n=e[e.length-1]==="=",i=(1<<t)-1,s="",a=0,u=0;for(let v=0;v<r.length;++v)for(u=u<<8|r[v],a+=8;a>t;)a-=t,s+=e[i&u>>a];if(a&&(s+=e[i&u<<t-a]),n)for(;s.length*t&7;)s+="=";return s},oM=r=>e=>({encode(t){return iM(t,e,r)},decode(t){return nM(t,e,r)}});Jg.exports={rfc4648:oM}});var Zg=de((RU,Xg)=>{"use strict";var Va=zg(),sM=Gg(),{rfc4648:Ut}=Vg(),{decodeText:aM,encodeText:fM}=fu(),cM=()=>({encode:aM,decode:fM}),Wg=[["identity","\0",cM,""],["base2","0",Ut(1),"01"],["base8","7",Ut(3),"01234567"],["base10","9",Va,"0123456789"],["base16","f",Ut(4),"0123456789abcdef"],["base16upper","F",Ut(4),"0123456789ABCDEF"],["base32hex","v",Ut(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",Ut(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",Ut(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",Ut(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",Ut(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",Ut(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",Ut(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",Ut(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",Ut(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",Va,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",Va,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",Va,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",Va,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",Ut(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",Ut(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",Ut(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",Ut(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],Yg=Wg.reduce((r,e)=>(r[e[0]]=new sM(e[0],e[1],e[2],e[3]),r),{}),uM=Wg.reduce((r,e)=>(r[e[1]]=Yg[e[0]],r),{});Xg.exports={names:Yg,codes:uM}});var t3=de((fi,e3)=>{"use strict";var qs=Zg(),{encodeText:hM,decodeText:cu,concat:Qg}=fu();function lM(r,e){if(!e)throw new Error("requires an encoded Uint8Array");let{name:t,codeBuf:n}=No(r);return bM(t,e),Qg([n,e],n.length+e.length)}function dM(r,e){let t=No(r),n=hM(t.encode(e));return Qg([t.codeBuf,n],t.codeBuf.length+n.length)}function pM(r){r instanceof Uint8Array&&(r=cu(r));let e=r[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(e)&&(r=r.toLowerCase()),No(r[0]).decode(r.substring(1))}function mM(r){if(r instanceof Uint8Array&&(r=cu(r)),Object.prototype.toString.call(r)!=="[object String]")return!1;try{return No(r[0]).name}catch{return!1}}function bM(r,e){No(r).decode(cu(e))}function No(r){if(Object.prototype.hasOwnProperty.call(qs.names,r))return qs.names[r];if(Object.prototype.hasOwnProperty.call(qs.codes,r))return qs.codes[r];throw new Error(`Unsupported encoding: ${r}`)}function vM(r){return r instanceof Uint8Array&&(r=cu(r)),No(r[0])}fi=e3.exports=lM;fi.encode=dM;fi.decode=pM;fi.isEncoded=mM;fi.encoding=No;fi.encodingFromData=vM;var gM=Object.freeze(qs.names),yM=Object.freeze(qs.codes);fi.names=gM;fi.codes=yM});var o3=de((NU,i3)=>{i3.exports=n3;var r3=128,xM=127,wM=~xM,EM=Math.pow(2,31);function n3(r,e,t){e=e||[],t=t||0;for(var n=t;r>=EM;)e[t++]=r&255|r3,r/=128;for(;r&wM;)e[t++]=r&255|r3,r>>>=7;return e[t]=r|0,n3.bytes=t-n+1,e}});var f3=de((PU,a3)=>{a3.exports=W0;var _M=128,s3=127;function W0(r,n){var t=0,n=n||0,i=0,s=n,a,u=r.length;do{if(s>=u)throw W0.bytes=0,new RangeError("Could not decode varint");a=r[s++],t+=i<28?(a&s3)<<i:(a&s3)*Math.pow(2,i),i+=7}while(a>=_M);return W0.bytes=s-n,t}});var u3=de((BU,c3)=>{var MM=Math.pow(2,7),SM=Math.pow(2,14),AM=Math.pow(2,21),TM=Math.pow(2,28),kM=Math.pow(2,35),CM=Math.pow(2,42),DM=Math.pow(2,49),IM=Math.pow(2,56),OM=Math.pow(2,63);c3.exports=function(r){return r<MM?1:r<SM?2:r<AM?3:r<TM?4:r<kM?5:r<CM?6:r<DM?7:r<IM?8:r<OM?9:10}});var l3=de((LU,h3)=>{h3.exports={encode:o3(),decode:f3(),encodingLength:u3()}});var p3=de((UU,d3)=>{"use strict";var RM=Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082});d3.exports={names:RM}});var w3=de(($U,x3)=>{"use strict";var m3=t3(),Hs=l3(),{names:Wa}=p3(),{toString:uu}=(Qo(),ta(Kp)),{fromString:NM}=(aa(),ta(zp)),{concat:PM}=(lh(),ta(Tp)),zs={};for(let r in Wa){let e=r;zs[Wa[e]]=e}Object.freeze(zs);function BM(r){if(!(r instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return uu(r,"base16")}function LM(r){return NM(r,"base16")}function UM(r){if(!(r instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return uu(m3.encode("base58btc",r)).slice(1)}function $M(r){let e=r instanceof Uint8Array?uu(r):r;return m3.decode("z"+e)}function b3(r){if(!(r instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");if(r.length<2)throw new Error("multihash too short. must be > 2 bytes.");let e=Hs.decode(r);if(!g3(e))throw new Error(`multihash unknown function code: 0x${e.toString(16)}`);r=r.slice(Hs.decode.bytes);let t=Hs.decode(r);if(t<0)throw new Error(`multihash invalid length: ${t}`);if(r=r.slice(Hs.decode.bytes),r.length!==t)throw new Error(`multihash length inconsistent: 0x${uu(r,"base16")}`);return{code:e,name:zs[e],length:t,digest:r}}function FM(r,e,t){if(!r||e===void 0)throw new Error("multihash encode requires at least two args: digest, code");let n=v3(e);if(!(r instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(t==null&&(t=r.length),t&&r.length!==t)throw new Error("digest length should be equal to specified length.");let i=Hs.encode(n),s=Hs.encode(t);return PM([i,s,r],i.length+s.length+r.length)}function v3(r){let e=r;if(typeof r=="string"){if(Wa[r]===void 0)throw new Error(`Unrecognized hash function named: ${r}`);e=Wa[r]}if(typeof e!="number")throw new Error(`Hash function code should be a number. Got: ${e}`);if(zs[e]===void 0&&!Y0(e))throw new Error(`Unrecognized function code: ${e}`);return e}function Y0(r){return r>0&&r<16}function g3(r){return!!(Y0(r)||zs[r])}function y3(r){b3(r)}function qM(r){return y3(r),r.subarray(0,2)}x3.exports={names:Wa,codes:zs,toHexString:BM,fromHexString:LM,toB58String:UM,fromB58String:$M,decode:b3,encode:FM,coerceCode:v3,isAppCode:Y0,validate:y3,prefix:qM,isValidCode:g3}});var C3=de(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});var bu=xo(),mu=Fr();Ui.DIGEST_LENGTH=32;Ui.BLOCK_SIZE=64;var k3=function(){function r(){this.digestLength=Ui.DIGEST_LENGTH,this.blockSize=Ui.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return r.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},r.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},r.prototype.clean=function(){mu.wipe(this._buffer),mu.wipe(this._temp),this.reset()},r.prototype.update=function(e,t){if(t===void 0&&(t=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var n=0;if(this._bytesHashed+=t,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&t>0;)this._buffer[this._bufferLength++]=e[n++],t--;this._bufferLength===this.blockSize&&(Z0(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(t>=this.blockSize&&(n=Z0(this._temp,this._state,e,n,t),t%=this.blockSize);t>0;)this._buffer[this._bufferLength++]=e[n++],t--;return this},r.prototype.finish=function(e){if(!this._finished){var t=this._bytesHashed,n=this._bufferLength,i=t/536870912|0,s=t<<3,a=t%64<56?64:128;this._buffer[n]=128;for(var u=n+1;u<a-8;u++)this._buffer[u]=0;bu.writeUint32BE(i,this._buffer,a-8),bu.writeUint32BE(s,this._buffer,a-4),Z0(this._temp,this._state,this._buffer,0,a),this._finished=!0}for(var u=0;u<this.digestLength/4;u++)bu.writeUint32BE(this._state[u],e,u*4);return this},r.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},r.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},r.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},r.prototype.cleanSavedState=function(e){mu.wipe(e.state),e.buffer&&mu.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},r}();Ui.SHA256=k3;var eS=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function Z0(r,e,t,n,i){for(;i>=64;){for(var s=e[0],a=e[1],u=e[2],v=e[3],w=e[4],E=e[5],M=e[6],k=e[7],D=0;D<16;D++){var T=n+D*4;r[D]=bu.readUint32BE(t,T)}for(var D=16;D<64;D++){var C=r[D-2],z=(C>>>17|C<<32-17)^(C>>>19|C<<32-19)^C>>>10;C=r[D-15];var I=(C>>>7|C<<32-7)^(C>>>18|C<<32-18)^C>>>3;r[D]=(z+r[D-7]|0)+(I+r[D-16]|0)}for(var D=0;D<64;D++){var z=(((w>>>6|w<<26)^(w>>>11|w<<21)^(w>>>25|w<<7))+(w&E^~w&M)|0)+(k+(eS[D]+r[D]|0)|0)|0,I=((s>>>2|s<<32-2)^(s>>>13|s<<32-13)^(s>>>22|s<<32-22))+(s&a^s&u^a&u)|0;k=M,M=E,E=w,w=v+z|0,v=u,u=a,a=s,s=z+I|0}e[0]+=s,e[1]+=a,e[2]+=u,e[3]+=v,e[4]+=w,e[5]+=E,e[6]+=M,e[7]+=k,n+=64,i-=64}return n}function tS(r){var e=new k3;e.update(r);var t=e.digest();return e.clean(),t}Ui.hash=tS});var D3=de((y$,rS)=>{rS.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}});var $n=de((I3,Q0)=>{(function(r,e){"use strict";function t(S,d){if(!S)throw new Error(d||"Assertion failed")}function n(S,d){S.super_=d;var y=function(){};y.prototype=d.prototype,S.prototype=new y,S.prototype.constructor=S}function i(S,d,y){if(i.isBN(S))return S;this.negative=0,this.words=null,this.length=0,this.red=null,S!==null&&((d==="le"||d==="be")&&(y=d,d=10),this._init(S||0,d||10,y||"be"))}typeof r=="object"?r.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var s;try{typeof window<"u"&&typeof window.Buffer<"u"?s=window.Buffer:s=Fc().Buffer}catch{}i.isBN=function(d){return d instanceof i?!0:d!==null&&typeof d=="object"&&d.constructor.wordSize===i.wordSize&&Array.isArray(d.words)},i.max=function(d,y){return d.cmp(y)>0?d:y},i.min=function(d,y){return d.cmp(y)<0?d:y},i.prototype._init=function(d,y,h){if(typeof d=="number")return this._initNumber(d,y,h);if(typeof d=="object")return this._initArray(d,y,h);y==="hex"&&(y=16),t(y===(y|0)&&y>=2&&y<=36),d=d.toString().replace(/\s+/g,"");var o=0;d[0]==="-"&&(o++,this.negative=1),o<d.length&&(y===16?this._parseHex(d,o,h):(this._parseBase(d,y,o),h==="le"&&this._initArray(this.toArray(),y,h)))},i.prototype._initNumber=function(d,y,h){d<0&&(this.negative=1,d=-d),d<67108864?(this.words=[d&67108863],this.length=1):d<4503599627370496?(this.words=[d&67108863,d/67108864&67108863],this.length=2):(t(d<9007199254740992),this.words=[d&67108863,d/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),y,h)},i.prototype._initArray=function(d,y,h){if(t(typeof d.length=="number"),d.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(d.length/3),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var f,l,m=0;if(h==="be")for(o=d.length-1,f=0;o>=0;o-=3)l=d[o]|d[o-1]<<8|d[o-2]<<16,this.words[f]|=l<<m&67108863,this.words[f+1]=l>>>26-m&67108863,m+=24,m>=26&&(m-=26,f++);else if(h==="le")for(o=0,f=0;o<d.length;o+=3)l=d[o]|d[o+1]<<8|d[o+2]<<16,this.words[f]|=l<<m&67108863,this.words[f+1]=l>>>26-m&67108863,m+=24,m>=26&&(m-=26,f++);return this.strip()};function a(S,d){var y=S.charCodeAt(d);return y>=65&&y<=70?y-55:y>=97&&y<=102?y-87:y-48&15}function u(S,d,y){var h=a(S,y);return y-1>=d&&(h|=a(S,y-1)<<4),h}i.prototype._parseHex=function(d,y,h){this.length=Math.ceil((d.length-y)/6),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var f=0,l=0,m;if(h==="be")for(o=d.length-1;o>=y;o-=2)m=u(d,y,o)<<f,this.words[l]|=m&67108863,f>=18?(f-=18,l+=1,this.words[l]|=m>>>26):f+=8;else{var b=d.length-y;for(o=b%2===0?y+1:y;o<d.length;o+=2)m=u(d,y,o)<<f,this.words[l]|=m&67108863,f>=18?(f-=18,l+=1,this.words[l]|=m>>>26):f+=8}this.strip()};function v(S,d,y,h){for(var o=0,f=Math.min(S.length,y),l=d;l<f;l++){var m=S.charCodeAt(l)-48;o*=h,m>=49?o+=m-49+10:m>=17?o+=m-17+10:o+=m}return o}i.prototype._parseBase=function(d,y,h){this.words=[0],this.length=1;for(var o=0,f=1;f<=67108863;f*=y)o++;o--,f=f/y|0;for(var l=d.length-h,m=l%o,b=Math.min(l,l-m)+h,p=0,x=h;x<b;x+=o)p=v(d,x,x+o,y),this.imuln(f),this.words[0]+p<67108864?this.words[0]+=p:this._iaddn(p);if(m!==0){var _=1;for(p=v(d,x,d.length,y),x=0;x<m;x++)_*=y;this.imuln(_),this.words[0]+p<67108864?this.words[0]+=p:this._iaddn(p)}this.strip()},i.prototype.copy=function(d){d.words=new Array(this.length);for(var y=0;y<this.length;y++)d.words[y]=this.words[y];d.length=this.length,d.negative=this.negative,d.red=this.red},i.prototype.clone=function(){var d=new i(null);return this.copy(d),d},i.prototype._expand=function(d){for(;this.length<d;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var w=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],E=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],M=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(d,y){d=d||10,y=y|0||1;var h;if(d===16||d==="hex"){h="";for(var o=0,f=0,l=0;l<this.length;l++){var m=this.words[l],b=((m<<o|f)&16777215).toString(16);f=m>>>24-o&16777215,f!==0||l!==this.length-1?h=w[6-b.length]+b+h:h=b+h,o+=2,o>=26&&(o-=26,l--)}for(f!==0&&(h=f.toString(16)+h);h.length%y!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(d===(d|0)&&d>=2&&d<=36){var p=E[d],x=M[d];h="";var _=this.clone();for(_.negative=0;!_.isZero();){var c=_.modn(x).toString(d);_=_.idivn(x),_.isZero()?h=c+h:h=w[p-c.length]+c+h}for(this.isZero()&&(h="0"+h);h.length%y!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}t(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var d=this.words[0];return this.length===2?d+=this.words[1]*67108864:this.length===3&&this.words[2]===1?d+=4503599627370496+this.words[1]*67108864:this.length>2&&t(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-d:d},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(d,y){return t(typeof s<"u"),this.toArrayLike(s,d,y)},i.prototype.toArray=function(d,y){return this.toArrayLike(Array,d,y)},i.prototype.toArrayLike=function(d,y,h){var o=this.byteLength(),f=h||Math.max(1,o);t(o<=f,"byte array longer than desired length"),t(f>0,"Requested array length <= 0"),this.strip();var l=y==="le",m=new d(f),b,p,x=this.clone();if(l){for(p=0;!x.isZero();p++)b=x.andln(255),x.iushrn(8),m[p]=b;for(;p<f;p++)m[p]=0}else{for(p=0;p<f-o;p++)m[p]=0;for(p=0;!x.isZero();p++)b=x.andln(255),x.iushrn(8),m[f-p-1]=b}return m},Math.clz32?i.prototype._countBits=function(d){return 32-Math.clz32(d)}:i.prototype._countBits=function(d){var y=d,h=0;return y>=4096&&(h+=13,y>>>=13),y>=64&&(h+=7,y>>>=7),y>=8&&(h+=4,y>>>=4),y>=2&&(h+=2,y>>>=2),h+y},i.prototype._zeroBits=function(d){if(d===0)return 26;var y=d,h=0;return y&8191||(h+=13,y>>>=13),y&127||(h+=7,y>>>=7),y&15||(h+=4,y>>>=4),y&3||(h+=2,y>>>=2),y&1||h++,h},i.prototype.bitLength=function(){var d=this.words[this.length-1],y=this._countBits(d);return(this.length-1)*26+y};function k(S){for(var d=new Array(S.bitLength()),y=0;y<d.length;y++){var h=y/26|0,o=y%26;d[y]=(S.words[h]&1<<o)>>>o}return d}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var d=0,y=0;y<this.length;y++){var h=this._zeroBits(this.words[y]);if(d+=h,h!==26)break}return d},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(d){return this.negative!==0?this.abs().inotn(d).iaddn(1):this.clone()},i.prototype.fromTwos=function(d){return this.testn(d-1)?this.notn(d).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(d){for(;this.length<d.length;)this.words[this.length++]=0;for(var y=0;y<d.length;y++)this.words[y]=this.words[y]|d.words[y];return this.strip()},i.prototype.ior=function(d){return t((this.negative|d.negative)===0),this.iuor(d)},i.prototype.or=function(d){return this.length>d.length?this.clone().ior(d):d.clone().ior(this)},i.prototype.uor=function(d){return this.length>d.length?this.clone().iuor(d):d.clone().iuor(this)},i.prototype.iuand=function(d){var y;this.length>d.length?y=d:y=this;for(var h=0;h<y.length;h++)this.words[h]=this.words[h]&d.words[h];return this.length=y.length,this.strip()},i.prototype.iand=function(d){return t((this.negative|d.negative)===0),this.iuand(d)},i.prototype.and=function(d){return this.length>d.length?this.clone().iand(d):d.clone().iand(this)},i.prototype.uand=function(d){return this.length>d.length?this.clone().iuand(d):d.clone().iuand(this)},i.prototype.iuxor=function(d){var y,h;this.length>d.length?(y=this,h=d):(y=d,h=this);for(var o=0;o<h.length;o++)this.words[o]=y.words[o]^h.words[o];if(this!==y)for(;o<y.length;o++)this.words[o]=y.words[o];return this.length=y.length,this.strip()},i.prototype.ixor=function(d){return t((this.negative|d.negative)===0),this.iuxor(d)},i.prototype.xor=function(d){return this.length>d.length?this.clone().ixor(d):d.clone().ixor(this)},i.prototype.uxor=function(d){return this.length>d.length?this.clone().iuxor(d):d.clone().iuxor(this)},i.prototype.inotn=function(d){t(typeof d=="number"&&d>=0);var y=Math.ceil(d/26)|0,h=d%26;this._expand(y),h>0&&y--;for(var o=0;o<y;o++)this.words[o]=~this.words[o]&67108863;return h>0&&(this.words[o]=~this.words[o]&67108863>>26-h),this.strip()},i.prototype.notn=function(d){return this.clone().inotn(d)},i.prototype.setn=function(d,y){t(typeof d=="number"&&d>=0);var h=d/26|0,o=d%26;return this._expand(h+1),y?this.words[h]=this.words[h]|1<<o:this.words[h]=this.words[h]&~(1<<o),this.strip()},i.prototype.iadd=function(d){var y;if(this.negative!==0&&d.negative===0)return this.negative=0,y=this.isub(d),this.negative^=1,this._normSign();if(this.negative===0&&d.negative!==0)return d.negative=0,y=this.isub(d),d.negative=1,y._normSign();var h,o;this.length>d.length?(h=this,o=d):(h=d,o=this);for(var f=0,l=0;l<o.length;l++)y=(h.words[l]|0)+(o.words[l]|0)+f,this.words[l]=y&67108863,f=y>>>26;for(;f!==0&&l<h.length;l++)y=(h.words[l]|0)+f,this.words[l]=y&67108863,f=y>>>26;if(this.length=h.length,f!==0)this.words[this.length]=f,this.length++;else if(h!==this)for(;l<h.length;l++)this.words[l]=h.words[l];return this},i.prototype.add=function(d){var y;return d.negative!==0&&this.negative===0?(d.negative=0,y=this.sub(d),d.negative^=1,y):d.negative===0&&this.negative!==0?(this.negative=0,y=d.sub(this),this.negative=1,y):this.length>d.length?this.clone().iadd(d):d.clone().iadd(this)},i.prototype.isub=function(d){if(d.negative!==0){d.negative=0;var y=this.iadd(d);return d.negative=1,y._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(d),this.negative=1,this._normSign();var h=this.cmp(d);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var o,f;h>0?(o=this,f=d):(o=d,f=this);for(var l=0,m=0;m<f.length;m++)y=(o.words[m]|0)-(f.words[m]|0)+l,l=y>>26,this.words[m]=y&67108863;for(;l!==0&&m<o.length;m++)y=(o.words[m]|0)+l,l=y>>26,this.words[m]=y&67108863;if(l===0&&m<o.length&&o!==this)for(;m<o.length;m++)this.words[m]=o.words[m];return this.length=Math.max(this.length,m),o!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(d){return this.clone().isub(d)};function D(S,d,y){y.negative=d.negative^S.negative;var h=S.length+d.length|0;y.length=h,h=h-1|0;var o=S.words[0]|0,f=d.words[0]|0,l=o*f,m=l&67108863,b=l/67108864|0;y.words[0]=m;for(var p=1;p<h;p++){for(var x=b>>>26,_=b&67108863,c=Math.min(p,d.length-1),g=Math.max(0,p-S.length+1);g<=c;g++){var G=p-g|0;o=S.words[G]|0,f=d.words[g]|0,l=o*f+_,x+=l/67108864|0,_=l&67108863}y.words[p]=_|0,b=x|0}return b!==0?y.words[p]=b|0:y.length--,y.strip()}var T=function(d,y,h){var o=d.words,f=y.words,l=h.words,m=0,b,p,x,_=o[0]|0,c=_&8191,g=_>>>13,G=o[1]|0,A=G&8191,U=G>>>13,K=o[2]|0,O=K&8191,R=K>>>13,J=o[3]|0,j=J&8191,Q=J>>>13,he=o[4]|0,ie=he&8191,W=he>>>13,le=o[5]|0,Z=le&8191,oe=le>>>13,$=o[6]|0,re=$&8191,ce=$>>>13,Ue=o[7]|0,me=Ue&8191,xe=Ue>>>13,_t=o[8]|0,ee=_t&8191,V=_t>>>13,N=o[9]|0,F=N&8191,ne=N>>>13,ae=f[0]|0,se=ae&8191,ue=ae>>>13,Xe=f[1]|0,be=Xe&8191,pe=Xe>>>13,Qe=f[2]|0,ge=Qe&8191,we=Qe>>>13,hr=f[3]|0,_e=hr&8191,Me=hr>>>13,lr=f[4]|0,Se=lr&8191,Ae=lr>>>13,dr=f[5]|0,Te=dr&8191,ke=dr>>>13,pr=f[6]|0,Ce=pr&8191,De=pr>>>13,mr=f[7]|0,Ie=mr&8191,Oe=mr>>>13,br=f[8]|0,Re=br&8191,Ne=br>>>13,vr=f[9]|0,Pe=vr&8191,Be=vr>>>13;h.negative=d.negative^y.negative,h.length=19,b=Math.imul(c,se),p=Math.imul(c,ue),p=p+Math.imul(g,se)|0,x=Math.imul(g,ue);var or=(m+b|0)+((p&8191)<<13)|0;m=(x+(p>>>13)|0)+(or>>>26)|0,or&=67108863,b=Math.imul(A,se),p=Math.imul(A,ue),p=p+Math.imul(U,se)|0,x=Math.imul(U,ue),b=b+Math.imul(c,be)|0,p=p+Math.imul(c,pe)|0,p=p+Math.imul(g,be)|0,x=x+Math.imul(g,pe)|0;var Fe=(m+b|0)+((p&8191)<<13)|0;m=(x+(p>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,b=Math.imul(O,se),p=Math.imul(O,ue),p=p+Math.imul(R,se)|0,x=Math.imul(R,ue),b=b+Math.imul(A,be)|0,p=p+Math.imul(A,pe)|0,p=p+Math.imul(U,be)|0,x=x+Math.imul(U,pe)|0,b=b+Math.imul(c,ge)|0,p=p+Math.imul(c,we)|0,p=p+Math.imul(g,ge)|0,x=x+Math.imul(g,we)|0;var qe=(m+b|0)+((p&8191)<<13)|0;m=(x+(p>>>13)|0)+(qe>>>26)|0,qe&=67108863,b=Math.imul(j,se),p=Math.imul(j,ue),p=p+Math.imul(Q,se)|0,x=Math.imul(Q,ue),b=b+Math.imul(O,be)|0,p=p+Math.imul(O,pe)|0,p=p+Math.imul(R,be)|0,x=x+Math.imul(R,pe)|0,b=b+Math.imul(A,ge)|0,p=p+Math.imul(A,we)|0,p=p+Math.imul(U,ge)|0,x=x+Math.imul(U,we)|0,b=b+Math.imul(c,_e)|0,p=p+Math.imul(c,Me)|0,p=p+Math.imul(g,_e)|0,x=x+Math.imul(g,Me)|0;var Ft=(m+b|0)+((p&8191)<<13)|0;m=(x+(p>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,b=Math.imul(ie,se),p=Math.imul(ie,ue),p=p+Math.imul(W,se)|0,x=Math.imul(W,ue),b=b+Math.imul(j,be)|0,p=p+Math.imul(j,pe)|0,p=p+Math.imul(Q,be)|0,x=x+Math.imul(Q,pe)|0,b=b+Math.imul(O,ge)|0,p=p+Math.imul(O,we)|0,p=p+Math.imul(R,ge)|0,x=x+Math.imul(R,we)|0,b=b+Math.imul(A,_e)|0,p=p+Math.imul(A,Me)|0,p=p+Math.imul(U,_e)|0,x=x+Math.imul(U,Me)|0,b=b+Math.imul(c,Se)|0,p=p+Math.imul(c,Ae)|0,p=p+Math.imul(g,Se)|0,x=x+Math.imul(g,Ae)|0;var qt=(m+b|0)+((p&8191)<<13)|0;m=(x+(p>>>13)|0)+(qt>>>26)|0,qt&=67108863,b=Math.imul(Z,se),p=Math.imul(Z,ue),p=p+Math.imul(oe,se)|0,x=Math.imul(oe,ue),b=b+Math.imul(ie,be)|0,p=p+Math.imul(ie,pe)|0,p=p+Math.imul(W,be)|0,x=x+Math.imul(W,pe)|0,b=b+Math.imul(j,ge)|0,p=p+Math.imul(j,we)|0,p=p+Math.imul(Q,ge)|0,x=x+Math.imul(Q,we)|0,b=b+Math.imul(O,_e)|0,p=p+Math.imul(O,Me)|0,p=p+Math.imul(R,_e)|0,x=x+Math.imul(R,Me)|0,b=b+Math.imul(A,Se)|0,p=p+Math.imul(A,Ae)|0,p=p+Math.imul(U,Se)|0,x=x+Math.imul(U,Ae)|0,b=b+Math.imul(c,Te)|0,p=p+Math.imul(c,ke)|0,p=p+Math.imul(g,Te)|0,x=x+Math.imul(g,ke)|0;var Ht=(m+b|0)+((p&8191)<<13)|0;m=(x+(p>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,b=Math.imul(re,se),p=Math.imul(re,ue),p=p+Math.imul(ce,se)|0,x=Math.imul(ce,ue),b=b+Math.imul(Z,be)|0,p=p+Math.imul(Z,pe)|0,p=p+Math.imul(oe,be)|0,x=x+Math.imul(oe,pe)|0,b=b+Math.imul(ie,ge)|0,p=p+Math.imul(ie,we)|0,p=p+Math.imul(W,ge)|0,x=x+Math.imul(W,we)|0,b=b+Math.imul(j,_e)|0,p=p+Math.imul(j,Me)|0,p=p+Math.imul(Q,_e)|0,x=x+Math.imul(Q,Me)|0,b=b+Math.imul(O,Se)|0,p=p+Math.imul(O,Ae)|0,p=p+Math.imul(R,Se)|0,x=x+Math.imul(R,Ae)|0,b=b+Math.imul(A,Te)|0,p=p+Math.imul(A,ke)|0,p=p+Math.imul(U,Te)|0,x=x+Math.imul(U,ke)|0,b=b+Math.imul(c,Ce)|0,p=p+Math.imul(c,De)|0,p=p+Math.imul(g,Ce)|0,x=x+Math.imul(g,De)|0;var zt=(m+b|0)+((p&8191)<<13)|0;m=(x+(p>>>13)|0)+(zt>>>26)|0,zt&=67108863,b=Math.imul(me,se),p=Math.imul(me,ue),p=p+Math.imul(xe,se)|0,x=Math.imul(xe,ue),b=b+Math.imul(re,be)|0,p=p+Math.imul(re,pe)|0,p=p+Math.imul(ce,be)|0,x=x+Math.imul(ce,pe)|0,b=b+Math.imul(Z,ge)|0,p=p+Math.imul(Z,we)|0,p=p+Math.imul(oe,ge)|0,x=x+Math.imul(oe,we)|0,b=b+Math.imul(ie,_e)|0,p=p+Math.imul(ie,Me)|0,p=p+Math.imul(W,_e)|0,x=x+Math.imul(W,Me)|0,b=b+Math.imul(j,Se)|0,p=p+Math.imul(j,Ae)|0,p=p+Math.imul(Q,Se)|0,x=x+Math.imul(Q,Ae)|0,b=b+Math.imul(O,Te)|0,p=p+Math.imul(O,ke)|0,p=p+Math.imul(R,Te)|0,x=x+Math.imul(R,ke)|0,b=b+Math.imul(A,Ce)|0,p=p+Math.imul(A,De)|0,p=p+Math.imul(U,Ce)|0,x=x+Math.imul(U,De)|0,b=b+Math.imul(c,Ie)|0,p=p+Math.imul(c,Oe)|0,p=p+Math.imul(g,Ie)|0,x=x+Math.imul(g,Oe)|0;var Kt=(m+b|0)+((p&8191)<<13)|0;m=(x+(p>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,b=Math.imul(ee,se),p=Math.imul(ee,ue),p=p+Math.imul(V,se)|0,x=Math.imul(V,ue),b=b+Math.imul(me,be)|0,p=p+Math.imul(me,pe)|0,p=p+Math.imul(xe,be)|0,x=x+Math.imul(xe,pe)|0,b=b+Math.imul(re,ge)|0,p=p+Math.imul(re,we)|0,p=p+Math.imul(ce,ge)|0,x=x+Math.imul(ce,we)|0,b=b+Math.imul(Z,_e)|0,p=p+Math.imul(Z,Me)|0,p=p+Math.imul(oe,_e)|0,x=x+Math.imul(oe,Me)|0,b=b+Math.imul(ie,Se)|0,p=p+Math.imul(ie,Ae)|0,p=p+Math.imul(W,Se)|0,x=x+Math.imul(W,Ae)|0,b=b+Math.imul(j,Te)|0,p=p+Math.imul(j,ke)|0,p=p+Math.imul(Q,Te)|0,x=x+Math.imul(Q,ke)|0,b=b+Math.imul(O,Ce)|0,p=p+Math.imul(O,De)|0,p=p+Math.imul(R,Ce)|0,x=x+Math.imul(R,De)|0,b=b+Math.imul(A,Ie)|0,p=p+Math.imul(A,Oe)|0,p=p+Math.imul(U,Ie)|0,x=x+Math.imul(U,Oe)|0,b=b+Math.imul(c,Re)|0,p=p+Math.imul(c,Ne)|0,p=p+Math.imul(g,Re)|0,x=x+Math.imul(g,Ne)|0;var Yr=(m+b|0)+((p&8191)<<13)|0;m=(x+(p>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,b=Math.imul(F,se),p=Math.imul(F,ue),p=p+Math.imul(ne,se)|0,x=Math.imul(ne,ue),b=b+Math.imul(ee,be)|0,p=p+Math.imul(ee,pe)|0,p=p+Math.imul(V,be)|0,x=x+Math.imul(V,pe)|0,b=b+Math.imul(me,ge)|0,p=p+Math.imul(me,we)|0,p=p+Math.imul(xe,ge)|0,x=x+Math.imul(xe,we)|0,b=b+Math.imul(re,_e)|0,p=p+Math.imul(re,Me)|0,p=p+Math.imul(ce,_e)|0,x=x+Math.imul(ce,Me)|0,b=b+Math.imul(Z,Se)|0,p=p+Math.imul(Z,Ae)|0,p=p+Math.imul(oe,Se)|0,x=x+Math.imul(oe,Ae)|0,b=b+Math.imul(ie,Te)|0,p=p+Math.imul(ie,ke)|0,p=p+Math.imul(W,Te)|0,x=x+Math.imul(W,ke)|0,b=b+Math.imul(j,Ce)|0,p=p+Math.imul(j,De)|0,p=p+Math.imul(Q,Ce)|0,x=x+Math.imul(Q,De)|0,b=b+Math.imul(O,Ie)|0,p=p+Math.imul(O,Oe)|0,p=p+Math.imul(R,Ie)|0,x=x+Math.imul(R,Oe)|0,b=b+Math.imul(A,Re)|0,p=p+Math.imul(A,Ne)|0,p=p+Math.imul(U,Re)|0,x=x+Math.imul(U,Ne)|0,b=b+Math.imul(c,Pe)|0,p=p+Math.imul(c,Be)|0,p=p+Math.imul(g,Pe)|0,x=x+Math.imul(g,Be)|0;var Xr=(m+b|0)+((p&8191)<<13)|0;m=(x+(p>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,b=Math.imul(F,be),p=Math.imul(F,pe),p=p+Math.imul(ne,be)|0,x=Math.imul(ne,pe),b=b+Math.imul(ee,ge)|0,p=p+Math.imul(ee,we)|0,p=p+Math.imul(V,ge)|0,x=x+Math.imul(V,we)|0,b=b+Math.imul(me,_e)|0,p=p+Math.imul(me,Me)|0,p=p+Math.imul(xe,_e)|0,x=x+Math.imul(xe,Me)|0,b=b+Math.imul(re,Se)|0,p=p+Math.imul(re,Ae)|0,p=p+Math.imul(ce,Se)|0,x=x+Math.imul(ce,Ae)|0,b=b+Math.imul(Z,Te)|0,p=p+Math.imul(Z,ke)|0,p=p+Math.imul(oe,Te)|0,x=x+Math.imul(oe,ke)|0,b=b+Math.imul(ie,Ce)|0,p=p+Math.imul(ie,De)|0,p=p+Math.imul(W,Ce)|0,x=x+Math.imul(W,De)|0,b=b+Math.imul(j,Ie)|0,p=p+Math.imul(j,Oe)|0,p=p+Math.imul(Q,Ie)|0,x=x+Math.imul(Q,Oe)|0,b=b+Math.imul(O,Re)|0,p=p+Math.imul(O,Ne)|0,p=p+Math.imul(R,Re)|0,x=x+Math.imul(R,Ne)|0,b=b+Math.imul(A,Pe)|0,p=p+Math.imul(A,Be)|0,p=p+Math.imul(U,Pe)|0,x=x+Math.imul(U,Be)|0;var Zr=(m+b|0)+((p&8191)<<13)|0;m=(x+(p>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,b=Math.imul(F,ge),p=Math.imul(F,we),p=p+Math.imul(ne,ge)|0,x=Math.imul(ne,we),b=b+Math.imul(ee,_e)|0,p=p+Math.imul(ee,Me)|0,p=p+Math.imul(V,_e)|0,x=x+Math.imul(V,Me)|0,b=b+Math.imul(me,Se)|0,p=p+Math.imul(me,Ae)|0,p=p+Math.imul(xe,Se)|0,x=x+Math.imul(xe,Ae)|0,b=b+Math.imul(re,Te)|0,p=p+Math.imul(re,ke)|0,p=p+Math.imul(ce,Te)|0,x=x+Math.imul(ce,ke)|0,b=b+Math.imul(Z,Ce)|0,p=p+Math.imul(Z,De)|0,p=p+Math.imul(oe,Ce)|0,x=x+Math.imul(oe,De)|0,b=b+Math.imul(ie,Ie)|0,p=p+Math.imul(ie,Oe)|0,p=p+Math.imul(W,Ie)|0,x=x+Math.imul(W,Oe)|0,b=b+Math.imul(j,Re)|0,p=p+Math.imul(j,Ne)|0,p=p+Math.imul(Q,Re)|0,x=x+Math.imul(Q,Ne)|0,b=b+Math.imul(O,Pe)|0,p=p+Math.imul(O,Be)|0,p=p+Math.imul(R,Pe)|0,x=x+Math.imul(R,Be)|0;var Qr=(m+b|0)+((p&8191)<<13)|0;m=(x+(p>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,b=Math.imul(F,_e),p=Math.imul(F,Me),p=p+Math.imul(ne,_e)|0,x=Math.imul(ne,Me),b=b+Math.imul(ee,Se)|0,p=p+Math.imul(ee,Ae)|0,p=p+Math.imul(V,Se)|0,x=x+Math.imul(V,Ae)|0,b=b+Math.imul(me,Te)|0,p=p+Math.imul(me,ke)|0,p=p+Math.imul(xe,Te)|0,x=x+Math.imul(xe,ke)|0,b=b+Math.imul(re,Ce)|0,p=p+Math.imul(re,De)|0,p=p+Math.imul(ce,Ce)|0,x=x+Math.imul(ce,De)|0,b=b+Math.imul(Z,Ie)|0,p=p+Math.imul(Z,Oe)|0,p=p+Math.imul(oe,Ie)|0,x=x+Math.imul(oe,Oe)|0,b=b+Math.imul(ie,Re)|0,p=p+Math.imul(ie,Ne)|0,p=p+Math.imul(W,Re)|0,x=x+Math.imul(W,Ne)|0,b=b+Math.imul(j,Pe)|0,p=p+Math.imul(j,Be)|0,p=p+Math.imul(Q,Pe)|0,x=x+Math.imul(Q,Be)|0;var en=(m+b|0)+((p&8191)<<13)|0;m=(x+(p>>>13)|0)+(en>>>26)|0,en&=67108863,b=Math.imul(F,Se),p=Math.imul(F,Ae),p=p+Math.imul(ne,Se)|0,x=Math.imul(ne,Ae),b=b+Math.imul(ee,Te)|0,p=p+Math.imul(ee,ke)|0,p=p+Math.imul(V,Te)|0,x=x+Math.imul(V,ke)|0,b=b+Math.imul(me,Ce)|0,p=p+Math.imul(me,De)|0,p=p+Math.imul(xe,Ce)|0,x=x+Math.imul(xe,De)|0,b=b+Math.imul(re,Ie)|0,p=p+Math.imul(re,Oe)|0,p=p+Math.imul(ce,Ie)|0,x=x+Math.imul(ce,Oe)|0,b=b+Math.imul(Z,Re)|0,p=p+Math.imul(Z,Ne)|0,p=p+Math.imul(oe,Re)|0,x=x+Math.imul(oe,Ne)|0,b=b+Math.imul(ie,Pe)|0,p=p+Math.imul(ie,Be)|0,p=p+Math.imul(W,Pe)|0,x=x+Math.imul(W,Be)|0;var tn=(m+b|0)+((p&8191)<<13)|0;m=(x+(p>>>13)|0)+(tn>>>26)|0,tn&=67108863,b=Math.imul(F,Te),p=Math.imul(F,ke),p=p+Math.imul(ne,Te)|0,x=Math.imul(ne,ke),b=b+Math.imul(ee,Ce)|0,p=p+Math.imul(ee,De)|0,p=p+Math.imul(V,Ce)|0,x=x+Math.imul(V,De)|0,b=b+Math.imul(me,Ie)|0,p=p+Math.imul(me,Oe)|0,p=p+Math.imul(xe,Ie)|0,x=x+Math.imul(xe,Oe)|0,b=b+Math.imul(re,Re)|0,p=p+Math.imul(re,Ne)|0,p=p+Math.imul(ce,Re)|0,x=x+Math.imul(ce,Ne)|0,b=b+Math.imul(Z,Pe)|0,p=p+Math.imul(Z,Be)|0,p=p+Math.imul(oe,Pe)|0,x=x+Math.imul(oe,Be)|0;var rn=(m+b|0)+((p&8191)<<13)|0;m=(x+(p>>>13)|0)+(rn>>>26)|0,rn&=67108863,b=Math.imul(F,Ce),p=Math.imul(F,De),p=p+Math.imul(ne,Ce)|0,x=Math.imul(ne,De),b=b+Math.imul(ee,Ie)|0,p=p+Math.imul(ee,Oe)|0,p=p+Math.imul(V,Ie)|0,x=x+Math.imul(V,Oe)|0,b=b+Math.imul(me,Re)|0,p=p+Math.imul(me,Ne)|0,p=p+Math.imul(xe,Re)|0,x=x+Math.imul(xe,Ne)|0,b=b+Math.imul(re,Pe)|0,p=p+Math.imul(re,Be)|0,p=p+Math.imul(ce,Pe)|0,x=x+Math.imul(ce,Be)|0;var nn=(m+b|0)+((p&8191)<<13)|0;m=(x+(p>>>13)|0)+(nn>>>26)|0,nn&=67108863,b=Math.imul(F,Ie),p=Math.imul(F,Oe),p=p+Math.imul(ne,Ie)|0,x=Math.imul(ne,Oe),b=b+Math.imul(ee,Re)|0,p=p+Math.imul(ee,Ne)|0,p=p+Math.imul(V,Re)|0,x=x+Math.imul(V,Ne)|0,b=b+Math.imul(me,Pe)|0,p=p+Math.imul(me,Be)|0,p=p+Math.imul(xe,Pe)|0,x=x+Math.imul(xe,Be)|0;var on=(m+b|0)+((p&8191)<<13)|0;m=(x+(p>>>13)|0)+(on>>>26)|0,on&=67108863,b=Math.imul(F,Re),p=Math.imul(F,Ne),p=p+Math.imul(ne,Re)|0,x=Math.imul(ne,Ne),b=b+Math.imul(ee,Pe)|0,p=p+Math.imul(ee,Be)|0,p=p+Math.imul(V,Pe)|0,x=x+Math.imul(V,Be)|0;var sn=(m+b|0)+((p&8191)<<13)|0;m=(x+(p>>>13)|0)+(sn>>>26)|0,sn&=67108863,b=Math.imul(F,Pe),p=Math.imul(F,Be),p=p+Math.imul(ne,Pe)|0,x=Math.imul(ne,Be);var an=(m+b|0)+((p&8191)<<13)|0;return m=(x+(p>>>13)|0)+(an>>>26)|0,an&=67108863,l[0]=or,l[1]=Fe,l[2]=qe,l[3]=Ft,l[4]=qt,l[5]=Ht,l[6]=zt,l[7]=Kt,l[8]=Yr,l[9]=Xr,l[10]=Zr,l[11]=Qr,l[12]=en,l[13]=tn,l[14]=rn,l[15]=nn,l[16]=on,l[17]=sn,l[18]=an,m!==0&&(l[19]=m,h.length++),h};Math.imul||(T=D);function C(S,d,y){y.negative=d.negative^S.negative,y.length=S.length+d.length;for(var h=0,o=0,f=0;f<y.length-1;f++){var l=o;o=0;for(var m=h&67108863,b=Math.min(f,d.length-1),p=Math.max(0,f-S.length+1);p<=b;p++){var x=f-p,_=S.words[x]|0,c=d.words[p]|0,g=_*c,G=g&67108863;l=l+(g/67108864|0)|0,G=G+m|0,m=G&67108863,l=l+(G>>>26)|0,o+=l>>>26,l&=67108863}y.words[f]=m,h=l,l=o}return h!==0?y.words[f]=h:y.length--,y.strip()}function z(S,d,y){var h=new I;return h.mulp(S,d,y)}i.prototype.mulTo=function(d,y){var h,o=this.length+d.length;return this.length===10&&d.length===10?h=T(this,d,y):o<63?h=D(this,d,y):o<1024?h=C(this,d,y):h=z(this,d,y),h};function I(S,d){this.x=S,this.y=d}I.prototype.makeRBT=function(d){for(var y=new Array(d),h=i.prototype._countBits(d)-1,o=0;o<d;o++)y[o]=this.revBin(o,h,d);return y},I.prototype.revBin=function(d,y,h){if(d===0||d===h-1)return d;for(var o=0,f=0;f<y;f++)o|=(d&1)<<y-f-1,d>>=1;return o},I.prototype.permute=function(d,y,h,o,f,l){for(var m=0;m<l;m++)o[m]=y[d[m]],f[m]=h[d[m]]},I.prototype.transform=function(d,y,h,o,f,l){this.permute(l,d,y,h,o,f);for(var m=1;m<f;m<<=1)for(var b=m<<1,p=Math.cos(2*Math.PI/b),x=Math.sin(2*Math.PI/b),_=0;_<f;_+=b)for(var c=p,g=x,G=0;G<m;G++){var A=h[_+G],U=o[_+G],K=h[_+G+m],O=o[_+G+m],R=c*K-g*O;O=c*O+g*K,K=R,h[_+G]=A+K,o[_+G]=U+O,h[_+G+m]=A-K,o[_+G+m]=U-O,G!==b&&(R=p*c-x*g,g=p*g+x*c,c=R)}},I.prototype.guessLen13b=function(d,y){var h=Math.max(y,d)|1,o=h&1,f=0;for(h=h/2|0;h;h=h>>>1)f++;return 1<<f+1+o},I.prototype.conjugate=function(d,y,h){if(!(h<=1))for(var o=0;o<h/2;o++){var f=d[o];d[o]=d[h-o-1],d[h-o-1]=f,f=y[o],y[o]=-y[h-o-1],y[h-o-1]=-f}},I.prototype.normalize13b=function(d,y){for(var h=0,o=0;o<y/2;o++){var f=Math.round(d[2*o+1]/y)*8192+Math.round(d[2*o]/y)+h;d[o]=f&67108863,f<67108864?h=0:h=f/67108864|0}return d},I.prototype.convert13b=function(d,y,h,o){for(var f=0,l=0;l<y;l++)f=f+(d[l]|0),h[2*l]=f&8191,f=f>>>13,h[2*l+1]=f&8191,f=f>>>13;for(l=2*y;l<o;++l)h[l]=0;t(f===0),t((f&-8192)===0)},I.prototype.stub=function(d){for(var y=new Array(d),h=0;h<d;h++)y[h]=0;return y},I.prototype.mulp=function(d,y,h){var o=2*this.guessLen13b(d.length,y.length),f=this.makeRBT(o),l=this.stub(o),m=new Array(o),b=new Array(o),p=new Array(o),x=new Array(o),_=new Array(o),c=new Array(o),g=h.words;g.length=o,this.convert13b(d.words,d.length,m,o),this.convert13b(y.words,y.length,x,o),this.transform(m,l,b,p,o,f),this.transform(x,l,_,c,o,f);for(var G=0;G<o;G++){var A=b[G]*_[G]-p[G]*c[G];p[G]=b[G]*c[G]+p[G]*_[G],b[G]=A}return this.conjugate(b,p,o),this.transform(b,p,g,l,o,f),this.conjugate(g,l,o),this.normalize13b(g,o),h.negative=d.negative^y.negative,h.length=d.length+y.length,h.strip()},i.prototype.mul=function(d){var y=new i(null);return y.words=new Array(this.length+d.length),this.mulTo(d,y)},i.prototype.mulf=function(d){var y=new i(null);return y.words=new Array(this.length+d.length),z(this,d,y)},i.prototype.imul=function(d){return this.clone().mulTo(d,this)},i.prototype.imuln=function(d){t(typeof d=="number"),t(d<67108864);for(var y=0,h=0;h<this.length;h++){var o=(this.words[h]|0)*d,f=(o&67108863)+(y&67108863);y>>=26,y+=o/67108864|0,y+=f>>>26,this.words[h]=f&67108863}return y!==0&&(this.words[h]=y,this.length++),this},i.prototype.muln=function(d){return this.clone().imuln(d)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(d){var y=k(d);if(y.length===0)return new i(1);for(var h=this,o=0;o<y.length&&y[o]===0;o++,h=h.sqr());if(++o<y.length)for(var f=h.sqr();o<y.length;o++,f=f.sqr())y[o]!==0&&(h=h.mul(f));return h},i.prototype.iushln=function(d){t(typeof d=="number"&&d>=0);var y=d%26,h=(d-y)/26,o=67108863>>>26-y<<26-y,f;if(y!==0){var l=0;for(f=0;f<this.length;f++){var m=this.words[f]&o,b=(this.words[f]|0)-m<<y;this.words[f]=b|l,l=m>>>26-y}l&&(this.words[f]=l,this.length++)}if(h!==0){for(f=this.length-1;f>=0;f--)this.words[f+h]=this.words[f];for(f=0;f<h;f++)this.words[f]=0;this.length+=h}return this.strip()},i.prototype.ishln=function(d){return t(this.negative===0),this.iushln(d)},i.prototype.iushrn=function(d,y,h){t(typeof d=="number"&&d>=0);var o;y?o=(y-y%26)/26:o=0;var f=d%26,l=Math.min((d-f)/26,this.length),m=67108863^67108863>>>f<<f,b=h;if(o-=l,o=Math.max(0,o),b){for(var p=0;p<l;p++)b.words[p]=this.words[p];b.length=l}if(l!==0)if(this.length>l)for(this.length-=l,p=0;p<this.length;p++)this.words[p]=this.words[p+l];else this.words[0]=0,this.length=1;var x=0;for(p=this.length-1;p>=0&&(x!==0||p>=o);p--){var _=this.words[p]|0;this.words[p]=x<<26-f|_>>>f,x=_&m}return b&&x!==0&&(b.words[b.length++]=x),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(d,y,h){return t(this.negative===0),this.iushrn(d,y,h)},i.prototype.shln=function(d){return this.clone().ishln(d)},i.prototype.ushln=function(d){return this.clone().iushln(d)},i.prototype.shrn=function(d){return this.clone().ishrn(d)},i.prototype.ushrn=function(d){return this.clone().iushrn(d)},i.prototype.testn=function(d){t(typeof d=="number"&&d>=0);var y=d%26,h=(d-y)/26,o=1<<y;if(this.length<=h)return!1;var f=this.words[h];return!!(f&o)},i.prototype.imaskn=function(d){t(typeof d=="number"&&d>=0);var y=d%26,h=(d-y)/26;if(t(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(y!==0&&h++,this.length=Math.min(h,this.length),y!==0){var o=67108863^67108863>>>y<<y;this.words[this.length-1]&=o}return this.strip()},i.prototype.maskn=function(d){return this.clone().imaskn(d)},i.prototype.iaddn=function(d){return t(typeof d=="number"),t(d<67108864),d<0?this.isubn(-d):this.negative!==0?this.length===1&&(this.words[0]|0)<d?(this.words[0]=d-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(d),this.negative=1,this):this._iaddn(d)},i.prototype._iaddn=function(d){this.words[0]+=d;for(var y=0;y<this.length&&this.words[y]>=67108864;y++)this.words[y]-=67108864,y===this.length-1?this.words[y+1]=1:this.words[y+1]++;return this.length=Math.max(this.length,y+1),this},i.prototype.isubn=function(d){if(t(typeof d=="number"),t(d<67108864),d<0)return this.iaddn(-d);if(this.negative!==0)return this.negative=0,this.iaddn(d),this.negative=1,this;if(this.words[0]-=d,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var y=0;y<this.length&&this.words[y]<0;y++)this.words[y]+=67108864,this.words[y+1]-=1;return this.strip()},i.prototype.addn=function(d){return this.clone().iaddn(d)},i.prototype.subn=function(d){return this.clone().isubn(d)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(d,y,h){var o=d.length+h,f;this._expand(o);var l,m=0;for(f=0;f<d.length;f++){l=(this.words[f+h]|0)+m;var b=(d.words[f]|0)*y;l-=b&67108863,m=(l>>26)-(b/67108864|0),this.words[f+h]=l&67108863}for(;f<this.length-h;f++)l=(this.words[f+h]|0)+m,m=l>>26,this.words[f+h]=l&67108863;if(m===0)return this.strip();for(t(m===-1),m=0,f=0;f<this.length;f++)l=-(this.words[f]|0)+m,m=l>>26,this.words[f]=l&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(d,y){var h=this.length-d.length,o=this.clone(),f=d,l=f.words[f.length-1]|0,m=this._countBits(l);h=26-m,h!==0&&(f=f.ushln(h),o.iushln(h),l=f.words[f.length-1]|0);var b=o.length-f.length,p;if(y!=="mod"){p=new i(null),p.length=b+1,p.words=new Array(p.length);for(var x=0;x<p.length;x++)p.words[x]=0}var _=o.clone()._ishlnsubmul(f,1,b);_.negative===0&&(o=_,p&&(p.words[b]=1));for(var c=b-1;c>=0;c--){var g=(o.words[f.length+c]|0)*67108864+(o.words[f.length+c-1]|0);for(g=Math.min(g/l|0,67108863),o._ishlnsubmul(f,g,c);o.negative!==0;)g--,o.negative=0,o._ishlnsubmul(f,1,c),o.isZero()||(o.negative^=1);p&&(p.words[c]=g)}return p&&p.strip(),o.strip(),y!=="div"&&h!==0&&o.iushrn(h),{div:p||null,mod:o}},i.prototype.divmod=function(d,y,h){if(t(!d.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var o,f,l;return this.negative!==0&&d.negative===0?(l=this.neg().divmod(d,y),y!=="mod"&&(o=l.div.neg()),y!=="div"&&(f=l.mod.neg(),h&&f.negative!==0&&f.iadd(d)),{div:o,mod:f}):this.negative===0&&d.negative!==0?(l=this.divmod(d.neg(),y),y!=="mod"&&(o=l.div.neg()),{div:o,mod:l.mod}):this.negative&d.negative?(l=this.neg().divmod(d.neg(),y),y!=="div"&&(f=l.mod.neg(),h&&f.negative!==0&&f.isub(d)),{div:l.div,mod:f}):d.length>this.length||this.cmp(d)<0?{div:new i(0),mod:this}:d.length===1?y==="div"?{div:this.divn(d.words[0]),mod:null}:y==="mod"?{div:null,mod:new i(this.modn(d.words[0]))}:{div:this.divn(d.words[0]),mod:new i(this.modn(d.words[0]))}:this._wordDiv(d,y)},i.prototype.div=function(d){return this.divmod(d,"div",!1).div},i.prototype.mod=function(d){return this.divmod(d,"mod",!1).mod},i.prototype.umod=function(d){return this.divmod(d,"mod",!0).mod},i.prototype.divRound=function(d){var y=this.divmod(d);if(y.mod.isZero())return y.div;var h=y.div.negative!==0?y.mod.isub(d):y.mod,o=d.ushrn(1),f=d.andln(1),l=h.cmp(o);return l<0||f===1&&l===0?y.div:y.div.negative!==0?y.div.isubn(1):y.div.iaddn(1)},i.prototype.modn=function(d){t(d<=67108863);for(var y=(1<<26)%d,h=0,o=this.length-1;o>=0;o--)h=(y*h+(this.words[o]|0))%d;return h},i.prototype.idivn=function(d){t(d<=67108863);for(var y=0,h=this.length-1;h>=0;h--){var o=(this.words[h]|0)+y*67108864;this.words[h]=o/d|0,y=o%d}return this.strip()},i.prototype.divn=function(d){return this.clone().idivn(d)},i.prototype.egcd=function(d){t(d.negative===0),t(!d.isZero());var y=this,h=d.clone();y.negative!==0?y=y.umod(d):y=y.clone();for(var o=new i(1),f=new i(0),l=new i(0),m=new i(1),b=0;y.isEven()&&h.isEven();)y.iushrn(1),h.iushrn(1),++b;for(var p=h.clone(),x=y.clone();!y.isZero();){for(var _=0,c=1;!(y.words[0]&c)&&_<26;++_,c<<=1);if(_>0)for(y.iushrn(_);_-- >0;)(o.isOdd()||f.isOdd())&&(o.iadd(p),f.isub(x)),o.iushrn(1),f.iushrn(1);for(var g=0,G=1;!(h.words[0]&G)&&g<26;++g,G<<=1);if(g>0)for(h.iushrn(g);g-- >0;)(l.isOdd()||m.isOdd())&&(l.iadd(p),m.isub(x)),l.iushrn(1),m.iushrn(1);y.cmp(h)>=0?(y.isub(h),o.isub(l),f.isub(m)):(h.isub(y),l.isub(o),m.isub(f))}return{a:l,b:m,gcd:h.iushln(b)}},i.prototype._invmp=function(d){t(d.negative===0),t(!d.isZero());var y=this,h=d.clone();y.negative!==0?y=y.umod(d):y=y.clone();for(var o=new i(1),f=new i(0),l=h.clone();y.cmpn(1)>0&&h.cmpn(1)>0;){for(var m=0,b=1;!(y.words[0]&b)&&m<26;++m,b<<=1);if(m>0)for(y.iushrn(m);m-- >0;)o.isOdd()&&o.iadd(l),o.iushrn(1);for(var p=0,x=1;!(h.words[0]&x)&&p<26;++p,x<<=1);if(p>0)for(h.iushrn(p);p-- >0;)f.isOdd()&&f.iadd(l),f.iushrn(1);y.cmp(h)>=0?(y.isub(h),o.isub(f)):(h.isub(y),f.isub(o))}var _;return y.cmpn(1)===0?_=o:_=f,_.cmpn(0)<0&&_.iadd(d),_},i.prototype.gcd=function(d){if(this.isZero())return d.abs();if(d.isZero())return this.abs();var y=this.clone(),h=d.clone();y.negative=0,h.negative=0;for(var o=0;y.isEven()&&h.isEven();o++)y.iushrn(1),h.iushrn(1);do{for(;y.isEven();)y.iushrn(1);for(;h.isEven();)h.iushrn(1);var f=y.cmp(h);if(f<0){var l=y;y=h,h=l}else if(f===0||h.cmpn(1)===0)break;y.isub(h)}while(!0);return h.iushln(o)},i.prototype.invm=function(d){return this.egcd(d).a.umod(d)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(d){return this.words[0]&d},i.prototype.bincn=function(d){t(typeof d=="number");var y=d%26,h=(d-y)/26,o=1<<y;if(this.length<=h)return this._expand(h+1),this.words[h]|=o,this;for(var f=o,l=h;f!==0&&l<this.length;l++){var m=this.words[l]|0;m+=f,f=m>>>26,m&=67108863,this.words[l]=m}return f!==0&&(this.words[l]=f,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(d){var y=d<0;if(this.negative!==0&&!y)return-1;if(this.negative===0&&y)return 1;this.strip();var h;if(this.length>1)h=1;else{y&&(d=-d),t(d<=67108863,"Number is too big");var o=this.words[0]|0;h=o===d?0:o<d?-1:1}return this.negative!==0?-h|0:h},i.prototype.cmp=function(d){if(this.negative!==0&&d.negative===0)return-1;if(this.negative===0&&d.negative!==0)return 1;var y=this.ucmp(d);return this.negative!==0?-y|0:y},i.prototype.ucmp=function(d){if(this.length>d.length)return 1;if(this.length<d.length)return-1;for(var y=0,h=this.length-1;h>=0;h--){var o=this.words[h]|0,f=d.words[h]|0;if(o!==f){o<f?y=-1:o>f&&(y=1);break}}return y},i.prototype.gtn=function(d){return this.cmpn(d)===1},i.prototype.gt=function(d){return this.cmp(d)===1},i.prototype.gten=function(d){return this.cmpn(d)>=0},i.prototype.gte=function(d){return this.cmp(d)>=0},i.prototype.ltn=function(d){return this.cmpn(d)===-1},i.prototype.lt=function(d){return this.cmp(d)===-1},i.prototype.lten=function(d){return this.cmpn(d)<=0},i.prototype.lte=function(d){return this.cmp(d)<=0},i.prototype.eqn=function(d){return this.cmpn(d)===0},i.prototype.eq=function(d){return this.cmp(d)===0},i.red=function(d){return new L(d)},i.prototype.toRed=function(d){return t(!this.red,"Already a number in reduction context"),t(this.negative===0,"red works only with positives"),d.convertTo(this)._forceRed(d)},i.prototype.fromRed=function(){return t(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(d){return this.red=d,this},i.prototype.forceRed=function(d){return t(!this.red,"Already a number in reduction context"),this._forceRed(d)},i.prototype.redAdd=function(d){return t(this.red,"redAdd works only with red numbers"),this.red.add(this,d)},i.prototype.redIAdd=function(d){return t(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,d)},i.prototype.redSub=function(d){return t(this.red,"redSub works only with red numbers"),this.red.sub(this,d)},i.prototype.redISub=function(d){return t(this.red,"redISub works only with red numbers"),this.red.isub(this,d)},i.prototype.redShl=function(d){return t(this.red,"redShl works only with red numbers"),this.red.shl(this,d)},i.prototype.redMul=function(d){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,d),this.red.mul(this,d)},i.prototype.redIMul=function(d){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,d),this.red.imul(this,d)},i.prototype.redSqr=function(){return t(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return t(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return t(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return t(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return t(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(d){return t(this.red&&!d.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,d)};var q={k256:null,p224:null,p192:null,p25519:null};function Y(S,d){this.name=S,this.p=new i(d,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Y.prototype._tmp=function(){var d=new i(null);return d.words=new Array(Math.ceil(this.n/13)),d},Y.prototype.ireduce=function(d){var y=d,h;do this.split(y,this.tmp),y=this.imulK(y),y=y.iadd(this.tmp),h=y.bitLength();while(h>this.n);var o=h<this.n?-1:y.ucmp(this.p);return o===0?(y.words[0]=0,y.length=1):o>0?y.isub(this.p):y.strip!==void 0?y.strip():y._strip(),y},Y.prototype.split=function(d,y){d.iushrn(this.n,0,y)},Y.prototype.imulK=function(d){return d.imul(this.k)};function H(){Y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(H,Y),H.prototype.split=function(d,y){for(var h=4194303,o=Math.min(d.length,9),f=0;f<o;f++)y.words[f]=d.words[f];if(y.length=o,d.length<=9){d.words[0]=0,d.length=1;return}var l=d.words[9];for(y.words[y.length++]=l&h,f=10;f<d.length;f++){var m=d.words[f]|0;d.words[f-10]=(m&h)<<4|l>>>22,l=m}l>>>=22,d.words[f-10]=l,l===0&&d.length>10?d.length-=10:d.length-=9},H.prototype.imulK=function(d){d.words[d.length]=0,d.words[d.length+1]=0,d.length+=2;for(var y=0,h=0;h<d.length;h++){var o=d.words[h]|0;y+=o*977,d.words[h]=y&67108863,y=o*64+(y/67108864|0)}return d.words[d.length-1]===0&&(d.length--,d.words[d.length-1]===0&&d.length--),d};function X(){Y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(X,Y);function B(){Y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(B,Y);function P(){Y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(P,Y),P.prototype.imulK=function(d){for(var y=0,h=0;h<d.length;h++){var o=(d.words[h]|0)*19+y,f=o&67108863;o>>>=26,d.words[h]=f,y=o}return y!==0&&(d.words[d.length++]=y),d},i._prime=function(d){if(q[d])return q[d];var y;if(d==="k256")y=new H;else if(d==="p224")y=new X;else if(d==="p192")y=new B;else if(d==="p25519")y=new P;else throw new Error("Unknown prime "+d);return q[d]=y,y};function L(S){if(typeof S=="string"){var d=i._prime(S);this.m=d.p,this.prime=d}else t(S.gtn(1),"modulus must be greater than 1"),this.m=S,this.prime=null}L.prototype._verify1=function(d){t(d.negative===0,"red works only with positives"),t(d.red,"red works only with red numbers")},L.prototype._verify2=function(d,y){t((d.negative|y.negative)===0,"red works only with positives"),t(d.red&&d.red===y.red,"red works only with red numbers")},L.prototype.imod=function(d){return this.prime?this.prime.ireduce(d)._forceRed(this):d.umod(this.m)._forceRed(this)},L.prototype.neg=function(d){return d.isZero()?d.clone():this.m.sub(d)._forceRed(this)},L.prototype.add=function(d,y){this._verify2(d,y);var h=d.add(y);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},L.prototype.iadd=function(d,y){this._verify2(d,y);var h=d.iadd(y);return h.cmp(this.m)>=0&&h.isub(this.m),h},L.prototype.sub=function(d,y){this._verify2(d,y);var h=d.sub(y);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},L.prototype.isub=function(d,y){this._verify2(d,y);var h=d.isub(y);return h.cmpn(0)<0&&h.iadd(this.m),h},L.prototype.shl=function(d,y){return this._verify1(d),this.imod(d.ushln(y))},L.prototype.imul=function(d,y){return this._verify2(d,y),this.imod(d.imul(y))},L.prototype.mul=function(d,y){return this._verify2(d,y),this.imod(d.mul(y))},L.prototype.isqr=function(d){return this.imul(d,d.clone())},L.prototype.sqr=function(d){return this.mul(d,d)},L.prototype.sqrt=function(d){if(d.isZero())return d.clone();var y=this.m.andln(3);if(t(y%2===1),y===3){var h=this.m.add(new i(1)).iushrn(2);return this.pow(d,h)}for(var o=this.m.subn(1),f=0;!o.isZero()&&o.andln(1)===0;)f++,o.iushrn(1);t(!o.isZero());var l=new i(1).toRed(this),m=l.redNeg(),b=this.m.subn(1).iushrn(1),p=this.m.bitLength();for(p=new i(2*p*p).toRed(this);this.pow(p,b).cmp(m)!==0;)p.redIAdd(m);for(var x=this.pow(p,o),_=this.pow(d,o.addn(1).iushrn(1)),c=this.pow(d,o),g=f;c.cmp(l)!==0;){for(var G=c,A=0;G.cmp(l)!==0;A++)G=G.redSqr();t(A<g);var U=this.pow(x,new i(1).iushln(g-A-1));_=_.redMul(U),x=U.redSqr(),c=c.redMul(x),g=A}return _},L.prototype.invm=function(d){var y=d._invmp(this.m);return y.negative!==0?(y.negative=0,this.imod(y).redNeg()):this.imod(y)},L.prototype.pow=function(d,y){if(y.isZero())return new i(1).toRed(this);if(y.cmpn(1)===0)return d.clone();var h=4,o=new Array(1<<h);o[0]=new i(1).toRed(this),o[1]=d;for(var f=2;f<o.length;f++)o[f]=this.mul(o[f-1],d);var l=o[0],m=0,b=0,p=y.bitLength()%26;for(p===0&&(p=26),f=y.length-1;f>=0;f--){for(var x=y.words[f],_=p-1;_>=0;_--){var c=x>>_&1;if(l!==o[0]&&(l=this.sqr(l)),c===0&&m===0){b=0;continue}m<<=1,m|=c,b++,!(b!==h&&(f!==0||_!==0))&&(l=this.mul(l,o[m]),b=0,m=0)}p=26}return l},L.prototype.convertTo=function(d){var y=d.umod(this.m);return y===d?y.clone():y},L.prototype.convertFrom=function(d){var y=d.clone();return y.red=null,y},i.mont=function(d){return new te(d)};function te(S){L.call(this,S),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(te,L),te.prototype.convertTo=function(d){return this.imod(d.ushln(this.shift))},te.prototype.convertFrom=function(d){var y=this.imod(d.mul(this.rinv));return y.red=null,y},te.prototype.imul=function(d,y){if(d.isZero()||y.isZero())return d.words[0]=0,d.length=1,d;var h=d.imul(y),o=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=h.isub(o).iushrn(this.shift),l=f;return f.cmp(this.m)>=0?l=f.isub(this.m):f.cmpn(0)<0&&(l=f.iadd(this.m)),l._forceRed(this)},te.prototype.mul=function(d,y){if(d.isZero()||y.isZero())return new i(0)._forceRed(this);var h=d.mul(y),o=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=h.isub(o).iushrn(this.shift),l=f;return f.cmp(this.m)>=0?l=f.isub(this.m):f.cmpn(0)<0&&(l=f.iadd(this.m)),l._forceRed(this)},te.prototype.invm=function(d){var y=this.imod(d._invmp(this.m).mul(this.r2));return y._forceRed(this)}})(typeof Q0>"u"||Q0,I3)});var ed=de(N3=>{"use strict";var vu=N3;function nS(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if(typeof r!="string"){for(var n=0;n<r.length;n++)t[n]=r[n]|0;return t}if(e==="hex"){r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r);for(var n=0;n<r.length;n+=2)t.push(parseInt(r[n]+r[n+1],16))}else for(var n=0;n<r.length;n++){var i=r.charCodeAt(n),s=i>>8,a=i&255;s?t.push(s,a):t.push(a)}return t}vu.toArray=nS;function O3(r){return r.length===1?"0"+r:r}vu.zero2=O3;function R3(r){for(var e="",t=0;t<r.length;t++)e+=O3(r[t].toString(16));return e}vu.toHex=R3;vu.encode=function(e,t){return t==="hex"?R3(e):e}});var Or=de(P3=>{"use strict";var En=P3,iS=$n(),oS=Oi(),gu=ed();En.assert=oS;En.toArray=gu.toArray;En.zero2=gu.zero2;En.toHex=gu.toHex;En.encode=gu.encode;function sS(r,e,t){var n=new Array(Math.max(r.bitLength(),t)+1);n.fill(0);for(var i=1<<e+1,s=r.clone(),a=0;a<n.length;a++){var u,v=s.andln(i-1);s.isOdd()?(v>(i>>1)-1?u=(i>>1)-v:u=v,s.isubn(u)):u=0,n[a]=u,s.iushrn(1)}return n}En.getNAF=sS;function aS(r,e){var t=[[],[]];r=r.clone(),e=e.clone();for(var n=0,i=0,s;r.cmpn(-n)>0||e.cmpn(-i)>0;){var a=r.andln(3)+n&3,u=e.andln(3)+i&3;a===3&&(a=-1),u===3&&(u=-1);var v;a&1?(s=r.andln(7)+n&7,(s===3||s===5)&&u===2?v=-a:v=a):v=0,t[0].push(v);var w;u&1?(s=e.andln(7)+i&7,(s===3||s===5)&&a===2?w=-u:w=u):w=0,t[1].push(w),2*n===v+1&&(n=1-n),2*i===w+1&&(i=1-i),r.iushrn(1),e.iushrn(1)}return t}En.getJSF=aS;function fS(r,e,t){var n="_"+e;r.prototype[e]=function(){return this[n]!==void 0?this[n]:this[n]=t.call(this)}}En.cachedProperty=fS;function cS(r){return typeof r=="string"?En.toArray(r,"hex"):r}En.parseBytes=cS;function uS(r){return new iS(r,"hex","le")}En.intFromLE=uS});var id=de((E$,nd)=>{var td;nd.exports=function(e){return td||(td=new $i(null)),td.generate(e)};function $i(r){this.rand=r}nd.exports.Rand=$i;$i.prototype.generate=function(e){return this._rand(e)};$i.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),n=0;n<t.length;n++)t[n]=this.rand.getByte();return t};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?$i.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?$i.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:typeof window=="object"&&($i.prototype._rand=function(){throw new Error("Not implemented yet")});else try{if(rd=Il(),typeof rd.randomBytes!="function")throw new Error("Not supported");$i.prototype._rand=function(e){return rd.randomBytes(e)}}catch{}var rd});var Xa=de((_$,B3)=>{"use strict";var Bo=$n(),Ya=Or(),yu=Ya.getNAF,hS=Ya.getJSF,xu=Ya.assert;function Fi(r,e){this.type=r,this.p=new Bo(e.p,16),this.red=e.prime?Bo.red(e.prime):Bo.mont(this.p),this.zero=new Bo(0).toRed(this.red),this.one=new Bo(1).toRed(this.red),this.two=new Bo(2).toRed(this.red),this.n=e.n&&new Bo(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}B3.exports=Fi;Fi.prototype.point=function(){throw new Error("Not implemented")};Fi.prototype.validate=function(){throw new Error("Not implemented")};Fi.prototype._fixedNafMul=function(e,t){xu(e.precomputed);var n=e._getDoubles(),i=yu(t,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var a=[],u,v;for(u=0;u<i.length;u+=n.step){v=0;for(var w=u+n.step-1;w>=u;w--)v=(v<<1)+i[w];a.push(v)}for(var E=this.jpoint(null,null,null),M=this.jpoint(null,null,null),k=s;k>0;k--){for(u=0;u<a.length;u++)v=a[u],v===k?M=M.mixedAdd(n.points[u]):v===-k&&(M=M.mixedAdd(n.points[u].neg()));E=E.add(M)}return E.toP()};Fi.prototype._wnafMul=function(e,t){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,a=yu(t,n,this._bitLength),u=this.jpoint(null,null,null),v=a.length-1;v>=0;v--){for(var w=0;v>=0&&a[v]===0;v--)w++;if(v>=0&&w++,u=u.dblp(w),v<0)break;var E=a[v];xu(E!==0),e.type==="affine"?E>0?u=u.mixedAdd(s[E-1>>1]):u=u.mixedAdd(s[-E-1>>1].neg()):E>0?u=u.add(s[E-1>>1]):u=u.add(s[-E-1>>1].neg())}return e.type==="affine"?u.toP():u};Fi.prototype._wnafMulAdd=function(e,t,n,i,s){var a=this._wnafT1,u=this._wnafT2,v=this._wnafT3,w=0,E,M,k;for(E=0;E<i;E++){k=t[E];var D=k._getNAFPoints(e);a[E]=D.wnd,u[E]=D.points}for(E=i-1;E>=1;E-=2){var T=E-1,C=E;if(a[T]!==1||a[C]!==1){v[T]=yu(n[T],a[T],this._bitLength),v[C]=yu(n[C],a[C],this._bitLength),w=Math.max(v[T].length,w),w=Math.max(v[C].length,w);continue}var z=[t[T],null,null,t[C]];t[T].y.cmp(t[C].y)===0?(z[1]=t[T].add(t[C]),z[2]=t[T].toJ().mixedAdd(t[C].neg())):t[T].y.cmp(t[C].y.redNeg())===0?(z[1]=t[T].toJ().mixedAdd(t[C]),z[2]=t[T].add(t[C].neg())):(z[1]=t[T].toJ().mixedAdd(t[C]),z[2]=t[T].toJ().mixedAdd(t[C].neg()));var I=[-3,-1,-5,-7,0,7,5,1,3],q=hS(n[T],n[C]);for(w=Math.max(q[0].length,w),v[T]=new Array(w),v[C]=new Array(w),M=0;M<w;M++){var Y=q[0][M]|0,H=q[1][M]|0;v[T][M]=I[(Y+1)*3+(H+1)],v[C][M]=0,u[T]=z}}var X=this.jpoint(null,null,null),B=this._wnafT4;for(E=w;E>=0;E--){for(var P=0;E>=0;){var L=!0;for(M=0;M<i;M++)B[M]=v[M][E]|0,B[M]!==0&&(L=!1);if(!L)break;P++,E--}if(E>=0&&P++,X=X.dblp(P),E<0)break;for(M=0;M<i;M++){var te=B[M];te!==0&&(te>0?k=u[M][te-1>>1]:te<0&&(k=u[M][-te-1>>1].neg()),k.type==="affine"?X=X.mixedAdd(k):X=X.add(k))}}for(E=0;E<i;E++)u[E]=null;return s?X:X.toP()};function jr(r,e){this.curve=r,this.type=e,this.precomputed=null}Fi.BasePoint=jr;jr.prototype.eq=function(){throw new Error("Not implemented")};jr.prototype.validate=function(){return this.curve.validate(this)};Fi.prototype.decodePoint=function(e,t){e=Ya.toArray(e,t);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?xu(e[e.length-1]%2===0):e[0]===7&&xu(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};jr.prototype.encodeCompressed=function(e){return this.encode(e,!0)};jr.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))};jr.prototype.encode=function(e,t){return Ya.encode(this._encode(t),e)};jr.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};jr.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};jr.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<t;s+=e){for(var a=0;a<e;a++)i=i.dbl();n.push(i)}return{step:e,points:n}};jr.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)t[s]=t[s-1].add(i);return{wnd:e,points:t}};jr.prototype._getBeta=function(){return null};jr.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t}});var U3=de((M$,L3)=>{"use strict";var lS=Or(),gt=$n(),od=$a(),Ks=Xa(),dS=lS.assert;function Gr(r){Ks.call(this,"short",r),this.a=new gt(r.a,16).toRed(this.red),this.b=new gt(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}od(Gr,Ks);L3.exports=Gr;Gr.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,n;if(e.beta)t=new gt(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(e.lambda)n=new gt(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))===0?n=s[0]:(n=s[1],dS(this.g.mul(n).x.cmp(this.g.x.redMul(t))===0))}var a;return e.basis?a=e.basis.map(function(u){return{a:new gt(u.a,16),b:new gt(u.b,16)}}):a=this._getEndoBasis(n),{beta:t,lambda:n,basis:a}}};Gr.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:gt.mont(e),n=new gt(2).toRed(t).redInvm(),i=n.redNeg(),s=new gt(3).toRed(t).redNeg().redSqrt().redMul(n),a=i.redAdd(s).fromRed(),u=i.redSub(s).fromRed();return[a,u]};Gr.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new gt(1),a=new gt(0),u=new gt(0),v=new gt(1),w,E,M,k,D,T,C,z=0,I,q;n.cmpn(0)!==0;){var Y=i.div(n);I=i.sub(Y.mul(n)),q=u.sub(Y.mul(s));var H=v.sub(Y.mul(a));if(!M&&I.cmp(t)<0)w=C.neg(),E=s,M=I.neg(),k=q;else if(M&&++z===2)break;C=I,i=n,n=I,u=s,s=q,v=a,a=H}D=I.neg(),T=q;var X=M.sqr().add(k.sqr()),B=D.sqr().add(T.sqr());return B.cmp(X)>=0&&(D=w,T=E),M.negative&&(M=M.neg(),k=k.neg()),D.negative&&(D=D.neg(),T=T.neg()),[{a:M,b:k},{a:D,b:T}]};Gr.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],i=t[1],s=i.b.mul(e).divRound(this.n),a=n.b.neg().mul(e).divRound(this.n),u=s.mul(n.a),v=a.mul(i.a),w=s.mul(n.b),E=a.mul(i.b),M=e.sub(u).sub(v),k=w.add(E).neg();return{k1:M,k2:k}};Gr.prototype.pointFromX=function(e,t){e=new gt(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(t&&!s||!t&&s)&&(i=i.redNeg()),this.point(e,i)};Gr.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,i=this.a.redMul(t),s=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};Gr.prototype._endoWnafMulAdd=function(e,t,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,a=0;a<e.length;a++){var u=this._endoSplit(t[a]),v=e[a],w=v._getBeta();u.k1.negative&&(u.k1.ineg(),v=v.neg(!0)),u.k2.negative&&(u.k2.ineg(),w=w.neg(!0)),i[a*2]=v,i[a*2+1]=w,s[a*2]=u.k1,s[a*2+1]=u.k2}for(var E=this._wnafMulAdd(1,i,s,a*2,n),M=0;M<a*2;M++)i[M]=null,s[M]=null;return E};function Ct(r,e,t,n){Ks.BasePoint.call(this,r,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new gt(e,16),this.y=new gt(t,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}od(Ct,Ks.BasePoint);Gr.prototype.point=function(e,t,n){return new Ct(this,e,t,n)};Gr.prototype.pointFromJSON=function(e,t){return Ct.fromJSON(this,e,t)};Ct.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}};Ct.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Ct.fromJSON=function(e,t,n){typeof t=="string"&&(t=JSON.parse(t));var i=e.point(t[0],t[1],n);if(!t[2])return i;function s(u){return e.point(u[0],u[1],n)}var a=t[2];return i.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[i].concat(a.doubles.points.map(s))},naf:a.naf&&{wnd:a.naf.wnd,points:[i].concat(a.naf.points.map(s))}},i};Ct.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Ct.prototype.isInfinity=function(){return this.inf};Ct.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};Ct.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(i),a=s.redSqr().redISub(this.x.redAdd(this.x)),u=s.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,u)};Ct.prototype.getX=function(){return this.x.fromRed()};Ct.prototype.getY=function(){return this.y.fromRed()};Ct.prototype.mul=function(e){return e=new gt(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Ct.prototype.mulAdd=function(e,t,n){var i=[this,t],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};Ct.prototype.jmulAdd=function(e,t,n){var i=[this,t],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};Ct.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Ct.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return t};Ct.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function $t(r,e,t,n){Ks.BasePoint.call(this,r,"jacobian"),e===null&&t===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new gt(0)):(this.x=new gt(e,16),this.y=new gt(t,16),this.z=new gt(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}od($t,Ks.BasePoint);Gr.prototype.jpoint=function(e,t,n){return new $t(this,e,t,n)};$t.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(n,i)};$t.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};$t.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(t),s=e.x.redMul(n),a=this.y.redMul(t.redMul(e.z)),u=e.y.redMul(n.redMul(this.z)),v=i.redSub(s),w=a.redSub(u);if(v.cmpn(0)===0)return w.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var E=v.redSqr(),M=E.redMul(v),k=i.redMul(E),D=w.redSqr().redIAdd(M).redISub(k).redISub(k),T=w.redMul(k.redISub(D)).redISub(a.redMul(M)),C=this.z.redMul(e.z).redMul(v);return this.curve.jpoint(D,T,C)};$t.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,i=e.x.redMul(t),s=this.y,a=e.y.redMul(t).redMul(this.z),u=n.redSub(i),v=s.redSub(a);if(u.cmpn(0)===0)return v.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var w=u.redSqr(),E=w.redMul(u),M=n.redMul(w),k=v.redSqr().redIAdd(E).redISub(M).redISub(M),D=v.redMul(M.redISub(k)).redISub(s.redMul(E)),T=this.z.redMul(u);return this.curve.jpoint(k,D,T)};$t.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var n=this;for(t=0;t<e;t++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,a=this.x,u=this.y,v=this.z,w=v.redSqr().redSqr(),E=u.redAdd(u);for(t=0;t<e;t++){var M=a.redSqr(),k=E.redSqr(),D=k.redSqr(),T=M.redAdd(M).redIAdd(M).redIAdd(i.redMul(w)),C=a.redMul(k),z=T.redSqr().redISub(C.redAdd(C)),I=C.redISub(z),q=T.redMul(I);q=q.redIAdd(q).redISub(D);var Y=E.redMul(v);t+1<e&&(w=w.redMul(D)),a=z,v=Y,E=q}return this.curve.jpoint(a,E.redMul(s),v)};$t.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};$t.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),u=this.x.redAdd(s).redSqr().redISub(i).redISub(a);u=u.redIAdd(u);var v=i.redAdd(i).redIAdd(i),w=v.redSqr().redISub(u).redISub(u),E=a.redIAdd(a);E=E.redIAdd(E),E=E.redIAdd(E),e=w,t=v.redMul(u.redISub(w)).redISub(E),n=this.y.redAdd(this.y)}else{var M=this.x.redSqr(),k=this.y.redSqr(),D=k.redSqr(),T=this.x.redAdd(k).redSqr().redISub(M).redISub(D);T=T.redIAdd(T);var C=M.redAdd(M).redIAdd(M),z=C.redSqr(),I=D.redIAdd(D);I=I.redIAdd(I),I=I.redIAdd(I),e=z.redISub(T).redISub(T),t=C.redMul(T.redISub(e)).redISub(I),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,t,n)};$t.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),u=this.x.redAdd(s).redSqr().redISub(i).redISub(a);u=u.redIAdd(u);var v=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),w=v.redSqr().redISub(u).redISub(u);e=w;var E=a.redIAdd(a);E=E.redIAdd(E),E=E.redIAdd(E),t=v.redMul(u.redISub(w)).redISub(E),n=this.y.redAdd(this.y)}else{var M=this.z.redSqr(),k=this.y.redSqr(),D=this.x.redMul(k),T=this.x.redSub(M).redMul(this.x.redAdd(M));T=T.redAdd(T).redIAdd(T);var C=D.redIAdd(D);C=C.redIAdd(C);var z=C.redAdd(C);e=T.redSqr().redISub(z),n=this.y.redAdd(this.z).redSqr().redISub(k).redISub(M);var I=k.redSqr();I=I.redIAdd(I),I=I.redIAdd(I),I=I.redIAdd(I),t=T.redMul(C.redISub(e)).redISub(I)}return this.curve.jpoint(e,t,n)};$t.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),a=t.redSqr(),u=n.redSqr(),v=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(s)),w=t.redAdd(t);w=w.redIAdd(w);var E=w.redMul(u),M=v.redSqr().redISub(E.redAdd(E)),k=E.redISub(M),D=u.redSqr();D=D.redIAdd(D),D=D.redIAdd(D),D=D.redIAdd(D);var T=v.redMul(k).redISub(D),C=n.redAdd(n).redMul(i);return this.curve.jpoint(M,T,C)};$t.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),i=t.redSqr(),s=e.redAdd(e).redIAdd(e),a=s.redSqr(),u=this.x.redAdd(t).redSqr().redISub(e).redISub(i);u=u.redIAdd(u),u=u.redAdd(u).redIAdd(u),u=u.redISub(a);var v=u.redSqr(),w=i.redIAdd(i);w=w.redIAdd(w),w=w.redIAdd(w),w=w.redIAdd(w);var E=s.redIAdd(u).redSqr().redISub(a).redISub(v).redISub(w),M=t.redMul(E);M=M.redIAdd(M),M=M.redIAdd(M);var k=this.x.redMul(v).redISub(M);k=k.redIAdd(k),k=k.redIAdd(k);var D=this.y.redMul(E.redMul(w.redISub(E)).redISub(u.redMul(v)));D=D.redIAdd(D),D=D.redIAdd(D),D=D.redIAdd(D);var T=this.z.redAdd(u).redSqr().redISub(n).redISub(v);return this.curve.jpoint(k,D,T)};$t.prototype.mul=function(e,t){return e=new gt(e,t),this.curve._wnafMul(this,e)};$t.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var i=t.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};$t.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};$t.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};$t.prototype.isInfinity=function(){return this.z.cmpn(0)===0}});var q3=de((S$,F3)=>{"use strict";var js=$n(),$3=$a(),wu=Xa(),pS=Or();function Gs(r){wu.call(this,"mont",r),this.a=new js(r.a,16).toRed(this.red),this.b=new js(r.b,16).toRed(this.red),this.i4=new js(4).toRed(this.red).redInvm(),this.two=new js(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}$3(Gs,wu);F3.exports=Gs;Gs.prototype.validate=function(e){var t=e.normalize().x,n=t.redSqr(),i=n.redMul(t).redAdd(n.redMul(this.a)).redAdd(t),s=i.redSqrt();return s.redSqr().cmp(i)===0};function Dt(r,e,t){wu.BasePoint.call(this,r,"projective"),e===null&&t===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new js(e,16),this.z=new js(t,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}$3(Dt,wu.BasePoint);Gs.prototype.decodePoint=function(e,t){return this.point(pS.toArray(e,t),1)};Gs.prototype.point=function(e,t){return new Dt(this,e,t)};Gs.prototype.pointFromJSON=function(e){return Dt.fromJSON(this,e)};Dt.prototype.precompute=function(){};Dt.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Dt.fromJSON=function(e,t){return new Dt(e,t[0],t[1]||e.one)};Dt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Dt.prototype.isInfinity=function(){return this.z.cmpn(0)===0};Dt.prototype.dbl=function(){var e=this.x.redAdd(this.z),t=e.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),s=t.redSub(i),a=t.redMul(i),u=s.redMul(i.redAdd(this.curve.a24.redMul(s)));return this.curve.point(a,u)};Dt.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};Dt.prototype.diffAdd=function(e,t){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),s=e.x.redAdd(e.z),a=e.x.redSub(e.z),u=a.redMul(n),v=s.redMul(i),w=t.z.redMul(u.redAdd(v).redSqr()),E=t.x.redMul(u.redISub(v).redSqr());return this.curve.point(w,E)};Dt.prototype.mul=function(e){for(var t=e.clone(),n=this,i=this.curve.point(null,null),s=this,a=[];t.cmpn(0)!==0;t.iushrn(1))a.push(t.andln(1));for(var u=a.length-1;u>=0;u--)a[u]===0?(n=n.diffAdd(i,s),i=i.dbl()):(i=n.diffAdd(i,s),n=n.dbl());return i};Dt.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};Dt.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};Dt.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};Dt.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Dt.prototype.getX=function(){return this.normalize(),this.x.fromRed()}});var K3=de((A$,z3)=>{"use strict";var mS=Or(),ci=$n(),H3=$a(),Eu=Xa(),bS=mS.assert;function Fn(r){this.twisted=(r.a|0)!==1,this.mOneA=this.twisted&&(r.a|0)===-1,this.extended=this.mOneA,Eu.call(this,"edwards",r),this.a=new ci(r.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new ci(r.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new ci(r.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),bS(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(r.c|0)===1}H3(Fn,Eu);z3.exports=Fn;Fn.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};Fn.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};Fn.prototype.jpoint=function(e,t,n,i){return this.point(e,t,n,i)};Fn.prototype.pointFromX=function(e,t){e=new ci(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),s=this.one.redSub(this.c2.redMul(this.d).redMul(n)),a=i.redMul(s.redInvm()),u=a.redSqrt();if(u.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");var v=u.fromRed().isOdd();return(t&&!v||!t&&v)&&(u=u.redNeg()),this.point(e,u)};Fn.prototype.pointFromY=function(e,t){e=new ci(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),s=n.redMul(this.d).redMul(this.c2).redSub(this.a),a=i.redMul(s.redInvm());if(a.cmp(this.zero)===0){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var u=a.redSqrt();if(u.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");return u.fromRed().isOdd()!==t&&(u=u.redNeg()),this.point(u,e)};Fn.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),n=e.y.redSqr(),i=t.redMul(this.a).redAdd(n),s=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(n)));return i.cmp(s)===0};function ut(r,e,t,n,i){Eu.BasePoint.call(this,r,"projective"),e===null&&t===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new ci(e,16),this.y=new ci(t,16),this.z=n?new ci(n,16):this.curve.one,this.t=i&&new ci(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}H3(ut,Eu.BasePoint);Fn.prototype.pointFromJSON=function(e){return ut.fromJSON(this,e)};Fn.prototype.point=function(e,t,n,i){return new ut(this,e,t,n,i)};ut.fromJSON=function(e,t){return new ut(e,t[0],t[1],t[2])};ut.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};ut.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};ut.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),a=i.redAdd(t),u=a.redSub(n),v=i.redSub(t),w=s.redMul(u),E=a.redMul(v),M=s.redMul(v),k=u.redMul(a);return this.curve.point(w,E,k,M)};ut.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),t=this.x.redSqr(),n=this.y.redSqr(),i,s,a,u,v,w;if(this.curve.twisted){u=this.curve._mulA(t);var E=u.redAdd(n);this.zOne?(i=e.redSub(t).redSub(n).redMul(E.redSub(this.curve.two)),s=E.redMul(u.redSub(n)),a=E.redSqr().redSub(E).redSub(E)):(v=this.z.redSqr(),w=E.redSub(v).redISub(v),i=e.redSub(t).redISub(n).redMul(w),s=E.redMul(u.redSub(n)),a=E.redMul(w))}else u=t.redAdd(n),v=this.curve._mulC(this.z).redSqr(),w=u.redSub(v).redSub(v),i=this.curve._mulC(e.redISub(u)).redMul(w),s=this.curve._mulC(u).redMul(t.redISub(n)),a=u.redMul(w);return this.curve.point(i,s,a)};ut.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};ut.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),s=this.z.redMul(e.z.redAdd(e.z)),a=n.redSub(t),u=s.redSub(i),v=s.redAdd(i),w=n.redAdd(t),E=a.redMul(u),M=v.redMul(w),k=a.redMul(w),D=u.redMul(v);return this.curve.point(E,M,D,k)};ut.prototype._projAdd=function(e){var t=this.z.redMul(e.z),n=t.redSqr(),i=this.x.redMul(e.x),s=this.y.redMul(e.y),a=this.curve.d.redMul(i).redMul(s),u=n.redSub(a),v=n.redAdd(a),w=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(s),E=t.redMul(u).redMul(w),M,k;return this.curve.twisted?(M=t.redMul(v).redMul(s.redSub(this.curve._mulA(i))),k=u.redMul(v)):(M=t.redMul(v).redMul(s.redSub(i)),k=this.curve._mulC(u).redMul(v)),this.curve.point(E,M,k)};ut.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};ut.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};ut.prototype.mulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!1)};ut.prototype.jmulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!0)};ut.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};ut.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};ut.prototype.getX=function(){return this.normalize(),this.x.fromRed()};ut.prototype.getY=function(){return this.normalize(),this.y.fromRed()};ut.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};ut.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(t)===0)return!0;for(var n=e.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(i),this.x.cmp(t)===0)return!0}};ut.prototype.toP=ut.prototype.normalize;ut.prototype.mixedAdd=ut.prototype.add});var sd=de(j3=>{"use strict";var _u=j3;_u.base=Xa();_u.short=U3();_u.mont=q3();_u.edwards=K3()});var J3=de((k$,G3)=>{G3.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}});var Mu=de(Y3=>{"use strict";var fd=Y3,qi=Ha(),ad=sd(),vS=Or(),V3=vS.assert;function W3(r){r.type==="short"?this.curve=new ad.short(r):r.type==="edwards"?this.curve=new ad.edwards(r):this.curve=new ad.mont(r),this.g=this.curve.g,this.n=this.curve.n,this.hash=r.hash,V3(this.g.validate(),"Invalid curve"),V3(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}fd.PresetCurve=W3;function Hi(r,e){Object.defineProperty(fd,r,{configurable:!0,enumerable:!0,get:function(){var t=new W3(e);return Object.defineProperty(fd,r,{configurable:!0,enumerable:!0,value:t}),t}})}Hi("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:qi.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});Hi("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:qi.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});Hi("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:qi.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});Hi("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:qi.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});Hi("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:qi.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});Hi("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:qi.sha256,gRed:!1,g:["9"]});Hi("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:qi.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var cd;try{cd=J3()}catch{cd=void 0}Hi("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:qi.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",cd]})});var Q3=de((D$,Z3)=>{"use strict";var gS=Ha(),Lo=ed(),X3=Oi();function zi(r){if(!(this instanceof zi))return new zi(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Lo.toArray(r.entropy,r.entropyEnc||"hex"),t=Lo.toArray(r.nonce,r.nonceEnc||"hex"),n=Lo.toArray(r.pers,r.persEnc||"hex");X3(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,n)}Z3.exports=zi;zi.prototype._init=function(e,t,n){var i=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};zi.prototype._hmac=function(){return new gS.hmac(this.hash,this.K)};zi.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};zi.prototype.reseed=function(e,t,n,i){typeof t!="string"&&(i=n,n=t,t=null),e=Lo.toArray(e,t),n=Lo.toArray(n,i),X3(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};zi.prototype.generate=function(e,t,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(i=n,n=t,t=null),n&&(n=Lo.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var a=s.slice(0,e);return this._update(n),this._reseed++,Lo.encode(a,t)}});var ty=de((I$,ey)=>{"use strict";var yS=$n(),xS=Or(),ud=xS.assert;function Qt(r,e){this.ec=r,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}ey.exports=Qt;Qt.fromPublic=function(e,t,n){return t instanceof Qt?t:new Qt(e,{pub:t,pubEnc:n})};Qt.fromPrivate=function(e,t,n){return t instanceof Qt?t:new Qt(e,{priv:t,privEnc:n})};Qt.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Qt.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};Qt.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Qt.prototype._importPrivate=function(e,t){this.priv=new yS(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};Qt.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?ud(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&ud(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};Qt.prototype.derive=function(e){return e.validate()||ud(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Qt.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)};Qt.prototype.verify=function(e,t){return this.ec.verify(e,t,this)};Qt.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}});var iy=de((O$,ny)=>{"use strict";var Su=$n(),dd=Or(),wS=dd.assert;function Au(r,e){if(r instanceof Au)return r;this._importDER(r,e)||(wS(r.r&&r.s,"Signature without r or s"),this.r=new Su(r.r,16),this.s=new Su(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}ny.exports=Au;function ES(){this.place=0}function hd(r,e){var t=r[e.place++];if(!(t&128))return t;var n=t&15;if(n===0||n>4)return!1;for(var i=0,s=0,a=e.place;s<n;s++,a++)i<<=8,i|=r[a],i>>>=0;return i<=127?!1:(e.place=a,i)}function ry(r){for(var e=0,t=r.length-1;!r[e]&&!(r[e+1]&128)&&e<t;)e++;return e===0?r:r.slice(e)}Au.prototype._importDER=function(e,t){e=dd.toArray(e,t);var n=new ES;if(e[n.place++]!==48)return!1;var i=hd(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=hd(e,n);if(s===!1)return!1;var a=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var u=hd(e,n);if(u===!1||e.length!==u+n.place)return!1;var v=e.slice(n.place,u+n.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(v[0]===0)if(v[1]&128)v=v.slice(1);else return!1;return this.r=new Su(a),this.s=new Su(v),this.recoveryParam=null,!0};function ld(r,e){if(e<128){r.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(t|128);--t;)r.push(e>>>(t<<3)&255);r.push(e)}Au.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),n[0]&128&&(n=[0].concat(n)),t=ry(t),n=ry(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];ld(i,t.length),i=i.concat(t),i.push(2),ld(i,n.length);var s=i.concat(n),a=[48];return ld(a,s.length),a=a.concat(s),dd.encode(a,e)}});var fy=de((R$,ay)=>{"use strict";var Uo=$n(),oy=Q3(),_S=Or(),pd=Mu(),MS=id(),sy=_S.assert,md=ty(),Tu=iy();function Jr(r){if(!(this instanceof Jr))return new Jr(r);typeof r=="string"&&(sy(Object.prototype.hasOwnProperty.call(pd,r),"Unknown curve "+r),r=pd[r]),r instanceof pd.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}ay.exports=Jr;Jr.prototype.keyPair=function(e){return new md(this,e)};Jr.prototype.keyFromPrivate=function(e,t){return md.fromPrivate(this,e,t)};Jr.prototype.keyFromPublic=function(e,t){return md.fromPublic(this,e,t)};Jr.prototype.genKeyPair=function(e){e||(e={});for(var t=new oy({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||MS(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new Uo(2));;){var s=new Uo(t.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};Jr.prototype._truncateToN=function(e,t){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};Jr.prototype.sign=function(e,t,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),t=this.keyFromPrivate(t,n),e=this._truncateToN(new Uo(e,16));for(var s=this.n.byteLength(),a=t.getPrivate().toArray("be",s),u=e.toArray("be",s),v=new oy({hash:this.hash,entropy:a,nonce:u,pers:i.pers,persEnc:i.persEnc||"utf8"}),w=this.n.sub(new Uo(1)),E=0;;E++){var M=i.k?i.k(E):new Uo(v.generate(this.n.byteLength()));if(M=this._truncateToN(M,!0),!(M.cmpn(1)<=0||M.cmp(w)>=0)){var k=this.g.mul(M);if(!k.isInfinity()){var D=k.getX(),T=D.umod(this.n);if(T.cmpn(0)!==0){var C=M.invm(this.n).mul(T.mul(t.getPrivate()).iadd(e));if(C=C.umod(this.n),C.cmpn(0)!==0){var z=(k.getY().isOdd()?1:0)|(D.cmp(T)!==0?2:0);return i.canonical&&C.cmp(this.nh)>0&&(C=this.n.sub(C),z^=1),new Tu({r:T,s:C,recoveryParam:z})}}}}}};Jr.prototype.verify=function(e,t,n,i){e=this._truncateToN(new Uo(e,16)),n=this.keyFromPublic(n,i),t=new Tu(t,"hex");var s=t.r,a=t.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var u=a.invm(this.n),v=u.mul(e).umod(this.n),w=u.mul(s).umod(this.n),E;return this.curve._maxwellTrick?(E=this.g.jmulAdd(v,n.getPublic(),w),E.isInfinity()?!1:E.eqXToP(s)):(E=this.g.mulAdd(v,n.getPublic(),w),E.isInfinity()?!1:E.getX().umod(this.n).cmp(s)===0)};Jr.prototype.recoverPubKey=function(r,e,t,n){sy((3&t)===t,"The recovery param is more than two bits"),e=new Tu(e,n);var i=this.n,s=new Uo(r),a=e.r,u=e.s,v=t&1,w=t>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&w)throw new Error("Unable to find sencond key candinate");w?a=this.curve.pointFromX(a.add(this.curve.n),v):a=this.curve.pointFromX(a,v);var E=e.r.invm(i),M=i.sub(s).mul(E).umod(i),k=u.mul(E).umod(i);return this.g.mulAdd(M,a,k)};Jr.prototype.getKeyRecoveryParam=function(r,e,t,n){if(e=new Tu(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(r,e,i)}catch{continue}if(s.eq(t))return i}throw new Error("Unable to find valid recovery factor")}});var ly=de((N$,hy)=>{"use strict";var Za=Or(),uy=Za.assert,cy=Za.parseBytes,Js=Za.cachedProperty;function It(r,e){this.eddsa=r,this._secret=cy(e.secret),r.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=cy(e.pub)}It.fromPublic=function(e,t){return t instanceof It?t:new It(e,{pub:t})};It.fromSecret=function(e,t){return t instanceof It?t:new It(e,{secret:t})};It.prototype.secret=function(){return this._secret};Js(It,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});Js(It,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});Js(It,"privBytes",function(){var e=this.eddsa,t=this.hash(),n=e.encodingLength-1,i=t.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i});Js(It,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});Js(It,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});Js(It,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});It.prototype.sign=function(e){return uy(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};It.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)};It.prototype.getSecret=function(e){return uy(this._secret,"KeyPair is public only"),Za.encode(this.secret(),e)};It.prototype.getPublic=function(e){return Za.encode(this.pubBytes(),e)};hy.exports=It});var py=de((P$,dy)=>{"use strict";var SS=$n(),ku=Or(),AS=ku.assert,Cu=ku.cachedProperty,TS=ku.parseBytes;function $o(r,e){this.eddsa=r,typeof e!="object"&&(e=TS(e)),Array.isArray(e)&&(e={R:e.slice(0,r.encodingLength),S:e.slice(r.encodingLength)}),AS(e.R&&e.S,"Signature without R or S"),r.isPoint(e.R)&&(this._R=e.R),e.S instanceof SS&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}Cu($o,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});Cu($o,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});Cu($o,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});Cu($o,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});$o.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};$o.prototype.toHex=function(){return ku.encode(this.toBytes(),"hex").toUpperCase()};dy.exports=$o});var yy=de((B$,gy)=>{"use strict";var kS=Ha(),CS=Mu(),Vs=Or(),DS=Vs.assert,by=Vs.parseBytes,vy=ly(),my=py();function ur(r){if(DS(r==="ed25519","only tested with ed25519 so far"),!(this instanceof ur))return new ur(r);r=CS[r].curve,this.curve=r,this.g=r.g,this.g.precompute(r.n.bitLength()+1),this.pointClass=r.point().constructor,this.encodingLength=Math.ceil(r.n.bitLength()/8),this.hash=kS.sha512}gy.exports=ur;ur.prototype.sign=function(e,t){e=by(e);var n=this.keyFromSecret(t),i=this.hashInt(n.messagePrefix(),e),s=this.g.mul(i),a=this.encodePoint(s),u=this.hashInt(a,n.pubBytes(),e).mul(n.priv()),v=i.add(u).umod(this.curve.n);return this.makeSignature({R:s,S:v,Rencoded:a})};ur.prototype.verify=function(e,t,n){e=by(e),t=this.makeSignature(t);var i=this.keyFromPublic(n),s=this.hashInt(t.Rencoded(),i.pubBytes(),e),a=this.g.mul(t.S()),u=t.R().add(i.pub().mul(s));return u.eq(a)};ur.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return Vs.intFromLE(e.digest()).umod(this.curve.n)};ur.prototype.keyFromPublic=function(e){return vy.fromPublic(this,e)};ur.prototype.keyFromSecret=function(e){return vy.fromSecret(this,e)};ur.prototype.makeSignature=function(e){return e instanceof my?e:new my(this,e)};ur.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t};ur.prototype.decodePoint=function(e){e=Vs.parseBytes(e);var t=e.length-1,n=e.slice(0,t).concat(e[t]&-129),i=(e[t]&128)!==0,s=Vs.intFromLE(n);return this.curve.pointFromY(s,i)};ur.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};ur.prototype.decodeInt=function(e){return Vs.intFromLE(e)};ur.prototype.isPoint=function(e){return e instanceof this.pointClass}});var wy=de(xy=>{"use strict";var Fo=xy;Fo.version=D3().version;Fo.utils=Or();Fo.rand=id();Fo.curve=sd();Fo.curves=Mu();Fo.ec=fy();Fo.eddsa=yy()});var _y=de((U$,Ey)=>{"use strict";Ey.exports=function r(e){return e===null||typeof e!="object"||e.toJSON!=null?JSON.stringify(e):Array.isArray(e)?"["+e.reduce((t,n,i)=>{let s=i===0?"":",",a=n===void 0||typeof n=="symbol"?null:n;return t+s+r(a)},"")+"]":"{"+Object.keys(e).sort().reduce((t,n,i)=>{if(e[n]===void 0||typeof e[n]=="symbol")return t;let s=t.length===0?"":",";return t+s+r(n)+":"+r(e[n])},"")+"}"}});var Ty=de(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});Ys.bech32m=Ys.bech32=void 0;var Du="qpzry9x8gf2tvdw0s3jn54khce6mua7l",Sy={};for(let r=0;r<Du.length;r++){let e=Du.charAt(r);Sy[e]=r}function Ws(r){let e=r>>25;return(r&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function My(r){let e=1;for(let t=0;t<r.length;++t){let n=r.charCodeAt(t);if(n<33||n>126)return"Invalid prefix ("+r+")";e=Ws(e)^n>>5}e=Ws(e);for(let t=0;t<r.length;++t){let n=r.charCodeAt(t);e=Ws(e)^n&31}return e}function bd(r,e,t,n){let i=0,s=0,a=(1<<t)-1,u=[];for(let v=0;v<r.length;++v)for(i=i<<e|r[v],s+=e;s>=t;)s-=t,u.push(i>>s&a);if(n)s>0&&u.push(i<<t-s&a);else{if(s>=e)return"Excess padding";if(i<<t-s&a)return"Non-zero padding"}return u}function IS(r){return bd(r,8,5,!0)}function OS(r){let e=bd(r,5,8,!1);if(Array.isArray(e))return e}function RS(r){let e=bd(r,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}function Ay(r){let e;r==="bech32"?e=1:e=734539939;function t(a,u,v){if(v=v||90,a.length+7+u.length>v)throw new TypeError("Exceeds length limit");a=a.toLowerCase();let w=My(a);if(typeof w=="string")throw new Error(w);let E=a+"1";for(let M=0;M<u.length;++M){let k=u[M];if(k>>5)throw new Error("Non 5-bit word");w=Ws(w)^k,E+=Du.charAt(k)}for(let M=0;M<6;++M)w=Ws(w);w^=e;for(let M=0;M<6;++M){let k=w>>(5-M)*5&31;E+=Du.charAt(k)}return E}function n(a,u){if(u=u||90,a.length<8)return a+" too short";if(a.length>u)return"Exceeds length limit";let v=a.toLowerCase(),w=a.toUpperCase();if(a!==v&&a!==w)return"Mixed-case string "+a;a=v;let E=a.lastIndexOf("1");if(E===-1)return"No separator character for "+a;if(E===0)return"Missing prefix for "+a;let M=a.slice(0,E),k=a.slice(E+1);if(k.length<6)return"Data too short";let D=My(M);if(typeof D=="string")return D;let T=[];for(let C=0;C<k.length;++C){let z=k.charAt(C),I=Sy[z];if(I===void 0)return"Unknown character "+z;D=Ws(D)^I,!(C+6>=k.length)&&T.push(I)}return D!==e?"Invalid checksum for "+a:{prefix:M,words:T}}function i(a,u){let v=n(a,u);if(typeof v=="object")return v}function s(a,u){let v=n(a,u);if(typeof v=="object")return v;throw new Error(v)}return{decodeUnsafe:i,decode:s,encode:t,toWords:IS,fromWordsUnsafe:OS,fromWords:RS}}Ys.bech32=Ay("bech32");Ys.bech32m=Ay("bech32m")});var Iy=de(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.sharedKey=yt.generateKeyPair=yt.generateKeyPairFromSeed=yt.scalarMultBase=yt.scalarMult=yt.SHARED_KEY_LENGTH=yt.SECRET_KEY_LENGTH=yt.PUBLIC_KEY_LENGTH=void 0;var NS=Si(),PS=Fr();yt.PUBLIC_KEY_LENGTH=32;yt.SECRET_KEY_LENGTH=32;yt.SHARED_KEY_LENGTH=32;function qn(r){let e=new Float64Array(16);if(r)for(let t=0;t<r.length;t++)e[t]=r[t];return e}var ky=new Uint8Array(32);ky[0]=9;var BS=qn([56129,1]);function vd(r){let e=1;for(let t=0;t<16;t++){let n=r[t]+e+65535;e=Math.floor(n/65536),r[t]=n-e*65536}r[0]+=e-1+37*(e-1)}function Qa(r,e,t){let n=~(t-1);for(let i=0;i<16;i++){let s=n&(r[i]^e[i]);r[i]^=s,e[i]^=s}}function LS(r,e){let t=qn(),n=qn();for(let i=0;i<16;i++)n[i]=e[i];vd(n),vd(n),vd(n);for(let i=0;i<2;i++){t[0]=n[0]-65517;for(let a=1;a<15;a++)t[a]=n[a]-65535-(t[a-1]>>16&1),t[a-1]&=65535;t[15]=n[15]-32767-(t[14]>>16&1);let s=t[15]>>16&1;t[14]&=65535,Qa(n,t,1-s)}for(let i=0;i<16;i++)r[2*i]=n[i]&255,r[2*i+1]=n[i]>>8}function US(r,e){for(let t=0;t<16;t++)r[t]=e[2*t]+(e[2*t+1]<<8);r[15]&=32767}function Iu(r,e,t){for(let n=0;n<16;n++)r[n]=e[n]+t[n]}function Ou(r,e,t){for(let n=0;n<16;n++)r[n]=e[n]-t[n]}function ui(r,e,t){let n,i,s=0,a=0,u=0,v=0,w=0,E=0,M=0,k=0,D=0,T=0,C=0,z=0,I=0,q=0,Y=0,H=0,X=0,B=0,P=0,L=0,te=0,S=0,d=0,y=0,h=0,o=0,f=0,l=0,m=0,b=0,p=0,x=t[0],_=t[1],c=t[2],g=t[3],G=t[4],A=t[5],U=t[6],K=t[7],O=t[8],R=t[9],J=t[10],j=t[11],Q=t[12],he=t[13],ie=t[14],W=t[15];n=e[0],s+=n*x,a+=n*_,u+=n*c,v+=n*g,w+=n*G,E+=n*A,M+=n*U,k+=n*K,D+=n*O,T+=n*R,C+=n*J,z+=n*j,I+=n*Q,q+=n*he,Y+=n*ie,H+=n*W,n=e[1],a+=n*x,u+=n*_,v+=n*c,w+=n*g,E+=n*G,M+=n*A,k+=n*U,D+=n*K,T+=n*O,C+=n*R,z+=n*J,I+=n*j,q+=n*Q,Y+=n*he,H+=n*ie,X+=n*W,n=e[2],u+=n*x,v+=n*_,w+=n*c,E+=n*g,M+=n*G,k+=n*A,D+=n*U,T+=n*K,C+=n*O,z+=n*R,I+=n*J,q+=n*j,Y+=n*Q,H+=n*he,X+=n*ie,B+=n*W,n=e[3],v+=n*x,w+=n*_,E+=n*c,M+=n*g,k+=n*G,D+=n*A,T+=n*U,C+=n*K,z+=n*O,I+=n*R,q+=n*J,Y+=n*j,H+=n*Q,X+=n*he,B+=n*ie,P+=n*W,n=e[4],w+=n*x,E+=n*_,M+=n*c,k+=n*g,D+=n*G,T+=n*A,C+=n*U,z+=n*K,I+=n*O,q+=n*R,Y+=n*J,H+=n*j,X+=n*Q,B+=n*he,P+=n*ie,L+=n*W,n=e[5],E+=n*x,M+=n*_,k+=n*c,D+=n*g,T+=n*G,C+=n*A,z+=n*U,I+=n*K,q+=n*O,Y+=n*R,H+=n*J,X+=n*j,B+=n*Q,P+=n*he,L+=n*ie,te+=n*W,n=e[6],M+=n*x,k+=n*_,D+=n*c,T+=n*g,C+=n*G,z+=n*A,I+=n*U,q+=n*K,Y+=n*O,H+=n*R,X+=n*J,B+=n*j,P+=n*Q,L+=n*he,te+=n*ie,S+=n*W,n=e[7],k+=n*x,D+=n*_,T+=n*c,C+=n*g,z+=n*G,I+=n*A,q+=n*U,Y+=n*K,H+=n*O,X+=n*R,B+=n*J,P+=n*j,L+=n*Q,te+=n*he,S+=n*ie,d+=n*W,n=e[8],D+=n*x,T+=n*_,C+=n*c,z+=n*g,I+=n*G,q+=n*A,Y+=n*U,H+=n*K,X+=n*O,B+=n*R,P+=n*J,L+=n*j,te+=n*Q,S+=n*he,d+=n*ie,y+=n*W,n=e[9],T+=n*x,C+=n*_,z+=n*c,I+=n*g,q+=n*G,Y+=n*A,H+=n*U,X+=n*K,B+=n*O,P+=n*R,L+=n*J,te+=n*j,S+=n*Q,d+=n*he,y+=n*ie,h+=n*W,n=e[10],C+=n*x,z+=n*_,I+=n*c,q+=n*g,Y+=n*G,H+=n*A,X+=n*U,B+=n*K,P+=n*O,L+=n*R,te+=n*J,S+=n*j,d+=n*Q,y+=n*he,h+=n*ie,o+=n*W,n=e[11],z+=n*x,I+=n*_,q+=n*c,Y+=n*g,H+=n*G,X+=n*A,B+=n*U,P+=n*K,L+=n*O,te+=n*R,S+=n*J,d+=n*j,y+=n*Q,h+=n*he,o+=n*ie,f+=n*W,n=e[12],I+=n*x,q+=n*_,Y+=n*c,H+=n*g,X+=n*G,B+=n*A,P+=n*U,L+=n*K,te+=n*O,S+=n*R,d+=n*J,y+=n*j,h+=n*Q,o+=n*he,f+=n*ie,l+=n*W,n=e[13],q+=n*x,Y+=n*_,H+=n*c,X+=n*g,B+=n*G,P+=n*A,L+=n*U,te+=n*K,S+=n*O,d+=n*R,y+=n*J,h+=n*j,o+=n*Q,f+=n*he,l+=n*ie,m+=n*W,n=e[14],Y+=n*x,H+=n*_,X+=n*c,B+=n*g,P+=n*G,L+=n*A,te+=n*U,S+=n*K,d+=n*O,y+=n*R,h+=n*J,o+=n*j,f+=n*Q,l+=n*he,m+=n*ie,b+=n*W,n=e[15],H+=n*x,X+=n*_,B+=n*c,P+=n*g,L+=n*G,te+=n*A,S+=n*U,d+=n*K,y+=n*O,h+=n*R,o+=n*J,f+=n*j,l+=n*Q,m+=n*he,b+=n*ie,p+=n*W,s+=38*X,a+=38*B,u+=38*P,v+=38*L,w+=38*te,E+=38*S,M+=38*d,k+=38*y,D+=38*h,T+=38*o,C+=38*f,z+=38*l,I+=38*m,q+=38*b,Y+=38*p,i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=M+i+65535,i=Math.floor(n/65536),M=n-i*65536,n=k+i+65535,i=Math.floor(n/65536),k=n-i*65536,n=D+i+65535,i=Math.floor(n/65536),D=n-i*65536,n=T+i+65535,i=Math.floor(n/65536),T=n-i*65536,n=C+i+65535,i=Math.floor(n/65536),C=n-i*65536,n=z+i+65535,i=Math.floor(n/65536),z=n-i*65536,n=I+i+65535,i=Math.floor(n/65536),I=n-i*65536,n=q+i+65535,i=Math.floor(n/65536),q=n-i*65536,n=Y+i+65535,i=Math.floor(n/65536),Y=n-i*65536,n=H+i+65535,i=Math.floor(n/65536),H=n-i*65536,s+=i-1+37*(i-1),i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=M+i+65535,i=Math.floor(n/65536),M=n-i*65536,n=k+i+65535,i=Math.floor(n/65536),k=n-i*65536,n=D+i+65535,i=Math.floor(n/65536),D=n-i*65536,n=T+i+65535,i=Math.floor(n/65536),T=n-i*65536,n=C+i+65535,i=Math.floor(n/65536),C=n-i*65536,n=z+i+65535,i=Math.floor(n/65536),z=n-i*65536,n=I+i+65535,i=Math.floor(n/65536),I=n-i*65536,n=q+i+65535,i=Math.floor(n/65536),q=n-i*65536,n=Y+i+65535,i=Math.floor(n/65536),Y=n-i*65536,n=H+i+65535,i=Math.floor(n/65536),H=n-i*65536,s+=i-1+37*(i-1),r[0]=s,r[1]=a,r[2]=u,r[3]=v,r[4]=w,r[5]=E,r[6]=M,r[7]=k,r[8]=D,r[9]=T,r[10]=C,r[11]=z,r[12]=I,r[13]=q,r[14]=Y,r[15]=H}function ef(r,e){ui(r,e,e)}function $S(r,e){let t=qn();for(let n=0;n<16;n++)t[n]=e[n];for(let n=253;n>=0;n--)ef(t,t),n!==2&&n!==4&&ui(t,t,e);for(let n=0;n<16;n++)r[n]=t[n]}function gd(r,e){let t=new Uint8Array(32),n=new Float64Array(80),i=qn(),s=qn(),a=qn(),u=qn(),v=qn(),w=qn();for(let D=0;D<31;D++)t[D]=r[D];t[31]=r[31]&127|64,t[0]&=248,US(n,e);for(let D=0;D<16;D++)s[D]=n[D];i[0]=u[0]=1;for(let D=254;D>=0;--D){let T=t[D>>>3]>>>(D&7)&1;Qa(i,s,T),Qa(a,u,T),Iu(v,i,a),Ou(i,i,a),Iu(a,s,u),Ou(s,s,u),ef(u,v),ef(w,i),ui(i,a,i),ui(a,s,v),Iu(v,i,a),Ou(i,i,a),ef(s,i),Ou(a,u,w),ui(i,a,BS),Iu(i,i,u),ui(a,a,i),ui(i,u,w),ui(u,s,n),ef(s,v),Qa(i,s,T),Qa(a,u,T)}for(let D=0;D<16;D++)n[D+16]=i[D],n[D+32]=a[D],n[D+48]=s[D],n[D+64]=u[D];let E=n.subarray(32),M=n.subarray(16);$S(E,E),ui(M,M,E);let k=new Uint8Array(32);return LS(k,M),k}yt.scalarMult=gd;function Cy(r){return gd(r,ky)}yt.scalarMultBase=Cy;function Dy(r){if(r.length!==yt.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${yt.SECRET_KEY_LENGTH} bytes`);let e=new Uint8Array(r);return{publicKey:Cy(e),secretKey:e}}yt.generateKeyPairFromSeed=Dy;function FS(r){let e=(0,NS.randomBytes)(32,r),t=Dy(e);return(0,PS.wipe)(e),t}yt.generateKeyPair=FS;function qS(r,e,t=!1){if(r.length!==yt.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(e.length!==yt.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");let n=gd(r,e);if(t){let i=0;for(let s=0;s<n.length;s++)i|=n[s];if(i===0)throw new Error("X25519: invalid shared key")}return n}yt.sharedKey=qS});var xd=de(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});var er=xo(),yd=Fr(),HS=20;function zS(r,e,t){for(var n=1634760805,i=857760878,s=2036477234,a=1797285236,u=t[3]<<24|t[2]<<16|t[1]<<8|t[0],v=t[7]<<24|t[6]<<16|t[5]<<8|t[4],w=t[11]<<24|t[10]<<16|t[9]<<8|t[8],E=t[15]<<24|t[14]<<16|t[13]<<8|t[12],M=t[19]<<24|t[18]<<16|t[17]<<8|t[16],k=t[23]<<24|t[22]<<16|t[21]<<8|t[20],D=t[27]<<24|t[26]<<16|t[25]<<8|t[24],T=t[31]<<24|t[30]<<16|t[29]<<8|t[28],C=e[3]<<24|e[2]<<16|e[1]<<8|e[0],z=e[7]<<24|e[6]<<16|e[5]<<8|e[4],I=e[11]<<24|e[10]<<16|e[9]<<8|e[8],q=e[15]<<24|e[14]<<16|e[13]<<8|e[12],Y=n,H=i,X=s,B=a,P=u,L=v,te=w,S=E,d=M,y=k,h=D,o=T,f=C,l=z,m=I,b=q,p=0;p<HS;p+=2)Y=Y+P|0,f^=Y,f=f>>>32-16|f<<16,d=d+f|0,P^=d,P=P>>>32-12|P<<12,H=H+L|0,l^=H,l=l>>>32-16|l<<16,y=y+l|0,L^=y,L=L>>>32-12|L<<12,X=X+te|0,m^=X,m=m>>>32-16|m<<16,h=h+m|0,te^=h,te=te>>>32-12|te<<12,B=B+S|0,b^=B,b=b>>>32-16|b<<16,o=o+b|0,S^=o,S=S>>>32-12|S<<12,X=X+te|0,m^=X,m=m>>>32-8|m<<8,h=h+m|0,te^=h,te=te>>>32-7|te<<7,B=B+S|0,b^=B,b=b>>>32-8|b<<8,o=o+b|0,S^=o,S=S>>>32-7|S<<7,H=H+L|0,l^=H,l=l>>>32-8|l<<8,y=y+l|0,L^=y,L=L>>>32-7|L<<7,Y=Y+P|0,f^=Y,f=f>>>32-8|f<<8,d=d+f|0,P^=d,P=P>>>32-7|P<<7,Y=Y+L|0,b^=Y,b=b>>>32-16|b<<16,h=h+b|0,L^=h,L=L>>>32-12|L<<12,H=H+te|0,f^=H,f=f>>>32-16|f<<16,o=o+f|0,te^=o,te=te>>>32-12|te<<12,X=X+S|0,l^=X,l=l>>>32-16|l<<16,d=d+l|0,S^=d,S=S>>>32-12|S<<12,B=B+P|0,m^=B,m=m>>>32-16|m<<16,y=y+m|0,P^=y,P=P>>>32-12|P<<12,X=X+S|0,l^=X,l=l>>>32-8|l<<8,d=d+l|0,S^=d,S=S>>>32-7|S<<7,B=B+P|0,m^=B,m=m>>>32-8|m<<8,y=y+m|0,P^=y,P=P>>>32-7|P<<7,H=H+te|0,f^=H,f=f>>>32-8|f<<8,o=o+f|0,te^=o,te=te>>>32-7|te<<7,Y=Y+L|0,b^=Y,b=b>>>32-8|b<<8,h=h+b|0,L^=h,L=L>>>32-7|L<<7;er.writeUint32LE(Y+n|0,r,0),er.writeUint32LE(H+i|0,r,4),er.writeUint32LE(X+s|0,r,8),er.writeUint32LE(B+a|0,r,12),er.writeUint32LE(P+u|0,r,16),er.writeUint32LE(L+v|0,r,20),er.writeUint32LE(te+w|0,r,24),er.writeUint32LE(S+E|0,r,28),er.writeUint32LE(d+M|0,r,32),er.writeUint32LE(y+k|0,r,36),er.writeUint32LE(h+D|0,r,40),er.writeUint32LE(o+T|0,r,44),er.writeUint32LE(f+C|0,r,48),er.writeUint32LE(l+z|0,r,52),er.writeUint32LE(m+I|0,r,56),er.writeUint32LE(b+q|0,r,60)}function Oy(r,e,t,n,i){if(i===void 0&&(i=0),r.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<t.length)throw new Error("ChaCha: destination is shorter than source");var s,a;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),a=s.length-e.length,s.set(e,a)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,a=i}for(var u=new Uint8Array(64),v=0;v<t.length;v+=64){zS(u,s,r);for(var w=v;w<v+64&&w<t.length;w++)n[w]=t[w]^u[w-v];jS(s,0,a)}return yd.wipe(u),i===0&&yd.wipe(s),n}Ru.streamXOR=Oy;function KS(r,e,t,n){return n===void 0&&(n=0),yd.wipe(t),Oy(r,e,t,t,n)}Ru.stream=KS;function jS(r,e,t){for(var n=1;t--;)n=n+(r[e]&255)|0,r[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}});var By=de(tf=>{"use strict";Object.defineProperty(tf,"__esModule",{value:!0});var Ki=xo(),Ry=Fr(),GS=xd(),JS=20;function Ny(r,e,t,n){if(e.length!==24)throw new Error("XChaCha20 nonce must be 24 bytes");var i=Py(r,e.subarray(0,16),new Uint8Array(32)),s=new Uint8Array(12);s.set(e.subarray(16),4);var a=GS.streamXOR(i,s,t,n);return Ry.wipe(i),a}tf.streamXOR=Ny;function VS(r,e,t){return Ry.wipe(t),Ny(r,e,t,t)}tf.stream=VS;function Py(r,e,t){for(var n=1634760805,i=857760878,s=2036477234,a=1797285236,u=r[3]<<24|r[2]<<16|r[1]<<8|r[0],v=r[7]<<24|r[6]<<16|r[5]<<8|r[4],w=r[11]<<24|r[10]<<16|r[9]<<8|r[8],E=r[15]<<24|r[14]<<16|r[13]<<8|r[12],M=r[19]<<24|r[18]<<16|r[17]<<8|r[16],k=r[23]<<24|r[22]<<16|r[21]<<8|r[20],D=r[27]<<24|r[26]<<16|r[25]<<8|r[24],T=r[31]<<24|r[30]<<16|r[29]<<8|r[28],C=e[3]<<24|e[2]<<16|e[1]<<8|e[0],z=e[7]<<24|e[6]<<16|e[5]<<8|e[4],I=e[11]<<24|e[10]<<16|e[9]<<8|e[8],q=e[15]<<24|e[14]<<16|e[13]<<8|e[12],Y=n,H=i,X=s,B=a,P=u,L=v,te=w,S=E,d=M,y=k,h=D,o=T,f=C,l=z,m=I,b=q,p=0;p<JS;p+=2)Y=Y+P|0,f^=Y,f=f>>>32-16|f<<16,d=d+f|0,P^=d,P=P>>>32-12|P<<12,H=H+L|0,l^=H,l=l>>>32-16|l<<16,y=y+l|0,L^=y,L=L>>>32-12|L<<12,X=X+te|0,m^=X,m=m>>>32-16|m<<16,h=h+m|0,te^=h,te=te>>>32-12|te<<12,B=B+S|0,b^=B,b=b>>>32-16|b<<16,o=o+b|0,S^=o,S=S>>>32-12|S<<12,X=X+te|0,m^=X,m=m>>>32-8|m<<8,h=h+m|0,te^=h,te=te>>>32-7|te<<7,B=B+S|0,b^=B,b=b>>>32-8|b<<8,o=o+b|0,S^=o,S=S>>>32-7|S<<7,H=H+L|0,l^=H,l=l>>>32-8|l<<8,y=y+l|0,L^=y,L=L>>>32-7|L<<7,Y=Y+P|0,f^=Y,f=f>>>32-8|f<<8,d=d+f|0,P^=d,P=P>>>32-7|P<<7,Y=Y+L|0,b^=Y,b=b>>>32-16|b<<16,h=h+b|0,L^=h,L=L>>>32-12|L<<12,H=H+te|0,f^=H,f=f>>>32-16|f<<16,o=o+f|0,te^=o,te=te>>>32-12|te<<12,X=X+S|0,l^=X,l=l>>>32-16|l<<16,d=d+l|0,S^=d,S=S>>>32-12|S<<12,B=B+P|0,m^=B,m=m>>>32-16|m<<16,y=y+m|0,P^=y,P=P>>>32-12|P<<12,X=X+S|0,l^=X,l=l>>>32-8|l<<8,d=d+l|0,S^=d,S=S>>>32-7|S<<7,B=B+P|0,m^=B,m=m>>>32-8|m<<8,y=y+m|0,P^=y,P=P>>>32-7|P<<7,H=H+te|0,f^=H,f=f>>>32-8|f<<8,o=o+f|0,te^=o,te=te>>>32-7|te<<7,Y=Y+L|0,b^=Y,b=b>>>32-8|b<<8,h=h+b|0,L^=h,L=L>>>32-7|L<<7;return Ki.writeUint32LE(Y,t,0),Ki.writeUint32LE(H,t,4),Ki.writeUint32LE(X,t,8),Ki.writeUint32LE(B,t,12),Ki.writeUint32LE(f,t,16),Ki.writeUint32LE(l,t,20),Ki.writeUint32LE(m,t,24),Ki.writeUint32LE(b,t,28),t}tf.hchacha=Py});var wd=de(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});function WS(r,e,t){return~(r-1)&e|r-1&t}Xs.select=WS;function YS(r,e){return(r|0)-(e|0)-1>>>31&1}Xs.lessOrEqual=YS;function Ly(r,e){if(r.length!==e.length)return 0;for(var t=0,n=0;n<r.length;n++)t|=r[n]^e[n];return 1&t-1>>>8}Xs.compare=Ly;function XS(r,e){return r.length===0||e.length===0?!1:Ly(r,e)!==0}Xs.equal=XS});var $y=de(hi=>{"use strict";Object.defineProperty(hi,"__esModule",{value:!0});var ZS=wd(),Nu=Fr();hi.DIGEST_LENGTH=16;var Uy=function(){function r(e){this.digestLength=hi.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var t=e[0]|e[1]<<8;this._r[0]=t&8191;var n=e[2]|e[3]<<8;this._r[1]=(t>>>13|n<<3)&8191;var i=e[4]|e[5]<<8;this._r[2]=(n>>>10|i<<6)&7939;var s=e[6]|e[7]<<8;this._r[3]=(i>>>7|s<<9)&8191;var a=e[8]|e[9]<<8;this._r[4]=(s>>>4|a<<12)&255,this._r[5]=a>>>1&8190;var u=e[10]|e[11]<<8;this._r[6]=(a>>>14|u<<2)&8191;var v=e[12]|e[13]<<8;this._r[7]=(u>>>11|v<<5)&8065;var w=e[14]|e[15]<<8;this._r[8]=(v>>>8|w<<8)&8191,this._r[9]=w>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return r.prototype._blocks=function(e,t,n){for(var i=this._fin?0:2048,s=this._h[0],a=this._h[1],u=this._h[2],v=this._h[3],w=this._h[4],E=this._h[5],M=this._h[6],k=this._h[7],D=this._h[8],T=this._h[9],C=this._r[0],z=this._r[1],I=this._r[2],q=this._r[3],Y=this._r[4],H=this._r[5],X=this._r[6],B=this._r[7],P=this._r[8],L=this._r[9];n>=16;){var te=e[t+0]|e[t+1]<<8;s+=te&8191;var S=e[t+2]|e[t+3]<<8;a+=(te>>>13|S<<3)&8191;var d=e[t+4]|e[t+5]<<8;u+=(S>>>10|d<<6)&8191;var y=e[t+6]|e[t+7]<<8;v+=(d>>>7|y<<9)&8191;var h=e[t+8]|e[t+9]<<8;w+=(y>>>4|h<<12)&8191,E+=h>>>1&8191;var o=e[t+10]|e[t+11]<<8;M+=(h>>>14|o<<2)&8191;var f=e[t+12]|e[t+13]<<8;k+=(o>>>11|f<<5)&8191;var l=e[t+14]|e[t+15]<<8;D+=(f>>>8|l<<8)&8191,T+=l>>>5|i;var m=0,b=m;b+=s*C,b+=a*(5*L),b+=u*(5*P),b+=v*(5*B),b+=w*(5*X),m=b>>>13,b&=8191,b+=E*(5*H),b+=M*(5*Y),b+=k*(5*q),b+=D*(5*I),b+=T*(5*z),m+=b>>>13,b&=8191;var p=m;p+=s*z,p+=a*C,p+=u*(5*L),p+=v*(5*P),p+=w*(5*B),m=p>>>13,p&=8191,p+=E*(5*X),p+=M*(5*H),p+=k*(5*Y),p+=D*(5*q),p+=T*(5*I),m+=p>>>13,p&=8191;var x=m;x+=s*I,x+=a*z,x+=u*C,x+=v*(5*L),x+=w*(5*P),m=x>>>13,x&=8191,x+=E*(5*B),x+=M*(5*X),x+=k*(5*H),x+=D*(5*Y),x+=T*(5*q),m+=x>>>13,x&=8191;var _=m;_+=s*q,_+=a*I,_+=u*z,_+=v*C,_+=w*(5*L),m=_>>>13,_&=8191,_+=E*(5*P),_+=M*(5*B),_+=k*(5*X),_+=D*(5*H),_+=T*(5*Y),m+=_>>>13,_&=8191;var c=m;c+=s*Y,c+=a*q,c+=u*I,c+=v*z,c+=w*C,m=c>>>13,c&=8191,c+=E*(5*L),c+=M*(5*P),c+=k*(5*B),c+=D*(5*X),c+=T*(5*H),m+=c>>>13,c&=8191;var g=m;g+=s*H,g+=a*Y,g+=u*q,g+=v*I,g+=w*z,m=g>>>13,g&=8191,g+=E*C,g+=M*(5*L),g+=k*(5*P),g+=D*(5*B),g+=T*(5*X),m+=g>>>13,g&=8191;var G=m;G+=s*X,G+=a*H,G+=u*Y,G+=v*q,G+=w*I,m=G>>>13,G&=8191,G+=E*z,G+=M*C,G+=k*(5*L),G+=D*(5*P),G+=T*(5*B),m+=G>>>13,G&=8191;var A=m;A+=s*B,A+=a*X,A+=u*H,A+=v*Y,A+=w*q,m=A>>>13,A&=8191,A+=E*I,A+=M*z,A+=k*C,A+=D*(5*L),A+=T*(5*P),m+=A>>>13,A&=8191;var U=m;U+=s*P,U+=a*B,U+=u*X,U+=v*H,U+=w*Y,m=U>>>13,U&=8191,U+=E*q,U+=M*I,U+=k*z,U+=D*C,U+=T*(5*L),m+=U>>>13,U&=8191;var K=m;K+=s*L,K+=a*P,K+=u*B,K+=v*X,K+=w*H,m=K>>>13,K&=8191,K+=E*Y,K+=M*q,K+=k*I,K+=D*z,K+=T*C,m+=K>>>13,K&=8191,m=(m<<2)+m|0,m=m+b|0,b=m&8191,m=m>>>13,p+=m,s=b,a=p,u=x,v=_,w=c,E=g,M=G,k=A,D=U,T=K,t+=16,n-=16}this._h[0]=s,this._h[1]=a,this._h[2]=u,this._h[3]=v,this._h[4]=w,this._h[5]=E,this._h[6]=M,this._h[7]=k,this._h[8]=D,this._h[9]=T},r.prototype.finish=function(e,t){t===void 0&&(t=0);var n=new Uint16Array(10),i,s,a,u;if(this._leftover){for(u=this._leftover,this._buffer[u++]=1;u<16;u++)this._buffer[u]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(i=this._h[1]>>>13,this._h[1]&=8191,u=2;u<10;u++)this._h[u]+=i,i=this._h[u]>>>13,this._h[u]&=8191;for(this._h[0]+=i*5,i=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=i,i=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=i,n[0]=this._h[0]+5,i=n[0]>>>13,n[0]&=8191,u=1;u<10;u++)n[u]=this._h[u]+i,i=n[u]>>>13,n[u]&=8191;for(n[9]-=1<<13,s=(i^1)-1,u=0;u<10;u++)n[u]&=s;for(s=~s,u=0;u<10;u++)this._h[u]=this._h[u]&s|n[u];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,a=this._h[0]+this._pad[0],this._h[0]=a&65535,u=1;u<8;u++)a=(this._h[u]+this._pad[u]|0)+(a>>>16)|0,this._h[u]=a&65535;return e[t+0]=this._h[0]>>>0,e[t+1]=this._h[0]>>>8,e[t+2]=this._h[1]>>>0,e[t+3]=this._h[1]>>>8,e[t+4]=this._h[2]>>>0,e[t+5]=this._h[2]>>>8,e[t+6]=this._h[3]>>>0,e[t+7]=this._h[3]>>>8,e[t+8]=this._h[4]>>>0,e[t+9]=this._h[4]>>>8,e[t+10]=this._h[5]>>>0,e[t+11]=this._h[5]>>>8,e[t+12]=this._h[6]>>>0,e[t+13]=this._h[6]>>>8,e[t+14]=this._h[7]>>>0,e[t+15]=this._h[7]>>>8,this._finished=!0,this},r.prototype.update=function(e){var t=0,n=e.length,i;if(this._leftover){i=16-this._leftover,i>n&&(i=n);for(var s=0;s<i;s++)this._buffer[this._leftover+s]=e[t+s];if(n-=i,t+=i,this._leftover+=i,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(n>=16&&(i=n-n%16,this._blocks(e,t,i),t+=i,n-=i),n){for(var s=0;s<n;s++)this._buffer[this._leftover+s]=e[t+s];this._leftover+=n}return this},r.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},r.prototype.clean=function(){return Nu.wipe(this._buffer),Nu.wipe(this._r),Nu.wipe(this._h),Nu.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},r}();hi.Poly1305=Uy;function QS(r,e){var t=new Uy(r);t.update(e);var n=t.digest();return t.clean(),n}hi.oneTimeAuth=QS;function eA(r,e){return r.length!==hi.DIGEST_LENGTH||e.length!==hi.DIGEST_LENGTH?!1:ZS.equal(r,e)}hi.equal=eA});var Hy=de(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});var Pu=xd(),tA=$y(),rf=Fr(),Fy=xo(),rA=wd();li.KEY_LENGTH=32;li.NONCE_LENGTH=12;li.TAG_LENGTH=16;var qy=new Uint8Array(16),nA=function(){function r(e){if(this.nonceLength=li.NONCE_LENGTH,this.tagLength=li.TAG_LENGTH,e.length!==li.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return r.prototype.seal=function(e,t,n,i){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var s=new Uint8Array(16);s.set(e,s.length-e.length);var a=new Uint8Array(32);Pu.stream(this._key,s,a,4);var u=t.length+this.tagLength,v;if(i){if(i.length!==u)throw new Error("ChaCha20Poly1305: incorrect destination length");v=i}else v=new Uint8Array(u);return Pu.streamXOR(this._key,s,t,v,4),this._authenticate(v.subarray(v.length-this.tagLength,v.length),a,v.subarray(0,v.length-this.tagLength),n),rf.wipe(s),v},r.prototype.open=function(e,t,n,i){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(t.length<this.tagLength)return null;var s=new Uint8Array(16);s.set(e,s.length-e.length);var a=new Uint8Array(32);Pu.stream(this._key,s,a,4);var u=new Uint8Array(this.tagLength);if(this._authenticate(u,a,t.subarray(0,t.length-this.tagLength),n),!rA.equal(u,t.subarray(t.length-this.tagLength,t.length)))return null;var v=t.length-this.tagLength,w;if(i){if(i.length!==v)throw new Error("ChaCha20Poly1305: incorrect destination length");w=i}else w=new Uint8Array(v);return Pu.streamXOR(this._key,s,t.subarray(0,t.length-this.tagLength),w,4),rf.wipe(s),w},r.prototype.clean=function(){return rf.wipe(this._key),this},r.prototype._authenticate=function(e,t,n,i){var s=new tA.Poly1305(t);i&&(s.update(i),i.length%16>0&&s.update(qy.subarray(i.length%16))),s.update(n),n.length%16>0&&s.update(qy.subarray(n.length%16));var a=new Uint8Array(8);i&&Fy.writeUint64LE(i.length,a),s.update(a),Fy.writeUint64LE(n.length,a),s.update(a);for(var u=s.digest(),v=0;v<u.length;v++)e[v]=u[v];s.clean(),rf.wipe(u),rf.wipe(a)},r}();li.ChaCha20Poly1305=nA});var jy=de(di=>{"use strict";Object.defineProperty(di,"__esModule",{value:!0});var zy=By(),Ky=Hy(),nf=Fr();di.KEY_LENGTH=32;di.NONCE_LENGTH=24;di.TAG_LENGTH=16;var iA=function(){function r(e){if(this.nonceLength=di.NONCE_LENGTH,this.tagLength=di.TAG_LENGTH,e.length!==di.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return r.prototype.seal=function(e,t,n,i){if(e.length!==24)throw new Error("XChaCha20Poly1305: incorrect nonce length");var s=zy.hchacha(this._key,e.subarray(0,16),new Uint8Array(32)),a=new Uint8Array(12);a.set(e.subarray(16),4);var u=new Ky.ChaCha20Poly1305(s),v=u.seal(a,t,n,i);return nf.wipe(s),nf.wipe(a),u.clean(),v},r.prototype.open=function(e,t,n,i){if(e.length!==24)throw new Error("XChaCha20Poly1305: incorrect nonce length");if(t.length<this.tagLength)return null;var s=zy.hchacha(this._key,e.subarray(0,16),new Uint8Array(32)),a=new Uint8Array(12);a.set(e.subarray(16),4);var u=new Ky.ChaCha20Poly1305(s),v=u.open(a,t,n,i);return nf.wipe(s),nf.wipe(a),u.clean(),v},r.prototype.clean=function(){return nf.wipe(this._key),this},r}();di.XChaCha20Poly1305=iA});var M6=de((Q$,_6)=>{"use strict";_6.exports=function(r,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var t=typeof e.cycles=="boolean"?e.cycles:!1,n=e.cmp&&function(s){return function(a){return function(u,v){var w={key:u,value:a[u]},E={key:v,value:a[v]};return s(w,E)}}}(e.cmp),i=[];return function s(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a!==void 0){if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);var u,v;if(Array.isArray(a)){for(v="[",u=0;u<a.length;u++)u&&(v+=","),v+=s(a[u])||"null";return v+"]"}if(a===null)return"null";if(i.indexOf(a)!==-1){if(t)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var w=i.push(a)-1,E=Object.keys(a).sort(n&&n(a));for(v="",u=0;u<E.length;u++){var M=E[u],k=s(a[M]);k&&(v&&(v+=","),v+=JSON.stringify(M)+":"+k)}return i.splice(w,1),"{"+v+"}"}}(r)}});var U6=de((MF,L6)=>{"use strict";function KA(r,e){for(let t=0;t<r.byteLength;t++){if(r[t]<e[t])return-1;if(r[t]>e[t])return 1}return r.byteLength>e.byteLength?1:r.byteLength<e.byteLength?-1:0}L6.exports=KA});var F6=de((SF,$6)=>{"use strict";function jA(r,e){e||(e=r.reduce((i,s)=>i+s.length,0));let t=new Uint8Array(e),n=0;for(let i of r)t.set(i,n),n+=i.length;return t}$6.exports=jA});var H6=de((AF,q6)=>{"use strict";function GA(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}q6.exports=GA});var Ld=de((TF,G6)=>{"use strict";var{bases:z6}=(Of(),ta(Fp));function j6(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var K6=j6("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Bd=j6("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=new Uint8Array(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),JA={utf8:K6,"utf-8":K6,hex:z6.base16,latin1:Bd,ascii:Bd,binary:Bd,...z6};G6.exports=JA});var V6=de((kF,J6)=>{"use strict";var VA=Ld();function WA(r,e="utf8"){let t=VA[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return t.decoder.decode(`${t.prefix}${r}`)}J6.exports=WA});var Y6=de((CF,W6)=>{"use strict";var YA=Ld();function XA(r,e="utf8"){let t=YA[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return t.encoder.encode(r).substring(1)}W6.exports=XA});var Z6=de((DF,X6)=>{"use strict";function ZA(r,e){if(r.length!==e.length)throw new Error("Inputs should have the same length");let t=new Uint8Array(r.length);for(let n=0;n<r.length;n++)t[n]=r[n]^e[n];return t}X6.exports=ZA});var bf=de((IF,Q6)=>{"use strict";var QA=U6(),eT=F6(),tT=H6(),rT=V6(),nT=Y6(),iT=Z6();Q6.exports={compare:QA,concat:eT,equals:tT,fromString:rT,toString:nT,xor:iT}});var GT={};Ze(GT,{Cacao:()=>Mo,CeramicClient:()=>pu,DIDSession:()=>Vi,Document:()=>Kn,StreamUtils:()=>ot,TileDocument:()=>ai,createDIDCacao:()=>Yd,createDIDKey:()=>Vu});rr();yi();var vp={tile:0,"caip10-link":1,model:2,MID:3,UNLOADABLE:4};function k4(r){let e=vp[r];if(typeof e<"u")return e;throw new Error(`No stream type registered for name ${r}`)}function C4(r){let e=Object.entries(vp).find(([,t])=>t===r);if(e)return e[0];throw new Error(`No stream type registered for index ${r}`)}var gr=class{};gr.nameByCode=C4;gr.codeByName=k4;var Yh=Je(no(),1);lh();aa();Qo();Af();oa();var sr;(function(r){r.WEAKMAP="weakmap",r.REPLACE="replace"})(sr||(sr={}));function jp(r){return Boolean(r.get)}function Gp(r,e,t){let n=r.get;switch(t){case sr.WEAKMAP:{let i=new WeakMap;r.get=function(){let s=i.get(this);return s||(s=n.apply(this),i.set(this,s)),s};break}case sr.REPLACE:{r.get=function(){let i=n.apply(this);return Object.defineProperty(this,e,{configurable:!1,enumerable:!1,value:i}),i};break}default:throw new Error(`Unsupported strategy: ${t}`)}}function Jp(r){return Boolean(r.value)}function Vp(r,e,t,n,i){let s=r.value;switch(s.length){case 0:{switch(t){case sr.REPLACE:{r.value=function(){let a=s.apply(this);Object.defineProperty(this,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:function(){return a}})};return}case sr.WEAKMAP:{let a=new WeakMap;r.value=function(){if(a.has(this))return a.get(this);let u=s.apply(this);return a.set(this,u),u};break}}break}case 1:{switch(t){case sr.WEAKMAP:{let a=new WeakMap;r.value=function(u){let v=a.get(this);if(v||(v=i(),a.set(this,v)),v.has(u))return v.get(u);let w=s.call(this,u);return v.set(u,w),w};break}case sr.REPLACE:{r.value=function(a){let u=i();function v(w){if(u.has(w))return u.get(w);{let E=s.call(this,w);return u.set(w,E),E}}return Object.defineProperty(this,e,{configurable:r.configurable,enumerable:r.enumerable,writable:r.writable,value:v}),v.call(this,a)};break}}break}default:switch(t){case sr.REPLACE:{r.value=function(...a){let u=i();function v(...w){let E=n.apply(this,w);if(u.has(E))return u.get(E);{let M=s.apply(this,w);return u.set(E,M),M}}return Object.defineProperty(this,e,{configurable:r.configurable,enumerable:r.enumerable,writable:r.writable,value:v}),v.apply(this,a)};break}case sr.WEAKMAP:{let a=new WeakMap;r.value=function(...v){let w=a.get(this),E=n.apply(this,v);if(w?.has(E))return w.get(E);w||(w=i(),a.set(this,w));let M=s.apply(this,v);return w.set(E,M),M}}}}}function yw(...r){let e="";for(let t=0,n=r.length;t<n;t++)e+=`${r[t]}$!$`;return e}function xw(r){let e=r?.hashFunction||yw,t=r?.strategy||sr.WEAKMAP,n=r?.argsCacheBuilder||(()=>new Map);return(i,s,a)=>{if(Jp(a)){Vp(a,s,t,e,n);return}if(jp(a)){Gp(a,s,t);return}throw new Error("Decorate only a method or get accessor")}}var xr=xw;rr();Ah();var Nf=({enumerable:r=!0,configurable:e=!1}={})=>({enumerable:r,configurable:e,writable:!1}),Ch=function*(r,e){if(r!=null&&!(r instanceof Uint8Array))for(let[t,n]of Object.entries(r)){let i=[...e,t];if(n!=null&&typeof n=="object")if(Array.isArray(n))for(let[s,a]of n.entries()){let u=[...i,s],v=Le.asCID(a);v?yield[u.join("/"),v]:typeof a=="object"&&(yield*Ch(a,u))}else{let s=Le.asCID(n);s?yield[i.join("/"),s]:yield*Ch(n,i)}}},Dh=function*(r,e){if(r!=null)for(let[t,n]of Object.entries(r)){let i=[...e,t];if(yield i.join("/"),n!=null&&!(n instanceof Uint8Array)&&typeof n=="object"&&!Le.asCID(n))if(Array.isArray(n))for(let[s,a]of n.entries()){let u=[...i,s];yield u.join("/"),typeof a=="object"&&!Le.asCID(a)&&(yield*Dh(a,u))}else yield*Dh(n,i)}},ww=(r,e)=>{let t=r;for(let[n,i]of e.entries()){if(t=t[i],t==null)throw new Error(`Object has no property at ${e.slice(0,n+1).map(a=>`[${JSON.stringify(a)}]`).join("")}`);let s=Le.asCID(t);if(s)return{value:s,remaining:e.slice(n+1).join("/")}}return{value:t}},Pf=class{constructor({cid:e,bytes:t,value:n}){if(!e||!t||typeof n>"u")throw new Error("Missing required argument");this.cid=e,this.bytes=t,this.value=n,this.asBlock=this,Object.defineProperties(this,{cid:Nf(),bytes:Nf(),value:Nf(),asBlock:Nf()})}links(){return Ch(this.value,[])}tree(){return Dh(this.value,[])}get(e="/"){return ww(this.value,e.split("/").filter(Boolean))}},jn=async({value:r,codec:e,hasher:t})=>{if(typeof r>"u")throw new Error('Missing required argument "value"');if(!e||!t)throw new Error("Missing required argument: codec or hasher");let n=e.encode(r),i=await t.digest(n),s=Le.create(1,e.code,i);return new Pf({value:r,bytes:n,cid:s})},Wp=async({bytes:r,codec:e,hasher:t})=>{if(!r)throw new Error('Missing required argument "bytes"');if(!e||!t)throw new Error("Missing required argument: codec or hasher");let n=e.decode(r),i=await t.digest(r),s=Le.create(1,e.code,i);return new Pf({value:n,bytes:r,cid:s})};yi();Xo();var Gh=Je(no(),1);var Sr={};Ze(Sr,{code:()=>ss,decode:()=>qh,encode:()=>ao,name:()=>n5});var Ew=["string","number","bigint","symbol"],_w=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Yp(r){if(r===null)return"null";if(r===void 0)return"undefined";if(r===!0||r===!1)return"boolean";let e=typeof r;if(Ew.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(r))return"Array";if(Mw(r))return"Buffer";let t=Sw(r);return t||"Object"}function Mw(r){return r&&r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer.call(null,r)}function Sw(r){let e=Object.prototype.toString.call(r).slice(8,-1);if(_w.includes(e))return e}var fe=class{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};fe.uint=new fe(0,"uint",!0);fe.negint=new fe(1,"negint",!0);fe.bytes=new fe(2,"bytes",!0);fe.string=new fe(3,"string",!0);fe.array=new fe(4,"array",!1);fe.map=new fe(5,"map",!1);fe.tag=new fe(6,"tag",!1);fe.float=new fe(7,"float",!0);fe.false=new fe(7,"false",!0);fe.true=new fe(7,"true",!0);fe.null=new fe(7,"null",!0);fe.undefined=new fe(7,"undefined",!0);fe.break=new fe(7,"break",!0);var Ee=class{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};var es=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",Aw=new TextDecoder,Tw=new TextEncoder;function Lf(r){return es&&globalThis.Buffer.isBuffer(r)}function Ih(r){return r instanceof Uint8Array?Lf(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r:Uint8Array.from(r)}var e1=es?(r,e,t)=>t-e>64?globalThis.Buffer.from(r.subarray(e,t)).toString("utf8"):Zp(r,e,t):(r,e,t)=>t-e>64?Aw.decode(r.subarray(e,t)):Zp(r,e,t),t1=es?r=>r.length>64?globalThis.Buffer.from(r):Xp(r):r=>r.length>64?Tw.encode(r):Xp(r),An=r=>Uint8Array.from(r),ts=es?(r,e,t)=>Lf(r)?new Uint8Array(r.subarray(e,t)):r.slice(e,t):(r,e,t)=>r.slice(e,t),r1=es?(r,e)=>(r=r.map(t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t)),Ih(globalThis.Buffer.concat(r,e))):(r,e)=>{let t=new Uint8Array(e),n=0;for(let i of r)n+i.length>t.length&&(i=i.subarray(0,t.length-n)),t.set(i,n),n+=i.length;return t},n1=es?r=>globalThis.Buffer.allocUnsafe(r):r=>new Uint8Array(r);function i1(r,e){if(Lf(r)&&Lf(e))return r.compare(e);for(let t=0;t<r.length;t++)if(r[t]!==e[t])return r[t]<e[t]?-1:1;return 0}function Xp(r,e=1/0){let t,n=r.length,i=null,s=[];for(let a=0;a<n;++a){if(t=r.charCodeAt(a),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(a+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&s.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;s.push(t)}else if(t<2048){if((e-=2)<0)break;s.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;s.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;s.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return s}function Zp(r,e,t){let n=[];for(;e<t;){let i=r[e],s=null,a=i>239?4:i>223?3:i>191?2:1;if(e+a<=t){let u,v,w,E;switch(a){case 1:i<128&&(s=i);break;case 2:u=r[e+1],(u&192)===128&&(E=(i&31)<<6|u&63,E>127&&(s=E));break;case 3:u=r[e+1],v=r[e+2],(u&192)===128&&(v&192)===128&&(E=(i&15)<<12|(u&63)<<6|v&63,E>2047&&(E<55296||E>57343)&&(s=E));break;case 4:u=r[e+1],v=r[e+2],w=r[e+3],(u&192)===128&&(v&192)===128&&(w&192)===128&&(E=(i&15)<<18|(u&63)<<12|(v&63)<<6|w&63,E>65535&&E<1114112&&(s=E))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),e+=a}return kw(n)}var Qp=4096;function kw(r){let e=r.length;if(e<=Qp)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=Qp));return t}var Cw=256,fa=class{constructor(e=Cw){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let i=t.length-(this.maxCursor-this.cursor)-1;t.set(e,i)}else{if(t){let i=t.length-(this.maxCursor-this.cursor)-1;i<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,i),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=n1(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=ts(n,0,this.cursor)}else t=r1(this.chunks,this.cursor);return e&&this.reset(),t}};var ze="CBOR decode error:",Oh="CBOR encode error:",ca=[];ca[23]=1;ca[24]=2;ca[25]=3;ca[26]=5;ca[27]=9;function Gn(r,e,t){if(r.length-e<t)throw new Error(`${ze} not enough data for type`)}var Mt=[24,256,65536,4294967296,BigInt("18446744073709551616")];function wr(r,e,t){Gn(r,e,1);let n=r[e];if(t.strict===!0&&n<Mt[0])throw new Error(`${ze} integer encoded in more bytes than necessary (strict decode)`);return n}function Er(r,e,t){Gn(r,e,2);let n=r[e]<<8|r[e+1];if(t.strict===!0&&n<Mt[1])throw new Error(`${ze} integer encoded in more bytes than necessary (strict decode)`);return n}function _r(r,e,t){Gn(r,e,4);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3];if(t.strict===!0&&n<Mt[2])throw new Error(`${ze} integer encoded in more bytes than necessary (strict decode)`);return n}function Mr(r,e,t){Gn(r,e,8);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3],i=r[e+4]*16777216+(r[e+5]<<16)+(r[e+6]<<8)+r[e+7],s=(BigInt(n)<<BigInt(32))+BigInt(i);if(t.strict===!0&&s<Mt[3])throw new Error(`${ze} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(t.allowBigInt===!0)return s;throw new Error(`${ze} integers outside of the safe integer range are not supported`)}function o1(r,e,t,n){return new Ee(fe.uint,wr(r,e+1,n),2)}function s1(r,e,t,n){return new Ee(fe.uint,Er(r,e+1,n),3)}function a1(r,e,t,n){return new Ee(fe.uint,_r(r,e+1,n),5)}function f1(r,e,t,n){return new Ee(fe.uint,Mr(r,e+1,n),9)}function Br(r,e){return Ot(r,0,e.value)}function Ot(r,e,t){if(t<Mt[0]){let n=Number(t);r.push([e|n])}else if(t<Mt[1]){let n=Number(t);r.push([e|24,n])}else if(t<Mt[2]){let n=Number(t);r.push([e|25,n>>>8,n&255])}else if(t<Mt[3]){let n=Number(t);r.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(t);if(n<Mt[4]){let i=[e|27,0,0,0,0,0,0,0],s=Number(n&BigInt(4294967295)),a=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=s&255,s=s>>8,i[7]=s&255,s=s>>8,i[6]=s&255,s=s>>8,i[5]=s&255,i[4]=a&255,a=a>>8,i[3]=a&255,a=a>>8,i[2]=a&255,a=a>>8,i[1]=a&255,r.push(i)}else throw new Error(`${ze} encountered BigInt larger than allowable range`)}}Br.encodedSize=function(e){return Ot.encodedSize(e.value)};Ot.encodedSize=function(e){return e<Mt[0]?1:e<Mt[1]?2:e<Mt[2]?3:e<Mt[3]?5:9};Br.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};function c1(r,e,t,n){return new Ee(fe.negint,-1-wr(r,e+1,n),2)}function u1(r,e,t,n){return new Ee(fe.negint,-1-Er(r,e+1,n),3)}function h1(r,e,t,n){return new Ee(fe.negint,-1-_r(r,e+1,n),5)}var Rh=BigInt(-1),l1=BigInt(1);function d1(r,e,t,n){let i=Mr(r,e+1,n);if(typeof i!="bigint"){let s=-1-i;if(s>=Number.MIN_SAFE_INTEGER)return new Ee(fe.negint,s,9)}if(n.allowBigInt!==!0)throw new Error(`${ze} integers outside of the safe integer range are not supported`);return new Ee(fe.negint,Rh-BigInt(i),9)}function Uf(r,e){let t=e.value,n=typeof t=="bigint"?t*Rh-l1:t*-1-1;Ot(r,e.type.majorEncoded,n)}Uf.encodedSize=function(e){let t=e.value,n=typeof t=="bigint"?t*Rh-l1:t*-1-1;return n<Mt[0]?1:n<Mt[1]?2:n<Mt[2]?3:n<Mt[3]?5:9};Uf.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0};function ua(r,e,t,n){Gn(r,e,t+n);let i=ts(r,e+t,e+t+n);return new Ee(fe.bytes,i,t+n)}function p1(r,e,t,n){return ua(r,e,1,t)}function m1(r,e,t,n){return ua(r,e,2,wr(r,e+1,n))}function b1(r,e,t,n){return ua(r,e,3,Er(r,e+1,n))}function v1(r,e,t,n){return ua(r,e,5,_r(r,e+1,n))}function g1(r,e,t,n){let i=Mr(r,e+1,n);if(typeof i=="bigint")throw new Error(`${ze} 64-bit integer bytes lengths not supported`);return ua(r,e,9,i)}function $f(r){return r.encodedBytes===void 0&&(r.encodedBytes=r.type===fe.string?t1(r.value):r.value),r.encodedBytes}function rs(r,e){let t=$f(e);Ot(r,e.type.majorEncoded,t.length),r.push(t)}rs.encodedSize=function(e){let t=$f(e);return Ot.encodedSize(t.length)+t.length};rs.compareTokens=function(e,t){return Iw($f(e),$f(t))};function Iw(r,e){return r.length<e.length?-1:r.length>e.length?1:i1(r,e)}function ha(r,e,t,n,i){let s=t+n;Gn(r,e,s);let a=new Ee(fe.string,e1(r,e+t,e+s),s);return i.retainStringBytes===!0&&(a.byteValue=ts(r,e+t,e+s)),a}function y1(r,e,t,n){return ha(r,e,1,t,n)}function x1(r,e,t,n){return ha(r,e,2,wr(r,e+1,n),n)}function w1(r,e,t,n){return ha(r,e,3,Er(r,e+1,n),n)}function E1(r,e,t,n){return ha(r,e,5,_r(r,e+1,n),n)}function _1(r,e,t,n){let i=Mr(r,e+1,n);if(typeof i=="bigint")throw new Error(`${ze} 64-bit integer string lengths not supported`);return ha(r,e,9,i,n)}var M1=rs;function ns(r,e,t,n){return new Ee(fe.array,n,t)}function S1(r,e,t,n){return ns(r,e,1,t)}function A1(r,e,t,n){return ns(r,e,2,wr(r,e+1,n))}function T1(r,e,t,n){return ns(r,e,3,Er(r,e+1,n))}function k1(r,e,t,n){return ns(r,e,5,_r(r,e+1,n))}function C1(r,e,t,n){let i=Mr(r,e+1,n);if(typeof i=="bigint")throw new Error(`${ze} 64-bit integer array lengths not supported`);return ns(r,e,9,i)}function D1(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${ze} indefinite length items not allowed`);return ns(r,e,1,1/0)}function Ff(r,e){Ot(r,fe.array.majorEncoded,e.value)}Ff.compareTokens=Br.compareTokens;Ff.encodedSize=function(e){return Ot.encodedSize(e.value)};function is(r,e,t,n){return new Ee(fe.map,n,t)}function I1(r,e,t,n){return is(r,e,1,t)}function O1(r,e,t,n){return is(r,e,2,wr(r,e+1,n))}function R1(r,e,t,n){return is(r,e,3,Er(r,e+1,n))}function N1(r,e,t,n){return is(r,e,5,_r(r,e+1,n))}function P1(r,e,t,n){let i=Mr(r,e+1,n);if(typeof i=="bigint")throw new Error(`${ze} 64-bit integer map lengths not supported`);return is(r,e,9,i)}function B1(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${ze} indefinite length items not allowed`);return is(r,e,1,1/0)}function qf(r,e){Ot(r,fe.map.majorEncoded,e.value)}qf.compareTokens=Br.compareTokens;qf.encodedSize=function(e){return Ot.encodedSize(e.value)};function L1(r,e,t,n){return new Ee(fe.tag,t,1)}function U1(r,e,t,n){return new Ee(fe.tag,wr(r,e+1,n),2)}function $1(r,e,t,n){return new Ee(fe.tag,Er(r,e+1,n),3)}function F1(r,e,t,n){return new Ee(fe.tag,_r(r,e+1,n),5)}function q1(r,e,t,n){return new Ee(fe.tag,Mr(r,e+1,n),9)}function Hf(r,e){Ot(r,fe.tag.majorEncoded,e.value)}Hf.compareTokens=Br.compareTokens;Hf.encodedSize=function(e){return Ot.encodedSize(e.value)};var Lw=20,Uw=21,$w=22,Fw=23;function H1(r,e,t,n){if(n.allowUndefined===!1)throw new Error(`${ze} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new Ee(fe.null,null,1):new Ee(fe.undefined,void 0,1)}function z1(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${ze} indefinite length items not allowed`);return new Ee(fe.break,void 0,1)}function Nh(r,e,t){if(t){if(t.allowNaN===!1&&Number.isNaN(r))throw new Error(`${ze} NaN values are not supported`);if(t.allowInfinity===!1&&(r===1/0||r===-1/0))throw new Error(`${ze} Infinity values are not supported`)}return new Ee(fe.float,r,e)}function K1(r,e,t,n){return Nh(Ph(r,e+1),3,n)}function j1(r,e,t,n){return Nh(Bh(r,e+1),5,n)}function G1(r,e,t,n){return Nh(Y1(r,e+1),9,n)}function zf(r,e,t){let n=e.value;if(n===!1)r.push([fe.float.majorEncoded|Lw]);else if(n===!0)r.push([fe.float.majorEncoded|Uw]);else if(n===null)r.push([fe.float.majorEncoded|$w]);else if(n===void 0)r.push([fe.float.majorEncoded|Fw]);else{let i,s=!1;(!t||t.float64!==!0)&&(V1(n),i=Ph(cn,1),n===i||Number.isNaN(n)?(cn[0]=249,r.push(cn.slice(0,3)),s=!0):(W1(n),i=Bh(cn,1),n===i&&(cn[0]=250,r.push(cn.slice(0,5)),s=!0))),s||(qw(n),i=Y1(cn,1),cn[0]=251,r.push(cn.slice(0,9)))}}zf.encodedSize=function(e,t){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!t||t.float64!==!0){V1(n);let i=Ph(cn,1);if(n===i||Number.isNaN(n))return 3;if(W1(n),i=Bh(cn,1),n===i)return 5}return 9};var J1=new ArrayBuffer(9),Lr=new DataView(J1,1),cn=new Uint8Array(J1,0);function V1(r){if(r===1/0)Lr.setUint16(0,31744,!1);else if(r===-1/0)Lr.setUint16(0,64512,!1);else if(Number.isNaN(r))Lr.setUint16(0,32256,!1);else{Lr.setFloat32(0,r);let e=Lr.getUint32(0),t=(e&2139095040)>>23,n=e&8388607;if(t===255)Lr.setUint16(0,31744,!1);else if(t===0)Lr.setUint16(0,(r&2147483648)>>16|n>>13,!1);else{let i=t-127;i<-24?Lr.setUint16(0,0):i<-14?Lr.setUint16(0,(e&2147483648)>>16|1<<24+i,!1):Lr.setUint16(0,(e&2147483648)>>16|i+15<<10|n>>13,!1)}}}function Ph(r,e){if(r.length-e<2)throw new Error(`${ze} not enough data for float16`);let t=(r[e]<<8)+r[e+1];if(t===31744)return 1/0;if(t===64512)return-1/0;if(t===32256)return NaN;let n=t>>10&31,i=t&1023,s;return n===0?s=i*2**-24:n!==31?s=(i+1024)*2**(n-25):s=i===0?1/0:NaN,t&32768?-s:s}function W1(r){Lr.setFloat32(0,r,!1)}function Bh(r,e){if(r.length-e<4)throw new Error(`${ze} not enough data for float32`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,4).getFloat32(0,!1)}function qw(r){Lr.setFloat64(0,r,!1)}function Y1(r,e){if(r.length-e<8)throw new Error(`${ze} not enough data for float64`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,8).getFloat64(0,!1)}zf.compareTokens=Br.compareTokens;function et(r,e,t){throw new Error(`${ze} encountered invalid minor (${t}) for major ${r[e]>>>5}`)}function Kf(r){return()=>{throw new Error(`${ze} ${r}`)}}var ve=[];for(let r=0;r<=23;r++)ve[r]=et;ve[24]=o1;ve[25]=s1;ve[26]=a1;ve[27]=f1;ve[28]=et;ve[29]=et;ve[30]=et;ve[31]=et;for(let r=32;r<=55;r++)ve[r]=et;ve[56]=c1;ve[57]=u1;ve[58]=h1;ve[59]=d1;ve[60]=et;ve[61]=et;ve[62]=et;ve[63]=et;for(let r=64;r<=87;r++)ve[r]=p1;ve[88]=m1;ve[89]=b1;ve[90]=v1;ve[91]=g1;ve[92]=et;ve[93]=et;ve[94]=et;ve[95]=Kf("indefinite length bytes/strings are not supported");for(let r=96;r<=119;r++)ve[r]=y1;ve[120]=x1;ve[121]=w1;ve[122]=E1;ve[123]=_1;ve[124]=et;ve[125]=et;ve[126]=et;ve[127]=Kf("indefinite length bytes/strings are not supported");for(let r=128;r<=151;r++)ve[r]=S1;ve[152]=A1;ve[153]=T1;ve[154]=k1;ve[155]=C1;ve[156]=et;ve[157]=et;ve[158]=et;ve[159]=D1;for(let r=160;r<=183;r++)ve[r]=I1;ve[184]=O1;ve[185]=R1;ve[186]=N1;ve[187]=P1;ve[188]=et;ve[189]=et;ve[190]=et;ve[191]=B1;for(let r=192;r<=215;r++)ve[r]=L1;ve[216]=U1;ve[217]=$1;ve[218]=F1;ve[219]=q1;ve[220]=et;ve[221]=et;ve[222]=et;ve[223]=et;for(let r=224;r<=243;r++)ve[r]=Kf("simple values are not supported");ve[244]=et;ve[245]=et;ve[246]=et;ve[247]=H1;ve[248]=Kf("simple values are not supported");ve[249]=K1;ve[250]=j1;ve[251]=G1;ve[252]=et;ve[253]=et;ve[254]=et;ve[255]=z1;var un=[];for(let r=0;r<24;r++)un[r]=new Ee(fe.uint,r,1);for(let r=-1;r>=-24;r--)un[31-r]=new Ee(fe.negint,r,1);un[64]=new Ee(fe.bytes,new Uint8Array(0),1);un[96]=new Ee(fe.string,"",1);un[128]=new Ee(fe.array,0,1);un[160]=new Ee(fe.map,0,1);un[244]=new Ee(fe.false,!1,1);un[245]=new Ee(fe.true,!0,1);un[246]=new Ee(fe.null,null,1);function X1(r){switch(r.type){case fe.false:return An([244]);case fe.true:return An([245]);case fe.null:return An([246]);case fe.bytes:return r.value.length?void 0:An([64]);case fe.string:return r.value===""?An([96]):void 0;case fe.array:return r.value===0?An([128]):void 0;case fe.map:return r.value===0?An([160]):void 0;case fe.uint:return r.value<24?An([Number(r.value)]):void 0;case fe.negint:if(r.value>=-24)return An([31-Number(r.value)])}}var zw={float64:!1,mapSorter:Gw,quickEncodeToken:X1};function Kw(){let r=[];return r[fe.uint.major]=Br,r[fe.negint.major]=Uf,r[fe.bytes.major]=rs,r[fe.string.major]=M1,r[fe.array.major]=Ff,r[fe.map.major]=qf,r[fe.tag.major]=Hf,r[fe.float.major]=zf,r}var Z1=Kw(),Lh=new fa,os=class{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do if(t.obj===e)return!0;while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${Oh} object contains circular references`);return new os(t,e)}},xi={null:new Ee(fe.null,null),undefined:new Ee(fe.undefined,void 0),true:new Ee(fe.true,!0),false:new Ee(fe.false,!1),emptyArray:new Ee(fe.array,0),emptyMap:new Ee(fe.map,0)},wi={number(r,e,t,n){return!Number.isInteger(r)||!Number.isSafeInteger(r)?new Ee(fe.float,r):r>=0?new Ee(fe.uint,r):new Ee(fe.negint,r)},bigint(r,e,t,n){return r>=BigInt(0)?new Ee(fe.uint,r):new Ee(fe.negint,r)},Uint8Array(r,e,t,n){return new Ee(fe.bytes,r)},string(r,e,t,n){return new Ee(fe.string,r)},boolean(r,e,t,n){return r?xi.true:xi.false},null(r,e,t,n){return xi.null},undefined(r,e,t,n){return xi.undefined},ArrayBuffer(r,e,t,n){return new Ee(fe.bytes,new Uint8Array(r))},DataView(r,e,t,n){return new Ee(fe.bytes,new Uint8Array(r.buffer,r.byteOffset,r.byteLength))},Array(r,e,t,n){if(!r.length)return t.addBreakTokens===!0?[xi.emptyArray,new Ee(fe.break)]:xi.emptyArray;n=os.createCheck(n,r);let i=[],s=0;for(let a of r)i[s++]=jf(a,t,n);return t.addBreakTokens?[new Ee(fe.array,r.length),i,new Ee(fe.break)]:[new Ee(fe.array,r.length),i]},Object(r,e,t,n){let i=e!=="Object",s=i?r.keys():Object.keys(r),a=i?r.size:s.length;if(!a)return t.addBreakTokens===!0?[xi.emptyMap,new Ee(fe.break)]:xi.emptyMap;n=os.createCheck(n,r);let u=[],v=0;for(let w of s)u[v++]=[jf(w,t,n),jf(i?r.get(w):r[w],t,n)];return jw(u,t),t.addBreakTokens?[new Ee(fe.map,a),u,new Ee(fe.break)]:[new Ee(fe.map,a),u]}};wi.Map=wi.Object;wi.Buffer=wi.Uint8Array;for(let r of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))wi[`${r}Array`]=wi.DataView;function jf(r,e={},t){let n=Yp(r),i=e&&e.typeEncoders&&e.typeEncoders[n]||wi[n];if(typeof i=="function"){let a=i(r,n,e,t);if(a!=null)return a}let s=wi[n];if(!s)throw new Error(`${Oh} unsupported type: ${n}`);return s(r,n,e,t)}function jw(r,e){e.mapSorter&&r.sort(e.mapSorter)}function Gw(r,e){let t=Array.isArray(r[0])?r[0][0]:r[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(t.type!==n.type)return t.type.compare(n.type);let i=t.type.major,s=Z1[i].compareTokens(t,n);return s===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),s}function Q1(r,e,t,n){if(Array.isArray(e))for(let i of e)Q1(r,i,t,n);else t[e.type.major](r,e,n)}function Jw(r,e,t){let n=jf(r,t);if(!Array.isArray(n)&&t.quickEncodeToken){let i=t.quickEncodeToken(n);if(i)return i;let s=e[n.type.major];if(s.encodedSize){let a=s.encodedSize(n,t),u=new fa(a);if(s(u,n,t),u.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return Ih(u.chunks[0])}}return Lh.reset(),Q1(Lh,n,e,t),Lh.toBytes(!0)}function Uh(r,e){return e=Object.assign({},zw,e),Jw(r,Z1,e)}var Vw={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},$h=class{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){let e=this.data[this.pos],t=un[e];if(t===void 0){let n=ve[e];if(!n)throw new Error(`${ze} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let i=e&31;t=n(this.data,this.pos,i,this.options)}return this.pos+=t.encodedLength,t}},la=Symbol.for("DONE"),Gf=Symbol.for("BREAK");function Ww(r,e,t){let n=[];for(let i=0;i<r.value;i++){let s=da(e,t);if(s===Gf){if(r.value===1/0)break;throw new Error(`${ze} got unexpected break to lengthed array`)}if(s===la)throw new Error(`${ze} found array but not enough entries (got ${i}, expected ${r.value})`);n[i]=s}return n}function Yw(r,e,t){let n=t.useMaps===!0,i=n?void 0:{},s=n?new Map:void 0;for(let a=0;a<r.value;a++){let u=da(e,t);if(u===Gf){if(r.value===1/0)break;throw new Error(`${ze} got unexpected break to lengthed map`)}if(u===la)throw new Error(`${ze} found map but not enough entries (got ${a} [no key], expected ${r.value})`);if(n!==!0&&typeof u!="string")throw new Error(`${ze} non-string keys not supported (got ${typeof u})`);let v=da(e,t);if(v===la)throw new Error(`${ze} found map but not enough entries (got ${a} [no value], expected ${r.value})`);n?s.set(u,v):i[u]=v}return n?s:i}function da(r,e){if(r.done())return la;let t=r.next();if(t.type===fe.break)return Gf;if(t.type.terminal)return t.value;if(t.type===fe.array)return Ww(t,r,e);if(t.type===fe.map)return Yw(t,r,e);if(t.type===fe.tag){if(e.tags&&typeof e.tags[t.value]=="function"){let n=da(r,e);return e.tags[t.value](n)}throw new Error(`${ze} tag not supported (${t.value})`)}throw new Error("unsupported")}function Fh(r,e){if(!(r instanceof Uint8Array))throw new Error(`${ze} data to decode must be a Uint8Array`);e=Object.assign({},Vw,e);let t=e.tokenizer||new $h(r,e),n=da(t,e);if(n===la)throw new Error(`${ze} did not find any content to decode`);if(n===Gf)throw new Error(`${ze} got unexpected break`);if(!t.done())throw new Error(`${ze} too many terminals, data makes no sense`);return n}rr();var em=42;function Zw(r){if(r.asCID!==r)return null;let e=Le.asCID(r);if(!e)return null;let t=new Uint8Array(e.bytes.byteLength+1);return t.set(e.bytes,1),[new Ee(fe.tag,em),new Ee(fe.bytes,t)]}function Qw(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function e5(r){if(Number.isNaN(r))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(r===1/0||r===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var t5={float64:!0,typeEncoders:{Object:Zw,undefined:Qw,number:e5}};function r5(r){if(r[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return Le.decode(r.subarray(1))}var tm={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};tm.tags[em]=r5;var n5="dag-cbor",ss=113,ao=r=>Uh(r,t5),qh=r=>Fh(r,tm);function as(r){try{return r()}catch(e){return e}}rr();var Hh=Je(no(),1);vi();function fo(r){let e=Hh.default.decode(r),t=Hh.default.decode.bytes,n=r.subarray(t);return[e,n,t]}function i5(r){return r===0||r===1}function zh(r){let[e,t]=fo(r);if(!i5(e))throw new Error(`Unknown CID version ${e}`);let[n,i]=fo(t),[,s,a]=fo(i),[u,,v]=fo(s),w=i.subarray(0,a+v+u),E=i.subarray(a+v+u);return[Le.create(e,n,to(w)),E]}rr();yi();function co(r,e="StreamRef"){let[t,n]=fo(r);if(t!==206)throw new Error(`Invalid ${e}, does not include streamid codec`);let[i,s]=fo(n),a=zh(s),[u,v]=a;if(v.length===0)return{kind:"stream-id",type:i,genesis:u};if(v.length===1&&v[0]===0)return{kind:"commit-id",type:i,genesis:u,commit:null};{let[w]=zh(v);return{kind:"commit-id",type:i,genesis:u,commit:w}}}var o5=/(ceramic:\/\/|\/ceramic\/)?([a-zA-Z0-9]+)(\?commit=([a-zA-Z0-9]+))?/;function fs(r,e="StreamRef"){let t=o5.exec(r)||[],n=t[2];if(!n)throw new Error(`Malformed ${e} string: ${r}`);let i=jt.decode(n),s=co(i),a=t[4];return a?{kind:"commit-id",type:s.type,genesis:s.genesis,commit:Kh(s.genesis,a)}:s}function s5(r){try{return typeof r=="string"?Le.parse(r):Le.asCID(r)}catch{return null}}function Kh(r,e=null){if(!e||e==="0")return null;let t=s5(e);if(t)return r.equals(t)?null:t;throw new Error("Cannot specify commit as a number except to request commit 0 (the genesis commit)")}var pa=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Ur=function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},Jh=class extends Error{constructor(e){super(`Invalid StreamID bytes ${jt.encode(e)}: contains commit`)}},Vh=class extends Error{constructor(e){super(`Invalid StreamID string ${e}: contains commit`)}};function im(r){let e=co(r,"StreamID");if(e.kind==="stream-id")return new Ke(e.type,e.genesis);throw new Jh(r)}function a5(r){return as(()=>im(r))}function om(r){let e=fs(r,"StreamID");if(e.kind==="stream-id")return new Ke(e.type,e.genesis);throw new Vh(r)}function f5(r){return as(()=>om(r))}var nm=Symbol.for("@dustil/streamid/StreamID"),Ke=class{constructor(e,t){if(this._tag=nm,!(e||e===0))throw new Error("StreamID constructor: type required");if(!t)throw new Error("StreamID constructor: cid required");this._type=typeof e=="string"?gr.codeByName(e):e,this._cid=typeof t=="string"?Le.parse(t):t}static isInstance(e){return typeof e=="object"&&"_tag"in e&&e._tag===nm}static async fromGenesis(e,t){let n=await jn({value:t,codec:Sr,hasher:Mn});return new Ke(e,n.cid)}get type(){return this._type}get typeName(){return gr.nameByCode(this._type)}get cid(){return this._cid}get bytes(){let e=Gh.default.encode(206),t=Gh.default.encode(this.type);return yr([e,t,this.cid.bytes])}get baseID(){return new Ke(this._type,this._cid)}equals(e){return Ke.isInstance(e)?this.type===e.type&&this.cid.equals(e.cid):!1}toString(){return jt.encode(this.bytes)}toUrl(){return`ceramic://${this.toString()}`}[Symbol.for("nodejs.util.inspect.custom")](){return`StreamID(${this.toString()})`}[Symbol.toPrimitive](){return this.toString()}};Ke.fromBytes=im;Ke.fromBytesNoThrow=a5;Ke.fromString=om;Ke.fromStringNoThrow=f5;pa([xr(),Ur("design:type",String),Ur("design:paramtypes",[])],Ke.prototype,"typeName",null);pa([xr(),Ur("design:type",Uint8Array),Ur("design:paramtypes",[])],Ke.prototype,"bytes",null);pa([xr(),Ur("design:type",Ke),Ur("design:paramtypes",[])],Ke.prototype,"baseID",null);pa([xr(),Ur("design:type",Function),Ur("design:paramtypes",[]),Ur("design:returntype",String)],Ke.prototype,"toString",null);pa([xr(),Ur("design:type",Function),Ur("design:paramtypes",[]),Ur("design:returntype",String)],Ke.prototype,"toUrl",null);var us=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ar=function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},Wh=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Jn=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},cs,uo,ma,Xh=class extends Error{constructor(e){super(`Error while parsing CommitID from bytes ${jt.encode(e)}: no commit information provided`)}},Zh=class extends Error{constructor(e){super(`Error while parsing CommitID from string ${e}: no commit information provided`)}};function am(r){let e=co(r,"CommitID");if(e.kind==="commit-id")return new at(e.type,e.genesis,e.commit);throw new Xh(r)}function c5(r){return as(()=>am(r))}function fm(r){let e=fs(r,"CommitID");if(e.kind==="commit-id")return new at(e.type,e.genesis,e.commit);throw new Zh(r)}function u5(r){return as(()=>fm(r))}var sm=Symbol.for("@dustil/streamid/CommitID");function h5(r,e){return new at(r.type,r.cid,e)}var at=class{constructor(e,t,n=null){if(this._tag=sm,cs.set(this,void 0),uo.set(this,void 0),ma.set(this,void 0),!e&&e!==0)throw new Error("constructor: type required");if(!t)throw new Error("constructor: cid required");Wh(this,cs,typeof e=="string"?gr.codeByName(e):e,"f"),Wh(this,uo,typeof t=="string"?Le.parse(t):t,"f"),Wh(this,ma,Kh(Jn(this,uo,"f"),n),"f")}static isInstance(e){return typeof e=="object"&&"_tag"in e&&e._tag===sm}get baseID(){return new Ke(Jn(this,cs,"f"),Jn(this,uo,"f"))}get type(){return Jn(this,cs,"f")}get typeName(){return gr.nameByCode(Jn(this,cs,"f"))}get cid(){return Jn(this,uo,"f")}get commit(){return Jn(this,ma,"f")||Jn(this,uo,"f")}get bytes(){let e=Yh.default.encode(206),t=Yh.default.encode(this.type),n=Jn(this,ma,"f")?.bytes||new Uint8Array([0]);return yr([e,t,this.cid.bytes,n])}equals(e){return this.type===e.type&&this.cid.equals(e.cid)&&this.commit.equals(e.commit)}toString(){return jt.encode(this.bytes)}toUrl(){return`ceramic://${this.toString()}`}[(cs=new WeakMap,uo=new WeakMap,ma=new WeakMap,Symbol.for("nodejs.util.inspect.custom"))](){return`CommitID(${this.toString()})`}[Symbol.toPrimitive](){return this.toString()}};at.fromBytes=am;at.fromBytesNoThrow=c5;at.fromString=fm;at.fromStringNoThrow=u5;at.make=h5;us([xr(),ar("design:type",Ke),ar("design:paramtypes",[])],at.prototype,"baseID",null);us([xr(),ar("design:type",String),ar("design:paramtypes",[])],at.prototype,"typeName",null);us([xr(),ar("design:type",Le),ar("design:paramtypes",[])],at.prototype,"commit",null);us([xr(),ar("design:type",Uint8Array),ar("design:paramtypes",[])],at.prototype,"bytes",null);us([xr(),ar("design:type",Function),ar("design:paramtypes",[]),ar("design:returntype",String)],at.prototype,"toString",null);us([xr(),ar("design:type",Function),ar("design:paramtypes",[]),ar("design:returntype",String)],at.prototype,"toUrl",null);yi();var Ar;(function(r){function e(i){let s=co(i);switch(s.kind){case"commit-id":return new at(s.type,s.genesis,s.commit);case"stream-id":return new Ke(s.type,s.genesis);default:throw new Error(`Malformed StreamRef bytes: ${jt.encode(i)}`)}}r.fromBytes=e;function t(i){let s=fs(i);switch(s.kind){case"commit-id":return new at(s.type,s.genesis,s.commit);case"stream-id":return new Ke(s.type,s.genesis);default:throw new Error(`Malformed StreamRef string: ${i}`)}}r.fromString=t;function n(i){if(Ke.isInstance(i)||at.isInstance(i))return i;if(i instanceof Uint8Array)return e(i);if(typeof i=="string")return t(i);throw new Error(`Can not build CommitID or StreamID from ${JSON.stringify(i)}`)}r.from=n})(Ar||(Ar={}));function Qh(r){return typeof r=="string"?Ke.fromString(r):r}function cm(r,e){let t=new URL(r);for(let[n,i]of Object.entries(e))Ke.isInstance(i)?t.searchParams.set(n,i.toString()):typeof i=="object"?t.searchParams.set(n,JSON.stringify(i)):t.searchParams.set(n,i);return t}function el(r){let e={};for(let[t,n]of Object.entries(r))Ke.isInstance(n)?e[t]=n.toString():e[t]=n;return e}var tl=function(r,e){return tl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},tl(r,e)};function Gt(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");tl(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function um(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(E){try{w(n.next(E))}catch(M){a(M)}}function v(E){try{w(n.throw(E))}catch(M){a(M)}}function w(E){E.done?s(E.value):i(E.value).then(u,v)}w((n=n.apply(r,e||[])).next())})}function Jf(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(w){return function(E){return v([w,E])}}function v(w){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,w[0]&&(t=0)),t;)try{if(n=1,i&&(s=w[0]&2?i.return:w[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,w[1])).done)return s;switch(i=0,s&&(w=[w[0]&2,s.value]),w[0]){case 0:case 1:s=w;break;case 4:return t.label++,{value:w[1],done:!1};case 5:t.label++,i=w[1],w=[0];continue;case 7:w=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(w[0]===6||w[0]===2)){t=0;continue}if(w[0]===3&&(!s||w[1]>s[0]&&w[1]<s[3])){t.label=w[1];break}if(w[0]===6&&t.label<s[1]){t.label=s[1],s=w;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(w);break}s[2]&&t.ops.pop(),t.trys.pop();continue}w=e.call(r,t)}catch(E){w=[6,E],i=0}finally{n=s=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}}function Vn(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Tr(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return s}function hn(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))}function ho(r){return this instanceof ho?(this.v=r,this):new ho(r)}function hm(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(k){n[k]&&(i[k]=function(D){return new Promise(function(T,C){s.push([k,D,T,C])>1||u(k,D)})})}function u(k,D){try{v(n[k](D))}catch(T){M(s[0][3],T)}}function v(k){k.value instanceof ho?Promise.resolve(k.value.v).then(w,E):M(s[0][2],k)}function w(k){u("next",k)}function E(k){u("throw",k)}function M(k,D){k(D),s.shift(),s.length&&u(s[0][0],s[0][1])}}function lm(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof Vn=="function"?Vn(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=r[s]&&function(a){return new Promise(function(u,v){a=r[s](a),i(u,v,a.done,a.value)})}}function i(s,a,u,v){Promise.resolve(v).then(function(w){s({value:w,done:u})},a)}}function Ve(r){return typeof r=="function"}function hs(r){var e=function(n){Error.call(n),n.stack=new Error().stack},t=r(e);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Vf=hs(function(r){return function(t){r(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function lo(r,e){if(r){var t=r.indexOf(e);0<=t&&r.splice(t,1)}}var Ei=function(){function r(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return r.prototype.unsubscribe=function(){var e,t,n,i,s;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var u=Vn(a),v=u.next();!v.done;v=u.next()){var w=v.value;w.remove(this)}}catch(C){e={error:C}}finally{try{v&&!v.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}else a.remove(this);var E=this.initialTeardown;if(Ve(E))try{E()}catch(C){s=C instanceof Vf?C.errors:[C]}var M=this._finalizers;if(M){this._finalizers=null;try{for(var k=Vn(M),D=k.next();!D.done;D=k.next()){var T=D.value;try{dm(T)}catch(C){s=s??[],C instanceof Vf?s=hn(hn([],Tr(s)),Tr(C.errors)):s.push(C)}}}catch(C){n={error:C}}finally{try{D&&!D.done&&(i=k.return)&&i.call(k)}finally{if(n)throw n.error}}}if(s)throw new Vf(s)}},r.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)dm(e);else{if(e instanceof r){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}},r.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},r.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},r.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&lo(t,e)},r.prototype.remove=function(e){var t=this._finalizers;t&&lo(t,e),e instanceof r&&e._removeParent(this)},r.EMPTY=function(){var e=new r;return e.closed=!0,e}(),r}();var rl=Ei.EMPTY;function Wf(r){return r instanceof Ei||r&&"closed"in r&&Ve(r.remove)&&Ve(r.add)&&Ve(r.unsubscribe)}function dm(r){Ve(r)?r():r.unsubscribe()}var ln={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ls={setTimeout:function(r,e){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];var i=ls.delegate;return i?.setTimeout?i.setTimeout.apply(i,hn([r,e],Tr(t))):setTimeout.apply(void 0,hn([r,e],Tr(t)))},clearTimeout:function(r){var e=ls.delegate;return(e?.clearTimeout||clearTimeout)(r)},delegate:void 0};function Yf(r){ls.setTimeout(function(){var e=ln.onUnhandledError;if(e)e(r);else throw r})}function nl(){}var pm=function(){return il("C",void 0,void 0)}();function mm(r){return il("E",void 0,r)}function bm(r){return il("N",r,void 0)}function il(r,e,t){return{kind:r,value:e,error:t}}var po=null;function ds(r){if(ln.useDeprecatedSynchronousErrorHandling){var e=!po;if(e&&(po={errorThrown:!1,error:null}),r(),e){var t=po,n=t.errorThrown,i=t.error;if(po=null,n)throw i}}else r()}function vm(r){ln.useDeprecatedSynchronousErrorHandling&&po&&(po.errorThrown=!0,po.error=r)}var ba=function(r){Gt(e,r);function e(t){var n=r.call(this)||this;return n.isStopped=!1,t?(n.destination=t,Wf(t)&&t.add(n)):n.destination=m5,n}return e.create=function(t,n,i){return new Zf(t,n,i)},e.prototype.next=function(t){this.isStopped?sl(bm(t),this):this._next(t)},e.prototype.error=function(t){this.isStopped?sl(mm(t),this):(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped?sl(pm,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Ei);var l5=Function.prototype.bind;function ol(r,e){return l5.call(r,e)}var d5=function(){function r(e){this.partialObserver=e}return r.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(n){Xf(n)}},r.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(n){Xf(n)}else Xf(e)},r.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){Xf(t)}},r}(),Zf=function(r){Gt(e,r);function e(t,n,i){var s=r.call(this)||this,a;if(Ve(t)||!t)a={next:t??void 0,error:n??void 0,complete:i??void 0};else{var u;s&&ln.useDeprecatedNextContext?(u=Object.create(t),u.unsubscribe=function(){return s.unsubscribe()},a={next:t.next&&ol(t.next,u),error:t.error&&ol(t.error,u),complete:t.complete&&ol(t.complete,u)}):a=t}return s.destination=new d5(a),s}return e}(ba);function Xf(r){ln.useDeprecatedSynchronousErrorHandling?vm(r):Yf(r)}function p5(r){throw r}function sl(r,e){var t=ln.onStoppedNotification;t&&ls.setTimeout(function(){return t(r,e)})}var m5={closed:!0,next:nl,error:p5,complete:nl};var ps=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function ms(r){return r}function gm(r){return r.length===0?ms:r.length===1?r[0]:function(t){return r.reduce(function(n,i){return i(n)},t)}}var it=function(){function r(e){e&&(this._subscribe=e)}return r.prototype.lift=function(e){var t=new r;return t.source=this,t.operator=e,t},r.prototype.subscribe=function(e,t,n){var i=this,s=v5(e)?e:new Zf(e,t,n);return ds(function(){var a=i,u=a.operator,v=a.source;s.add(u?u.call(s,v):v?i._subscribe(s):i._trySubscribe(s))}),s},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},r.prototype.forEach=function(e,t){var n=this;return t=ym(t),new t(function(i,s){var a=new Zf({next:function(u){try{e(u)}catch(v){s(v),a.unsubscribe()}},error:s,complete:i});n.subscribe(a)})},r.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)},r.prototype[ps]=function(){return this},r.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return gm(e)(this)},r.prototype.toPromise=function(e){var t=this;return e=ym(e),new e(function(n,i){var s;t.subscribe(function(a){return s=a},function(a){return i(a)},function(){return n(s)})})},r.create=function(e){return new r(e)},r}();function ym(r){var e;return(e=r??ln.Promise)!==null&&e!==void 0?e:Promise}function b5(r){return r&&Ve(r.next)&&Ve(r.error)&&Ve(r.complete)}function v5(r){return r&&r instanceof ba||b5(r)&&Wf(r)}function g5(r){return Ve(r?.lift)}function St(r){return function(e){if(g5(e))return e.lift(function(t){try{return r(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function At(r,e,t,n,i){return new y5(r,e,t,n,i)}var y5=function(r){Gt(e,r);function e(t,n,i,s,a,u){var v=r.call(this,t)||this;return v.onFinalize=a,v.shouldUnsubscribe=u,v._next=n?function(w){try{n(w)}catch(E){t.error(E)}}:r.prototype._next,v._error=s?function(w){try{s(w)}catch(E){t.error(E)}finally{this.unsubscribe()}}:r.prototype._error,v._complete=i?function(){try{i()}catch(w){t.error(w)}finally{this.unsubscribe()}}:r.prototype._complete,v}return e.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;r.prototype.unsubscribe.call(this),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},e}(ba);var xm=hs(function(r){return function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}});var al=function(r){Gt(e,r);function e(){var t=r.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return e.prototype.lift=function(t){var n=new wm(this,this);return n.operator=t,n},e.prototype._throwIfClosed=function(){if(this.closed)throw new xm},e.prototype.next=function(t){var n=this;ds(function(){var i,s;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var a=Vn(n.currentObservers),u=a.next();!u.done;u=a.next()){var v=u.value;v.next(t)}}catch(w){i={error:w}}finally{try{u&&!u.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}}})},e.prototype.error=function(t){var n=this;ds(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=t;for(var i=n.observers;i.length;)i.shift().error(t)}})},e.prototype.complete=function(){var t=this;ds(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var n=t.observers;n.length;)n.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(t){return this._throwIfClosed(),r.prototype._trySubscribe.call(this,t)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var n=this,i=this,s=i.hasError,a=i.isStopped,u=i.observers;return s||a?rl:(this.currentObservers=null,u.push(t),new Ei(function(){n.currentObservers=null,lo(u,t)}))},e.prototype._checkFinalizedStatuses=function(t){var n=this,i=n.hasError,s=n.thrownError,a=n.isStopped;i?t.error(s):a&&t.complete()},e.prototype.asObservable=function(){var t=new it;return t.source=this,t},e.create=function(t,n){return new wm(t,n)},e}(it);var wm=function(r){Gt(e,r);function e(t,n){var i=r.call(this)||this;return i.destination=t,i.source=n,i}return e.prototype.next=function(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,t)},e.prototype.error=function(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,t)},e.prototype.complete=function(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)},e.prototype._subscribe=function(t){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&i!==void 0?i:rl},e}(al);var va=function(r){Gt(e,r);function e(t){var n=r.call(this)||this;return n._value=t,n}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(t){var n=r.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},e.prototype.getValue=function(){var t=this,n=t.hasError,i=t.thrownError,s=t._value;if(n)throw i;return this._throwIfClosed(),s},e.prototype.next=function(t){r.prototype.next.call(this,this._value=t)},e}(al);var fl={now:function(){return(fl.delegate||Date).now()},delegate:void 0};var Em=function(r){Gt(e,r);function e(t,n){return r.call(this)||this}return e.prototype.schedule=function(t,n){return n===void 0&&(n=0),this},e}(Ei);var ga={setInterval:function(r,e){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];var i=ga.delegate;return i?.setInterval?i.setInterval.apply(i,hn([r,e],Tr(t))):setInterval.apply(void 0,hn([r,e],Tr(t)))},clearInterval:function(r){var e=ga.delegate;return(e?.clearInterval||clearInterval)(r)},delegate:void 0};var _m=function(r){Gt(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.pending=!1,i}return e.prototype.schedule=function(t,n){var i;if(n===void 0&&(n=0),this.closed)return this;this.state=t;var s=this.id,a=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(a,s,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(a,this.id,n),this},e.prototype.requestAsyncId=function(t,n,i){return i===void 0&&(i=0),ga.setInterval(t.flush.bind(t,this),i)},e.prototype.recycleAsyncId=function(t,n,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&ga.clearInterval(n)},e.prototype.execute=function(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,n){var i=!1,s;try{this.work(t)}catch(a){i=!0,s=a||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s},e.prototype.unsubscribe=function(){if(!this.closed){var t=this,n=t.id,i=t.scheduler,s=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,lo(s,this),n!=null&&(this.id=this.recycleAsyncId(i,n,null)),this.delay=null,r.prototype.unsubscribe.call(this)}},e}(Em);var cl=function(){function r(e,t){t===void 0&&(t=r.now),this.schedulerActionCtor=e,this.now=t}return r.prototype.schedule=function(e,t,n){return t===void 0&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},r.now=fl.now,r}();var Mm=function(r){Gt(e,r);function e(t,n){n===void 0&&(n=cl.now);var i=r.call(this,t,n)||this;return i.actions=[],i._active=!1,i}return e.prototype.flush=function(t){var n=this.actions;if(this._active){n.push(t);return}var i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,i){for(;t=n.shift();)t.unsubscribe();throw i}},e}(cl);var x5=new Mm(_m),Sm=x5;var Qf=new it(function(r){return r.complete()});function ec(r){return r&&Ve(r.schedule)}function Am(r){return r[r.length-1]}function Tm(r){return ec(Am(r))?r.pop():void 0}function km(r,e){return typeof Am(r)=="number"?r.pop():e}var bs=function(r){return r&&typeof r.length=="number"&&typeof r!="function"};function tc(r){return Ve(r?.then)}function rc(r){return Ve(r[ps])}function nc(r){return Symbol.asyncIterator&&Ve(r?.[Symbol.asyncIterator])}function ic(r){return new TypeError("You provided "+(r!==null&&typeof r=="object"?"an invalid object":"'"+r+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function w5(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var oc=w5();function sc(r){return Ve(r?.[oc])}function ac(r){return hm(this,arguments,function(){var t,n,i,s;return Jf(this,function(a){switch(a.label){case 0:t=r.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,ho(t.read())];case 3:return n=a.sent(),i=n.value,s=n.done,s?[4,ho(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,ho(i)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function fc(r){return Ve(r?.getReader)}function Jt(r){if(r instanceof it)return r;if(r!=null){if(rc(r))return E5(r);if(bs(r))return _5(r);if(tc(r))return M5(r);if(nc(r))return Cm(r);if(sc(r))return S5(r);if(fc(r))return A5(r)}throw ic(r)}function E5(r){return new it(function(e){var t=r[ps]();if(Ve(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function _5(r){return new it(function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()})}function M5(r){return new it(function(e){r.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,Yf)})}function S5(r){return new it(function(e){var t,n;try{for(var i=Vn(r),s=i.next();!s.done;s=i.next()){var a=s.value;if(e.next(a),e.closed)return}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}e.complete()})}function Cm(r){return new it(function(e){T5(r,e).catch(function(t){return e.error(t)})})}function A5(r){return Cm(ac(r))}function T5(r,e){var t,n,i,s;return um(this,void 0,void 0,function(){var a,u;return Jf(this,function(v){switch(v.label){case 0:v.trys.push([0,5,6,11]),t=lm(r),v.label=1;case 1:return[4,t.next()];case 2:if(n=v.sent(),!!n.done)return[3,4];if(a=n.value,e.next(a),e.closed)return[2];v.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return u=v.sent(),i={error:u},[3,11];case 6:return v.trys.push([6,,9,10]),n&&!n.done&&(s=t.return)?[4,s.call(t)]:[3,8];case 7:v.sent(),v.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function $r(r,e,t,n,i){n===void 0&&(n=0),i===void 0&&(i=!1);var s=e.schedule(function(){t(),i?r.add(this.schedule(null,n)):this.unsubscribe()},n);if(r.add(s),!i)return s}function cc(r,e){return e===void 0&&(e=0),St(function(t,n){t.subscribe(At(n,function(i){return $r(n,r,function(){return n.next(i)},e)},function(){return $r(n,r,function(){return n.complete()},e)},function(i){return $r(n,r,function(){return n.error(i)},e)}))})}function uc(r,e){return e===void 0&&(e=0),St(function(t,n){n.add(r.schedule(function(){return t.subscribe(n)},e))})}function Dm(r,e){return Jt(r).pipe(uc(e),cc(e))}function Im(r,e){return Jt(r).pipe(uc(e),cc(e))}function Om(r,e){return new it(function(t){var n=0;return e.schedule(function(){n===r.length?t.complete():(t.next(r[n++]),t.closed||this.schedule())})})}function Rm(r,e){return new it(function(t){var n;return $r(t,e,function(){n=r[oc](),$r(t,e,function(){var i,s,a;try{i=n.next(),s=i.value,a=i.done}catch(u){t.error(u);return}a?t.complete():t.next(s)},0,!0)}),function(){return Ve(n?.return)&&n.return()}})}function hc(r,e){if(!r)throw new Error("Iterable cannot be null");return new it(function(t){$r(t,e,function(){var n=r[Symbol.asyncIterator]();$r(t,e,function(){n.next().then(function(i){i.done?t.complete():t.next(i.value)})},0,!0)})})}function Nm(r,e){return hc(ac(r),e)}function Pm(r,e){if(r!=null){if(rc(r))return Dm(r,e);if(bs(r))return Om(r,e);if(tc(r))return Im(r,e);if(nc(r))return hc(r,e);if(sc(r))return Rm(r,e);if(fc(r))return Nm(r,e)}throw ic(r)}function Bm(r,e){return e?Pm(r,e):Jt(r)}var lc=hs(function(r){return function(){r(this),this.name="EmptyError",this.message="no elements in sequence"}});function Lm(r){return r instanceof Date&&!isNaN(r)}function dc(r,e){return St(function(t,n){var i=0;t.subscribe(At(n,function(s){n.next(r.call(e,s,i++))}))})}var k5=Array.isArray;function C5(r,e){return k5(e)?r.apply(void 0,hn([],Tr(e))):r(e)}function Um(r){return dc(function(e){return C5(r,e)})}function $m(r,e,t,n,i,s,a,u){var v=[],w=0,E=0,M=!1,k=function(){M&&!v.length&&!w&&e.complete()},D=function(C){return w<n?T(C):v.push(C)},T=function(C){s&&e.next(C),w++;var z=!1;Jt(t(C,E++)).subscribe(At(e,function(I){i?.(I),s?D(I):e.next(I)},function(){z=!0},void 0,function(){if(z)try{w--;for(var I=function(){var q=v.shift();a?$r(e,a,function(){return T(q)}):T(q)};v.length&&w<n;)I();k()}catch(q){e.error(q)}}))};return r.subscribe(At(e,D,function(){M=!0,k()})),function(){u?.()}}function ya(r,e,t){return t===void 0&&(t=1/0),Ve(e)?ya(function(n,i){return dc(function(s,a){return e(n,s,i,a)})(Jt(r(n,i)))},t):(typeof e=="number"&&(t=e),St(function(n,i){return $m(n,i,r,t)}))}function Fm(r){return r===void 0&&(r=1/0),ya(ms,r)}var D5=["addListener","removeListener"],I5=["addEventListener","removeEventListener"],O5=["on","off"];function xa(r,e,t,n){if(Ve(t)&&(n=t,t=void 0),n)return xa(r,e,t).pipe(Um(n));var i=Tr(P5(r)?I5.map(function(u){return function(v){return r[u](e,v,t)}}):R5(r)?D5.map(qm(r,e)):N5(r)?O5.map(qm(r,e)):[],2),s=i[0],a=i[1];if(!s&&bs(r))return ya(function(u){return xa(u,e,t)})(Jt(r));if(!s)throw new TypeError("Invalid event target");return new it(function(u){var v=function(){for(var w=[],E=0;E<arguments.length;E++)w[E]=arguments[E];return u.next(1<w.length?w:w[0])};return s(v),function(){return a(v)}})}function qm(r,e){return function(t){return function(n){return r[t](e,n)}}}function R5(r){return Ve(r.addListener)&&Ve(r.removeListener)}function N5(r){return Ve(r.on)&&Ve(r.off)}function P5(r){return Ve(r.addEventListener)&&Ve(r.removeEventListener)}function mo(r,e,t){r===void 0&&(r=0),t===void 0&&(t=Sm);var n=-1;return e!=null&&(ec(e)?t=e:n=e),new it(function(i){var s=Lm(r)?+r-t.now():r;s<0&&(s=0);var a=0;return t.schedule(function(){i.closed||(i.next(a++),0<=n?this.schedule(void 0,n):i.complete())},s)})}function ul(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=Tm(r),n=km(r,1/0),i=r;return i.length?i.length===1?Jt(i[0]):Fm(n)(Bm(i,t)):Qf}function Hm(r,e){return St(function(t,n){var i=0;t.subscribe(At(n,function(s){return r.call(e,s,i++)&&n.next(s)}))})}function zm(r){return St(function(e,t){var n=!1;e.subscribe(At(t,function(i){n=!0,t.next(i)},function(){n||t.next(r),t.complete()}))})}function Km(r){return r<=0?function(){return Qf}:St(function(e,t){var n=0;e.subscribe(At(t,function(i){++n<=r&&(t.next(i),r<=n&&t.complete())}))})}function jm(r){return r===void 0&&(r=B5),St(function(e,t){var n=!1;e.subscribe(At(t,function(i){n=!0,t.next(i)},function(){return n?t.complete():t.error(r())}))})}function B5(){return new lc}function hl(r,e){var t=arguments.length>=2;return function(n){return n.pipe(r?Hm(function(i,s){return r(i,s,n)}):ms,Km(1),t?zm(e):jm(function(){return new lc}))}}var L5={leading:!0,trailing:!1};function ll(r,e){return e===void 0&&(e=L5),St(function(t,n){var i=e.leading,s=e.trailing,a=!1,u=null,v=null,w=!1,E=function(){v?.unsubscribe(),v=null,s&&(D(),w&&n.complete())},M=function(){v=null,w&&n.complete()},k=function(T){return v=Jt(r(T)).subscribe(At(n,E,M))},D=function(){if(a){a=!1;var T=u;u=null,n.next(T),!w&&k(T)}};t.subscribe(At(n,function(T){a=!0,u=T,!(v&&!v.closed)&&(i?D():k(T))},function(){w=!0,!(s&&a&&v&&!v.closed)&&n.complete()}))})}var lt;(function(r){r[r.PREFER_CACHE=0]="PREFER_CACHE",r[r.SYNC_ALWAYS=1]="SYNC_ALWAYS",r[r.NEVER_SYNC=2]="NEVER_SYNC"})(lt||(lt={}));var Tl=Je(yo(),1);var Rb;(function(r){r[r.GENESIS=0]="GENESIS",r[r.PARTIAL=1]="PARTIAL",r[r.SIGNED=2]="SIGNED"})(Rb||(Rb={}));var Ma;(function(r){r[r.NOT_REQUESTED=0]="NOT_REQUESTED",r[r.PENDING=1]="PENDING",r[r.PROCESSING=2]="PROCESSING",r[r.ANCHORED=3]="ANCHORED",r[r.FAILED=4]="FAILED"})(Ma||(Ma={}));var kl;(function(r){r[r.GENESIS=0]="GENESIS",r[r.SIGNED=1]="SIGNED",r[r.ANCHOR=2]="ANCHOR"})(kl||(kl={}));var Tn=class extends it{constructor(e,t){super(n=>{e.subscribe(n)}),this.state$=e,this._context=t}get id(){return new Ke(this.state$.value.type,this.state$.value.log[0].cid)}get api(){return this._context.api}get content(){let{next:e,content:t}=this.state$.value;return(0,Tl.default)(e?.content??t)}get tip(){return this.state$.value.log[this.state$.value.log.length-1].cid}get commitId(){return at.make(this.id,this.tip)}get allCommitIds(){return this.state$.value.log.map(({cid:e})=>at.make(this.id,e))}get anchorCommitIds(){return this.state$.value.log.filter(({type:e})=>e===kl.ANCHOR).map(({cid:e})=>at.make(this.id,e))}get state(){return(0,Tl.default)(this.state$.value)}async sync(e={}){e={sync:lt.PREFER_CACHE,...e};let t=await this.api.loadStream(this.id,e);this.state$.next(t.state)}async requestAnchor(){return this.api.requestAnchor(this.id)}};function Mi(){return r=>{}}var $b=Je(Bb(),1);function Lb(r){let e=new AbortController;if(r.length===0)throw Error("Need abort signals to create a merged abort signal");return r.some(t=>t.aborted)?(e.abort(),e.signal):(ul(...r.map(t=>xa(t,"abort"))).pipe(hl()).subscribe(()=>{e.abort()}),e.signal)}var _c=class{constructor(e){let t=new AbortController;if(this.signal=t.signal,e<=0){t.abort();return}this._subscription=mo(e).subscribe(()=>{t.abort()})}clear(){this._subscription?.unsubscribe()}};async function Ub(r,e){let t=new AbortController,n=()=>{t.abort()};return r.addEventListener("abort",n),r.aborted&&t.abort(),e(t.signal).finally(()=>{r.removeEventListener("abort",n)})}var h9=60*1e3*3;async function Rt(r,e={}){e.body&&Object.assign(e,{body:JSON.stringify(e.body),headers:{...e.headers,"Content-Type":"application/json"}});let t=e.timeout||h9,n=new _c(t),i=e.signal?Lb([e.signal,n.signal]):n.signal,s=await Ub(i,a=>(0,$b.default)(String(r),{...e,signal:a,credentials:"include"})).finally(()=>n.clear());if(!s.ok){let a=await s.text();throw new Error(`HTTP request to '${r}' failed with status '${s.statusText}': ${a}`)}return s.json()}var Sa=Je(yo(),1);rr();function Zn(r){let e=Le.asCID(r);if(e)return e;if(typeof r=="string")return Le.parse(r);if(r instanceof Uint8Array)return Le.decode(r);throw new Error(`${r} cannot be converted to a CID`)}var Fb=0,ot=class{static streamIdFromState(e){return new Ke(e.type,e.log[0].cid)}static serializeCommit(e){let t=(0,Sa.default)(e);return ot.isSignedCommitContainer(t)?(t.jws.link=t.jws.link.toString(),t.linkedBlock=Ge(t.linkedBlock,"base64"),t.cacaoBlock&&(t.cacaoBlock=Ge(t.cacaoBlock,"base64")),t):(ot.isSignedCommit(e)&&(t.link=t.link.toString()),ot.isAnchorCommit(e)&&(t.proof=t.proof.toString()),t.id&&(t.id=t.id.toString()),t.prev&&(t.prev=t.prev.toString()),e.header?.model&&(t.header.model=Ge(e.header.model,"base64")),t)}static deserializeCommit(e){let t=(0,Sa.default)(e);return ot.isSignedCommitContainer(t)?(t.jws.link=Zn(t.jws.link),t.linkedBlock=He(t.linkedBlock,"base64"),t.cacaoBlock&&(t.cacaoBlock=He(t.cacaoBlock,"base64")),t):(ot.isSignedCommit(t)&&(t.link=Zn(t.link)),ot.isAnchorCommit(t)&&(t.proof=Zn(t.proof)),t.id&&(t.id=Zn(t.id)),t.prev&&(t.prev=Zn(t.prev)),t.header?.model&&(t.header.model=He(t.header.model,"base64")),t)}static serializeState(e){let t=(0,Sa.default)(e);return t.log=t.log.map(n=>({...n,cid:n.cid.toString()})),t.anchorStatus!=null&&(t.anchorStatus=Ma[t.anchorStatus]),t.anchorProof!=null&&(t.anchorProof.txHash=t.anchorProof.txHash.toString(),t.anchorProof.root=t.anchorProof.root.toString()),e.metadata?.model&&(t.metadata.model=e.metadata.model.toString()),e.next?.metadata?.model&&(t.next.metadata.model=e.next.metadata.model.toString()),e.metadata?.unique&&e.type!=Fb&&(t.metadata.unique=Ge(t.metadata.unique,"base64")),t.doctype=gr.nameByCode(t.type),t}static deserializeState(e){if(!e)return null;let t=(0,Sa.default)(e);return t.doctype&&(t.type=gr.codeByName(t.doctype),delete t.doctype),t.log=t.log.map(n=>({...n,cid:Zn(n.cid)})),t.anchorProof&&(t.anchorProof.txHash=Zn(t.anchorProof.txHash),t.anchorProof.root=Zn(t.anchorProof.root)),t.anchorStatus&&(t.anchorStatus=Ma[t.anchorStatus]),e.metadata?.model&&(t.metadata.model=Ke.fromString(e.metadata.model)),e.next?.metadata?.model&&(t.next.metadata.model=Ke.fromString(e.next.metadata.model)),e.metadata?.unique&&e.type!=Fb&&(t.metadata.unique=He(e.metadata.unique,"base64")),t}static statesEqual(e,t){return JSON.stringify(ot.serializeState(e))===JSON.stringify(ot.serializeState(t))}static isStateSupersetOf(e,t){if(e.log.length<t.log.length)return!1;for(let n in t.log)if(!e.log[n].cid.equals(t.log[n].cid))return!1;return!(e.log.length===t.log.length&&e.anchorStatus!=t.anchorStatus)}static assertCommitLinksToState(e,t){let n=this.streamIdFromState(e);if(t.id&&!t.id.equals(e.log[0].cid))throw new Error(`Invalid genesis CID in commit for StreamID ${n.toString()}. Found: ${t.id}, expected ${e.log[0].cid}`);let i=e.log[e.log.length-1].cid;if(!t.prev.equals(i))throw new Error(`Commit doesn't properly point to previous commit in log. Expected ${i}, found 'prev' ${t.prev}`)}static async convertCommitToSignedCommitContainer(e,t){if(ot.isSignedCommit(e)){let n=await t.block.get(e.link);return{jws:e,linkedBlock:n}}return e}static isSignedCommitContainer(e){return e&&e.jws!==void 0}static isSignedCommit(e){return e&&e.link!==void 0}static isAnchorCommit(e){return e&&e.proof!==void 0}static isSignedCommitData(e){return e&&e.envelope!==void 0}static isAnchorCommitData(e){return e&&e.proof!==void 0}static commitDataToLogEntry(e,t){let n={cid:e.cid,type:t};return e?.capability?.p?.exp&&(n.expirationTime=Math.floor(Date.parse(e.capability.p.exp)/1e3)),e.timestamp&&(n.timestamp=e.timestamp),n}static checkForCacaoExpiration(e){let t=Math.floor(Date.now()/1e3);for(let n of e.log){let i=n.timestamp??t;if(n.expirationTime&&n.expirationTime<i)throw new Error(`CACAO expired: Commit ${n.cid.toString()} of Stream ${ot.streamIdFromState(e).toString()} has a CACAO that expired at ${n.expirationTime}. Loading the stream with 'sync: SyncOptions.ALWAYS_SYNC' will restore the stream to a usable state, by discarding the invalid commits (this means losing the data from those invalid writes!)`)}}};function $l(){return $l=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},$l.apply(this,arguments)}var Fl={name:"chainId",regex:"[-:a-zA-Z0-9]{5,41}",parameters:{delimiter:":",values:{0:{name:"namespace",regex:"[-a-z0-9]{3,8}"},1:{name:"reference",regex:"[-a-zA-Z0-9]{1,32}"}}}},G9={name:"accountId",regex:"[-:a-zA-Z0-9]{7,106}",parameters:{delimiter:":",values:{0:{name:"namespace",regex:"[-a-z0-9]{3,8}"},1:{name:"reference",regex:"[-a-zA-Z0-9]{1,32}"},2:{name:"address",regex:"[a-zA-Z0-9]{1,64}"}}}},ql={name:"assetName",regex:"[-:a-zA-Z0-9]{5,73}",parameters:{delimiter:":",values:{0:{name:"namespace",regex:"[-a-z0-9]{3,8}"},1:{name:"reference",regex:"[-a-zA-Z0-9]{1,64}"}}}},J9={name:"assetType",regex:"[-:a-zA-Z0-9]{11,115}",parameters:{delimiter:"/",values:{0:Fl,1:ql}}},V9={name:"assetId",regex:"[-:a-zA-Z0-9]{13,148}",parameters:{delimiter:"/",values:{0:Fl,1:ql,2:{name:"tokenId",regex:"[-a-zA-Z0-9]{1,32}"}}}},Aa={2:Fl,10:G9,19:{assetName:ql,assetType:J9,assetId:V9}};function e2(r,e){return r.split(e.parameters.delimiter)}function Ta(r,e){var t=e2(r,e),n={};return t.forEach(function(i,s){n[e.parameters.values[s].name]=i}),n}function Es(r,e){return Object.values(e.parameters.values).map(function(t){var n=r[t.name];return typeof n=="string"?n:Es(n,t)}).join(e.parameters.delimiter)}function ka(r,e){if(!new RegExp(e.regex).test(r))return!1;var t=e2(r,e);if(t.length!==Object.keys(e.parameters.values).length)return!1;var n=t.map(function(i,s){return new RegExp(e.parameters.values[s].regex).test(i)}).filter(function(i){return!!i});return n.length===t.length}var Ai=function(){function r(t){typeof t=="string"&&(t=r.parse(t)),this.namespace=t.namespace,this.reference=t.reference}r.parse=function(n){if(!ka(n,this.spec))throw new Error("Invalid "+this.spec.name+" provided: "+n);return new r(Ta(n,this.spec)).toJSON()},r.format=function(n){return Es(n,this.spec)};var e=r.prototype;return e.toString=function(){return r.format(this.toJSON())},e.toJSON=function(){return{namespace:this.namespace,reference:this.reference}},r}();Ai.spec=Aa[2];var Ti=function(){function r(t){typeof t=="string"&&(t=r.parse(t)),this.chainId=new Ai(t.chainId),this.address=t.address}r.parse=function(n){if(!ka(n,this.spec))throw new Error("Invalid "+this.spec.name+" provided: "+n);var i=Ta(n,this.spec),s=i.namespace,a=i.reference,u=i.address,v=new Ai({namespace:s,reference:a});return new r({chainId:v,address:u}).toJSON()},r.format=function(n){var i=new Ai(n.chainId),s=$l({},i.toJSON(),{address:n.address});return Es(s,this.spec)};var e=r.prototype;return e.toString=function(){return r.format(this.toJSON())},e.toJSON=function(){return{chainId:this.chainId.toJSON(),address:this.address}},r}();Ti.spec=Aa[10];var Hl=function(){function r(t){typeof t=="string"&&(t=r.parse(t)),this.namespace=t.namespace,this.reference=t.reference}r.parse=function(n){if(!ka(n,this.spec))throw new Error("Invalid "+this.spec.name+" provided: "+n);return new r(Ta(n,this.spec)).toJSON()},r.format=function(n){return Es(n,this.spec)};var e=r.prototype;return e.toString=function(){return r.format(this.toJSON())},e.toJSON=function(){return{namespace:this.namespace,reference:this.reference}},r}();Hl.spec=Aa[19].assetName;var W9=function(){function r(t){typeof t=="string"&&(t=r.parse(t)),this.chainId=new Ai(t.chainId),this.assetName=new Hl(t.assetName)}r.parse=function(n){if(!ka(n,this.spec))throw new Error("Invalid "+this.spec.name+" provided: "+n);return new r(Ta(n,this.spec)).toJSON()},r.format=function(n){return Es(n,this.spec)};var e=r.prototype;return e.toString=function(){return r.format(this.toJSON())},e.toJSON=function(){return{chainId:this.chainId.toJSON(),assetName:this.assetName}},r}();W9.spec=Aa[19].assetType;var Y9=function(){function r(t){typeof t=="string"&&(t=r.parse(t)),this.chainId=new Ai(t.chainId),this.assetName=new Hl(t.assetName),this.tokenId=t.tokenId}r.parse=function(n){if(!ka(n,this.spec))throw new Error("Invalid "+this.spec.name+" provided: "+n);return new r(Ta(n,this.spec)).toJSON()},r.format=function(n){return Es(n,this.spec)};var e=r.prototype;return e.toString=function(){return r.format(this.toJSON())},e.toJSON=function(){return{chainId:this.chainId.toJSON(),assetName:this.assetName.toJSON(),tokenId:this.tokenId}},r}();Y9.spec=Aa[19].assetId;function t2(r){if(typeof r=="string"&&r.includes("@")){let[e,t]=r.split("@");if(!e||!t)throw new Error("Invalid accountId provided");return new Ti({address:e,chainId:t})}return new Ti(r)}var J2=Je(G2(),1),Yt=Je(_o(),1),m7=`
sign-in-with-ethereum =
    domain %s" wants you to sign in with your Ethereum account:" LF
    address LF
    LF
    [ statement LF ]
    LF
    %s"URI: " URI LF
    %s"Version: " version LF
    %s"Chain ID: " chain-id LF
    %s"Nonce: " nonce LF
    %s"Issued At: " issued-at
    [ LF %s"Expiration Time: " expiration-time ]
    [ LF %s"Not Before: " not-before ]
    [ LF %s"Request ID: " request-id ]
    [ LF %s"Resources:"
    resources ]

domain = dnsauthority

address = "0x" 40*40HEXDIG
    ; Must also conform to captilization
    ; checksum encoding specified in EIP-55
    ; where applicable (EOAs).

statement = *( reserved / unreserved / " " )
    ; The purpose is to exclude LF (line breaks).

version = "1"

nonce = 8*( ALPHA / DIGIT )

issued-at = date-time
expiration-time = date-time
not-before = date-time

request-id = *pchar

chain-id = 1*DIGIT
    ; See EIP-155 for valid CHAIN_IDs.

resources = *( LF resource )

resource = "- " URI

; ------------------------------------------------------------------------------
; RFC 3986

URI           = scheme ":" hier-part [ "?" query ] [ "#" fragment ]

hier-part     = "//" authority path-abempty
              / path-absolute
              / path-rootless
              / path-empty

scheme        = ALPHA *( ALPHA / DIGIT / "+" / "-" / "." )

authority     = [ userinfo "@" ] host [ ":" port ]
userinfo      = *( unreserved / pct-encoded / sub-delims / ":" )
host          = IP-literal / IPv4address / reg-name
port          = *DIGIT

IP-literal    = "[" ( IPv6address / IPvFuture  ) "]"

IPvFuture     = "v" 1*HEXDIG "." 1*( unreserved / sub-delims / ":" )

IPv6address   =                            6( h16 ":" ) ls32
              /                       "::" 5( h16 ":" ) ls32
              / [               h16 ] "::" 4( h16 ":" ) ls32
              / [ *1( h16 ":" ) h16 ] "::" 3( h16 ":" ) ls32
              / [ *2( h16 ":" ) h16 ] "::" 2( h16 ":" ) ls32
              / [ *3( h16 ":" ) h16 ] "::"    h16 ":"   ls32
              / [ *4( h16 ":" ) h16 ] "::"              ls32
              / [ *5( h16 ":" ) h16 ] "::"              h16
              / [ *6( h16 ":" ) h16 ] "::"

h16           = 1*4HEXDIG
ls32          = ( h16 ":" h16 ) / IPv4address
IPv4address   = dec-octet "." dec-octet "." dec-octet "." dec-octet
dec-octet     = DIGIT                 ; 0-9
                 / %x31-39 DIGIT         ; 10-99
                 / "1" 2DIGIT            ; 100-199
                 / "2" %x30-34 DIGIT     ; 200-249
                 / "25" %x30-35          ; 250-255

reg-name      = *( unreserved / pct-encoded / sub-delims )

path-abempty  = *( "/" segment )
path-absolute = "/" [ segment-nz *( "/" segment ) ]
path-rootless = segment-nz *( "/" segment )
path-empty    = 0pchar

segment       = *pchar
segment-nz    = 1*pchar

pchar         = unreserved / pct-encoded / sub-delims / ":" / "@"

query         = *( pchar / "/" / "?" )

fragment      = *( pchar / "/" / "?" )

pct-encoded   = "%" HEXDIG HEXDIG

unreserved    = ALPHA / DIGIT / "-" / "." / "_" / "~"
reserved      = gen-delims / sub-delims
gen-delims    = ":" / "/" / "?" / "#" / "[" / "]" / "@"
sub-delims    = "!" / "$" / "&" / "'" / "(" / ")"
              / "*" / "+" / "," / ";" / "="

; ------------------------------------------------------------------------------
; RFC 4501

dnsauthority    = host [ ":" port ]
                             ; See RFC 3986 for the
                             ; definition of "host" and "port".

; ------------------------------------------------------------------------------
; RFC 3339

date-fullyear   = 4DIGIT
date-month      = 2DIGIT  ; 01-12
date-mday       = 2DIGIT  ; 01-28, 01-29, 01-30, 01-31 based on
                          ; month/year
time-hour       = 2DIGIT  ; 00-23
time-minute     = 2DIGIT  ; 00-59
time-second     = 2DIGIT  ; 00-58, 00-59, 00-60 based on leap second
                          ; rules
time-secfrac    = "." 1*DIGIT
time-numoffset  = ("+" / "-") time-hour ":" time-minute
time-offset     = "Z" / time-numoffset

partial-time    = time-hour ":" time-minute ":" time-second
                  [time-secfrac]
full-date       = date-fullyear "-" date-month "-" date-mday
full-time       = partial-time time-offset

date-time       = full-date "T" full-time

; ------------------------------------------------------------------------------
; RFC 5234

ALPHA          =  %x41-5A / %x61-7A   ; A-Z / a-z
LF             =  %x0A
                  ; linefeed
DIGIT          =  %x30-39
                  ; 0-9
HEXDIG         =  DIGIT / "A" / "B" / "C" / "D" / "E" / "F"
`,Nc=class{constructor(e){let t=new J2.default(m7);if(t.generate(),t.errors.length)throw console.error(t.errorsToAscii()),console.error(t.linesToAscii()),console.log(t.displayAttributeErrors()),new Error("ABNF grammar has errors");let n=t.toObject(),i=new Yt.default.parser;i.ast=new Yt.default.ast;let s=Yt.default.ids,a=function(H,X,B,P,L){let te=s.SEM_OK;return H===s.SEM_PRE&&(L.domain=Yt.default.utils.charsToString(X,B,P)),te};i.ast.callbacks.domain=a;let u=function(H,X,B,P,L){let te=s.SEM_OK;return H===s.SEM_PRE&&(L.address=Yt.default.utils.charsToString(X,B,P)),te};i.ast.callbacks.address=u;let v=function(H,X,B,P,L){let te=s.SEM_OK;return H===s.SEM_PRE&&(L.statement=Yt.default.utils.charsToString(X,B,P)),te};i.ast.callbacks.statement=v;let w=function(H,X,B,P,L){let te=s.SEM_OK;return H===s.SEM_PRE&&(L.uri||(L.uri=Yt.default.utils.charsToString(X,B,P))),te};i.ast.callbacks.uri=w;let E=function(H,X,B,P,L){let te=s.SEM_OK;return H===s.SEM_PRE&&(L.version=Yt.default.utils.charsToString(X,B,P)),te};i.ast.callbacks.version=E;let M=function(H,X,B,P,L){let te=s.SEM_OK;return H===s.SEM_PRE&&(L.chainId=Yt.default.utils.charsToString(X,B,P)),te};i.ast.callbacks["chain-id"]=M;let k=function(H,X,B,P,L){let te=s.SEM_OK;return H===s.SEM_PRE&&(L.nonce=Yt.default.utils.charsToString(X,B,P)),te};i.ast.callbacks.nonce=k;let D=function(H,X,B,P,L){let te=s.SEM_OK;return H===s.SEM_PRE&&(L.issuedAt=Yt.default.utils.charsToString(X,B,P)),te};i.ast.callbacks["issued-at"]=D;let T=function(H,X,B,P,L){let te=s.SEM_OK;return H===s.SEM_PRE&&(L.expirationTime=Yt.default.utils.charsToString(X,B,P)),te};i.ast.callbacks["expiration-time"]=T;let C=function(H,X,B,P,L){let te=s.SEM_OK;return H===s.SEM_PRE&&(L.notBefore=Yt.default.utils.charsToString(X,B,P)),te};i.ast.callbacks["not-before"]=C;let z=function(H,X,B,P,L){let te=s.SEM_OK;return H===s.SEM_PRE&&(L.requestId=Yt.default.utils.charsToString(X,B,P)),te};i.ast.callbacks["request-id"]=z;let I=function(H,X,B,P,L){let te=s.SEM_OK;return H===s.SEM_PRE&&(L.resources=Yt.default.utils.charsToString(X,B,P).slice(3).split(`
- `)),te};i.ast.callbacks.resources=I;let q=i.parse(n,"sign-in-with-ethereum",e);if(!q.success)throw new Error(`Invalid message: ${JSON.stringify(q)}`);let Y={};i.ast.translate(Y);for(let[H,X]of Object.entries(Y))this[H]=X}};var V2;(function(r){r.INVALID_SIGNATURE="Invalid signature.",r.EXPIRED_MESSAGE="Expired message.",r.MALFORMED_SESSION="Malformed session."})(V2||(V2={}));var Ra;(function(r){r.PERSONAL_SIGNATURE="Personal signature"})(Ra||(Ra={}));var Pc=class{static fromCacao(e){let t=Ti.parse(e.p.iss.replace("did:pkh:","")),n=new this({domain:e.p.domain,address:t.address,uri:e.p.aud,version:e.p.version,chainId:new Ai(t.chainId).reference});return e.p.statement&&(n.statement=e.p.statement),e.p.nonce&&(n.nonce=e.p.nonce),e.p.iat&&(n.issuedAt=e.p.iat),e.p.exp&&(n.expirationTime=e.p.exp),e.p.nbf&&(n.notBefore=e.p.nbf),e.p.requestId&&(n.requestId=e.p.requestId),e.p.resources&&(n.resources=e.p.resources),e.s&&(e.s.s&&(n.signature=e.s.s),e.s.t==="eip191"&&(n.type=Ra.PERSONAL_SIGNATURE)),n}toMessage(e){return b7(this,e)}constructor(e){if(this.statement=void 0,this.nonce=void 0,this.issuedAt=void 0,this.expirationTime=void 0,this.notBefore=void 0,this.requestId=void 0,this.resources=void 0,this.signature=void 0,typeof e=="string"){let t=new Nc(e);this.domain=t.domain,this.address=t.address,this.statement=t.statement,this.uri=t.uri,this.version=t.version,this.nonce=t.nonce,this.issuedAt=t.issuedAt,this.expirationTime=t.expirationTime,this.notBefore=t.notBefore,this.requestId=t.requestId,this.chainId=t.chainId,this.resources=t.resources}else Object.assign(this,e)}};function W2(r,e){let t=`${r.domain} wants you to sign in with your ${e} account:`,n=`URI: ${r.uri}`,i=[t,r.address].join(`
`),s=`Version: ${r.version}`;r.nonce||(r.nonce=(Math.random()+1).toString(36).substring(4));let a=`Nonce: ${r.nonce}`,u=[n,s,a];if(r.issuedAt&&Date.parse(r.issuedAt),r.issuedAt=r.issuedAt?r.issuedAt:new Date().toISOString(),u.push(`Issued At: ${r.issuedAt}`),r.expirationTime){let w=`Expiration Time: ${r.expirationTime}`;u.push(w)}r.notBefore&&u.push(`Not Before: ${r.notBefore}`),r.requestId&&u.push(`Request ID: ${r.requestId}`),r.chainId&&u.push(`Chain ID: ${r.chainId}`),r.resources&&u.push(["Resources:",...r.resources.map(w=>`- ${w}`)].join(`
`));let v=u.join(`
`);return r.statement&&(i=[i,r.statement].join(`

`)),[i,v].join(`

`)}function b7(r,e){let t=`${r.domain} wants you to sign in with your ${e} account:`,n=`URI: ${r.uri}`,i=[t,r.address].join(`
`),s=`Version: ${r.version}`;r.nonce||(r.nonce=(Math.random()+1).toString(36).substring(4));let a=`Nonce: ${r.nonce}`,u=`Chain ID: ${r.chainId}`,v=[n,s,u,a];if(r.issuedAt&&Date.parse(r.issuedAt),r.issuedAt=r.issuedAt?r.issuedAt:new Date().toISOString(),v.push(`Issued At: ${r.issuedAt}`),r.expirationTime){let E=`Expiration Time: ${r.expirationTime}`;v.push(E)}r.notBefore&&v.push(`Not Before: ${r.notBefore}`),r.requestId&&v.push(`Request ID: ${r.requestId}`),r.resources&&r.resources.length>=1&&v.push(["Resources:",...r.resources.map(E=>`- ${E}`)].join(`
`));let w=v.join(`
`);return r.statement&&(i=[i,r.statement].join(`

`)),[i,w].join(`

`)}var Na=class extends Pc{toMessage(){return super.toMessage("Ethereum")}signMessage(){let e;switch(this.type){case Ra.PERSONAL_SIGNATURE:{e=this.toMessage();break}default:{e=this.toMessage();break}}return e}};Xo();var v7=5*60,dB=new Date("2022-09-20").valueOf(),Mo;(function(r){function e(s){let a={h:{t:"eip4361"},p:{domain:s.domain,iat:s.issuedAt,iss:`did:pkh:eip155:${s.chainId}:${s.address}`,aud:s.uri,version:s.version,nonce:s.nonce}};return s.signature&&(a.s={t:"eip191",s:s.signature}),s.notBefore&&(a.p.nbf=s.notBefore),s.expirationTime&&(a.p.exp=s.expirationTime),s.statement&&(a.p.statement=s.statement),s.requestId&&(a.p.requestId=s.requestId),s.resources&&(a.p.resources=s.resources),a}r.fromSiweMessage=e;function t(s){let a={h:{t:"caip122"},p:{domain:s.domain,iat:s.issuedAt,iss:`did:pkh:solana:${s.chainId}:${s.address}`,aud:s.uri,version:s.version,nonce:s.nonce}};return s.signature&&(a.s={t:"solana:ed25519",s:s.signature}),s.notBefore&&(a.p.nbf=s.notBefore),s.expirationTime&&(a.p.exp=s.expirationTime),s.statement&&(a.p.statement=s.statement),s.requestId&&(a.p.requestId=s.requestId),s.resources&&(a.p.resources=s.resources),a}r.fromSiwsMessage=t;async function n(s){return(await Wp({bytes:s,codec:Sr,hasher:Mn})).value}r.fromBlockBytes=n;async function i(s,a={}){Xl(s);let u=a.verifiers[s.s.t];if(!u)throw new Error("Unsupported CACAO signature type, register the needed verifier");return u(s,a)}r.verify=i})(Mo||(Mo={}));var Pa;(function(r){function e(t){return jn({value:t,codec:Sr,hasher:Mn})}r.fromCacao=e})(Pa||(Pa={}));function Xl(r){if(r.s===null||r.s===void 0)throw new Error("CACAO does not have a signature")}function Y2(r,e){let t=e.atTime?e.atTime.getTime():Date.now(),n=(e.clockSkewSecs??v7)*1e3;if(Date.parse(r.p.iat)>t+n||Date.parse(r.p.nbf)>t+n)throw new Error("CACAO is not valid yet");let i=e.revocationPhaseOutSecs?e.revocationPhaseOutSecs*1e3:0;if(!e.disableExpirationCheck&&Date.parse(r.p.exp)+i+n<t)throw new Error("CACAO has expired")}var X2="logger/5.7.0";var Z2=!1,Q2=!1,Bc={debug:1,default:2,info:2,warning:3,error:4,off:5},ev=Bc.default,Zl=null;function g7(){try{let r=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{r.push(e)}}),r.length)throw new Error("missing "+r.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(r){return r.message}return null}var tv=g7(),Ql;(function(r){r.DEBUG="DEBUG",r.INFO="INFO",r.WARNING="WARNING",r.ERROR="ERROR",r.OFF="OFF"})(Ql||(Ql={}));var pn;(function(r){r.UNKNOWN_ERROR="UNKNOWN_ERROR",r.NOT_IMPLEMENTED="NOT_IMPLEMENTED",r.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",r.NETWORK_ERROR="NETWORK_ERROR",r.SERVER_ERROR="SERVER_ERROR",r.TIMEOUT="TIMEOUT",r.BUFFER_OVERRUN="BUFFER_OVERRUN",r.NUMERIC_FAULT="NUMERIC_FAULT",r.MISSING_NEW="MISSING_NEW",r.INVALID_ARGUMENT="INVALID_ARGUMENT",r.MISSING_ARGUMENT="MISSING_ARGUMENT",r.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",r.CALL_EXCEPTION="CALL_EXCEPTION",r.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",r.NONCE_EXPIRED="NONCE_EXPIRED",r.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",r.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",r.TRANSACTION_REPLACED="TRANSACTION_REPLACED",r.ACTION_REJECTED="ACTION_REJECTED"})(pn||(pn={}));var rv="0123456789abcdef",We=class{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){let n=e.toLowerCase();Bc[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(ev>Bc[n])&&console.log.apply(console,t)}debug(...e){this._log(We.levels.DEBUG,e)}info(...e){this._log(We.levels.INFO,e)}warn(...e){this._log(We.levels.WARNING,e)}makeError(e,t,n){if(Q2)return this.makeError("censored error",t,{});t||(t=We.errors.UNKNOWN_ERROR),n||(n={});let i=[];Object.keys(n).forEach(v=>{let w=n[v];try{if(w instanceof Uint8Array){let E="";for(let M=0;M<w.length;M++)E+=rv[w[M]>>4],E+=rv[w[M]&15];i.push(v+"=Uint8Array(0x"+E+")")}else i.push(v+"="+JSON.stringify(w))}catch{i.push(v+"="+JSON.stringify(n[v].toString()))}}),i.push(`code=${t}`),i.push(`version=${this.version}`);let s=e,a="";switch(t){case pn.NUMERIC_FAULT:{a="NUMERIC_FAULT";let v=e;switch(v){case"overflow":case"underflow":case"division-by-zero":a+="-"+v;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result";break}break}case pn.CALL_EXCEPTION:case pn.INSUFFICIENT_FUNDS:case pn.MISSING_NEW:case pn.NONCE_EXPIRED:case pn.REPLACEMENT_UNDERPRICED:case pn.TRANSACTION_REPLACED:case pn.UNPREDICTABLE_GAS_LIMIT:a=t;break}a&&(e+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(e+=" ("+i.join(", ")+")");let u=new Error(e);return u.reason=s,u.code=t,Object.keys(n).forEach(function(v){u[v]=n[v]}),u}throwError(e,t,n){throw this.makeError(e,t,n)}throwArgumentError(e,t,n){return this.throwError(e,We.errors.INVALID_ARGUMENT,{argument:t,value:n})}assert(e,t,n,i){e||this.throwError(t,n,i)}assertArgument(e,t,n,i){e||this.throwArgumentError(t,n,i)}checkNormalize(e){e==null&&(e="platform missing String.prototype.normalize"),tv&&this.throwError("platform missing String.prototype.normalize",We.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:tv})}checkSafeUint53(e,t){typeof e=="number"&&(t==null&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,We.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,We.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,n){n?n=": "+n:n="",e<t&&this.throwError("missing argument"+n,We.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+n,We.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||e==null)&&this.throwError("missing new",We.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",We.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",We.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return Zl||(Zl=new We(X2)),Zl}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",We.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Z2){if(!e)return;this.globalLogger().throwError("error censorship permanent",We.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Q2=!!e,Z2=!!t}static setLogLevel(e){let t=Bc[e.toLowerCase()];if(t==null){We.globalLogger().warn("invalid log level - "+e);return}ev=t}static from(e){return new We(e)}};We.errors=pn;We.levels=Ql;var nv="bytes/5.7.0";var xt=new We(nv);function ov(r){return!!r.toHexString}function Ts(r){return r.slice||(r.slice=function(){let e=Array.prototype.slice.call(arguments);return Ts(new Uint8Array(Array.prototype.slice.apply(r,e)))}),r}function sv(r){return mn(r)&&!(r.length%2)||t0(r)}function iv(r){return typeof r=="number"&&r==r&&r%1===0}function t0(r){if(r==null)return!1;if(r.constructor===Uint8Array)return!0;if(typeof r=="string"||!iv(r.length)||r.length<0)return!1;for(let e=0;e<r.length;e++){let t=r[e];if(!iv(t)||t<0||t>=256)return!1}return!0}function ht(r,e){if(e||(e={}),typeof r=="number"){xt.checkSafeUint53(r,"invalid arrayify value");let t=[];for(;r;)t.unshift(r&255),r=parseInt(String(r/256));return t.length===0&&t.push(0),Ts(new Uint8Array(t))}if(e.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),ov(r)&&(r=r.toHexString()),mn(r)){let t=r.substring(2);t.length%2&&(e.hexPad==="left"?t="0"+t:e.hexPad==="right"?t+="0":xt.throwArgumentError("hex data is odd-length","value",r));let n=[];for(let i=0;i<t.length;i+=2)n.push(parseInt(t.substring(i,i+2),16));return Ts(new Uint8Array(n))}return t0(r)?Ts(new Uint8Array(r)):xt.throwArgumentError("invalid arrayify value","value",r)}function r0(r){let e=r.map(i=>ht(i)),t=e.reduce((i,s)=>i+s.length,0),n=new Uint8Array(t);return e.reduce((i,s)=>(n.set(s,i),i+s.length),0),Ts(n)}function y7(r,e){r=ht(r),r.length>e&&xt.throwArgumentError("value out of range","value",arguments[0]);let t=new Uint8Array(e);return t.set(r,e-r.length),Ts(t)}function mn(r,e){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||e&&r.length!==2+2*e)}var e0="0123456789abcdef";function Xt(r,e){if(e||(e={}),typeof r=="number"){xt.checkSafeUint53(r,"invalid hexlify value");let t="";for(;r;)t=e0[r&15]+t,r=Math.floor(r/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if(typeof r=="bigint")return r=r.toString(16),r.length%2?"0x0"+r:"0x"+r;if(e.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),ov(r))return r.toHexString();if(mn(r))return r.length%2&&(e.hexPad==="left"?r="0x0"+r.substring(2):e.hexPad==="right"?r+="0":xt.throwArgumentError("hex data is odd-length","value",r)),r.toLowerCase();if(t0(r)){let t="0x";for(let n=0;n<r.length;n++){let i=r[n];t+=e0[(i&240)>>4]+e0[i&15]}return t}return xt.throwArgumentError("invalid hexlify value","value",r)}function Lc(r){if(typeof r!="string")r=Xt(r);else if(!mn(r)||r.length%2)return null;return(r.length-2)/2}function Uc(r,e,t){return typeof r!="string"?r=Xt(r):(!mn(r)||r.length%2)&&xt.throwArgumentError("invalid hexData","value",r),e=2+2*e,t!=null?"0x"+r.substring(e,2+2*t):"0x"+r.substring(e)}function Ii(r,e){for(typeof r!="string"?r=Xt(r):mn(r)||xt.throwArgumentError("invalid hex string","value",r),r.length>2*e+2&&xt.throwArgumentError("value out of range","value",arguments[1]);r.length<2*e+2;)r="0x0"+r.substring(2);return r}function $c(r){let e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(sv(r)){let t=ht(r);t.length===64?(e.v=27+(t[32]>>7),t[32]&=127,e.r=Xt(t.slice(0,32)),e.s=Xt(t.slice(32,64))):t.length===65?(e.r=Xt(t.slice(0,32)),e.s=Xt(t.slice(32,64)),e.v=t[64]):xt.throwArgumentError("invalid signature string","signature",r),e.v<27&&(e.v===0||e.v===1?e.v+=27:xt.throwArgumentError("signature invalid v byte","signature",r)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(t[32]|=128),e._vs=Xt(t.slice(32,64))}else{if(e.r=r.r,e.s=r.s,e.v=r.v,e.recoveryParam=r.recoveryParam,e._vs=r._vs,e._vs!=null){let i=y7(ht(e._vs),32);e._vs=Xt(i);let s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&xt.throwArgumentError("signature recoveryParam mismatch _vs","signature",r),i[0]&=127;let a=Xt(i);e.s==null?e.s=a:e.s!==a&&xt.throwArgumentError("signature v mismatch _vs","signature",r)}if(e.recoveryParam==null)e.v==null?xt.throwArgumentError("signature missing v and recoveryParam","signature",r):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{let i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&xt.throwArgumentError("signature recoveryParam mismatch v","signature",r)}e.r==null||!mn(e.r)?xt.throwArgumentError("signature missing or invalid r","signature",r):e.r=Ii(e.r,32),e.s==null||!mn(e.s)?xt.throwArgumentError("signature missing or invalid s","signature",r):e.s=Ii(e.s,32);let t=ht(e.s);t[0]>=128&&xt.throwArgumentError("signature s out of range","signature",r),e.recoveryParam&&(t[0]|=128);let n=Xt(t);e._vs&&(mn(e._vs)||xt.throwArgumentError("signature invalid _vs","signature",r),e._vs=Ii(e._vs,32)),e._vs==null?e._vs=n:e._vs!==n&&xt.throwArgumentError("signature _vs mismatch v and s","signature",r)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}var uv=Je(fv());var cv="bignumber/5.7.0";var x7=uv.default.BN,TB=new We(cv);function i0(r){return new x7(r,36).toString(16)}var hv=Je(o0());function ks(r){return"0x"+hv.default.keccak_256(ht(r))}var lv="address/5.7.0";var Ba=new We(lv);function dv(r){mn(r,20)||Ba.throwArgumentError("invalid address","address",r),r=r.toLowerCase();let e=r.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);let n=ht(ks(t));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}var _7=9007199254740991;function M7(r){return Math.log10?Math.log10(r):Math.log(r)/Math.LN10}var s0={};for(let r=0;r<10;r++)s0[String(r)]=String(r);for(let r=0;r<26;r++)s0[String.fromCharCode(65+r)]=String(10+r);var pv=Math.floor(M7(_7));function S7(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let e=r.split("").map(n=>s0[n]).join("");for(;e.length>=pv;){let n=e.substring(0,pv);e=parseInt(n,10)%97+e.substring(n.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}function mv(r){let e=null;if(typeof r!="string"&&Ba.throwArgumentError("invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/))r.substring(0,2)!=="0x"&&(r="0x"+r),e=dv(r),r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==r&&Ba.throwArgumentError("bad address checksum","address",r);else if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(r.substring(2,4)!==S7(r)&&Ba.throwArgumentError("bad icap checksum","address",r),e=i0(r.substring(4));e.length<40;)e="0"+e;e=dv("0x"+e)}else Ba.throwArgumentError("invalid address","address",r);return e}var bv="properties/5.7.0";var jB=new We(bv);function Cs(r,e,t){Object.defineProperty(r,e,{enumerable:!0,value:t,writable:!1})}var vv="strings/5.7.0";var gv=new We(vv),La;(function(r){r.current="",r.NFC="NFC",r.NFD="NFD",r.NFKC="NFKC",r.NFKD="NFKD"})(La||(La={}));var So;(function(r){r.UNEXPECTED_CONTINUE="unexpected continuation byte",r.BAD_PREFIX="bad codepoint prefix",r.OVERRUN="string overrun",r.MISSING_CONTINUE="missing continuation byte",r.OUT_OF_RANGE="out of UTF-8 range",r.UTF16_SURROGATE="UTF-16 surrogate",r.OVERLONG="overlong representation"})(So||(So={}));function A7(r,e,t,n,i){return gv.throwArgumentError(`invalid codepoint at offset ${e}; ${r}`,"bytes",t)}function yv(r,e,t,n,i){if(r===So.BAD_PREFIX||r===So.UNEXPECTED_CONTINUE){let s=0;for(let a=e+1;a<t.length&&t[a]>>6===2;a++)s++;return s}return r===So.OVERRUN?t.length-e-1:0}function T7(r,e,t,n,i){return r===So.OVERLONG?(n.push(i),0):(n.push(65533),yv(r,e,t,n,i))}var k7=Object.freeze({error:A7,ignore:yv,replace:T7});function Ua(r,e=La.current){e!=La.current&&(gv.checkNormalize(),r=r.normalize(e));let t=[];for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){n++;let s=r.charCodeAt(n);if(n>=r.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");let a=65536+((i&1023)<<10)+(s&1023);t.push(a>>18|240),t.push(a>>12&63|128),t.push(a>>6&63|128),t.push(a&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return ht(t)}var xv=`Ethereum Signed Message:
`;function a0(r){return typeof r=="string"&&(r=Ua(r)),ks(r0([Ua(xv),Ua(String(r.length)),r]))}var je=Je(ng()),Bn=Je(Ha());function Bs(r,e,t){return t={path:e,exports:{},require:function(n,i){return XE(n,i??t.path)}},r(t,t.exports),t.exports}function XE(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var w0=og;function og(r,e){if(!r)throw new Error(e||"Assertion failed")}og.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)};var yn=Bs(function(r,e){"use strict";var t=e;function n(a,u){if(Array.isArray(a))return a.slice();if(!a)return[];var v=[];if(typeof a!="string"){for(var w=0;w<a.length;w++)v[w]=a[w]|0;return v}if(u==="hex"){a=a.replace(/[^a-z0-9]+/ig,""),a.length%2!==0&&(a="0"+a);for(var w=0;w<a.length;w+=2)v.push(parseInt(a[w]+a[w+1],16))}else for(var w=0;w<a.length;w++){var E=a.charCodeAt(w),M=E>>8,k=E&255;M?v.push(M,k):v.push(k)}return v}t.toArray=n;function i(a){return a.length===1?"0"+a:a}t.zero2=i;function s(a){for(var u="",v=0;v<a.length;v++)u+=i(a[v].toString(16));return u}t.toHex=s,t.encode=function(u,v){return v==="hex"?s(u):u}}),Dr=Bs(function(r,e){"use strict";var t=e;t.assert=w0,t.toArray=yn.toArray,t.zero2=yn.zero2,t.toHex=yn.toHex,t.encode=yn.encode;function n(v,w,E){var M=new Array(Math.max(v.bitLength(),E)+1);M.fill(0);for(var k=1<<w+1,D=v.clone(),T=0;T<M.length;T++){var C,z=D.andln(k-1);D.isOdd()?(z>(k>>1)-1?C=(k>>1)-z:C=z,D.isubn(C)):C=0,M[T]=C,D.iushrn(1)}return M}t.getNAF=n;function i(v,w){var E=[[],[]];v=v.clone(),w=w.clone();for(var M=0,k=0,D;v.cmpn(-M)>0||w.cmpn(-k)>0;){var T=v.andln(3)+M&3,C=w.andln(3)+k&3;T===3&&(T=-1),C===3&&(C=-1);var z;T&1?(D=v.andln(7)+M&7,(D===3||D===5)&&C===2?z=-T:z=T):z=0,E[0].push(z);var I;C&1?(D=w.andln(7)+k&7,(D===3||D===5)&&T===2?I=-C:I=C):I=0,E[1].push(I),2*M===z+1&&(M=1-M),2*k===I+1&&(k=1-k),v.iushrn(1),w.iushrn(1)}return E}t.getJSF=i;function s(v,w,E){var M="_"+w;v.prototype[w]=function(){return this[M]!==void 0?this[M]:this[M]=E.call(this)}}t.cachedProperty=s;function a(v){return typeof v=="string"?t.toArray(v,"hex"):v}t.parseBytes=a;function u(v){return new je.default(v,"hex","le")}t.intFromLE=u}),Gc=Dr.getNAF,ZE=Dr.getJSF,Jc=Dr.assert;function Pi(r,e){this.type=r,this.p=new je.default(e.p,16),this.red=e.prime?je.default.red(e.prime):je.default.mont(this.p),this.zero=new je.default(0).toRed(this.red),this.one=new je.default(1).toRed(this.red),this.two=new je.default(2).toRed(this.red),this.n=e.n&&new je.default(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var To=Pi;Pi.prototype.point=function(){throw new Error("Not implemented")};Pi.prototype.validate=function(){throw new Error("Not implemented")};Pi.prototype._fixedNafMul=function(e,t){Jc(e.precomputed);var n=e._getDoubles(),i=Gc(t,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var a=[],u,v;for(u=0;u<i.length;u+=n.step){v=0;for(var w=u+n.step-1;w>=u;w--)v=(v<<1)+i[w];a.push(v)}for(var E=this.jpoint(null,null,null),M=this.jpoint(null,null,null),k=s;k>0;k--){for(u=0;u<a.length;u++)v=a[u],v===k?M=M.mixedAdd(n.points[u]):v===-k&&(M=M.mixedAdd(n.points[u].neg()));E=E.add(M)}return E.toP()};Pi.prototype._wnafMul=function(e,t){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,a=Gc(t,n,this._bitLength),u=this.jpoint(null,null,null),v=a.length-1;v>=0;v--){for(var w=0;v>=0&&a[v]===0;v--)w++;if(v>=0&&w++,u=u.dblp(w),v<0)break;var E=a[v];Jc(E!==0),e.type==="affine"?E>0?u=u.mixedAdd(s[E-1>>1]):u=u.mixedAdd(s[-E-1>>1].neg()):E>0?u=u.add(s[E-1>>1]):u=u.add(s[-E-1>>1].neg())}return e.type==="affine"?u.toP():u};Pi.prototype._wnafMulAdd=function(e,t,n,i,s){var a=this._wnafT1,u=this._wnafT2,v=this._wnafT3,w=0,E,M,k;for(E=0;E<i;E++){k=t[E];var D=k._getNAFPoints(e);a[E]=D.wnd,u[E]=D.points}for(E=i-1;E>=1;E-=2){var T=E-1,C=E;if(a[T]!==1||a[C]!==1){v[T]=Gc(n[T],a[T],this._bitLength),v[C]=Gc(n[C],a[C],this._bitLength),w=Math.max(v[T].length,w),w=Math.max(v[C].length,w);continue}var z=[t[T],null,null,t[C]];t[T].y.cmp(t[C].y)===0?(z[1]=t[T].add(t[C]),z[2]=t[T].toJ().mixedAdd(t[C].neg())):t[T].y.cmp(t[C].y.redNeg())===0?(z[1]=t[T].toJ().mixedAdd(t[C]),z[2]=t[T].add(t[C].neg())):(z[1]=t[T].toJ().mixedAdd(t[C]),z[2]=t[T].toJ().mixedAdd(t[C].neg()));var I=[-3,-1,-5,-7,0,7,5,1,3],q=ZE(n[T],n[C]);for(w=Math.max(q[0].length,w),v[T]=new Array(w),v[C]=new Array(w),M=0;M<w;M++){var Y=q[0][M]|0,H=q[1][M]|0;v[T][M]=I[(Y+1)*3+(H+1)],v[C][M]=0,u[T]=z}}var X=this.jpoint(null,null,null),B=this._wnafT4;for(E=w;E>=0;E--){for(var P=0;E>=0;){var L=!0;for(M=0;M<i;M++)B[M]=v[M][E]|0,B[M]!==0&&(L=!1);if(!L)break;P++,E--}if(E>=0&&P++,X=X.dblp(P),E<0)break;for(M=0;M<i;M++){var te=B[M];te!==0&&(te>0?k=u[M][te-1>>1]:te<0&&(k=u[M][-te-1>>1].neg()),k.type==="affine"?X=X.mixedAdd(k):X=X.add(k))}}for(E=0;E<i;E++)u[E]=null;return s?X:X.toP()};function zr(r,e){this.curve=r,this.type=e,this.precomputed=null}Pi.BasePoint=zr;zr.prototype.eq=function(){throw new Error("Not implemented")};zr.prototype.validate=function(){return this.curve.validate(this)};Pi.prototype.decodePoint=function(e,t){e=Dr.toArray(e,t);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?Jc(e[e.length-1]%2===0):e[0]===7&&Jc(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};zr.prototype.encodeCompressed=function(e){return this.encode(e,!0)};zr.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))};zr.prototype.encode=function(e,t){return Dr.encode(this._encode(t),e)};zr.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};zr.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};zr.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<t;s+=e){for(var a=0;a<e;a++)i=i.dbl();n.push(i)}return{step:e,points:n}};zr.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)t[s]=t[s-1].add(i);return{wnd:e,points:t}};zr.prototype._getBeta=function(){return null};zr.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t};var E0=Bs(function(r){typeof Object.create=="function"?r.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(t,n){if(n){t.super_=n;var i=function(){};i.prototype=n.prototype,t.prototype=new i,t.prototype.constructor=t}}}),QE=Dr.assert;function Kr(r){To.call(this,"short",r),this.a=new je.default(r.a,16).toRed(this.red),this.b=new je.default(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}E0(Kr,To);var e_=Kr;Kr.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,n;if(e.beta)t=new je.default(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(e.lambda)n=new je.default(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))===0?n=s[0]:(n=s[1],QE(this.g.mul(n).x.cmp(this.g.x.redMul(t))===0))}var a;return e.basis?a=e.basis.map(function(u){return{a:new je.default(u.a,16),b:new je.default(u.b,16)}}):a=this._getEndoBasis(n),{beta:t,lambda:n,basis:a}}};Kr.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:je.default.mont(e),n=new je.default(2).toRed(t).redInvm(),i=n.redNeg(),s=new je.default(3).toRed(t).redNeg().redSqrt().redMul(n),a=i.redAdd(s).fromRed(),u=i.redSub(s).fromRed();return[a,u]};Kr.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new je.default(1),a=new je.default(0),u=new je.default(0),v=new je.default(1),w,E,M,k,D,T,C,z=0,I,q;n.cmpn(0)!==0;){var Y=i.div(n);I=i.sub(Y.mul(n)),q=u.sub(Y.mul(s));var H=v.sub(Y.mul(a));if(!M&&I.cmp(t)<0)w=C.neg(),E=s,M=I.neg(),k=q;else if(M&&++z===2)break;C=I,i=n,n=I,u=s,s=q,v=a,a=H}D=I.neg(),T=q;var X=M.sqr().add(k.sqr()),B=D.sqr().add(T.sqr());return B.cmp(X)>=0&&(D=w,T=E),M.negative&&(M=M.neg(),k=k.neg()),D.negative&&(D=D.neg(),T=T.neg()),[{a:M,b:k},{a:D,b:T}]};Kr.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],i=t[1],s=i.b.mul(e).divRound(this.n),a=n.b.neg().mul(e).divRound(this.n),u=s.mul(n.a),v=a.mul(i.a),w=s.mul(n.b),E=a.mul(i.b),M=e.sub(u).sub(v),k=w.add(E).neg();return{k1:M,k2:k}};Kr.prototype.pointFromX=function(e,t){e=new je.default(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(t&&!s||!t&&s)&&(i=i.redNeg()),this.point(e,i)};Kr.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,i=this.a.redMul(t),s=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};Kr.prototype._endoWnafMulAdd=function(e,t,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,a=0;a<e.length;a++){var u=this._endoSplit(t[a]),v=e[a],w=v._getBeta();u.k1.negative&&(u.k1.ineg(),v=v.neg(!0)),u.k2.negative&&(u.k2.ineg(),w=w.neg(!0)),i[a*2]=v,i[a*2+1]=w,s[a*2]=u.k1,s[a*2+1]=u.k2}for(var E=this._wnafMulAdd(1,i,s,a*2,n),M=0;M<a*2;M++)i[M]=null,s[M]=null;return E};function kt(r,e,t,n){To.BasePoint.call(this,r,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new je.default(e,16),this.y=new je.default(t,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}E0(kt,To.BasePoint);Kr.prototype.point=function(e,t,n){return new kt(this,e,t,n)};Kr.prototype.pointFromJSON=function(e,t){return kt.fromJSON(this,e,t)};kt.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}};kt.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};kt.fromJSON=function(e,t,n){typeof t=="string"&&(t=JSON.parse(t));var i=e.point(t[0],t[1],n);if(!t[2])return i;function s(u){return e.point(u[0],u[1],n)}var a=t[2];return i.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[i].concat(a.doubles.points.map(s))},naf:a.naf&&{wnd:a.naf.wnd,points:[i].concat(a.naf.points.map(s))}},i};kt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};kt.prototype.isInfinity=function(){return this.inf};kt.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};kt.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(i),a=s.redSqr().redISub(this.x.redAdd(this.x)),u=s.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,u)};kt.prototype.getX=function(){return this.x.fromRed()};kt.prototype.getY=function(){return this.y.fromRed()};kt.prototype.mul=function(e){return e=new je.default(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};kt.prototype.mulAdd=function(e,t,n){var i=[this,t],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};kt.prototype.jmulAdd=function(e,t,n){var i=[this,t],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};kt.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};kt.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return t};kt.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Bt(r,e,t,n){To.BasePoint.call(this,r,"jacobian"),e===null&&t===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new je.default(0)):(this.x=new je.default(e,16),this.y=new je.default(t,16),this.z=new je.default(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}E0(Bt,To.BasePoint);Kr.prototype.jpoint=function(e,t,n){return new Bt(this,e,t,n)};Bt.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(n,i)};Bt.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Bt.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(t),s=e.x.redMul(n),a=this.y.redMul(t.redMul(e.z)),u=e.y.redMul(n.redMul(this.z)),v=i.redSub(s),w=a.redSub(u);if(v.cmpn(0)===0)return w.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var E=v.redSqr(),M=E.redMul(v),k=i.redMul(E),D=w.redSqr().redIAdd(M).redISub(k).redISub(k),T=w.redMul(k.redISub(D)).redISub(a.redMul(M)),C=this.z.redMul(e.z).redMul(v);return this.curve.jpoint(D,T,C)};Bt.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,i=e.x.redMul(t),s=this.y,a=e.y.redMul(t).redMul(this.z),u=n.redSub(i),v=s.redSub(a);if(u.cmpn(0)===0)return v.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var w=u.redSqr(),E=w.redMul(u),M=n.redMul(w),k=v.redSqr().redIAdd(E).redISub(M).redISub(M),D=v.redMul(M.redISub(k)).redISub(s.redMul(E)),T=this.z.redMul(u);return this.curve.jpoint(k,D,T)};Bt.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var n=this;for(t=0;t<e;t++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,a=this.x,u=this.y,v=this.z,w=v.redSqr().redSqr(),E=u.redAdd(u);for(t=0;t<e;t++){var M=a.redSqr(),k=E.redSqr(),D=k.redSqr(),T=M.redAdd(M).redIAdd(M).redIAdd(i.redMul(w)),C=a.redMul(k),z=T.redSqr().redISub(C.redAdd(C)),I=C.redISub(z),q=T.redMul(I);q=q.redIAdd(q).redISub(D);var Y=E.redMul(v);t+1<e&&(w=w.redMul(D)),a=z,v=Y,E=q}return this.curve.jpoint(a,E.redMul(s),v)};Bt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Bt.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),u=this.x.redAdd(s).redSqr().redISub(i).redISub(a);u=u.redIAdd(u);var v=i.redAdd(i).redIAdd(i),w=v.redSqr().redISub(u).redISub(u),E=a.redIAdd(a);E=E.redIAdd(E),E=E.redIAdd(E),e=w,t=v.redMul(u.redISub(w)).redISub(E),n=this.y.redAdd(this.y)}else{var M=this.x.redSqr(),k=this.y.redSqr(),D=k.redSqr(),T=this.x.redAdd(k).redSqr().redISub(M).redISub(D);T=T.redIAdd(T);var C=M.redAdd(M).redIAdd(M),z=C.redSqr(),I=D.redIAdd(D);I=I.redIAdd(I),I=I.redIAdd(I),e=z.redISub(T).redISub(T),t=C.redMul(T.redISub(e)).redISub(I),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,t,n)};Bt.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),u=this.x.redAdd(s).redSqr().redISub(i).redISub(a);u=u.redIAdd(u);var v=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),w=v.redSqr().redISub(u).redISub(u);e=w;var E=a.redIAdd(a);E=E.redIAdd(E),E=E.redIAdd(E),t=v.redMul(u.redISub(w)).redISub(E),n=this.y.redAdd(this.y)}else{var M=this.z.redSqr(),k=this.y.redSqr(),D=this.x.redMul(k),T=this.x.redSub(M).redMul(this.x.redAdd(M));T=T.redAdd(T).redIAdd(T);var C=D.redIAdd(D);C=C.redIAdd(C);var z=C.redAdd(C);e=T.redSqr().redISub(z),n=this.y.redAdd(this.z).redSqr().redISub(k).redISub(M);var I=k.redSqr();I=I.redIAdd(I),I=I.redIAdd(I),I=I.redIAdd(I),t=T.redMul(C.redISub(e)).redISub(I)}return this.curve.jpoint(e,t,n)};Bt.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),a=t.redSqr(),u=n.redSqr(),v=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(s)),w=t.redAdd(t);w=w.redIAdd(w);var E=w.redMul(u),M=v.redSqr().redISub(E.redAdd(E)),k=E.redISub(M),D=u.redSqr();D=D.redIAdd(D),D=D.redIAdd(D),D=D.redIAdd(D);var T=v.redMul(k).redISub(D),C=n.redAdd(n).redMul(i);return this.curve.jpoint(M,T,C)};Bt.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),i=t.redSqr(),s=e.redAdd(e).redIAdd(e),a=s.redSqr(),u=this.x.redAdd(t).redSqr().redISub(e).redISub(i);u=u.redIAdd(u),u=u.redAdd(u).redIAdd(u),u=u.redISub(a);var v=u.redSqr(),w=i.redIAdd(i);w=w.redIAdd(w),w=w.redIAdd(w),w=w.redIAdd(w);var E=s.redIAdd(u).redSqr().redISub(a).redISub(v).redISub(w),M=t.redMul(E);M=M.redIAdd(M),M=M.redIAdd(M);var k=this.x.redMul(v).redISub(M);k=k.redIAdd(k),k=k.redIAdd(k);var D=this.y.redMul(E.redMul(w.redISub(E)).redISub(u.redMul(v)));D=D.redIAdd(D),D=D.redIAdd(D),D=D.redIAdd(D);var T=this.z.redAdd(u).redSqr().redISub(n).redISub(v);return this.curve.jpoint(k,D,T)};Bt.prototype.mul=function(e,t){return e=new je.default(e,t),this.curve._wnafMul(this,e)};Bt.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var i=t.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};Bt.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};Bt.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Bt.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Kc=Bs(function(r,e){"use strict";var t=e;t.base=To,t.short=e_,t.mont=null,t.edwards=null}),jc=Bs(function(r,e){"use strict";var t=e,n=Dr.assert;function i(u){u.type==="short"?this.curve=new Kc.short(u):u.type==="edwards"?this.curve=new Kc.edwards(u):this.curve=new Kc.mont(u),this.g=this.curve.g,this.n=this.curve.n,this.hash=u.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}t.PresetCurve=i;function s(u,v){Object.defineProperty(t,u,{configurable:!0,enumerable:!0,get:function(){var w=new i(v);return Object.defineProperty(t,u,{configurable:!0,enumerable:!0,value:w}),w}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Bn.default.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Bn.default.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Bn.default.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Bn.default.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Bn.default.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Bn.default.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Bn.default.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var a;try{a=null.crash()}catch{a=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Bn.default.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",a]})});function Ni(r){if(!(this instanceof Ni))return new Ni(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=yn.toArray(r.entropy,r.entropyEnc||"hex"),t=yn.toArray(r.nonce,r.nonceEnc||"hex"),n=yn.toArray(r.pers,r.persEnc||"hex");w0(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,n)}var sg=Ni;Ni.prototype._init=function(e,t,n){var i=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};Ni.prototype._hmac=function(){return new Bn.default.hmac(this.hash,this.K)};Ni.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Ni.prototype.reseed=function(e,t,n,i){typeof t!="string"&&(i=n,n=t,t=null),e=yn.toArray(e,t),n=yn.toArray(n,i),w0(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};Ni.prototype.generate=function(e,t,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(i=n,n=t,t=null),n&&(n=yn.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var a=s.slice(0,e);return this._update(n),this._reseed++,yn.encode(a,t)};var x0=Dr.assert;function Zt(r,e){this.ec=r,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var _0=Zt;Zt.fromPublic=function(e,t,n){return t instanceof Zt?t:new Zt(e,{pub:t,pubEnc:n})};Zt.fromPrivate=function(e,t,n){return t instanceof Zt?t:new Zt(e,{priv:t,privEnc:n})};Zt.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Zt.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};Zt.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Zt.prototype._importPrivate=function(e,t){this.priv=new je.default(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};Zt.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?x0(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&x0(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};Zt.prototype.derive=function(e){return e.validate()||x0(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Zt.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)};Zt.prototype.verify=function(e,t){return this.ec.verify(e,t,this)};Zt.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var t_=Dr.assert;function Vc(r,e){if(r instanceof Vc)return r;this._importDER(r,e)||(t_(r.r&&r.s,"Signature without r or s"),this.r=new je.default(r.r,16),this.s=new je.default(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}var Wc=Vc;function r_(){this.place=0}function g0(r,e){var t=r[e.place++];if(!(t&128))return t;var n=t&15;if(n===0||n>4)return!1;for(var i=0,s=0,a=e.place;s<n;s++,a++)i<<=8,i|=r[a],i>>>=0;return i<=127?!1:(e.place=a,i)}function ig(r){for(var e=0,t=r.length-1;!r[e]&&!(r[e+1]&128)&&e<t;)e++;return e===0?r:r.slice(e)}Vc.prototype._importDER=function(e,t){e=Dr.toArray(e,t);var n=new r_;if(e[n.place++]!==48)return!1;var i=g0(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=g0(e,n);if(s===!1)return!1;var a=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var u=g0(e,n);if(u===!1||e.length!==u+n.place)return!1;var v=e.slice(n.place,u+n.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(v[0]===0)if(v[1]&128)v=v.slice(1);else return!1;return this.r=new je.default(a),this.s=new je.default(v),this.recoveryParam=null,!0};function y0(r,e){if(e<128){r.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(t|128);--t;)r.push(e>>>(t<<3)&255);r.push(e)}Vc.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),n[0]&128&&(n=[0].concat(n)),t=ig(t),n=ig(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];y0(i,t.length),i=i.concat(t),i.push(2),y0(i,n.length);var s=i.concat(n),a=[48];return y0(a,s.length),a=a.concat(s),Dr.encode(a,e)};var n_=function(){throw new Error("unsupported")},ag=Dr.assert;function Hr(r){if(!(this instanceof Hr))return new Hr(r);typeof r=="string"&&(ag(Object.prototype.hasOwnProperty.call(jc,r),"Unknown curve "+r),r=jc[r]),r instanceof jc.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}var i_=Hr;Hr.prototype.keyPair=function(e){return new _0(this,e)};Hr.prototype.keyFromPrivate=function(e,t){return _0.fromPrivate(this,e,t)};Hr.prototype.keyFromPublic=function(e,t){return _0.fromPublic(this,e,t)};Hr.prototype.genKeyPair=function(e){e||(e={});for(var t=new sg({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||n_(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new je.default(2));;){var s=new je.default(t.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};Hr.prototype._truncateToN=function(e,t){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};Hr.prototype.sign=function(e,t,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),t=this.keyFromPrivate(t,n),e=this._truncateToN(new je.default(e,16));for(var s=this.n.byteLength(),a=t.getPrivate().toArray("be",s),u=e.toArray("be",s),v=new sg({hash:this.hash,entropy:a,nonce:u,pers:i.pers,persEnc:i.persEnc||"utf8"}),w=this.n.sub(new je.default(1)),E=0;;E++){var M=i.k?i.k(E):new je.default(v.generate(this.n.byteLength()));if(M=this._truncateToN(M,!0),!(M.cmpn(1)<=0||M.cmp(w)>=0)){var k=this.g.mul(M);if(!k.isInfinity()){var D=k.getX(),T=D.umod(this.n);if(T.cmpn(0)!==0){var C=M.invm(this.n).mul(T.mul(t.getPrivate()).iadd(e));if(C=C.umod(this.n),C.cmpn(0)!==0){var z=(k.getY().isOdd()?1:0)|(D.cmp(T)!==0?2:0);return i.canonical&&C.cmp(this.nh)>0&&(C=this.n.sub(C),z^=1),new Wc({r:T,s:C,recoveryParam:z})}}}}}};Hr.prototype.verify=function(e,t,n,i){e=this._truncateToN(new je.default(e,16)),n=this.keyFromPublic(n,i),t=new Wc(t,"hex");var s=t.r,a=t.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var u=a.invm(this.n),v=u.mul(e).umod(this.n),w=u.mul(s).umod(this.n),E;return this.curve._maxwellTrick?(E=this.g.jmulAdd(v,n.getPublic(),w),E.isInfinity()?!1:E.eqXToP(s)):(E=this.g.mulAdd(v,n.getPublic(),w),E.isInfinity()?!1:E.getX().umod(this.n).cmp(s)===0)};Hr.prototype.recoverPubKey=function(r,e,t,n){ag((3&t)===t,"The recovery param is more than two bits"),e=new Wc(e,n);var i=this.n,s=new je.default(r),a=e.r,u=e.s,v=t&1,w=t>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&w)throw new Error("Unable to find sencond key candinate");w?a=this.curve.pointFromX(a.add(this.curve.n),v):a=this.curve.pointFromX(a,v);var E=e.r.invm(i),M=i.sub(s).mul(E).umod(i),k=u.mul(E).umod(i);return this.g.mulAdd(M,a,k)};Hr.prototype.getKeyRecoveryParam=function(r,e,t,n){if(e=new Wc(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(r,e,i)}catch{continue}if(s.eq(t))return i}throw new Error("Unable to find valid recovery factor")};var o_=Bs(function(r,e){"use strict";var t=e;t.version="6.5.4",t.utils=Dr,t.rand=function(){throw new Error("unsupported")},t.curve=Kc,t.curves=jc,t.ec=i_,t.eddsa=null}),fg=o_.ec;var cg="signing-key/5.7.0";var S0=new We(cg),M0=null;function Ln(){return M0||(M0=new fg("secp256k1")),M0}var A0=class{constructor(e){Cs(this,"curve","secp256k1"),Cs(this,"privateKey",Xt(e)),Lc(this.privateKey)!==32&&S0.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");let t=Ln().keyFromPrivate(ht(this.privateKey));Cs(this,"publicKey","0x"+t.getPublic(!1,"hex")),Cs(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),Cs(this,"_isSigningKey",!0)}_addPoint(e){let t=Ln().keyFromPublic(ht(this.publicKey)),n=Ln().keyFromPublic(ht(e));return"0x"+t.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){let t=Ln().keyFromPrivate(ht(this.privateKey)),n=ht(e);n.length!==32&&S0.throwArgumentError("bad digest length","digest",e);let i=t.sign(n,{canonical:!0});return $c({recoveryParam:i.recoveryParam,r:Ii("0x"+i.r.toString(16),32),s:Ii("0x"+i.s.toString(16),32)})}computeSharedSecret(e){let t=Ln().keyFromPrivate(ht(this.privateKey)),n=Ln().keyFromPublic(ht(T0(e)));return Ii("0x"+t.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}};function ug(r,e){let t=$c(e),n={r:ht(t.r),s:ht(t.s)};return"0x"+Ln().recoverPubKey(ht(r),n,t.recoveryParam).encode("hex",!1)}function T0(r,e){let t=ht(r);if(t.length===32){let n=new A0(t);return e?"0x"+Ln().keyFromPrivate(t).getPublic(!0,"hex"):n.publicKey}else{if(t.length===33)return e?Xt(t):"0x"+Ln().keyFromPublic(t).getPublic(!1,"hex");if(t.length===65)return e?"0x"+Ln().keyFromPublic(t).getPublic(!0,"hex"):Xt(t)}return S0.throwArgumentError("invalid public or private key","key","[REDACTED]")}var hg="transactions/5.7.0";var $L=new We(hg),lg;(function(r){r[r.legacy=0]="legacy",r[r.eip2930=1]="eip2930",r[r.eip1559=2]="eip1559"})(lg||(lg={}));function dg(r){let e=T0(r);return mv(Uc(ks(Uc(e,1)),12))}function pg(r,e){return dg(ug(ht(r),e))}var mg="wallet/5.7.0";var VL=new We(mg);function k0(r,e){return pg(a0(r),e)}var Xc=class extends va{next(e){let t=this.value;ot.statesEqual(t,e)||super.next(e)}};var nr=class extends it{constructor(e,t,n){super(i=>{this.state$.observers.length===0&&(this.periodicSubscription=mo(0,n).pipe(ll(()=>this._syncState(this.id,{sync:lt.PREFER_CACHE}))).subscribe()),this.state$.subscribe(i).add(()=>{this.state$.observers.length===0&&this.periodicSubscription?.unsubscribe()})}),this.state$=new Xc(e),this._apiUrl=new URL(t)}get value(){return this.state$.value}get state(){return this.state$.value}next(e){this.state$.next(e)}async _syncState(e,t){let n=await nr._load(e,this._apiUrl,t);this.state$.next(ot.deserializeState(n))}get id(){return new Ke(this.state$.value.type,this.state$.value.log[0].cid)}static async createFromGenesis(e,t,n,i,s){let a=new URL("./streams",e),{state:u}=await Rt(a,{method:"post",body:{type:t,genesis:ot.serializeCommit(n),opts:i}});return new nr(ot.deserializeState(u),e,s)}static async applyCommit(e,t,n,i,s){let a=new URL("./commits",e),{state:u}=await Rt(a,{method:"post",body:{streamId:t.toString(),commit:ot.serializeCommit(n),opts:i}});return new nr(ot.deserializeState(u),e,s)}static async _load(e,t,n){let i=cm(new URL(`./streams/${e}`,t),n),{state:s}=await Rt(i);return s}static async load(e,t,n,i){let s=await nr._load(e,t,i);return new nr(ot.deserializeState(s),t,n)}static async loadStreamCommits(e,t){let n=new URL(`./commits/${e}`,t),{commits:i}=await Rt(n);return i.map(s=>({cid:s.cid,value:ot.deserializeCommit(s.value)}))}complete(){this.state$.complete()}};var L0={};Ze(L0,{JsonPatchError:()=>vt,_areEquals:()=>Ja,applyOperation:()=>Io,applyPatch:()=>iu,applyReducer:()=>M_,deepClone:()=>E_,getValueByPointer:()=>ru,validate:()=>Rg,validator:()=>nu});var x_=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),w_=Object.prototype.hasOwnProperty;function Qc(r,e){return w_.call(r,e)}function eu(r){if(Array.isArray(r)){for(var e=new Array(r.length),t=0;t<e.length;t++)e[t]=""+t;return e}if(Object.keys)return Object.keys(r);var n=[];for(var i in r)Qc(r,i)&&n.push(i);return n}function Lt(r){switch(typeof r){case"object":return JSON.parse(JSON.stringify(r));case"undefined":return null;default:return r}}function tu(r){for(var e=0,t=r.length,n;e<t;){if(n=r.charCodeAt(e),n>=48&&n<=57){e++;continue}return!1}return!0}function Un(r){return r.indexOf("/")===-1&&r.indexOf("~")===-1?r:r.replace(/~/g,"~0").replace(/\//g,"~1")}function ja(r){return r.replace(/~1/g,"/").replace(/~0/g,"~")}function Zc(r){if(r===void 0)return!0;if(r){if(Array.isArray(r)){for(var e=0,t=r.length;e<t;e++)if(Zc(r[e]))return!0}else if(typeof r=="object"){for(var n=eu(r),i=n.length,s=0;s<i;s++)if(Zc(r[n[s]]))return!0}}return!1}function Og(r,e){var t=[r];for(var n in e){var i=typeof e[n]=="object"?JSON.stringify(e[n],null,2):e[n];typeof i<"u"&&t.push(n+": "+i)}return t.join(`
`)}var Ga=function(r){x_(e,r);function e(t,n,i,s,a){var u=this.constructor,v=r.call(this,Og(t,{name:n,index:i,operation:s,tree:a}))||this;return v.name=n,v.index=i,v.operation=s,v.tree=a,Object.setPrototypeOf(v,u.prototype),v.message=Og(t,{name:n,index:i,operation:s,tree:a}),v}return e}(Error);var vt=Ga,E_=Lt,Fs={add:function(r,e,t){return r[e]=this.value,{newDocument:t}},remove:function(r,e,t){var n=r[e];return delete r[e],{newDocument:t,removed:n}},replace:function(r,e,t){var n=r[e];return r[e]=this.value,{newDocument:t,removed:n}},move:function(r,e,t){var n=ru(t,this.path);n&&(n=Lt(n));var i=Io(t,{op:"remove",path:this.from}).removed;return Io(t,{op:"add",path:this.path,value:i}),{newDocument:t,removed:n}},copy:function(r,e,t){var n=ru(t,this.from);return Io(t,{op:"add",path:this.path,value:Lt(n)}),{newDocument:t}},test:function(r,e,t){return{newDocument:t,test:Ja(r[e],this.value)}},_get:function(r,e,t){return this.value=r[e],{newDocument:t}}},__={add:function(r,e,t){return tu(e)?r.splice(e,0,this.value):r[e]=this.value,{newDocument:t,index:e}},remove:function(r,e,t){var n=r.splice(e,1);return{newDocument:t,removed:n[0]}},replace:function(r,e,t){var n=r[e];return r[e]=this.value,{newDocument:t,removed:n}},move:Fs.move,copy:Fs.copy,test:Fs.test,_get:Fs._get};function ru(r,e){if(e=="")return r;var t={op:"_get",path:e};return Io(r,t),t.value}function Io(r,e,t,n,i,s){if(t===void 0&&(t=!1),n===void 0&&(n=!0),i===void 0&&(i=!0),s===void 0&&(s=0),t&&(typeof t=="function"?t(e,0,r,e.path):nu(e,0)),e.path===""){var a={newDocument:r};if(e.op==="add")return a.newDocument=e.value,a;if(e.op==="replace")return a.newDocument=e.value,a.removed=r,a;if(e.op==="move"||e.op==="copy")return a.newDocument=ru(r,e.from),e.op==="move"&&(a.removed=r),a;if(e.op==="test"){if(a.test=Ja(r,e.value),a.test===!1)throw new vt("Test operation failed","TEST_OPERATION_FAILED",s,e,r);return a.newDocument=r,a}else{if(e.op==="remove")return a.removed=r,a.newDocument=null,a;if(e.op==="_get")return e.value=r,a;if(t)throw new vt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,e,r);return a}}else{n||(r=Lt(r));var u=e.path||"",v=u.split("/"),w=r,E=1,M=v.length,k=void 0,D=void 0,T=void 0;for(typeof t=="function"?T=t:T=nu;;){if(D=v[E],D&&D.indexOf("~")!=-1&&(D=ja(D)),i&&(D=="__proto__"||D=="prototype"&&E>0&&v[E-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(t&&k===void 0&&(w[D]===void 0?k=v.slice(0,E).join("/"):E==M-1&&(k=e.path),k!==void 0&&T(e,0,r,k)),E++,Array.isArray(w)){if(D==="-")D=w.length;else{if(t&&!tu(D))throw new vt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,e,r);tu(D)&&(D=~~D)}if(E>=M){if(t&&e.op==="add"&&D>w.length)throw new vt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,e,r);var a=__[e.op].call(e,w,D,r);if(a.test===!1)throw new vt("Test operation failed","TEST_OPERATION_FAILED",s,e,r);return a}}else if(E>=M){var a=Fs[e.op].call(e,w,D,r);if(a.test===!1)throw new vt("Test operation failed","TEST_OPERATION_FAILED",s,e,r);return a}if(w=w[D],t&&E<M&&(!w||typeof w!="object"))throw new vt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,e,r)}}}function iu(r,e,t,n,i){if(n===void 0&&(n=!0),i===void 0&&(i=!0),t&&!Array.isArray(e))throw new vt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(r=Lt(r));for(var s=new Array(e.length),a=0,u=e.length;a<u;a++)s[a]=Io(r,e[a],t,!0,i,a),r=s[a].newDocument;return s.newDocument=r,s}function M_(r,e,t){var n=Io(r,e);if(n.test===!1)throw new vt("Test operation failed","TEST_OPERATION_FAILED",t,e,r);return n.newDocument}function nu(r,e,t,n){if(typeof r!="object"||r===null||Array.isArray(r))throw new vt("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,r,t);if(Fs[r.op]){if(typeof r.path!="string")throw new vt("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,r,t);if(r.path.indexOf("/")!==0&&r.path.length>0)throw new vt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,r,t);if((r.op==="move"||r.op==="copy")&&typeof r.from!="string")throw new vt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,r,t);if((r.op==="add"||r.op==="replace"||r.op==="test")&&r.value===void 0)throw new vt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,r,t);if((r.op==="add"||r.op==="replace"||r.op==="test")&&Zc(r.value))throw new vt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,r,t);if(t){if(r.op=="add"){var i=r.path.split("/").length,s=n.split("/").length;if(i!==s+1&&i!==s)throw new vt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,r,t)}else if(r.op==="replace"||r.op==="remove"||r.op==="_get"){if(r.path!==n)throw new vt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,r,t)}else if(r.op==="move"||r.op==="copy"){var a={op:"_get",path:r.from,value:void 0},u=Rg([a],t);if(u&&u.name==="OPERATION_PATH_UNRESOLVABLE")throw new vt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,r,t)}}}else throw new vt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,r,t)}function Rg(r,e,t){try{if(!Array.isArray(r))throw new vt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)iu(Lt(e),Lt(r),t||!0);else{t=t||nu;for(var n=0;n<r.length;n++)t(r[n],n,e,void 0)}}catch(i){if(i instanceof vt)return i;throw i}}function Ja(r,e){if(r===e)return!0;if(r&&e&&typeof r=="object"&&typeof e=="object"){var t=Array.isArray(r),n=Array.isArray(e),i,s,a;if(t&&n){if(s=r.length,s!=e.length)return!1;for(i=s;i--!==0;)if(!Ja(r[i],e[i]))return!1;return!0}if(t!=n)return!1;var u=Object.keys(r);if(s=u.length,s!==Object.keys(e).length)return!1;for(i=s;i--!==0;)if(!e.hasOwnProperty(u[i]))return!1;for(i=s;i--!==0;)if(a=u[i],!Ja(r[a],e[a]))return!1;return!0}return r!==r&&e!==e}var q0={};Ze(q0,{compare:()=>O_,generate:()=>U0,observe:()=>I_,unobserve:()=>D_});var $0=new WeakMap,S_=function(){function r(e){this.observers=new Map,this.obj=e}return r}(),A_=function(){function r(e,t){this.callback=e,this.observer=t}return r}();function T_(r){return $0.get(r)}function k_(r,e){return r.observers.get(e)}function C_(r,e){r.observers.delete(e.callback)}function D_(r,e){e.unobserve()}function I_(r,e){var t=[],n,i=T_(r);if(!i)i=new S_(r),$0.set(r,i);else{var s=k_(i,e);n=s&&s.observer}if(n)return n;if(n={},i.value=Lt(r),e){n.callback=e,n.next=null;var a=function(){U0(n)},u=function(){clearTimeout(n.next),n.next=setTimeout(a)};typeof window<"u"&&(window.addEventListener("mouseup",u),window.addEventListener("keyup",u),window.addEventListener("mousedown",u),window.addEventListener("keydown",u),window.addEventListener("change",u))}return n.patches=t,n.object=r,n.unobserve=function(){U0(n),clearTimeout(n.next),C_(i,n),typeof window<"u"&&(window.removeEventListener("mouseup",u),window.removeEventListener("keyup",u),window.removeEventListener("mousedown",u),window.removeEventListener("keydown",u),window.removeEventListener("change",u))},i.observers.set(e,new A_(e,n)),n}function U0(r,e){e===void 0&&(e=!1);var t=$0.get(r.object);F0(t.value,r.object,r.patches,"",e),r.patches.length&&iu(t.value,r.patches);var n=r.patches;return n.length>0&&(r.patches=[],r.callback&&r.callback(n)),n}function F0(r,e,t,n,i){if(e!==r){typeof e.toJSON=="function"&&(e=e.toJSON());for(var s=eu(e),a=eu(r),u=!1,v=!1,w=a.length-1;w>=0;w--){var E=a[w],M=r[E];if(Qc(e,E)&&!(e[E]===void 0&&M!==void 0&&Array.isArray(e)===!1)){var k=e[E];typeof M=="object"&&M!=null&&typeof k=="object"&&k!=null&&Array.isArray(M)===Array.isArray(k)?F0(M,k,t,n+"/"+Un(E),i):M!==k&&(u=!0,i&&t.push({op:"test",path:n+"/"+Un(E),value:Lt(M)}),t.push({op:"replace",path:n+"/"+Un(E),value:Lt(k)}))}else Array.isArray(r)===Array.isArray(e)?(i&&t.push({op:"test",path:n+"/"+Un(E),value:Lt(M)}),t.push({op:"remove",path:n+"/"+Un(E)}),v=!0):(i&&t.push({op:"test",path:n,value:r}),t.push({op:"replace",path:n,value:e}),u=!0)}if(!(!v&&s.length==a.length))for(var w=0;w<s.length;w++){var E=s[w];!Qc(r,E)&&e[E]!==void 0&&t.push({op:"add",path:n+"/"+Un(E),value:Lt(e[E])})}}}function O_(r,e,t){t===void 0&&(t=!1);var n=[];return F0(r,e,n,"",t),n}var ou=Object.assign({},L0,q0,{JsonPatchError:Ga,deepClone:Lt,escapePathComponent:Un,unescapePathComponent:ja});var Bg=Je(yo(),1);var Lg=Je(Si(),1);var R_=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Ir,H0={anchor:!0,publish:!0,pin:!0,sync:lt.PREFER_CACHE},N_={sync:lt.PREFER_CACHE},Ng={anchor:!0,publish:!0};function z0(r,e){if(typeof r?.schema=="string")try{at.fromString(r.schema)}catch{throw new Error("Schema must be a CommitID")}let t={controllers:r?.controllers,family:r?.family,schema:r?.schema?.toString(),tags:r?.tags};if(e)r?.deterministic||(t.unique=Ge((0,Lg.randomBytes)(12),"base64")),r?.forbidControllerChange&&(t.forbidControllerChange=!0);else{if(r?.deterministic!==void 0||r?.unique!==void 0)throw new Error("Cannot change 'deterministic' or 'unique' properties on existing Streams");if(r?.forbidControllerChange!==void 0)throw new Error("Cannot change 'forbidControllerChange' property on existing Streams")}return Object.keys(t).forEach(n=>t[n]===void 0&&delete t[n]),t}async function Pg(r){if(!r.did)throw new Error("No DID provided");return r.did.authenticated||(await r.did.authenticate(),r.loggerProvider&&r.loggerProvider.getDiagnosticsLogger().imp(`Now authenticated as DID ${r.did.id}`)),r.did}async function K0(){throw new Error("Historical stream commits cannot be modified. Load the stream without specifying a commit to make updates.")}var ai=Ir=class extends Tn{constructor(){super(...arguments),this._isReadOnly=!1}get content(){return super.content}get metadata(){let{next:e,metadata:t}=this.state$.value;return(0,Bg.default)(e?.metadata??t)}get controllers(){return this.metadata.controllers}static async create(e,t,n,i={}){i={...H0,...i},!n?.deterministic&&i.syncTimeoutSeconds==null&&(i.syncTimeoutSeconds=0);let s=i.asDID?{did:i.asDID}:e,a=await Ir.makeGenesis(s,t,n);return e.createStreamFromGenesis(Ir.STREAM_TYPE_ID,a,i)}static async createFromGenesis(e,t,n={}){n={...H0,...n},t.header?.unique&&n.syncTimeoutSeconds==null&&(n.syncTimeoutSeconds=0);let i=t.data?await Ir._signDagJWS(e,t):t;return e.createStreamFromGenesis(Ir.STREAM_TYPE_ID,i,n)}static async deterministic(e,t,n={}){if(n={...H0,...n},t={...t,deterministic:!0},t.family==null&&t.tags==null)throw new Error("Family and/or tags are required when creating a deterministic tile document");let i=await Ir.makeGenesis(e,null,t);return e.createStreamFromGenesis(Ir.STREAM_TYPE_ID,i,n)}static async load(e,t,n={}){n={...N_,...n};let i=Ar.from(t);if(i.type!=Ir.STREAM_TYPE_ID)throw new Error(`StreamID ${i.toString()} does not refer to a '${Ir.STREAM_TYPE_NAME}' stream, but to a ${i.typeName}`);return e.loadStream(i,n)}async update(e,t,n={}){n={...Ng,...n};let i=n.asDID?{did:n.asDID}:this.api,s=await this.makeCommit(i,e,t),a=await this.api.applyCommit(this.id,s,n);this.state$.next(a.state)}async patch(e,t={}){t={...Ng,...t};let i={header:z0(this.metadata,!1),data:e,prev:this.tip,id:this.id.cid},s=await Ir._signDagJWS(this.api,i),a=await this.api.applyCommit(this.id,s,t);this.state$.next(a.state)}makeReadOnly(){this.update=K0,this.patch=K0,this.sync=K0,this._isReadOnly=!0}get isReadOnly(){return this._isReadOnly}async makeCommit(e,t,n){let i=await this._makeRawCommit(t,n);return Ir._signDagJWS(e,i)}async _makeRawCommit(e,t){t||(t={});let n=z0(t,!1);if(e==null&&(e=this.content),n.controllers){if(n.controllers.length!==1)throw new Error("Exactly one controller must be specified");if(!n.controllers[0])throw new Error("Controller cannot be updated to an undefined value.")}let i=ou.compare(this.content,e),s=this.state.log[0];return{header:n,data:i,prev:this.tip,id:s.cid}}static async makeGenesis(e,t,n){if(n||(n={}),!n.controllers||n.controllers.length===0)if(e.did){let a=await Pg(e);n.controllers=[a.hasParent?a.parent:a.id]}else throw new Error("No controllers specified");if(n.controllers?.length!==1)throw new Error("Exactly one controller must be specified");let i=z0(n,!0);if(n?.deterministic&&t)throw new Error("Initial content must be null when creating a deterministic Tile document");if(t==null){let a={header:i};return ao(a),a}let s={data:t,header:i};return Ir._signDagJWS(e,s)}static async _signDagJWS(e,t){return(await Pg(e)).createDagJWS(t)}};ai.STREAM_TYPE_NAME="tile";ai.STREAM_TYPE_ID=0;ai=Ir=R_([Mi()],ai);function P_(r,e){try{var t=r()}catch(n){return e(n)}return t&&t.then?t.then(void 0,e):t}function B_(){let r=new Map;return function(e,t){try{let i=function(a){if(n)return a;let u=r.get(e.didUrl);return u!==void 0?u:Promise.resolve(t()).then(function(v){var w;return((w=v.didResolutionMetadata)==null?void 0:w.error)!=="notFound"&&r.set(e.didUrl,v),v})},n,s=function(){if(e.params&&e.params["no-cache"]==="true")return Promise.resolve(t()).then(function(a){return n=1,a})}();return Promise.resolve(s&&s.then?s.then(i):i(s))}catch(n){return Promise.reject(n)}}}function L_(r,e){return e()}var U_="(?:%[0-9a-fA-F]{2})",Ug=`(?:[a-zA-Z0-9._-]|${U_})`,$_="([a-z0-9]+)",F_=`((?:${Ug}*:)*(${Ug}+))`,$g="[a-zA-Z0-9_.:%-]",q_=`;${$g}+=${$g}*`,H_=`((${q_})*)`,z_="(/[^#?]*)?",K_="([?][^#]*)?",j_="(#.*)?",G_=new RegExp(`^did:${$_}:${F_}${H_}${z_}${K_}${j_}$`);function j0(r){if(r===""||!r)return null;let e=r.match(G_);if(e){let t={did:`did:${e[1]}:${e[2]}`,method:e[1],id:e[2],didUrl:r};if(e[4]){let n=e[4].slice(1).split(";");t.params={};for(let i of n){let s=i.split("=");t.params[s[0]]=s[1]}}return e[6]&&(t.path=e[6]),e[7]&&(t.query=e[7].slice(1)),e[8]&&(t.fragment=e[8].slice(1)),t}return null}var su={didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};function J_(r){return function(e,t,n){try{return Promise.resolve(P_(function(){return Promise.resolve(r(e,t,n)).then(function(i){return{...su,didResolutionMetadata:{contentType:"application/did+ld+json"},didDocument:i}})},function(i){return{...su,didResolutionMetadata:{error:"notFound",message:i.toString()}}}))}catch(i){return Promise.reject(i)}}}var au=class{constructor(e={},t={}){this.registry=void 0,this.cache=void 0,this.registry=e,this.cache=t.cache===!0?B_():t.cache||L_,t.legacyResolvers&&Object.keys(t.legacyResolvers).map(n=>{this.registry[n]||(this.registry[n]=J_(t.legacyResolvers[n]))})}resolve(e,t={}){try{let n=this,i=j0(e);if(i===null)return Promise.resolve({...su,didResolutionMetadata:{error:"invalidDid"}});let s=n.registry[i.method];return s?Promise.resolve(n.cache(i,()=>s(i.did,i,n,t))):Promise.resolve({...su,didResolutionMetadata:{error:"unsupportedDidMethod"}})}catch(n){return Promise.reject(n)}}};var qg=Je(yo(),1),V_=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Oo,G0=()=>{throw new Error("Historical stream commits cannot be modified. Load the stream without specifying a commit to make updates.")},Fg={anchor:!1,publish:!0,pin:!0,sync:lt.PREFER_CACHE},J0={anchor:!0,publish:!0},W_={sync:lt.PREFER_CACHE},Ro=Oo=class extends Tn{constructor(){super(...arguments),this._isReadOnly=!1}get did(){return this.content}get metadata(){let{next:e,metadata:t}=this.state$.value;return(0,qg.default)(e?.metadata??t)}get controllers(){return this.metadata.controllers}static async fromAccount(e,t,n={}){n={...Fg,...n};let i=t2(t),s=Oo.makeGenesis(i);return Oo.fromGenesis(e,s,n)}static async fromGenesis(e,t,n={}){return n={...Fg,...n},e.createStreamFromGenesis(Oo.STREAM_TYPE_ID,t,n)}async setDid(e,t,n={}){n={...J0,...n};let i=typeof e=="string"?e.trim():e.id;if(j0(i)?.did!==i)throw new Error(`DID is not valid: '${i}'`);let a=await t.createLink(i);return this.setDidProof(a,n)}async setDidProof(e,t={}){t={...J0,...t};let n=this.makeCommit(e),i=await this.api.applyCommit(this.id,n,t);this.state$.next(i.state)}async clearDid(e,t={}){t={...J0,...t};let n=await e.createLink("");return this.setDidProof(n,t)}static async load(e,t,n={}){n={...W_,...n};let i=Ar.from(t);if(i.type!=Oo.STREAM_TYPE_ID)throw new Error(`StreamID ${i.toString()} does not refer to a '${Oo.STREAM_TYPE_NAME}' stream, but to a ${i.typeName}`);return e.loadStream(i,n)}static makeGenesis(e){return e.chainId.namespace==="eip155"&&(e.address=e.address.toLowerCase()),{header:{controllers:[`${e.address}@${e.chainId.toString()}`],family:`caip10-${e.chainId.toString()}`}}}makeCommit(e){return{data:e,prev:this.tip,id:this.id.cid}}makeReadOnly(){this.setDidProof=G0,this.setDid=G0,this.sync=G0,this._isReadOnly=!0}get isReadOnly(){return this._isReadOnly}};Ro.STREAM_TYPE_NAME="caip10-link";Ro.STREAM_TYPE_ID=1;Ro=Oo=V_([Mi()],Ro);rr();vi();var _3=Je(w3(),1),HM=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},xn,zM={sync:lt.PREFER_CACHE};async function E3(r){if(r.did==null)throw new Error("No DID provided");r.did.authenticated||(await r.did.authenticate(),r.loggerProvider&&r.loggerProvider.getDiagnosticsLogger().imp(`Now authenticated as DID ${r.did.id}`))}async function KM(){throw new Error("Historical stream commits cannot be modified. Load the stream without specifying a commit to make updates.")}var Li=xn=class extends Tn{constructor(){super(...arguments),this._isReadOnly=!1}get content(){return super.content}get metadata(){return{controller:this.state$.value.metadata.controllers[0],model:xn.MODEL}}static async create(e,t,n){xn.assertComplete(t),xn.assertRelationsValid(t);let i={publish:!0,anchor:!0,pin:!0,sync:lt.NEVER_SYNC},s=await xn._makeGenesis(e,t,n);return await e.createStreamFromGenesis(xn.STREAM_TYPE_ID,s,i)}static assertComplete(e,t){if(!e.name)throw t?new Error(`Model with StreamID ${t.toString()} is missing a 'name' field`):new Error("Model is missing a 'name' field");if(!e.schema)throw t?new Error(`Model ${e.name} (${t.toString()}) is missing a 'schema' field`):new Error(`Model ${e.name} is missing a 'schema' field`);if(!e.accountRelation)throw t?new Error(`Model ${e.name} (${t.toString()}) is missing a 'accountRelation' field`):new Error(`Model ${e.name} is missing a 'accountRelation' field`)}static assertRelationsValid(e){if(e.relations)for(let[t,n]of Object.entries(e.relations))switch(n.type){case"account":continue;case"document":try{Ke.fromString(n.model)}catch(i){throw new Error(`Relation on field ${t} has invalid model: ${i.toString()}`)}continue;default:throw new Error(`Relation on field ${t} has unexpected type ${n.type}`)}}static async load(e,t,n={}){n={...zM,...n};let i=Ar.from(t);if(i.type!=xn.STREAM_TYPE_ID)throw new Error(`StreamID ${i.toString()} does not refer to a '${xn.STREAM_TYPE_NAME}' stream, but to a ${i.typeName}`);return await e.loadStream(i,n)}static async _makeGenesis(e,t,n){let i=await this._makeRawGenesis(e,t,n);return xn._signDagJWS(e,i)}static async _makeRawGenesis(e,t,n){if(t==null)throw new Error("Genesis content cannot be null");if(!n||!n.controller)if(e.did)await E3(e),n={controller:e.did.hasParent?e.did.parent:e.did.id};else throw new Error("No controller specified");let i={controllers:[n.controller],model:xn.MODEL.bytes};return{data:t,header:i}}makeReadOnly(){this.sync=KM,this._isReadOnly=!0}get isReadOnly(){return this._isReadOnly}static async _signDagJWS(e,t){return await E3(e),e.did.createDagJWS(t)}};Li.STREAM_TYPE_NAME="model";Li.STREAM_TYPE_ID=2;Li.MODEL=function(){let r=ao("model-v1"),e=_3.default.encode(r,"identity"),t=_n(ss,e),n=Le.createV1(ss,t);return new Ke("UNLOADABLE",n)}();Li=xn=HM([Mi()],Li);var A3=Je(Si(),1);var jM=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},wn,GM={anchor:!0,publish:!0,pin:!0,sync:lt.NEVER_SYNC,syncTimeoutSeconds:0},JM={anchor:!1,publish:!1,pin:!0,sync:lt.PREFER_CACHE},VM={sync:lt.PREFER_CACHE},M3={anchor:!0,publish:!0};async function S3(r){if(r.did==null)throw new Error("No DID provided");r.did.authenticated||(await r.did.authenticate(),r.loggerProvider&&r.loggerProvider.getDiagnosticsLogger().imp(`Now authenticated as DID ${r.did.id}`))}async function X0(){throw new Error("Historical stream commits cannot be modified. Load the stream without specifying a commit to make updates.")}var Po=wn=class extends Tn{constructor(){super(...arguments),this._isReadOnly=!1}get content(){return super.content}get metadata(){let e=this.state$.value.metadata;return{controller:e.controllers[0],model:e.model}}static async create(e,t,n,i={}){i={...GM,...i};let s=i.asDID?{did:i.asDID}:e,a=await wn._makeGenesis(s,t,n);return e.createStreamFromGenesis(wn.STREAM_TYPE_ID,a,i)}static async single(e,t,n={}){n={...JM,...n};let i=n.asDID?{did:n.asDID}:e;t={...t,deterministic:!0};let s=await wn._makeGenesis(i,null,t);return e.createStreamFromGenesis(wn.STREAM_TYPE_ID,s,n)}static async load(e,t,n={}){n={...VM,...n};let i=Ar.from(t);if(i.type!=wn.STREAM_TYPE_ID)throw new Error(`StreamID ${i.toString()} does not refer to a '${wn.STREAM_TYPE_NAME}' stream, but to a ${i.typeName}`);return e.loadStream(i,n)}async replace(e,t={}){t={...M3,...t};let n=t.asDID?{did:t.asDID}:this.api,i=await this._makeCommit(n,e),s=await this.api.applyCommit(this.id,i,t);this.state$.next(s.state)}async patch(e,t={}){t={...M3,...t};let n={data:e,prev:this.tip,id:this.id.cid},i=await wn._signDagJWS(this.api,n),s=await this.api.applyCommit(this.id,i,t);this.state$.next(s.state)}makeReadOnly(){this.replace=X0,this.patch=X0,this.sync=X0,this._isReadOnly=!0}get isReadOnly(){return this._isReadOnly}_makeCommit(e,t){let n=this._makeRawCommit(t);return wn._signDagJWS(e,n)}_makeRawCommit(e){return{data:ou.compare(this.content,e||{}),prev:this.tip,id:this.state.log[0].cid}}static async _makeGenesis(e,t,n){let i=await this._makeRawGenesis(e,t,n);return n.deterministic?(ao(i),i):wn._signDagJWS(e,i)}static async _makeRawGenesis(e,t,n){if(!n.model)throw new Error("Must specify a 'model' when creating a ModelInstanceDocument");let i=n.controller;if(!i)if(e.did)await S3(e),i=e.did.hasParent?e.did.parent:e.did.id;else throw new Error("No controller specified");let s={controllers:[i],model:n.model.bytes};return n.deterministic||(s.unique=(0,A3.randomBytes)(12)),{data:t,header:s}}static async _signDagJWS(e,t){return await S3(e),e.did.createDagJWS(t)}};Po.STREAM_TYPE_NAME="MID";Po.STREAM_TYPE_ID=3;Po=wn=jM([Mi()],Po);var hu=class{constructor(e){this._apiUrl=e}async add(e,t){let n={};t&&(n.force=!0);let i=new URL(`./pins/${e}`,this._apiUrl);await Rt(i,{method:"post",body:n})}async rm(e,t){let n=new URL(`./pins/${e}`,this._apiUrl);await Rt(n,{method:"delete",body:{opts:t}})}async ls(e){let t=new URL("./pins",this._apiUrl);e&&(t=new URL(`./pins/${e.toString()}`,this._apiUrl));let n=await Rt(t),{pinnedStreamIds:i}=n;return{[Symbol.asyncIterator](){let s=0;return{next(){return s===i.length?Promise.resolve({value:null,done:!0}):Promise.resolve({value:i[s++],done:!1})}}}}}};var lu=class{constructor(e){this._fetchJson=Rt,this._collectionURL=new URL("./collection",e),this._countURL=new URL("./collection/count",e)}async count(e){return(await this._fetchJson(this._countURL,{method:"POST",body:el(e)})).count}async query(e){let t=await this._fetchJson(this._collectionURL,{method:"POST",body:el(e)});return{edges:t.edges.map(i=>({cursor:i.cursor,node:ot.deserializeState(i.node)})),pageInfo:t.pageInfo}}};var du=class{constructor(e,t){this._apiUrl=e,this._getDidFn=t,this._fetchJson=Rt,this.modelsPath="./admin/models",this.getCodePath="./admin/getCode"}getCodeUrl(){return new URL(this.getCodePath,this._apiUrl)}getModelsUrl(){return new URL(this.modelsPath,this._apiUrl)}async buildJWS(e,t,n){let i=n?{models:n.map(a=>a.toString())}:void 0,s=await e.createJWS({code:t,requestPath:this.getModelsUrl().pathname,requestBody:i});return`${s.signatures[0].protected}.${s.payload}.${s.signatures[0].signature}`}async generateCode(){return(await this._fetchJson(this.getCodeUrl())).code}async startIndexingModels(e){let t=await this.generateCode();await this._fetchJson(this.getModelsUrl(),{method:"post",body:{jws:await this.buildJWS(this._getDidFn(),t,e)}})}async getIndexedModels(){let e=await this.generateCode();return(await this._fetchJson(this.getModelsUrl(),{headers:{Authorization:`Basic ${await this.buildJWS(this._getDidFn(),e)}`}})).models.map(n=>Ke.fromString(n))}async stopIndexingModels(e){let t=await this.generateCode();await this._fetchJson(this.getModelsUrl(),{method:"delete",body:{jws:await this.buildJWS(this._getDidFn(),t,e)}})}};var WM="/api/v0/",YM="http://localhost:7007",XM={syncInterval:5e3},ZM={anchor:!0,publish:!0,sync:lt.PREFER_CACHE},QM={anchor:!0,publish:!0,sync:lt.PREFER_CACHE},T3={sync:lt.PREFER_CACHE},pu=class{constructor(e=YM,t={}){this._config={...XM,...t},this._apiUrl=new URL(WM,e),this.context={api:this},this.pin=new hu(this._apiUrl),this.index=new lu(this._apiUrl);let n=(()=>this.did).bind(this);this.admin=new du(this._apiUrl,n),this._streamConstructors={[Ro.STREAM_TYPE_ID]:Ro,[Li.STREAM_TYPE_ID]:Li,[Po.STREAM_TYPE_ID]:Po,[ai.STREAM_TYPE_ID]:ai}}get did(){return this.context.did}set did(e){this.context.did=e}async createStreamFromGenesis(e,t,n={}){n={...QM,...n};let i=await nr.createFromGenesis(this._apiUrl,e,t,n,this._config.syncInterval);return this.buildStreamFromDocument(i)}async loadStream(e,t={}){t={...T3,...t};let n=Ar.from(e),i=await nr.load(n,this._apiUrl,this._config.syncInterval,t);return this.buildStreamFromDocument(i)}async multiQuery(e,t){let n=e.map(a=>({...a,streamId:typeof a.streamId=="string"?a.streamId:a.streamId.toString()})),i=new URL("./multiqueries",this._apiUrl),s=await Rt(i,{method:"post",body:{queries:n,timeout:t}});return Object.entries(s).reduce((a,u)=>{let[v,w]=u,E=ot.deserializeState(w),M=new nr(E,this._apiUrl,this._config.syncInterval);return a[v]=this.buildStreamFromDocument(M),a},{})}loadStreamCommits(e){let t=Qh(e);return nr.loadStreamCommits(t,this._apiUrl)}async applyCommit(e,t,n={}){n={...ZM,...n};let i=Qh(e),s=await nr.applyCommit(this._apiUrl,i,t,n,this._config.syncInterval);return this.buildStreamFromDocument(s)}async requestAnchor(e,t={}){t={...T3,...t};let{anchorStatus:n}=await Rt(`${this._apiUrl}/streams/${e.toString()}/anchor`,{method:"post",body:{opts:t}});return n}addStreamHandler(e){this._streamConstructors[e.name]=e.stream_constructor}buildStreamFromState(e){let t=new nr(e,this._apiUrl,this._config.syncInterval);return this.buildStreamFromDocument(t)}buildStreamFromDocument(e){let t=e.state.type,n=this._streamConstructors[t];if(!n)throw new Error(`Failed to find constructor for stream ${t}`);return new n(e,this.context)}async setDID(e){this.context.did=e}async getSupportedChains(){if(this._supportedChains)return this._supportedChains;let{supportedChains:e}=await Rt(this._apiUrl+"/node/chains");return this._supportedChains=e,e}async close(){}};var zu=Je(Yc(),1);Of();var Td=Je(C3(),1),i6=Je(o0(),1),Zs=Je(wy(),1),Lu=Je(Yc(),1),o6=Je(_y(),1),Md=Je(Ty(),1),lf=Je(Iy(),1),kd=Je(jy(),1),Cd=Je(Si(),1);aa();function Vr(r){return Ge(r,"base64url")}function tr(r){let e=r.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return He(e,"base64url")}function Dd(r){return He(r,"base58btc")}function oA(r){return Ge(r,"base58btc")}function Ed(r){let e=r.startsWith("0x")?r.substring(2):r;return He(e.toLowerCase(),"base16")}function Sd(r){return Vr(He(r))}function s6(r){return Ge(tr(r))}function pi(r){return Ge(r,"base16")}function a6(r){return He(r)}function f6({r,s:e,recoveryParam:t},n){let i=new Uint8Array(n?65:64);if(i.set(He(r,"base16"),0),i.set(He(e,"base16"),32),n){if(typeof t>"u")throw new Error("Signer did not return a recoveryParam");i[64]=t}return Vr(i)}function sA(r){let e=tr(r);if(e.length<64||e.length>65)throw new TypeError(`Wrong size for signature. Expected 64 or 65 bytes, but got ${e.length}`);let t=pi(e.slice(0,32)),n=pi(e.slice(32,64)),i=e.length===65?e[64]:void 0;return{r:t,s:n,recoveryParam:i}}function c6(r,e){return yr([tr(r),tr(e)])}function qo(r){let e=typeof r=="string"?He(r):r;return(0,Td.hash)(e)}function aA(r){return new Uint8Array(i6.default.keccak_256.arrayBuffer(r))}function u6(r){let e=He(r.slice(2),"base16");return`0x${Ge(aA(e).slice(-20),"base16")}`}function Ad(r,e=new Uint8Array(4)){let t=He(r.toString(),"base10");return e.set(t,4-t.length),e}var _d=r=>yr([Ad(r.length),r]);function h6(r,e,t,n,i){if(e!==256)throw new Error(`Unsupported key length: ${e}`);let s=yr([_d(He(t)),_d(typeof n>"u"?new Uint8Array(0):n),_d(typeof i>"u"?new Uint8Array(0):i),Ad(e)]);return(0,Td.hash)(yr([Ad(1),r,s]))}var Y$=new Zs.default.ec("secp256k1");function l6(r){let e=r;if(e.length!==64)throw new Error(`bad_key: Invalid private key format. Expecting 64 bytes, but got ${e.length}`);return function(t){try{let n=typeof t=="string"?a6(t):t,i=(0,Lu.sign)(e,n);return Promise.resolve(Vr(i))}catch(n){return Promise.reject(n)}}}var X$=new Zs.default.ec("p256");function Id(r){return typeof r=="object"&&"r"in r&&"s"in r}function fA(){return function(e,t){try{return Promise.resolve(t(e)).then(function(n){return Id(n)?f6(n):n})}catch(n){return Promise.reject(n)}}}function Gy(r){return function(t,n){try{return Promise.resolve(n(t)).then(function(i){if(Id(i))return f6(i,r);if(r&&typeof sA(i).recoveryParam>"u")throw new Error("not_supported: ES256K-R not supported when signer doesn't provide a recovery param");return i})}catch(i){return Promise.reject(i)}}}function Jy(){return function(e,t){try{return Promise.resolve(t(e)).then(function(n){if(Id(n))throw new Error("invalid_config: expected a signer function that returns a string instead of signature object");return n})}catch(n){return Promise.reject(n)}}}var cA={ES256:fA(),ES256K:Gy(),"ES256K-R":Gy(!0),Ed25519:Jy(),EdDSA:Jy()};function uA(r){let e=cA[r];if(!e)throw new Error(`not_supported: Unsupported algorithm ${r}`);return e}var of=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],sf=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],af=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],ff=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],cf=[0,1518500249,1859775393,2400959708,2840853838],uf=[1352829926,1548603684,1836072691,2053994217,0];function Ho(r,e){return r<<e|r>>>32-e}function Vy(r,e,t,n,i,s,a,u){return Ho(r+(e^t^n)+s+a|0,u)+i|0}function Wy(r,e,t,n,i,s,a,u){return Ho(r+(e&t|~e&n)+s+a|0,u)+i|0}function Yy(r,e,t,n,i,s,a,u){return Ho(r+((e|~t)^n)+s+a|0,u)+i|0}function Xy(r,e,t,n,i,s,a,u){return Ho(r+(e&n|t&~n)+s+a|0,u)+i|0}function Zy(r,e,t,n,i,s,a,u){return Ho(r+(e^(t|~n))+s+a|0,u)+i|0}var Bu=class{constructor(e=64){this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this._blockOffset=0,this._block=void 0,this._blockSize=void 0,this._length=[0,0,0,0],this._finalized=void 0,this.update=t=>{if(this._finalized)throw new Error("Digest already called");let n=this._block,i=0;for(;this._blockOffset+t.length-i>=this._blockSize;){for(let s=this._blockOffset;s<this._blockSize;)n[s++]=t[i++];this._update(),this._blockOffset=0}for(;i<t.length;)n[this._blockOffset++]=t[i++];for(let s=0,a=t.length*8;a>0;++s)this._length[s]+=a,a=this._length[s]/4294967296|0,a>0&&(this._length[s]-=4294967296*a);return this},this.digest=()=>{if(this._finalized)throw new Error("Digest already called");this._finalized=!0;let t=this._digest();this._block.fill(0),this._blockOffset=0;for(let n=0;n<4;++n)this._length[n]=0;return t},this._update=()=>{let t=new Array(16),n=new DataView(this._block.buffer);for(let C=0;C<16;++C)t[C]=t[C]=n.getInt32(C*4,!0);let i=this._a|0,s=this._b|0,a=this._c|0,u=this._d|0,v=this._e|0,w=this._a|0,E=this._b|0,M=this._c|0,k=this._d|0,D=this._e|0;for(let C=0;C<80;C+=1){let z,I;C<16?(z=Vy(i,s,a,u,v,t[of[C]],cf[0],af[C]),I=Zy(w,E,M,k,D,t[sf[C]],uf[0],ff[C])):C<32?(z=Wy(i,s,a,u,v,t[of[C]],cf[1],af[C]),I=Xy(w,E,M,k,D,t[sf[C]],uf[1],ff[C])):C<48?(z=Yy(i,s,a,u,v,t[of[C]],cf[2],af[C]),I=Yy(w,E,M,k,D,t[sf[C]],uf[2],ff[C])):C<64?(z=Xy(i,s,a,u,v,t[of[C]],cf[3],af[C]),I=Wy(w,E,M,k,D,t[sf[C]],uf[3],ff[C])):(z=Zy(i,s,a,u,v,t[of[C]],cf[4],af[C]),I=Vy(w,E,M,k,D,t[sf[C]],uf[4],ff[C])),i=v,v=u,u=Ho(a,10),a=s,s=z,w=D,D=k,k=Ho(M,10),M=E,E=I}let T=this._b+a+k|0;this._b=this._c+u+D|0,this._c=this._d+v+w|0,this._d=this._e+i+E|0,this._e=this._a+s+M|0,this._a=T},this._digest=()=>{this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56);let t=new DataView(this._block.buffer);t.setUint32(56,this._length[0],!0),t.setUint32(60,this._length[1],!0),this._block=new Uint8Array(t.buffer),this._update();let n=new DataView(new Uint8Array(20).buffer);return n.setInt32(0,this._a,!0),n.setInt32(4,this._b,!0),n.setInt32(8,this._c,!0),n.setInt32(12,this._d,!0),n.setInt32(16,this._e,!0),new Uint8Array(n.buffer)},this._block=new Uint8Array(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}},hA=(r,e)=>{let t=Ge(Dd(e).slice(0,1),"hex"),n=He(r,"hex"),i=new Bu().update(qo(n)).digest(),s=t+Ge(i,"hex"),a=qo(He(s,"hex")),u=qo(a),v=Ge(u,"hex").substring(0,8),w=s+v;return oA(He(w,"hex"))},lA=Zs.default.ec,dA=(r,e)=>{let n=new lA("secp256k1").keyFromPublic(r,"hex").getPublic().encode("hex",!0),i=He(n,"hex"),s=new Bu().update(qo(i)).digest(),a=Md.bech32.toWords(s);return Md.bech32.encode(e,a).replace(e,"")},pA=(r,e)=>{if(e){let t=e.split(":");switch(t[0]){case"bip122":t[t.length-1]=hA(r,t[t.length-1]);break;case"cosmos":t[t.length-1]=dA(r,t[1]);break;case"eip155":t[t.length-1]=u6(r);break;default:return!1}return t.join(":").toLowerCase()===e.toLowerCase()}return!1},Od=new Zs.default.ec("secp256k1"),d6=new Zs.default.ec("p256");function hf(r,e=!1){let t=tr(r);if(t.length!==(e?65:64))throw new Error("wrong signature length");let n=pi(t.slice(0,32)),i=pi(t.slice(32,64)),s={r:n,s:i};return e&&(s.recoveryParam=t[64]),s}function Uu(r){if(r.publicKeyBase58)return Dd(r.publicKeyBase58);if(r.publicKeyBase64)return tr(r.publicKeyBase64);if(r.publicKeyHex)return Ed(r.publicKeyHex);if(r.publicKeyJwk&&r.publicKeyJwk.crv==="secp256k1"&&r.publicKeyJwk.x&&r.publicKeyJwk.y)return Ed(Od.keyFromPublic({x:pi(tr(r.publicKeyJwk.x)),y:pi(tr(r.publicKeyJwk.y))}).getPublic("hex"));if(r.publicKeyJwk&&r.publicKeyJwk.crv==="P-256"&&r.publicKeyJwk.x&&r.publicKeyJwk.y)return Ed(d6.keyFromPublic({x:pi(tr(r.publicKeyJwk.x)),y:pi(tr(r.publicKeyJwk.y))}).getPublic("hex"));if(r.publicKeyJwk&&r.publicKeyJwk.kty==="OKP"&&r.publicKeyJwk.crv==="Ed25519"&&r.publicKeyJwk.x)return tr(r.publicKeyJwk.x);if(r.publicKeyMultibase){let{base16:e,base58btc:t,base64:n,base64url:i}=Zo;return e.decoder.or(t.decoder.or(n.decoder.or(i.decoder))).decode(r.publicKeyMultibase)}return new Uint8Array}function mA(r,e,t){let n=qo(r),i=hf(e),a=t.filter(({ethereumAddress:u,blockchainAccountId:v})=>typeof u>"u"&&typeof v>"u").find(u=>{try{let v=Uu(u);return d6.keyFromPublic(v).verify(n,i)}catch{return!1}});if(!a)throw new Error("invalid_signature: Signature invalid for JWT");return a}function bA(r,e,t){let n=qo(r),i=hf(e),s=t.filter(({ethereumAddress:v,blockchainAccountId:w})=>typeof v>"u"&&typeof w>"u"),a=t.filter(({ethereumAddress:v,blockchainAccountId:w})=>typeof v<"u"||typeof w<"u"),u=s.find(v=>{try{let w=Uu(v);return Od.keyFromPublic(w).verify(n,i)}catch{return!1}});if(!u&&a.length>0&&(u=p6(r,e,a)),!u)throw new Error("invalid_signature: Signature invalid for JWT");return u}function p6(r,e,t){let n;if(e.length>86)n=[hf(e,!0)];else{let a=hf(e,!1);n=[{...a,recoveryParam:0},{...a,recoveryParam:1}]}let i=a=>{let u=qo(r),v=Od.recoverPubKey(u,a,a.recoveryParam),w=v.encode("hex"),E=v.encode("hex",!0),M=u6(w).toLowerCase();return t.find(D=>{var T,C,z;let I=pi(Uu(D));return I===w||I===E||((T=D.ethereumAddress)==null?void 0:T.toLowerCase())===M||((C=D.blockchainAccountId)==null||(z=C.split("@eip155"))==null?void 0:z[0].toLowerCase())===M||pA(w,D.blockchainAccountId)})},s=n.map(i).filter(a=>typeof a<"u");if(s.length===0)throw new Error("invalid_signature: Signature invalid for JWT");return s[0]}function Qy(r,e,t){let n=a6(r),i=tr(e),s=t.find(a=>(0,Lu.verify)(Uu(a),n,i));if(!s)throw new Error("invalid_signature: Signature invalid for JWT");return s}var vA={ES256:mA,ES256K:bA,"ES256K-R":p6,Ed25519:Qy,EdDSA:Qy};function m6(r){let e=vA[r];if(!e)throw new Error(`not_supported: Unsupported algorithm ${r}`);return e}m6.toSignatureObject=hf;var b6=function(r,e,t={},n={}){try{t.alg||(t.alg=gA);let i=typeof r=="string"?r:e6(r,n.canonicalize),s=[e6(t,n.canonicalize),i].join("."),a=uA(t.alg);return Promise.resolve(a(s,e)).then(function(u){return[s,u].join(".")})}catch(i){return Promise.reject(i)}};var gA="ES256K";function e6(r,e=!1){return Sd(e?(0,o6.default)(r):JSON.stringify(r))}function yA(r){let e=r.match(/^([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)$/);if(e)return{header:JSON.parse(s6(e[1])),payload:e[2],signature:e[3],data:`${e[1]}.${e[2]}`};throw new Error("invalid_argument: Incorrect format JWS")}function xA({header:r,data:e,signature:t},n){return Array.isArray(n)||(n=[n]),m6(r.alg)(e,t,n)}function v6(r,e){let t=yA(r);return xA(t,e)}var t6=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function Et(r,e,t){if(!r.s){if(t instanceof zo)if(t.s)e&1&&(e=t.s),t=t.v;else{t.o=Et.bind(null,r,e);return}if(t&&t.then){t.then(Et.bind(null,r,e),Et.bind(null,r,2));return}r.s=e,r.v=t;let n=r.o;n&&n(r)}}var zo=function(){function r(){}return r.prototype.then=function(e,t){let n=new r,i=this.s;if(i){let s=i&1?e:t;if(s){try{Et(n,1,s(this.v))}catch(a){Et(n,2,a)}return n}else return this}return this.o=function(s){try{let a=s.v;s.s&1?Et(n,1,e?e(a):a):t?Et(n,1,t(a)):Et(n,2,a)}catch(a){Et(n,2,a)}},n},r}();function ji(r){return r instanceof zo&&r.s&1}function wA(r,e,t){var n=-1,i,s;function a(u){try{for(;++n<r.length&&(!t||!t());)if(u=e(n),u&&u.then)if(ji(u))u=u.v;else{u.then(a,s||(s=Et.bind(null,i=new zo,2)));return}i?Et(i,1,u):i=u}catch(v){Et(i||(i=new zo),2,v)}}return a(),i}function EA(r,e,t){if(typeof r[t6]=="function"){let E=function(M){try{for(;!(i=n.next()).done&&(!t||!t());)if(M=e(i.value),M&&M.then)if(ji(M))M=M.v;else{M.then(E,a||(a=Et.bind(null,s=new zo,2)));return}s?Et(s,1,M):s=M}catch(k){Et(s||(s=new zo),2,k)}};var n=r[t6](),i,s,a;if(E(),n.return){var u=function(M){try{i.done||n.return()}catch{}return M};if(s&&s.then)return s.then(u,function(M){throw u(M)});u()}return s}if(!("length"in r))throw new TypeError("Object is not iterable");for(var v=[],w=0;w<r.length;w++)v.push(r[w]);return wA(v,function(E){return e(v[E])},t)}function _A(r,e,t){for(var n;;){var i=r();if(ji(i)&&(i=i.v),!i)return s;if(i.then){n=0;break}var s=t();if(s&&s.then)if(ji(s))s=s.s;else{n=1;break}if(e){var a=e();if(a&&a.then&&!ji(a)){n=2;break}}}var u=new zo,v=Et.bind(null,u,2);return(n===0?i.then(E):n===1?s.then(w):a.then(M)).then(void 0,v),u;function w(k){s=k;do{if(e&&(a=e(),a&&a.then&&!ji(a))){a.then(M).then(void 0,v);return}if(i=r(),!i||ji(i)&&!i.v){Et(u,1,s);return}if(i.then){i.then(E).then(void 0,v);return}s=t(),ji(s)&&(s=s.v)}while(!s||!s.then);s.then(w).then(void 0,v)}function E(k){k?(s=t(),s&&s.then?s.then(w).then(void 0,v):w(s)):Et(u,1,s)}function M(){(i=r())?i.then?i.then(E).then(void 0,v):E(i):Et(u,1,s)}}function MA(r){if(!(r.protected&&r.iv&&r.ciphertext&&r.tag))throw new Error("bad_jwe: missing properties");r.recipients&&r.recipients.map(e=>{if(!(e.header&&e.encrypted_key))throw new Error("bad_jwe: malformed recipients")})}function r6({ciphertext:r,tag:e,iv:t,protectedHeader:n,recipient:i},s){let a={protected:n,iv:Vr(t),ciphertext:Vr(r),tag:Vr(e)};return s&&(a.aad=Vr(s)),i&&(a.recipients=[i]),a}var g6=function(r,e){try{let n=function(w){if(u===null)throw new Error("failure: Failed to decrypt");return u},t;MA(r);let i=JSON.parse(s6(r.protected));if(i.enc!==e.enc)throw new Error(`not_supported: Decrypter does not supported: '${i.enc}'`);let s=c6(r.ciphertext,r.tag),a=He(r.aad?`${r.protected}.${r.aad}`:r.protected),u=null,v=function(){return i.alg==="dir"&&e.alg==="dir"?Promise.resolve(e.decrypt(s,tr(r.iv),a)).then(function(w){u=w}):function(){if(!r.recipients||r.recipients.length===0)throw new Error("bad_jwe: missing recipients");{let w=0;return _A(function(){return!u&&w<r.recipients.length},function(){return w++},function(){let E=r.recipients[w];Object.assign(E.header,i);let M=function(){if(E.header.alg===e.alg)return Promise.resolve(e.decrypt(s,tr(r.iv),a,E)).then(function(k){u=k})}();if(M&&M.then)return M.then(function(){})})}}()}();return Promise.resolve(v&&v.then?v.then(n):n(v))}catch(t){return Promise.reject(t)}},y6=function(r,e,t={},n){try{if(e[0].alg==="dir"){if(e.length>1)throw new Error('not_supported: Can only do "dir" encryption to one key.');return Promise.resolve(e[0].encrypt(r,t,n)).then(function(i){return r6(i,n)})}else{let i=e[0].enc;if(!e.reduce((v,w)=>v&&w.enc===i,!0))throw new Error("invalid_argument: Incompatible encrypters passed");let s,a,u=EA(e,function(v){let w=function(){return s?Promise.resolve(v.encryptCek==null?void 0:v.encryptCek(s)).then(function(E){if(E){var M,k;(M=a)==null||(k=M.recipients)==null||k.push(E)}}):Promise.resolve(v.encrypt(r,t,n)).then(function(E){s=E.cek,a=r6(E,n)})}();if(w&&w.then)return w.then(function(){})});return Promise.resolve(u&&u.then?u.then(function(){return a}):a)}}catch(i){return Promise.reject(i)}};var x6=function(r,e){try{let t=function(i,s=[]){try{return Promise.resolve(e.resolve(i)).then(function({didResolutionMetadata:a,didDocument:u}){function v(){var M,k;let D=(M=u.keyAgreement)==null||(k=M.map(C=>typeof C=="string"?[...u.publicKey||[],...u.verificationMethod||[]].find(z=>z.id===C):C))==null?void 0:k.filter(C=>typeof C<"u"),T=D?.filter(C=>C.type==="X25519KeyAgreementKey2019"&&Boolean(C.publicKeyBase58))||[];if(!T.length&&!w.length)throw new Error(`no_suitable_keys: Could not find x25519 key for ${i}`);return T.map(C=>AA(Dd(C.publicKeyBase58),C.id)).concat(...w)}if(s.push(i),a!=null&&a.error||u==null)throw new Error(`resolver_error: Could not resolve ${i}: ${a.error}, ${a.message}`);let w=[];if(!u.controller&&!u.keyAgreement)throw new Error(`no_suitable_keys: Could not find x25519 key for ${i}`);let E=function(){if(u.controller){let M=Array.isArray(u.controller)?u.controller:[u.controller];M=M.filter(D=>!s.includes(D));let k=M.map(D=>t(D,s).catch(()=>[]));return Promise.resolve(Promise.all(k)).then(function(D){w=[].concat(...D)})}}();return E&&E.then?E.then(v):v(E)})}catch(a){return Promise.reject(a)}},n=r.map(i=>t(i));return Promise.resolve(Promise.all(n)).then(function(i){return[].concat(...i)})}catch(t){return Promise.reject(t)}};function w6(r){let e=new kd.XChaCha20Poly1305(r);return(t,n)=>{let i=(0,Cd.randomBytes)(e.nonceLength),s=e.seal(i,t,n);return{ciphertext:s.subarray(0,s.length-e.tagLength),tag:s.subarray(s.length-e.tagLength),iv:i}}}function SA(r){let e=function(s,a={},u){try{let v=Sd(JSON.stringify(Object.assign({alg:i},a,{enc:n}))),w=He(u?`${v}.${Vr(u)}`:v);return Promise.resolve({...t(s,w),protectedHeader:v})}catch(v){return Promise.reject(v)}},t=w6(r),n="XC20P",i="dir";return{alg:i,enc:n,encrypt:e}}function n6(r){let e=function(n,i,s){try{return Promise.resolve(t.open(i,n,s))}catch(a){return Promise.reject(a)}},t=new kd.XChaCha20Poly1305(r);return{alg:"dir",enc:"XC20P",decrypt:e}}function AA(r,e){let t=function(u,v={},w){try{Object.assign(v,{alg:void 0});let E=(0,Cd.randomBytes)(32);return Promise.resolve(SA(E).encrypt(u,v,w)).then(function(M){return Promise.resolve(n(E)).then(function(k){return{...M,recipient:k,cek:E}})})}catch(E){return Promise.reject(E)}},n=function(u){try{let v=(0,lf.generateKeyPair)(),w=(0,lf.sharedKey)(v.secretKey,r),E=h6(w,s,i),M=w6(E)(u),k={encrypted_key:Vr(M.ciphertext),header:{alg:i,iv:Vr(M.iv),tag:Vr(M.tag),epk:{kty:"OKP",crv:a,x:Vr(v.publicKey)}}};return e&&(k.header.kid=e),Promise.resolve(k)}catch(v){return Promise.reject(v)}},i="ECDH-ES+XC20PKW",a="X25519";return{alg:i,enc:"XC20P",encrypt:t,encryptCek:n}}function TA(r){if(!(r&&r.epk&&r.iv&&r.tag))throw new Error("bad_jwe: malformed header")}function E6(r){let e=function(s,a,u,v){try{let M=function(){let C=h6(D,n,t),z=c6(v.encrypted_key,v.header.tag);return Promise.resolve(n6(C).decrypt(z,tr(v.header.iv))).then(function(I){return I===null?null:n6(I).decrypt(s,a,u)})};var w,E;if(TA((w=v)==null?void 0:w.header),v=v,((E=v.header.epk)==null?void 0:E.crv)!==i||typeof v.header.epk.x>"u")return Promise.resolve(null);let k=tr(v.header.epk.x),D,T=function(){if(r instanceof Uint8Array)D=(0,lf.sharedKey)(r,k);else return Promise.resolve(r(k)).then(function(C){D=C})}();return Promise.resolve(T&&T.then?T.then(M):M(T))}catch(M){return Promise.reject(M)}},t="ECDH-ES+XC20PKW",i="X25519";return{alg:t,enc:"XC20P",decrypt:e}}var P6=Je(M6(),1);var S6=Symbol("abortable"),$u=Symbol("aborted");function A6(r,e){if(e.aborted)return Promise.reject($u);let t,n=new Promise((i,s)=>{t=s});return e.addEventListener("abort",()=>{t($u)}),Promise.race([r,n])}var T6=(r=21)=>crypto.getRandomValues(new Uint8Array(r)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");var Fu="utils_abort_request";var ir;(function(r){r[r.PARSE_ERROR=-32700]="PARSE_ERROR",r[r.INVALID_REQUEST=-32600]="INVALID_REQUEST",r[r.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",r[r.INVALID_PARAMS=-32602]="INVALID_PARAMS",r[r.INTERNAL_ERROR=-32603]="INTERNAL_ERROR"})(ir||(ir={}));var k6={[ir.PARSE_ERROR]:"Parse error",[ir.INVALID_REQUEST]:"Invalid request",[ir.METHOD_NOT_FOUND]:"Method not found",[ir.INVALID_PARAMS]:"Invalid params",[ir.INTERNAL_ERROR]:"Internal error"};function kA(r){return-32e3>=r&&r>=-32099}function qu(r){return k6[r.toString()]??(kA(r)?"Server error":"Application error")}var Rr=class extends Error{static fromObject(e){return new Rr(e.code,e.message,e.data)}toObject(){return{code:this.code,data:this.data,message:this.message}}constructor(e,t,n){super(),Object.setPrototypeOf(this,Rr.prototype),this.code=e,this.data=n,this.message=t??qu(e)}};function df(r){let e=k6[r];return function(n){return new Rr(r,e,n)}}var CA=df(ir.PARSE_ERROR),sF=df(ir.INVALID_REQUEST),aF=df(ir.METHOD_NOT_FOUND),fF=df(ir.INVALID_PARAMS),cF=df(ir.INTERNAL_ERROR);function DA(r,e){if(e.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object")}function IA(r,e){return e.get?e.get.call(r):e.value}function OA(r,e,t){if(e.set)e.set.call(r,t);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=t}}function C6(r,e,t){if(!e.has(r))throw new TypeError("attempted to "+t+" private field on non-instance");return e.get(r)}function Rd(r,e){var t=C6(r,e,"get");return IA(r,t)}function RA(r,e,t){DA(r,e),e.set(r,t)}function NA(r,e,t){var n=C6(r,e,"set");return OA(r,n,t),t}var pf=new WeakMap,mf=class{get connection(){return Rd(this,pf)}createID(){return T6()}request(e,t=void 0,n={}){let{signal:i}=n;if(i?.aborted)return Promise.reject($u);let s=this.createID(),a=Rd(this,pf).send({jsonrpc:"2.0",id:s,method:e,params:t}).then(u=>{if(u==null)throw new Error("Missing response");if(u.error!=null)throw Rr.fromObject(u.error);return u.result});return i==null?a:(i.addEventListener("abort",()=>{this.notify(Fu,{id:s})}),A6(a,i))}async notify(e,t=void 0){await Rd(this,pf).send({jsonrpc:"2.0",method:e,params:t})}constructor(e){RA(this,pf,{writable:!0,value:void 0}),NA(this,pf,e)}};function D6(r,e){return{jsonrpc:"2.0",id:r,error:{code:e,message:qu(e)}}}function PA(r,e,t){console.warn("Unhandled handler error",e,t)}function BA(r,e){console.warn("Unhandled invalid message",e)}function LA(r,e){console.warn("Unhandled notification",e)}function I6(r,e={}){let t=e.onHandlerError??PA,n=e.onInvalidMessage??BA,i=e.onNotification??LA,s={};function a(u,v){if(v.method===Fu){let w=v.params?.id;w!=null&&s[w]?.abort()}else i(u,v)}return async function(v,w){let E=w.id;if(w.jsonrpc!=="2.0"||w.method==null)return E==null?(n(v,w),null):D6(E,ir.INVALID_REQUEST);let M=r[w.method];if(M==null)return E==null?(a(v,w),null):D6(E,ir.METHOD_NOT_FOUND);try{let k;if(E!=null&&M[S6]){let T=new AbortController;s[E]=T,k=M(v,w.params,{signal:T.signal})}else k=M(v,w.params,{});let D=k==null?k:typeof k.then=="function"?await k:k;return E==null||s[E]?.signal.aborted?null:{jsonrpc:"2.0",id:E,result:D}}catch(k){if(E==null||s[E]?.signal.aborted)return t(v,w,k),null;let D;if(k instanceof Rr)D=k.toObject();else{t(v,w,k);let T=k.code??-32e3;D={code:T,message:k.message||qu(T)}}return{jsonrpc:"2.0",id:E,error:D}}finally{E!=null&&delete s[E]}}}var UA="base64pad";function O6(r){return JSON.parse((0,P6.default)(r))}function $A(r){let e=new Uint8Array(r.length+2);return e[0]=237,e[1]=1,e.set(r,2),`did:key:z${Ge(e,"base58btc")}`}function R6(r){let[e,t,n]=r.split(".");return{payload:t,signatures:[{protected:e,signature:n}]}}var N6=async(r,e,t,n={})=>{let i=`${e}#${e.split(":")[2]}`,s=l6(t),a=O6(Object.assign(n,{kid:i,alg:"EdDSA"}));return b6(typeof r=="string"?r:O6(r),s,a)},FA={did_authenticate:async({did:r,secretKey:e},t)=>{let n=await N6({did:r,aud:t.aud,nonce:t.nonce,paths:t.paths,exp:Math.floor(Date.now()/1e3)+600},r,e);return R6(n)},did_createJWS:async({did:r,secretKey:e},t)=>{if(t.did.split("#")[0]!==r)throw new Rr(4100,`Unknown DID: ${r}`);let i=await N6(t.payload,r,e,t.protected);return{jws:R6(i)}},did_decryptJWE:async({secretKey:r},e)=>{let t=E6((0,zu.convertSecretKeyToX25519)(r));try{let n=await g6(e.jwe,t);return{cleartext:Ge(n,UA)}}catch(n){throw new Rr(-32e3,n.message)}}},Hu=class{constructor(e){let{secretKey:t,publicKey:n}=(0,zu.generateKeyPairFromSeed)(e),i=$A(n),s=I6(FA);this._handle=async a=>await s({did:i,secretKey:t},a)}get isDidProvider(){return!0}async send(e){return await this._handle(e)}};var jd=Je(no(),1);_f();var Nd={};Ze(Nd,{keyToDidDoc:()=>qA});function qA(r,e){let t=`did:key:${e}`,n=`${t}#${e}`;return{id:t,verificationMethod:[{id:n,type:"Secp256k1VerificationKey2018",controller:t,publicKeyBase58:Ge(r,"base58btc")}],authentication:[n],assertionMethod:[n],capabilityDelegation:[n],capabilityInvocation:[n]}}var Pd={};Ze(Pd,{keyToDidDoc:()=>zA});Qo();var B6=Je(Yc(),1);function HA(r){let e=new Uint8Array(r.length+2);return e[0]=236,e[1]=1,e.set(r,2),`z${Ge(e,"base58btc")}`}function zA(r,e){let t=`did:key:${e}`,n=`${t}#${e}`,i=(0,B6.convertPublicKeyToX25519)(r),s=`${t}#${HA(i)}`;return{id:t,verificationMethod:[{id:n,type:"Ed25519VerificationKey2018",controller:t,publicKeyBase58:Ge(r,"base58btc")}],authentication:[n],assertionMethod:[n],capabilityDelegation:[n],capabilityInvocation:[n],keyAgreement:[{id:s,type:"X25519KeyAgreementKey2019",controller:t,publicKeyBase58:Ge(i,"base58btc")}]}}var Hd={};Ze(Hd,{keyToDidDoc:()=>pT,pubKeyBytesToXY:()=>ox});var Ku={};Ze(Ku,{ECPointDecompress:()=>hT});var rx=Je(bf(),1);function oT(r){return r>=0?r:-r}function sT(r,e){if(typeof r=="number"&&(r=BigInt(r)),typeof e=="number"&&(e=BigInt(e)),r<=0n||e<=0n)throw new RangeError("a and b MUST be > 0");let t=0n,n=1n,i=1n,s=0n;for(;r!==0n;){let a=e/r,u=e%r,v=t-i*a,w=n-s*a;e=r,r=u,t=i,n=s,i=v,s=w}return{g:e,x:t,y:n}}function Ud(r,e){if(typeof r=="number"&&(r=BigInt(r)),typeof e=="number"&&(e=BigInt(e)),e<=0n)throw new RangeError("n must be > 0");let t=r%e;return t<0n?t+e:t}function aT(r,e){let t=sT(Ud(r,e),e);if(t.g!==1n)throw new RangeError(`${r.toString()} does not have inverse modulo ${e.toString()}`);return Ud(t.x,e)}function Ko(r,e,t){if(typeof r=="number"&&(r=BigInt(r)),typeof e=="number"&&(e=BigInt(e)),typeof t=="number"&&(t=BigInt(t)),t<=0n)throw new RangeError("n must be > 0");if(t===1n)return 0n;if(r=Ud(r,t),e<0n)return aT(Ko(r,oT(e),t),t);let n=1n;for(;e>0;)e%2n===1n&&(n=n*r%t),e=e/2n,r=r**2n%t;return n}var wt={};Ze(wt,{pubKeyBytesToHex:()=>fT,publicKeyHexToUint8ArrayPointPair:()=>ex,publicKeyIntToUint8ArrayPointPair:()=>tx,publicKeyIntToXY:()=>uT,publicKeyToXY:()=>cT,testHexString:()=>Fd,testUint8Array:()=>Gi});var jo=Je(bf(),1);Tf();function fT(r){if(!Gi(r))throw new TypeError("input must be a Uint8Array");return jo.toString(r,"base16")}function cT(r){if(!Fd(r))throw new TypeError("input must be string with characters 0-9,A-F,a-f");let e=ex(r),t=oo.encode(e.xOctet).slice(1),n=oo.encode(e.yOctet).slice(1);return{xm:t,ym:n}}function ex(r){if(!Fd(r))throw new TypeError("input must be string with characters 0-9,A-F,a-f");let e=r.slice(0,r.length/2),t=r.slice(r.length/2,r.length),n=jo.fromString(e,"base16"),i=jo.fromString(t,"base16");return{xOctet:n,yOctet:i}}function Fd(r){let e=/^[A-Fa-f0-9]+$/i;return!!(e.exec(r)!==null&&e.test(r)&&typeof r=="string")}function Gi(r){return r==null?!1:r.constructor===Uint8Array}function uT(r){if(r==null)throw new TypeError("input cannot be null or undefined.");if(typeof r!="object")throw new TypeError("Input must be an object with properties x and y");if(!Object.prototype.hasOwnProperty.call(r,"x")||!Object.prototype.hasOwnProperty.call(r,"y"))throw new Error("Input must have properties x and y");if(typeof r.x!="bigint"&&typeof r.y!="bigint")throw new Error("Input coordinates must be BigInt");let e=tx(r),t=oo.encode(e.xOctet).slice(1),n=oo.encode(e.yOctet).slice(1);return{xm:t,ym:n}}function tx(r){if(r==null)throw new TypeError("input cannot be null or undefined.");if(typeof r!="object")throw new TypeError("Input must be an object with properties x and y");if(!Object.prototype.hasOwnProperty.call(r,"x")||!Object.prototype.hasOwnProperty.call(r,"y"))throw new Error("Input must have properties x and y");if(typeof r.x!="bigint"&&typeof r.y!="bigint")throw new Error("Input coordinates must be BigInt");let e=r.x.toString(),t=r.y.toString(),n=jo.fromString(e,"base10"),i=jo.fromString(t,"base10");return{xOctet:n,yOctet:i}}function hT(r){if(!Gi(r))throw new TypeError("input must be a Uint8Array");let e=BigInt(2),t=e**256n-e**224n+e**192n+e**96n-1n,n=41058363725152142129326129780047268409114441015993725554835256314039467401291n,i=(t+1n)/4n,s=BigInt(r[0]-2),a=r.subarray(1),u=BigInt(rx.toString(a,"base10")),v=u**3n-u*3n+n,w=Ko(v,i,t);return w%2n!==s&&(w=t-w),{x:u,y:w}}var ju={};Ze(ju,{ECPointDecompress:()=>lT});var nx=Je(bf(),1);function lT(r){if(!Gi(r))throw new TypeError("input must be a Uint8Array");let e=BigInt(2),t=e**384n-e**128n-e**96n+e**32n-1n,n=27580193559959705877849011840389048093056905856361568521428707301988689241309860865136260764883745107765439761230575n,i=(t+1n)/4n,s=BigInt(r[0]-2),a=r.subarray(1),u=BigInt(nx.toString(a,"base10")),v=u**3n-u*3n+n,w=Ko(v,i,t);return w%2n!==s&&(w=t-w),{x:u,y:w}}var Gu={};Ze(Gu,{ECPointDecompress:()=>dT});var ix=Je(bf(),1);function dT(r){if(!Gi(r))throw new TypeError("input must be a Uint8Array");let t=BigInt(2)**521n-1n,n=1093849038073734274511112390766805569936207598951683748994586394495953116150735016013708737573759623248592132296706313309438452531591012912142327488478985984n,i=(t+1n)/4n,s=BigInt(r[0]-2),a=r.subarray(1),u=BigInt(ix.toString(a,"base10")),v=u**3n-u*3n+n,w=Ko(v,i,t);return w%2n!==s&&(w=t-w),{x:u,y:w}}function pT(r,e){let t=`did:key:${e}`,n=`${t}#${e}`,i=ox(r);return{id:t,verificationMethod:[{id:n,type:"JsonWebKey2020",controller:t,publicKeyJwk:{kty:"EC",crv:"P-256",x:i.xm,y:i.ym}}],authentication:[n],assertionMethod:[n],capabilityDelegation:[n],capabilityInvocation:[n]}}function ox(r){if(!wt.testUint8Array(r))throw new TypeError("input must be a Uint8Array");let e=wt.pubKeyBytesToHex(r),t=e.length/2;if(t==64)return wt.publicKeyToXY(e);if(t==65&&e.slice(0,2)=="04"){let n=e.slice(2);return wt.publicKeyToXY(n)}if(t==33&&(e.slice(0,2)=="03"||e.slice(0,2)=="02")){let n=He(e,"base16"),i=Ku.ECPointDecompress(n);return wt.publicKeyIntToXY(i)}throw new Error("Unexpected pubKeyBytes")}var zd={};Ze(zd,{keyToDidDoc:()=>mT,pubKeyBytesToXY:()=>sx});function mT(r,e){let t=`did:key:${e}`,n=`${t}#${e}`,i=sx(r);return{id:t,verificationMethod:[{id:n,type:"JsonWebKey2020",controller:t,publicKeyJwk:{kty:"EC",crv:"P-384",x:i.xm,y:i.ym}}],authentication:[n],assertionMethod:[n],capabilityDelegation:[n],capabilityInvocation:[n]}}function sx(r){if(!wt.testUint8Array(r))throw new TypeError("input must be a Uint8Array");let e=wt.pubKeyBytesToHex(r),t=e.length/2;if(t==96)return wt.publicKeyToXY(e);if(t==97&&e.slice(0,2)=="04"){let n=e.slice(2);return wt.publicKeyToXY(n)}if(t==49&&(e.slice(0,2)=="03"||e.slice(0,2)=="02")){let n=He(e,"base16"),i=ju.ECPointDecompress(n);return wt.publicKeyIntToXY(i)}throw new Error("Unexpected pubKeyBytes")}var Kd={};Ze(Kd,{keyToDidDoc:()=>bT,pubKeyBytesToXY:()=>ax});function bT(r,e){let t=`did:key:${e}`,n=`${t}#${e}`,i=ax(r);return{id:t,verificationMethod:[{id:n,type:"JsonWebKey2020",controller:t,publicKeyJwk:{kty:"EC",crv:"P-521",x:i.xm,y:i.ym}}],authentication:[n],assertionMethod:[n],capabilityDelegation:[n],capabilityInvocation:[n]}}function ax(r){if(!wt.testUint8Array(r))throw new TypeError("input must be a Uint8Array");let e=wt.pubKeyBytesToHex(r);if(132<=e.length&&e.length<=134&&(e.slice(0,2)=="03"||e.slice(0,2)=="02")){let t=He(e,"base16"),n=Gu.ECPointDecompress(t);return wt.publicKeyIntToXY(n)}throw new Error("Unexpected pubKeyBytes")}var vT="application/did+ld+json",fx="application/did+json",gT={231:Nd,237:Pd,4608:Hd,4609:zd,4610:Kd};function yT(){return{key:async(r,e,t,n)=>{let i=n.accept||fx,s={didResolutionMetadata:{contentType:i},didDocument:null,didDocumentMetadata:{}};try{let a=Pr.decode(e.id),u=jd.default.decode(a),v=a.slice(jd.default.decode.bytes),w=await gT[u].keyToDidDoc(v,e.id);i===vT?(w["@context"]="https://w3id.org/did/v1",s.didDocument=w):i===fx?s.didDocument=w:(delete s.didResolutionMetadata.contentType,s.didResolutionMetadata.error="representationNotSupported")}catch(a){s.didResolutionMetadata.error="invalidDid",s.didResolutionMetadata.message=a.toString()}return s}}}var cx={getResolver:yT};var Wd=Je(Si(),1);rr();Xo();_h();Tf();var xT=24;async function ux(r){let e=await jn({value:r,codec:Sr,hasher:Mn});return{cid:e.cid,linkedBlock:e.bytes}}function wT(r,e=xT){let t=(e-r.length%e)%e,n=new Uint8Array(r.length+t);return n.set(r,0),n}async function ET(r){return(await jn({value:r,codec:Sr,hasher:If})).cid}function _T(r){if(r=Le.asCID(r),r.code!==ss)throw new Error("CID codec must be dag-cbor");if(r.multihash.code!==If.code)throw new Error("CID must use identity multihash");return qh(r.multihash.digest)}async function hx(r,e){return wT((await ET(r)).bytes,e)}function lx(r){return _T(Le.decodeFirst(r)[0])}rr();function dx(){return{eip191:async(r,e)=>{ST(r,e)}}}var MT=new Date("2022-09-20").valueOf();function ST(r,e){Xl(r),Y2(r,e);let n=[k0(Na.fromCacao(r).toMessage(),r.s.s).toLowerCase()];if(Date.parse(r.p.iat)<=MT){let s=k0(W2(Na.fromCacao(r),"Ethereum"),r.s.s).toLowerCase();n.push(s)}let i=Ti.parse(r.p.iss.replace("did:pkh:","")).address.toLowerCase();if(!n.includes(i))throw new Error("Signature does not belong to issuer")}Qo();aa();var px=Je(Si(),1);Qo();function mx(){return Ge((0,px.randomBytes)(16),"base64")}var bx="base64pad",vx="base64url";function gx(r){return Ge(r,bx)}function yx(r){return Ge(r,vx)}function xx(r){return He(r,bx)}function Ju(r){return JSON.parse(Ge(He(r,vx)))}function wx(r){if(r.signatures.length>1)throw new Error("Cant convert to compact jws");return`${r.signatures[0].protected}.${r.payload}.${r.signatures[0].signature}`}function Ex(r,e){if(e){let t=e.toISOString().split(".")[0]+"Z";return`${r}?versionTime=${t}`}else return r}function _x(r){return r?Array.isArray(r)?r:[r]:[]}var AT={...dx()};function TT(r){return"registry"in r&&"cache"in r}var Qs=class{get capability(){if(!this._capability)throw new Error("DID has no capability attached");return this._capability}get hasCapability(){return this._capability!=null}get parent(){if(!this._parentId)throw new Error("DID has no parent DID");return this._parentId}get hasParent(){return this._parentId!=null}get id(){if(this._id==null)throw new Error("DID is not authenticated");return this._id}get authenticated(){return this._id!=null}withCapability(e){return new Qs({provider:this._client?.connection,resolver:this._resolver,capability:e,parent:this._parentId})}setProvider(e){if(this._client==null)this._client=new mf(e);else if(this._client.connection!==e)throw new Error("A different provider is already set, create a new DID instance to use another provider")}setResolver(e,t){this._resolver=TT(e)?e:new au(e,t)}async authenticate({provider:e,paths:t=[],aud:n}={}){if(e!=null&&this.setProvider(e),this._client==null)throw new Error("No provider available");let i=mx(),s=await this._client.request("did_authenticate",{nonce:i,aud:n,paths:t}),{kid:a}=await this.verifyJWS(s),u=Ju(s.payload);if(!a.includes(u.did))throw new Error("Invalid authencation response, kid mismatch");if(u.nonce!==i)throw new Error("Invalid authencation response, wrong nonce");if(u.aud!==n)throw new Error("Invalid authencation response, wrong aud");if(u.exp<Date.now()/1e3)throw new Error("Invalid authencation response, expired");return this._id=u.did,this._id}async createJWS(e,t={}){if(this._client==null)throw new Error("No provider available");if(this._id==null)throw new Error("DID is not authenticated");if(this._capability){let i=this._capability.p.exp;if(i&&Date.parse(i)<Date.now())throw new Error("Capability is expired, cannot create a valid signature");let s=await Pa.fromCacao(this._capability),a=Le.asCID(s.cid);if(!a)throw new Error("Capability CID of the JWS cannot be set to the capability payload cid as they are incompatible");t.protected=t.protected||{},t.protected.cap=`ipfs://${a?.toString()}`}let{jws:n}=await this._client.request("did_createJWS",{did:this._id,...t,payload:e});return n}async createDagJWS(e,t={}){let{cid:n,linkedBlock:i}=await ux(e),s=yx(n.bytes);Object.assign(t,{linkedBlock:gx(i)});let a=await this.createJWS(s,t),u=Le.asCID(n);if(!u)throw new Error("CID of the JWS cannot be set to the encoded payload cid as they are incompatible");if(a.link=u,this._capability){let v=await Pa.fromCacao(this._capability);return{jws:a,linkedBlock:i,cacaoBlock:v.bytes}}return{jws:a,linkedBlock:i}}async verifyJWS(e,t={}){t=Object.assign({verifiers:AT},t),typeof e!="string"&&(e=wx(e));let n=Ju(e.split(".")[0]).kid;if(!n)throw new Error('No "kid" found in jws');let i=await this.resolve(n);if(!t.disableTimecheck){let w=i.didDocumentMetadata?.nextUpdate;if(w){let M=t.revocationPhaseOutSecs?t.revocationPhaseOutSecs*1e3:0,k=new Date(w).valueOf()+M;if(!(t.atTime&&t.atTime.getTime()<k))throw new Error(`invalid_jws: signature authored with a revoked DID version: ${n}`)}let E=i.didDocumentMetadata?.updated;if(E&&t.atTime&&t.atTime.getTime()<new Date(E).valueOf())throw new Error(`invalid_jws: signature authored before creation of DID version: ${n}`)}let a=i.didDocument?.id;if(t.issuer&&t.issuer===t.capability?.p.iss&&a===t.capability.p.aud){if(!t.verifiers)throw new Error("Registered verifiers needed for CACAO");await Mo.verify(t.capability,{disableExpirationCheck:t.disableTimecheck,atTime:t.atTime?t.atTime:void 0,revocationPhaseOutSecs:t.revocationPhaseOutSecs,verifiers:t.verifiers??{}})}else if(t.issuer&&t.issuer!==a){let w=Ex(t.issuer,t.atTime),M=(await this.resolve(w)).didDocument?.controller,k=_x(M);if(t.capability?.s&&t.capability.p.aud===a&&k.includes(t.capability.p.iss))await Mo.verify(t.capability,{atTime:t.atTime?t.atTime:void 0,revocationPhaseOutSecs:t.revocationPhaseOutSecs,verifiers:t.verifiers??{}});else if(!(a?k.includes(a):!1))throw new Error(`invalid_jws: not a valid verificationMethod for issuer: ${n}`)}let u=i.didDocument?.verificationMethod||[];v6(e,u);let v;try{v=Ju(e.split(".")[1])}catch{}return{kid:n,payload:v,didResolutionResult:i}}async createJWE(e,t,n={}){let i=await x6(t,this._resolver);return y6(e,i,n.protectedHeader,n.aad)}async createDagJWE(e,t,n={}){let i=await hx(e);return this.createJWE(i,t,n)}async decryptJWE(e,t={}){if(this._client==null)throw new Error("No provider available");if(this._id==null)throw new Error("DID is not authenticated");let{cleartext:n}=await this._client.request("did_decryptJWE",{did:this._id,...t,jwe:e});return xx(n)}async decryptDagJWE(e){let t=await this.decryptJWE(e);return lx(t)}async resolve(e){let t=await this._resolver.resolve(e);if(t.didResolutionMetadata.error){let{error:n,message:i}=t.didResolutionMetadata,s=i?`, ${i}`:"";throw new Error(`Failed to resolve ${e}: ${n}${s}`)}return t}constructor({provider:e,resolver:t={},resolverOptions:n,capability:i,parent:s}={}){if(e!=null&&(this._client=new mf(e)),i){if(this._capability=i,this._parentId=this._capability.p.iss,s&&this._parentId!==s)throw new Error("Capability issuer and parent not equal")}else s&&(this._parentId=s);this.setResolver(t,n)}};function kT(r,e){if(e.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object")}function CT(r,e){return e.get?e.get.call(r):e.value}function DT(r,e,t){if(e.set)e.set.call(r,t);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=t}}function Mx(r,e,t){if(!e.has(r))throw new TypeError("attempted to "+t+" private field on non-instance");return e.get(r)}function Hn(r,e){var t=Mx(r,e,"get");return CT(r,t)}function Gd(r,e,t){kT(r,e),e.set(r,t)}function Jd(r,e,t){var n=Mx(r,e,"set");return DT(r,n,t),t}async function Vu(r){let e=new Hu(r||(0,Wd.randomBytes)(32)),t=new Qs({provider:e,resolver:cx.getResolver()});return await t.authenticate(),t}async function Yd(r,e){let t=r.withCapability(e);return await t.authenticate(),t}function IT(r){return Ge(He(JSON.stringify(r)),"base64url")}function OT(r){return JSON.parse(Ge(He(r,"base64url")))}function RT(r){return Ge(r,"base64pad")}function NT(r){return He(r,"base64pad")}var vf=new WeakMap,Vd=new WeakMap,Ji=new WeakMap,Vi=class{static async authorize(e,t={}){if(!t.resources||t.resources.length===0)throw new Error("Required: resource argument option when authorizing");let n=t,i=(0,Wd.randomBytes)(32),s=await Vu(i);if(n.uri=s.id,t.expiresInSecs){let v=new Date(Date.now()+t.expiresInSecs*1e3);n.expirationTime=v.toISOString()}let a=await e(t),u=await Yd(s,a);return new Vi({cacao:a,keySeed:i,did:u})}static async initDID(e,t){let n=e.withCapability(t);return await n.authenticate(),n}get did(){return Hn(this,vf)}serialize(){let e={sessionKeySeed:RT(Hn(this,Vd)),cacao:Hn(this,Ji)};return IT(e)}static async fromSession(e){let{sessionKeySeed:t,cacao:n}=OT(e),i=NT(t),s=await Vu(i),a=await Vi.initDID(s,n);return new Vi({cacao:n,keySeed:i,did:a})}get hasSession(){return!!Hn(this,Ji)&&!!Hn(this,vf)}get isExpired(){let e=Hn(this,Ji).p.exp;return e?Date.parse(e)<Date.now():!1}get expireInSecs(){let e=Hn(this,Ji).p.exp;if(!e)throw new Error("Session does not expire");let t=Date.parse(e)-Date.now();return t<0?0:t/1e3}get authorizations(){return Hn(this,Ji)?.p.resources??[]}get cacao(){return Hn(this,Ji)}isAuthorized(e){return!this.hasSession||this.isExpired?!1:e?e.every(t=>this.authorizations.includes(t)):!0}get id(){return Hn(this,vf).parent}constructor(e){Gd(this,vf,{writable:!0,value:void 0}),Gd(this,Vd,{writable:!0,value:void 0}),Gd(this,Ji,{writable:!0,value:void 0}),Jd(this,Vd,e.keySeed),Jd(this,Ji,e.cacao),Jd(this,vf,e.did)}};var Wu;(function(r){r[r.PREFER_CACHE=0]="PREFER_CACHE",r[r.SYNC_ALWAYS=1]="SYNC_ALWAYS",r[r.NEVER_SYNC=2]="NEVER_SYNC"})(Wu||(Wu={}));var jT=Je(yo(),1);var Sx={tile:0,"caip10-link":1,model:2,MID:3,UNLOADABLE:4};function PT(r){let e=Sx[r];if(typeof e<"u")return e;throw new Error(`No stream type registered for name ${r}`)}function BT(r){let e=Object.entries(Sx).find(([,t])=>t===r);if(e)return e[0];throw new Error(`No stream type registered for index ${r}`)}var zn=class{};zn.nameByCode=BT;zn.codeByName=PT;function ea(r){let e,t,n;return typeof r=="object"?(e=r.hashFunction,t=r.expiring,n=r.tags):e=r,(i,s,a)=>{if(a.value!=null)a.value=Ax(a.value,e,t,n);else if(a.get!=null)a.get=Ax(a.get,e,t,n);else throw"Only put a Memoize() decorator on a method or get accessor."}}var Xd=new Map;function Ax(r,e,t=0,n){let i=Symbol("__memoized_map__");return function(...s){let a;this.hasOwnProperty(i)||Object.defineProperty(this,i,{configurable:!1,enumerable:!1,writable:!1,value:new Map});let u=this[i];if(Array.isArray(n))for(let v of n)Xd.has(v)?Xd.get(v).push(u):Xd.set(v,[u]);if(e||s.length>0||t>0){let v;e===!0?v=s.map(M=>M.toString()).join("!"):e?v=e.apply(this,s):v=s[0];let w=`${v}__timestamp`,E=!1;if(t>0)if(!u.has(w))E=!0;else{let M=u.get(w);E=Date.now()-M>t}u.has(v)&&!E?a=u.get(v):(a=r.apply(this,s),u.set(v,a),t>0&&u.set(w,Date.now()))}else{let v=this;u.has(v)?a=u.get(v):(a=r.apply(this,s),u.set(v,a))}return a}}rr();yi();Xo();var rp=Je(no(),1);function Zd(r){try{return r()}catch(e){return e}}rr();var Qd=Je(no(),1);vi();function Go(r){let e=Qd.default.decode(r),t=Qd.default.decode.bytes,n=r.subarray(t);return[e,n,t]}function LT(r){return r===0||r===1}function ep(r){let[e,t]=Go(r);if(!LT(e))throw new Error(`Unknown CID version ${e}`);let[n,i]=Go(t),[,s,a]=Go(i),[u,,v]=Go(s),w=i.subarray(0,a+v+u),E=i.subarray(a+v+u);return[Le.create(e,n,to(w)),E]}rr();yi();function tp(r,e="StreamRef"){let[t,n]=Go(r);if(t!==206)throw new Error(`Invalid ${e}, does not include streamid codec`);let[i,s]=Go(n),a=ep(s),[u,v]=a;if(v.length===0)return{kind:"stream-id",type:i,genesis:u};if(v.length===1&&v[0]===0)return{kind:"commit-id",type:i,genesis:u,commit:null};{let[w]=ep(v);return{kind:"commit-id",type:i,genesis:u,commit:w}}}var $T=/(ceramic:\/\/|\/ceramic\/)?([a-zA-Z0-9]+)(\?commit=([a-zA-Z0-9]+))?/;function Tx(r,e="StreamRef"){let t=$T.exec(r)||[],n=t[2];if(!n)throw new Error(`Malformed ${e} string: ${r}`);let i=jt.decode(n),s=tp(i),a=t[4];return a?{kind:"commit-id",type:s.type,genesis:s.genesis,commit:qT(s.genesis,a)}:s}function FT(r){try{return typeof r=="string"?Le.parse(r):Le.asCID(r)}catch{return null}}function qT(r,e=null){if(!e||e==="0")return null;let t=FT(e);if(t)return r.equals(t)?null:t;throw new Error("Cannot specify commit as a number except to request commit 0 (the genesis commit)")}var gf=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Wr=function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},np=class extends Error{constructor(e){super(`Invalid StreamID bytes ${jt.encode(e)}: contains commit`)}},ip=class extends Error{constructor(e){super(`Invalid StreamID string ${e}: contains commit`)}};function Cx(r){let e=tp(r,"StreamID");if(e.kind==="stream-id")return new dt(e.type,e.genesis);throw new np(r)}function zT(r){return Zd(()=>Cx(r))}function Dx(r){let e=Tx(r,"StreamID");if(e.kind==="stream-id")return new dt(e.type,e.genesis);throw new ip(r)}function KT(r){return Zd(()=>Dx(r))}var kx=Symbol.for("@ceramicnetwork/streamid/StreamID"),dt=class{constructor(e,t){if(this._tag=kx,!(e||e===0))throw new Error("StreamID constructor: type required");if(!t)throw new Error("StreamID constructor: cid required");this._type=typeof e=="string"?zn.codeByName(e):e,this._cid=typeof t=="string"?Le.parse(t):t}static isInstance(e){return typeof e=="object"&&"_tag"in e&&e._tag===kx}static async fromGenesis(e,t){let n=await jn({value:t,codec:Sr,hasher:Mn});return new dt(e,n.cid)}get type(){return this._type}get typeName(){return zn.nameByCode(this._type)}get cid(){return this._cid}get bytes(){let e=rp.default.encode(206),t=rp.default.encode(this.type);return yr([e,t,this.cid.bytes])}get baseID(){return new dt(this._type,this._cid)}equals(e){return dt.isInstance(e)?this.type===e.type&&this.cid.equals(e.cid):!1}toString(){return jt.encode(this.bytes)}toUrl(){return`ceramic://${this.toString()}`}[Symbol.for("nodejs.util.inspect.custom")](){return`StreamID(${this.toString()})`}[Symbol.toPrimitive](){return this.toString()}};dt.fromBytes=Cx;dt.fromBytesNoThrow=zT;dt.fromString=Dx;dt.fromStringNoThrow=KT;gf([ea(),Wr("design:type",String),Wr("design:paramtypes",[])],dt.prototype,"typeName",null);gf([ea(),Wr("design:type",Uint8Array),Wr("design:paramtypes",[])],dt.prototype,"bytes",null);gf([ea(),Wr("design:type",dt),Wr("design:paramtypes",[])],dt.prototype,"baseID",null);gf([ea(),Wr("design:type",Function),Wr("design:paramtypes",[]),Wr("design:returntype",String)],dt.prototype,"toString",null);gf([ea(),Wr("design:type",Function),Wr("design:paramtypes",[]),Wr("design:returntype",String)],dt.prototype,"toUrl",null);var Ix;(function(r){r[r.GENESIS=0]="GENESIS",r[r.PARTIAL=1]="PARTIAL",r[r.SIGNED=2]="SIGNED"})(Ix||(Ix={}));var yf;(function(r){r[r.NOT_REQUESTED=0]="NOT_REQUESTED",r[r.PENDING=1]="PENDING",r[r.PROCESSING=2]="PROCESSING",r[r.ANCHORED=3]="ANCHORED",r[r.FAILED=4]="FAILED"})(yf||(yf={}));var Ox;(function(r){r[r.GENESIS=0]="GENESIS",r[r.SIGNED=1]="SIGNED",r[r.ANCHOR=2]="ANCHOR"})(Ox||(Ox={}));var xf=Je(yo(),1);rr();function mi(r){let e=Le.asCID(r);if(e)return e;if(typeof r=="string")return Le.parse(r);if(r instanceof Uint8Array)return Le.decode(r);throw new Error(`${r} cannot be converted to a CID`)}var Rx=0,pt=class{static streamIdFromState(e){return new dt(e.type,e.log[0].cid)}static serializeCommit(e){let t=(0,xf.default)(e);return pt.isSignedCommitContainer(t)?(t.jws.link=t.jws.link.toString(),t.linkedBlock=Ge(t.linkedBlock,"base64"),t.cacaoBlock&&(t.cacaoBlock=Ge(t.cacaoBlock,"base64")),t):(pt.isSignedCommit(e)&&(t.link=t.link.toString()),pt.isAnchorCommit(e)&&(t.proof=t.proof.toString()),t.id&&(t.id=t.id.toString()),t.prev&&(t.prev=t.prev.toString()),e.header?.model&&(t.header.model=Ge(e.header.model,"base64")),t)}static deserializeCommit(e){let t=(0,xf.default)(e);return pt.isSignedCommitContainer(t)?(t.jws.link=mi(t.jws.link),t.linkedBlock=He(t.linkedBlock,"base64"),t.cacaoBlock&&(t.cacaoBlock=He(t.cacaoBlock,"base64")),t):(pt.isSignedCommit(t)&&(t.link=mi(t.link)),pt.isAnchorCommit(t)&&(t.proof=mi(t.proof)),t.id&&(t.id=mi(t.id)),t.prev&&(t.prev=mi(t.prev)),t.header?.model&&(t.header.model=He(t.header.model,"base64")),t)}static serializeState(e){let t=(0,xf.default)(e);return t.log=t.log.map(n=>({...n,cid:n.cid.toString()})),t.anchorStatus!=null&&(t.anchorStatus=yf[t.anchorStatus]),t.anchorProof!=null&&(t.anchorProof.txHash=t.anchorProof.txHash.toString(),t.anchorProof.root=t.anchorProof.root.toString()),e.metadata?.model&&(t.metadata.model=e.metadata.model.toString()),e.next?.metadata?.model&&(t.next.metadata.model=e.next.metadata.model.toString()),e.metadata?.unique&&e.type!=Rx&&(t.metadata.unique=Ge(t.metadata.unique,"base64")),t.doctype=zn.nameByCode(t.type),t}static deserializeState(e){if(!e)return null;let t=(0,xf.default)(e);return t.doctype&&(t.type=zn.codeByName(t.doctype),delete t.doctype),t.log=t.log.map(n=>({...n,cid:mi(n.cid)})),t.anchorProof&&(t.anchorProof.txHash=mi(t.anchorProof.txHash),t.anchorProof.root=mi(t.anchorProof.root)),t.anchorStatus&&(t.anchorStatus=yf[t.anchorStatus]),e.metadata?.model&&(t.metadata.model=dt.fromString(e.metadata.model)),e.next?.metadata?.model&&(t.next.metadata.model=dt.fromString(e.next.metadata.model)),e.metadata?.unique&&e.type!=Rx&&(t.metadata.unique=He(e.metadata.unique,"base64")),t}static statesEqual(e,t){return JSON.stringify(pt.serializeState(e))===JSON.stringify(pt.serializeState(t))}static isStateSupersetOf(e,t){if(e.log.length<t.log.length)return!1;for(let n in t.log)if(!e.log[n].cid.equals(t.log[n].cid))return!1;return!(e.log.length===t.log.length&&e.anchorStatus!=t.anchorStatus)}static assertCommitLinksToState(e,t){let n=this.streamIdFromState(e);if(t.id&&!t.id.equals(e.log[0].cid))throw new Error(`Invalid genesis CID in commit for StreamID ${n.toString()}. Found: ${t.id}, expected ${e.log[0].cid}`);let i=e.log[e.log.length-1].cid;if(!t.prev.equals(i))throw new Error(`Commit doesn't properly point to previous commit in log. Expected ${i}, found 'prev' ${t.prev}`)}static async convertCommitToSignedCommitContainer(e,t){if(pt.isSignedCommit(e)){let n=await t.block.get(e.link);return{jws:e,linkedBlock:n}}return e}static isSignedCommitContainer(e){return e&&e.jws!==void 0}static isSignedCommit(e){return e&&e.link!==void 0}static isAnchorCommit(e){return e&&e.proof!==void 0}static isSignedCommitData(e){return e&&e.envelope!==void 0}static isAnchorCommitData(e){return e&&e.proof!==void 0}static commitDataToLogEntry(e,t){let n={cid:e.cid,type:t};return e?.capability?.p?.exp&&(n.expirationTime=Math.floor(Date.parse(e.capability.p.exp)/1e3)),e.timestamp&&(n.timestamp=e.timestamp),n}static checkForCacaoExpiration(e){let t=Math.floor(Date.now()/1e3);for(let n of e.log){let i=n.timestamp??t;if(n.expirationTime&&n.expirationTime<i)throw new Error(`CACAO expired: Commit ${n.cid.toString()} of Stream ${pt.streamIdFromState(e).toString()} has a CACAO that expired at ${n.expirationTime}. Loading the stream with 'sync: SyncOptions.ALWAYS_SYNC' will restore the stream to a usable state, by discarding the invalid commits (this means losing the data from those invalid writes!)`)}}};var Yu=class extends va{next(e){let t=this.value;pt.statesEqual(t,e)||super.next(e)}};var Kn=class extends it{constructor(e,t,n){super(i=>{this.state$.observers.length===0&&(this.periodicSubscription=mo(0,n).pipe(throttle(()=>this._syncState(this.id,{sync:Wu.PREFER_CACHE}))).subscribe()),this.state$.subscribe(i).add(()=>{this.state$.observers.length===0&&this.periodicSubscription?.unsubscribe()})}),this.state$=new Yu(e),this._apiUrl=new URL(t)}get value(){return this.state$.value}get state(){return this.state$.value}next(e){this.state$.next(e)}async _syncState(e,t){let n=await Kn._load(e,this._apiUrl,t);this.state$.next(pt.deserializeState(n))}get id(){return new StreamID(this.state$.value.type,this.state$.value.log[0].cid)}static async createFromGenesis(e,t,n,i,s){let a=new URL("./streams",e),{state:u}=await fetchJson(a,{method:"post",body:{type:t,genesis:pt.serializeCommit(n),opts:i}});return new Kn(pt.deserializeState(u),e,s)}static async applyCommit(e,t,n,i,s){let a=new URL("./commits",e),{state:u}=await fetchJson(a,{method:"post",body:{streamId:t.toString(),commit:pt.serializeCommit(n),opts:i}});return new Kn(pt.deserializeState(u),e,s)}static async _load(e,t,n){let i=serializeObjectToSearchParams(new URL(`./streams/${e}`,t),n),{state:s}=await fetchJson(i);return s}static async load(e,t,n,i){let s=await Kn._load(e,t,i);return new Kn(pt.deserializeState(s),t,n)}static async loadStreamCommits(e,t){let n=new URL(`./commits/${e}`,t),{commits:i}=await fetchJson(n);return i.map(s=>({cid:s.cid,value:pt.deserializeCommit(s.value)}))}complete(){this.state$.complete()}};return ta(GT);})();

const Cacao = test.Cacao;
const DIDSession = test.DIDSession;
const CeramicClient = test.CeramicClient;
const TileDocument = test.TileDocument;

const personalSign = async () => {

    const sigShare = await LitActions.ethPersonalSignMessageEcdsa({
        message: toSign,
        publicKey,
        sigName: "sig1",
    });

    console.log("sigShare =>", sigShare);
    
};

const getDIDSession = async () => {
    const ceramic = new CeramicClient("https://node1.orbis.club/");

    // const threeMonths = 60 * 60 * 24 * 90;
    // const authMethod = (async () => {return Cacao.fromSiweMessage(siweMessage)});

    // start
    const didKey = await test.createDIDKey(keySeed);

    var cacao = Cacao.fromSiweMessage(siweMessage);

    const _did = await test.createDIDCacao(didKey, cacao);

    console.log("_did =>", _did);

    var didSession = new DIDSession({
        cacao,
        keySeed,
        did: _did
    });

    console.log("didSession =>", didSession);

    const did = didSession.did;
    console.log("did =>", did);

    ceramic.did = did;
    console.log("ceramic.did =>", ceramic.did);

    // post
    const postSchemaCommit = "k1dpgaqe3i64kjuyet4w0zyaqwamf9wrp1jim19y27veqkppo34yghivt2pag4wxp0fv2yl4hedynpfuynp2wvd8s7ctabea6lx732xrr8b0cgqauwlh0vwg6";

    const metadata = {
        family: "orbis",
        controllers: [didSession.id],
        tags: ["orbis", "post"],
        schema: postSchemaCommit
    };

    const INPUT_HOST = "https://node1.orbis.club/"
    const API_PATH = '/api/v0/';
    const apiUrl = new URL(API_PATH, INPUT_HOST);
    const STREAM_TYPE_ID = 0;

    const commit = await TileDocument.makeGenesis(ceramic, 'is working', metadata);
    console.log("commit =>", commit);

    const serializedCommit = test.StreamUtils.serializeCommit(commit);
    console.log("serializedCommit =>", serializedCommit);

    const url = new URL('./streams', apiUrl);
    console.log("url =>", url);

    const res = await fetch(url, {
        method: 'post',
        body: JSON.stringify({
            type: STREAM_TYPE_ID,
            genesis: serializedCommit,
            opts: {
                anchor: true,
                publish: true,
                pin: true,
                sync: 0,
            }
        }),
        headers: { 'Content-Type': 'application/json' },
    });

    console.log("res =>", res);


    // const postSchemaCommit = "k1dpgaqe3i64kjuyet4w0zyaqwamf9wrp1jim19y27veqkppo34yghivt2pag4wxp0fv2yl4hedynpfuynp2wvd8s7ctabea6lx732xrr8b0cgqauwlh0vwg6";

    // create a post
    // let doc = await test.TileDocument.create(
    //     ceramic,
    //     /** Content of the post */
    //     "HELLO WORLD!",
    //     /** Metadata */
    //     {
    //         family: "orbis",
    //         controllers: [session.id],
    //         tags: ["orbis", "post"],
    //         schema: postSchemaCommit
    //     },
    // );

    // console.log("doc =>", doc);


}

// triggers
if (functionName === 'personalSign()') {
    console.log("...running personalSign");
    personalSign();
}

if (functionName === 'getDIDSession()') {
    console.log("...running getDIDSession");
    getDIDSession();
}
            

